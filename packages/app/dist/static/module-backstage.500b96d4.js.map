{"version":3,"sources":["webpack://app/../node_modules/@backstage/theme/dist/index.esm.js","webpack://app/../node_modules/@backstage/app-defaults/dist/index.esm.js","webpack://app/../node_modules/@backstage/catalog-client/dist/index.esm.js","webpack://app/../node_modules/@backstage/catalog-model/dist/index.esm.js","webpack://app/../node_modules/@backstage/catalog-model/node_modules/ajv/dist/ajv.js","webpack://app/../node_modules/@backstage/catalog-model/node_modules/ajv/dist/compile/codegen/code.js","webpack://app/../node_modules/@backstage/catalog-model/node_modules/ajv/dist/compile/codegen/index.js","webpack://app/../node_modules/@backstage/catalog-model/node_modules/ajv/dist/compile/codegen/scope.js","webpack://app/../node_modules/@backstage/catalog-model/node_modules/ajv/dist/compile/errors.js","webpack://app/../node_modules/@backstage/catalog-model/node_modules/ajv/dist/compile/index.js","webpack://app/../node_modules/@backstage/catalog-model/node_modules/ajv/dist/compile/names.js","webpack://app/../node_modules/@backstage/catalog-model/node_modules/ajv/dist/compile/ref_error.js","webpack://app/../node_modules/@backstage/catalog-model/node_modules/ajv/dist/compile/resolve.js","webpack://app/../node_modules/@backstage/catalog-model/node_modules/ajv/dist/compile/rules.js","webpack://app/../node_modules/@backstage/catalog-model/node_modules/ajv/dist/compile/util.js","webpack://app/../node_modules/@backstage/catalog-model/node_modules/ajv/dist/compile/validate/applicability.js","webpack://app/../node_modules/@backstage/catalog-model/node_modules/ajv/dist/compile/validate/boolSchema.js","webpack://app/../node_modules/@backstage/catalog-model/node_modules/ajv/dist/compile/validate/dataType.js","webpack://app/../node_modules/@backstage/catalog-model/node_modules/ajv/dist/compile/validate/defaults.js","webpack://app/../node_modules/@backstage/catalog-model/node_modules/ajv/dist/compile/validate/index.js","webpack://app/../node_modules/@backstage/catalog-model/node_modules/ajv/dist/compile/validate/keyword.js","webpack://app/../node_modules/@backstage/catalog-model/node_modules/ajv/dist/compile/validate/subschema.js","webpack://app/../node_modules/@backstage/catalog-model/node_modules/ajv/dist/core.js","webpack://app/../node_modules/@backstage/catalog-model/node_modules/ajv/dist/runtime/equal.js","webpack://app/../node_modules/@backstage/catalog-model/node_modules/ajv/dist/runtime/ucs2length.js","webpack://app/../node_modules/@backstage/catalog-model/node_modules/ajv/dist/runtime/uri.js","webpack://app/../node_modules/@backstage/catalog-model/node_modules/ajv/dist/runtime/validation_error.js","webpack://app/../node_modules/@backstage/catalog-model/node_modules/ajv/dist/vocabularies/applicator/additionalItems.js","webpack://app/../node_modules/@backstage/catalog-model/node_modules/ajv/dist/vocabularies/applicator/additionalProperties.js","webpack://app/../node_modules/@backstage/catalog-model/node_modules/ajv/dist/vocabularies/applicator/allOf.js","webpack://app/../node_modules/@backstage/catalog-model/node_modules/ajv/dist/vocabularies/applicator/anyOf.js","webpack://app/../node_modules/@backstage/catalog-model/node_modules/ajv/dist/vocabularies/applicator/contains.js","webpack://app/../node_modules/@backstage/catalog-model/node_modules/ajv/dist/vocabularies/applicator/dependencies.js","webpack://app/../node_modules/@backstage/catalog-model/node_modules/ajv/dist/vocabularies/applicator/if.js","webpack://app/../node_modules/@backstage/catalog-model/node_modules/ajv/dist/vocabularies/applicator/index.js","webpack://app/../node_modules/@backstage/catalog-model/node_modules/ajv/dist/vocabularies/applicator/items.js","webpack://app/../node_modules/@backstage/catalog-model/node_modules/ajv/dist/vocabularies/applicator/items2020.js","webpack://app/../node_modules/@backstage/catalog-model/node_modules/ajv/dist/vocabularies/applicator/not.js","webpack://app/../node_modules/@backstage/catalog-model/node_modules/ajv/dist/vocabularies/applicator/oneOf.js","webpack://app/../node_modules/@backstage/catalog-model/node_modules/ajv/dist/vocabularies/applicator/patternProperties.js","webpack://app/../node_modules/@backstage/catalog-model/node_modules/ajv/dist/vocabularies/applicator/prefixItems.js","webpack://app/../node_modules/@backstage/catalog-model/node_modules/ajv/dist/vocabularies/applicator/properties.js","webpack://app/../node_modules/@backstage/catalog-model/node_modules/ajv/dist/vocabularies/applicator/propertyNames.js","webpack://app/../node_modules/@backstage/catalog-model/node_modules/ajv/dist/vocabularies/applicator/thenElse.js","webpack://app/../node_modules/@backstage/catalog-model/node_modules/ajv/dist/vocabularies/code.js","webpack://app/../node_modules/@backstage/catalog-model/node_modules/ajv/dist/vocabularies/core/id.js","webpack://app/../node_modules/@backstage/catalog-model/node_modules/ajv/dist/vocabularies/core/index.js","webpack://app/../node_modules/@backstage/catalog-model/node_modules/ajv/dist/vocabularies/core/ref.js","webpack://app/../node_modules/@backstage/catalog-model/node_modules/ajv/dist/vocabularies/discriminator/index.js","webpack://app/../node_modules/@backstage/catalog-model/node_modules/ajv/dist/vocabularies/discriminator/types.js","webpack://app/../node_modules/@backstage/catalog-model/node_modules/ajv/dist/vocabularies/draft7.js","webpack://app/../node_modules/@backstage/catalog-model/node_modules/ajv/dist/vocabularies/format/format.js","webpack://app/../node_modules/@backstage/catalog-model/node_modules/ajv/dist/vocabularies/format/index.js","webpack://app/../node_modules/@backstage/catalog-model/node_modules/ajv/dist/vocabularies/metadata.js","webpack://app/../node_modules/@backstage/catalog-model/node_modules/ajv/dist/vocabularies/validation/const.js","webpack://app/../node_modules/@backstage/catalog-model/node_modules/ajv/dist/vocabularies/validation/enum.js","webpack://app/../node_modules/@backstage/catalog-model/node_modules/ajv/dist/vocabularies/validation/index.js","webpack://app/../node_modules/@backstage/catalog-model/node_modules/ajv/dist/vocabularies/validation/limitItems.js","webpack://app/../node_modules/@backstage/catalog-model/node_modules/ajv/dist/vocabularies/validation/limitLength.js","webpack://app/../node_modules/@backstage/catalog-model/node_modules/ajv/dist/vocabularies/validation/limitNumber.js","webpack://app/../node_modules/@backstage/catalog-model/node_modules/ajv/dist/vocabularies/validation/limitProperties.js","webpack://app/../node_modules/@backstage/catalog-model/node_modules/ajv/dist/vocabularies/validation/multipleOf.js","webpack://app/../node_modules/@backstage/catalog-model/node_modules/ajv/dist/vocabularies/validation/pattern.js","webpack://app/../node_modules/@backstage/catalog-model/node_modules/ajv/dist/vocabularies/validation/required.js","webpack://app/../node_modules/@backstage/catalog-model/node_modules/ajv/dist/vocabularies/validation/uniqueItems.js","webpack://app/../node_modules/@backstage/config/dist/index.esm.js","webpack://app/../node_modules/@backstage/core-app-api/dist/index.esm.js","webpack://app/../node_modules/@backstage/core-components/dist/index.esm.js","webpack://app/../node_modules/@backstage/core-plugin-api/dist/index.esm.js","webpack://app/../node_modules/@backstage/errors/dist/index.esm.js","webpack://app/../node_modules/@backstage/integration-react/dist/index.esm.js","webpack://app/../node_modules/@backstage/integration/dist/index.esm.js","webpack://app/../node_modules/@backstage/plugin-api-docs/dist/index.esm.js","webpack://app/../node_modules/@backstage/plugin-catalog-common/dist/index.esm.js","webpack://app/../node_modules/@backstage/plugin-catalog-graph/dist/index.esm.js","webpack://app/../node_modules/@backstage/plugin-catalog-import/dist/index.esm.js","webpack://app/../node_modules/@backstage/plugin-catalog-react/dist/index.esm.js","webpack://app/../node_modules/@backstage/plugin-catalog/dist/esm/index-84e3a83e.esm.js","webpack://app/../node_modules/@backstage/plugin-circleci/dist/index.esm.js","webpack://app/../node_modules/@backstage/plugin-github-actions/dist/index.esm.js","webpack://app/../node_modules/@backstage/plugin-org/dist/index.esm.js","webpack://app/../node_modules/@backstage/plugin-permission-common/dist/index.esm.js","webpack://app/../node_modules/@backstage/plugin-permission-react/dist/index.esm.js","webpack://app/../node_modules/@backstage/plugin-scaffolder/dist/esm/index-e49d2205.esm.js","webpack://app/../node_modules/@backstage/plugin-search-react/dist/index.esm.js","webpack://app/../node_modules/@backstage/plugin-search/dist/esm/index-0387f230.esm.js","webpack://app/../node_modules/@backstage/plugin-tech-radar/dist/index.esm.js","webpack://app/../node_modules/@backstage/plugin-techdocs-module-addons-contrib/dist/index.esm.js","webpack://app/../node_modules/@backstage/plugin-techdocs-react/node_modules/jss/dist/jss.esm.js","webpack://app/../node_modules/@backstage/plugin-techdocs-react/dist/index.esm.js","webpack://app/../node_modules/@backstage/plugin-techdocs/dist/esm/index-b9f615fb.esm.js","webpack://app/../node_modules/@backstage/plugin-user-settings/dist/index.esm.js","webpack://app/../node_modules/@backstage/version-bridge/dist/index.esm.js"],"names":["shapes","colorVariants","genPageTheme","props","_a","colors","shape","options","gradient","backgroundImage","fontColor","pageTheme","DEFAULT_HTML_FONT_SIZE","DEFAULT_FONT_FAMILY","createThemeOptions","palette","htmlFontSize","fontFamily","defaultPageTheme","pageTheme$1","themeId","createThemeOverrides","theme","themeOptions","baseTheme","createTheme","overrides","lightTheme","yellow","darkTheme","apis","configApi","alertApi","errorApi","identityApi","discoveryApi","oauthRequestApi","config","discovery","identity","OptionallyWrapInRouter","children","DefaultNotFoundPage","DefaultBootErrorPage","step","error","message","DefaultErrorBoundaryFallback","resetError","plugin","Button","components","icons","themes","ThemeProvider","CssBaseline","createApp","_b","_c","CATALOG_FILTER_EXISTS","CatalogClient","request","kind","namespace","name","id","filter","fields","offset","limit","after","params","filterItem","filterParts","key","value","v","query","entities","refCompare","a","b","aRef","bRef","entityRef","compoundName","response","facets","facet","type","target","dryRun","location","exists","locationRef","r","l","uid","entity","errors","method","path","url","headers","ENTITY_STATUS_CATALOG_PROCESSING_TYPE","isApiEntity","isComponentEntity","isDomainEntity","isGroupEntity","isLocationEntity","isResourceEntity","isSystemEntity","isUserEntity","DEFAULT_NAMESPACE","ANNOTATION_VIEW_URL","ANNOTATION_EDIT_URL","ANNOTATION_KUBERNETES_API_SERVER","ANNOTATION_KUBERNETES_API_SERVER_CA","ANNOTATION_KUBERNETES_AUTH_PROVIDER","DefaultNamespaceEntityPolicy","parseRefString","ref","colonI","slashI","getCompoundEntityRef","parseEntityRef","context","_d","defaultKind","defaultNamespace","parsed","textual","stringifyEntityRef","GroupDefaultParentEntityPolicy","parentEntityRef","group","CommonValidatorFunctions","separator","isValidPrefix","isValidSuffix","parts","$schema$b","$id$b","description$b","examples$a","type$3","required$2","additionalProperties$2","properties$2","entityEnvelopeSchema","$schema$a","$id$a","description$a","examples$9","type$2","required$1","additionalProperties$1","properties$1","entitySchema","$schema$9","$id$9","description$9","examples$8","type$1","required","additionalProperties","properties","entityMetaSchema","$schema$8","$id$8","description$8","definitions","commonSchema","compiledSchemaCache","refDependencyCandidates","throwAjvError","val","compileAjvSchema","schema","disableCache","cacheKey","cached","extraSchemas","getExtraSchemas","ajv","compiled","seen","selected","todo","current","getAllRefs","match","c","entityEnvelopeSchemaValidator","validate","data","entityKindSchemaValidator","softCandidates","e","entitySchemaValidator","KubernetesValidatorFunctions","n","defaultValidators","makeValidator","FieldFormatEntityPolicy","validators","_e","_f","_g","require","field","validator","isValid","expectation","optional","k","tags","i","links","defaultKnownFields","NoForeignRootFieldsEntityPolicy","knownFields","SchemaValidEntityPolicy","AllEntityPolicies","policies","result","policy","output","AnyEntityPolicy","EntityPolicies","$schema$7","$id$7","description$7","examples$7","allOf$7","schema$7","ajvCompiledJsonSchemaValidator","apiEntityV1alpha1Validator","$schema$6","$id$6","description$6","examples$6","allOf$6","schema$6","componentEntityV1alpha1Validator","$schema$5","$id$5","description$5","examples$5","allOf$5","schema$5","domainEntityV1alpha1Validator","$schema$4","$id$4","description$4","examples$4","allOf$4","schema$4","groupEntityV1alpha1Validator","$schema$3","$id$3","description$3","examples$3","allOf$3","schema$3","locationEntityV1alpha1Validator","RELATION_OWNED_BY","RELATION_OWNER_OF","RELATION_CONSUMES_API","RELATION_API_CONSUMED_BY","RELATION_PROVIDES_API","RELATION_API_PROVIDED_BY","RELATION_DEPENDS_ON","RELATION_DEPENDENCY_OF","RELATION_PARENT_OF","RELATION_CHILD_OF","RELATION_MEMBER_OF","RELATION_HAS_MEMBER","RELATION_PART_OF","RELATION_HAS_PART","$schema$2","$id$2","description$2","examples$2","allOf$2","schema$2","resourceEntityV1alpha1Validator","$schema$1","$id$1","description$1","examples$1","allOf$1","schema$1","systemEntityV1alpha1Validator","$schema","$id","description","examples","allOf","userEntityV1alpha1Validator","ANNOTATION_LOCATION","ANNOTATION_ORIGIN_LOCATION","ANNOTATION_SOURCE_LOCATION","parseLocationRef","splitIndex","stringifyLocationRef","getEntitySourceLocation","exports","core_1","draft7_1","discriminator_1","draft7MetaSchema","META_SUPPORT_DATA","META_SCHEMA_ID","Ajv","metaSchema","module","validate_1","codegen_1","_CodeOrName","Name","s","_Code","code","item","names","_","strs","args","addCodeArg","plus","str","expr","safeStringify","optimize","arg","interpolate","res","mergeExprItems","strConcat","c1","c2","x","stringify","getProperty","getEsmExportName","regexpCode","rx","code_1","scope_1","code_2","scope_2","Node","_names","_constants","Def","varKind","rhs","es5","_n","constants","optimizeExpr","Assign","lhs","sideEffects","addExprNames","AssignOp","op","Label","label","Break","Throw","AnyCode","ParentNode","nodes","opts","subtractNames","addNames","BlockNode","Root","Else","If","condition","cond","ns","not","For","ForLoop","iteration","ForRange","from","to","ForIter","loop","iterable","Func","async","Return","Try","Catch","Finally","CodeGen","extScope","prefix","prefixOrName","keyOrRef","scopeName","nameOrPrefix","constant","_constant","keyValues","thenBody","elseBody","node","forBody","arr","obj","tryBody","catchCode","finallyCode","body","nodeCount","len","toClose","funcBody","N1","N2","replaceName","canOptimize","items","par","andCode","mappend","and","orCode","or","y","ValueError","UsedValueState","Scope","prefixes","parent","ng","ValueScopeName","nameStr","property","itemIndex","line","ValueScope","valueKey","vs","_name","values","usedValues","getCode","valueCode","nameSet","def","util_1","names_1","keyword","schemaType","reportError","cxt","errorPaths","overrideAllErrors","it","gen","compositeRule","allErrors","errObj","errorObjectCode","addError","returnErrors","reportExtraError","resetErrorsCount","errsCount","extendErrors","schemaValue","err","errs","validateName","schemaEnv","E","createErrors","errorObject","errorInstancePath","errorSchemaPath","extraErrorProps","errorPath","instancePath","instPath","errSchemaPath","schemaPath","parentSchema","schPath","propertyName","topSchemaRef","validation_error_1","resolve_1","SchemaEnv","env","compileSchema","sch","_sch","getCompilingSchema","rootId","lines","ownProperties","_ValidationError","schemaCxt","sourceCode","validateCode","resolveRef","root","baseId","schOrFunc","resolve","schemaId","inlineOrCompile","schEnv","sameSchemaEnv","s1","s2","resolveSchema","p","refPath","getJsonPointer","schOrRef","schId","PREVENT_SCOPE_CHANGE","parsedRef","part","partSchema","$ref","MissingRefError","resolver","msg","equal","traverse","SIMPLE_INLINED","inlineRef","hasRef","countKeys","REF_KEYWORDS","count","getFullPath","normalize","normalizeId","_getFullPath","TRAILING_SLASH_HASH","resolveUrl","ANCHOR","getSchemaRefs","uriResolver","baseIds","pathPrefix","localRefs","schemaRefs","jsonPtr","parentJsonPtr","fullPath","addRef","addAnchor","_resolve","ambiguos","checkAmbiguosRef","anchor","sch1","sch2","_jsonTypes","jsonTypes","isJSONType","getRules","groups","toHash","hash","alwaysValidSchema","checkUnknownRules","schemaHasRules","self","rules","checkStrictMode","schemaHasRulesButRef","RULES","schemaRefOrVal","$data","unescapeFragment","unescapeJsonPointer","escapeFragment","escapeJsonPointer","eachItem","xs","f","makeMergeEvaluated","mergeNames","mergeToName","mergeValues","resultToName","toName","setEvaluated","evaluatedPropsToName","ps","snippets","useFunc","Type","getErrorPath","dataProp","dataPropType","jsPropertySyntax","isNumber","mode","schemaHasRulesForType","shouldUseGroup","rule","shouldUseRule","kwd","errors_1","boolError","topBoolOrEmptySchema","falseSchemaError","boolOrEmptySchema","valid","rules_1","applicability_1","DataType","getSchemaTypes","types","getJSONTypes","ts","coerceAndCheckDataType","coerceTo","coerceToTypes","checkTypes","wrongType","checkDataTypes","coerceData","reportTypeError","COERCIBLE","coerceTypes","t","dataType","coerced","coerceSpecificType","assignParentData","parentData","parentDataProperty","checkDataType","strictNums","correct","EQ","numCond","_cond","dataTypes","notObj","typeError","getTypeErrorContext","schemaCode","assignDefaults","ty","assignDefault","prop","defaultValue","childData","boolSchema_1","dataType_1","dataType_2","defaults_1","keyword_1","subschema_1","validateFunctionCode","isSchemaObj","checkKeywords","schemaCxtHasRules","topSchemaObjCode","validateFunction","funcSourceUrl","destructureValCxtES5","destructureValCxt","commentKeyword","checkNoDefault","resetEvaluated","typeAndKeywords","returnResults","subschemaCode","subSchemaObjCode","updateContext","checkAsyncSchema","checkRefsAndKeywords","schemaKeywords","checkedTypes","rootName","ValidationError","assignEvaluated","evaluated","typeErrors","keywordCode","checkStrictTypes","groupKeywords","iterateKeywords","useDefaults","checkContextTypes","checkMultipleTypes","checkKeywordTypes","includesType","strictTypesError","hasApplicableType","schTs","kwdT","KeywordCxt","getData","successAction","failAction","append","errorParams","assign","codeBlock","$dataValid","wrong$DataType","invalid$DataSchema","st","validateSchemaRef","appl","subschema","nextContext","ruleType","JSON_POINTER","RELATIVE_JSON_POINTER","dataLevel","dataNames","dataPathArr","jsonPointer","matches","up","errorMsg","segments","segment","pointerType","macroKeywordCode","macroSchema","schemaRef","useKeyword","funcKeywordCode","checkAsyncKeyword","validateRef","validateKeyword","assignValid","modifyData","reportErrs","ruleErrs","validateAsync","validateSync","addErrs","validateErrs","_await","passCxt","passSchema","validSchemaType","allowUndefined","validateKeywordUsage","deps","getSubschema","schemaProp","extendSubschemaData","dpType","nextData","dataContextProps","_nextData","extendSubschemaMode","jtdDiscriminator","jtdMetadata","ref_error_1","compile_1","codegen_2","$dataRefSchema","uri_1","defaultRegExp","flags","META_IGNORE_OPTIONS","EXT_SCOPE_NAMES","removedOptions","deprecatedOptions","MAX_EXPRESSION","requiredOptions","o","_h","_j","_k","_l","_m","_o","_p","_q","_r","_s","_t","_u","_v","_w","_x","_y","_z","_0","_optz","regExp","getLogger","formatOpt","checkOptions","getMetaSchemaOptions","addInitialFormats","addInitialKeywords","addInitialSchemas","meta","_dataRefSchema","schemaKeyRef","_meta","loadSchema","runCompileAsync","_schema","loadMetaSchema","_compileAsync","checkLoaded","loadMissingSchema","missingRef","_loadSchema","_validateSchema","throwOrLogError","keyRef","getSchEnv","kwdOrDef","checkKeyword","addRule","keywordMetaschema","definition","format","dataVar","text","keywordsJsonPointers","keywords","seg","schemaOrData","schemas","regex","validateSchema","addSchema","currentOpts","checkOpts","log","opt","optsSchemas","defs","metaOpts","noLogs","logger","KEYWORD_NAME","post","ruleGroup","addBeforeRule","before","_rule","$dataRef","ucs2length","length","pos","uri","validateAdditionalItems","validateItems","patProps","checkAdditionalProperties","additionalPropertyCode","isAdditional","definedProp","propsSchema","deleteAdditional","applyAdditionalSchema","schCxt","min","max","minContains","maxContains","validateItemsWithCount","schValid","checkLimits","_valid","block","depsCount","property_ies","missingProperty","propDeps","schDeps","splitDependencies","validatePropertyDeps","validateSchemaDeps","propertyDeps","schemaDeps","missing","hasProperty","depProp","hasThen","hasSchema","hasElse","validateIf","ifClause","validateClause","additionalItems_1","prefixItems_1","items_1","items2020_1","contains_1","dependencies_1","propertyNames_1","additionalProperties_1","properties_1","patternProperties_1","not_1","anyOf_1","oneOf_1","allOf_1","if_1","thenElse_1","getApplicator","draft2020","applicator","validateTuple","extraItems","schArr","checkStrictTuple","fullTuple","prefixItems","passing","validateOneOf","util_2","patterns","alwaysValidPatterns","checkProperties","validatePatternProperties","pat","checkMatchingProperties","validateProperties","alwaysValid","allProps","hasDefault","applyPropertySchema","checkReportMissingProp","noPropertyInData","checkMissingProp","reportMissingProp","hasPropFunc","isOwnProperty","propertyInData","allSchemaProperties","schemaMap","schemaProperties","callValidateCode","func","dataAndSchema","valCxt","newRegExp","usePattern","pattern","u","validateArray","validArr","notValid","validateUnion","id_1","ref_1","core","callRootRef","schOrEnv","callValidate","inlineRefSchema","callRef","getValidate","schName","$async","callAsyncRef","callSyncRef","addEvaluatedFrom","addErrorsFrom","source","schEvaluated","types_1","discrError","tagName","tag","oneOf","validateMapping","mapping","getMapping","tagValue","applyTagSchema","oneOfMapping","topRequired","hasRequired","tagRequired","propSch","addMappings","addMapping","DiscrError","validation_1","applicator_1","format_1","metadata_1","draft7Vocabularies","validate$DataFormat","validateFormat","fmts","fDef","fType","unknownFmt","invalidFmt","callFormat","validData","formatDef","unknownFormat","fmtType","fmtRef","getFormat","validCondition","unknownMsg","fmtDef","fmt","equal_1","useLoop","eql","getEql","loopEnum","vSchema","equalCode","limitNumber_1","multipleOf_1","limitLength_1","pattern_1","limitProperties_1","required_1","limitItems_1","uniqueItems_1","const_1","enum_1","validation","comp","ucs2length_1","ops","KWDs","prec","invalid","allErrorsMode","exitOnErrorMode","definedProperties","requiredKey","loopAllRequired","loopUntilMissing","j","itemTypes","validateUniqueItems","loopN","loopN2","indices","outer","CONFIG_KEY_PART_PATTERN","isObject","typeOf","typeName","expected","ConfigReader","fallback","configs","previousReader","filteredKeys","deprecatedKeys","reader","localKeys","fallbackKeys","fallbackValue","into","fallbackConfig","index","number","keyName","theValue","badKey","ApiAggregator","holders","apiRef","holder","api","ApiContext","ApiProvider","parentHolder","ApiResolver","factories","heap","allDeps","factory","dep","loading","impl","dependent","impls","ScopePriority","ScopePriority2","ApiFactoryRegistry","scope","priority","existing","tuple","refs","showLoginPopup","reject","width","height","left","top","popup","targetOrigin","messageListener","event","authResult","done","intervalId","errMessage","defaultJoinScopes","scopes","DefaultAuthConnector","environment","provider","joinScopes","sessionTransform","authInfo","popupUrl","payload","baseUrl","queryString","DirectAuthConnector","hasScopes$1","searched","searchFor","SessionScopeHelper","session","sessionScopes","newScope","PublishSubject","subscriber","onNext","onError","onComplete","observer","BehaviorSubject","SessionStateTracker","isSignedIn","RefreshingAuthSessionManager","connector","defaultScopes","sessionShouldRefresh","refreshedSession","currentScopes","refreshedScopes","newSession","StaticAuthSessionManager","AuthSessionStore","manager","storageKey","sessionJson","_key","DEFAULT_PROVIDER$9","OAuth2","scopeTransform","sessionManager","normalizedScopes","scopeList","DEFAULT_PROVIDER$8","GithubAuth","DEFAULT_PROVIDER$7","GitlabAuth","DEFAULT_PROVIDER$6","SCOPE_PREFIX$1","GoogleAuth","DEFAULT_PROVIDER$5","OKTA_OIDC_SCOPES","OKTA_SCOPE_PREFIX","OktaAuth","samlSessionSchema","DEFAULT_PROVIDER$4","SamlAuth","authSessionStore","DEFAULT_PROVIDER$3","MicrosoftAuth","DEFAULT_PROVIDER$2","OIDC_SCOPES","SCOPE_PREFIX","OneLoginAuth","DEFAULT_PROVIDER$1","BitbucketAuth","DEFAULT_PROVIDER","AtlassianAuth","AlertApiForwarder","alert","MultipleAnalyticsApi","actualApis","analyticsApi","NoOpAnalyticsApi","_event","STORAGE_KEY","AppThemeSelector","selector","initialThemeId","_a2","ERROR_PREFIX","UrlPatternDiscovery","urlStr","pluginId","ErrorAlerter","ErrorApiForwarder","UnhandledErrorForwarder","errorContext","validateFlagName","LocalStorageFeatureFlags","flag","state","enabled","jsonStr","json","entries","createFetchApi","middleware","m","IdentityAuthInjectorFetchMiddleware","allowUrl","headerName","headerValue","matcher","buildMatcher","token","next","input","init","buildPrefixMatcher","trimmedPrefixes","join","right","PluginProtocolResolverFetchMiddleware","hostname","pathname","search","username","password","base","authority","isUrl","FetchMiddlewares","hasScopes","moreScopess","moreScopes","OAuthPendingRequests","acc","reason","OAuthRequestManager","handler","scopeRequest","newRequests","buckets","WebStorage","presence","bucketPath","messageKey","snapshot","subscription","traverseElementTree","collectors","queue","contexts","element","nextContexts","collector","discoverer","createCollector","accumulatorFactory","visit","childDiscoverer","routeElementDiscoverer","pluginCollector","FeatureFlagged","featureFlagApi","isEnabled","MATCH_ALL_ROUTE","stringifyNode","anyNode","collectSubTree","routeRef","routingV2Collector","ctx","pathProp","mountPoint","parentChildren","elementProp","newObj","extension","others","routingV1Collector","currentObj","currentParentRouteRef","sticky","caseSensitive","currentCtxPath","routePath","featureFlagCollector","routeRefType","isRouteRef","isSubRouteRef","isExternalRouteRef","joinPaths","paths","normalized","resolveTargetRef","anyRouteRef","routePaths","routeBindings","targetRef","subRoutePath","resolvedRoute","resolvedPath","targetPath","resolveBasePath","sourceLocation","routeParents","routeObjects","refDiffList","matchIndex","targetSearchRef","parentPath","diffPaths","RouteResolver","appBasePath","relativeSourceLocation","basePath","RoutingContext","RoutingProvider","versionedValue","getExtensionContext","routes","routeObject","TrackNavigation","analytics","RouteTracker","validateRouteParameters","notLeafRoutes","route","currentRouteRef","validateRouteBindings","plugins","externalRouteRef","AppContext","AppContextProvider","appContext","mkError","thing","logDeprecation","AppIdentityProxy","targetOptions","resolveTheme","shouldPreferDark","selectedTheme","useShouldPreferDarkTheme","mediaQuery","setPrefersDark","listener","AppThemeProvider","appThemeApi","useObservable","appTheme","defaultConfigLoader","runtimeConfigJson","appConfig","windowAppConfig","ApiRegistryBuilder","ApiRegistry","resolveRouteBindings","bindRoutes","externalRoutes","targetRoutes","externalRoute","isReactRouterBeta","InternalAppContext","getBasePath","useConfigLoader","configLoader","hasConfig","useAsync","noConfigNode","Progress","BootErrorPage","AppContextImpl","app","AppManager","routesHaveBeenValidated","routing","featureFlags","loadedConfig","hasConfigApi","featureFlagsApi","RouterComponent","SignInPageComponent","SignInPageWrapper","Component","setIdentityApi","mountPath","pluginIds","createSpecializedApp","warned","FlatRoutes","NotFoundErrorPage","isBeta","withNotFound","elements","child","AlertDisplay","messages","setMessages","anchorOrigin","msgs","firstMessage","handleClose","Snackbar","Alert","Close","stringToColor","color","extractInitials","useStyles$S","makeStyles","createStyles","displayName","picture","customStyles","classes","styles","useStyles$R","isExternalUri","useBaseUrl","useBasePath","useResolvedPath","external","startsWithBasePath","getNodeText","onClick","noTrack","linkText","newWindow","handleClick","Link","LinkWrapper","CopyTextButton","tooltipDelay","tooltipText","ariaLabel","open","setOpen","copyToClipboard","useCopyToClipboard","handleCopyClick","CodeSnippet","language","showLineNumbers","highlightedNumbers","customStyle","showCopyCodeButton","dark","docco","highlightColor","lineNumber","CreateButton","title","isXSScreen","AddCircleOutline","Direction","Direction2","Alignment","Alignment2","Ranker","Ranker2","LabelPosition","LabelPosition2","useStyles$Q","DefaultNode","setWidth","setHeight","idRef","renderedHeight","renderedWidth","padding","paddedWidth","paddedHeight","ARROW_MARKER_ID","NODE_TEST_ID","EDGE_TEST_ID","LABEL_TEST_ID","useStyles$P","renderDefault$1","render","setNode","nodeProps","nodeRef","useStyles$O","DefaultLabel","useStyles$N","renderDefault","Edge","setEdge","edge","curve","points","labelProps","labelRef","createPath","d","finitePoints","point","WORKSPACE_ID","DependencyGraph","edges","renderNode","direction","align","nodeMargin","edgeMargin","rankMargin","paddingX","paddingY","acyclicer","ranker","labelPosition","labelOffset","edgeRanks","edgeWeight","renderLabel","zoom","svgProps","containerWidth","setContainerWidth","containerHeight","setContainerHeight","graph","graphWidth","setGraphWidth","graphHeight","setGraphHeight","graphNodes","setGraphNodes","graphEdges","setGraphEdges","maxWidth","maxHeight","containerRef","container","workspace","enableZoom","newContainerWidth","newContainerHeight","setNodesAndEdges","currentGraphNodes","currentGraphEdges","nodeId","existingNode","updateGraph","newHeight","newWidth","useStyles$M","DismissableBanner","variant","fixed","notificationsStore","rawDismissedBanners","dismissedBanners","setDismissedBanners","observedItems","currentValue","SnackbarContent","useStyles$L","EmptyStateImage","useStyles$K","EmptyState","action","COMPONENT_YAML","useStyles$J","MissingAnnotationEmptyState","annotation","readMoreUrl","getWarningTextColor","severity","getWarningBackgroundColor","useErrorOutlineStyles","ErrorOutlineStyled","ErrorOutline","ExpandMoreIconStyled","ExpandMore","useStyles$I","capitalize","WarningPanel","defaultExpanded","subTitle","Accordion","AccordionSummary","AccordionDetails","useStyles$H","ErrorList","stack","ErrorPanel","useStyles$G","ResponseErrorPanel","cause","errorString","requestString","messageString","stackString","jsonString","Divider","createRootElement","rootContainer","addRootElement","rootElem","usePortal","rootElemRef","existingParent","parentElem","getRootElem","STATES_LOCAL_STORAGE_KEY","useCalloutStates","states","setStates","raw","setState","newStates","useCalloutHasBeenSeen","featureId","markSeen","useShowCallout","useStyles$F","FeatureCalloutCircular","show","hide","portalElement","wrapperRef","placement","setPlacement","update","wrapperBounds","longest","borderWidth","dotLeft","dotTop","dotSize","textWidth","textLeft","textTop","useIconStyles","IconLinkVertical","disabled","href","icon","useStyles$E","HeaderIconLinkRow","link","generateGradientStops","themeType","luminance","fadeSize","fadePadding","useStyles$D","useScrollDistance","scrollLeft","scrollRight","setScroll","el","handleUpdate","useSmoothScroll","speed","minDistance","scrollTarget","setScrollTarget","startTime","frameTime","frameDuration","scrollDistance","scrollAmount","newScrollTarget","HorizontalScrollGrid","scrollStep","scrollSpeed","minScrollDistance","otherProps","handleScrollClick","forwards","useStyles$C","Lifecycle","shorthand","alpha","RealLogViewer","LogViewer","useStyles$B","flatten","headingRenderer","level","slug","inline","className","MarkdownContent","content","dialect","linkTarget","transformLinkUri","transformImageUri","useItemStyles","LoginRequestListItem","busy","setBusy","setError","handleContinue","IconComponent","ListItemAvatar","useStyles$A","OAuthRequestDialog","_props","requests","handleRejectAll","Dialog","DialogTitle","DialogContent","DialogActions","useStyles$z","OverflowTooltip","hover","setHover","isMounted","useIsMounted","handleToggled","truncated","isVisible","setIsVisible","handle","LinearProgress","useStyles$y","BottomLink","SlackLink","slackChannel","ErrorBoundary","errorInfo","useStyles$x","CardActionsTopRight","withStyles","VARIANT_STYLES","InfoCard","subheader","divider","deepLink","errorBoundaryProps","headerStyle","headerProps","actionsClassName","actions","cardClassName","actionsTopRight","noPadding","titleTypographyProps","calculatedStyle","calculatedCardStyle","cardSubTitle","errProps","CardHeader","useStyles$w","defaultGaugeProps","getProgressColor","inverse","actualMax","actualValue","Gauge","hoverRef","setHoverRef","getColor","fractional","unit","asPercentage","asActual","isHovering","setIsHovering","handleMouseOver","handleMouseOut","useStyles$v","GaugeCard","progress","gaugeProps","LinearGauge","percent","strokeColor","useStyles$u","ClosedDropdown","SvgIcon","useStyles$t","OpenedDropdown","BootstrapInput","InputBase","useStyles$s","SelectComponent","multiple","placeholder","onChange","triggerReset","native","margin","setValue","isOpen","handleChange","previous","handleClickAway","handleDelete","selectedValue","newValue","chip","FormControl","InputLabel","Select","MenuItem","Checkbox","noop","VerticalStepperContext","SimpleStepper","elevated","onStepChange","activeStep","stepIndex","setStepIndex","stepHistory","setStepHistory","steps","endStep","useStyles$r","RestartBtn","NextBtn","last","BackBtn","SimpleStepperFooter","stepperLength","newIndex","callback","handleNext","handleBack","handleRestart","useStyles$q","SimpleStepperStep","end","muiProps","useStyles$p","StatusOK","StatusWarning","StatusError","StatusPending","StatusRunning","StatusAborted","tableTitleCellStyles","tableContentCellStyles","listStyles","listItemStyles","TitleCell","TableCell","ContentCell","MetadataTable","dense","Table","TableBody","MetadataTableItem","rest","TableRow","MetadataList","MetadataListItem","listStyle","nestedListStyle","StyledList","StyledNestedList","renderList","list","nested","toValue","renderMap","map","fmtKey","ItemValue","TableItem","mapToItems","info","StructuredMetadataTable","metadata","metadataItems","queryParams","parse","extractState","stateName","joinQueryString","useQueryParamState","debounceTime","searchParams","setSearchParams","searchParamsString","queryParamState","setQueryParamState","newState","oldState","DEFAULT_SUPPORT_CONFIG","useSupportConfig","supportConfig","itemConf","linkConf","useSystemIcon","Icon","BrokenImageIcon","CatalogIcon","ChatIcon","DashboardIcon","DocsIcon","EmailIcon","GitHubIcon","GroupIcon","HelpIcon","UserIcon","WarningIcon","useStyles$o","SupportIcon","SupportLink","SupportListItem","prev","idx","SupportButton","popoverOpen","setPopoverOpen","anchorEl","setAnchorEl","isSmallScreen","onClickHandler","popoverCloseHandler","drawerWidthClosed","iconPadding","userBadgePadding","sidebarConfig","makeSidebarConfig","customSidebarConfig","submenuConfig","makeSidebarSubmenuConfig","customSubmenuConfig","SIDEBAR_INTRO_LOCAL_STORAGE","SidebarConfigContext","SidebarItemWithSubmenuContext","LocalStorage","defaultSidebarPinStateContext","LegacySidebarPinStateContext","VersionedSidebarPinStateContext","SidebarPinStateProvider","useSidebarPinState","versionedPinStateContext","legacyPinStateContext","pinStateContext","useStyles$n","PageContext","SidebarPage","isPinned","setIsPinned","contentRef","pageContext","isMobile","toggleSidebarPinState","useContent","defaultSidebarOpenStateContext","LegacySidebarContext","VersionedSidebarContext","SidebarOpenStateProvider","useSidebarOpenState","versionedOpenStateContext","legacyOpenStateContext","openStateContext","useStyles$m","MobileSidebarGroup","selectedMenuItemIndex","setSelectedMenuItemIndex","MobileSidebarContext","value2","BottomNavigationAction","SidebarGroup","useStyles$l","sortSidebarGroupsForPriority","sidebarGroupType","OverlayMenu","onClose","Drawer","MobileSidebar","sidebarGroups","Menu","shouldShowGroupChildren","BottomNavigation","useStyles$k","DesktopSidebar","openDelayMs","closeDelayMs","disableExpandOnHover","hoverTimerRef","handleOpen","A11ySkipSidebar","Sidebar","focusContent","isLocationMatch","currentLocation","toLocation","toDecodedSearch","toQueryParameters","currentDecodedSearch","currentQueryParameters","useStyles$j","SidebarSubmenuItem","subtitle","dropdownItems","setIsHoveredOn","closeSubmenu","isActive","showDropDown","setShowDropDown","handleClickDropdown","ArrowDropUp","ArrowDropDown","object","useStyles$i","SidebarSubmenu","isHoveredOn","isSubmenuOpen","setIsSubmenuOpen","useStyles$h","DoubleArrowLeft","useStyles$g","DoubleArrowRight","makeSidebarStyles","useMemoStyles","useLocationMatch","submenu","active","_to","isButtonItem","sidebarSubmenuType","WorkaroundNavLink","style","activeStyle","activeClassName","ariaCurrentProp","locationPathname","toPathname","ariaCurrent","SidebarItemBase","hasNotifications","hasSubmenu","disableHighlight","navLinkProps","divStyle","displayItemIcon","ArrowRight","itemIcon","Badge","openContent","childProps","SidebarItemWithSubmenu","handleMouseEnter","handleMouseLeave","arrowIcon","SidebarItem","SidebarSearchField","setInput","handleEnter","ev","handleInput","handleInputClick","handleItemClick","SidebarSpace","styled","SidebarSpacer","SidebarDivider","styledScrollbar","SidebarScrollWrapper","scrollbarStyles","SidebarExpandButton","useStyles$f","IntroCard","SidebarIntroCard","onDismiss","collapsing","setCollapsing","startDismissing","starredIntroText","recentlyViewedIntroText","SidebarIntro","dismissedIntro","setDismissedIntro","starredItemsDismissed","recentlyViewedItemsDismissed","dismissStarred","dismissRecentlyViewed","useStyles$e","Content","stretch","restProps","useStyles$d","HeaderTabs","tabs","selectedIndex","selectedTab","setSelectedTab","Tabs","tab","useSelectedSubRoute","subRoutes","sortedRoutes","currentRoute","matchedRoute","foundIndex","RoutedTabs","navigate","headerTabs","onTabChange","tabIndex","Helmet","Route","createSubRoutesFromChildren","childrenProps","routeType","tabProps","TabbedLayout","useSubvalueCellStyles","SubvalueCell","subvalue","useFilterStyles$1","Filters","onChangeFilters","selectedFilters","setSelectedFilters","reset","tableIcons","AddBox","Check","Clear","DeleteOutline","Edit","SaveAlt","FilterList","FirstPage","LastPage","ChevronLeft","ArrowUpward","Remove","ViewColumn","extractValueByField","StyledMTableHeader","StyledMTableToolbar","useFilterStyles","useTableStyles","convertColumns","columns","column","cellStyle","cellStyleFn","rowData","rowColumn","removeDefaultValues","defaultState","defaultInitialState","TableToolbar","toolbarProps","toolbarRef","setSearch","hasFilters","selectedFiltersLength","toggleFilters","filtersClasses","onSearchChanged","searchText","filters","initialState","emptyContent","onStateChange","tableClasses","calculatedInitialState","filtersOpen","setFiltersOpen","setSelectedFiltersLength","tableData","setTableData","MTColumns","defaultOptions","getFieldByTitle","titleValue","selectedFiltersArray","newData","filterValue","fieldValue","constructFilters","filterConfig","dataValue","extractDistinctValues","distinctValues","addValue","constructSelect","Toolbar","hasNoRows","columnCount","Body","bodyProps","chunkArray","array","chunkSize","TabPanel","other","useStyles$c","StyledIcon","tabMarginLeft","isFirstNav","isFirstIndex","useStyles$b","StyledTab","useStyles$a","StyledTabs","useStyles$9","navIndex","setNavIndex","numberOfChunkedElement","setNumberOfChunkedElement","chunkedTabs","setChunkedTabs","wrapper","navigateToPrevChunk","navigateToNextChunk","hasNextNavIndex","numberOfTabIcons","wrapperWidth","flattenIndex","newChunkedElementSize","currentIndex","lastNum","TrendLine","useStyles$8","ContentHeaderTitle","ContentHeader","TitleComponent","textAlign","renderedTitle","useStyles$7","MicDrop","useStyles$6","ErrorPage","status","statusMessage","additionalInfo","supportUrl","support","ClickableText","StyledBox","childrenArray","firstPage","secondPage","expandablePages","currentPage","hasHiddenBreadcrumbs","pageLink","useStyles$5","TypeFragment","typeLink","pageTitle","TitleFragment","tooltip","FinalTitle","SubtitleFragment","Header","pageTitleOverride","appTitle","documentTitle","titleTemplate","defaultTitle","ActionItem","secondaryLabel","HeaderActionMenu","actionItems","anchorElRef","actionItem","useStyles$4","HeaderLabelContent","HeaderLabel","timeFormat","getTimes","lang","clocks","clockConfigs","clock","time","HomepageTimer","defaultTimes","setTimes","styles$1","useStyles$3","ItemCardHeader","ItemCard","useStyles$2","ItemCardGrid","useStyles$1","Page","PageWithHeader","proxiedSessionSchema","DEFAULTS","tokenToExpiry","jwtToken","_header","rawPayload","_signature","ProxiedSignInIdentity","backstageIdentity","promise","ProxiedSignInPage","execute","GuestUserIdentity","userEntityRef","parseJwtPayload","LegacyUserIdentity","sub","ent","UserIdentity","authApi","profile","ex","useStyles","GridItem","commonProvider","onSignInSuccess","handleLogin","identityResponse","guestProvider","ID_TOKEN_REGEX","useFormStyles","asInputRef","renderResult","customProvider","register","handleSubmit","formState","handleResult","userId","FormHelperText","IdentityApiSignOutProxy","PROVIDER_STORAGE_KEY","signInProviders","validateIDs","providers","getSignInProviders","identityProviders","useSignInProviders","apiHolder","setLoading","handleWrappedResult","selectedProviderId","didCancel","handleSignInSuccess","MultiSignInPage","providerElements","SingleSignInPage","auto","showLoginPage","setShowLoginPage","login","checkExisting","showPopup","SignInPage","useTabsStyles","BoldHeader","TabbedCard","tabsClasses","selectIndex","_ev","newSelectedIndex","selectedTabContent","useCardTabStyles","CardTab","AnalyticsReactContext","useAnalyticsContext","theContext","AnalyticsContext","attributes","combinedValue","versionedCombinedValue","useApiHolder","versionedHolder","useApi","withApis","WrappedComponent","Hoc","ApiRefImpl","createApiRef","createApiFactory","instance","SessionState","SessionState2","googleAuthApiRef","githubAuthApiRef","oktaAuthApiRef","gitlabAuthApiRef","microsoftAuthApiRef","oneloginAuthApiRef","bitbucketAuthApiRef","atlassianAuthApiRef","alertApiRef","analyticsApiRef","appThemeApiRef","configApiRef","discoveryApiRef","errorApiRef","FeatureFlagState","FeatureFlagState2","featureFlagsApiRef","fetchApiRef","identityApiRef","oauthRequestApiRef","storageApiRef","Tracker","subject","useAnalyticsApi","useAnalytics","trackerRef","getTracker","tracker","contextKey","PluginProvider","Provider","usePluginOptions","useApp","versionedContext","globalStore","componentDataKey","attachComponentData","component","dataComponent","getComponentData","_a$2","RouteRefImpl","createRouteRef","_a$1","PARAM_PATTERN","SubRouteRefImpl","createSubRouteRef","pathParams","param","ExternalRouteRefImpl","createExternalRouteRef","useRouteRef","routeFunc","isOptional","useRouteRefParams","_routeRef","PluginErrorBoundary","ErrorBoundaryFallback","createRoutableExtension","createReactExtension","InnerComponent","RoutableExtensionWrapper","componentName","createComponentExtension","lazyLoader","Result","selectChildren","rootNode","strictError","Collection","selection","useElementFilter","filterFn","dependencies","PluginImpl","createPlugin","isError","maybe","assertError","serializeError","deserializeError","stringifyError","parseErrorResponseBody","CustomErrorBase","fullMessage","causeStr","InputError","AuthenticationError","NotAllowedError","NotFoundError","ConflictError","NotModifiedError","ForwardedError","ResponseError","statusText","scmAuthApiRef","__accessCheck","member","__privateGet","getter","__privateAdd","__privateSet","setter","_providers","_api","_host","_scopeMapping","_providerName","ScmAuthMux","_ScmAuth","providerName","host","scopeMapping","github","gitlab","azure","bitbucket","githubAuthApi","gitlabAuthApi","microsoftAuthApi","bitbucketAuthApi","additionalScopes","additionalScope","restOptions","uniqueScopes","ScmAuth","ScmIntegrationsApi","scmIntegrationsApiRef","ScmIntegrationIcon","DefaultIcon","isValidHost","check","isValidUrl","basicIntegrations","integrations","getHost","defaultScmResolveUrl","updated","filepath","repoRootPath","AMAZON_AWS_HOST","readAwsS3IntegrationConfig","endpoint","s3ForcePathStyle","accessKeyId","secretAccessKey","roleArn","externalId","readAwsS3IntegrationConfigs","_AwsS3Integration","integrationConfig","AwsS3Integration","_origin","_owner","_project","_repo","_path","_ref","_baseUrl","VERSION_PREFIX_GIT_BRANCH","_AzureUrl","origin","owner","project","repo","repoUrl","version","AzureUrl","AZURE_HOST","readAzureIntegrationConfig","readAzureIntegrationConfigs","_AzureIntegration","azureUrl","newUrl","mockBaseUrl","updatedPath","AzureIntegration","getAzureFileFetchUrl","getAzureDownloadUrl","getAzureCommitsUrl","getAzureRequestOptions","additionalHeaders","buffer","Buffer","BITBUCKET_HOST","BITBUCKET_API_BASE_URL","readBitbucketIntegrationConfig","apiBaseUrl","appPassword","readBitbucketIntegrationConfigs","_BitbucketIntegration","resolved","urlData","editUrl","BitbucketIntegration","getBitbucketDefaultBranch","repoName","resource","isHosted","branchUrl","getBitbucketRequestOptions","defaultBranch","displayId","getBitbucketDownloadUrl","protocol","branch","getBitbucketFileFetchUrl","filepathtype","pathWithoutSlash","BITBUCKET_CLOUD_HOST","BITBUCKET_CLOUD_API_BASE_URL","readBitbucketCloudIntegrationConfig","readBitbucketCloudIntegrationConfigs","_BitbucketCloudIntegration","BitbucketCloudIntegration","getBitbucketCloudDefaultBranch","getBitbucketCloudRequestOptions","getBitbucketCloudDownloadUrl","getBitbucketCloudFileFetchUrl","readBitbucketServerIntegrationConfig","readBitbucketServerIntegrationConfigs","_BitbucketServerIntegration","BitbucketServerIntegration","getBitbucketServerDefaultBranch","getBitbucketServerRequestOptions","getBitbucketServerDownloadUrl","getBitbucketServerFileFetchUrl","readGerritIntegrationConfig","cloneUrl","gitilesBaseUrl","readGerritIntegrationConfigs","GERRIT_BODY_PREFIX","parseGerritGitilesUrl","projectEndIndex","branchIndex","filePath","builldGerritGitilesUrl","getAuthenticationPrefix","getGerritBranchApiUrl","getGerritCloneRepoUrl","getGerritFileContentsApiUrl","getGerritProjectsApiUrl","getGerritRequestOptions","parseGerritJsonResponse","responseBody","_GerritIntegration","GerritIntegration","GITHUB_HOST","GITHUB_API_BASE_URL","GITHUB_RAW_BASE_URL","readGitHubIntegrationConfig","rawBaseUrl","apps","readGitHubIntegrationConfigs","getGitHubFileFetchUrl","credentials","chooseEndpoint","getGitHubRequestOptions","Cache","date","supplier","existingInstallationData","tokenData","HEADERS","GithubAppManager","installationId","suspended","repositoryNames","installationClient","repos","repository","installation","inst","notFoundError","GithubAppCredentialsMux","ac","results","resultItem","notNotFoundError","_SingleInstanceGithubCredentialsProvider","githubAppCredentialsMux","SingleInstanceGithubCredentialsProvider","DefaultGithubCredentialsProvider","credentialsProviders","integration","credentialsProvider","_GitHubIntegration","replaceGitHubUrlType","GitHubIntegration","GITLAB_HOST","GITLAB_API_BASE_URL","readGitLabIntegrationConfig","readGitLabIntegrationConfigs","getGitLabIntegrationRelativePath","relativePath","getGitLabFileFetchUrl","projectID","getProjectId","buildProjectUrl","getGitLabRequestOptions","branchAndFilePath","repoIDLookup","_GitLabIntegration","replaceGitLabUrlType","GitLabIntegration","readGoogleGcsIntegrationConfig","privateKey","ScmIntegrations","integrationsByType","candidates","filteredCandidates","rootRoute","registerComponentRouteRef","defaultColumns","DefaultApiExplorerPage","initiallySelectedFilter","generatedSubtitle","registerComponentLink","ApiExplorerPage$1","apiDocsConfigRef","PlainApiDefinitionWidget","ApiDefinitionCard","getApiDefinitionWidget","definitionWidget","entityTitle","LazyAsyncApiDefinition","AsyncApiDefinitionWidget","LazyGraphQlDefinition","GraphQlDefinitionWidget","LazyOpenApiDefinition","OpenApiDefinitionWidget","GrpcApiDefinitionWidget","defaultDefinitionWidgets","ApiTypeTitle","apiEntity","createSpecApiTypeColumn","apiEntityColumns","ConsumedApisCard","HasApisCard","ProvidedApisCard","ConsumingComponentsCard","ProvidingComponentsCard","apiDocsPlugin","definitionWidgets","ApiExplorerPage","EntityApiDefinitionCard","EntityConsumedApisCard","EntityConsumingComponentsCard","EntityProvidedApisCard","EntityProvidingComponentsCard","EntityHasApisCard","RESOURCE_TYPE_CATALOG_ENTITY","catalogEntityReadPermission","catalogEntityCreatePermission","catalogEntityDeletePermission","catalogEntityRefreshPermission","catalogLocationReadPermission","catalogLocationCreatePermission","catalogLocationDeletePermission","catalogPermissions","CustomLabel","relations","EntityKindIcon","CustomNode","focused","iconSize","paddedIconWidth","displayTitle","ALL_RELATION_PAIRS","limiter","useEntityStore","catalogClient","setEntities","updateEntities","cachedEntities","requestedEntities","filteredEntities","asyncState","fetch","outstandingEntities","requestEntities","entityRefs","useEntityRelationGraph","rootEntityRefs","maxDepth","kinds","expectedEntities","processedEntityRefs","nextDepthRefQueue","depth","entityRefQueue","rel","useEntityRelationNodesAndEdges","unidirectional","mergeRelations","onNodeClick","relationPairs","nodesAndEdges","visitedNodes","nodeQueue","pair","EntityRelationsGraph","rootEntityNames","catalogGraphRouteRef","catalogEntityRouteRef","catalogGraphPlugin","EntityCatalogGraphCard","CatalogGraphPage","catalogImportApiRef","getGithubIntegrationConfig","scmIntegrationsApi","getCatalogFilename","getBranchName","CatalogImportClient","catalogFilename","analyzation","locations","curr","appBaseUrl","repositoryUrl","fileContent","ghConfig","githubIntegrationConfig","octo","branchName","fileName","repoData","formatHttpErrorMessage","parentRef","rootRouteRef","catalogImportPlugin","scmAuthApi","catalogApi","CatalogImportPage","useCatalogFilename","ImportInfoCard","exampleLocationUrl","exampleRepositoryUrl","catalogImportApi","hasGithubIntegration","initialUrl","reducer","activeState","previousStates","activeFlow","analysisUrl","analyzeResult","prepareResult","reviewResult","useImportState","dispatch","flow","NextButton","buttonProps","BackButton","sortEntities","EntityListComponent","collapsed","locationListItemIcon","onItemClick","firstListItem","withLinks","expandedUrls","setExpandedUrls","urls","StepFinishImportLocation","onReset","continueButton","existingLocations","newLocations","StepInitAnalyzeUrl","onAnalysis","disablePullRequest","watch","submitted","setSubmitted","analysisResult","AutocompleteTextField","loadingText","helperText","errorHelperText","textFieldProps","PreparePullRequestForm","defaultValues","onSubmit","methods","control","PreviewCatalogInfoComponent","PreviewPullRequestComponent","generateEntities","StepPrepareCreatePullRequest","onPrepare","onGoBack","renderFormFields","prDefaultsLoading","prDefaults","prDefaultsError","groupsLoading","pr","StepPrepareSelectLocations","selectedUrls","setSelectedUrls","onSelectAll","StepReviewLocation","onReview","refreshed","defaultGenerateStepper","defaults","defaultStepper","ImportStepper","generateStepper","DefaultImportPage","catalogApiRef","starredEntitiesApiRef","MockStarredEntitiesApi","isMidSizeScreen","theme2","filterDrawerOpen","setFilterDrawerOpen","CatalogFilterLayout","entityRouteRef","entityRouteParams","humanizeEntityRef","EntityRefLink","linkProps","entityRoute","routeParams","formattedEntityRefTitle","FetchedEntityRefLinks","getTitle","pureEntities","EntityRefLinks","fetchEntities","reduceCatalogFilters","compoundFilter","reduceEntityFilters","getEntityRelations","relationType","entityNames","sourceLocationRef","isOwnerOf","possibleOwners","owners","ownerItem","EntityKindFilter","EntityTypeFilter","EntityTagFilter","EntityTextFilter","words","exactMatch","partialMatch","word","EntityOwnerFilter","EntityLifecycleFilter","UserListFilter","isOwnedEntity","isStarredEntity","EntityOrphanFilter","orphan","EntityErrorFilter","NewEntityContext","AsyncEntityProvider","refresh","EntityProvider","useEntity","useAsyncEntity","EntityListContext","EntityListProvider","requestedFilters","setRequestedFilters","queryParameters","outputState","setOutputState","compacted","entityFilter","backendFilter","previousBackendFilter","oldParams","newParams","updateFilters","prevFilters","newFilters","useEntityList","useEntityTypeFilter","kindFilter","typeFilter","typeParameter","flattenedQueryTypes","selectedTypes","setSelectedTypes","availableTypes","setAvailableTypes","facetsRef","oldFacets","newTypes","stillValidTypes","BATCH_SIZE","useRelatedEntities","relationFilter","filterByTypeLower","filterByKindLower","relationsByKindAndNamespace","batchedRelationsByKindAndNamespace","rs","getEntityRef$1","entityOrRef","useStarredEntities","starredEntitiesApi","starredEntities","toggleStarredEntity","getEntityRef","useStarredEntity","setIsStarredEntity","useEntityOwnership","ownershipEntityRefs","myOwnerRefs","entityOwnerRefs","useEntityPermission","permission","loadingEntity","entityError","allowed","loadingPermission","permissionError","useAvailableKinds","availableKinds","setAvailableKinds","newKinds","useEntityKindFilter","kindParameter","flattenedQueryKind","selectedKind","setSelectedKind","_b2","EntityKindPicker","hidden","initialFilter","icon$3","checkedIcon$3","EntityLifecyclePicker","backendEntities","lifecyclesParameter","queryParamLifecycles","selectedLifecycles","setSelectedLifecycles","availableLifecycles","option","icon$2","checkedIcon$2","EntityOwnerPicker","ownersParameter","queryParamOwners","selectedOwners","setSelectedOwners","availableOwners","_theme","EntitySearchBar","columnFactories","formatContent","entity1","entity2","relation","getRelations","systemEntityColumns","componentEntityColumns","EntityTable","tableStyle","icon$1","checkedIcon$1","EntityTagPicker","tagsParameter","availableTags","queryParamTags","selectedTags","setSelectedTags","EntityTypePicker","YellowStar","FavoriteEntity","DEFAULT_ICON","getKind","useIcon","actualKind","useAncestry","currentRef","isRootNode","AncestryPage","ListItemText","ListSubheader","Container","findLink","KeyValueListItem","useColocated","currentEntityRef","colocated","EntityList","Contents$1","originLocation","colocatedEntities","atLocation","atOrigin","ColocatedPage","sortKeys","JsonPage","OverviewPage","apiVersion","spec","groupedRelations","entry","groupRelations","YamlPage","a11yProps","InspectEntityDialog","activeTab","setActiveTab","useUnregisterEntityDialogState","isBootstrap","prerequisites","locationPromise","colocatedEntitiesPromise","locationAnnotationFilter","location2","colocatedEntities2","unregisterLocation","deleteEntity","Contents","onConfirm","showDelete","setShowDelete","onUnregister","onDelete","UnregisterEntityDialog","getFilterGroups","orgName","UserListPicker","availableFilters","userParameter","loadingBackendEntities","userAndGroupFilterIds","filterGroups","filterGroup","loadingEntityOwnership","ownedFilter","starredFilter","queryParamUserFilter","selectedUserFilter","setSelectedUserFilter","entitiesWithoutUserFilter","filterCounts","checkedIcon","EntityProcessingStatusPicker","selectedAdvancedItems","setSelectedAdvancedItems","orphanChange","errorChange","availableAdvancedItems","MockEntityListContextProvider","setFilters","resolvedValue","performMigrationToTheNewBucket","storageApi","oldStarredEntities","targetEntities","old","split","DefaultStarredEntitiesApi","createComponentRouteRef","viewTechDocRouteRef","AboutField","gridSizes","childElements","IconLink","colDefaults","useDynamicColumns","cols","numOfCols","breakpoint","LinksGridList","getLocationTargetHref","entitySourceLocation","srcLocationUrl","AboutContent","isSystem","isResource","isComponent","isAPI","isTemplate","isLocation","isGroup","partOfSystemRelations","partOfComponentRelations","partOfDomainRelations","ownedByRelations","AboutCard","viewTechdocLink","entityMetadataEditUrl","viewInSource","viewInTechDocs","cardClass","cardContentClass","entityLocation","allowRefresh","refreshEntity","CatalogKindHeader","allowedKinds","allKinds","queryParamKind","CatalogSearchResultListItem","labels","specifiedLabelValue","CatalogTable","tableOptions","createEntitySpecificColumns","_a3","showTypeColumn","titlePreamble","defaultActions","isStarred","rows","typeColumn","showPagination","UnregisterEntity","unregisterEntityOptions","isUnregisterAllowed","onUnregisterEntity","isBoolean","isDisabled","unregisterButton","EntityContextMenu","UNSTABLE_extraContextMenuItems","UNSTABLE_contextMenuOptions","onInspectEntity","isAllowed","onOpen","dataKey","EntityLayoutTitle","paramKind","paramNamespace","paramName","EntityLabels","EntityLayout","NotFoundComponent","elementProps","headerTitle","headerType","confirmationDialogOpen","setConfirmationDialogOpen","inspectionDialogOpen","setInspectionDialogOpen","cleanUpAfterRemoval","DeleteEntityDialog","isOrphan","EntityOrphanWarning","catalogLink","errorFilter","getOwnAndAncestorsErrors","hasCatalogProcessingErrors","EntityProcessingErrorsPanel","ancestorError","ENTITY_SWITCH_KEY","EntitySwitchCaseComponent","EntitySwitch","collection","elementsChildren","AsyncEntitySwitch","promises","strCmp","strCmpAll","cmpValues","cmpVal","isKind","isComponentType","isNamespace","namespaces","FilteredEntityLayout","FilterContainer","EntityListContainer","catalogPlugin","fetchApi","CatalogIndexPage","CatalogEntityPage","EntityAboutCard","EntityLinksCard","EntityHasSystemsCard","EntityHasComponentsCard","EntityHasSubcomponentsCard","EntityHasResourcesCard","EntityDependsOnComponentsCard","EntityDependencyOfComponentsCard","EntityDependsOnResourcesCard","RelatedEntitiesCard","circleCIApiRef","DEFAULT_PROXY_PATH","CircleCIApi","buildNumber","pagination","circleCIRouteRef","circleCIBuildRouteRef","EntityCircleCIContent","Router$1","relativeTimeTo","dateTimeISOString","durationHumanized","startDateTimeISOString","endDateTimeISOString","startDateTime","endDateTime","duration","ActionOutput","actionOutput","timeElapsed","useAsyncPolling","pollingFn","interval","isPolling","CIRCLECI_ANNOTATION","makeReadableStatus","mapWorkflowDetails","buildData","workflows","mapSourceDetails","commitDetails","mapUser","transform","buildsData","restartBuild","useProjectSlugFromEntity","vcs","mapVcsType","useBuilds","total","setTotal","page","setPage","pageSize","setPageSize","getBuilds","buildId","retry","builds","projectName","INTERVAL_AMOUNT","useBuildWithSteps","vcsOption","getBuildWithSteps","build","startPolling","stopPolling","BuildName","pickClassName","ActionsList","BuildsList","BuildWithStepsPage","getStatusComponent","SourceInfo","user","generatedColumns","row","routeLink","CITable","onChangePage","onChangePageSize","Builds","BuildsPage","isCircleCIAvailable","githubActionsApiRef","GithubActionsClient","runId","BuildStatus","BuildStatus2","buildRouteRef","githubActionsPlugin","EntityGithubActionsContent","EntityLatestGithubActionRunCard","EntityLatestGithubActionsForBranchCard","EntityRecentGithubActionsRunsCard","GITHUB_ACTIONS_ANNOTATION","getProjectNameFromEntity","WorkflowRunStatus","conclusion","useWorkflowRunJobs","jobs","job","_c2","useWorkflowRunsDetails","useDownloadWorkflowRunLogs","WorkflowRunLogs","inProgress","jobLogs","logText","getElapsedTime","start","startDate","StepView","JobListItem","JobsList","WorkflowRunDetails","_i","details","useWorkflowRuns","initialPageSize","runs","workflowRunsData","run","WorkflowRunsTableView","WorkflowRunsTable","tableProps","githubHost","isGithubActionsAvailable","WidgetContent","lastRun","LatestWorkflowRunCard","LatestWorkflowsForBranchCard","firstLine","RecentWorkflowRunsCard","catalogIndexRouteRef","orgPlugin","EntityGroupProfileCard","EntityMembersListCard","EntityOwnershipCard","EntityUserProfileCard","MemberComponent","metaName","MembersListCard","memberDisplayTitle","groupEntity","groupName","grpNamespace","groupNamespace","pageChange","pageIndex","members","nbPages","paginationLabel","CardTitle$1","GroupProfileCard","annotations","childRelations","parentRelations","emailHref","infoCardAction","CardTitle","UserProfileCard","memberOfRelations","getQueryParams","ownersEntityRef","selectedEntity","getOwnersEntityRef","ownerGroupsName","ownerGroup","getAggregatedOwnersEntityRef","parentGroup","processedEntities","currentEntity","childGroup","processedEntity","useGetEntities","relationsType","entityFilterKind","componentsWithCounters","ownedEntity","topOwnedEntity","EntityCountTile","counter","ComponentsGrid","OwnershipCard","hideRelationsToggle","relationsToggle","getRelationsType","setRelationsType","MyGroupsSidebarItem","singularTitle","pluralTitle","catalogEntityRoute","AuthorizeResult","AuthorizeResult2","isPermission","comparedPermission","isResourcePermission","resourceType","isCreatePermission","isReadPermission","isUpdatePermission","isDeletePermission","toPermissionEvaluator","permissionAuthorizer","parsedRequests","createPermission","permissionCriteriaSchema","authorizePermissionResponseSchema","queryPermissionResponseSchema","responseSchema","itemSchema","ids","PermissionClient","queries","permissionApi","responsesById","permissionApiRef","IdentityPermissionApi","permissionClient","usePermission","PermissionedRoute","resourceRef","errorComponent","permissionResult","shownElement","RequirePermission","scaffolderApiRef","ScaffolderClient","templateRef","templatePath","secrets","taskId","eventSource","inputAfter","logs","EntityPicker","uiSchema","rawErrors","formData","idSchema","onSelect","EntityNamePicker","autoFocus","entityNamePickerValidation","EntityTagsPicker","tagOptions","setTagOptions","inputValue","setInputValue","inputError","setInputError","tagValidator","showCounts","existingTags","tagsRequest","tagFacets","setTags","hasError","addDuplicate","currentTags","newTag","OwnerPicker","ownerUiSchema","GithubRepoPicker","allowedOwners","ownerItems","GitlabRepoPicker","AzureRepoPicker","allowedOrganizations","organizationItems","organization","BitbucketRepoPicker","GerritRepoPicker","RepoUrlPickerHost","hosts","scaffolderApi","hostsOptions","RepoUrlPickerRepoName","allowedRepos","repoItems","serializeRepoPickerUrl","parseRepoPickerUrl","SecretsContext","SecretsContextProvider","setSecrets","useTemplateSecrets","updateSecrets","currentSecrets","RepoUrlPicker","integrationApi","allowedHosts","prevState","updateLocalState","requestUserCredentials","encodedHost","encodedOwner","encodedRepoName","hostType","repoPickerValidation","OwnedEntityPicker","allowArbitraryValues","ownedEntities","useOwnedEntities","identityRefs","FIELD_EXTENSION_WRAPPER_KEY","FIELD_EXTENSION_KEY","createScaffolderFieldExtension","FieldExtensionDataHolder","createNextScaffolderFieldExtension","ScaffolderFieldExtensions","LAYOUTS_KEY","LAYOUTS_WRAPPER_KEY","createScaffolderLayout","LayoutDataHolder","ScaffolderLayouts","legacySelectedTemplateRouteRef","nextRouteRef","selectedTemplateRouteRef","nextSelectedTemplateRouteRef","scaffolderTaskRouteRef","scaffolderListTaskRouteRef","actionsRouteRef","editRouteRef","scaffolderPlugin","EntityPickerFieldExtension","EntityNamePickerFieldExtension","RepoUrlPickerFieldExtension","OwnerPickerFieldExtension","ScaffolderPage","OwnedEntityPickerFieldExtension","EntityTagsPickerFieldExtension","NextScaffolderPage","TemplateTypePicker","draft","logLine","currentStepLog","currentStep","useTaskEventStream","logPusher","task","observable","collectedLogEvents","emitLogs","TaskErrors","TaskPageLinks","iconResolver","entityName","humanizeDuration","StepTimeTicker","setTime","startedAt","formatted","useStepIconStyles","TaskStepIconComponent","completed","getMiddle","TaskStatusStepper","currentStepId","onUserStepChange","isCompleted","isFailed","isSkipped","hasLinks","TaskPage","rootPath","templateRoute","userSelectedStepId","setUserSelectedStepId","lastActiveStepId","setLastActiveStepId","taskStream","mostRecentFailedOrActiveStep","logAsString","taskNotFound","handleStartOver","searchApiRef","MockSearchApi","mockedResults","HighlightedSearchResultText","preTag","postTag","terms","SearchContext","useSearch","useSearchContextCheck","searchInitialState","useSearchContextValue","initialValue","searchApi","term","setTerm","setTypes","pageLimit","setPageLimit","pageCursor","setPageCursor","prevTerm","hasNextPage","hasPreviousPage","fetchNextPage","fetchPreviousPage","LocalSearchContext","SearchContextProvider","inheritParentContextIfAvailable","TrackSearch","withContext$1","SearchBarBase","onKeyDown","onClear","clearButton","fullWidth","defaultPlaceholder","defaultInputProps","defaultEndAdornment","prevValue","handleKeyDown","handleClear","startAdornment","endAdornment","SearchBar","SearchAutocomplete","getOptionLabel","inputPlaceholder","inputDebounceTime","freeSolo","clearOnBlur","dataTestId","getInputValue","renderInput","InputLabelProps","SearchAutocompleteDefaultOption","primaryText","primaryTextTypographyProps","secondaryText","secondaryTextTypographyProps","disableTextTypography","useAsyncFilterValues","fn","debounce","valuesMemo","definiteFn","possibleValue","useDefaultFilterValue","AutocompleteFilter","givenValues","valuesDebounceMs","filterSelectedOptions","limitTags","asyncValues","renderTags","getTagProps","CheckboxFilter","checked","SelectFilter","SearchFilter","Element","SearchResultContext","SearchResultApi","SearchResultState","SearchResultComponent","SearchResult","SearchResultPager","encodePageCursor","decodePageCursor","SearchPaginationBase","onPageCursorChange","rowsPerPage","labelRowsPerPage","labelDisplayedRows","rowsPerPageOptions","onPageLimitChange","handlePageChange","handleRowsPerPageChange","SearchPagination","DefaultResultListItemComponent","highlight","rank","secondaryAction","lineClamp","HigherOrderDefaultResultListItem","SearchResultListLayout","resultItems","renderResultItem","noResultsComponent","SearchResultList","disableRenderingWithNoResults","SearchResultGroupFilterFieldLayout","NullIcon","useSearchResultGroupTextFilterStyles","SearchResultGroupTextFilterField","useSearchResultGroupSelectFilterStyles","SearchResultGroupSelectFilterField","SearchResultGroupLayout","titleProps","filterOptions","renderFilterOption","filterOption","filterFields","renderFilterField","filterField","SearchResultGroup","SearchClient","searchPlugin","SearchPage$1","SidebarSearchModal","HomePageSearchBar","Modal","toggleModal","getSearchLink","transitions","handleResultClick","handleKeyPress","document","SearchModal","SearchModalContext","SearchModalProvider","showInitially","useSearchModal","parentContext","parentContextValue","UrlUpdater","prevQueryParams","SearchPage","outlet","SearchTypeAccordion","expanded","setExpanded","givenTypes","toggleExpanded","definedTypes","SearchTypeTabs","changeTab","newType","SearchType","SidebarSearch","searchRoute","handleSearch","techRadarApiRef","MovedState","MovedState2","RadarGrid","radius","rings","makeRingNode","ringIndex","ringRadius","axisNodes","ringNodes","WithLink","RadarDescription","makeBlip","moved","blip","RadarEntry","onMouseEnter","onMouseLeave","handleClickOpen","toggle","RadarBubble","visible","textElem","svgElem","rectElem","pathElem","updatePosition","bbox","marginX","marginY","RadarFooter","RadarLegend","getSegment","segmented","quadrant","ring","ringOffset","quadrantIndex","segmentedData","RadarLegendLink","RadarLegendRing","entries2","onEntryMouseEnter2","onEntryMouseLeave2","RadarLegendQuadrant","segments2","rings2","setupSegments","quadrantData","ringData","quadrants","onEntryMouseEnter","onEntryMouseLeave","RadarPlot","activeEntry","Segment","nextSeed","boundedBox","boundedRing","polar","cartesian","boundedInterval","low","high","polarValue","rMin","rMax","adjustQuadrants","xStops","yStops","legendParams","legendParam","adjustEntries","seed","q","simulation","adjustRings","Radar","setActiveEntry","useTechRadarLoader","techRadarApi","matchFilter","RadarComponent","mapToEntries","loaderResponse","RadarPage","componentProps","setSearchText","RadarPage$1","mock","SampleTechRadarApi","TechRadarPage","Router","NESTED_LIST_TOGGLE","EXPANDABLE_NAVIGATION_LOCAL_STORAGE","StyledButton","CollapsedIcon","ExpandedIcon","ExpandableNavigationAddon","hasNavSubLevels","setHasNavSubLevels","checkboxToggles","shouldToggle","isExpanded","shouldExpand","handleState","ADDON_FEEDBACK_CONTAINER_ID","ADDON_FEEDBACK_CONTAINER_SELECTOR","PAGE_EDIT_LINK_SELECTOR","PAGE_FEEDBACK_LINK_SELECTOR","PAGE_MAIN_CONTENT_SELECTOR","resolveBlobUrl","ellipsis","getBody","markdownUrl","subheading","commentHeading","commentPlaceholder","highlightedTextAsQuote","facts","useGitTemplate","initialTemplate","editLink","useGitRepository","getIcon","getName","getUrl","template","encodedTitle","encodedBody","encodedName","IssueLink","ReportIssueAddon","buildTemplate","setStyle","defaultTemplate","mainContent","feedbackLink","feedbackContainer","mainContentPosition","selectionPosition","boxShadow","StyledSlider","settings","marks","TextSizeAddon","mark","getValueText","handleChangeCommitted","handleDecreaseClick","handleIncreaseClick","techdocsModuleAddonsContribPlugin","ExpandableNavigation","ReportIssue","TextSize","plainObjectConstrurctor","cloneStyle","newStyle","createRule","decl","jss","declCopy","by","toCssValue","ignoreImportant","cssValue","getWhitespaceSymbols","indentStr","indent","toCss","_options","_options$indent","fallbacks","_getWhitespaceSymbols","linebreak","space","_prop","_value","_prop2","_value2","escapeRegex","nativeEscape","BaseStyleRule","sheet","Renderer","_proto","force","isEmpty","isDefined","remove","StyleRule","_BaseStyleRule","_this","scoped","generateId","_proto2","renderable","renderer","hasChanged","pluginStyleRule","defaultToStringOptions","atRegExp","ConditionalRule","atMatch","RuleList","keyRegExp","pluginConditionalRule","defaultToStringOptions$1","nameRegExp","KeyframesRule","frames","nameMatch","keyRegExp$1","refRegExp","findReferencedKeyframe","keyframes","replaceRef","refKeyframe","pluginKeyframesRule","KeyframeRule","pluginKeyframeRule","FontFaceRule","keyRegExp$2","pluginFontFaceRule","ViewportRule","pluginViewportRule","SimpleRule","keysMap","pluginSimpleRule","defaultUpdateOptions","forceUpdateOptions","ruleOptions","_this$options","_this$options2","nextValue","_nextValue","_prevValue","css","StyleSheet","added","_this$rules","PluginsRegistry","processedValue","newPlugin","registry","SheetsRegistry","_temp","attached","sheets","globalThis$1","moduleId","maxRules","createGenerateId","ruleCounter","jssId","memoize","getPropertyValue","cssRule","setProperty","removeProperty","setSelector","selectorText","getHead","findHigherSheet","findHighestSheet","findCommentNode","head","findPrevNode","insertionPoint","comment","insertStyle","nextNode","insertionPointElement","parentNode","getNonce","_insertRule","getValidRuleInsertionIndex","maxIndex","createStyle","DomRenderer","media","nonce","deployed","nativeParent","latestNativeParent","_insertionIndex","ruleStr","insertionIndex","nativeRule","instanceCounter","Jss","_len","createJss","SheetsManager","hasCSSTOMSupport","getDynamicStyles","extracted","TECHDOCS_ADDONS_KEY","TECHDOCS_ADDONS_WRAPPER_KEY","TechDocsAddons","getDataKeyByName","createTechDocsAddonExtension","TechDocsAddon","getTechDocsAddonByName","getAllTechDocsAddons","getAllTechDocsAddonsData","useTechDocsAddons","findAddonByData","nameKey","renderComponentByName","renderComponentsByLocation","techdocsApiRef","techdocsStorageApiRef","toLowercaseEntityRefMaybe","areEntityRefsEqual","prevEntityRef","nextEntityRef","defaultTechDocsReaderPageValue","TechDocsReaderPageContext","TechDocsReaderPageProvider","techdocsApi","entityMetadata","setTitle","setSubtitle","shadowRoot","setShadowRoot","prevProps","nextProps","useTechDocsReaderPage","TechDocsAddonLocations","SHADOW_DOM_STYLE_LOAD_EVENT","useShadowDomStylesEvents","handleLoad","useShadowDomStylesLoading","TechDocsShadowDom","onAppend","setJss","jssPreset","shadowHost","StylesProvider","useShadowRoot","useShadowRootElements","selectors","nodeList","isValidSelection","newSelection","useShadowRootSelection","wait","setSelection","handleSelectionChange","shadowDocument","TechDocsClient","entityId","requestUrl","TechDocsStorageClient","errorMessage","logHandler","oldBaseUrl","newBaseUrl","calculateDisplayState","contentLoading","activeSyncState","useReaderState","techdocsStorageApi","contentReload","entityDocs","buildingTimeout","TechDocsReaderContext","useTechDocsReader","TechDocsReaderProvider","withTechDocsReaderProvider","TechDocsSearchResultListItem","asListItem","asLink","TextItem","resultTitle","resultName","ListItemWrapper","isTechDocsSearchResult","TechDocsSearchBar","searchVal","setOptions","mounted","searchResults","handleSelection","TechDocsSearch","useDrawerStyles","TechDocsBuildLogsDrawerContent","buildLog","TechDocsBuildLogs","TechDocsNotFound","techdocsBuilder","TechDocsStateIndicator","StateAlert","contentErrorMessage","syncErrorMessage","MKDOCS_CSS","GOOGLE_FONTS","GSTATIC_FONTS","isLink","isSafe$1","isMkdocsCss","isGoogleFonts","isGstaticFonts","removeUnsafeLinks","isIframe","isSafe","src","removeUnsafeIframes","useSanitizerConfig","useSanitizerTransformer","dom","variables","SIDEBAR_WIDTH","layout","sidebar","headings","typeset","heading","lineHeight","fontWeight","fontSize","calculate","factor","animations","extensions","useSidebar","useRuleStyles","useStylesTransformer","isSvgNeedingInlining","attrName","attrVal","apiOrigin","isSrcToSvg","isRelativeUrl","pointsToOurBackend","addBaseUrl","updateDom","attributeName","elem","elemAttribute","svgContent","addGitFeedbackLink","sourceAnchor","sourceURL","issueTitle","issueDesc","gitUrl","gitInfo","repoPath","addSidebarToggle","mkdocsToggleSidebar","article","toggleSidebar","rewriteDocLinks","normalizedWindowLocation","normalizeUrl","addLinkClickListener","CopyToClipboardTooltip","CopyToClipboardIcon","CopyToClipboardButton","codes","removeMkdocsHeader","simplifyMkdocsFooter","onCssReady","onLoading","onLoaded","handleShadowDomStyleLoad","scrollIntoAnchor","scrollIntoNavigation","activeNavItems","activeNavItem","checkbox","html","transformers","transformer","MOBILE_MEDIA_QUERY","useTechDocsReaderDom","isMobileMedia","sanitizerTransformer","stylesTransformer","rawPage","setDom","isStyleLoading","updateSidebarPosition","pageTop","domTop","tabsHeight","updateFooterWidth","footer","preRender","rawContent","contentPath","postRender","transformedElement","modifierActive","parsedUrl","shouldReplaceContent","preTransformedDomElement","postTransformedDomElement","TechDocsReaderPageContentAddons","addons","contentElement","primarySidebarElement","primarySidebarAddonLocation","secondarySidebarElement","secondarySidebarAddonLocation","TechDocsReaderPageContent","withSearch","onReady","entityMetadataLoading","handleAppend","newShadowRoot","Reader","rootDocsRouteRef","rootCatalogDocsRouteRef","skeleton","TechDocsReaderPageHeader","metadataLoading","site_description","tabTitle","locationMetadata","lifecycle","docsRootLink","TechDocsReaderPageSubheader","subheaderAddons","settingsAddons","TechDocsReaderLayout","withHeader","TechDocsReaderPage$1","nestedChildren","toLowerMaybe","DocsCardGrid","getRouteToReaderPageFor","EntityListDocsGrid","actionFactories","customTitle","DocsTable","documents","EntityListDocsTable","TechDocsPageWrapper","TechDocsFilter","TechDocsPicker","DefaultTechDocsHome","techdocsPlugin","TechdocsPage","EntityTechdocsContent","TechDocsCustomHome","TechDocsIndexPage$2","TechDocsIndexPage$1","TechDocsReaderPage","EntityPageDocs","TechDocsIndexPage","TECHDOCS_ANNOTATION","JSON_HEADERS","UserSettingsStorage","fetchUrl","rawValue","encodedNamespace","encodedKey","settingsRouteRef","UserSettingsPage","SettingsPage$1","Settings","EXAMPLE$1","EmptyProviders","size","ProviderSettingsAvatar","ProviderSettingsItem","signedIn","setSignedIn","emptyProfile","setProfile","sessionState","profileResponse","DefaultProviderSettings","configuredProviders","UserSettingsAuthProviders","providerSettings","providersConfig","EXAMPLE","EmptyFlags","FlagItem","toggleHandler","UserSettingsFeatureFlags","initialFlagState","filterInput","setFilterInput","inputRef","toggleFlag","flagName","clearFilterInput","filteredFeatureFlags","featureFlag","useUserProfile","UserSettingsSignInAvatar","UserSettingsMenu","UserSettingsProfileCard","UserSettingsPinToggle","ThemeIcon","activeId","TooltipToggleButton","UserSettingsThemeToggle","themeIds","handleSetTheme","newThemeId","themeIcon","UserSettingsAppearanceCard","UserSettingsIdentityCard","UserSettingsGeneral","USER_SETTINGS_TAB_KEY","UserSettingsTab","getGlobalObject","globalObject","makeKey","getOrCreateGlobalSingleton","createVersionedValueMap","versions","createVersionedContext","useVersionedContext","createVersionedContextForTesting"],"mappings":"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,GAAY,yCACZC,GAAQ,SACRC,GAAgB,yEAChBC,GAAa,CAChB,CACC,WAAY,wBACZ,KAAM,YACN,SAAU,CACT,KAAM,eACN,YAAa,6BACb,OAAQ,CACP,aAAc,wBACf,EACA,YAAa,CACZ,KAAM,0CACP,CACD,EACA,KAAM,CACL,KAAM,UACN,UAAW,aACX,MAAO,OACR,CACD,CACD,EACIC,GAAS,SACTC,EAAa,CAChB,aACA,OACA,UACD,EACIC,EAAyB,GACzBC,GAAe,CAClB,WAAY,CACX,KAAM,SACN,YAAa,+FACb,UAAW,EACX,SAAU,CACT,wBACA,oBACA,KACD,CACD,EACA,KAAM,CACL,KAAM,SACN,YAAa,8CACb,UAAW,EACX,SAAU,CACT,MACA,YACA,SACA,QACA,WACA,WACA,SACA,WACA,MACD,CACD,EACA,SAAU,CACT,KAAM,YACP,EACA,KAAM,CACL,KAAM,SACN,YAAa,sDACd,EACA,UAAW,CACV,KAAM,QACN,YAAa,0DACb,MAAO,CACN,KAAM,iBACP,CACD,EACA,OAAQ,CACP,KAAM,eACP,CACD,EACIC,GAAe,CAClB,QAASR,GACT,IAAKC,GACL,YAAaC,GACb,SAAUC,GACV,KAAMC,GACN,SAAUC,EACV,qBAAsBC,EACtB,WAAYC,EACb,EAEIE,GAAY,yCACZC,GAAQ,aACRC,GAAgB,0DAChBC,EAAa,CAChB,CACC,IAAK,uCACL,KAAM,2BACN,KAAM,mBACN,UAAW,gBACX,OAAQ,CACP,sBAAuB,YACxB,EACA,YAAa,CACZ,uBAAwB,YACzB,EACA,KAAM,CACL,OACA,MACD,CACD,CACD,EACIC,EAAS,SACTC,GAAW,CACd,MACD,EACIC,GAAuB,GACvBC,GAAa,CAChB,IAAK,CACJ,KAAM,SACN,YAAa,iXACb,SAAU,CACT,sCACD,EACA,UAAW,CACZ,EACA,KAAM,CACL,KAAM,SACN,YAAa,mbACb,SAAU,CACT,0BACD,EACA,UAAW,CACZ,EACA,KAAM,CACL,KAAM,SACN,YAAa,6HACb,SAAU,CACT,gBACD,EACA,UAAW,CACZ,EACA,UAAW,CACV,KAAM,SACN,YAAa,4CACb,QAAW,UACX,SAAU,CACT,UACA,OACD,EACA,UAAW,CACZ,EACA,MAAO,CACN,KAAM,SACN,YAAa,iHACb,SAAU,CACT,oBACD,EACA,UAAW,CACZ,EACA,YAAa,CACZ,KAAM,SACN,YAAa,kFACd,EACA,OAAQ,CACP,KAAM,SACN,YAAa,qEACb,qBAAsB,GACtB,kBAAmB,CAClB,OAAQ,CACP,KAAM,QACP,CACD,CACD,EACA,YAAa,CACZ,KAAM,SACN,YAAa,mFACb,qBAAsB,GACtB,kBAAmB,CAClB,OAAQ,CACP,KAAM,QACP,CACD,CACD,EACA,KAAM,CACL,KAAM,QACN,YAAa,6FACb,MAAO,CACN,KAAM,SACN,UAAW,CACZ,CACD,EACA,MAAO,CACN,KAAM,QACN,YAAa,kNACb,MAAO,CACN,KAAM,SACN,SAAU,CACT,KACD,EACA,WAAY,CACX,IAAK,CACJ,KAAM,SACN,YAAa,kCACb,SAAU,CACT,+BACD,EACA,UAAW,CACZ,EACA,MAAO,CACN,KAAM,SACN,YAAa,6CACb,SAAU,CACT,iBACD,EACA,UAAW,CACZ,EACA,KAAM,CACL,KAAM,SACN,YAAa,8DACb,SAAU,CACT,WACD,EACA,UAAW,CACZ,EACA,KAAM,CACL,KAAM,SACN,YAAa,8DACb,SAAU,CACT,UACA,gBACA,OACA,WACD,EACA,UAAW,CACZ,CACD,CACD,CACD,CACD,EACIC,GAAmB,CACtB,QAASR,GACT,IAAKC,GACL,YAAaC,GACb,SAAUC,EACV,KAAMC,EACN,SAAUC,GACV,qBAAsBC,GACtB,WAAYC,EACb,EAEIE,GAAY,yCACZC,GAAQ,SACRhF,GAAO,SACPiF,GAAgB,kDAChBC,GAAc,CACjB,UAAW,CACV,IAAK,aACL,KAAM,SACN,YAAa,yCACb,SAAU,CACT,OACA,YACA,MACD,EACA,qBAAsB,GACtB,WAAY,CACX,KAAM,CACL,KAAM,SACN,YAAa,gCACb,UAAW,CACZ,EACA,UAAW,CACV,KAAM,SACN,YAAa,8CACb,UAAW,CACZ,EACA,KAAM,CACL,KAAM,SACN,YAAa,yCACb,UAAW,CACZ,CACD,CACD,EACA,SAAU,CACT,IAAK,YACL,KAAM,SACN,YAAa,kDACb,SAAU,CACT,OACA,QACD,EACA,qBAAsB,GACtB,WAAY,CACX,KAAM,CACL,KAAM,SACN,UAAW,EACX,QAAS,SACT,YAAa,uBACd,EACA,OAAQ,CACP,KAAM,YACP,EACA,UAAW,CACV,KAAM,SACN,UAAW,EACX,YAAa,gDACd,CACD,CACD,EACA,OAAQ,CACP,IAAK,UACL,KAAM,SACN,YAAa,mEACb,SAAU,CACV,EACA,qBAAsB,GACtB,WAAY,CACX,MAAO,CACN,KAAM,QACN,MAAO,CACN,KAAM,aACP,CACD,CACD,CACD,EACA,WAAY,CACX,IAAK,cACL,KAAM,SACN,YAAa,iDACb,SAAU,CACT,OACA,QACA,SACD,EACA,qBAAsB,GACtB,WAAY,CACX,KAAM,CACL,KAAM,SACN,UAAW,CACZ,EACA,MAAO,CACN,KAAM,eACN,YAAa,iDACd,EACA,QAAS,CACR,KAAM,SACN,YAAa,wEACd,EACA,MAAO,CACN,KAAM,SACN,YAAa,4DACd,CACD,CACD,EACA,YAAa,CACZ,IAAK,eACL,KAAM,SACN,YAAa,6BACb,KAAQ,CACP,OACA,UACA,OACD,CACD,EACA,MAAO,CACN,IAAK,SACL,KAAM,SACN,YAAa,6BACb,SAAU,CACT,OACA,SACD,EACA,qBAAsB,GACtB,WAAY,CACX,KAAM,CACL,KAAM,SACN,SAAU,CACT,QACA,YACD,EACA,YAAa,6BACb,UAAW,CACZ,EACA,QAAS,CACR,KAAM,SACN,YAAa,0BACd,EACA,KAAM,CACL,KAAM,SACN,YAAa,yCACd,EACA,MAAO,CACN,KAAM,SACN,YAAa,sBACd,CACD,CACD,CACD,EACIC,GAAe,CAClB,QAASJ,GACT,IAAKC,GACL,KAAMhF,GACN,YAAaiF,GACb,YAAaC,EACd,EAEA,MAAME,GAAsC,IAAI,IAC1CC,GAA0B,CAC9BzB,GACAS,GACAS,GACAK,EACF,EACA,SAASG,GAAc5E,GAAQ,CAC7B,GAAI,EAAEA,IAAU,MAAgBA,GAAO,QACrC,MAAM,IAAI,UAAU,eAA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N,UAAW,CACZ,CACD,CACD,CACD,CACD,CACD,CACD,EACIC,GAAW,CACd,QAASL,GACT,IAAKC,GACL,YAAaC,GACb,SAAUC,GACV,MAAOC,EACR,EAEA,MAAME,GAAmCR,GAA+BO,EAAQ,EAEhF,IAAIE,GAAY,yCACZC,GAAQ,iBACRC,GAAgB,kJAChBC,GAAa,CAChB,CACC,WAAY,wBACZ,KAAM,SACN,SAAU,CACT,KAAM,UACN,YAAa,0BACd,EACA,KAAM,CACL,MAAO,uBACR,CACD,CACD,EACIC,GAAU,CACb,CACC,KAAM,QACP,EACA,CACC,KAAM,SACN,SAAU,CACT,MACD,EACA,WAAY,CACX,WAAY,CACX,KAAQ,CACP,wBACA,sBACD,CACD,EACA,KAAM,CACL,KAAQ,CACP,QACD,CACD,EACA,KAAM,CACL,KAAM,SACN,SAAU,CACT,OACD,EACA,WAAY,CACX,MAAO,CACN,KAAM,SACN,YAAa,qDACb,SAAU,CACT,wBACA,mBACD,EACA,UAAW,CACZ,CACD,CACD,CACD,CACD,CACD,EACIC,GAAW,CACd,QAASL,GACT,IAAKC,GACL,YAAaC,GACb,SAAUC,GACV,MAAOC,EACR,EAEA,MAAME,GAAgCf,GAA+Bc,EAAQ,EAE7E,IAAIE,GAAY,yCACZC,GAAQ,gBACRC,GAAgB,kNAChBC,GAAa,CAChB,CACC,WAAY,wBACZ,KAAM,QACN,SAAU,CACT,KAAM,iBACN,YAAa,yBACd,EACA,KAAM,CACL,KAAM,gBACN,QAAS,CACR,YAAa,iBACb,MAAO,6BACP,QAAS,mDACV,EACA,OAAQ,MACR,SAAU,CACT,YACA,OACD,CACD,CACD,CACD,EACIC,GAAU,CACb,CACC,KAAM,QACP,EACA,CACC,KAAM,SACN,SAAU,CACT,MACD,EACA,WAAY,CACX,WAAY,CACX,KAAQ,CACP,wBACA,sBACD,CACD,EACA,KAAM,CACL,KAAQ,CACP,OACD,CACD,EACA,KAAM,CACL,KAAM,SACN,SAAU,CACT,OACA,UACD,EACA,WAAY,CACX,KAAM,CACL,KAAM,SACN,YAAa,2LACb,SAAU,CACT,OACA,gBACA,eACA,MACD,EACA,UAAW,CACZ,EACA,QAAS,CACR,KAAM,SACN,YAAa,uYACb,WAAY,CACX,YAAa,CACZ,KAAM,SACN,YAAa,6CACb,SAAU,CACT,gBACD,EACA,UAAW,CACZ,EACA,MAAO,CACN,KAAM,SACN,YAAa,6CACb,SAAU,CACT,4BACD,EACA,UAAW,CACZ,EACA,QAAS,CACR,KAAM,SACN,YAAa,mDACb,SAAU,CACT,mDACD,EACA,UAAW,CACZ,CACD,CACD,EACA,OAAQ,CACP,KAAM,SACN,YAAa,4NACb,SAAU,CACT,KACD,EACA,UAAW,CACZ,EACA,SAAU,CACT,KAAM,QACN,YAAa,mSACb,MAAO,CACN,KAAM,SACN,SAAU,CACT,YACA,OACD,EACA,UAAW,CACZ,CACD,EACA,QAAS,CACR,KAAM,QACN,YAAa,6FACb,MAAO,CACN,KAAM,SACN,SAAU,CACT,MACD,EACA,UAAW,CACZ,CACD,CACD,CACD,CACD,CACD,CACD,EACIC,GAAW,CACd,QAASL,GACT,IAAKC,GACL,YAAaC,GACb,SAAUC,GACV,MAAOC,EACR,EAEA,MAAME,GAA+BtB,GAA+BqB,EAAQ,EAE5E,IAAIE,GAAY,yCACZC,GAAQ,mBACRC,GAAgB,gFAChBC,GAAa,CAChB,CACC,WAAY,wBACZ,KAAM,WACN,SAAU,CACT,KAAM,UACP,EACA,KAAM,CACL,KAAM,MACN,QAAS,CACR,0EACA,+EACD,CACD,CACD,CACD,EACIC,GAAU,CACb,CACC,KAAM,QACP,EACA,CACC,KAAM,SACN,SAAU,CACT,MACD,EACA,WAAY,CACX,WAAY,CACX,KAAQ,CACP,wBACA,sBACD,CACD,EACA,KAAM,CACL,KAAQ,CACP,UACD,CACD,EACA,KAAM,CACL,KAAM,SACN,SAAU,CACV,EACA,WAAY,CACX,KAAM,CACL,KAAM,SACN,YAAa,gLACb,SAAU,CACT,KACD,EACA,UAAW,CACZ,EACA,OAAQ,CACP,KAAM,SACN,YAAa,6NACb,SAAU,CACT,6BACD,EACA,UAAW,CACZ,EACA,QAAS,CACR,KAAM,QACN,YAAa,sOACb,MAAO,CACN,KAAM,SACN,SAAU,CACT,8BACA,yEACD,EACA,UAAW,CACZ,CACD,EACA,SAAU,CACT,KAAM,SACN,YAAa,sHACb,QAAW,WACX,SAAU,CACT,UACD,EACA,KAAQ,CACP,WACA,UACD,CACD,CACD,CACD,CACD,CACD,CACD,EACIC,GAAW,CACd,QAASL,GACT,IAAKC,GACL,YAAaC,GACb,SAAUC,GACV,MAAOC,EACR,EAEA,MAAME,GAAkC7B,GAA+B4B,EAAQ,EAEzEE,GAAoB,UACpBC,GAAoB,UACpBC,GAAwB,cACxBC,EAA2B,gBAC3BC,EAAwB,cACxBC,EAA2B,gBAC3BC,EAAsB,YACtBC,EAAyB,eACzBC,EAAqB,WACrBC,EAAoB,UACpBC,EAAqB,WACrBC,EAAsB,YACtBC,GAAmB,SACnBC,GAAoB,UAE1B,IAAIC,GAAY,yCACZC,GAAQ,mBACRC,GAAgB,8PAChBC,GAAa,CAChB,CACC,WAAY,wBACZ,KAAM,WACN,SAAU,CACT,KAAM,aACN,YAAa,uBACd,EACA,KAAM,CACL,KAAM,WACN,MAAO,wBACP,OAAQ,0BACT,CACD,CACD,EACIC,GAAU,CACb,CACC,KAAM,QACP,EACA,CACC,KAAM,SACN,SAAU,CACT,MACD,EACA,WAAY,CACX,WAAY,CACX,KAAQ,CACP,wBACA,sBACD,CACD,EACA,KAAM,CACL,KAAQ,CACP,UACD,CACD,EACA,KAAM,CACL,KAAM,SACN,SAAU,CACT,OACA,OACD,EACA,WAAY,CACX,KAAM,CACL,KAAM,SACN,YAAa,wBACb,SAAU,CACT,WACA,YACA,SACD,EACA,UAAW,CACZ,EACA,MAAO,CACN,KAAM,SACN,YAAa,oDACb,SAAU,CACT,wBACA,mBACD,EACA,UAAW,CACZ,EACA,UAAW,CACV,KAAM,QACN,YAAa,qFACb,MAAO,CACN,KAAM,SACN,UAAW,CACZ,CACD,EACA,OAAQ,CACP,KAAM,SACN,YAAa,kEACb,UAAW,CACZ,CACD,CACD,CACD,CACD,CACD,EACIC,GAAW,CACd,QAASL,GACT,IAAKC,GACL,YAAaC,GACb,SAAUC,GACV,MAAOC,EACR,EAEA,MAAME,GAAkClD,GAA+BiD,EAAQ,EAE/E,IAAIE,GAAY,yCACZC,GAAQ,iBACRC,GAAgB,uXAChBC,GAAa,CAChB,CACC,WAAY,wBACZ,KAAM,SACN,SAAU,CACT,KAAM,2BACN,YAAa,yCACd,EACA,KAAM,CACL,MAAO,wBACP,OAAQ,SACT,CACD,CACD,EACIC,GAAU,CACb,CACC,KAAM,QACP,EACA,CACC,KAAM,SACN,SAAU,CACT,MACD,EACA,WAAY,CACX,WAAY,CACX,KAAQ,CACP,wBACA,sBACD,CACD,EACA,KAAM,CACL,KAAQ,CACP,QACD,CACD,EACA,KAAM,CACL,KAAM,SACN,SAAU,CACT,OACD,EACA,WAAY,CACX,MAAO,CACN,KAAM,SACN,YAAa,qDACb,SAAU,CACT,wBACA,mBACD,EACA,UAAW,CACZ,EACA,OAAQ,CACP,KAAM,SACN,YAAa,gEACb,SAAU,CACT,SACD,EACA,UAAW,CACZ,CACD,CACD,CACD,CACD,CACD,EACIC,EAAW,CACd,QAASL,GACT,IAAKC,GACL,YAAaC,GACb,SAAUC,GACV,MAAOC,EACR,EAEA,MAAME,EAAgCzD,GAA+BwD,CAAQ,EAE7E,IAAIE,EAAU,yCACVC,EAAM,eACNC,EAAc,8SACdC,GAAW,CACd,CACC,WAAY,wBACZ,KAAM,OACN,SAAU,CACT,KAAM,MACP,EACA,KAAM,CACL,QAAS,CACR,YAAa,YACb,MAAO,wBACP,QAAS,qDACV,EACA,SAAU,CACT,SACA,WACD,CACD,CACD,CACD,EACIC,GAAQ,CACX,CACC,KAAM,QACP,EACA,CACC,KAAM,SACN,SAAU,CACT,MACD,EACA,WAAY,CACX,WAAY,CACX,KAAQ,CACP,wBACA,sBACD,CACD,EACA,KAAM,CACL,KAAQ,CACP,MACD,CACD,EACA,KAAM,CACL,KAAM,SACN,SAAU,CACT,UACD,EACA,WAAY,CACX,QAAS,CACR,KAAM,SACN,YAAa,wYACb,WAAY,CACX,YAAa,CACZ,KAAM,SACN,YAAa,6CACb,SAAU,CACT,WACD,EACA,UAAW,CACZ,EACA,MAAO,CACN,KA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","file":"static/module-backstage.500b96d4.js","sourcesContent":["import { createTheme as createTheme$1 } from '@material-ui/core/styles';\nimport { darken, lighten } from '@material-ui/core/styles/colorManipulator';\nimport { yellow } from '@material-ui/core/colors';\n\nconst shapes = {\n  wave: `url(\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='1368' height='400' fill='none'%3e%3cmask id='a' width='1368' height='401' x='0' y='0' maskUnits='userSpaceOnUse'%3e%3cpath fill='url(%23paint0_linear)' d='M437 116C223 116 112 0 112 0h1256v400c-82 0-225-21-282-109-112-175-436-175-649-175z'/%3e%3cpath fill='url(%23paint1_linear)' d='M1368 400V282C891-29 788 40 711 161 608 324 121 372 0 361v39h1368z'/%3e%3cpath fill='url(%23paint2_linear)' d='M1368 244v156H0V94c92-24 198-46 375 0l135 41c176 51 195 109 858 109z'/%3e%3cpath fill='url(%23paint3_linear)' d='M1252 400h116c-14-7-35-14-116-16-663-14-837-128-1013-258l-85-61C98 28 46 8 0 0v400h1252z'/%3e%3c/mask%3e%3cg mask='url(%23a)'%3e%3cpath fill='white' d='M-172-98h1671v601H-172z'/%3e%3c/g%3e%3cdefs%3e%3clinearGradient id='paint0_linear' x1='602' x2='1093.5' y1='-960.5' y2='272' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint1_linear' x1='482' x2='480' y1='1058.5' y2='70.5' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint2_linear' x1='424' x2='446.1' y1='-587.5' y2='274.6' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint3_linear' x1='587' x2='349' y1='-1120.5' y2='341' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3c/defs%3e%3c/svg%3e\")`,\n  wave2: `url(\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='1368' height='400' fill='none'%3e%3cmask id='a' width='1764' height='479' x='-229' y='-6' maskUnits='userSpaceOnUse'%3e%3cpath fill='url(%23paint0_linear)' d='M0 400h1350C1321 336 525 33 179-2c-345-34-395 236-408 402H0z'/%3e%3cpath fill='url(%23paint1_linear)' d='M1378 177v223H0V217s219 75 327 52C436 246 717-35 965 45s254 144 413 132z'/%3e%3cpath fill='url(%23paint2_linear)' d='M26 400l-78-16c-170 205-44-6-137-30l-4-1 4 1 137 30c37-45 89-110 159-201 399-514-45 238 1176-50 275-65 354-39 91 267H26z'/%3e%3c/mask%3e%3cg mask='url(%23a)'%3e%3cpath fill='white' d='M0 0h1368v400H0z'/%3e%3c/g%3e%3cdefs%3e%3clinearGradient id='paint0_linear' x1='431' x2='397.3' y1='-599' y2='372.8' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint1_linear' x1='236.5' x2='446.6' y1='-586' y2='381.5' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint2_linear' x1='851.8' x2='640.4' y1='-867.2' y2='363.7' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3c/defs%3e%3c/svg%3e\")`,\n  round: `url(\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='1368' height='400' fill='none'%3e%3cmask id='a' width='2269' height='1408' x='-610' y='-509' maskUnits='userSpaceOnUse'%3e%3ccircle cx='1212.8' cy='74.8' r='317.5' fill='url(%23paint0_linear)' transform='rotate(-52 1213 75)'/%3e%3ccircle cx='737.8' cy='445.8' r='317.5' fill='url(%23paint1_linear)' transform='rotate(-116 738 446)'/%3e%3ccircle cx='601.8' cy='52.8' r='418.6' fill='url(%23paint2_linear)' transform='rotate(-117 602 53)'/%3e%3ccircle cx='999.8' cy='364' r='389.1' fill='url(%23paint3_linear)' transform='rotate(31 1000 364)'/%3e%3cellipse cx='-109.2' cy='263.5' fill='url(%23paint4_linear)' rx='429.2' ry='465.8' transform='rotate(-85 -109 264)'/%3e%3c/mask%3e%3cg mask='url(%23a)'%3e%3cpath fill='white' d='M0 0h1368v400H0z'/%3e%3c/g%3e%3cdefs%3e%3clinearGradient id='paint0_linear' x1='1301.2' x2='161.4' y1='-1879.7' y2='-969.6' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint1_linear' x1='826.2' x2='-313.6' y1='-1508.7' y2='-598.6' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint2_linear' x1='718.4' x2='-784.3' y1='-2524' y2='-1324.2' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint3_linear' x1='1108.2' x2='-288.6' y1='-2031.1' y2='-915.9' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint4_linear' x1='10.4' x2='-1626.5' y1='-2603.8' y2='-1399.5' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3c/defs%3e%3c/svg%3e\")`\n};\nconst colorVariants = {\n  darkGrey: [\"#171717\", \"#383838\"],\n  marineBlue: [\"#006D8F\", \"#0049A1\"],\n  veryBlue: [\"#0027AF\", \"#270094\"],\n  rubyRed: [\"#98002B\", \"#8D1134\"],\n  toastyOrange: [\"#BE2200\", \"#A41D00\"],\n  purpleSky: [\"#8912CA\", \"#3E00EA\"],\n  eveningSea: [\"#00FFF2\", \"#035355\"],\n  teal: [\"#005B4B\"],\n  pinkSea: [\"#C8077A\", \"#C2297D\"],\n  greens: [\"#4BB8A5\", \"#187656\"]\n};\nfunction genPageTheme(props) {\n  var _a;\n  const { colors, shape, options } = props;\n  const gradientColors = colors.length === 1 ? [colors[0], colors[0]] : colors;\n  const gradient = `linear-gradient(90deg, ${gradientColors.join(\", \")})`;\n  const backgroundImage = `${shape},  ${gradient}`;\n  const fontColor = (_a = options == null ? void 0 : options.fontColor) != null ? _a : \"#FFFFFF\";\n  return {\n    colors,\n    shape,\n    backgroundImage,\n    fontColor\n  };\n}\nconst pageTheme = {\n  home: genPageTheme({ colors: colorVariants.teal, shape: shapes.wave }),\n  documentation: genPageTheme({\n    colors: colorVariants.pinkSea,\n    shape: shapes.wave2\n  }),\n  tool: genPageTheme({ colors: colorVariants.purpleSky, shape: shapes.round }),\n  service: genPageTheme({\n    colors: colorVariants.marineBlue,\n    shape: shapes.wave\n  }),\n  website: genPageTheme({ colors: colorVariants.veryBlue, shape: shapes.wave }),\n  library: genPageTheme({ colors: colorVariants.rubyRed, shape: shapes.wave }),\n  other: genPageTheme({ colors: colorVariants.darkGrey, shape: shapes.wave }),\n  app: genPageTheme({ colors: colorVariants.toastyOrange, shape: shapes.wave }),\n  apis: genPageTheme({ colors: colorVariants.teal, shape: shapes.wave2 }),\n  card: genPageTheme({ colors: colorVariants.greens, shape: shapes.wave })\n};\n\nconst DEFAULT_HTML_FONT_SIZE = 16;\nconst DEFAULT_FONT_FAMILY = '\"Helvetica Neue\", Helvetica, Roboto, Arial, sans-serif';\nfunction createThemeOptions(options) {\n  const {\n    palette,\n    htmlFontSize = DEFAULT_HTML_FONT_SIZE,\n    fontFamily = DEFAULT_FONT_FAMILY,\n    defaultPageTheme,\n    pageTheme: pageTheme$1 = pageTheme\n  } = options;\n  if (!pageTheme$1[defaultPageTheme]) {\n    throw new Error(`${defaultPageTheme} is not defined in pageTheme.`);\n  }\n  return {\n    palette,\n    props: {\n      MuiGrid: {\n        spacing: 2\n      },\n      MuiSwitch: {\n        color: \"primary\"\n      }\n    },\n    typography: {\n      htmlFontSize,\n      fontFamily,\n      h6: {\n        fontWeight: 700,\n        fontSize: 20,\n        marginBottom: 2\n      },\n      h5: {\n        fontWeight: 700,\n        fontSize: 24,\n        marginBottom: 4\n      },\n      h4: {\n        fontWeight: 700,\n        fontSize: 28,\n        marginBottom: 6\n      },\n      h3: {\n        fontSize: 32,\n        fontWeight: 700,\n        marginBottom: 6\n      },\n      h2: {\n        fontSize: 40,\n        fontWeight: 700,\n        marginBottom: 8\n      },\n      h1: {\n        fontSize: 54,\n        fontWeight: 700,\n        marginBottom: 10\n      }\n    },\n    page: pageTheme$1[defaultPageTheme],\n    getPageTheme: ({ themeId }) => {\n      var _a;\n      return (_a = pageTheme$1[themeId]) != null ? _a : pageTheme$1[defaultPageTheme];\n    }\n  };\n}\nfunction createThemeOverrides(theme) {\n  return {\n    MuiCssBaseline: {\n      \"@global\": {\n        html: {\n          height: \"100%\",\n          fontFamily: theme.typography.fontFamily\n        },\n        body: {\n          height: \"100%\",\n          fontFamily: theme.typography.fontFamily,\n          \"overscroll-behavior-y\": \"none\"\n        },\n        a: {\n          color: \"inherit\",\n          textDecoration: \"none\"\n        }\n      }\n    },\n    MuiTableRow: {\n      root: {\n        \"&:nth-of-type(odd)\": {\n          backgroundColor: theme.palette.background.default\n        }\n      },\n      hover: {\n        \"&:hover\": {\n          cursor: \"pointer\"\n        }\n      },\n      head: {\n        \"&:nth-of-type(odd)\": {\n          backgroundColor: theme.palette.background.paper\n        }\n      }\n    },\n    MuiTableCell: {\n      root: {\n        wordBreak: \"break-word\",\n        overflow: \"hidden\",\n        verticalAlign: \"middle\",\n        lineHeight: \"1\",\n        margin: 0,\n        padding: theme.spacing(3, 2, 3, 2.5),\n        borderBottom: 0\n      },\n      sizeSmall: {\n        padding: theme.spacing(1.5, 2, 1.5, 2.5)\n      },\n      head: {\n        wordBreak: \"break-word\",\n        overflow: \"hidden\",\n        color: \"rgb(179, 179, 179)\",\n        fontWeight: \"normal\",\n        lineHeight: \"1\"\n      }\n    },\n    MuiTabs: {\n      root: {\n        minHeight: 24\n      }\n    },\n    MuiTab: {\n      root: {\n        color: theme.palette.link,\n        minHeight: 24,\n        textTransform: \"initial\",\n        letterSpacing: \"0.07em\",\n        \"&:hover\": {\n          color: darken(theme.palette.link, 0.3),\n          background: lighten(theme.palette.link, 0.95)\n        },\n        [theme.breakpoints.up(\"md\")]: {\n          minWidth: 120,\n          fontSize: theme.typography.pxToRem(14),\n          fontWeight: 500\n        }\n      },\n      textColorPrimary: {\n        color: theme.palette.link\n      }\n    },\n    MuiTableSortLabel: {\n      root: {\n        color: \"inherit\",\n        \"&:hover\": {\n          color: \"inherit\"\n        },\n        \"&:focus\": {\n          color: \"inherit\"\n        }\n      },\n      active: {\n        fontWeight: \"bold\",\n        color: \"inherit\"\n      }\n    },\n    MuiListItemText: {\n      dense: {\n        whiteSpace: \"nowrap\",\n        overflow: \"hidden\",\n        textOverflow: \"ellipsis\"\n      }\n    },\n    MuiButton: {\n      text: {\n        padding: void 0\n      }\n    },\n    MuiChip: {\n      root: {\n        backgroundColor: \"#D9D9D9\",\n        marginRight: theme.spacing(1),\n        marginBottom: theme.spacing(1),\n        color: theme.palette.grey[900]\n      },\n      outlined: {\n        color: theme.palette.text.primary\n      },\n      label: {\n        lineHeight: `${theme.spacing(2.5)}px`,\n        fontWeight: theme.typography.fontWeightMedium,\n        fontSize: `${theme.spacing(1.75)}px`\n      },\n      labelSmall: {\n        fontSize: `${theme.spacing(1.5)}px`\n      },\n      deleteIcon: {\n        color: theme.palette.grey[500],\n        width: `${theme.spacing(3)}px`,\n        height: `${theme.spacing(3)}px`,\n        margin: `0 ${theme.spacing(0.75)}px 0 -${theme.spacing(0.75)}px`\n      },\n      deleteIconSmall: {\n        width: `${theme.spacing(2)}px`,\n        height: `${theme.spacing(2)}px`,\n        margin: `0 ${theme.spacing(0.5)}px 0 -${theme.spacing(0.5)}px`\n      }\n    },\n    MuiCard: {\n      root: {\n        display: \"flex\",\n        flexDirection: \"column\"\n      }\n    },\n    MuiCardHeader: {\n      root: {\n        paddingBottom: 0\n      }\n    },\n    MuiCardContent: {\n      root: {\n        flexGrow: 1,\n        \"&:last-child\": {\n          paddingBottom: void 0\n        }\n      }\n    },\n    MuiCardActions: {\n      root: {\n        justifyContent: \"flex-end\"\n      }\n    }\n  };\n}\nfunction createTheme(options) {\n  const themeOptions = createThemeOptions(options);\n  const baseTheme = createTheme$1(themeOptions);\n  const overrides = createThemeOverrides(baseTheme);\n  const theme = { ...baseTheme, overrides };\n  return theme;\n}\n\nconst lightTheme = createTheme({\n  palette: {\n    type: \"light\",\n    background: {\n      default: \"#F8F8F8\"\n    },\n    status: {\n      ok: \"#1DB954\",\n      warning: \"#FF9800\",\n      error: \"#E22134\",\n      running: \"#2E77D0\",\n      pending: \"#FFED51\",\n      aborted: \"#757575\"\n    },\n    bursts: {\n      fontColor: \"#FEFEFE\",\n      slackChannelText: \"#ddd\",\n      backgroundColor: {\n        default: \"#7C3699\"\n      },\n      gradient: {\n        linear: \"linear-gradient(-137deg, #4BB8A5 0%, #187656 100%)\"\n      }\n    },\n    primary: {\n      main: \"#2E77D0\"\n    },\n    banner: {\n      info: \"#2E77D0\",\n      error: \"#E22134\",\n      text: \"#FFFFFF\",\n      link: \"#000000\",\n      warning: \"#FF9800\"\n    },\n    border: \"#E6E6E6\",\n    textContrast: \"#000000\",\n    textVerySubtle: \"#DDD\",\n    textSubtle: \"#6E6E6E\",\n    highlight: \"#FFFBCC\",\n    errorBackground: \"#FFEBEE\",\n    warningBackground: \"#F59B23\",\n    infoBackground: \"#ebf5ff\",\n    errorText: \"#CA001B\",\n    infoText: \"#004e8a\",\n    warningText: \"#000000\",\n    linkHover: \"#2196F3\",\n    link: \"#0A6EBE\",\n    gold: yellow.A700,\n    navigation: {\n      background: \"#171717\",\n      indicator: \"#9BF0E1\",\n      color: \"#b5b5b5\",\n      selectedColor: \"#FFF\",\n      navItem: {\n        hoverBackground: \"#404040\"\n      },\n      submenu: {\n        background: \"#404040\"\n      }\n    },\n    pinSidebarButton: {\n      icon: \"#181818\",\n      background: \"#BDBDBD\"\n    },\n    tabbar: {\n      indicator: \"#9BF0E1\"\n    }\n  },\n  defaultPageTheme: \"home\",\n  pageTheme\n});\nconst darkTheme = createTheme({\n  palette: {\n    type: \"dark\",\n    background: {\n      default: \"#333333\"\n    },\n    status: {\n      ok: \"#71CF88\",\n      warning: \"#FFB84D\",\n      error: \"#F84C55\",\n      running: \"#3488E3\",\n      pending: \"#FEF071\",\n      aborted: \"#9E9E9E\"\n    },\n    bursts: {\n      fontColor: \"#FEFEFE\",\n      slackChannelText: \"#ddd\",\n      backgroundColor: {\n        default: \"#7C3699\"\n      },\n      gradient: {\n        linear: \"linear-gradient(-137deg, #4BB8A5 0%, #187656 100%)\"\n      }\n    },\n    primary: {\n      main: \"#9CC9FF\",\n      dark: \"#82BAFD\"\n    },\n    secondary: {\n      main: \"#FF88B2\"\n    },\n    banner: {\n      info: \"#2E77D0\",\n      error: \"#E22134\",\n      text: \"#FFFFFF\",\n      link: \"#000000\",\n      warning: \"#FF9800\"\n    },\n    border: \"#E6E6E6\",\n    textContrast: \"#FFFFFF\",\n    textVerySubtle: \"#727272\",\n    textSubtle: \"#CCCCCC\",\n    highlight: \"#FFFBCC\",\n    errorBackground: \"#FFEBEE\",\n    warningBackground: \"#F59B23\",\n    infoBackground: \"#ebf5ff\",\n    errorText: \"#CA001B\",\n    infoText: \"#004e8a\",\n    warningText: \"#000000\",\n    linkHover: \"#82BAFD\",\n    link: \"#9CC9FF\",\n    gold: yellow.A700,\n    navigation: {\n      background: \"#424242\",\n      indicator: \"#9BF0E1\",\n      color: \"#b5b5b5\",\n      selectedColor: \"#FFF\",\n      navItem: {\n        hoverBackground: \"#404040\"\n      },\n      submenu: {\n        background: \"#404040\"\n      }\n    },\n    pinSidebarButton: {\n      icon: \"#404040\",\n      background: \"#BDBDBD\"\n    },\n    tabbar: {\n      indicator: \"#9BF0E1\"\n    }\n  },\n  defaultPageTheme: \"home\",\n  pageTheme\n});\n\nexport { colorVariants, createTheme, createThemeOptions, createThemeOverrides, darkTheme, genPageTheme, lightTheme, pageTheme, shapes };\n//# sourceMappingURL=index.esm.js.map\n","import { UrlPatternDiscovery, AlertApiForwarder, NoOpAnalyticsApi, ErrorAlerter, ErrorApiForwarder, UnhandledErrorForwarder, WebStorage, createFetchApi, FetchMiddlewares, OAuthRequestManager, GoogleAuth, MicrosoftAuth, GithubAuth, OktaAuth, GitlabAuth, OneLoginAuth, BitbucketAuth, AtlassianAuth, createSpecializedApp } from '@backstage/core-app-api';\nimport { createApiFactory, discoveryApiRef, configApiRef, alertApiRef, analyticsApiRef, errorApiRef, storageApiRef, fetchApiRef, identityApiRef, oauthRequestApiRef, googleAuthApiRef, microsoftAuthApiRef, githubAuthApiRef, oktaAuthApiRef, gitlabAuthApiRef, oneloginAuthApiRef, bitbucketAuthApiRef, atlassianAuthApiRef } from '@backstage/core-plugin-api';\nimport { permissionApiRef, IdentityPermissionApi } from '@backstage/plugin-permission-react';\nimport React from 'react';\nimport Button from '@material-ui/core/Button';\nimport { Progress, ErrorPage, ErrorPanel } from '@backstage/core-components';\nimport { BrowserRouter, useInRouterContext, MemoryRouter } from 'react-router-dom';\nimport MuiApartmentIcon from '@material-ui/icons/Apartment';\nimport MuiBrokenImageIcon from '@material-ui/icons/BrokenImage';\nimport MuiCategoryIcon from '@material-ui/icons/Category';\nimport MuiCreateNewFolderIcon from '@material-ui/icons/CreateNewFolder';\nimport MuiSubjectIcon from '@material-ui/icons/Subject';\nimport MuiSearchIcon from '@material-ui/icons/Search';\nimport MuiChatIcon from '@material-ui/icons/Chat';\nimport MuiDashboardIcon from '@material-ui/icons/Dashboard';\nimport MuiDocsIcon from '@material-ui/icons/Description';\nimport MuiEmailIcon from '@material-ui/icons/Email';\nimport MuiExtensionIcon from '@material-ui/icons/Extension';\nimport MuiGitHubIcon from '@material-ui/icons/GitHub';\nimport MuiHelpIcon from '@material-ui/icons/Help';\nimport MuiLocationOnIcon from '@material-ui/icons/LocationOn';\nimport MuiMemoryIcon from '@material-ui/icons/Memory';\nimport MuiMenuBookIcon from '@material-ui/icons/MenuBook';\nimport MuiPeopleIcon from '@material-ui/icons/People';\nimport MuiPersonIcon from '@material-ui/icons/Person';\nimport MuiWarningIcon from '@material-ui/icons/Warning';\nimport { lightTheme, darkTheme } from '@backstage/theme';\nimport DarkIcon from '@material-ui/icons/Brightness2';\nimport LightIcon from '@material-ui/icons/WbSunny';\nimport { ThemeProvider } from '@material-ui/core/styles';\nimport CssBaseline from '@material-ui/core/CssBaseline';\n\nconst apis = [\n  createApiFactory({\n    api: discoveryApiRef,\n    deps: { configApi: configApiRef },\n    factory: ({ configApi }) => UrlPatternDiscovery.compile(\n      `${configApi.getString(\"backend.baseUrl\")}/api/{{ pluginId }}`\n    )\n  }),\n  createApiFactory({\n    api: alertApiRef,\n    deps: {},\n    factory: () => new AlertApiForwarder()\n  }),\n  createApiFactory({\n    api: analyticsApiRef,\n    deps: {},\n    factory: () => new NoOpAnalyticsApi()\n  }),\n  createApiFactory({\n    api: errorApiRef,\n    deps: { alertApi: alertApiRef },\n    factory: ({ alertApi }) => {\n      const errorApi = new ErrorAlerter(alertApi, new ErrorApiForwarder());\n      UnhandledErrorForwarder.forward(errorApi, { hidden: false });\n      return errorApi;\n    }\n  }),\n  createApiFactory({\n    api: storageApiRef,\n    deps: { errorApi: errorApiRef },\n    factory: ({ errorApi }) => WebStorage.create({ errorApi })\n  }),\n  createApiFactory({\n    api: fetchApiRef,\n    deps: {\n      configApi: configApiRef,\n      identityApi: identityApiRef,\n      discoveryApi: discoveryApiRef\n    },\n    factory: ({ configApi, identityApi, discoveryApi }) => {\n      return createFetchApi({\n        middleware: [\n          FetchMiddlewares.resolvePluginProtocol({\n            discoveryApi\n          }),\n          FetchMiddlewares.injectIdentityAuth({\n            identityApi,\n            config: configApi\n          })\n        ]\n      });\n    }\n  }),\n  createApiFactory({\n    api: oauthRequestApiRef,\n    deps: {},\n    factory: () => new OAuthRequestManager()\n  }),\n  createApiFactory({\n    api: googleAuthApiRef,\n    deps: {\n      discoveryApi: discoveryApiRef,\n      oauthRequestApi: oauthRequestApiRef,\n      configApi: configApiRef\n    },\n    factory: ({ discoveryApi, oauthRequestApi, configApi }) => GoogleAuth.create({\n      discoveryApi,\n      oauthRequestApi,\n      environment: configApi.getOptionalString(\"auth.environment\")\n    })\n  }),\n  createApiFactory({\n    api: microsoftAuthApiRef,\n    deps: {\n      discoveryApi: discoveryApiRef,\n      oauthRequestApi: oauthRequestApiRef,\n      configApi: configApiRef\n    },\n    factory: ({ discoveryApi, oauthRequestApi, configApi }) => MicrosoftAuth.create({\n      discoveryApi,\n      oauthRequestApi,\n      environment: configApi.getOptionalString(\"auth.environment\")\n    })\n  }),\n  createApiFactory({\n    api: githubAuthApiRef,\n    deps: {\n      discoveryApi: discoveryApiRef,\n      oauthRequestApi: oauthRequestApiRef,\n      configApi: configApiRef\n    },\n    factory: ({ discoveryApi, oauthRequestApi, configApi }) => GithubAuth.create({\n      discoveryApi,\n      oauthRequestApi,\n      defaultScopes: [\"read:user\"],\n      environment: configApi.getOptionalString(\"auth.environment\")\n    })\n  }),\n  createApiFactory({\n    api: oktaAuthApiRef,\n    deps: {\n      discoveryApi: discoveryApiRef,\n      oauthRequestApi: oauthRequestApiRef,\n      configApi: configApiRef\n    },\n    factory: ({ discoveryApi, oauthRequestApi, configApi }) => OktaAuth.create({\n      discoveryApi,\n      oauthRequestApi,\n      environment: configApi.getOptionalString(\"auth.environment\")\n    })\n  }),\n  createApiFactory({\n    api: gitlabAuthApiRef,\n    deps: {\n      discoveryApi: discoveryApiRef,\n      oauthRequestApi: oauthRequestApiRef,\n      configApi: configApiRef\n    },\n    factory: ({ discoveryApi, oauthRequestApi, configApi }) => GitlabAuth.create({\n      discoveryApi,\n      oauthRequestApi,\n      environment: configApi.getOptionalString(\"auth.environment\")\n    })\n  }),\n  createApiFactory({\n    api: oneloginAuthApiRef,\n    deps: {\n      discoveryApi: discoveryApiRef,\n      oauthRequestApi: oauthRequestApiRef,\n      configApi: configApiRef\n    },\n    factory: ({ discoveryApi, oauthRequestApi, configApi }) => OneLoginAuth.create({\n      discoveryApi,\n      oauthRequestApi,\n      environment: configApi.getOptionalString(\"auth.environment\")\n    })\n  }),\n  createApiFactory({\n    api: bitbucketAuthApiRef,\n    deps: {\n      discoveryApi: discoveryApiRef,\n      oauthRequestApi: oauthRequestApiRef,\n      configApi: configApiRef\n    },\n    factory: ({ discoveryApi, oauthRequestApi, configApi }) => BitbucketAuth.create({\n      discoveryApi,\n      oauthRequestApi,\n      defaultScopes: [\"team\"],\n      environment: configApi.getOptionalString(\"auth.environment\")\n    })\n  }),\n  createApiFactory({\n    api: atlassianAuthApiRef,\n    deps: {\n      discoveryApi: discoveryApiRef,\n      oauthRequestApi: oauthRequestApiRef,\n      configApi: configApiRef\n    },\n    factory: ({ discoveryApi, oauthRequestApi, configApi }) => {\n      return AtlassianAuth.create({\n        discoveryApi,\n        oauthRequestApi,\n        environment: configApi.getOptionalString(\"auth.environment\")\n      });\n    }\n  }),\n  createApiFactory({\n    api: permissionApiRef,\n    deps: {\n      discovery: discoveryApiRef,\n      identity: identityApiRef,\n      config: configApiRef\n    },\n    factory: ({ config, discovery, identity }) => IdentityPermissionApi.create({ config, discovery, identity })\n  })\n];\n\nfunction OptionallyWrapInRouter({ children }) {\n  if (useInRouterContext()) {\n    return /* @__PURE__ */ React.createElement(React.Fragment, null, children);\n  }\n  return /* @__PURE__ */ React.createElement(MemoryRouter, null, children);\n}\nconst DefaultNotFoundPage = () => /* @__PURE__ */ React.createElement(ErrorPage, {\n  status: \"404\",\n  statusMessage: \"PAGE NOT FOUND\"\n});\nconst DefaultBootErrorPage = ({ step, error }) => {\n  let message = \"\";\n  if (step === \"load-config\") {\n    message = `The configuration failed to load, someone should have a look at this error: ${error.message}`;\n  } else if (step === \"load-chunk\") {\n    message = `Lazy loaded chunk failed to load, try to reload the page: ${error.message}`;\n  }\n  return /* @__PURE__ */ React.createElement(OptionallyWrapInRouter, null, /* @__PURE__ */ React.createElement(ErrorPage, {\n    status: \"501\",\n    statusMessage: message\n  }));\n};\nconst DefaultErrorBoundaryFallback = ({\n  error,\n  resetError,\n  plugin\n}) => {\n  return /* @__PURE__ */ React.createElement(ErrorPanel, {\n    title: `Error in ${plugin == null ? void 0 : plugin.getId()}`,\n    defaultExpanded: true,\n    error\n  }, /* @__PURE__ */ React.createElement(Button, {\n    variant: \"outlined\",\n    onClick: resetError\n  }, \"Retry\"));\n};\nconst components = {\n  Progress,\n  Router: BrowserRouter,\n  NotFoundErrorPage: DefaultNotFoundPage,\n  BootErrorPage: DefaultBootErrorPage,\n  ErrorBoundaryFallback: DefaultErrorBoundaryFallback\n};\n\nconst icons = {\n  brokenImage: MuiBrokenImageIcon,\n  catalog: MuiMenuBookIcon,\n  scaffolder: MuiCreateNewFolderIcon,\n  techdocs: MuiSubjectIcon,\n  search: MuiSearchIcon,\n  chat: MuiChatIcon,\n  dashboard: MuiDashboardIcon,\n  docs: MuiDocsIcon,\n  email: MuiEmailIcon,\n  github: MuiGitHubIcon,\n  group: MuiPeopleIcon,\n  help: MuiHelpIcon,\n  \"kind:api\": MuiExtensionIcon,\n  \"kind:component\": MuiMemoryIcon,\n  \"kind:domain\": MuiApartmentIcon,\n  \"kind:group\": MuiPeopleIcon,\n  \"kind:location\": MuiLocationOnIcon,\n  \"kind:system\": MuiCategoryIcon,\n  \"kind:user\": MuiPersonIcon,\n  user: MuiPersonIcon,\n  warning: MuiWarningIcon\n};\n\nconst themes = [\n  {\n    id: \"light\",\n    title: \"Light Theme\",\n    variant: \"light\",\n    icon: /* @__PURE__ */ React.createElement(LightIcon, null),\n    Provider: ({ children }) => /* @__PURE__ */ React.createElement(ThemeProvider, {\n      theme: lightTheme\n    }, /* @__PURE__ */ React.createElement(CssBaseline, null, children))\n  },\n  {\n    id: \"dark\",\n    title: \"Dark Theme\",\n    variant: \"dark\",\n    icon: /* @__PURE__ */ React.createElement(DarkIcon, null),\n    Provider: ({ children }) => /* @__PURE__ */ React.createElement(ThemeProvider, {\n      theme: darkTheme\n    }, /* @__PURE__ */ React.createElement(CssBaseline, null, children))\n  }\n];\n\nfunction createApp(options) {\n  var _a, _b, _c;\n  return createSpecializedApp({\n    ...options,\n    apis: (_a = options == null ? void 0 : options.apis) != null ? _a : [],\n    bindRoutes: options == null ? void 0 : options.bindRoutes,\n    components: {\n      ...components,\n      ...options == null ? void 0 : options.components\n    },\n    configLoader: options == null ? void 0 : options.configLoader,\n    defaultApis: apis,\n    icons: {\n      ...icons,\n      ...options == null ? void 0 : options.icons\n    },\n    plugins: (_b = options == null ? void 0 : options.plugins) != null ? _b : [],\n    themes: (_c = options == null ? void 0 : options.themes) != null ? _c : themes\n  });\n}\n\nexport { createApp };\n//# sourceMappingURL=index.esm.js.map\n","import { parseEntityRef, stringifyLocationRef, stringifyEntityRef } from '@backstage/catalog-model';\nimport { ResponseError } from '@backstage/errors';\nimport crossFetch from 'cross-fetch';\n\nconst CATALOG_FILTER_EXISTS = Symbol.for(\n  \"CATALOG_FILTER_EXISTS_0e15b590c0b343a2bae3e787e84c2111\"\n);\n\nclass CatalogClient {\n  constructor(options) {\n    this.discoveryApi = options.discoveryApi;\n    this.fetchApi = options.fetchApi || { fetch: crossFetch };\n  }\n  async getEntityAncestors(request, options) {\n    const { kind, namespace, name } = parseEntityRef(request.entityRef);\n    return await this.requestRequired(\n      \"GET\",\n      `/entities/by-name/${encodeURIComponent(kind)}/${encodeURIComponent(\n        namespace\n      )}/${encodeURIComponent(name)}/ancestry`,\n      options\n    );\n  }\n  async getLocationById(id, options) {\n    return await this.requestOptional(\n      \"GET\",\n      `/locations/${encodeURIComponent(id)}`,\n      options\n    );\n  }\n  async getEntities(request, options) {\n    const { filter = [], fields = [], offset, limit, after } = request != null ? request : {};\n    const params = [];\n    for (const filterItem of [filter].flat()) {\n      const filterParts = [];\n      for (const [key, value] of Object.entries(filterItem)) {\n        for (const v of [value].flat()) {\n          if (v === CATALOG_FILTER_EXISTS) {\n            filterParts.push(encodeURIComponent(key));\n          } else if (typeof v === \"string\") {\n            filterParts.push(\n              `${encodeURIComponent(key)}=${encodeURIComponent(v)}`\n            );\n          }\n        }\n      }\n      if (filterParts.length) {\n        params.push(`filter=${filterParts.join(\",\")}`);\n      }\n    }\n    if (fields.length) {\n      params.push(`fields=${fields.map(encodeURIComponent).join(\",\")}`);\n    }\n    if (offset !== void 0) {\n      params.push(`offset=${offset}`);\n    }\n    if (limit !== void 0) {\n      params.push(`limit=${limit}`);\n    }\n    if (after !== void 0) {\n      params.push(`after=${encodeURIComponent(after)}`);\n    }\n    const query = params.length ? `?${params.join(\"&\")}` : \"\";\n    const entities = await this.requestRequired(\n      \"GET\",\n      `/entities${query}`,\n      options\n    );\n    const refCompare = (a, b) => {\n      var _a, _b;\n      if (((_a = a.metadata) == null ? void 0 : _a.name) === void 0 || a.kind === void 0 || ((_b = b.metadata) == null ? void 0 : _b.name) === void 0 || b.kind === void 0) {\n        return 0;\n      }\n      const aRef = stringifyEntityRef(a);\n      const bRef = stringifyEntityRef(b);\n      if (aRef < bRef) {\n        return -1;\n      }\n      if (aRef > bRef) {\n        return 1;\n      }\n      return 0;\n    };\n    return { items: entities.sort(refCompare) };\n  }\n  async getEntityByRef(entityRef, options) {\n    const { kind, namespace, name } = parseEntityRef(entityRef);\n    return this.requestOptional(\n      \"GET\",\n      `/entities/by-name/${encodeURIComponent(kind)}/${encodeURIComponent(\n        namespace\n      )}/${encodeURIComponent(name)}`,\n      options\n    );\n  }\n  async getEntityByName(compoundName, options) {\n    const { kind, namespace = \"default\", name } = compoundName;\n    return this.requestOptional(\n      \"GET\",\n      `/entities/by-name/${encodeURIComponent(kind)}/${encodeURIComponent(\n        namespace\n      )}/${encodeURIComponent(name)}`,\n      options\n    );\n  }\n  async refreshEntity(entityRef, options) {\n    const response = await this.fetchApi.fetch(\n      `${await this.discoveryApi.getBaseUrl(\"catalog\")}/refresh`,\n      {\n        headers: {\n          \"Content-Type\": \"application/json\",\n          ...(options == null ? void 0 : options.token) && { Authorization: `Bearer ${options == null ? void 0 : options.token}` }\n        },\n        method: \"POST\",\n        body: JSON.stringify({ entityRef })\n      }\n    );\n    if (response.status !== 200) {\n      throw new Error(await response.text());\n    }\n  }\n  async getEntityFacets(request, options) {\n    const { filter = [], facets } = request;\n    const params = [];\n    for (const filterItem of [filter].flat()) {\n      const filterParts = [];\n      for (const [key, value] of Object.entries(filterItem)) {\n        for (const v of [value].flat()) {\n          if (v === CATALOG_FILTER_EXISTS) {\n            filterParts.push(encodeURIComponent(key));\n          } else if (typeof v === \"string\") {\n            filterParts.push(\n              `${encodeURIComponent(key)}=${encodeURIComponent(v)}`\n            );\n          }\n        }\n      }\n      if (filterParts.length) {\n        params.push(`filter=${filterParts.join(\",\")}`);\n      }\n    }\n    for (const facet of facets) {\n      params.push(`facet=${encodeURIComponent(facet)}`);\n    }\n    const query = params.length ? `?${params.join(\"&\")}` : \"\";\n    return await this.requestOptional(\"GET\", `/entity-facets${query}`, options);\n  }\n  async addLocation(request, options) {\n    const { type = \"url\", target, dryRun } = request;\n    const response = await this.fetchApi.fetch(\n      `${await this.discoveryApi.getBaseUrl(\"catalog\")}/locations${dryRun ? \"?dryRun=true\" : \"\"}`,\n      {\n        headers: {\n          \"Content-Type\": \"application/json\",\n          ...(options == null ? void 0 : options.token) && { Authorization: `Bearer ${options == null ? void 0 : options.token}` }\n        },\n        method: \"POST\",\n        body: JSON.stringify({ type, target })\n      }\n    );\n    if (response.status !== 201) {\n      throw new Error(await response.text());\n    }\n    const { location, entities, exists } = await response.json();\n    if (!location) {\n      throw new Error(`Location wasn't added: ${target}`);\n    }\n    return {\n      location,\n      entities,\n      exists\n    };\n  }\n  async getLocationByRef(locationRef, options) {\n    const all = await this.requestRequired(\n      \"GET\",\n      \"/locations\",\n      options\n    );\n    return all.map((r) => r.data).find((l) => locationRef === stringifyLocationRef(l));\n  }\n  async removeLocationById(id, options) {\n    await this.requestIgnored(\n      \"DELETE\",\n      `/locations/${encodeURIComponent(id)}`,\n      options\n    );\n  }\n  async removeEntityByUid(uid, options) {\n    await this.requestIgnored(\n      \"DELETE\",\n      `/entities/by-uid/${encodeURIComponent(uid)}`,\n      options\n    );\n  }\n  async validateEntity(entity, locationRef, options) {\n    const response = await this.fetchApi.fetch(\n      `${await this.discoveryApi.getBaseUrl(\"catalog\")}/validate-entity`,\n      {\n        headers: {\n          \"Content-Type\": \"application/json\",\n          ...(options == null ? void 0 : options.token) && { Authorization: `Bearer ${options == null ? void 0 : options.token}` }\n        },\n        method: \"POST\",\n        body: JSON.stringify({ entity, location: locationRef })\n      }\n    );\n    if (response.ok) {\n      return {\n        valid: true\n      };\n    }\n    if (response.status !== 400) {\n      throw await ResponseError.fromResponse(response);\n    }\n    const { errors = [] } = await response.json();\n    return {\n      valid: false,\n      errors\n    };\n  }\n  async requestIgnored(method, path, options) {\n    const url = `${await this.discoveryApi.getBaseUrl(\"catalog\")}${path}`;\n    const headers = (options == null ? void 0 : options.token) ? { Authorization: `Bearer ${options.token}` } : {};\n    const response = await this.fetchApi.fetch(url, { method, headers });\n    if (!response.ok) {\n      throw await ResponseError.fromResponse(response);\n    }\n  }\n  async requestRequired(method, path, options) {\n    const url = `${await this.discoveryApi.getBaseUrl(\"catalog\")}${path}`;\n    const headers = (options == null ? void 0 : options.token) ? { Authorization: `Bearer ${options.token}` } : {};\n    const response = await this.fetchApi.fetch(url, { method, headers });\n    if (!response.ok) {\n      throw await ResponseError.fromResponse(response);\n    }\n    return await response.json();\n  }\n  async requestOptional(method, path, options) {\n    const url = `${await this.discoveryApi.getBaseUrl(\"catalog\")}${path}`;\n    const headers = (options == null ? void 0 : options.token) ? { Authorization: `Bearer ${options.token}` } : {};\n    const response = await this.fetchApi.fetch(url, { method, headers });\n    if (!response.ok) {\n      if (response.status === 404) {\n        return void 0;\n      }\n      throw await ResponseError.fromResponse(response);\n    }\n    return await response.json();\n  }\n}\n\nconst ENTITY_STATUS_CATALOG_PROCESSING_TYPE = \"backstage.io/catalog-processing\";\n\nexport { CATALOG_FILTER_EXISTS, CatalogClient, ENTITY_STATUS_CATALOG_PROCESSING_TYPE };\n//# sourceMappingURL=index.esm.js.map\n","import lodash from 'lodash';\nimport Ajv from 'ajv';\n\nfunction isApiEntity(entity) {\n  return entity.kind.toLocaleUpperCase(\"en-US\") === \"API\";\n}\nfunction isComponentEntity(entity) {\n  return entity.kind.toLocaleUpperCase(\"en-US\") === \"COMPONENT\";\n}\nfunction isDomainEntity(entity) {\n  return entity.kind.toLocaleUpperCase(\"en-US\") === \"DOMAIN\";\n}\nfunction isGroupEntity(entity) {\n  return entity.kind.toLocaleUpperCase(\"en-US\") === \"GROUP\";\n}\nfunction isLocationEntity(entity) {\n  return entity.kind.toLocaleUpperCase(\"en-US\") === \"LOCATION\";\n}\nfunction isResourceEntity(entity) {\n  return entity.kind.toLocaleUpperCase(\"en-US\") === \"RESOURCE\";\n}\nfunction isSystemEntity(entity) {\n  return entity.kind.toLocaleUpperCase(\"en-US\") === \"SYSTEM\";\n}\nfunction isUserEntity(entity) {\n  return entity.kind.toLocaleUpperCase(\"en-US\") === \"USER\";\n}\n\nconst DEFAULT_NAMESPACE = \"default\";\nconst ANNOTATION_VIEW_URL = \"backstage.io/view-url\";\nconst ANNOTATION_EDIT_URL = \"backstage.io/edit-url\";\nconst ANNOTATION_KUBERNETES_API_SERVER = \"kubernetes.io/api-server\";\nconst ANNOTATION_KUBERNETES_API_SERVER_CA = \"kubernetes.io/api-server-certificate-authority\";\nconst ANNOTATION_KUBERNETES_AUTH_PROVIDER = \"kubernetes.io/auth-provider\";\n\nclass DefaultNamespaceEntityPolicy {\n  constructor(namespace = DEFAULT_NAMESPACE) {\n    this.namespace = namespace;\n  }\n  async enforce(entity) {\n    if (entity.metadata.namespace) {\n      return entity;\n    }\n    return lodash.merge({ metadata: { namespace: this.namespace } }, entity);\n  }\n}\n\nfunction parseRefString(ref) {\n  let colonI = ref.indexOf(\":\");\n  const slashI = ref.indexOf(\"/\");\n  if (slashI !== -1 && slashI < colonI) {\n    colonI = -1;\n  }\n  const kind = colonI === -1 ? void 0 : ref.slice(0, colonI);\n  const namespace = slashI === -1 ? void 0 : ref.slice(colonI + 1, slashI);\n  const name = ref.slice(Math.max(colonI + 1, slashI + 1));\n  if (kind === \"\" || namespace === \"\" || name === \"\") {\n    throw new TypeError(\n      `Entity reference \"${ref}\" was not on the form [<kind>:][<namespace>/]<name>`\n    );\n  }\n  return { kind, namespace, name };\n}\nfunction getCompoundEntityRef(entity) {\n  return {\n    kind: entity.kind,\n    namespace: entity.metadata.namespace || DEFAULT_NAMESPACE,\n    name: entity.metadata.name\n  };\n}\nfunction parseEntityRef(ref, context) {\n  var _a, _b, _c, _d;\n  if (!ref) {\n    throw new Error(`Entity reference must not be empty`);\n  }\n  const defaultKind = context == null ? void 0 : context.defaultKind;\n  const defaultNamespace = (context == null ? void 0 : context.defaultNamespace) || DEFAULT_NAMESPACE;\n  let kind;\n  let namespace;\n  let name;\n  if (typeof ref === \"string\") {\n    const parsed = parseRefString(ref);\n    kind = (_a = parsed.kind) != null ? _a : defaultKind;\n    namespace = (_b = parsed.namespace) != null ? _b : defaultNamespace;\n    name = parsed.name;\n  } else {\n    kind = (_c = ref.kind) != null ? _c : defaultKind;\n    namespace = (_d = ref.namespace) != null ? _d : defaultNamespace;\n    name = ref.name;\n  }\n  if (!kind) {\n    const textual = JSON.stringify(ref);\n    throw new Error(\n      `Entity reference ${textual} had missing or empty kind (e.g. did not start with \"component:\" or similar)`\n    );\n  } else if (!namespace) {\n    const textual = JSON.stringify(ref);\n    throw new Error(\n      `Entity reference ${textual} had missing or empty namespace`\n    );\n  } else if (!name) {\n    const textual = JSON.stringify(ref);\n    throw new Error(`Entity reference ${textual} had missing or empty name`);\n  }\n  return { kind, namespace, name };\n}\nfunction stringifyEntityRef(ref) {\n  var _a, _b;\n  let kind;\n  let namespace;\n  let name;\n  if (\"metadata\" in ref) {\n    kind = ref.kind;\n    namespace = (_a = ref.metadata.namespace) != null ? _a : DEFAULT_NAMESPACE;\n    name = ref.metadata.name;\n  } else {\n    kind = ref.kind;\n    namespace = (_b = ref.namespace) != null ? _b : DEFAULT_NAMESPACE;\n    name = ref.name;\n  }\n  return `${kind.toLocaleLowerCase(\"en-US\")}:${namespace.toLocaleLowerCase(\n    \"en-US\"\n  )}/${name.toLocaleLowerCase(\"en-US\")}`;\n}\n\nclass GroupDefaultParentEntityPolicy {\n  constructor(parentEntityRef) {\n    const { kind, namespace, name } = parseEntityRef(parentEntityRef, {\n      defaultKind: \"Group\",\n      defaultNamespace: DEFAULT_NAMESPACE\n    });\n    if (kind.toLocaleUpperCase(\"en-US\") !== \"GROUP\") {\n      throw new TypeError(\"group parent must be a group\");\n    }\n    this.parentRef = stringifyEntityRef({\n      kind,\n      namespace,\n      name\n    });\n  }\n  async enforce(entity) {\n    if (entity.kind !== \"Group\") {\n      return entity;\n    }\n    const group = entity;\n    if (group.spec.parent) {\n      return group;\n    }\n    if (stringifyEntityRef(group) !== this.parentRef) {\n      group.spec.parent = this.parentRef;\n    }\n    return group;\n  }\n}\n\nclass CommonValidatorFunctions {\n  static isValidPrefixAndOrSuffix(value, separator, isValidPrefix, isValidSuffix) {\n    if (typeof value !== \"string\") {\n      return false;\n    }\n    const parts = value.split(separator);\n    if (parts.length === 1) {\n      return isValidSuffix(parts[0]);\n    } else if (parts.length === 2) {\n      return isValidPrefix(parts[0]) && isValidSuffix(parts[1]);\n    }\n    return false;\n  }\n  static isJsonSafe(value) {\n    try {\n      return lodash.isEqual(value, JSON.parse(JSON.stringify(value)));\n    } catch {\n      return false;\n    }\n  }\n  static isValidDnsSubdomain(value) {\n    return typeof value === \"string\" && value.length >= 1 && value.length <= 253 && value.split(\".\").every(CommonValidatorFunctions.isValidDnsLabel);\n  }\n  static isValidDnsLabel(value) {\n    return typeof value === \"string\" && value.length >= 1 && value.length <= 63 && /^[a-z0-9]+(\\-[a-z0-9]+)*$/.test(value);\n  }\n  static isValidTag(value) {\n    return typeof value === \"string\" && value.length >= 1 && value.length <= 63 && /^[a-z0-9+#]+(\\-[a-z0-9+#]+)*$/.test(value);\n  }\n  static isValidUrl(value) {\n    if (typeof value !== \"string\") {\n      return false;\n    }\n    try {\n      new URL(value);\n      return true;\n    } catch {\n      return false;\n    }\n  }\n  static isValidString(value) {\n    var _a;\n    return typeof value === \"string\" && ((_a = value == null ? void 0 : value.trim()) == null ? void 0 : _a.length) >= 1;\n  }\n  static isNonEmptyString(value) {\n    var _a;\n    return typeof value === \"string\" && ((_a = value == null ? void 0 : value.trim()) == null ? void 0 : _a.length) >= 1;\n  }\n}\n\nvar $schema$b = \"http://json-schema.org/draft-07/schema\";\nvar $id$b = \"EntityEnvelope\";\nvar description$b = \"The envelope skeleton parts of an entity - whatever is necessary to be able to give it a ref and pass to further validation / policy checking.\";\nvar examples$a = [\n\t{\n\t\tapiVersion: \"backstage.io/v1alpha1\",\n\t\tkind: \"Component\",\n\t\tmetadata: {\n\t\t\tname: \"LoremService\"\n\t\t}\n\t}\n];\nvar type$3 = \"object\";\nvar required$2 = [\n\t\"apiVersion\",\n\t\"kind\",\n\t\"metadata\"\n];\nvar additionalProperties$2 = true;\nvar properties$2 = {\n\tapiVersion: {\n\t\ttype: \"string\",\n\t\tdescription: \"The version of specification format for this particular entity that this is written against.\",\n\t\tminLength: 1,\n\t\texamples: [\n\t\t\t\"backstage.io/v1alpha1\",\n\t\t\t\"my-company.net/v1\",\n\t\t\t\"1.0\"\n\t\t]\n\t},\n\tkind: {\n\t\ttype: \"string\",\n\t\tdescription: \"The high level entity type being described.\",\n\t\tminLength: 1,\n\t\texamples: [\n\t\t\t\"API\",\n\t\t\t\"Component\",\n\t\t\t\"Domain\",\n\t\t\t\"Group\",\n\t\t\t\"Location\",\n\t\t\t\"Resource\",\n\t\t\t\"System\",\n\t\t\t\"Template\",\n\t\t\t\"User\"\n\t\t]\n\t},\n\tmetadata: {\n\t\ttype: \"object\",\n\t\trequired: [\n\t\t\t\"name\"\n\t\t],\n\t\tadditionalProperties: true,\n\t\tproperties: {\n\t\t\tname: {\n\t\t\t\ttype: \"string\",\n\t\t\t\tdescription: \"The name of the entity. Must be unique within the catalog at any given point in time, for any given namespace + kind pair.\",\n\t\t\t\texamples: [\n\t\t\t\t\t\"metadata-proxy\"\n\t\t\t\t],\n\t\t\t\tminLength: 1\n\t\t\t},\n\t\t\tnamespace: {\n\t\t\t\ttype: \"string\",\n\t\t\t\tdescription: \"The namespace that the entity belongs to.\",\n\t\t\t\t\"default\": \"default\",\n\t\t\t\texamples: [\n\t\t\t\t\t\"default\",\n\t\t\t\t\t\"admin\"\n\t\t\t\t],\n\t\t\t\tminLength: 1\n\t\t\t}\n\t\t}\n\t}\n};\nvar entityEnvelopeSchema = {\n\t$schema: $schema$b,\n\t$id: $id$b,\n\tdescription: description$b,\n\texamples: examples$a,\n\ttype: type$3,\n\trequired: required$2,\n\tadditionalProperties: additionalProperties$2,\n\tproperties: properties$2\n};\n\nvar $schema$a = \"http://json-schema.org/draft-07/schema\";\nvar $id$a = \"Entity\";\nvar description$a = \"The parts of the format that's common to all versions/kinds of entity.\";\nvar examples$9 = [\n\t{\n\t\tapiVersion: \"backstage.io/v1alpha1\",\n\t\tkind: \"Component\",\n\t\tmetadata: {\n\t\t\tname: \"LoremService\",\n\t\t\tdescription: \"Creates Lorems like a pro.\",\n\t\t\tlabels: {\n\t\t\t\tproduct_name: \"Random value Generator\"\n\t\t\t},\n\t\t\tannotations: {\n\t\t\t\tdocs: \"https://github.com/..../tree/develop/doc\"\n\t\t\t}\n\t\t},\n\t\tspec: {\n\t\t\ttype: \"service\",\n\t\t\tlifecycle: \"production\",\n\t\t\towner: \"tools\"\n\t\t}\n\t}\n];\nvar type$2 = \"object\";\nvar required$1 = [\n\t\"apiVersion\",\n\t\"kind\",\n\t\"metadata\"\n];\nvar additionalProperties$1 = false;\nvar properties$1 = {\n\tapiVersion: {\n\t\ttype: \"string\",\n\t\tdescription: \"The version of specification format for this particular entity that this is written against.\",\n\t\tminLength: 1,\n\t\texamples: [\n\t\t\t\"backstage.io/v1alpha1\",\n\t\t\t\"my-company.net/v1\",\n\t\t\t\"1.0\"\n\t\t]\n\t},\n\tkind: {\n\t\ttype: \"string\",\n\t\tdescription: \"The high level entity type being described.\",\n\t\tminLength: 1,\n\t\texamples: [\n\t\t\t\"API\",\n\t\t\t\"Component\",\n\t\t\t\"Domain\",\n\t\t\t\"Group\",\n\t\t\t\"Location\",\n\t\t\t\"Resource\",\n\t\t\t\"System\",\n\t\t\t\"Template\",\n\t\t\t\"User\"\n\t\t]\n\t},\n\tmetadata: {\n\t\t$ref: \"EntityMeta\"\n\t},\n\tspec: {\n\t\ttype: \"object\",\n\t\tdescription: \"The specification data describing the entity itself.\"\n\t},\n\trelations: {\n\t\ttype: \"array\",\n\t\tdescription: \"The relations that this entity has with other entities.\",\n\t\titems: {\n\t\t\t$ref: \"common#relation\"\n\t\t}\n\t},\n\tstatus: {\n\t\t$ref: \"common#status\"\n\t}\n};\nvar entitySchema = {\n\t$schema: $schema$a,\n\t$id: $id$a,\n\tdescription: description$a,\n\texamples: examples$9,\n\ttype: type$2,\n\trequired: required$1,\n\tadditionalProperties: additionalProperties$1,\n\tproperties: properties$1\n};\n\nvar $schema$9 = \"http://json-schema.org/draft-07/schema\";\nvar $id$9 = \"EntityMeta\";\nvar description$9 = \"Metadata fields common to all versions/kinds of entity.\";\nvar examples$8 = [\n\t{\n\t\tuid: \"e01199ab-08cc-44c2-8e19-5c29ded82521\",\n\t\tetag: \"lsndfkjsndfkjnsdfkjnsd==\",\n\t\tname: \"my-component-yay\",\n\t\tnamespace: \"the-namespace\",\n\t\tlabels: {\n\t\t\t\"backstage.io/custom\": \"ValueStuff\"\n\t\t},\n\t\tannotations: {\n\t\t\t\"example.com/bindings\": \"are-secret\"\n\t\t},\n\t\ttags: [\n\t\t\t\"java\",\n\t\t\t\"data\"\n\t\t]\n\t}\n];\nvar type$1 = \"object\";\nvar required = [\n\t\"name\"\n];\nvar additionalProperties = true;\nvar properties = {\n\tuid: {\n\t\ttype: \"string\",\n\t\tdescription: \"A globally unique ID for the entity. This field can not be set by the user at creation time, and the server will reject an attempt to do so. The field will be populated in read operations. The field can (optionally) be specified when performing update or delete operations, but the server is free to reject requests that do so in such a way that it breaks semantics.\",\n\t\texamples: [\n\t\t\t\"e01199ab-08cc-44c2-8e19-5c29ded82521\"\n\t\t],\n\t\tminLength: 1\n\t},\n\tetag: {\n\t\ttype: \"string\",\n\t\tdescription: \"An opaque string that changes for each update operation to any part of the entity, including metadata. This field can not be set by the user at creation time, and the server will reject an attempt to do so. The field will be populated in read operations. The field can (optionally) be specified when performing update or delete operations, and the server will then reject the operation if it does not match the current stored value.\",\n\t\texamples: [\n\t\t\t\"lsndfkjsndfkjnsdfkjnsd==\"\n\t\t],\n\t\tminLength: 1\n\t},\n\tname: {\n\t\ttype: \"string\",\n\t\tdescription: \"The name of the entity. Must be unique within the catalog at any given point in time, for any given namespace + kind pair.\",\n\t\texamples: [\n\t\t\t\"metadata-proxy\"\n\t\t],\n\t\tminLength: 1\n\t},\n\tnamespace: {\n\t\ttype: \"string\",\n\t\tdescription: \"The namespace that the entity belongs to.\",\n\t\t\"default\": \"default\",\n\t\texamples: [\n\t\t\t\"default\",\n\t\t\t\"admin\"\n\t\t],\n\t\tminLength: 1\n\t},\n\ttitle: {\n\t\ttype: \"string\",\n\t\tdescription: \"A display name of the entity, to be presented in user interfaces instead of the name property, when available.\",\n\t\texamples: [\n\t\t\t\"React SSR Template\"\n\t\t],\n\t\tminLength: 1\n\t},\n\tdescription: {\n\t\ttype: \"string\",\n\t\tdescription: \"A short (typically relatively few words, on one line) description of the entity.\"\n\t},\n\tlabels: {\n\t\ttype: \"object\",\n\t\tdescription: \"Key/value pairs of identifying information attached to the entity.\",\n\t\tadditionalProperties: true,\n\t\tpatternProperties: {\n\t\t\t\"^.+$\": {\n\t\t\t\ttype: \"string\"\n\t\t\t}\n\t\t}\n\t},\n\tannotations: {\n\t\ttype: \"object\",\n\t\tdescription: \"Key/value pairs of non-identifying auxiliary information attached to the entity.\",\n\t\tadditionalProperties: true,\n\t\tpatternProperties: {\n\t\t\t\"^.+$\": {\n\t\t\t\ttype: \"string\"\n\t\t\t}\n\t\t}\n\t},\n\ttags: {\n\t\ttype: \"array\",\n\t\tdescription: \"A list of single-valued strings, to for example classify catalog entities in various ways.\",\n\t\titems: {\n\t\t\ttype: \"string\",\n\t\t\tminLength: 1\n\t\t}\n\t},\n\tlinks: {\n\t\ttype: \"array\",\n\t\tdescription: \"A list of external hyperlinks related to the entity. Links can provide additional contextual information that may be located outside of Backstage itself. For example, an admin dashboard or external CMS page.\",\n\t\titems: {\n\t\t\ttype: \"object\",\n\t\t\trequired: [\n\t\t\t\t\"url\"\n\t\t\t],\n\t\t\tproperties: {\n\t\t\t\turl: {\n\t\t\t\t\ttype: \"string\",\n\t\t\t\t\tdescription: \"A url in a standard uri format.\",\n\t\t\t\t\texamples: [\n\t\t\t\t\t\t\"https://admin.example-org.com\"\n\t\t\t\t\t],\n\t\t\t\t\tminLength: 1\n\t\t\t\t},\n\t\t\t\ttitle: {\n\t\t\t\t\ttype: \"string\",\n\t\t\t\t\tdescription: \"A user friendly display name for the link.\",\n\t\t\t\t\texamples: [\n\t\t\t\t\t\t\"Admin Dashboard\"\n\t\t\t\t\t],\n\t\t\t\t\tminLength: 1\n\t\t\t\t},\n\t\t\t\ticon: {\n\t\t\t\t\ttype: \"string\",\n\t\t\t\t\tdescription: \"A key representing a visual icon to be displayed in the UI.\",\n\t\t\t\t\texamples: [\n\t\t\t\t\t\t\"dashboard\"\n\t\t\t\t\t],\n\t\t\t\t\tminLength: 1\n\t\t\t\t},\n\t\t\t\ttype: {\n\t\t\t\t\ttype: \"string\",\n\t\t\t\t\tdescription: \"An optional value to categorize links into specific groups.\",\n\t\t\t\t\texamples: [\n\t\t\t\t\t\t\"runbook\",\n\t\t\t\t\t\t\"documentation\",\n\t\t\t\t\t\t\"logs\",\n\t\t\t\t\t\t\"dashboard\"\n\t\t\t\t\t],\n\t\t\t\t\tminLength: 1\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n};\nvar entityMetaSchema = {\n\t$schema: $schema$9,\n\t$id: $id$9,\n\tdescription: description$9,\n\texamples: examples$8,\n\ttype: type$1,\n\trequired: required,\n\tadditionalProperties: additionalProperties,\n\tproperties: properties\n};\n\nvar $schema$8 = \"http://json-schema.org/draft-07/schema\";\nvar $id$8 = \"common\";\nvar type = \"object\";\nvar description$8 = \"Common definitions to import from other schemas\";\nvar definitions = {\n\treference: {\n\t\t$id: \"#reference\",\n\t\ttype: \"object\",\n\t\tdescription: \"A reference by name to another entity.\",\n\t\trequired: [\n\t\t\t\"kind\",\n\t\t\t\"namespace\",\n\t\t\t\"name\"\n\t\t],\n\t\tadditionalProperties: false,\n\t\tproperties: {\n\t\t\tkind: {\n\t\t\t\ttype: \"string\",\n\t\t\t\tdescription: \"The kind field of the entity.\",\n\t\t\t\tminLength: 1\n\t\t\t},\n\t\t\tnamespace: {\n\t\t\t\ttype: \"string\",\n\t\t\t\tdescription: \"The metadata.namespace field of the entity.\",\n\t\t\t\tminLength: 1\n\t\t\t},\n\t\t\tname: {\n\t\t\t\ttype: \"string\",\n\t\t\t\tdescription: \"The metadata.name field of the entity.\",\n\t\t\t\tminLength: 1\n\t\t\t}\n\t\t}\n\t},\n\trelation: {\n\t\t$id: \"#relation\",\n\t\ttype: \"object\",\n\t\tdescription: \"A directed relation from one entity to another.\",\n\t\trequired: [\n\t\t\t\"type\",\n\t\t\t\"target\"\n\t\t],\n\t\tadditionalProperties: false,\n\t\tproperties: {\n\t\t\ttype: {\n\t\t\t\ttype: \"string\",\n\t\t\t\tminLength: 1,\n\t\t\t\tpattern: \"^\\\\w+$\",\n\t\t\t\tdescription: \"The type of relation.\"\n\t\t\t},\n\t\t\ttarget: {\n\t\t\t\t$ref: \"#reference\"\n\t\t\t},\n\t\t\ttargetRef: {\n\t\t\t\ttype: \"string\",\n\t\t\t\tminLength: 1,\n\t\t\t\tdescription: \"The entity ref of the target of this relation.\"\n\t\t\t}\n\t\t}\n\t},\n\tstatus: {\n\t\t$id: \"#status\",\n\t\ttype: \"object\",\n\t\tdescription: \"The current status of the entity, as claimed by various sources.\",\n\t\trequired: [\n\t\t],\n\t\tadditionalProperties: true,\n\t\tproperties: {\n\t\t\titems: {\n\t\t\t\ttype: \"array\",\n\t\t\t\titems: {\n\t\t\t\t\t$ref: \"#statusItem\"\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\tstatusItem: {\n\t\t$id: \"#statusItem\",\n\t\ttype: \"object\",\n\t\tdescription: \"A specific status item on a well known format.\",\n\t\trequired: [\n\t\t\t\"type\",\n\t\t\t\"level\",\n\t\t\t\"message\"\n\t\t],\n\t\tadditionalProperties: true,\n\t\tproperties: {\n\t\t\ttype: {\n\t\t\t\ttype: \"string\",\n\t\t\t\tminLength: 1\n\t\t\t},\n\t\t\tlevel: {\n\t\t\t\t$ref: \"#statusLevel\",\n\t\t\t\tdescription: \"The status level / severity of the status item.\"\n\t\t\t},\n\t\t\tmessage: {\n\t\t\t\ttype: \"string\",\n\t\t\t\tdescription: \"A brief message describing the status, intended for human consumption.\"\n\t\t\t},\n\t\t\terror: {\n\t\t\t\t$ref: \"#error\",\n\t\t\t\tdescription: \"An optional serialized error object related to the status.\"\n\t\t\t}\n\t\t}\n\t},\n\tstatusLevel: {\n\t\t$id: \"#statusLevel\",\n\t\ttype: \"string\",\n\t\tdescription: \"A status level / severity.\",\n\t\t\"enum\": [\n\t\t\t\"info\",\n\t\t\t\"warning\",\n\t\t\t\"error\"\n\t\t]\n\t},\n\terror: {\n\t\t$id: \"#error\",\n\t\ttype: \"object\",\n\t\tdescription: \"A serialized error object.\",\n\t\trequired: [\n\t\t\t\"name\",\n\t\t\t\"message\"\n\t\t],\n\t\tadditionalProperties: true,\n\t\tproperties: {\n\t\t\tname: {\n\t\t\t\ttype: \"string\",\n\t\t\t\texamples: [\n\t\t\t\t\t\"Error\",\n\t\t\t\t\t\"InputError\"\n\t\t\t\t],\n\t\t\t\tdescription: \"The type name of the error\",\n\t\t\t\tminLength: 1\n\t\t\t},\n\t\t\tmessage: {\n\t\t\t\ttype: \"string\",\n\t\t\t\tdescription: \"The message of the error\"\n\t\t\t},\n\t\t\tcode: {\n\t\t\t\ttype: \"string\",\n\t\t\t\tdescription: \"An error code associated with the error\"\n\t\t\t},\n\t\t\tstack: {\n\t\t\t\ttype: \"string\",\n\t\t\t\tdescription: \"An error stack trace\"\n\t\t\t}\n\t\t}\n\t}\n};\nvar commonSchema = {\n\t$schema: $schema$8,\n\t$id: $id$8,\n\ttype: type,\n\tdescription: description$8,\n\tdefinitions: definitions\n};\n\nconst compiledSchemaCache = /* @__PURE__ */ new Map();\nconst refDependencyCandidates = [\n  entityEnvelopeSchema,\n  entitySchema,\n  entityMetaSchema,\n  commonSchema\n];\nfunction throwAjvError(errors) {\n  if (!(errors == null ? void 0 : errors.length)) {\n    throw new TypeError(\"Unknown error\");\n  }\n  const error = errors[0];\n  throw new TypeError(\n    `${error.instancePath || \"<root>\"} ${error.message}${error.params ? ` - ${Object.entries(error.params).map(([key, val]) => `${key}: ${val}`).join(\", \")}` : \"\"}`\n  );\n}\nfunction compileAjvSchema(schema, options = {}) {\n  var _a;\n  const disableCache = (_a = options == null ? void 0 : options.disableCache) != null ? _a : false;\n  const cacheKey = disableCache ? \"\" : JSON.stringify(schema);\n  if (!disableCache) {\n    const cached = compiledSchemaCache.get(cacheKey);\n    if (cached) {\n      return cached;\n    }\n  }\n  const extraSchemas = getExtraSchemas(schema);\n  const ajv = new Ajv({\n    allowUnionTypes: true,\n    allErrors: true,\n    validateSchema: true\n  });\n  if (extraSchemas.length) {\n    ajv.addSchema(extraSchemas, void 0, void 0, true);\n  }\n  const compiled = ajv.compile(schema);\n  if (!disableCache) {\n    compiledSchemaCache.set(cacheKey, compiled);\n  }\n  return compiled;\n}\nfunction getExtraSchemas(schema) {\n  if (typeof schema !== \"object\") {\n    return [];\n  }\n  const seen = /* @__PURE__ */ new Set();\n  if (schema.$id) {\n    seen.add(schema.$id);\n  }\n  const selected = new Array();\n  const todo = [schema];\n  while (todo.length) {\n    const current = todo.pop();\n    for (const ref of getAllRefs(current)) {\n      if (!seen.has(ref)) {\n        seen.add(ref);\n        const match = refDependencyCandidates.find((c) => c.$id === ref);\n        if (match) {\n          selected.push(match);\n          todo.push(match);\n        }\n      }\n    }\n  }\n  return selected;\n}\nfunction* getAllRefs(schema) {\n  const todo = [schema];\n  while (todo.length) {\n    const current = todo.pop();\n    if (typeof current === \"object\" && current) {\n      for (const [key, value] of Object.entries(current)) {\n        if (key === \"$ref\" && typeof value === \"string\") {\n          yield value.split(\"#\")[0];\n        } else {\n          todo.push(value);\n        }\n      }\n    }\n  }\n}\n\nfunction entityEnvelopeSchemaValidator(schema) {\n  const validate = compileAjvSchema(\n    schema ? schema : entityEnvelopeSchema\n  );\n  return (data) => {\n    const result = validate(data);\n    if (result === true) {\n      return data;\n    }\n    throw throwAjvError(validate.errors);\n  };\n}\n\nfunction entityKindSchemaValidator(schema) {\n  const validate = compileAjvSchema(schema);\n  return (data) => {\n    var _a;\n    const result = validate(data);\n    if (result === true) {\n      return data;\n    }\n    const softCandidates = (_a = validate.errors) == null ? void 0 : _a.filter(\n      (e) => [\"/kind\", \"/apiVersion\"].includes(e.instancePath)\n    );\n    if ((softCandidates == null ? void 0 : softCandidates.length) && softCandidates.every((e) => e.keyword === \"enum\")) {\n      return false;\n    }\n    throw throwAjvError(validate.errors);\n  };\n}\n\nfunction entitySchemaValidator(schema) {\n  const validate = compileAjvSchema(schema ? schema : entitySchema);\n  return (data) => {\n    const result = validate(data);\n    if (result === true) {\n      return data;\n    }\n    throw throwAjvError(validate.errors);\n  };\n}\n\nclass KubernetesValidatorFunctions {\n  static isValidApiVersion(value) {\n    return CommonValidatorFunctions.isValidPrefixAndOrSuffix(\n      value,\n      \"/\",\n      CommonValidatorFunctions.isValidDnsSubdomain,\n      (n) => n.length >= 1 && n.length <= 63 && /^[a-z0-9A-Z]+$/.test(n)\n    );\n  }\n  static isValidKind(value) {\n    return typeof value === \"string\" && value.length >= 1 && value.length <= 63 && /^[a-zA-Z][a-z0-9A-Z]*$/.test(value);\n  }\n  static isValidObjectName(value) {\n    return typeof value === \"string\" && value.length >= 1 && value.length <= 63 && /^([A-Za-z0-9][-A-Za-z0-9_.]*)?[A-Za-z0-9]$/.test(value);\n  }\n  static isValidNamespace(value) {\n    return CommonValidatorFunctions.isValidDnsLabel(value);\n  }\n  static isValidLabelKey(value) {\n    return CommonValidatorFunctions.isValidPrefixAndOrSuffix(\n      value,\n      \"/\",\n      CommonValidatorFunctions.isValidDnsSubdomain,\n      KubernetesValidatorFunctions.isValidObjectName\n    );\n  }\n  static isValidLabelValue(value) {\n    return value === \"\" || KubernetesValidatorFunctions.isValidObjectName(value);\n  }\n  static isValidAnnotationKey(value) {\n    return CommonValidatorFunctions.isValidPrefixAndOrSuffix(\n      value,\n      \"/\",\n      CommonValidatorFunctions.isValidDnsSubdomain,\n      KubernetesValidatorFunctions.isValidObjectName\n    );\n  }\n  static isValidAnnotationValue(value) {\n    return typeof value === \"string\";\n  }\n}\n\nconst defaultValidators = {\n  isValidApiVersion: KubernetesValidatorFunctions.isValidApiVersion,\n  isValidKind: KubernetesValidatorFunctions.isValidKind,\n  isValidEntityName: KubernetesValidatorFunctions.isValidObjectName,\n  isValidNamespace: KubernetesValidatorFunctions.isValidNamespace,\n  isValidLabelKey: KubernetesValidatorFunctions.isValidLabelKey,\n  isValidLabelValue: KubernetesValidatorFunctions.isValidLabelValue,\n  isValidAnnotationKey: KubernetesValidatorFunctions.isValidAnnotationKey,\n  isValidAnnotationValue: KubernetesValidatorFunctions.isValidAnnotationValue,\n  isValidTag: (value) => {\n    return typeof value === \"string\" && value.length >= 1 && value.length <= 63 && /^[a-z0-9:+#]+(\\-[a-z0-9:+#]+)*$/.test(value);\n  }\n};\nfunction makeValidator(overrides = {}) {\n  return {\n    ...defaultValidators,\n    ...overrides\n  };\n}\n\nclass FieldFormatEntityPolicy {\n  constructor(validators = makeValidator()) {\n    this.validators = validators;\n  }\n  async enforce(entity) {\n    var _a, _b, _c, _d, _e, _f, _g;\n    function require(field, value, validator) {\n      if (value === void 0 || value === null) {\n        throw new Error(`${field} must have a value`);\n      }\n      let isValid;\n      try {\n        isValid = validator(value);\n      } catch (e) {\n        throw new Error(`${field} could not be validated, ${e}`);\n      }\n      if (!isValid) {\n        let expectation;\n        switch (validator.name) {\n          case \"isValidLabelValue\":\n          case \"isValidObjectName\":\n            expectation = \"a string that is sequences of [a-zA-Z0-9] separated by any of [-_.], at most 63 characters in total\";\n            break;\n          case \"isValidLabelKey\":\n          case \"isValidApiVersion\":\n          case \"isValidAnnotationKey\":\n            expectation = \"a valid prefix and/or suffix\";\n            break;\n          case \"isValidNamespace\":\n          case \"isValidDnsLabel\":\n            expectation = \"a string that is sequences of [a-z0-9] separated by [-], at most 63 characters in total\";\n            break;\n          case \"isValidTag\":\n            expectation = \"a string that is sequences of [a-z0-9+#] separated by [-], at most 63 characters in total\";\n            break;\n          case \"isValidAnnotationValue\":\n            expectation = \"a string\";\n            break;\n          case \"isValidKind\":\n            expectation = \"a string that is a sequence of [a-zA-Z][a-z0-9A-Z], at most 63 characters in total\";\n            break;\n          case \"isValidUrl\":\n            expectation = \"a string that is a valid url\";\n            break;\n          case \"isValidString\":\n          case \"isNonEmptyString\":\n            expectation = \"a non empty string\";\n            break;\n          default:\n            expectation = void 0;\n            break;\n        }\n        const message = expectation ? ` expected ${expectation} but found \"${value}\".` : \"\";\n        throw new Error(\n          `\"${field}\" is not valid;${message} To learn more about catalog file format, visit: https://github.com/backstage/backstage/blob/master/docs/architecture-decisions/adr002-default-catalog-file-format.md`\n        );\n      }\n    }\n    function optional(field, value, validator) {\n      return value === void 0 || require(field, value, validator);\n    }\n    require(\"apiVersion\", entity.apiVersion, this.validators.isValidApiVersion);\n    require(\"kind\", entity.kind, this.validators.isValidKind);\n    require(\"metadata.name\", entity.metadata.name, this.validators.isValidEntityName);\n    optional(\n      \"metadata.namespace\",\n      entity.metadata.namespace,\n      this.validators.isValidNamespace\n    );\n    for (const [k, v] of Object.entries((_a = entity.metadata.labels) != null ? _a : [])) {\n      require(`labels.${k}`, k, this.validators.isValidLabelKey);\n      require(`labels.${k}`, v, this.validators.isValidLabelValue);\n    }\n    for (const [k, v] of Object.entries((_b = entity.metadata.annotations) != null ? _b : [])) {\n      require(`annotations.${k}`, k, this.validators.isValidAnnotationKey);\n      require(`annotations.${k}`, v, this.validators.isValidAnnotationValue);\n    }\n    const tags = (_c = entity.metadata.tags) != null ? _c : [];\n    for (let i = 0; i < tags.length; ++i) {\n      require(`tags.${i}`, tags[i], this.validators.isValidTag);\n    }\n    const links = (_d = entity.metadata.links) != null ? _d : [];\n    for (let i = 0; i < links.length; ++i) {\n      require(`links.${i}.url`, (_e = links[i]) == null ? void 0 : _e.url, CommonValidatorFunctions.isValidUrl);\n      optional(\n        `links.${i}.title`,\n        (_f = links[i]) == null ? void 0 : _f.title,\n        CommonValidatorFunctions.isNonEmptyString\n      );\n      optional(\n        `links.${i}.icon`,\n        (_g = links[i]) == null ? void 0 : _g.icon,\n        KubernetesValidatorFunctions.isValidObjectName\n      );\n    }\n    return entity;\n  }\n}\n\nconst defaultKnownFields = [\"apiVersion\", \"kind\", \"metadata\", \"spec\"];\nclass NoForeignRootFieldsEntityPolicy {\n  constructor(knownFields = defaultKnownFields) {\n    this.knownFields = knownFields;\n  }\n  async enforce(entity) {\n    for (const field of Object.keys(entity)) {\n      if (!this.knownFields.includes(field)) {\n        throw new Error(`Unknown field ${field}`);\n      }\n    }\n    return entity;\n  }\n}\n\nclass SchemaValidEntityPolicy {\n  async enforce(entity) {\n    if (!this.validate) {\n      const ajv = new Ajv({ allowUnionTypes: true });\n      this.validate = ajv.addSchema([commonSchema, entityMetaSchema], void 0, void 0, true).compile(entitySchema);\n    }\n    const result = this.validate(entity);\n    if (result === true) {\n      return entity;\n    }\n    const [error] = this.validate.errors || [];\n    if (!error) {\n      throw new Error(`Malformed envelope, Unknown error`);\n    }\n    throw new Error(\n      `Malformed envelope, ${error.instancePath || \"<root>\"} ${error.message}`\n    );\n  }\n}\n\nclass AllEntityPolicies {\n  constructor(policies) {\n    this.policies = policies;\n  }\n  async enforce(entity) {\n    let result = entity;\n    for (const policy of this.policies) {\n      const output = await policy.enforce(result);\n      if (!output) {\n        throw new Error(\n          `Policy ${policy.constructor.name} did not return a result`\n        );\n      }\n      result = output;\n    }\n    return result;\n  }\n}\nclass AnyEntityPolicy {\n  constructor(policies) {\n    this.policies = policies;\n  }\n  async enforce(entity) {\n    for (const policy of this.policies) {\n      const output = await policy.enforce(entity);\n      if (output) {\n        return output;\n      }\n    }\n    throw new Error(`The entity did not match any known policy`);\n  }\n}\nconst EntityPolicies = {\n  allOf(policies) {\n    return new AllEntityPolicies(policies);\n  },\n  oneOf(policies) {\n    return new AnyEntityPolicy(policies);\n  }\n};\n\nvar $schema$7 = \"http://json-schema.org/draft-07/schema\";\nvar $id$7 = \"ApiV1alpha1\";\nvar description$7 = \"An API describes an interface that can be exposed by a component. The API can be defined in different formats, like OpenAPI, AsyncAPI, GraphQL, gRPC, or other formats.\";\nvar examples$7 = [\n\t{\n\t\tapiVersion: \"backstage.io/v1alpha1\",\n\t\tkind: \"API\",\n\t\tmetadata: {\n\t\t\tname: \"artist-api\",\n\t\t\tdescription: \"Retrieve artist details\",\n\t\t\tlabels: {\n\t\t\t\tproduct_name: \"Random value Generator\"\n\t\t\t},\n\t\t\tannotations: {\n\t\t\t\tdocs: \"https://github.com/..../tree/develop/doc\"\n\t\t\t}\n\t\t},\n\t\tspec: {\n\t\t\ttype: \"openapi\",\n\t\t\tlifecycle: \"production\",\n\t\t\towner: \"artist-relations-team\",\n\t\t\tsystem: \"artist-engagement-portal\",\n\t\t\tdefinition: \"openapi: \\\"3.0.0\\\"\\ninfo:...\"\n\t\t}\n\t}\n];\nvar allOf$7 = [\n\t{\n\t\t$ref: \"Entity\"\n\t},\n\t{\n\t\ttype: \"object\",\n\t\trequired: [\n\t\t\t\"spec\"\n\t\t],\n\t\tproperties: {\n\t\t\tapiVersion: {\n\t\t\t\t\"enum\": [\n\t\t\t\t\t\"backstage.io/v1alpha1\",\n\t\t\t\t\t\"backstage.io/v1beta1\"\n\t\t\t\t]\n\t\t\t},\n\t\t\tkind: {\n\t\t\t\t\"enum\": [\n\t\t\t\t\t\"API\"\n\t\t\t\t]\n\t\t\t},\n\t\t\tspec: {\n\t\t\t\ttype: \"object\",\n\t\t\t\trequired: [\n\t\t\t\t\t\"type\",\n\t\t\t\t\t\"lifecycle\",\n\t\t\t\t\t\"owner\",\n\t\t\t\t\t\"definition\"\n\t\t\t\t],\n\t\t\t\tproperties: {\n\t\t\t\t\ttype: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tdescription: \"The type of the API definition.\",\n\t\t\t\t\t\texamples: [\n\t\t\t\t\t\t\t\"openapi\",\n\t\t\t\t\t\t\t\"asyncapi\",\n\t\t\t\t\t\t\t\"graphql\",\n\t\t\t\t\t\t\t\"grpc\"\n\t\t\t\t\t\t],\n\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t},\n\t\t\t\t\tlifecycle: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tdescription: \"The lifecycle state of the API.\",\n\t\t\t\t\t\texamples: [\n\t\t\t\t\t\t\t\"experimental\",\n\t\t\t\t\t\t\t\"production\",\n\t\t\t\t\t\t\t\"deprecated\"\n\t\t\t\t\t\t],\n\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t},\n\t\t\t\t\towner: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tdescription: \"An entity reference to the owner of the API.\",\n\t\t\t\t\t\texamples: [\n\t\t\t\t\t\t\t\"artist-relations-team\",\n\t\t\t\t\t\t\t\"user:john.johnson\"\n\t\t\t\t\t\t],\n\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t},\n\t\t\t\t\tsystem: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tdescription: \"An entity reference to the system that the API belongs to.\",\n\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t},\n\t\t\t\t\tdefinition: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tdescription: \"The definition of the API, based on the format defined by the type.\",\n\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n];\nvar schema$7 = {\n\t$schema: $schema$7,\n\t$id: $id$7,\n\tdescription: description$7,\n\texamples: examples$7,\n\tallOf: allOf$7\n};\n\nfunction ajvCompiledJsonSchemaValidator(schema) {\n  let validator;\n  return {\n    async check(data) {\n      if (!validator) {\n        validator = entityKindSchemaValidator(schema);\n      }\n      return validator(data) === data;\n    }\n  };\n}\n\nconst apiEntityV1alpha1Validator = ajvCompiledJsonSchemaValidator(schema$7);\n\nvar $schema$6 = \"http://json-schema.org/draft-07/schema\";\nvar $id$6 = \"ComponentV1alpha1\";\nvar description$6 = \"A Component describes a software component. It is typically intimately linked to the source code that constitutes the component, and should be what a developer may regard a \\\"unit of software\\\", usually with a distinct deployable or linkable artifact.\";\nvar examples$6 = [\n\t{\n\t\tapiVersion: \"backstage.io/v1alpha1\",\n\t\tkind: \"Component\",\n\t\tmetadata: {\n\t\t\tname: \"LoremService\",\n\t\t\tdescription: \"Creates Lorems like a pro.\",\n\t\t\tlabels: {\n\t\t\t\tproduct_name: \"Random value Generator\"\n\t\t\t},\n\t\t\tannotations: {\n\t\t\t\tdocs: \"https://github.com/..../tree/develop/doc\"\n\t\t\t}\n\t\t},\n\t\tspec: {\n\t\t\ttype: \"service\",\n\t\t\tlifecycle: \"production\",\n\t\t\towner: \"tools\"\n\t\t}\n\t}\n];\nvar allOf$6 = [\n\t{\n\t\t$ref: \"Entity\"\n\t},\n\t{\n\t\ttype: \"object\",\n\t\trequired: [\n\t\t\t\"spec\"\n\t\t],\n\t\tproperties: {\n\t\t\tapiVersion: {\n\t\t\t\t\"enum\": [\n\t\t\t\t\t\"backstage.io/v1alpha1\",\n\t\t\t\t\t\"backstage.io/v1beta1\"\n\t\t\t\t]\n\t\t\t},\n\t\t\tkind: {\n\t\t\t\t\"enum\": [\n\t\t\t\t\t\"Component\"\n\t\t\t\t]\n\t\t\t},\n\t\t\tspec: {\n\t\t\t\ttype: \"object\",\n\t\t\t\trequired: [\n\t\t\t\t\t\"type\",\n\t\t\t\t\t\"lifecycle\",\n\t\t\t\t\t\"owner\"\n\t\t\t\t],\n\t\t\t\tproperties: {\n\t\t\t\t\ttype: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tdescription: \"The type of component.\",\n\t\t\t\t\t\texamples: [\n\t\t\t\t\t\t\t\"service\",\n\t\t\t\t\t\t\t\"website\",\n\t\t\t\t\t\t\t\"library\"\n\t\t\t\t\t\t],\n\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t},\n\t\t\t\t\tlifecycle: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tdescription: \"The lifecycle state of the component.\",\n\t\t\t\t\t\texamples: [\n\t\t\t\t\t\t\t\"experimental\",\n\t\t\t\t\t\t\t\"production\",\n\t\t\t\t\t\t\t\"deprecated\"\n\t\t\t\t\t\t],\n\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t},\n\t\t\t\t\towner: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tdescription: \"An entity reference to the owner of the component.\",\n\t\t\t\t\t\texamples: [\n\t\t\t\t\t\t\t\"artist-relations-team\",\n\t\t\t\t\t\t\t\"user:john.johnson\"\n\t\t\t\t\t\t],\n\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t},\n\t\t\t\t\tsystem: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tdescription: \"An entity reference to the system that the component belongs to.\",\n\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t},\n\t\t\t\t\tsubcomponentOf: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tdescription: \"An entity reference to another component of which the component is a part.\",\n\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t},\n\t\t\t\t\tprovidesApis: {\n\t\t\t\t\t\ttype: \"array\",\n\t\t\t\t\t\tdescription: \"An array of entity references to the APIs that are provided by the component.\",\n\t\t\t\t\t\titems: {\n\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tconsumesApis: {\n\t\t\t\t\t\ttype: \"array\",\n\t\t\t\t\t\tdescription: \"An array of entity references to the APIs that are consumed by the component.\",\n\t\t\t\t\t\titems: {\n\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tdependsOn: {\n\t\t\t\t\t\ttype: \"array\",\n\t\t\t\t\t\tdescription: \"An array of references to other entities that the component depends on to function.\",\n\t\t\t\t\t\titems: {\n\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n];\nvar schema$6 = {\n\t$schema: $schema$6,\n\t$id: $id$6,\n\tdescription: description$6,\n\texamples: examples$6,\n\tallOf: allOf$6\n};\n\nconst componentEntityV1alpha1Validator = ajvCompiledJsonSchemaValidator(schema$6);\n\nvar $schema$5 = \"http://json-schema.org/draft-07/schema\";\nvar $id$5 = \"DomainV1alpha1\";\nvar description$5 = \"A Domain groups a collection of systems that share terminology, domain models, business purpose, or documentation, i.e. form a bounded context.\";\nvar examples$5 = [\n\t{\n\t\tapiVersion: \"backstage.io/v1alpha1\",\n\t\tkind: \"Domain\",\n\t\tmetadata: {\n\t\t\tname: \"artists\",\n\t\t\tdescription: \"Everything about artists\"\n\t\t},\n\t\tspec: {\n\t\t\towner: \"artist-relations-team\"\n\t\t}\n\t}\n];\nvar allOf$5 = [\n\t{\n\t\t$ref: \"Entity\"\n\t},\n\t{\n\t\ttype: \"object\",\n\t\trequired: [\n\t\t\t\"spec\"\n\t\t],\n\t\tproperties: {\n\t\t\tapiVersion: {\n\t\t\t\t\"enum\": [\n\t\t\t\t\t\"backstage.io/v1alpha1\",\n\t\t\t\t\t\"backstage.io/v1beta1\"\n\t\t\t\t]\n\t\t\t},\n\t\t\tkind: {\n\t\t\t\t\"enum\": [\n\t\t\t\t\t\"Domain\"\n\t\t\t\t]\n\t\t\t},\n\t\t\tspec: {\n\t\t\t\ttype: \"object\",\n\t\t\t\trequired: [\n\t\t\t\t\t\"owner\"\n\t\t\t\t],\n\t\t\t\tproperties: {\n\t\t\t\t\towner: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tdescription: \"An entity reference to the owner of the component.\",\n\t\t\t\t\t\texamples: [\n\t\t\t\t\t\t\t\"artist-relations-team\",\n\t\t\t\t\t\t\t\"user:john.johnson\"\n\t\t\t\t\t\t],\n\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n];\nvar schema$5 = {\n\t$schema: $schema$5,\n\t$id: $id$5,\n\tdescription: description$5,\n\texamples: examples$5,\n\tallOf: allOf$5\n};\n\nconst domainEntityV1alpha1Validator = ajvCompiledJsonSchemaValidator(schema$5);\n\nvar $schema$4 = \"http://json-schema.org/draft-07/schema\";\nvar $id$4 = \"GroupV1alpha1\";\nvar description$4 = \"A group describes an organizational entity, such as for example a team, a business unit, or a loose collection of people in an interest group. Members of these groups are modeled in the catalog as kind User.\";\nvar examples$4 = [\n\t{\n\t\tapiVersion: \"backstage.io/v1alpha1\",\n\t\tkind: \"Group\",\n\t\tmetadata: {\n\t\t\tname: \"infrastructure\",\n\t\t\tdescription: \"The infra business unit\"\n\t\t},\n\t\tspec: {\n\t\t\ttype: \"business-unit\",\n\t\t\tprofile: {\n\t\t\t\tdisplayName: \"Infrastructure\",\n\t\t\t\temail: \"infrastructure@example.com\",\n\t\t\t\tpicture: \"https://example.com/groups/bu-infrastructure.jpeg\"\n\t\t\t},\n\t\t\tparent: \"ops\",\n\t\t\tchildren: [\n\t\t\t\t\"backstage\",\n\t\t\t\t\"other\"\n\t\t\t]\n\t\t}\n\t}\n];\nvar allOf$4 = [\n\t{\n\t\t$ref: \"Entity\"\n\t},\n\t{\n\t\ttype: \"object\",\n\t\trequired: [\n\t\t\t\"spec\"\n\t\t],\n\t\tproperties: {\n\t\t\tapiVersion: {\n\t\t\t\t\"enum\": [\n\t\t\t\t\t\"backstage.io/v1alpha1\",\n\t\t\t\t\t\"backstage.io/v1beta1\"\n\t\t\t\t]\n\t\t\t},\n\t\t\tkind: {\n\t\t\t\t\"enum\": [\n\t\t\t\t\t\"Group\"\n\t\t\t\t]\n\t\t\t},\n\t\t\tspec: {\n\t\t\t\ttype: \"object\",\n\t\t\t\trequired: [\n\t\t\t\t\t\"type\",\n\t\t\t\t\t\"children\"\n\t\t\t\t],\n\t\t\t\tproperties: {\n\t\t\t\t\ttype: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tdescription: \"The type of group. There is currently no enforced set of values for this field, so it is left up to the adopting organization to choose a nomenclature that matches their org hierarchy.\",\n\t\t\t\t\t\texamples: [\n\t\t\t\t\t\t\t\"team\",\n\t\t\t\t\t\t\t\"business-unit\",\n\t\t\t\t\t\t\t\"product-area\",\n\t\t\t\t\t\t\t\"root\"\n\t\t\t\t\t\t],\n\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t},\n\t\t\t\t\tprofile: {\n\t\t\t\t\t\ttype: \"object\",\n\t\t\t\t\t\tdescription: \"Optional profile information about the group, mainly for display purposes. All fields of this structure are also optional. The email would be a group email of some form, that the group may wish to be used for contacting them. The picture is expected to be a URL pointing to an image that's representative of the group, and that a browser could fetch and render on a group page or similar.\",\n\t\t\t\t\t\tproperties: {\n\t\t\t\t\t\t\tdisplayName: {\n\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\tdescription: \"A simple display name to present to users.\",\n\t\t\t\t\t\t\t\texamples: [\n\t\t\t\t\t\t\t\t\t\"Infrastructure\"\n\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\temail: {\n\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\tdescription: \"An email where this entity can be reached.\",\n\t\t\t\t\t\t\t\texamples: [\n\t\t\t\t\t\t\t\t\t\"infrastructure@example.com\"\n\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tpicture: {\n\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\tdescription: \"The URL of an image that represents this entity.\",\n\t\t\t\t\t\t\t\texamples: [\n\t\t\t\t\t\t\t\t\t\"https://example.com/groups/bu-infrastructure.jpeg\"\n\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tparent: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tdescription: \"The immediate parent group in the hierarchy, if any. Not all groups must have a parent; the catalog supports multi-root hierarchies. Groups may however not have more than one parent. This field is an entity reference.\",\n\t\t\t\t\t\texamples: [\n\t\t\t\t\t\t\t\"ops\"\n\t\t\t\t\t\t],\n\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t},\n\t\t\t\t\tchildren: {\n\t\t\t\t\t\ttype: \"array\",\n\t\t\t\t\t\tdescription: \"The immediate child groups of this group in the hierarchy (whose parent field points to this group). The list must be present, but may be empty if there are no child groups. The items are not guaranteed to be ordered in any particular way. The entries of this array are entity references.\",\n\t\t\t\t\t\titems: {\n\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\texamples: [\n\t\t\t\t\t\t\t\t\"backstage\",\n\t\t\t\t\t\t\t\t\"other\"\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tmembers: {\n\t\t\t\t\t\ttype: \"array\",\n\t\t\t\t\t\tdescription: \"The users that are members of this group. The entries of this array are entity references.\",\n\t\t\t\t\t\titems: {\n\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\texamples: [\n\t\t\t\t\t\t\t\t\"jdoe\"\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n];\nvar schema$4 = {\n\t$schema: $schema$4,\n\t$id: $id$4,\n\tdescription: description$4,\n\texamples: examples$4,\n\tallOf: allOf$4\n};\n\nconst groupEntityV1alpha1Validator = ajvCompiledJsonSchemaValidator(schema$4);\n\nvar $schema$3 = \"http://json-schema.org/draft-07/schema\";\nvar $id$3 = \"LocationV1alpha1\";\nvar description$3 = \"A location is a marker that references other places to look for catalog data.\";\nvar examples$3 = [\n\t{\n\t\tapiVersion: \"backstage.io/v1alpha1\",\n\t\tkind: \"Location\",\n\t\tmetadata: {\n\t\t\tname: \"org-data\"\n\t\t},\n\t\tspec: {\n\t\t\ttype: \"url\",\n\t\t\ttargets: [\n\t\t\t\t\"http://github.com/myorg/myproject/org-data-dump/catalog-info-staff.yaml\",\n\t\t\t\t\"http://github.com/myorg/myproject/org-data-dump/catalog-info-consultants.yaml\"\n\t\t\t]\n\t\t}\n\t}\n];\nvar allOf$3 = [\n\t{\n\t\t$ref: \"Entity\"\n\t},\n\t{\n\t\ttype: \"object\",\n\t\trequired: [\n\t\t\t\"spec\"\n\t\t],\n\t\tproperties: {\n\t\t\tapiVersion: {\n\t\t\t\t\"enum\": [\n\t\t\t\t\t\"backstage.io/v1alpha1\",\n\t\t\t\t\t\"backstage.io/v1beta1\"\n\t\t\t\t]\n\t\t\t},\n\t\t\tkind: {\n\t\t\t\t\"enum\": [\n\t\t\t\t\t\"Location\"\n\t\t\t\t]\n\t\t\t},\n\t\t\tspec: {\n\t\t\t\ttype: \"object\",\n\t\t\t\trequired: [\n\t\t\t\t],\n\t\t\t\tproperties: {\n\t\t\t\t\ttype: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tdescription: \"The single location type, that's common to the targets specified in the spec. If it is left out, it is inherited from the location type that originally read the entity data.\",\n\t\t\t\t\t\texamples: [\n\t\t\t\t\t\t\t\"url\"\n\t\t\t\t\t\t],\n\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t},\n\t\t\t\t\ttarget: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tdescription: \"A single target as a string. Can be either an absolute path/URL (depending on the type), or a relative path such as ./details/catalog-info.yaml which is resolved relative to the location of this Location entity itself.\",\n\t\t\t\t\t\texamples: [\n\t\t\t\t\t\t\t\"./details/catalog-info.yaml\"\n\t\t\t\t\t\t],\n\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t},\n\t\t\t\t\ttargets: {\n\t\t\t\t\t\ttype: \"array\",\n\t\t\t\t\t\tdescription: \"A list of targets as strings. They can all be either absolute paths/URLs (depending on the type), or relative paths such as ./details/catalog-info.yaml which are resolved relative to the location of this Location entity itself.\",\n\t\t\t\t\t\titems: {\n\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\texamples: [\n\t\t\t\t\t\t\t\t\"./details/catalog-info.yaml\",\n\t\t\t\t\t\t\t\t\"http://github.com/myorg/myproject/org-data-dump/catalog-info-staff.yaml\"\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tpresence: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tdescription: \"Whether the presence of the location target is required and it should be considered an error if it can not be found\",\n\t\t\t\t\t\t\"default\": \"required\",\n\t\t\t\t\t\texamples: [\n\t\t\t\t\t\t\t\"required\"\n\t\t\t\t\t\t],\n\t\t\t\t\t\t\"enum\": [\n\t\t\t\t\t\t\t\"required\",\n\t\t\t\t\t\t\t\"optional\"\n\t\t\t\t\t\t]\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n];\nvar schema$3 = {\n\t$schema: $schema$3,\n\t$id: $id$3,\n\tdescription: description$3,\n\texamples: examples$3,\n\tallOf: allOf$3\n};\n\nconst locationEntityV1alpha1Validator = ajvCompiledJsonSchemaValidator(schema$3);\n\nconst RELATION_OWNED_BY = \"ownedBy\";\nconst RELATION_OWNER_OF = \"ownerOf\";\nconst RELATION_CONSUMES_API = \"consumesApi\";\nconst RELATION_API_CONSUMED_BY = \"apiConsumedBy\";\nconst RELATION_PROVIDES_API = \"providesApi\";\nconst RELATION_API_PROVIDED_BY = \"apiProvidedBy\";\nconst RELATION_DEPENDS_ON = \"dependsOn\";\nconst RELATION_DEPENDENCY_OF = \"dependencyOf\";\nconst RELATION_PARENT_OF = \"parentOf\";\nconst RELATION_CHILD_OF = \"childOf\";\nconst RELATION_MEMBER_OF = \"memberOf\";\nconst RELATION_HAS_MEMBER = \"hasMember\";\nconst RELATION_PART_OF = \"partOf\";\nconst RELATION_HAS_PART = \"hasPart\";\n\nvar $schema$2 = \"http://json-schema.org/draft-07/schema\";\nvar $id$2 = \"ResourceV1alpha1\";\nvar description$2 = \"A resource describes the infrastructure a system needs to operate, like BigTable databases, Pub/Sub topics, S3 buckets or CDNs. Modelling them together with components and systems allows to visualize resource footprint, and create tooling around them.\";\nvar examples$2 = [\n\t{\n\t\tapiVersion: \"backstage.io/v1alpha1\",\n\t\tkind: \"Resource\",\n\t\tmetadata: {\n\t\t\tname: \"artists-db\",\n\t\t\tdescription: \"Stores artist details\"\n\t\t},\n\t\tspec: {\n\t\t\ttype: \"database\",\n\t\t\towner: \"artist-relations-team\",\n\t\t\tsystem: \"artist-engagement-portal\"\n\t\t}\n\t}\n];\nvar allOf$2 = [\n\t{\n\t\t$ref: \"Entity\"\n\t},\n\t{\n\t\ttype: \"object\",\n\t\trequired: [\n\t\t\t\"spec\"\n\t\t],\n\t\tproperties: {\n\t\t\tapiVersion: {\n\t\t\t\t\"enum\": [\n\t\t\t\t\t\"backstage.io/v1alpha1\",\n\t\t\t\t\t\"backstage.io/v1beta1\"\n\t\t\t\t]\n\t\t\t},\n\t\t\tkind: {\n\t\t\t\t\"enum\": [\n\t\t\t\t\t\"Resource\"\n\t\t\t\t]\n\t\t\t},\n\t\t\tspec: {\n\t\t\t\ttype: \"object\",\n\t\t\t\trequired: [\n\t\t\t\t\t\"type\",\n\t\t\t\t\t\"owner\"\n\t\t\t\t],\n\t\t\t\tproperties: {\n\t\t\t\t\ttype: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tdescription: \"The type of resource.\",\n\t\t\t\t\t\texamples: [\n\t\t\t\t\t\t\t\"database\",\n\t\t\t\t\t\t\t\"s3-bucket\",\n\t\t\t\t\t\t\t\"cluster\"\n\t\t\t\t\t\t],\n\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t},\n\t\t\t\t\towner: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tdescription: \"An entity reference to the owner of the resource.\",\n\t\t\t\t\t\texamples: [\n\t\t\t\t\t\t\t\"artist-relations-team\",\n\t\t\t\t\t\t\t\"user:john.johnson\"\n\t\t\t\t\t\t],\n\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t},\n\t\t\t\t\tdependsOn: {\n\t\t\t\t\t\ttype: \"array\",\n\t\t\t\t\t\tdescription: \"An array of references to other entities that the resource depends on to function.\",\n\t\t\t\t\t\titems: {\n\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tsystem: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tdescription: \"An entity reference to the system that the resource belongs to.\",\n\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n];\nvar schema$2 = {\n\t$schema: $schema$2,\n\t$id: $id$2,\n\tdescription: description$2,\n\texamples: examples$2,\n\tallOf: allOf$2\n};\n\nconst resourceEntityV1alpha1Validator = ajvCompiledJsonSchemaValidator(schema$2);\n\nvar $schema$1 = \"http://json-schema.org/draft-07/schema\";\nvar $id$1 = \"SystemV1alpha1\";\nvar description$1 = \"A system is a collection of resources and components. The system may expose or consume one or several APIs. It is viewed as abstraction level that provides potential consumers insights into exposed features without needing a too detailed view into the details of all components. This also gives the owning team the possibility to decide about published artifacts and APIs.\";\nvar examples$1 = [\n\t{\n\t\tapiVersion: \"backstage.io/v1alpha1\",\n\t\tkind: \"System\",\n\t\tmetadata: {\n\t\t\tname: \"artist-engagement-portal\",\n\t\t\tdescription: \"Handy tools to keep artists in the loop\"\n\t\t},\n\t\tspec: {\n\t\t\towner: \"artist-relations-team\",\n\t\t\tdomain: \"artists\"\n\t\t}\n\t}\n];\nvar allOf$1 = [\n\t{\n\t\t$ref: \"Entity\"\n\t},\n\t{\n\t\ttype: \"object\",\n\t\trequired: [\n\t\t\t\"spec\"\n\t\t],\n\t\tproperties: {\n\t\t\tapiVersion: {\n\t\t\t\t\"enum\": [\n\t\t\t\t\t\"backstage.io/v1alpha1\",\n\t\t\t\t\t\"backstage.io/v1beta1\"\n\t\t\t\t]\n\t\t\t},\n\t\t\tkind: {\n\t\t\t\t\"enum\": [\n\t\t\t\t\t\"System\"\n\t\t\t\t]\n\t\t\t},\n\t\t\tspec: {\n\t\t\t\ttype: \"object\",\n\t\t\t\trequired: [\n\t\t\t\t\t\"owner\"\n\t\t\t\t],\n\t\t\t\tproperties: {\n\t\t\t\t\towner: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tdescription: \"An entity reference to the owner of the component.\",\n\t\t\t\t\t\texamples: [\n\t\t\t\t\t\t\t\"artist-relations-team\",\n\t\t\t\t\t\t\t\"user:john.johnson\"\n\t\t\t\t\t\t],\n\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t},\n\t\t\t\t\tdomain: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tdescription: \"An entity reference to the domain that the system belongs to.\",\n\t\t\t\t\t\texamples: [\n\t\t\t\t\t\t\t\"artists\"\n\t\t\t\t\t\t],\n\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n];\nvar schema$1 = {\n\t$schema: $schema$1,\n\t$id: $id$1,\n\tdescription: description$1,\n\texamples: examples$1,\n\tallOf: allOf$1\n};\n\nconst systemEntityV1alpha1Validator = ajvCompiledJsonSchemaValidator(schema$1);\n\nvar $schema = \"http://json-schema.org/draft-07/schema\";\nvar $id = \"UserV1alpha1\";\nvar description = \"A user describes a person, such as an employee, a contractor, or similar. Users belong to Group entities in the catalog. These catalog user entries are connected to the way that authentication within the Backstage ecosystem works. See the auth section of the docs for a discussion of these concepts.\";\nvar examples = [\n\t{\n\t\tapiVersion: \"backstage.io/v1alpha1\",\n\t\tkind: \"User\",\n\t\tmetadata: {\n\t\t\tname: \"jdoe\"\n\t\t},\n\t\tspec: {\n\t\t\tprofile: {\n\t\t\t\tdisplayName: \"Jenny Doe\",\n\t\t\t\temail: \"jenny-doe@example.com\",\n\t\t\t\tpicture: \"https://example.com/staff/jenny-with-party-hat.jpeg\"\n\t\t\t},\n\t\t\tmemberOf: [\n\t\t\t\t\"team-b\",\n\t\t\t\t\"employees\"\n\t\t\t]\n\t\t}\n\t}\n];\nvar allOf = [\n\t{\n\t\t$ref: \"Entity\"\n\t},\n\t{\n\t\ttype: \"object\",\n\t\trequired: [\n\t\t\t\"spec\"\n\t\t],\n\t\tproperties: {\n\t\t\tapiVersion: {\n\t\t\t\t\"enum\": [\n\t\t\t\t\t\"backstage.io/v1alpha1\",\n\t\t\t\t\t\"backstage.io/v1beta1\"\n\t\t\t\t]\n\t\t\t},\n\t\t\tkind: {\n\t\t\t\t\"enum\": [\n\t\t\t\t\t\"User\"\n\t\t\t\t]\n\t\t\t},\n\t\t\tspec: {\n\t\t\t\ttype: \"object\",\n\t\t\t\trequired: [\n\t\t\t\t\t\"memberOf\"\n\t\t\t\t],\n\t\t\t\tproperties: {\n\t\t\t\t\tprofile: {\n\t\t\t\t\t\ttype: \"object\",\n\t\t\t\t\t\tdescription: \"Optional profile information about the user, mainly for display purposes. All fields of this structure are also optional. The email would be a primary email of some form, that the user may wish to be used for contacting them. The picture is expected to be a URL pointing to an image that's representative of the user, and that a browser could fetch and render on a profile page or similar.\",\n\t\t\t\t\t\tproperties: {\n\t\t\t\t\t\t\tdisplayName: {\n\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\tdescription: \"A simple display name to present to users.\",\n\t\t\t\t\t\t\t\texamples: [\n\t\t\t\t\t\t\t\t\t\"Jenny Doe\"\n\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\temail: {\n\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\tdescription: \"An email where this user can be reached.\",\n\t\t\t\t\t\t\t\texamples: [\n\t\t\t\t\t\t\t\t\t\"jenny-doe@example.com\"\n\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tpicture: {\n\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\tdescription: \"The URL of an image that represents this user.\",\n\t\t\t\t\t\t\t\texamples: [\n\t\t\t\t\t\t\t\t\t\"https://example.com/staff/jenny-with-party-hat.jpeg\"\n\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tmemberOf: {\n\t\t\t\t\t\ttype: \"array\",\n\t\t\t\t\t\tdescription: \"The list of groups that the user is a direct member of (i.e., no transitive memberships are listed here). The list must be present, but may be empty if the user is not member of any groups. The items are not guaranteed to be ordered in any particular way. The entries of this array are entity references.\",\n\t\t\t\t\t\titems: {\n\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\texamples: [\n\t\t\t\t\t\t\t\t\"team-b\",\n\t\t\t\t\t\t\t\t\"employees\"\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n];\nvar schema = {\n\t$schema: $schema,\n\t$id: $id,\n\tdescription: description,\n\texamples: examples,\n\tallOf: allOf\n};\n\nconst userEntityV1alpha1Validator = ajvCompiledJsonSchemaValidator(schema);\n\nconst ANNOTATION_LOCATION = \"backstage.io/managed-by-location\";\nconst ANNOTATION_ORIGIN_LOCATION = \"backstage.io/managed-by-origin-location\";\nconst ANNOTATION_SOURCE_LOCATION = \"backstage.io/source-location\";\n\nfunction parseLocationRef(ref) {\n  if (typeof ref !== \"string\") {\n    throw new TypeError(\n      `Unable to parse location ref '${ref}', unexpected argument ${typeof ref}`\n    );\n  }\n  const splitIndex = ref.indexOf(\":\");\n  if (splitIndex < 0) {\n    throw new TypeError(\n      `Unable to parse location ref '${ref}', expected '<type>:<target>', e.g. 'url:https://host/path'`\n    );\n  }\n  const type = ref.substring(0, splitIndex).trim();\n  const target = ref.substring(splitIndex + 1).trim();\n  if (!type || !target) {\n    throw new TypeError(\n      `Unable to parse location ref '${ref}', expected '<type>:<target>', e.g. 'url:https://host/path'`\n    );\n  }\n  if (type === \"http\" || type === \"https\") {\n    throw new TypeError(\n      `Invalid location ref '${ref}', please prefix it with 'url:', e.g. 'url:${ref}'`\n    );\n  }\n  return { type, target };\n}\nfunction stringifyLocationRef(ref) {\n  const { type, target } = ref;\n  if (!type) {\n    throw new TypeError(`Unable to stringify location ref, empty type`);\n  } else if (!target) {\n    throw new TypeError(`Unable to stringify location ref, empty target`);\n  }\n  return `${type}:${target}`;\n}\nfunction getEntitySourceLocation(entity) {\n  var _a, _b, _c, _d, _e;\n  const locationRef = (_e = (_b = (_a = entity.metadata) == null ? void 0 : _a.annotations) == null ? void 0 : _b[ANNOTATION_SOURCE_LOCATION]) != null ? _e : (_d = (_c = entity.metadata) == null ? void 0 : _c.annotations) == null ? void 0 : _d[ANNOTATION_LOCATION];\n  if (!locationRef) {\n    throw new Error(\n      `Entity '${stringifyEntityRef(entity)}' is missing location`\n    );\n  }\n  return parseLocationRef(locationRef);\n}\n\nexport { ANNOTATION_EDIT_URL, ANNOTATION_KUBERNETES_API_SERVER, ANNOTATION_KUBERNETES_API_SERVER_CA, ANNOTATION_KUBERNETES_AUTH_PROVIDER, ANNOTATION_LOCATION, ANNOTATION_ORIGIN_LOCATION, ANNOTATION_SOURCE_LOCATION, ANNOTATION_VIEW_URL, CommonValidatorFunctions, DEFAULT_NAMESPACE, DefaultNamespaceEntityPolicy, EntityPolicies, FieldFormatEntityPolicy, GroupDefaultParentEntityPolicy, KubernetesValidatorFunctions, NoForeignRootFieldsEntityPolicy, RELATION_API_CONSUMED_BY, RELATION_API_PROVIDED_BY, RELATION_CHILD_OF, RELATION_CONSUMES_API, RELATION_DEPENDENCY_OF, RELATION_DEPENDS_ON, RELATION_HAS_MEMBER, RELATION_HAS_PART, RELATION_MEMBER_OF, RELATION_OWNED_BY, RELATION_OWNER_OF, RELATION_PARENT_OF, RELATION_PART_OF, RELATION_PROVIDES_API, SchemaValidEntityPolicy, apiEntityV1alpha1Validator, componentEntityV1alpha1Validator, domainEntityV1alpha1Validator, entityEnvelopeSchemaValidator, entityKindSchemaValidator, entitySchemaValidator, getCompoundEntityRef, getEntitySourceLocation, groupEntityV1alpha1Validator, isApiEntity, isComponentEntity, isDomainEntity, isGroupEntity, isLocationEntity, isResourceEntity, isSystemEntity, isUserEntity, locationEntityV1alpha1Validator, makeValidator, parseEntityRef, parseLocationRef, resourceEntityV1alpha1Validator, stringifyEntityRef, stringifyLocationRef, systemEntityV1alpha1Validator, userEntityV1alpha1Validator };\n//# sourceMappingURL=index.esm.js.map\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.CodeGen = exports.Name = exports.nil = exports.stringify = exports.str = exports._ = exports.KeywordCxt = void 0;\nconst core_1 = require(\"./core\");\nconst draft7_1 = require(\"./vocabularies/draft7\");\nconst discriminator_1 = require(\"./vocabularies/discriminator\");\nconst draft7MetaSchema = require(\"./refs/json-schema-draft-07.json\");\nconst META_SUPPORT_DATA = [\"/properties\"];\nconst META_SCHEMA_ID = \"http://json-schema.org/draft-07/schema\";\nclass Ajv extends core_1.default {\n    _addVocabularies() {\n        super._addVocabularies();\n        draft7_1.default.forEach((v) => this.addVocabulary(v));\n        if (this.opts.discriminator)\n            this.addKeyword(discriminator_1.default);\n    }\n    _addDefaultMetaSchema() {\n        super._addDefaultMetaSchema();\n        if (!this.opts.meta)\n            return;\n        const metaSchema = this.opts.$data\n            ? this.$dataMetaSchema(draft7MetaSchema, META_SUPPORT_DATA)\n            : draft7MetaSchema;\n        this.addMetaSchema(metaSchema, META_SCHEMA_ID, false);\n        this.refs[\"http://json-schema.org/schema\"] = META_SCHEMA_ID;\n    }\n    defaultMeta() {\n        return (this.opts.defaultMeta =\n            super.defaultMeta() || (this.getSchema(META_SCHEMA_ID) ? META_SCHEMA_ID : undefined));\n    }\n}\nmodule.exports = exports = Ajv;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.default = Ajv;\nvar validate_1 = require(\"./compile/validate\");\nObject.defineProperty(exports, \"KeywordCxt\", { enumerable: true, get: function () { return validate_1.KeywordCxt; } });\nvar codegen_1 = require(\"./compile/codegen\");\nObject.defineProperty(exports, \"_\", { enumerable: true, get: function () { return codegen_1._; } });\nObject.defineProperty(exports, \"str\", { enumerable: true, get: function () { return codegen_1.str; } });\nObject.defineProperty(exports, \"stringify\", { enumerable: true, get: function () { return codegen_1.stringify; } });\nObject.defineProperty(exports, \"nil\", { enumerable: true, get: function () { return codegen_1.nil; } });\nObject.defineProperty(exports, \"Name\", { enumerable: true, get: function () { return codegen_1.Name; } });\nObject.defineProperty(exports, \"CodeGen\", { enumerable: true, get: function () { return codegen_1.CodeGen; } });\n//# sourceMappingURL=ajv.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.regexpCode = exports.getEsmExportName = exports.getProperty = exports.safeStringify = exports.stringify = exports.strConcat = exports.addCodeArg = exports.str = exports._ = exports.nil = exports._Code = exports.Name = exports.IDENTIFIER = exports._CodeOrName = void 0;\nclass _CodeOrName {\n}\nexports._CodeOrName = _CodeOrName;\nexports.IDENTIFIER = /^[a-z$_][a-z$_0-9]*$/i;\nclass Name extends _CodeOrName {\n    constructor(s) {\n        super();\n        if (!exports.IDENTIFIER.test(s))\n            throw new Error(\"CodeGen: name must be a valid identifier\");\n        this.str = s;\n    }\n    toString() {\n        return this.str;\n    }\n    emptyStr() {\n        return false;\n    }\n    get names() {\n        return { [this.str]: 1 };\n    }\n}\nexports.Name = Name;\nclass _Code extends _CodeOrName {\n    constructor(code) {\n        super();\n        this._items = typeof code === \"string\" ? [code] : code;\n    }\n    toString() {\n        return this.str;\n    }\n    emptyStr() {\n        if (this._items.length > 1)\n            return false;\n        const item = this._items[0];\n        return item === \"\" || item === '\"\"';\n    }\n    get str() {\n        var _a;\n        return ((_a = this._str) !== null && _a !== void 0 ? _a : (this._str = this._items.reduce((s, c) => `${s}${c}`, \"\")));\n    }\n    get names() {\n        var _a;\n        return ((_a = this._names) !== null && _a !== void 0 ? _a : (this._names = this._items.reduce((names, c) => {\n            if (c instanceof Name)\n                names[c.str] = (names[c.str] || 0) + 1;\n            return names;\n        }, {})));\n    }\n}\nexports._Code = _Code;\nexports.nil = new _Code(\"\");\nfunction _(strs, ...args) {\n    const code = [strs[0]];\n    let i = 0;\n    while (i < args.length) {\n        addCodeArg(code, args[i]);\n        code.push(strs[++i]);\n    }\n    return new _Code(code);\n}\nexports._ = _;\nconst plus = new _Code(\"+\");\nfunction str(strs, ...args) {\n    const expr = [safeStringify(strs[0])];\n    let i = 0;\n    while (i < args.length) {\n        expr.push(plus);\n        addCodeArg(expr, args[i]);\n        expr.push(plus, safeStringify(strs[++i]));\n    }\n    optimize(expr);\n    return new _Code(expr);\n}\nexports.str = str;\nfunction addCodeArg(code, arg) {\n    if (arg instanceof _Code)\n        code.push(...arg._items);\n    else if (arg instanceof Name)\n        code.push(arg);\n    else\n        code.push(interpolate(arg));\n}\nexports.addCodeArg = addCodeArg;\nfunction optimize(expr) {\n    let i = 1;\n    while (i < expr.length - 1) {\n        if (expr[i] === plus) {\n            const res = mergeExprItems(expr[i - 1], expr[i + 1]);\n            if (res !== undefined) {\n                expr.splice(i - 1, 3, res);\n                continue;\n            }\n            expr[i++] = \"+\";\n        }\n        i++;\n    }\n}\nfunction mergeExprItems(a, b) {\n    if (b === '\"\"')\n        return a;\n    if (a === '\"\"')\n        return b;\n    if (typeof a == \"string\") {\n        if (b instanceof Name || a[a.length - 1] !== '\"')\n            return;\n        if (typeof b != \"string\")\n            return `${a.slice(0, -1)}${b}\"`;\n        if (b[0] === '\"')\n            return a.slice(0, -1) + b.slice(1);\n        return;\n    }\n    if (typeof b == \"string\" && b[0] === '\"' && !(a instanceof Name))\n        return `\"${a}${b.slice(1)}`;\n    return;\n}\nfunction strConcat(c1, c2) {\n    return c2.emptyStr() ? c1 : c1.emptyStr() ? c2 : str `${c1}${c2}`;\n}\nexports.strConcat = strConcat;\n// TODO do not allow arrays here\nfunction interpolate(x) {\n    return typeof x == \"number\" || typeof x == \"boolean\" || x === null\n        ? x\n        : safeStringify(Array.isArray(x) ? x.join(\",\") : x);\n}\nfunction stringify(x) {\n    return new _Code(safeStringify(x));\n}\nexports.stringify = stringify;\nfunction safeStringify(x) {\n    return JSON.stringify(x)\n        .replace(/\\u2028/g, \"\\\\u2028\")\n        .replace(/\\u2029/g, \"\\\\u2029\");\n}\nexports.safeStringify = safeStringify;\nfunction getProperty(key) {\n    return typeof key == \"string\" && exports.IDENTIFIER.test(key) ? new _Code(`.${key}`) : _ `[${key}]`;\n}\nexports.getProperty = getProperty;\n//Does best effort to format the name properly\nfunction getEsmExportName(key) {\n    if (typeof key == \"string\" && exports.IDENTIFIER.test(key)) {\n        return new _Code(`${key}`);\n    }\n    throw new Error(`CodeGen: invalid export name: ${key}, use explicit $id name mapping`);\n}\nexports.getEsmExportName = getEsmExportName;\nfunction regexpCode(rx) {\n    return new _Code(rx.toString());\n}\nexports.regexpCode = regexpCode;\n//# sourceMappingURL=code.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.or = exports.and = exports.not = exports.CodeGen = exports.operators = exports.varKinds = exports.ValueScopeName = exports.ValueScope = exports.Scope = exports.Name = exports.regexpCode = exports.stringify = exports.getProperty = exports.nil = exports.strConcat = exports.str = exports._ = void 0;\nconst code_1 = require(\"./code\");\nconst scope_1 = require(\"./scope\");\nvar code_2 = require(\"./code\");\nObject.defineProperty(exports, \"_\", { enumerable: true, get: function () { return code_2._; } });\nObject.defineProperty(exports, \"str\", { enumerable: true, get: function () { return code_2.str; } });\nObject.defineProperty(exports, \"strConcat\", { enumerable: true, get: function () { return code_2.strConcat; } });\nObject.defineProperty(exports, \"nil\", { enumerable: true, get: function () { return code_2.nil; } });\nObject.defineProperty(exports, \"getProperty\", { enumerable: true, get: function () { return code_2.getProperty; } });\nObject.defineProperty(exports, \"stringify\", { enumerable: true, get: function () { return code_2.stringify; } });\nObject.defineProperty(exports, \"regexpCode\", { enumerable: true, get: function () { return code_2.regexpCode; } });\nObject.defineProperty(exports, \"Name\", { enumerable: true, get: function () { return code_2.Name; } });\nvar scope_2 = require(\"./scope\");\nObject.defineProperty(exports, \"Scope\", { enumerable: true, get: function () { return scope_2.Scope; } });\nObject.defineProperty(exports, \"ValueScope\", { enumerable: true, get: function () { return scope_2.ValueScope; } });\nObject.defineProperty(exports, \"ValueScopeName\", { enumerable: true, get: function () { return scope_2.ValueScopeName; } });\nObject.defineProperty(exports, \"varKinds\", { enumerable: true, get: function () { return scope_2.varKinds; } });\nexports.operators = {\n    GT: new code_1._Code(\">\"),\n    GTE: new code_1._Code(\">=\"),\n    LT: new code_1._Code(\"<\"),\n    LTE: new code_1._Code(\"<=\"),\n    EQ: new code_1._Code(\"===\"),\n    NEQ: new code_1._Code(\"!==\"),\n    NOT: new code_1._Code(\"!\"),\n    OR: new code_1._Code(\"||\"),\n    AND: new code_1._Code(\"&&\"),\n    ADD: new code_1._Code(\"+\"),\n};\nclass Node {\n    optimizeNodes() {\n        return this;\n    }\n    optimizeNames(_names, _constants) {\n        return this;\n    }\n}\nclass Def extends Node {\n    constructor(varKind, name, rhs) {\n        super();\n        this.varKind = varKind;\n        this.name = name;\n        this.rhs = rhs;\n    }\n    render({ es5, _n }) {\n        const varKind = es5 ? scope_1.varKinds.var : this.varKind;\n        const rhs = this.rhs === undefined ? \"\" : ` = ${this.rhs}`;\n        return `${varKind} ${this.name}${rhs};` + _n;\n    }\n    optimizeNames(names, constants) {\n        if (!names[this.name.str])\n            return;\n        if (this.rhs)\n            this.rhs = optimizeExpr(this.rhs, names, constants);\n        return this;\n    }\n    get names() {\n        return this.rhs instanceof code_1._CodeOrName ? this.rhs.names : {};\n    }\n}\nclass Assign extends Node {\n    constructor(lhs, rhs, sideEffects) {\n        super();\n        this.lhs = lhs;\n        this.rhs = rhs;\n        this.sideEffects = sideEffects;\n    }\n    render({ _n }) {\n        return `${this.lhs} = ${this.rhs};` + _n;\n    }\n    optimizeNames(names, constants) {\n        if (this.lhs instanceof code_1.Name && !names[this.lhs.str] && !this.sideEffects)\n            return;\n        this.rhs = optimizeExpr(this.rhs, names, constants);\n        return this;\n    }\n    get names() {\n        const names = this.lhs instanceof code_1.Name ? {} : { ...this.lhs.names };\n        return addExprNames(names, this.rhs);\n    }\n}\nclass AssignOp extends Assign {\n    constructor(lhs, op, rhs, sideEffects) {\n        super(lhs, rhs, sideEffects);\n        this.op = op;\n    }\n    render({ _n }) {\n        return `${this.lhs} ${this.op}= ${this.rhs};` + _n;\n    }\n}\nclass Label extends Node {\n    constructor(label) {\n        super();\n        this.label = label;\n        this.names = {};\n    }\n    render({ _n }) {\n        return `${this.label}:` + _n;\n    }\n}\nclass Break extends Node {\n    constructor(label) {\n        super();\n        this.label = label;\n        this.names = {};\n    }\n    render({ _n }) {\n        const label = this.label ? ` ${this.label}` : \"\";\n        return `break${label};` + _n;\n    }\n}\nclass Throw extends Node {\n    constructor(error) {\n        super();\n        this.error = error;\n    }\n    render({ _n }) {\n        return `throw ${this.error};` + _n;\n    }\n    get names() {\n        return this.error.names;\n    }\n}\nclass AnyCode extends Node {\n    constructor(code) {\n        super();\n        this.code = code;\n    }\n    render({ _n }) {\n        return `${this.code};` + _n;\n    }\n    optimizeNodes() {\n        return `${this.code}` ? this : undefined;\n    }\n    optimizeNames(names, constants) {\n        this.code = optimizeExpr(this.code, names, constants);\n        return this;\n    }\n    get names() {\n        return this.code instanceof code_1._CodeOrName ? this.code.names : {};\n    }\n}\nclass ParentNode extends Node {\n    constructor(nodes = []) {\n        super();\n        this.nodes = nodes;\n    }\n    render(opts) {\n        return this.nodes.reduce((code, n) => code + n.render(opts), \"\");\n    }\n    optimizeNodes() {\n        const { nodes } = this;\n        let i = nodes.length;\n        while (i--) {\n            const n = nodes[i].optimizeNodes();\n            if (Array.isArray(n))\n                nodes.splice(i, 1, ...n);\n            else if (n)\n                nodes[i] = n;\n            else\n                nodes.splice(i, 1);\n        }\n        return nodes.length > 0 ? this : undefined;\n    }\n    optimizeNames(names, constants) {\n        const { nodes } = this;\n        let i = nodes.length;\n        while (i--) {\n            // iterating backwards improves 1-pass optimization\n            const n = nodes[i];\n            if (n.optimizeNames(names, constants))\n                continue;\n            subtractNames(names, n.names);\n            nodes.splice(i, 1);\n        }\n        return nodes.length > 0 ? this : undefined;\n    }\n    get names() {\n        return this.nodes.reduce((names, n) => addNames(names, n.names), {});\n    }\n}\nclass BlockNode extends ParentNode {\n    render(opts) {\n        return \"{\" + opts._n + super.render(opts) + \"}\" + opts._n;\n    }\n}\nclass Root extends ParentNode {\n}\nclass Else extends BlockNode {\n}\nElse.kind = \"else\";\nclass If extends BlockNode {\n    constructor(condition, nodes) {\n        super(nodes);\n        this.condition = condition;\n    }\n    render(opts) {\n        let code = `if(${this.condition})` + super.render(opts);\n        if (this.else)\n            code += \"else \" + this.else.render(opts);\n        return code;\n    }\n    optimizeNodes() {\n        super.optimizeNodes();\n        const cond = this.condition;\n        if (cond === true)\n            return this.nodes; // else is ignored here\n        let e = this.else;\n        if (e) {\n            const ns = e.optimizeNodes();\n            e = this.else = Array.isArray(ns) ? new Else(ns) : ns;\n        }\n        if (e) {\n            if (cond === false)\n                return e instanceof If ? e : e.nodes;\n            if (this.nodes.length)\n                return this;\n            return new If(not(cond), e instanceof If ? [e] : e.nodes);\n        }\n        if (cond === false || !this.nodes.length)\n            return undefined;\n        return this;\n    }\n    optimizeNames(names, constants) {\n        var _a;\n        this.else = (_a = this.else) === null || _a === void 0 ? void 0 : _a.optimizeNames(names, constants);\n        if (!(super.optimizeNames(names, constants) || this.else))\n            return;\n        this.condition = optimizeExpr(this.condition, names, constants);\n        return this;\n    }\n    get names() {\n        const names = super.names;\n        addExprNames(names, this.condition);\n        if (this.else)\n            addNames(names, this.else.names);\n        return names;\n    }\n}\nIf.kind = \"if\";\nclass For extends BlockNode {\n}\nFor.kind = \"for\";\nclass ForLoop extends For {\n    constructor(iteration) {\n        super();\n        this.iteration = iteration;\n    }\n    render(opts) {\n        return `for(${this.iteration})` + super.render(opts);\n    }\n    optimizeNames(names, constants) {\n        if (!super.optimizeNames(names, constants))\n            return;\n        this.iteration = optimizeExpr(this.iteration, names, constants);\n        return this;\n    }\n    get names() {\n        return addNames(super.names, this.iteration.names);\n    }\n}\nclass ForRange extends For {\n    constructor(varKind, name, from, to) {\n        super();\n        this.varKind = varKind;\n        this.name = name;\n        this.from = from;\n        this.to = to;\n    }\n    render(opts) {\n        const varKind = opts.es5 ? scope_1.varKinds.var : this.varKind;\n        const { name, from, to } = this;\n        return `for(${varKind} ${name}=${from}; ${name}<${to}; ${name}++)` + super.render(opts);\n    }\n    get names() {\n        const names = addExprNames(super.names, this.from);\n        return addExprNames(names, this.to);\n    }\n}\nclass ForIter extends For {\n    constructor(loop, varKind, name, iterable) {\n        super();\n        this.loop = loop;\n        this.varKind = varKind;\n        this.name = name;\n        this.iterable = iterable;\n    }\n    render(opts) {\n        return `for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})` + super.render(opts);\n    }\n    optimizeNames(names, constants) {\n        if (!super.optimizeNames(names, constants))\n            return;\n        this.iterable = optimizeExpr(this.iterable, names, constants);\n        return this;\n    }\n    get names() {\n        return addNames(super.names, this.iterable.names);\n    }\n}\nclass Func extends BlockNode {\n    constructor(name, args, async) {\n        super();\n        this.name = name;\n        this.args = args;\n        this.async = async;\n    }\n    render(opts) {\n        const _async = this.async ? \"async \" : \"\";\n        return `${_async}function ${this.name}(${this.args})` + super.render(opts);\n    }\n}\nFunc.kind = \"func\";\nclass Return extends ParentNode {\n    render(opts) {\n        return \"return \" + super.render(opts);\n    }\n}\nReturn.kind = \"return\";\nclass Try extends BlockNode {\n    render(opts) {\n        let code = \"try\" + super.render(opts);\n        if (this.catch)\n            code += this.catch.render(opts);\n        if (this.finally)\n            code += this.finally.render(opts);\n        return code;\n    }\n    optimizeNodes() {\n        var _a, _b;\n        super.optimizeNodes();\n        (_a = this.catch) === null || _a === void 0 ? void 0 : _a.optimizeNodes();\n        (_b = this.finally) === null || _b === void 0 ? void 0 : _b.optimizeNodes();\n        return this;\n    }\n    optimizeNames(names, constants) {\n        var _a, _b;\n        super.optimizeNames(names, constants);\n        (_a = this.catch) === null || _a === void 0 ? void 0 : _a.optimizeNames(names, constants);\n        (_b = this.finally) === null || _b === void 0 ? void 0 : _b.optimizeNames(names, constants);\n        return this;\n    }\n    get names() {\n        const names = super.names;\n        if (this.catch)\n            addNames(names, this.catch.names);\n        if (this.finally)\n            addNames(names, this.finally.names);\n        return names;\n    }\n}\nclass Catch extends BlockNode {\n    constructor(error) {\n        super();\n        this.error = error;\n    }\n    render(opts) {\n        return `catch(${this.error})` + super.render(opts);\n    }\n}\nCatch.kind = \"catch\";\nclass Finally extends BlockNode {\n    render(opts) {\n        return \"finally\" + super.render(opts);\n    }\n}\nFinally.kind = \"finally\";\nclass CodeGen {\n    constructor(extScope, opts = {}) {\n        this._values = {};\n        this._blockStarts = [];\n        this._constants = {};\n        this.opts = { ...opts, _n: opts.lines ? \"\\n\" : \"\" };\n        this._extScope = extScope;\n        this._scope = new scope_1.Scope({ parent: extScope });\n        this._nodes = [new Root()];\n    }\n    toString() {\n        return this._root.render(this.opts);\n    }\n    // returns unique name in the internal scope\n    name(prefix) {\n        return this._scope.name(prefix);\n    }\n    // reserves unique name in the external scope\n    scopeName(prefix) {\n        return this._extScope.name(prefix);\n    }\n    // reserves unique name in the external scope and assigns value to it\n    scopeValue(prefixOrName, value) {\n        const name = this._extScope.value(prefixOrName, value);\n        const vs = this._values[name.prefix] || (this._values[name.prefix] = new Set());\n        vs.add(name);\n        return name;\n    }\n    getScopeValue(prefix, keyOrRef) {\n        return this._extScope.getValue(prefix, keyOrRef);\n    }\n    // return code that assigns values in the external scope to the names that are used internally\n    // (same names that were returned by gen.scopeName or gen.scopeValue)\n    scopeRefs(scopeName) {\n        return this._extScope.scopeRefs(scopeName, this._values);\n    }\n    scopeCode() {\n        return this._extScope.scopeCode(this._values);\n    }\n    _def(varKind, nameOrPrefix, rhs, constant) {\n        const name = this._scope.toName(nameOrPrefix);\n        if (rhs !== undefined && constant)\n            this._constants[name.str] = rhs;\n        this._leafNode(new Def(varKind, name, rhs));\n        return name;\n    }\n    // `const` declaration (`var` in es5 mode)\n    const(nameOrPrefix, rhs, _constant) {\n        return this._def(scope_1.varKinds.const, nameOrPrefix, rhs, _constant);\n    }\n    // `let` declaration with optional assignment (`var` in es5 mode)\n    let(nameOrPrefix, rhs, _constant) {\n        return this._def(scope_1.varKinds.let, nameOrPrefix, rhs, _constant);\n    }\n    // `var` declaration with optional assignment\n    var(nameOrPrefix, rhs, _constant) {\n        return this._def(scope_1.varKinds.var, nameOrPrefix, rhs, _constant);\n    }\n    // assignment code\n    assign(lhs, rhs, sideEffects) {\n        return this._leafNode(new Assign(lhs, rhs, sideEffects));\n    }\n    // `+=` code\n    add(lhs, rhs) {\n        return this._leafNode(new AssignOp(lhs, exports.operators.ADD, rhs));\n    }\n    // appends passed SafeExpr to code or executes Block\n    code(c) {\n        if (typeof c == \"function\")\n            c();\n        else if (c !== code_1.nil)\n            this._leafNode(new AnyCode(c));\n        return this;\n    }\n    // returns code for object literal for the passed argument list of key-value pairs\n    object(...keyValues) {\n        const code = [\"{\"];\n        for (const [key, value] of keyValues) {\n            if (code.length > 1)\n                code.push(\",\");\n            code.push(key);\n            if (key !== value || this.opts.es5) {\n                code.push(\":\");\n                (0, code_1.addCodeArg)(code, value);\n            }\n        }\n        code.push(\"}\");\n        return new code_1._Code(code);\n    }\n    // `if` clause (or statement if `thenBody` and, optionally, `elseBody` are passed)\n    if(condition, thenBody, elseBody) {\n        this._blockNode(new If(condition));\n        if (thenBody && elseBody) {\n            this.code(thenBody).else().code(elseBody).endIf();\n        }\n        else if (thenBody) {\n            this.code(thenBody).endIf();\n        }\n        else if (elseBody) {\n            throw new Error('CodeGen: \"else\" body without \"then\" body');\n        }\n        return this;\n    }\n    // `else if` clause - invalid without `if` or after `else` clauses\n    elseIf(condition) {\n        return this._elseNode(new If(condition));\n    }\n    // `else` clause - only valid after `if` or `else if` clauses\n    else() {\n        return this._elseNode(new Else());\n    }\n    // end `if` statement (needed if gen.if was used only with condition)\n    endIf() {\n        return this._endBlockNode(If, Else);\n    }\n    _for(node, forBody) {\n        this._blockNode(node);\n        if (forBody)\n            this.code(forBody).endFor();\n        return this;\n    }\n    // a generic `for` clause (or statement if `forBody` is passed)\n    for(iteration, forBody) {\n        return this._for(new ForLoop(iteration), forBody);\n    }\n    // `for` statement for a range of values\n    forRange(nameOrPrefix, from, to, forBody, varKind = this.opts.es5 ? scope_1.varKinds.var : scope_1.varKinds.let) {\n        const name = this._scope.toName(nameOrPrefix);\n        return this._for(new ForRange(varKind, name, from, to), () => forBody(name));\n    }\n    // `for-of` statement (in es5 mode replace with a normal for loop)\n    forOf(nameOrPrefix, iterable, forBody, varKind = scope_1.varKinds.const) {\n        const name = this._scope.toName(nameOrPrefix);\n        if (this.opts.es5) {\n            const arr = iterable instanceof code_1.Name ? iterable : this.var(\"_arr\", iterable);\n            return this.forRange(\"_i\", 0, (0, code_1._) `${arr}.length`, (i) => {\n                this.var(name, (0, code_1._) `${arr}[${i}]`);\n                forBody(name);\n            });\n        }\n        return this._for(new ForIter(\"of\", varKind, name, iterable), () => forBody(name));\n    }\n    // `for-in` statement.\n    // With option `ownProperties` replaced with a `for-of` loop for object keys\n    forIn(nameOrPrefix, obj, forBody, varKind = this.opts.es5 ? scope_1.varKinds.var : scope_1.varKinds.const) {\n        if (this.opts.ownProperties) {\n            return this.forOf(nameOrPrefix, (0, code_1._) `Object.keys(${obj})`, forBody);\n        }\n        const name = this._scope.toName(nameOrPrefix);\n        return this._for(new ForIter(\"in\", varKind, name, obj), () => forBody(name));\n    }\n    // end `for` loop\n    endFor() {\n        return this._endBlockNode(For);\n    }\n    // `label` statement\n    label(label) {\n        return this._leafNode(new Label(label));\n    }\n    // `break` statement\n    break(label) {\n        return this._leafNode(new Break(label));\n    }\n    // `return` statement\n    return(value) {\n        const node = new Return();\n        this._blockNode(node);\n        this.code(value);\n        if (node.nodes.length !== 1)\n            throw new Error('CodeGen: \"return\" should have one node');\n        return this._endBlockNode(Return);\n    }\n    // `try` statement\n    try(tryBody, catchCode, finallyCode) {\n        if (!catchCode && !finallyCode)\n            throw new Error('CodeGen: \"try\" without \"catch\" and \"finally\"');\n        const node = new Try();\n        this._blockNode(node);\n        this.code(tryBody);\n        if (catchCode) {\n            const error = this.name(\"e\");\n            this._currNode = node.catch = new Catch(error);\n            catchCode(error);\n        }\n        if (finallyCode) {\n            this._currNode = node.finally = new Finally();\n            this.code(finallyCode);\n        }\n        return this._endBlockNode(Catch, Finally);\n    }\n    // `throw` statement\n    throw(error) {\n        return this._leafNode(new Throw(error));\n    }\n    // start self-balancing block\n    block(body, nodeCount) {\n        this._blockStarts.push(this._nodes.length);\n        if (body)\n            this.code(body).endBlock(nodeCount);\n        return this;\n    }\n    // end the current self-balancing block\n    endBlock(nodeCount) {\n        const len = this._blockStarts.pop();\n        if (len === undefined)\n            throw new Error(\"CodeGen: not in self-balancing block\");\n        const toClose = this._nodes.length - len;\n        if (toClose < 0 || (nodeCount !== undefined && toClose !== nodeCount)) {\n            throw new Error(`CodeGen: wrong number of nodes: ${toClose} vs ${nodeCount} expected`);\n        }\n        this._nodes.length = len;\n        return this;\n    }\n    // `function` heading (or definition if funcBody is passed)\n    func(name, args = code_1.nil, async, funcBody) {\n        this._blockNode(new Func(name, args, async));\n        if (funcBody)\n            this.code(funcBody).endFunc();\n        return this;\n    }\n    // end function definition\n    endFunc() {\n        return this._endBlockNode(Func);\n    }\n    optimize(n = 1) {\n        while (n-- > 0) {\n            this._root.optimizeNodes();\n            this._root.optimizeNames(this._root.names, this._constants);\n        }\n    }\n    _leafNode(node) {\n        this._currNode.nodes.push(node);\n        return this;\n    }\n    _blockNode(node) {\n        this._currNode.nodes.push(node);\n        this._nodes.push(node);\n    }\n    _endBlockNode(N1, N2) {\n        const n = this._currNode;\n        if (n instanceof N1 || (N2 && n instanceof N2)) {\n            this._nodes.pop();\n            return this;\n        }\n        throw new Error(`CodeGen: not in block \"${N2 ? `${N1.kind}/${N2.kind}` : N1.kind}\"`);\n    }\n    _elseNode(node) {\n        const n = this._currNode;\n        if (!(n instanceof If)) {\n            throw new Error('CodeGen: \"else\" without \"if\"');\n        }\n        this._currNode = n.else = node;\n        return this;\n    }\n    get _root() {\n        return this._nodes[0];\n    }\n    get _currNode() {\n        const ns = this._nodes;\n        return ns[ns.length - 1];\n    }\n    set _currNode(node) {\n        const ns = this._nodes;\n        ns[ns.length - 1] = node;\n    }\n}\nexports.CodeGen = CodeGen;\nfunction addNames(names, from) {\n    for (const n in from)\n        names[n] = (names[n] || 0) + (from[n] || 0);\n    return names;\n}\nfunction addExprNames(names, from) {\n    return from instanceof code_1._CodeOrName ? addNames(names, from.names) : names;\n}\nfunction optimizeExpr(expr, names, constants) {\n    if (expr instanceof code_1.Name)\n        return replaceName(expr);\n    if (!canOptimize(expr))\n        return expr;\n    return new code_1._Code(expr._items.reduce((items, c) => {\n        if (c instanceof code_1.Name)\n            c = replaceName(c);\n        if (c instanceof code_1._Code)\n            items.push(...c._items);\n        else\n            items.push(c);\n        return items;\n    }, []));\n    function replaceName(n) {\n        const c = constants[n.str];\n        if (c === undefined || names[n.str] !== 1)\n            return n;\n        delete names[n.str];\n        return c;\n    }\n    function canOptimize(e) {\n        return (e instanceof code_1._Code &&\n            e._items.some((c) => c instanceof code_1.Name && names[c.str] === 1 && constants[c.str] !== undefined));\n    }\n}\nfunction subtractNames(names, from) {\n    for (const n in from)\n        names[n] = (names[n] || 0) - (from[n] || 0);\n}\nfunction not(x) {\n    return typeof x == \"boolean\" || typeof x == \"number\" || x === null ? !x : (0, code_1._) `!${par(x)}`;\n}\nexports.not = not;\nconst andCode = mappend(exports.operators.AND);\n// boolean AND (&&) expression with the passed arguments\nfunction and(...args) {\n    return args.reduce(andCode);\n}\nexports.and = and;\nconst orCode = mappend(exports.operators.OR);\n// boolean OR (||) expression with the passed arguments\nfunction or(...args) {\n    return args.reduce(orCode);\n}\nexports.or = or;\nfunction mappend(op) {\n    return (x, y) => (x === code_1.nil ? y : y === code_1.nil ? x : (0, code_1._) `${par(x)} ${op} ${par(y)}`);\n}\nfunction par(x) {\n    return x instanceof code_1.Name ? x : (0, code_1._) `(${x})`;\n}\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ValueScope = exports.ValueScopeName = exports.Scope = exports.varKinds = exports.UsedValueState = void 0;\nconst code_1 = require(\"./code\");\nclass ValueError extends Error {\n    constructor(name) {\n        super(`CodeGen: \"code\" for ${name} not defined`);\n        this.value = name.value;\n    }\n}\nvar UsedValueState;\n(function (UsedValueState) {\n    UsedValueState[UsedValueState[\"Started\"] = 0] = \"Started\";\n    UsedValueState[UsedValueState[\"Completed\"] = 1] = \"Completed\";\n})(UsedValueState = exports.UsedValueState || (exports.UsedValueState = {}));\nexports.varKinds = {\n    const: new code_1.Name(\"const\"),\n    let: new code_1.Name(\"let\"),\n    var: new code_1.Name(\"var\"),\n};\nclass Scope {\n    constructor({ prefixes, parent } = {}) {\n        this._names = {};\n        this._prefixes = prefixes;\n        this._parent = parent;\n    }\n    toName(nameOrPrefix) {\n        return nameOrPrefix instanceof code_1.Name ? nameOrPrefix : this.name(nameOrPrefix);\n    }\n    name(prefix) {\n        return new code_1.Name(this._newName(prefix));\n    }\n    _newName(prefix) {\n        const ng = this._names[prefix] || this._nameGroup(prefix);\n        return `${prefix}${ng.index++}`;\n    }\n    _nameGroup(prefix) {\n        var _a, _b;\n        if (((_b = (_a = this._parent) === null || _a === void 0 ? void 0 : _a._prefixes) === null || _b === void 0 ? void 0 : _b.has(prefix)) || (this._prefixes && !this._prefixes.has(prefix))) {\n            throw new Error(`CodeGen: prefix \"${prefix}\" is not allowed in this scope`);\n        }\n        return (this._names[prefix] = { prefix, index: 0 });\n    }\n}\nexports.Scope = Scope;\nclass ValueScopeName extends code_1.Name {\n    constructor(prefix, nameStr) {\n        super(nameStr);\n        this.prefix = prefix;\n    }\n    setValue(value, { property, itemIndex }) {\n        this.value = value;\n        this.scopePath = (0, code_1._) `.${new code_1.Name(property)}[${itemIndex}]`;\n    }\n}\nexports.ValueScopeName = ValueScopeName;\nconst line = (0, code_1._) `\\n`;\nclass ValueScope extends Scope {\n    constructor(opts) {\n        super(opts);\n        this._values = {};\n        this._scope = opts.scope;\n        this.opts = { ...opts, _n: opts.lines ? line : code_1.nil };\n    }\n    get() {\n        return this._scope;\n    }\n    name(prefix) {\n        return new ValueScopeName(prefix, this._newName(prefix));\n    }\n    value(nameOrPrefix, value) {\n        var _a;\n        if (value.ref === undefined)\n            throw new Error(\"CodeGen: ref must be passed in value\");\n        const name = this.toName(nameOrPrefix);\n        const { prefix } = name;\n        const valueKey = (_a = value.key) !== null && _a !== void 0 ? _a : value.ref;\n        let vs = this._values[prefix];\n        if (vs) {\n            const _name = vs.get(valueKey);\n            if (_name)\n                return _name;\n        }\n        else {\n            vs = this._values[prefix] = new Map();\n        }\n        vs.set(valueKey, name);\n        const s = this._scope[prefix] || (this._scope[prefix] = []);\n        const itemIndex = s.length;\n        s[itemIndex] = value.ref;\n        name.setValue(value, { property: prefix, itemIndex });\n        return name;\n    }\n    getValue(prefix, keyOrRef) {\n        const vs = this._values[prefix];\n        if (!vs)\n            return;\n        return vs.get(keyOrRef);\n    }\n    scopeRefs(scopeName, values = this._values) {\n        return this._reduceValues(values, (name) => {\n            if (name.scopePath === undefined)\n                throw new Error(`CodeGen: name \"${name}\" has no value`);\n            return (0, code_1._) `${scopeName}${name.scopePath}`;\n        });\n    }\n    scopeCode(values = this._values, usedValues, getCode) {\n        return this._reduceValues(values, (name) => {\n            if (name.value === undefined)\n                throw new Error(`CodeGen: name \"${name}\" has no value`);\n            return name.value.code;\n        }, usedValues, getCode);\n    }\n    _reduceValues(values, valueCode, usedValues = {}, getCode) {\n        let code = code_1.nil;\n        for (const prefix in values) {\n            const vs = values[prefix];\n            if (!vs)\n                continue;\n            const nameSet = (usedValues[prefix] = usedValues[prefix] || new Map());\n            vs.forEach((name) => {\n                if (nameSet.has(name))\n                    return;\n                nameSet.set(name, UsedValueState.Started);\n                let c = valueCode(name);\n                if (c) {\n                    const def = this.opts.es5 ? exports.varKinds.var : exports.varKinds.const;\n                    code = (0, code_1._) `${code}${def} ${name} = ${c};${this.opts._n}`;\n                }\n                else if ((c = getCode === null || getCode === void 0 ? void 0 : getCode(name))) {\n                    code = (0, code_1._) `${code}${c}${this.opts._n}`;\n                }\n                else {\n                    throw new ValueError(name);\n                }\n                nameSet.set(name, UsedValueState.Completed);\n            });\n        }\n        return code;\n    }\n}\nexports.ValueScope = ValueScope;\n//# sourceMappingURL=scope.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.extendErrors = exports.resetErrorsCount = exports.reportExtraError = exports.reportError = exports.keyword$DataError = exports.keywordError = void 0;\nconst codegen_1 = require(\"./codegen\");\nconst util_1 = require(\"./util\");\nconst names_1 = require(\"./names\");\nexports.keywordError = {\n    message: ({ keyword }) => (0, codegen_1.str) `must pass \"${keyword}\" keyword validation`,\n};\nexports.keyword$DataError = {\n    message: ({ keyword, schemaType }) => schemaType\n        ? (0, codegen_1.str) `\"${keyword}\" keyword must be ${schemaType} ($data)`\n        : (0, codegen_1.str) `\"${keyword}\" keyword is invalid ($data)`,\n};\nfunction reportError(cxt, error = exports.keywordError, errorPaths, overrideAllErrors) {\n    const { it } = cxt;\n    const { gen, compositeRule, allErrors } = it;\n    const errObj = errorObjectCode(cxt, error, errorPaths);\n    if (overrideAllErrors !== null && overrideAllErrors !== void 0 ? overrideAllErrors : (compositeRule || allErrors)) {\n        addError(gen, errObj);\n    }\n    else {\n        returnErrors(it, (0, codegen_1._) `[${errObj}]`);\n    }\n}\nexports.reportError = reportError;\nfunction reportExtraError(cxt, error = exports.keywordError, errorPaths) {\n    const { it } = cxt;\n    const { gen, compositeRule, allErrors } = it;\n    const errObj = errorObjectCode(cxt, error, errorPaths);\n    addError(gen, errObj);\n    if (!(compositeRule || allErrors)) {\n        returnErrors(it, names_1.default.vErrors);\n    }\n}\nexports.reportExtraError = reportExtraError;\nfunction resetErrorsCount(gen, errsCount) {\n    gen.assign(names_1.default.errors, errsCount);\n    gen.if((0, codegen_1._) `${names_1.default.vErrors} !== null`, () => gen.if(errsCount, () => gen.assign((0, codegen_1._) `${names_1.default.vErrors}.length`, errsCount), () => gen.assign(names_1.default.vErrors, null)));\n}\nexports.resetErrorsCount = resetErrorsCount;\nfunction extendErrors({ gen, keyword, schemaValue, data, errsCount, it, }) {\n    /* istanbul ignore if */\n    if (errsCount === undefined)\n        throw new Error(\"ajv implementation error\");\n    const err = gen.name(\"err\");\n    gen.forRange(\"i\", errsCount, names_1.default.errors, (i) => {\n        gen.const(err, (0, codegen_1._) `${names_1.default.vErrors}[${i}]`);\n        gen.if((0, codegen_1._) `${err}.instancePath === undefined`, () => gen.assign((0, codegen_1._) `${err}.instancePath`, (0, codegen_1.strConcat)(names_1.default.instancePath, it.errorPath)));\n        gen.assign((0, codegen_1._) `${err}.schemaPath`, (0, codegen_1.str) `${it.errSchemaPath}/${keyword}`);\n        if (it.opts.verbose) {\n            gen.assign((0, codegen_1._) `${err}.schema`, schemaValue);\n            gen.assign((0, codegen_1._) `${err}.data`, data);\n        }\n    });\n}\nexports.extendErrors = extendErrors;\nfunction addError(gen, errObj) {\n    const err = gen.const(\"err\", errObj);\n    gen.if((0, codegen_1._) `${names_1.default.vErrors} === null`, () => gen.assign(names_1.default.vErrors, (0, codegen_1._) `[${err}]`), (0, codegen_1._) `${names_1.default.vErrors}.push(${err})`);\n    gen.code((0, codegen_1._) `${names_1.default.errors}++`);\n}\nfunction returnErrors(it, errs) {\n    const { gen, validateName, schemaEnv } = it;\n    if (schemaEnv.$async) {\n        gen.throw((0, codegen_1._) `new ${it.ValidationError}(${errs})`);\n    }\n    else {\n        gen.assign((0, codegen_1._) `${validateName}.errors`, errs);\n        gen.return(false);\n    }\n}\nconst E = {\n    keyword: new codegen_1.Name(\"keyword\"),\n    schemaPath: new codegen_1.Name(\"schemaPath\"),\n    params: new codegen_1.Name(\"params\"),\n    propertyName: new codegen_1.Name(\"propertyName\"),\n    message: new codegen_1.Name(\"message\"),\n    schema: new codegen_1.Name(\"schema\"),\n    parentSchema: new codegen_1.Name(\"parentSchema\"),\n};\nfunction errorObjectCode(cxt, error, errorPaths) {\n    const { createErrors } = cxt.it;\n    if (createErrors === false)\n        return (0, codegen_1._) `{}`;\n    return errorObject(cxt, error, errorPaths);\n}\nfunction errorObject(cxt, error, errorPaths = {}) {\n    const { gen, it } = cxt;\n    const keyValues = [\n        errorInstancePath(it, errorPaths),\n        errorSchemaPath(cxt, errorPaths),\n    ];\n    extraErrorProps(cxt, error, keyValues);\n    return gen.object(...keyValues);\n}\nfunction errorInstancePath({ errorPath }, { instancePath }) {\n    const instPath = instancePath\n        ? (0, codegen_1.str) `${errorPath}${(0, util_1.getErrorPath)(instancePath, util_1.Type.Str)}`\n        : errorPath;\n    return [names_1.default.instancePath, (0, codegen_1.strConcat)(names_1.default.instancePath, instPath)];\n}\nfunction errorSchemaPath({ keyword, it: { errSchemaPath } }, { schemaPath, parentSchema }) {\n    let schPath = parentSchema ? errSchemaPath : (0, codegen_1.str) `${errSchemaPath}/${keyword}`;\n    if (schemaPath) {\n        schPath = (0, codegen_1.str) `${schPath}${(0, util_1.getErrorPath)(schemaPath, util_1.Type.Str)}`;\n    }\n    return [E.schemaPath, schPath];\n}\nfunction extraErrorProps(cxt, { params, message }, keyValues) {\n    const { keyword, data, schemaValue, it } = cxt;\n    const { opts, propertyName, topSchemaRef, schemaPath } = it;\n    keyValues.push([E.keyword, keyword], [E.params, typeof params == \"function\" ? params(cxt) : params || (0, codegen_1._) `{}`]);\n    if (opts.messages) {\n        keyValues.push([E.message, typeof message == \"function\" ? message(cxt) : message]);\n    }\n    if (opts.verbose) {\n        keyValues.push([E.schema, schemaValue], [E.parentSchema, (0, codegen_1._) `${topSchemaRef}${schemaPath}`], [names_1.default.data, data]);\n    }\n    if (propertyName)\n        keyValues.push([E.propertyName, propertyName]);\n}\n//# sourceMappingURL=errors.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.resolveSchema = exports.getCompilingSchema = exports.resolveRef = exports.compileSchema = exports.SchemaEnv = void 0;\nconst codegen_1 = require(\"./codegen\");\nconst validation_error_1 = require(\"../runtime/validation_error\");\nconst names_1 = require(\"./names\");\nconst resolve_1 = require(\"./resolve\");\nconst util_1 = require(\"./util\");\nconst validate_1 = require(\"./validate\");\nclass SchemaEnv {\n    constructor(env) {\n        var _a;\n        this.refs = {};\n        this.dynamicAnchors = {};\n        let schema;\n        if (typeof env.schema == \"object\")\n            schema = env.schema;\n        this.schema = env.schema;\n        this.schemaId = env.schemaId;\n        this.root = env.root || this;\n        this.baseId = (_a = env.baseId) !== null && _a !== void 0 ? _a : (0, resolve_1.normalizeId)(schema === null || schema === void 0 ? void 0 : schema[env.schemaId || \"$id\"]);\n        this.schemaPath = env.schemaPath;\n        this.localRefs = env.localRefs;\n        this.meta = env.meta;\n        this.$async = schema === null || schema === void 0 ? void 0 : schema.$async;\n        this.refs = {};\n    }\n}\nexports.SchemaEnv = SchemaEnv;\n// let codeSize = 0\n// let nodeCount = 0\n// Compiles schema in SchemaEnv\nfunction compileSchema(sch) {\n    // TODO refactor - remove compilations\n    const _sch = getCompilingSchema.call(this, sch);\n    if (_sch)\n        return _sch;\n    const rootId = (0, resolve_1.getFullPath)(this.opts.uriResolver, sch.root.baseId); // TODO if getFullPath removed 1 tests fails\n    const { es5, lines } = this.opts.code;\n    const { ownProperties } = this.opts;\n    const gen = new codegen_1.CodeGen(this.scope, { es5, lines, ownProperties });\n    let _ValidationError;\n    if (sch.$async) {\n        _ValidationError = gen.scopeValue(\"Error\", {\n            ref: validation_error_1.default,\n            code: (0, codegen_1._) `require(\"ajv/dist/runtime/validation_error\").default`,\n        });\n    }\n    const validateName = gen.scopeName(\"validate\");\n    sch.validateName = validateName;\n    const schemaCxt = {\n        gen,\n        allErrors: this.opts.allErrors,\n        data: names_1.default.data,\n        parentData: names_1.default.parentData,\n        parentDataProperty: names_1.default.parentDataProperty,\n        dataNames: [names_1.default.data],\n        dataPathArr: [codegen_1.nil],\n        dataLevel: 0,\n        dataTypes: [],\n        definedProperties: new Set(),\n        topSchemaRef: gen.scopeValue(\"schema\", this.opts.code.source === true\n            ? { ref: sch.schema, code: (0, codegen_1.stringify)(sch.schema) }\n            : { ref: sch.schema }),\n        validateName,\n        ValidationError: _ValidationError,\n        schema: sch.schema,\n        schemaEnv: sch,\n        rootId,\n        baseId: sch.baseId || rootId,\n        schemaPath: codegen_1.nil,\n        errSchemaPath: sch.schemaPath || (this.opts.jtd ? \"\" : \"#\"),\n        errorPath: (0, codegen_1._) `\"\"`,\n        opts: this.opts,\n        self: this,\n    };\n    let sourceCode;\n    try {\n        this._compilations.add(sch);\n        (0, validate_1.validateFunctionCode)(schemaCxt);\n        gen.optimize(this.opts.code.optimize);\n        // gen.optimize(1)\n        const validateCode = gen.toString();\n        sourceCode = `${gen.scopeRefs(names_1.default.scope)}return ${validateCode}`;\n        // console.log((codeSize += sourceCode.length), (nodeCount += gen.nodeCount))\n        if (this.opts.code.process)\n            sourceCode = this.opts.code.process(sourceCode, sch);\n        // console.log(\"\\n\\n\\n *** \\n\", sourceCode)\n        const makeValidate = new Function(`${names_1.default.self}`, `${names_1.default.scope}`, sourceCode);\n        const validate = makeValidate(this, this.scope.get());\n        this.scope.value(validateName, { ref: validate });\n        validate.errors = null;\n        validate.schema = sch.schema;\n        validate.schemaEnv = sch;\n        if (sch.$async)\n            validate.$async = true;\n        if (this.opts.code.source === true) {\n            validate.source = { validateName, validateCode, scopeValues: gen._values };\n        }\n        if (this.opts.unevaluated) {\n            const { props, items } = schemaCxt;\n            validate.evaluated = {\n                props: props instanceof codegen_1.Name ? undefined : props,\n                items: items instanceof codegen_1.Name ? undefined : items,\n                dynamicProps: props instanceof codegen_1.Name,\n                dynamicItems: items instanceof codegen_1.Name,\n            };\n            if (validate.source)\n                validate.source.evaluated = (0, codegen_1.stringify)(validate.evaluated);\n        }\n        sch.validate = validate;\n        return sch;\n    }\n    catch (e) {\n        delete sch.validate;\n        delete sch.validateName;\n        if (sourceCode)\n            this.logger.error(\"Error compiling schema, function code:\", sourceCode);\n        // console.log(\"\\n\\n\\n *** \\n\", sourceCode, this.opts)\n        throw e;\n    }\n    finally {\n        this._compilations.delete(sch);\n    }\n}\nexports.compileSchema = compileSchema;\nfunction resolveRef(root, baseId, ref) {\n    var _a;\n    ref = (0, resolve_1.resolveUrl)(this.opts.uriResolver, baseId, ref);\n    const schOrFunc = root.refs[ref];\n    if (schOrFunc)\n        return schOrFunc;\n    let _sch = resolve.call(this, root, ref);\n    if (_sch === undefined) {\n        const schema = (_a = root.localRefs) === null || _a === void 0 ? void 0 : _a[ref]; // TODO maybe localRefs should hold SchemaEnv\n        const { schemaId } = this.opts;\n        if (schema)\n            _sch = new SchemaEnv({ schema, schemaId, root, baseId });\n    }\n    if (_sch === undefined)\n        return;\n    return (root.refs[ref] = inlineOrCompile.call(this, _sch));\n}\nexports.resolveRef = resolveRef;\nfunction inlineOrCompile(sch) {\n    if ((0, resolve_1.inlineRef)(sch.schema, this.opts.inlineRefs))\n        return sch.schema;\n    return sch.validate ? sch : compileSchema.call(this, sch);\n}\n// Index of schema compilation in the currently compiled list\nfunction getCompilingSchema(schEnv) {\n    for (const sch of this._compilations) {\n        if (sameSchemaEnv(sch, schEnv))\n            return sch;\n    }\n}\nexports.getCompilingSchema = getCompilingSchema;\nfunction sameSchemaEnv(s1, s2) {\n    return s1.schema === s2.schema && s1.root === s2.root && s1.baseId === s2.baseId;\n}\n// resolve and compile the references ($ref)\n// TODO returns AnySchemaObject (if the schema can be inlined) or validation function\nfunction resolve(root, // information about the root schema for the current schema\nref // reference to resolve\n) {\n    let sch;\n    while (typeof (sch = this.refs[ref]) == \"string\")\n        ref = sch;\n    return sch || this.schemas[ref] || resolveSchema.call(this, root, ref);\n}\n// Resolve schema, its root and baseId\nfunction resolveSchema(root, // root object with properties schema, refs TODO below SchemaEnv is assigned to it\nref // reference to resolve\n) {\n    const p = this.opts.uriResolver.parse(ref);\n    const refPath = (0, resolve_1._getFullPath)(this.opts.uriResolver, p);\n    let baseId = (0, resolve_1.getFullPath)(this.opts.uriResolver, root.baseId, undefined);\n    // TODO `Object.keys(root.schema).length > 0` should not be needed - but removing breaks 2 tests\n    if (Object.keys(root.schema).length > 0 && refPath === baseId) {\n        return getJsonPointer.call(this, p, root);\n    }\n    const id = (0, resolve_1.normalizeId)(refPath);\n    const schOrRef = this.refs[id] || this.schemas[id];\n    if (typeof schOrRef == \"string\") {\n        const sch = resolveSchema.call(this, root, schOrRef);\n        if (typeof (sch === null || sch === void 0 ? void 0 : sch.schema) !== \"object\")\n            return;\n        return getJsonPointer.call(this, p, sch);\n    }\n    if (typeof (schOrRef === null || schOrRef === void 0 ? void 0 : schOrRef.schema) !== \"object\")\n        return;\n    if (!schOrRef.validate)\n        compileSchema.call(this, schOrRef);\n    if (id === (0, resolve_1.normalizeId)(ref)) {\n        const { schema } = schOrRef;\n        const { schemaId } = this.opts;\n        const schId = schema[schemaId];\n        if (schId)\n            baseId = (0, resolve_1.resolveUrl)(this.opts.uriResolver, baseId, schId);\n        return new SchemaEnv({ schema, schemaId, root, baseId });\n    }\n    return getJsonPointer.call(this, p, schOrRef);\n}\nexports.resolveSchema = resolveSchema;\nconst PREVENT_SCOPE_CHANGE = new Set([\n    \"properties\",\n    \"patternProperties\",\n    \"enum\",\n    \"dependencies\",\n    \"definitions\",\n]);\nfunction getJsonPointer(parsedRef, { baseId, schema, root }) {\n    var _a;\n    if (((_a = parsedRef.fragment) === null || _a === void 0 ? void 0 : _a[0]) !== \"/\")\n        return;\n    for (const part of parsedRef.fragment.slice(1).split(\"/\")) {\n        if (typeof schema === \"boolean\")\n            return;\n        const partSchema = schema[(0, util_1.unescapeFragment)(part)];\n        if (partSchema === undefined)\n            return;\n        schema = partSchema;\n        // TODO PREVENT_SCOPE_CHANGE could be defined in keyword def?\n        const schId = typeof schema === \"object\" && schema[this.opts.schemaId];\n        if (!PREVENT_SCOPE_CHANGE.has(part) && schId) {\n            baseId = (0, resolve_1.resolveUrl)(this.opts.uriResolver, baseId, schId);\n        }\n    }\n    let env;\n    if (typeof schema != \"boolean\" && schema.$ref && !(0, util_1.schemaHasRulesButRef)(schema, this.RULES)) {\n        const $ref = (0, resolve_1.resolveUrl)(this.opts.uriResolver, baseId, schema.$ref);\n        env = resolveSchema.call(this, root, $ref);\n    }\n    // even though resolution failed we need to return SchemaEnv to throw exception\n    // so that compileAsync loads missing schema.\n    const { schemaId } = this.opts;\n    env = env || new SchemaEnv({ schema, schemaId, root, baseId });\n    if (env.schema !== env.root.schema)\n        return env;\n    return undefined;\n}\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst codegen_1 = require(\"./codegen\");\nconst names = {\n    // validation function arguments\n    data: new codegen_1.Name(\"data\"),\n    // args passed from referencing schema\n    valCxt: new codegen_1.Name(\"valCxt\"),\n    instancePath: new codegen_1.Name(\"instancePath\"),\n    parentData: new codegen_1.Name(\"parentData\"),\n    parentDataProperty: new codegen_1.Name(\"parentDataProperty\"),\n    rootData: new codegen_1.Name(\"rootData\"),\n    dynamicAnchors: new codegen_1.Name(\"dynamicAnchors\"),\n    // function scoped variables\n    vErrors: new codegen_1.Name(\"vErrors\"),\n    errors: new codegen_1.Name(\"errors\"),\n    this: new codegen_1.Name(\"this\"),\n    // \"globals\"\n    self: new codegen_1.Name(\"self\"),\n    scope: new codegen_1.Name(\"scope\"),\n    // JTD serialize/parse name for JSON string and position\n    json: new codegen_1.Name(\"json\"),\n    jsonPos: new codegen_1.Name(\"jsonPos\"),\n    jsonLen: new codegen_1.Name(\"jsonLen\"),\n    jsonPart: new codegen_1.Name(\"jsonPart\"),\n};\nexports.default = names;\n//# sourceMappingURL=names.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst resolve_1 = require(\"./resolve\");\nclass MissingRefError extends Error {\n    constructor(resolver, baseId, ref, msg) {\n        super(msg || `can't resolve reference ${ref} from id ${baseId}`);\n        this.missingRef = (0, resolve_1.resolveUrl)(resolver, baseId, ref);\n        this.missingSchema = (0, resolve_1.normalizeId)((0, resolve_1.getFullPath)(resolver, this.missingRef));\n    }\n}\nexports.default = MissingRefError;\n//# sourceMappingURL=ref_error.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getSchemaRefs = exports.resolveUrl = exports.normalizeId = exports._getFullPath = exports.getFullPath = exports.inlineRef = void 0;\nconst util_1 = require(\"./util\");\nconst equal = require(\"fast-deep-equal\");\nconst traverse = require(\"json-schema-traverse\");\n// TODO refactor to use keyword definitions\nconst SIMPLE_INLINED = new Set([\n    \"type\",\n    \"format\",\n    \"pattern\",\n    \"maxLength\",\n    \"minLength\",\n    \"maxProperties\",\n    \"minProperties\",\n    \"maxItems\",\n    \"minItems\",\n    \"maximum\",\n    \"minimum\",\n    \"uniqueItems\",\n    \"multipleOf\",\n    \"required\",\n    \"enum\",\n    \"const\",\n]);\nfunction inlineRef(schema, limit = true) {\n    if (typeof schema == \"boolean\")\n        return true;\n    if (limit === true)\n        return !hasRef(schema);\n    if (!limit)\n        return false;\n    return countKeys(schema) <= limit;\n}\nexports.inlineRef = inlineRef;\nconst REF_KEYWORDS = new Set([\n    \"$ref\",\n    \"$recursiveRef\",\n    \"$recursiveAnchor\",\n    \"$dynamicRef\",\n    \"$dynamicAnchor\",\n]);\nfunction hasRef(schema) {\n    for (const key in schema) {\n        if (REF_KEYWORDS.has(key))\n            return true;\n        const sch = schema[key];\n        if (Array.isArray(sch) && sch.some(hasRef))\n            return true;\n        if (typeof sch == \"object\" && hasRef(sch))\n            return true;\n    }\n    return false;\n}\nfunction countKeys(schema) {\n    let count = 0;\n    for (const key in schema) {\n        if (key === \"$ref\")\n            return Infinity;\n        count++;\n        if (SIMPLE_INLINED.has(key))\n            continue;\n        if (typeof schema[key] == \"object\") {\n            (0, util_1.eachItem)(schema[key], (sch) => (count += countKeys(sch)));\n        }\n        if (count === Infinity)\n            return Infinity;\n    }\n    return count;\n}\nfunction getFullPath(resolver, id = \"\", normalize) {\n    if (normalize !== false)\n        id = normalizeId(id);\n    const p = resolver.parse(id);\n    return _getFullPath(resolver, p);\n}\nexports.getFullPath = getFullPath;\nfunction _getFullPath(resolver, p) {\n    const serialized = resolver.serialize(p);\n    return serialized.split(\"#\")[0] + \"#\";\n}\nexports._getFullPath = _getFullPath;\nconst TRAILING_SLASH_HASH = /#\\/?$/;\nfunction normalizeId(id) {\n    return id ? id.replace(TRAILING_SLASH_HASH, \"\") : \"\";\n}\nexports.normalizeId = normalizeId;\nfunction resolveUrl(resolver, baseId, id) {\n    id = normalizeId(id);\n    return resolver.resolve(baseId, id);\n}\nexports.resolveUrl = resolveUrl;\nconst ANCHOR = /^[a-z_][-a-z0-9._]*$/i;\nfunction getSchemaRefs(schema, baseId) {\n    if (typeof schema == \"boolean\")\n        return {};\n    const { schemaId, uriResolver } = this.opts;\n    const schId = normalizeId(schema[schemaId] || baseId);\n    const baseIds = { \"\": schId };\n    const pathPrefix = getFullPath(uriResolver, schId, false);\n    const localRefs = {};\n    const schemaRefs = new Set();\n    traverse(schema, { allKeys: true }, (sch, jsonPtr, _, parentJsonPtr) => {\n        if (parentJsonPtr === undefined)\n            return;\n        const fullPath = pathPrefix + jsonPtr;\n        let baseId = baseIds[parentJsonPtr];\n        if (typeof sch[schemaId] == \"string\")\n            baseId = addRef.call(this, sch[schemaId]);\n        addAnchor.call(this, sch.$anchor);\n        addAnchor.call(this, sch.$dynamicAnchor);\n        baseIds[jsonPtr] = baseId;\n        function addRef(ref) {\n            // eslint-disable-next-line @typescript-eslint/unbound-method\n            const _resolve = this.opts.uriResolver.resolve;\n            ref = normalizeId(baseId ? _resolve(baseId, ref) : ref);\n            if (schemaRefs.has(ref))\n                throw ambiguos(ref);\n            schemaRefs.add(ref);\n            let schOrRef = this.refs[ref];\n            if (typeof schOrRef == \"string\")\n                schOrRef = this.refs[schOrRef];\n            if (typeof schOrRef == \"object\") {\n                checkAmbiguosRef(sch, schOrRef.schema, ref);\n            }\n            else if (ref !== normalizeId(fullPath)) {\n                if (ref[0] === \"#\") {\n                    checkAmbiguosRef(sch, localRefs[ref], ref);\n                    localRefs[ref] = sch;\n                }\n                else {\n                    this.refs[ref] = fullPath;\n                }\n            }\n            return ref;\n        }\n        function addAnchor(anchor) {\n            if (typeof anchor == \"string\") {\n                if (!ANCHOR.test(anchor))\n                    throw new Error(`invalid anchor \"${anchor}\"`);\n                addRef.call(this, `#${anchor}`);\n            }\n        }\n    });\n    return localRefs;\n    function checkAmbiguosRef(sch1, sch2, ref) {\n        if (sch2 !== undefined && !equal(sch1, sch2))\n            throw ambiguos(ref);\n    }\n    function ambiguos(ref) {\n        return new Error(`reference \"${ref}\" resolves to more than one schema`);\n    }\n}\nexports.getSchemaRefs = getSchemaRefs;\n//# sourceMappingURL=resolve.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getRules = exports.isJSONType = void 0;\nconst _jsonTypes = [\"string\", \"number\", \"integer\", \"boolean\", \"null\", \"object\", \"array\"];\nconst jsonTypes = new Set(_jsonTypes);\nfunction isJSONType(x) {\n    return typeof x == \"string\" && jsonTypes.has(x);\n}\nexports.isJSONType = isJSONType;\nfunction getRules() {\n    const groups = {\n        number: { type: \"number\", rules: [] },\n        string: { type: \"string\", rules: [] },\n        array: { type: \"array\", rules: [] },\n        object: { type: \"object\", rules: [] },\n    };\n    return {\n        types: { ...groups, integer: true, boolean: true, null: true },\n        rules: [{ rules: [] }, groups.number, groups.string, groups.array, groups.object],\n        post: { rules: [] },\n        all: {},\n        keywords: {},\n    };\n}\nexports.getRules = getRules;\n//# sourceMappingURL=rules.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.checkStrictMode = exports.getErrorPath = exports.Type = exports.useFunc = exports.setEvaluated = exports.evaluatedPropsToName = exports.mergeEvaluated = exports.eachItem = exports.unescapeJsonPointer = exports.escapeJsonPointer = exports.escapeFragment = exports.unescapeFragment = exports.schemaRefOrVal = exports.schemaHasRulesButRef = exports.schemaHasRules = exports.checkUnknownRules = exports.alwaysValidSchema = exports.toHash = void 0;\nconst codegen_1 = require(\"./codegen\");\nconst code_1 = require(\"./codegen/code\");\n// TODO refactor to use Set\nfunction toHash(arr) {\n    const hash = {};\n    for (const item of arr)\n        hash[item] = true;\n    return hash;\n}\nexports.toHash = toHash;\nfunction alwaysValidSchema(it, schema) {\n    if (typeof schema == \"boolean\")\n        return schema;\n    if (Object.keys(schema).length === 0)\n        return true;\n    checkUnknownRules(it, schema);\n    return !schemaHasRules(schema, it.self.RULES.all);\n}\nexports.alwaysValidSchema = alwaysValidSchema;\nfunction checkUnknownRules(it, schema = it.schema) {\n    const { opts, self } = it;\n    if (!opts.strictSchema)\n        return;\n    if (typeof schema === \"boolean\")\n        return;\n    const rules = self.RULES.keywords;\n    for (const key in schema) {\n        if (!rules[key])\n            checkStrictMode(it, `unknown keyword: \"${key}\"`);\n    }\n}\nexports.checkUnknownRules = checkUnknownRules;\nfunction schemaHasRules(schema, rules) {\n    if (typeof schema == \"boolean\")\n        return !schema;\n    for (const key in schema)\n        if (rules[key])\n            return true;\n    return false;\n}\nexports.schemaHasRules = schemaHasRules;\nfunction schemaHasRulesButRef(schema, RULES) {\n    if (typeof schema == \"boolean\")\n        return !schema;\n    for (const key in schema)\n        if (key !== \"$ref\" && RULES.all[key])\n            return true;\n    return false;\n}\nexports.schemaHasRulesButRef = schemaHasRulesButRef;\nfunction schemaRefOrVal({ topSchemaRef, schemaPath }, schema, keyword, $data) {\n    if (!$data) {\n        if (typeof schema == \"number\" || typeof schema == \"boolean\")\n            return schema;\n        if (typeof schema == \"string\")\n            return (0, codegen_1._) `${schema}`;\n    }\n    return (0, codegen_1._) `${topSchemaRef}${schemaPath}${(0, codegen_1.getProperty)(keyword)}`;\n}\nexports.schemaRefOrVal = schemaRefOrVal;\nfunction unescapeFragment(str) {\n    return unescapeJsonPointer(decodeURIComponent(str));\n}\nexports.unescapeFragment = unescapeFragment;\nfunction escapeFragment(str) {\n    return encodeURIComponent(escapeJsonPointer(str));\n}\nexports.escapeFragment = escapeFragment;\nfunction escapeJsonPointer(str) {\n    if (typeof str == \"number\")\n        return `${str}`;\n    return str.replace(/~/g, \"~0\").replace(/\\//g, \"~1\");\n}\nexports.escapeJsonPointer = escapeJsonPointer;\nfunction unescapeJsonPointer(str) {\n    return str.replace(/~1/g, \"/\").replace(/~0/g, \"~\");\n}\nexports.unescapeJsonPointer = unescapeJsonPointer;\nfunction eachItem(xs, f) {\n    if (Array.isArray(xs)) {\n        for (const x of xs)\n            f(x);\n    }\n    else {\n        f(xs);\n    }\n}\nexports.eachItem = eachItem;\nfunction makeMergeEvaluated({ mergeNames, mergeToName, mergeValues, resultToName, }) {\n    return (gen, from, to, toName) => {\n        const res = to === undefined\n            ? from\n            : to instanceof codegen_1.Name\n                ? (from instanceof codegen_1.Name ? mergeNames(gen, from, to) : mergeToName(gen, from, to), to)\n                : from instanceof codegen_1.Name\n                    ? (mergeToName(gen, to, from), from)\n                    : mergeValues(from, to);\n        return toName === codegen_1.Name && !(res instanceof codegen_1.Name) ? resultToName(gen, res) : res;\n    };\n}\nexports.mergeEvaluated = {\n    props: makeMergeEvaluated({\n        mergeNames: (gen, from, to) => gen.if((0, codegen_1._) `${to} !== true && ${from} !== undefined`, () => {\n            gen.if((0, codegen_1._) `${from} === true`, () => gen.assign(to, true), () => gen.assign(to, (0, codegen_1._) `${to} || {}`).code((0, codegen_1._) `Object.assign(${to}, ${from})`));\n        }),\n        mergeToName: (gen, from, to) => gen.if((0, codegen_1._) `${to} !== true`, () => {\n            if (from === true) {\n                gen.assign(to, true);\n            }\n            else {\n                gen.assign(to, (0, codegen_1._) `${to} || {}`);\n                setEvaluated(gen, to, from);\n            }\n        }),\n        mergeValues: (from, to) => (from === true ? true : { ...from, ...to }),\n        resultToName: evaluatedPropsToName,\n    }),\n    items: makeMergeEvaluated({\n        mergeNames: (gen, from, to) => gen.if((0, codegen_1._) `${to} !== true && ${from} !== undefined`, () => gen.assign(to, (0, codegen_1._) `${from} === true ? true : ${to} > ${from} ? ${to} : ${from}`)),\n        mergeToName: (gen, from, to) => gen.if((0, codegen_1._) `${to} !== true`, () => gen.assign(to, from === true ? true : (0, codegen_1._) `${to} > ${from} ? ${to} : ${from}`)),\n        mergeValues: (from, to) => (from === true ? true : Math.max(from, to)),\n        resultToName: (gen, items) => gen.var(\"items\", items),\n    }),\n};\nfunction evaluatedPropsToName(gen, ps) {\n    if (ps === true)\n        return gen.var(\"props\", true);\n    const props = gen.var(\"props\", (0, codegen_1._) `{}`);\n    if (ps !== undefined)\n        setEvaluated(gen, props, ps);\n    return props;\n}\nexports.evaluatedPropsToName = evaluatedPropsToName;\nfunction setEvaluated(gen, props, ps) {\n    Object.keys(ps).forEach((p) => gen.assign((0, codegen_1._) `${props}${(0, codegen_1.getProperty)(p)}`, true));\n}\nexports.setEvaluated = setEvaluated;\nconst snippets = {};\nfunction useFunc(gen, f) {\n    return gen.scopeValue(\"func\", {\n        ref: f,\n        code: snippets[f.code] || (snippets[f.code] = new code_1._Code(f.code)),\n    });\n}\nexports.useFunc = useFunc;\nvar Type;\n(function (Type) {\n    Type[Type[\"Num\"] = 0] = \"Num\";\n    Type[Type[\"Str\"] = 1] = \"Str\";\n})(Type = exports.Type || (exports.Type = {}));\nfunction getErrorPath(dataProp, dataPropType, jsPropertySyntax) {\n    // let path\n    if (dataProp instanceof codegen_1.Name) {\n        const isNumber = dataPropType === Type.Num;\n        return jsPropertySyntax\n            ? isNumber\n                ? (0, codegen_1._) `\"[\" + ${dataProp} + \"]\"`\n                : (0, codegen_1._) `\"['\" + ${dataProp} + \"']\"`\n            : isNumber\n                ? (0, codegen_1._) `\"/\" + ${dataProp}`\n                : (0, codegen_1._) `\"/\" + ${dataProp}.replace(/~/g, \"~0\").replace(/\\\\//g, \"~1\")`; // TODO maybe use global escapePointer\n    }\n    return jsPropertySyntax ? (0, codegen_1.getProperty)(dataProp).toString() : \"/\" + escapeJsonPointer(dataProp);\n}\nexports.getErrorPath = getErrorPath;\nfunction checkStrictMode(it, msg, mode = it.opts.strictSchema) {\n    if (!mode)\n        return;\n    msg = `strict mode: ${msg}`;\n    if (mode === true)\n        throw new Error(msg);\n    it.self.logger.warn(msg);\n}\nexports.checkStrictMode = checkStrictMode;\n//# sourceMappingURL=util.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.shouldUseRule = exports.shouldUseGroup = exports.schemaHasRulesForType = void 0;\nfunction schemaHasRulesForType({ schema, self }, type) {\n    const group = self.RULES.types[type];\n    return group && group !== true && shouldUseGroup(schema, group);\n}\nexports.schemaHasRulesForType = schemaHasRulesForType;\nfunction shouldUseGroup(schema, group) {\n    return group.rules.some((rule) => shouldUseRule(schema, rule));\n}\nexports.shouldUseGroup = shouldUseGroup;\nfunction shouldUseRule(schema, rule) {\n    var _a;\n    return (schema[rule.keyword] !== undefined ||\n        ((_a = rule.definition.implements) === null || _a === void 0 ? void 0 : _a.some((kwd) => schema[kwd] !== undefined)));\n}\nexports.shouldUseRule = shouldUseRule;\n//# sourceMappingURL=applicability.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.boolOrEmptySchema = exports.topBoolOrEmptySchema = void 0;\nconst errors_1 = require(\"../errors\");\nconst codegen_1 = require(\"../codegen\");\nconst names_1 = require(\"../names\");\nconst boolError = {\n    message: \"boolean schema is false\",\n};\nfunction topBoolOrEmptySchema(it) {\n    const { gen, schema, validateName } = it;\n    if (schema === false) {\n        falseSchemaError(it, false);\n    }\n    else if (typeof schema == \"object\" && schema.$async === true) {\n        gen.return(names_1.default.data);\n    }\n    else {\n        gen.assign((0, codegen_1._) `${validateName}.errors`, null);\n        gen.return(true);\n    }\n}\nexports.topBoolOrEmptySchema = topBoolOrEmptySchema;\nfunction boolOrEmptySchema(it, valid) {\n    const { gen, schema } = it;\n    if (schema === false) {\n        gen.var(valid, false); // TODO var\n        falseSchemaError(it);\n    }\n    else {\n        gen.var(valid, true); // TODO var\n    }\n}\nexports.boolOrEmptySchema = boolOrEmptySchema;\nfunction falseSchemaError(it, overrideAllErrors) {\n    const { gen, data } = it;\n    // TODO maybe some other interface should be used for non-keyword validation errors...\n    const cxt = {\n        gen,\n        keyword: \"false schema\",\n        data,\n        schema: false,\n        schemaCode: false,\n        schemaValue: false,\n        params: {},\n        it,\n    };\n    (0, errors_1.reportError)(cxt, boolError, undefined, overrideAllErrors);\n}\n//# sourceMappingURL=boolSchema.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.reportTypeError = exports.checkDataTypes = exports.checkDataType = exports.coerceAndCheckDataType = exports.getJSONTypes = exports.getSchemaTypes = exports.DataType = void 0;\nconst rules_1 = require(\"../rules\");\nconst applicability_1 = require(\"./applicability\");\nconst errors_1 = require(\"../errors\");\nconst codegen_1 = require(\"../codegen\");\nconst util_1 = require(\"../util\");\nvar DataType;\n(function (DataType) {\n    DataType[DataType[\"Correct\"] = 0] = \"Correct\";\n    DataType[DataType[\"Wrong\"] = 1] = \"Wrong\";\n})(DataType = exports.DataType || (exports.DataType = {}));\nfunction getSchemaTypes(schema) {\n    const types = getJSONTypes(schema.type);\n    const hasNull = types.includes(\"null\");\n    if (hasNull) {\n        if (schema.nullable === false)\n            throw new Error(\"type: null contradicts nullable: false\");\n    }\n    else {\n        if (!types.length && schema.nullable !== undefined) {\n            throw new Error('\"nullable\" cannot be used without \"type\"');\n        }\n        if (schema.nullable === true)\n            types.push(\"null\");\n    }\n    return types;\n}\nexports.getSchemaTypes = getSchemaTypes;\nfunction getJSONTypes(ts) {\n    const types = Array.isArray(ts) ? ts : ts ? [ts] : [];\n    if (types.every(rules_1.isJSONType))\n        return types;\n    throw new Error(\"type must be JSONType or JSONType[]: \" + types.join(\",\"));\n}\nexports.getJSONTypes = getJSONTypes;\nfunction coerceAndCheckDataType(it, types) {\n    const { gen, data, opts } = it;\n    const coerceTo = coerceToTypes(types, opts.coerceTypes);\n    const checkTypes = types.length > 0 &&\n        !(coerceTo.length === 0 && types.length === 1 && (0, applicability_1.schemaHasRulesForType)(it, types[0]));\n    if (checkTypes) {\n        const wrongType = checkDataTypes(types, data, opts.strictNumbers, DataType.Wrong);\n        gen.if(wrongType, () => {\n            if (coerceTo.length)\n                coerceData(it, types, coerceTo);\n            else\n                reportTypeError(it);\n        });\n    }\n    return checkTypes;\n}\nexports.coerceAndCheckDataType = coerceAndCheckDataType;\nconst COERCIBLE = new Set([\"string\", \"number\", \"integer\", \"boolean\", \"null\"]);\nfunction coerceToTypes(types, coerceTypes) {\n    return coerceTypes\n        ? types.filter((t) => COERCIBLE.has(t) || (coerceTypes === \"array\" && t === \"array\"))\n        : [];\n}\nfunction coerceData(it, types, coerceTo) {\n    const { gen, data, opts } = it;\n    const dataType = gen.let(\"dataType\", (0, codegen_1._) `typeof ${data}`);\n    const coerced = gen.let(\"coerced\", (0, codegen_1._) `undefined`);\n    if (opts.coerceTypes === \"array\") {\n        gen.if((0, codegen_1._) `${dataType} == 'object' && Array.isArray(${data}) && ${data}.length == 1`, () => gen\n            .assign(data, (0, codegen_1._) `${data}[0]`)\n            .assign(dataType, (0, codegen_1._) `typeof ${data}`)\n            .if(checkDataTypes(types, data, opts.strictNumbers), () => gen.assign(coerced, data)));\n    }\n    gen.if((0, codegen_1._) `${coerced} !== undefined`);\n    for (const t of coerceTo) {\n        if (COERCIBLE.has(t) || (t === \"array\" && opts.coerceTypes === \"array\")) {\n            coerceSpecificType(t);\n        }\n    }\n    gen.else();\n    reportTypeError(it);\n    gen.endIf();\n    gen.if((0, codegen_1._) `${coerced} !== undefined`, () => {\n        gen.assign(data, coerced);\n        assignParentData(it, coerced);\n    });\n    function coerceSpecificType(t) {\n        switch (t) {\n            case \"string\":\n                gen\n                    .elseIf((0, codegen_1._) `${dataType} == \"number\" || ${dataType} == \"boolean\"`)\n                    .assign(coerced, (0, codegen_1._) `\"\" + ${data}`)\n                    .elseIf((0, codegen_1._) `${data} === null`)\n                    .assign(coerced, (0, codegen_1._) `\"\"`);\n                return;\n            case \"number\":\n                gen\n                    .elseIf((0, codegen_1._) `${dataType} == \"boolean\" || ${data} === null\n              || (${dataType} == \"string\" && ${data} && ${data} == +${data})`)\n                    .assign(coerced, (0, codegen_1._) `+${data}`);\n                return;\n            case \"integer\":\n                gen\n                    .elseIf((0, codegen_1._) `${dataType} === \"boolean\" || ${data} === null\n              || (${dataType} === \"string\" && ${data} && ${data} == +${data} && !(${data} % 1))`)\n                    .assign(coerced, (0, codegen_1._) `+${data}`);\n                return;\n            case \"boolean\":\n                gen\n                    .elseIf((0, codegen_1._) `${data} === \"false\" || ${data} === 0 || ${data} === null`)\n                    .assign(coerced, false)\n                    .elseIf((0, codegen_1._) `${data} === \"true\" || ${data} === 1`)\n                    .assign(coerced, true);\n                return;\n            case \"null\":\n                gen.elseIf((0, codegen_1._) `${data} === \"\" || ${data} === 0 || ${data} === false`);\n                gen.assign(coerced, null);\n                return;\n            case \"array\":\n                gen\n                    .elseIf((0, codegen_1._) `${dataType} === \"string\" || ${dataType} === \"number\"\n              || ${dataType} === \"boolean\" || ${data} === null`)\n                    .assign(coerced, (0, codegen_1._) `[${data}]`);\n        }\n    }\n}\nfunction assignParentData({ gen, parentData, parentDataProperty }, expr) {\n    // TODO use gen.property\n    gen.if((0, codegen_1._) `${parentData} !== undefined`, () => gen.assign((0, codegen_1._) `${parentData}[${parentDataProperty}]`, expr));\n}\nfunction checkDataType(dataType, data, strictNums, correct = DataType.Correct) {\n    const EQ = correct === DataType.Correct ? codegen_1.operators.EQ : codegen_1.operators.NEQ;\n    let cond;\n    switch (dataType) {\n        case \"null\":\n            return (0, codegen_1._) `${data} ${EQ} null`;\n        case \"array\":\n            cond = (0, codegen_1._) `Array.isArray(${data})`;\n            break;\n        case \"object\":\n            cond = (0, codegen_1._) `${data} && typeof ${data} == \"object\" && !Array.isArray(${data})`;\n            break;\n        case \"integer\":\n            cond = numCond((0, codegen_1._) `!(${data} % 1) && !isNaN(${data})`);\n            break;\n        case \"number\":\n            cond = numCond();\n            break;\n        default:\n            return (0, codegen_1._) `typeof ${data} ${EQ} ${dataType}`;\n    }\n    return correct === DataType.Correct ? cond : (0, codegen_1.not)(cond);\n    function numCond(_cond = codegen_1.nil) {\n        return (0, codegen_1.and)((0, codegen_1._) `typeof ${data} == \"number\"`, _cond, strictNums ? (0, codegen_1._) `isFinite(${data})` : codegen_1.nil);\n    }\n}\nexports.checkDataType = checkDataType;\nfunction checkDataTypes(dataTypes, data, strictNums, correct) {\n    if (dataTypes.length === 1) {\n        return checkDataType(dataTypes[0], data, strictNums, correct);\n    }\n    let cond;\n    const types = (0, util_1.toHash)(dataTypes);\n    if (types.array && types.object) {\n        const notObj = (0, codegen_1._) `typeof ${data} != \"object\"`;\n        cond = types.null ? notObj : (0, codegen_1._) `!${data} || ${notObj}`;\n        delete types.null;\n        delete types.array;\n        delete types.object;\n    }\n    else {\n        cond = codegen_1.nil;\n    }\n    if (types.number)\n        delete types.integer;\n    for (const t in types)\n        cond = (0, codegen_1.and)(cond, checkDataType(t, data, strictNums, correct));\n    return cond;\n}\nexports.checkDataTypes = checkDataTypes;\nconst typeError = {\n    message: ({ schema }) => `must be ${schema}`,\n    params: ({ schema, schemaValue }) => typeof schema == \"string\" ? (0, codegen_1._) `{type: ${schema}}` : (0, codegen_1._) `{type: ${schemaValue}}`,\n};\nfunction reportTypeError(it) {\n    const cxt = getTypeErrorContext(it);\n    (0, errors_1.reportError)(cxt, typeError);\n}\nexports.reportTypeError = reportTypeError;\nfunction getTypeErrorContext(it) {\n    const { gen, data, schema } = it;\n    const schemaCode = (0, util_1.schemaRefOrVal)(it, schema, \"type\");\n    return {\n        gen,\n        keyword: \"type\",\n        data,\n        schema: schema.type,\n        schemaCode,\n        schemaValue: schemaCode,\n        parentSchema: schema,\n        params: {},\n        it,\n    };\n}\n//# sourceMappingURL=dataType.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.assignDefaults = void 0;\nconst codegen_1 = require(\"../codegen\");\nconst util_1 = require(\"../util\");\nfunction assignDefaults(it, ty) {\n    const { properties, items } = it.schema;\n    if (ty === \"object\" && properties) {\n        for (const key in properties) {\n            assignDefault(it, key, properties[key].default);\n        }\n    }\n    else if (ty === \"array\" && Array.isArray(items)) {\n        items.forEach((sch, i) => assignDefault(it, i, sch.default));\n    }\n}\nexports.assignDefaults = assignDefaults;\nfunction assignDefault(it, prop, defaultValue) {\n    const { gen, compositeRule, data, opts } = it;\n    if (defaultValue === undefined)\n        return;\n    const childData = (0, codegen_1._) `${data}${(0, codegen_1.getProperty)(prop)}`;\n    if (compositeRule) {\n        (0, util_1.checkStrictMode)(it, `default is ignored for: ${childData}`);\n        return;\n    }\n    let condition = (0, codegen_1._) `${childData} === undefined`;\n    if (opts.useDefaults === \"empty\") {\n        condition = (0, codegen_1._) `${condition} || ${childData} === null || ${childData} === \"\"`;\n    }\n    // `${childData} === undefined` +\n    // (opts.useDefaults === \"empty\" ? ` || ${childData} === null || ${childData} === \"\"` : \"\")\n    gen.if(condition, (0, codegen_1._) `${childData} = ${(0, codegen_1.stringify)(defaultValue)}`);\n}\n//# sourceMappingURL=defaults.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getData = exports.KeywordCxt = exports.validateFunctionCode = void 0;\nconst boolSchema_1 = require(\"./boolSchema\");\nconst dataType_1 = require(\"./dataType\");\nconst applicability_1 = require(\"./applicability\");\nconst dataType_2 = require(\"./dataType\");\nconst defaults_1 = require(\"./defaults\");\nconst keyword_1 = require(\"./keyword\");\nconst subschema_1 = require(\"./subschema\");\nconst codegen_1 = require(\"../codegen\");\nconst names_1 = require(\"../names\");\nconst resolve_1 = require(\"../resolve\");\nconst util_1 = require(\"../util\");\nconst errors_1 = require(\"../errors\");\n// schema compilation - generates validation function, subschemaCode (below) is used for subschemas\nfunction validateFunctionCode(it) {\n    if (isSchemaObj(it)) {\n        checkKeywords(it);\n        if (schemaCxtHasRules(it)) {\n            topSchemaObjCode(it);\n            return;\n        }\n    }\n    validateFunction(it, () => (0, boolSchema_1.topBoolOrEmptySchema)(it));\n}\nexports.validateFunctionCode = validateFunctionCode;\nfunction validateFunction({ gen, validateName, schema, schemaEnv, opts }, body) {\n    if (opts.code.es5) {\n        gen.func(validateName, (0, codegen_1._) `${names_1.default.data}, ${names_1.default.valCxt}`, schemaEnv.$async, () => {\n            gen.code((0, codegen_1._) `\"use strict\"; ${funcSourceUrl(schema, opts)}`);\n            destructureValCxtES5(gen, opts);\n            gen.code(body);\n        });\n    }\n    else {\n        gen.func(validateName, (0, codegen_1._) `${names_1.default.data}, ${destructureValCxt(opts)}`, schemaEnv.$async, () => gen.code(funcSourceUrl(schema, opts)).code(body));\n    }\n}\nfunction destructureValCxt(opts) {\n    return (0, codegen_1._) `{${names_1.default.instancePath}=\"\", ${names_1.default.parentData}, ${names_1.default.parentDataProperty}, ${names_1.default.rootData}=${names_1.default.data}${opts.dynamicRef ? (0, codegen_1._) `, ${names_1.default.dynamicAnchors}={}` : codegen_1.nil}}={}`;\n}\nfunction destructureValCxtES5(gen, opts) {\n    gen.if(names_1.default.valCxt, () => {\n        gen.var(names_1.default.instancePath, (0, codegen_1._) `${names_1.default.valCxt}.${names_1.default.instancePath}`);\n        gen.var(names_1.default.parentData, (0, codegen_1._) `${names_1.default.valCxt}.${names_1.default.parentData}`);\n        gen.var(names_1.default.parentDataProperty, (0, codegen_1._) `${names_1.default.valCxt}.${names_1.default.parentDataProperty}`);\n        gen.var(names_1.default.rootData, (0, codegen_1._) `${names_1.default.valCxt}.${names_1.default.rootData}`);\n        if (opts.dynamicRef)\n            gen.var(names_1.default.dynamicAnchors, (0, codegen_1._) `${names_1.default.valCxt}.${names_1.default.dynamicAnchors}`);\n    }, () => {\n        gen.var(names_1.default.instancePath, (0, codegen_1._) `\"\"`);\n        gen.var(names_1.default.parentData, (0, codegen_1._) `undefined`);\n        gen.var(names_1.default.parentDataProperty, (0, codegen_1._) `undefined`);\n        gen.var(names_1.default.rootData, names_1.default.data);\n        if (opts.dynamicRef)\n            gen.var(names_1.default.dynamicAnchors, (0, codegen_1._) `{}`);\n    });\n}\nfunction topSchemaObjCode(it) {\n    const { schema, opts, gen } = it;\n    validateFunction(it, () => {\n        if (opts.$comment && schema.$comment)\n            commentKeyword(it);\n        checkNoDefault(it);\n        gen.let(names_1.default.vErrors, null);\n        gen.let(names_1.default.errors, 0);\n        if (opts.unevaluated)\n            resetEvaluated(it);\n        typeAndKeywords(it);\n        returnResults(it);\n    });\n    return;\n}\nfunction resetEvaluated(it) {\n    // TODO maybe some hook to execute it in the end to check whether props/items are Name, as in assignEvaluated\n    const { gen, validateName } = it;\n    it.evaluated = gen.const(\"evaluated\", (0, codegen_1._) `${validateName}.evaluated`);\n    gen.if((0, codegen_1._) `${it.evaluated}.dynamicProps`, () => gen.assign((0, codegen_1._) `${it.evaluated}.props`, (0, codegen_1._) `undefined`));\n    gen.if((0, codegen_1._) `${it.evaluated}.dynamicItems`, () => gen.assign((0, codegen_1._) `${it.evaluated}.items`, (0, codegen_1._) `undefined`));\n}\nfunction funcSourceUrl(schema, opts) {\n    const schId = typeof schema == \"object\" && schema[opts.schemaId];\n    return schId && (opts.code.source || opts.code.process) ? (0, codegen_1._) `/*# sourceURL=${schId} */` : codegen_1.nil;\n}\n// schema compilation - this function is used recursively to generate code for sub-schemas\nfunction subschemaCode(it, valid) {\n    if (isSchemaObj(it)) {\n        checkKeywords(it);\n        if (schemaCxtHasRules(it)) {\n            subSchemaObjCode(it, valid);\n            return;\n        }\n    }\n    (0, boolSchema_1.boolOrEmptySchema)(it, valid);\n}\nfunction schemaCxtHasRules({ schema, self }) {\n    if (typeof schema == \"boolean\")\n        return !schema;\n    for (const key in schema)\n        if (self.RULES.all[key])\n            return true;\n    return false;\n}\nfunction isSchemaObj(it) {\n    return typeof it.schema != \"boolean\";\n}\nfunction subSchemaObjCode(it, valid) {\n    const { schema, gen, opts } = it;\n    if (opts.$comment && schema.$comment)\n        commentKeyword(it);\n    updateContext(it);\n    checkAsyncSchema(it);\n    const errsCount = gen.const(\"_errs\", names_1.default.errors);\n    typeAndKeywords(it, errsCount);\n    // TODO var\n    gen.var(valid, (0, codegen_1._) `${errsCount} === ${names_1.default.errors}`);\n}\nfunction checkKeywords(it) {\n    (0, util_1.checkUnknownRules)(it);\n    checkRefsAndKeywords(it);\n}\nfunction typeAndKeywords(it, errsCount) {\n    if (it.opts.jtd)\n        return schemaKeywords(it, [], false, errsCount);\n    const types = (0, dataType_1.getSchemaTypes)(it.schema);\n    const checkedTypes = (0, dataType_1.coerceAndCheckDataType)(it, types);\n    schemaKeywords(it, types, !checkedTypes, errsCount);\n}\nfunction checkRefsAndKeywords(it) {\n    const { schema, errSchemaPath, opts, self } = it;\n    if (schema.$ref && opts.ignoreKeywordsWithRef && (0, util_1.schemaHasRulesButRef)(schema, self.RULES)) {\n        self.logger.warn(`$ref: keywords ignored in schema at path \"${errSchemaPath}\"`);\n    }\n}\nfunction checkNoDefault(it) {\n    const { schema, opts } = it;\n    if (schema.default !== undefined && opts.useDefaults && opts.strictSchema) {\n        (0, util_1.checkStrictMode)(it, \"default is ignored in the schema root\");\n    }\n}\nfunction updateContext(it) {\n    const schId = it.schema[it.opts.schemaId];\n    if (schId)\n        it.baseId = (0, resolve_1.resolveUrl)(it.opts.uriResolver, it.baseId, schId);\n}\nfunction checkAsyncSchema(it) {\n    if (it.schema.$async && !it.schemaEnv.$async)\n        throw new Error(\"async schema in sync schema\");\n}\nfunction commentKeyword({ gen, schemaEnv, schema, errSchemaPath, opts }) {\n    const msg = schema.$comment;\n    if (opts.$comment === true) {\n        gen.code((0, codegen_1._) `${names_1.default.self}.logger.log(${msg})`);\n    }\n    else if (typeof opts.$comment == \"function\") {\n        const schemaPath = (0, codegen_1.str) `${errSchemaPath}/$comment`;\n        const rootName = gen.scopeValue(\"root\", { ref: schemaEnv.root });\n        gen.code((0, codegen_1._) `${names_1.default.self}.opts.$comment(${msg}, ${schemaPath}, ${rootName}.schema)`);\n    }\n}\nfunction returnResults(it) {\n    const { gen, schemaEnv, validateName, ValidationError, opts } = it;\n    if (schemaEnv.$async) {\n        // TODO assign unevaluated\n        gen.if((0, codegen_1._) `${names_1.default.errors} === 0`, () => gen.return(names_1.default.data), () => gen.throw((0, codegen_1._) `new ${ValidationError}(${names_1.default.vErrors})`));\n    }\n    else {\n        gen.assign((0, codegen_1._) `${validateName}.errors`, names_1.default.vErrors);\n        if (opts.unevaluated)\n            assignEvaluated(it);\n        gen.return((0, codegen_1._) `${names_1.default.errors} === 0`);\n    }\n}\nfunction assignEvaluated({ gen, evaluated, props, items }) {\n    if (props instanceof codegen_1.Name)\n        gen.assign((0, codegen_1._) `${evaluated}.props`, props);\n    if (items instanceof codegen_1.Name)\n        gen.assign((0, codegen_1._) `${evaluated}.items`, items);\n}\nfunction schemaKeywords(it, types, typeErrors, errsCount) {\n    const { gen, schema, data, allErrors, opts, self } = it;\n    const { RULES } = self;\n    if (schema.$ref && (opts.ignoreKeywordsWithRef || !(0, util_1.schemaHasRulesButRef)(schema, RULES))) {\n        gen.block(() => keywordCode(it, \"$ref\", RULES.all.$ref.definition)); // TODO typecast\n        return;\n    }\n    if (!opts.jtd)\n        checkStrictTypes(it, types);\n    gen.block(() => {\n        for (const group of RULES.rules)\n            groupKeywords(group);\n        groupKeywords(RULES.post);\n    });\n    function groupKeywords(group) {\n        if (!(0, applicability_1.shouldUseGroup)(schema, group))\n            return;\n        if (group.type) {\n            gen.if((0, dataType_2.checkDataType)(group.type, data, opts.strictNumbers));\n            iterateKeywords(it, group);\n            if (types.length === 1 && types[0] === group.type && typeErrors) {\n                gen.else();\n                (0, dataType_2.reportTypeError)(it);\n            }\n            gen.endIf();\n        }\n        else {\n            iterateKeywords(it, group);\n        }\n        // TODO make it \"ok\" call?\n        if (!allErrors)\n            gen.if((0, codegen_1._) `${names_1.default.errors} === ${errsCount || 0}`);\n    }\n}\nfunction iterateKeywords(it, group) {\n    const { gen, schema, opts: { useDefaults }, } = it;\n    if (useDefaults)\n        (0, defaults_1.assignDefaults)(it, group.type);\n    gen.block(() => {\n        for (const rule of group.rules) {\n            if ((0, applicability_1.shouldUseRule)(schema, rule)) {\n                keywordCode(it, rule.keyword, rule.definition, group.type);\n            }\n        }\n    });\n}\nfunction checkStrictTypes(it, types) {\n    if (it.schemaEnv.meta || !it.opts.strictTypes)\n        return;\n    checkContextTypes(it, types);\n    if (!it.opts.allowUnionTypes)\n        checkMultipleTypes(it, types);\n    checkKeywordTypes(it, it.dataTypes);\n}\nfunction checkContextTypes(it, types) {\n    if (!types.length)\n        return;\n    if (!it.dataTypes.length) {\n        it.dataTypes = types;\n        return;\n    }\n    types.forEach((t) => {\n        if (!includesType(it.dataTypes, t)) {\n            strictTypesError(it, `type \"${t}\" not allowed by context \"${it.dataTypes.join(\",\")}\"`);\n        }\n    });\n    it.dataTypes = it.dataTypes.filter((t) => includesType(types, t));\n}\nfunction checkMultipleTypes(it, ts) {\n    if (ts.length > 1 && !(ts.length === 2 && ts.includes(\"null\"))) {\n        strictTypesError(it, \"use allowUnionTypes to allow union type keyword\");\n    }\n}\nfunction checkKeywordTypes(it, ts) {\n    const rules = it.self.RULES.all;\n    for (const keyword in rules) {\n        const rule = rules[keyword];\n        if (typeof rule == \"object\" && (0, applicability_1.shouldUseRule)(it.schema, rule)) {\n            const { type } = rule.definition;\n            if (type.length && !type.some((t) => hasApplicableType(ts, t))) {\n                strictTypesError(it, `missing type \"${type.join(\",\")}\" for keyword \"${keyword}\"`);\n            }\n        }\n    }\n}\nfunction hasApplicableType(schTs, kwdT) {\n    return schTs.includes(kwdT) || (kwdT === \"number\" && schTs.includes(\"integer\"));\n}\nfunction includesType(ts, t) {\n    return ts.includes(t) || (t === \"integer\" && ts.includes(\"number\"));\n}\nfunction strictTypesError(it, msg) {\n    const schemaPath = it.schemaEnv.baseId + it.errSchemaPath;\n    msg += ` at \"${schemaPath}\" (strictTypes)`;\n    (0, util_1.checkStrictMode)(it, msg, it.opts.strictTypes);\n}\nclass KeywordCxt {\n    constructor(it, def, keyword) {\n        (0, keyword_1.validateKeywordUsage)(it, def, keyword);\n        this.gen = it.gen;\n        this.allErrors = it.allErrors;\n        this.keyword = keyword;\n        this.data = it.data;\n        this.schema = it.schema[keyword];\n        this.$data = def.$data && it.opts.$data && this.schema && this.schema.$data;\n        this.schemaValue = (0, util_1.schemaRefOrVal)(it, this.schema, keyword, this.$data);\n        this.schemaType = def.schemaType;\n        this.parentSchema = it.schema;\n        this.params = {};\n        this.it = it;\n        this.def = def;\n        if (this.$data) {\n            this.schemaCode = it.gen.const(\"vSchema\", getData(this.$data, it));\n        }\n        else {\n            this.schemaCode = this.schemaValue;\n            if (!(0, keyword_1.validSchemaType)(this.schema, def.schemaType, def.allowUndefined)) {\n                throw new Error(`${keyword} value must be ${JSON.stringify(def.schemaType)}`);\n            }\n        }\n        if (\"code\" in def ? def.trackErrors : def.errors !== false) {\n            this.errsCount = it.gen.const(\"_errs\", names_1.default.errors);\n        }\n    }\n    result(condition, successAction, failAction) {\n        this.failResult((0, codegen_1.not)(condition), successAction, failAction);\n    }\n    failResult(condition, successAction, failAction) {\n        this.gen.if(condition);\n        if (failAction)\n            failAction();\n        else\n            this.error();\n        if (successAction) {\n            this.gen.else();\n            successAction();\n            if (this.allErrors)\n                this.gen.endIf();\n        }\n        else {\n            if (this.allErrors)\n                this.gen.endIf();\n            else\n                this.gen.else();\n        }\n    }\n    pass(condition, failAction) {\n        this.failResult((0, codegen_1.not)(condition), undefined, failAction);\n    }\n    fail(condition) {\n        if (condition === undefined) {\n            this.error();\n            if (!this.allErrors)\n                this.gen.if(false); // this branch will be removed by gen.optimize\n            return;\n        }\n        this.gen.if(condition);\n        this.error();\n        if (this.allErrors)\n            this.gen.endIf();\n        else\n            this.gen.else();\n    }\n    fail$data(condition) {\n        if (!this.$data)\n            return this.fail(condition);\n        const { schemaCode } = this;\n        this.fail((0, codegen_1._) `${schemaCode} !== undefined && (${(0, codegen_1.or)(this.invalid$data(), condition)})`);\n    }\n    error(append, errorParams, errorPaths) {\n        if (errorParams) {\n            this.setParams(errorParams);\n            this._error(append, errorPaths);\n            this.setParams({});\n            return;\n        }\n        this._error(append, errorPaths);\n    }\n    _error(append, errorPaths) {\n        ;\n        (append ? errors_1.reportExtraError : errors_1.reportError)(this, this.def.error, errorPaths);\n    }\n    $dataError() {\n        (0, errors_1.reportError)(this, this.def.$dataError || errors_1.keyword$DataError);\n    }\n    reset() {\n        if (this.errsCount === undefined)\n            throw new Error('add \"trackErrors\" to keyword definition');\n        (0, errors_1.resetErrorsCount)(this.gen, this.errsCount);\n    }\n    ok(cond) {\n        if (!this.allErrors)\n            this.gen.if(cond);\n    }\n    setParams(obj, assign) {\n        if (assign)\n            Object.assign(this.params, obj);\n        else\n            this.params = obj;\n    }\n    block$data(valid, codeBlock, $dataValid = codegen_1.nil) {\n        this.gen.block(() => {\n            this.check$data(valid, $dataValid);\n            codeBlock();\n        });\n    }\n    check$data(valid = codegen_1.nil, $dataValid = codegen_1.nil) {\n        if (!this.$data)\n            return;\n        const { gen, schemaCode, schemaType, def } = this;\n        gen.if((0, codegen_1.or)((0, codegen_1._) `${schemaCode} === undefined`, $dataValid));\n        if (valid !== codegen_1.nil)\n            gen.assign(valid, true);\n        if (schemaType.length || def.validateSchema) {\n            gen.elseIf(this.invalid$data());\n            this.$dataError();\n            if (valid !== codegen_1.nil)\n                gen.assign(valid, false);\n        }\n        gen.else();\n    }\n    invalid$data() {\n        const { gen, schemaCode, schemaType, def, it } = this;\n        return (0, codegen_1.or)(wrong$DataType(), invalid$DataSchema());\n        function wrong$DataType() {\n            if (schemaType.length) {\n                /* istanbul ignore if */\n                if (!(schemaCode instanceof codegen_1.Name))\n                    throw new Error(\"ajv implementation error\");\n                const st = Array.isArray(schemaType) ? schemaType : [schemaType];\n                return (0, codegen_1._) `${(0, dataType_2.checkDataTypes)(st, schemaCode, it.opts.strictNumbers, dataType_2.DataType.Wrong)}`;\n            }\n            return codegen_1.nil;\n        }\n        function invalid$DataSchema() {\n            if (def.validateSchema) {\n                const validateSchemaRef = gen.scopeValue(\"validate$data\", { ref: def.validateSchema }); // TODO value.code for standalone\n                return (0, codegen_1._) `!${validateSchemaRef}(${schemaCode})`;\n            }\n            return codegen_1.nil;\n        }\n    }\n    subschema(appl, valid) {\n        const subschema = (0, subschema_1.getSubschema)(this.it, appl);\n        (0, subschema_1.extendSubschemaData)(subschema, this.it, appl);\n        (0, subschema_1.extendSubschemaMode)(subschema, appl);\n        const nextContext = { ...this.it, ...subschema, items: undefined, props: undefined };\n        subschemaCode(nextContext, valid);\n        return nextContext;\n    }\n    mergeEvaluated(schemaCxt, toName) {\n        const { it, gen } = this;\n        if (!it.opts.unevaluated)\n            return;\n        if (it.props !== true && schemaCxt.props !== undefined) {\n            it.props = util_1.mergeEvaluated.props(gen, schemaCxt.props, it.props, toName);\n        }\n        if (it.items !== true && schemaCxt.items !== undefined) {\n            it.items = util_1.mergeEvaluated.items(gen, schemaCxt.items, it.items, toName);\n        }\n    }\n    mergeValidEvaluated(schemaCxt, valid) {\n        const { it, gen } = this;\n        if (it.opts.unevaluated && (it.props !== true || it.items !== true)) {\n            gen.if(valid, () => this.mergeEvaluated(schemaCxt, codegen_1.Name));\n            return true;\n        }\n    }\n}\nexports.KeywordCxt = KeywordCxt;\nfunction keywordCode(it, keyword, def, ruleType) {\n    const cxt = new KeywordCxt(it, def, keyword);\n    if (\"code\" in def) {\n        def.code(cxt, ruleType);\n    }\n    else if (cxt.$data && def.validate) {\n        (0, keyword_1.funcKeywordCode)(cxt, def);\n    }\n    else if (\"macro\" in def) {\n        (0, keyword_1.macroKeywordCode)(cxt, def);\n    }\n    else if (def.compile || def.validate) {\n        (0, keyword_1.funcKeywordCode)(cxt, def);\n    }\n}\nconst JSON_POINTER = /^\\/(?:[^~]|~0|~1)*$/;\nconst RELATIVE_JSON_POINTER = /^([0-9]+)(#|\\/(?:[^~]|~0|~1)*)?$/;\nfunction getData($data, { dataLevel, dataNames, dataPathArr }) {\n    let jsonPointer;\n    let data;\n    if ($data === \"\")\n        return names_1.default.rootData;\n    if ($data[0] === \"/\") {\n        if (!JSON_POINTER.test($data))\n            throw new Error(`Invalid JSON-pointer: ${$data}`);\n        jsonPointer = $data;\n        data = names_1.default.rootData;\n    }\n    else {\n        const matches = RELATIVE_JSON_POINTER.exec($data);\n        if (!matches)\n            throw new Error(`Invalid JSON-pointer: ${$data}`);\n        const up = +matches[1];\n        jsonPointer = matches[2];\n        if (jsonPointer === \"#\") {\n            if (up >= dataLevel)\n                throw new Error(errorMsg(\"property/index\", up));\n            return dataPathArr[dataLevel - up];\n        }\n        if (up > dataLevel)\n            throw new Error(errorMsg(\"data\", up));\n        data = dataNames[dataLevel - up];\n        if (!jsonPointer)\n            return data;\n    }\n    let expr = data;\n    const segments = jsonPointer.split(\"/\");\n    for (const segment of segments) {\n        if (segment) {\n            data = (0, codegen_1._) `${data}${(0, codegen_1.getProperty)((0, util_1.unescapeJsonPointer)(segment))}`;\n            expr = (0, codegen_1._) `${expr} && ${data}`;\n        }\n    }\n    return expr;\n    function errorMsg(pointerType, up) {\n        return `Cannot access ${pointerType} ${up} levels up, current level is ${dataLevel}`;\n    }\n}\nexports.getData = getData;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.validateKeywordUsage = exports.validSchemaType = exports.funcKeywordCode = exports.macroKeywordCode = void 0;\nconst codegen_1 = require(\"../codegen\");\nconst names_1 = require(\"../names\");\nconst code_1 = require(\"../../vocabularies/code\");\nconst errors_1 = require(\"../errors\");\nfunction macroKeywordCode(cxt, def) {\n    const { gen, keyword, schema, parentSchema, it } = cxt;\n    const macroSchema = def.macro.call(it.self, schema, parentSchema, it);\n    const schemaRef = useKeyword(gen, keyword, macroSchema);\n    if (it.opts.validateSchema !== false)\n        it.self.validateSchema(macroSchema, true);\n    const valid = gen.name(\"valid\");\n    cxt.subschema({\n        schema: macroSchema,\n        schemaPath: codegen_1.nil,\n        errSchemaPath: `${it.errSchemaPath}/${keyword}`,\n        topSchemaRef: schemaRef,\n        compositeRule: true,\n    }, valid);\n    cxt.pass(valid, () => cxt.error(true));\n}\nexports.macroKeywordCode = macroKeywordCode;\nfunction funcKeywordCode(cxt, def) {\n    var _a;\n    const { gen, keyword, schema, parentSchema, $data, it } = cxt;\n    checkAsyncKeyword(it, def);\n    const validate = !$data && def.compile ? def.compile.call(it.self, schema, parentSchema, it) : def.validate;\n    const validateRef = useKeyword(gen, keyword, validate);\n    const valid = gen.let(\"valid\");\n    cxt.block$data(valid, validateKeyword);\n    cxt.ok((_a = def.valid) !== null && _a !== void 0 ? _a : valid);\n    function validateKeyword() {\n        if (def.errors === false) {\n            assignValid();\n            if (def.modifying)\n                modifyData(cxt);\n            reportErrs(() => cxt.error());\n        }\n        else {\n            const ruleErrs = def.async ? validateAsync() : validateSync();\n            if (def.modifying)\n                modifyData(cxt);\n            reportErrs(() => addErrs(cxt, ruleErrs));\n        }\n    }\n    function validateAsync() {\n        const ruleErrs = gen.let(\"ruleErrs\", null);\n        gen.try(() => assignValid((0, codegen_1._) `await `), (e) => gen.assign(valid, false).if((0, codegen_1._) `${e} instanceof ${it.ValidationError}`, () => gen.assign(ruleErrs, (0, codegen_1._) `${e}.errors`), () => gen.throw(e)));\n        return ruleErrs;\n    }\n    function validateSync() {\n        const validateErrs = (0, codegen_1._) `${validateRef}.errors`;\n        gen.assign(validateErrs, null);\n        assignValid(codegen_1.nil);\n        return validateErrs;\n    }\n    function assignValid(_await = def.async ? (0, codegen_1._) `await ` : codegen_1.nil) {\n        const passCxt = it.opts.passContext ? names_1.default.this : names_1.default.self;\n        const passSchema = !((\"compile\" in def && !$data) || def.schema === false);\n        gen.assign(valid, (0, codegen_1._) `${_await}${(0, code_1.callValidateCode)(cxt, validateRef, passCxt, passSchema)}`, def.modifying);\n    }\n    function reportErrs(errors) {\n        var _a;\n        gen.if((0, codegen_1.not)((_a = def.valid) !== null && _a !== void 0 ? _a : valid), errors);\n    }\n}\nexports.funcKeywordCode = funcKeywordCode;\nfunction modifyData(cxt) {\n    const { gen, data, it } = cxt;\n    gen.if(it.parentData, () => gen.assign(data, (0, codegen_1._) `${it.parentData}[${it.parentDataProperty}]`));\n}\nfunction addErrs(cxt, errs) {\n    const { gen } = cxt;\n    gen.if((0, codegen_1._) `Array.isArray(${errs})`, () => {\n        gen\n            .assign(names_1.default.vErrors, (0, codegen_1._) `${names_1.default.vErrors} === null ? ${errs} : ${names_1.default.vErrors}.concat(${errs})`)\n            .assign(names_1.default.errors, (0, codegen_1._) `${names_1.default.vErrors}.length`);\n        (0, errors_1.extendErrors)(cxt);\n    }, () => cxt.error());\n}\nfunction checkAsyncKeyword({ schemaEnv }, def) {\n    if (def.async && !schemaEnv.$async)\n        throw new Error(\"async keyword in sync schema\");\n}\nfunction useKeyword(gen, keyword, result) {\n    if (result === undefined)\n        throw new Error(`keyword \"${keyword}\" failed to compile`);\n    return gen.scopeValue(\"keyword\", typeof result == \"function\" ? { ref: result } : { ref: result, code: (0, codegen_1.stringify)(result) });\n}\nfunction validSchemaType(schema, schemaType, allowUndefined = false) {\n    // TODO add tests\n    return (!schemaType.length ||\n        schemaType.some((st) => st === \"array\"\n            ? Array.isArray(schema)\n            : st === \"object\"\n                ? schema && typeof schema == \"object\" && !Array.isArray(schema)\n                : typeof schema == st || (allowUndefined && typeof schema == \"undefined\")));\n}\nexports.validSchemaType = validSchemaType;\nfunction validateKeywordUsage({ schema, opts, self, errSchemaPath }, def, keyword) {\n    /* istanbul ignore if */\n    if (Array.isArray(def.keyword) ? !def.keyword.includes(keyword) : def.keyword !== keyword) {\n        throw new Error(\"ajv implementation error\");\n    }\n    const deps = def.dependencies;\n    if (deps === null || deps === void 0 ? void 0 : deps.some((kwd) => !Object.prototype.hasOwnProperty.call(schema, kwd))) {\n        throw new Error(`parent schema must have dependencies of ${keyword}: ${deps.join(\",\")}`);\n    }\n    if (def.validateSchema) {\n        const valid = def.validateSchema(schema[keyword]);\n        if (!valid) {\n            const msg = `keyword \"${keyword}\" value is invalid at path \"${errSchemaPath}\": ` +\n                self.errorsText(def.validateSchema.errors);\n            if (opts.validateSchema === \"log\")\n                self.logger.error(msg);\n            else\n                throw new Error(msg);\n        }\n    }\n}\nexports.validateKeywordUsage = validateKeywordUsage;\n//# sourceMappingURL=keyword.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.extendSubschemaMode = exports.extendSubschemaData = exports.getSubschema = void 0;\nconst codegen_1 = require(\"../codegen\");\nconst util_1 = require(\"../util\");\nfunction getSubschema(it, { keyword, schemaProp, schema, schemaPath, errSchemaPath, topSchemaRef }) {\n    if (keyword !== undefined && schema !== undefined) {\n        throw new Error('both \"keyword\" and \"schema\" passed, only one allowed');\n    }\n    if (keyword !== undefined) {\n        const sch = it.schema[keyword];\n        return schemaProp === undefined\n            ? {\n                schema: sch,\n                schemaPath: (0, codegen_1._) `${it.schemaPath}${(0, codegen_1.getProperty)(keyword)}`,\n                errSchemaPath: `${it.errSchemaPath}/${keyword}`,\n            }\n            : {\n                schema: sch[schemaProp],\n                schemaPath: (0, codegen_1._) `${it.schemaPath}${(0, codegen_1.getProperty)(keyword)}${(0, codegen_1.getProperty)(schemaProp)}`,\n                errSchemaPath: `${it.errSchemaPath}/${keyword}/${(0, util_1.escapeFragment)(schemaProp)}`,\n            };\n    }\n    if (schema !== undefined) {\n        if (schemaPath === undefined || errSchemaPath === undefined || topSchemaRef === undefined) {\n            throw new Error('\"schemaPath\", \"errSchemaPath\" and \"topSchemaRef\" are required with \"schema\"');\n        }\n        return {\n            schema,\n            schemaPath,\n            topSchemaRef,\n            errSchemaPath,\n        };\n    }\n    throw new Error('either \"keyword\" or \"schema\" must be passed');\n}\nexports.getSubschema = getSubschema;\nfunction extendSubschemaData(subschema, it, { dataProp, dataPropType: dpType, data, dataTypes, propertyName }) {\n    if (data !== undefined && dataProp !== undefined) {\n        throw new Error('both \"data\" and \"dataProp\" passed, only one allowed');\n    }\n    const { gen } = it;\n    if (dataProp !== undefined) {\n        const { errorPath, dataPathArr, opts } = it;\n        const nextData = gen.let(\"data\", (0, codegen_1._) `${it.data}${(0, codegen_1.getProperty)(dataProp)}`, true);\n        dataContextProps(nextData);\n        subschema.errorPath = (0, codegen_1.str) `${errorPath}${(0, util_1.getErrorPath)(dataProp, dpType, opts.jsPropertySyntax)}`;\n        subschema.parentDataProperty = (0, codegen_1._) `${dataProp}`;\n        subschema.dataPathArr = [...dataPathArr, subschema.parentDataProperty];\n    }\n    if (data !== undefined) {\n        const nextData = data instanceof codegen_1.Name ? data : gen.let(\"data\", data, true); // replaceable if used once?\n        dataContextProps(nextData);\n        if (propertyName !== undefined)\n            subschema.propertyName = propertyName;\n        // TODO something is possibly wrong here with not changing parentDataProperty and not appending dataPathArr\n    }\n    if (dataTypes)\n        subschema.dataTypes = dataTypes;\n    function dataContextProps(_nextData) {\n        subschema.data = _nextData;\n        subschema.dataLevel = it.dataLevel + 1;\n        subschema.dataTypes = [];\n        it.definedProperties = new Set();\n        subschema.parentData = it.data;\n        subschema.dataNames = [...it.dataNames, _nextData];\n    }\n}\nexports.extendSubschemaData = extendSubschemaData;\nfunction extendSubschemaMode(subschema, { jtdDiscriminator, jtdMetadata, compositeRule, createErrors, allErrors }) {\n    if (compositeRule !== undefined)\n        subschema.compositeRule = compositeRule;\n    if (createErrors !== undefined)\n        subschema.createErrors = createErrors;\n    if (allErrors !== undefined)\n        subschema.allErrors = allErrors;\n    subschema.jtdDiscriminator = jtdDiscriminator; // not inherited\n    subschema.jtdMetadata = jtdMetadata; // not inherited\n}\nexports.extendSubschemaMode = extendSubschemaMode;\n//# sourceMappingURL=subschema.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.CodeGen = exports.Name = exports.nil = exports.stringify = exports.str = exports._ = exports.KeywordCxt = void 0;\nvar validate_1 = require(\"./compile/validate\");\nObject.defineProperty(exports, \"KeywordCxt\", { enumerable: true, get: function () { return validate_1.KeywordCxt; } });\nvar codegen_1 = require(\"./compile/codegen\");\nObject.defineProperty(exports, \"_\", { enumerable: true, get: function () { return codegen_1._; } });\nObject.defineProperty(exports, \"str\", { enumerable: true, get: function () { return codegen_1.str; } });\nObject.defineProperty(exports, \"stringify\", { enumerable: true, get: function () { return codegen_1.stringify; } });\nObject.defineProperty(exports, \"nil\", { enumerable: true, get: function () { return codegen_1.nil; } });\nObject.defineProperty(exports, \"Name\", { enumerable: true, get: function () { return codegen_1.Name; } });\nObject.defineProperty(exports, \"CodeGen\", { enumerable: true, get: function () { return codegen_1.CodeGen; } });\nconst validation_error_1 = require(\"./runtime/validation_error\");\nconst ref_error_1 = require(\"./compile/ref_error\");\nconst rules_1 = require(\"./compile/rules\");\nconst compile_1 = require(\"./compile\");\nconst codegen_2 = require(\"./compile/codegen\");\nconst resolve_1 = require(\"./compile/resolve\");\nconst dataType_1 = require(\"./compile/validate/dataType\");\nconst util_1 = require(\"./compile/util\");\nconst $dataRefSchema = require(\"./refs/data.json\");\nconst uri_1 = require(\"./runtime/uri\");\nconst defaultRegExp = (str, flags) => new RegExp(str, flags);\ndefaultRegExp.code = \"new RegExp\";\nconst META_IGNORE_OPTIONS = [\"removeAdditional\", \"useDefaults\", \"coerceTypes\"];\nconst EXT_SCOPE_NAMES = new Set([\n    \"validate\",\n    \"serialize\",\n    \"parse\",\n    \"wrapper\",\n    \"root\",\n    \"schema\",\n    \"keyword\",\n    \"pattern\",\n    \"formats\",\n    \"validate$data\",\n    \"func\",\n    \"obj\",\n    \"Error\",\n]);\nconst removedOptions = {\n    errorDataPath: \"\",\n    format: \"`validateFormats: false` can be used instead.\",\n    nullable: '\"nullable\" keyword is supported by default.',\n    jsonPointers: \"Deprecated jsPropertySyntax can be used instead.\",\n    extendRefs: \"Deprecated ignoreKeywordsWithRef can be used instead.\",\n    missingRefs: \"Pass empty schema with $id that should be ignored to ajv.addSchema.\",\n    processCode: \"Use option `code: {process: (code, schemaEnv: object) => string}`\",\n    sourceCode: \"Use option `code: {source: true}`\",\n    strictDefaults: \"It is default now, see option `strict`.\",\n    strictKeywords: \"It is default now, see option `strict`.\",\n    uniqueItems: '\"uniqueItems\" keyword is always validated.',\n    unknownFormats: \"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).\",\n    cache: \"Map is used as cache, schema object as key.\",\n    serialize: \"Map is used as cache, schema object as key.\",\n    ajvErrors: \"It is default now.\",\n};\nconst deprecatedOptions = {\n    ignoreKeywordsWithRef: \"\",\n    jsPropertySyntax: \"\",\n    unicode: '\"minLength\"/\"maxLength\" account for unicode characters by default.',\n};\nconst MAX_EXPRESSION = 200;\n// eslint-disable-next-line complexity\nfunction requiredOptions(o) {\n    var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o, _p, _q, _r, _s, _t, _u, _v, _w, _x, _y, _z, _0;\n    const s = o.strict;\n    const _optz = (_a = o.code) === null || _a === void 0 ? void 0 : _a.optimize;\n    const optimize = _optz === true || _optz === undefined ? 1 : _optz || 0;\n    const regExp = (_c = (_b = o.code) === null || _b === void 0 ? void 0 : _b.regExp) !== null && _c !== void 0 ? _c : defaultRegExp;\n    const uriResolver = (_d = o.uriResolver) !== null && _d !== void 0 ? _d : uri_1.default;\n    return {\n        strictSchema: (_f = (_e = o.strictSchema) !== null && _e !== void 0 ? _e : s) !== null && _f !== void 0 ? _f : true,\n        strictNumbers: (_h = (_g = o.strictNumbers) !== null && _g !== void 0 ? _g : s) !== null && _h !== void 0 ? _h : true,\n        strictTypes: (_k = (_j = o.strictTypes) !== null && _j !== void 0 ? _j : s) !== null && _k !== void 0 ? _k : \"log\",\n        strictTuples: (_m = (_l = o.strictTuples) !== null && _l !== void 0 ? _l : s) !== null && _m !== void 0 ? _m : \"log\",\n        strictRequired: (_p = (_o = o.strictRequired) !== null && _o !== void 0 ? _o : s) !== null && _p !== void 0 ? _p : false,\n        code: o.code ? { ...o.code, optimize, regExp } : { optimize, regExp },\n        loopRequired: (_q = o.loopRequired) !== null && _q !== void 0 ? _q : MAX_EXPRESSION,\n        loopEnum: (_r = o.loopEnum) !== null && _r !== void 0 ? _r : MAX_EXPRESSION,\n        meta: (_s = o.meta) !== null && _s !== void 0 ? _s : true,\n        messages: (_t = o.messages) !== null && _t !== void 0 ? _t : true,\n        inlineRefs: (_u = o.inlineRefs) !== null && _u !== void 0 ? _u : true,\n        schemaId: (_v = o.schemaId) !== null && _v !== void 0 ? _v : \"$id\",\n        addUsedSchema: (_w = o.addUsedSchema) !== null && _w !== void 0 ? _w : true,\n        validateSchema: (_x = o.validateSchema) !== null && _x !== void 0 ? _x : true,\n        validateFormats: (_y = o.validateFormats) !== null && _y !== void 0 ? _y : true,\n        unicodeRegExp: (_z = o.unicodeRegExp) !== null && _z !== void 0 ? _z : true,\n        int32range: (_0 = o.int32range) !== null && _0 !== void 0 ? _0 : true,\n        uriResolver: uriResolver,\n    };\n}\nclass Ajv {\n    constructor(opts = {}) {\n        this.schemas = {};\n        this.refs = {};\n        this.formats = {};\n        this._compilations = new Set();\n        this._loading = {};\n        this._cache = new Map();\n        opts = this.opts = { ...opts, ...requiredOptions(opts) };\n        const { es5, lines } = this.opts.code;\n        this.scope = new codegen_2.ValueScope({ scope: {}, prefixes: EXT_SCOPE_NAMES, es5, lines });\n        this.logger = getLogger(opts.logger);\n        const formatOpt = opts.validateFormats;\n        opts.validateFormats = false;\n        this.RULES = (0, rules_1.getRules)();\n        checkOptions.call(this, removedOptions, opts, \"NOT SUPPORTED\");\n        checkOptions.call(this, deprecatedOptions, opts, \"DEPRECATED\", \"warn\");\n        this._metaOpts = getMetaSchemaOptions.call(this);\n        if (opts.formats)\n            addInitialFormats.call(this);\n        this._addVocabularies();\n        this._addDefaultMetaSchema();\n        if (opts.keywords)\n            addInitialKeywords.call(this, opts.keywords);\n        if (typeof opts.meta == \"object\")\n            this.addMetaSchema(opts.meta);\n        addInitialSchemas.call(this);\n        opts.validateFormats = formatOpt;\n    }\n    _addVocabularies() {\n        this.addKeyword(\"$async\");\n    }\n    _addDefaultMetaSchema() {\n        const { $data, meta, schemaId } = this.opts;\n        let _dataRefSchema = $dataRefSchema;\n        if (schemaId === \"id\") {\n            _dataRefSchema = { ...$dataRefSchema };\n            _dataRefSchema.id = _dataRefSchema.$id;\n            delete _dataRefSchema.$id;\n        }\n        if (meta && $data)\n            this.addMetaSchema(_dataRefSchema, _dataRefSchema[schemaId], false);\n    }\n    defaultMeta() {\n        const { meta, schemaId } = this.opts;\n        return (this.opts.defaultMeta = typeof meta == \"object\" ? meta[schemaId] || meta : undefined);\n    }\n    validate(schemaKeyRef, // key, ref or schema object\n    data // to be validated\n    ) {\n        let v;\n        if (typeof schemaKeyRef == \"string\") {\n            v = this.getSchema(schemaKeyRef);\n            if (!v)\n                throw new Error(`no schema with key or ref \"${schemaKeyRef}\"`);\n        }\n        else {\n            v = this.compile(schemaKeyRef);\n        }\n        const valid = v(data);\n        if (!(\"$async\" in v))\n            this.errors = v.errors;\n        return valid;\n    }\n    compile(schema, _meta) {\n        const sch = this._addSchema(schema, _meta);\n        return (sch.validate || this._compileSchemaEnv(sch));\n    }\n    compileAsync(schema, meta) {\n        if (typeof this.opts.loadSchema != \"function\") {\n            throw new Error(\"options.loadSchema should be a function\");\n        }\n        const { loadSchema } = this.opts;\n        return runCompileAsync.call(this, schema, meta);\n        async function runCompileAsync(_schema, _meta) {\n            await loadMetaSchema.call(this, _schema.$schema);\n            const sch = this._addSchema(_schema, _meta);\n            return sch.validate || _compileAsync.call(this, sch);\n        }\n        async function loadMetaSchema($ref) {\n            if ($ref && !this.getSchema($ref)) {\n                await runCompileAsync.call(this, { $ref }, true);\n            }\n        }\n        async function _compileAsync(sch) {\n            try {\n                return this._compileSchemaEnv(sch);\n            }\n            catch (e) {\n                if (!(e instanceof ref_error_1.default))\n                    throw e;\n                checkLoaded.call(this, e);\n                await loadMissingSchema.call(this, e.missingSchema);\n                return _compileAsync.call(this, sch);\n            }\n        }\n        function checkLoaded({ missingSchema: ref, missingRef }) {\n            if (this.refs[ref]) {\n                throw new Error(`AnySchema ${ref} is loaded but ${missingRef} cannot be resolved`);\n            }\n        }\n        async function loadMissingSchema(ref) {\n            const _schema = await _loadSchema.call(this, ref);\n            if (!this.refs[ref])\n                await loadMetaSchema.call(this, _schema.$schema);\n            if (!this.refs[ref])\n                this.addSchema(_schema, ref, meta);\n        }\n        async function _loadSchema(ref) {\n            const p = this._loading[ref];\n            if (p)\n                return p;\n            try {\n                return await (this._loading[ref] = loadSchema(ref));\n            }\n            finally {\n                delete this._loading[ref];\n            }\n        }\n    }\n    // Adds schema to the instance\n    addSchema(schema, // If array is passed, `key` will be ignored\n    key, // Optional schema key. Can be passed to `validate` method instead of schema object or id/ref. One schema per instance can have empty `id` and `key`.\n    _meta, // true if schema is a meta-schema. Used internally, addMetaSchema should be used instead.\n    _validateSchema = this.opts.validateSchema // false to skip schema validation. Used internally, option validateSchema should be used instead.\n    ) {\n        if (Array.isArray(schema)) {\n            for (const sch of schema)\n                this.addSchema(sch, undefined, _meta, _validateSchema);\n            return this;\n        }\n        let id;\n        if (typeof schema === \"object\") {\n            const { schemaId } = this.opts;\n            id = schema[schemaId];\n            if (id !== undefined && typeof id != \"string\") {\n                throw new Error(`schema ${schemaId} must be string`);\n            }\n        }\n        key = (0, resolve_1.normalizeId)(key || id);\n        this._checkUnique(key);\n        this.schemas[key] = this._addSchema(schema, _meta, key, _validateSchema, true);\n        return this;\n    }\n    // Add schema that will be used to validate other schemas\n    // options in META_IGNORE_OPTIONS are alway set to false\n    addMetaSchema(schema, key, // schema key\n    _validateSchema = this.opts.validateSchema // false to skip schema validation, can be used to override validateSchema option for meta-schema\n    ) {\n        this.addSchema(schema, key, true, _validateSchema);\n        return this;\n    }\n    //  Validate schema against its meta-schema\n    validateSchema(schema, throwOrLogError) {\n        if (typeof schema == \"boolean\")\n            return true;\n        let $schema;\n        $schema = schema.$schema;\n        if ($schema !== undefined && typeof $schema != \"string\") {\n            throw new Error(\"$schema must be a string\");\n        }\n        $schema = $schema || this.opts.defaultMeta || this.defaultMeta();\n        if (!$schema) {\n            this.logger.warn(\"meta-schema not available\");\n            this.errors = null;\n            return true;\n        }\n        const valid = this.validate($schema, schema);\n        if (!valid && throwOrLogError) {\n            const message = \"schema is invalid: \" + this.errorsText();\n            if (this.opts.validateSchema === \"log\")\n                this.logger.error(message);\n            else\n                throw new Error(message);\n        }\n        return valid;\n    }\n    // Get compiled schema by `key` or `ref`.\n    // (`key` that was passed to `addSchema` or full schema reference - `schema.$id` or resolved id)\n    getSchema(keyRef) {\n        let sch;\n        while (typeof (sch = getSchEnv.call(this, keyRef)) == \"string\")\n            keyRef = sch;\n        if (sch === undefined) {\n            const { schemaId } = this.opts;\n            const root = new compile_1.SchemaEnv({ schema: {}, schemaId });\n            sch = compile_1.resolveSchema.call(this, root, keyRef);\n            if (!sch)\n                return;\n            this.refs[keyRef] = sch;\n        }\n        return (sch.validate || this._compileSchemaEnv(sch));\n    }\n    // Remove cached schema(s).\n    // If no parameter is passed all schemas but meta-schemas are removed.\n    // If RegExp is passed all schemas with key/id matching pattern but meta-schemas are removed.\n    // Even if schema is referenced by other schemas it still can be removed as other schemas have local references.\n    removeSchema(schemaKeyRef) {\n        if (schemaKeyRef instanceof RegExp) {\n            this._removeAllSchemas(this.schemas, schemaKeyRef);\n            this._removeAllSchemas(this.refs, schemaKeyRef);\n            return this;\n        }\n        switch (typeof schemaKeyRef) {\n            case \"undefined\":\n                this._removeAllSchemas(this.schemas);\n                this._removeAllSchemas(this.refs);\n                this._cache.clear();\n                return this;\n            case \"string\": {\n                const sch = getSchEnv.call(this, schemaKeyRef);\n                if (typeof sch == \"object\")\n                    this._cache.delete(sch.schema);\n                delete this.schemas[schemaKeyRef];\n                delete this.refs[schemaKeyRef];\n                return this;\n            }\n            case \"object\": {\n                const cacheKey = schemaKeyRef;\n                this._cache.delete(cacheKey);\n                let id = schemaKeyRef[this.opts.schemaId];\n                if (id) {\n                    id = (0, resolve_1.normalizeId)(id);\n                    delete this.schemas[id];\n                    delete this.refs[id];\n                }\n                return this;\n            }\n            default:\n                throw new Error(\"ajv.removeSchema: invalid parameter\");\n        }\n    }\n    // add \"vocabulary\" - a collection of keywords\n    addVocabulary(definitions) {\n        for (const def of definitions)\n            this.addKeyword(def);\n        return this;\n    }\n    addKeyword(kwdOrDef, def // deprecated\n    ) {\n        let keyword;\n        if (typeof kwdOrDef == \"string\") {\n            keyword = kwdOrDef;\n            if (typeof def == \"object\") {\n                this.logger.warn(\"these parameters are deprecated, see docs for addKeyword\");\n                def.keyword = keyword;\n            }\n        }\n        else if (typeof kwdOrDef == \"object\" && def === undefined) {\n            def = kwdOrDef;\n            keyword = def.keyword;\n            if (Array.isArray(keyword) && !keyword.length) {\n                throw new Error(\"addKeywords: keyword must be string or non-empty array\");\n            }\n        }\n        else {\n            throw new Error(\"invalid addKeywords parameters\");\n        }\n        checkKeyword.call(this, keyword, def);\n        if (!def) {\n            (0, util_1.eachItem)(keyword, (kwd) => addRule.call(this, kwd));\n            return this;\n        }\n        keywordMetaschema.call(this, def);\n        const definition = {\n            ...def,\n            type: (0, dataType_1.getJSONTypes)(def.type),\n            schemaType: (0, dataType_1.getJSONTypes)(def.schemaType),\n        };\n        (0, util_1.eachItem)(keyword, definition.type.length === 0\n            ? (k) => addRule.call(this, k, definition)\n            : (k) => definition.type.forEach((t) => addRule.call(this, k, definition, t)));\n        return this;\n    }\n    getKeyword(keyword) {\n        const rule = this.RULES.all[keyword];\n        return typeof rule == \"object\" ? rule.definition : !!rule;\n    }\n    // Remove keyword\n    removeKeyword(keyword) {\n        // TODO return type should be Ajv\n        const { RULES } = this;\n        delete RULES.keywords[keyword];\n        delete RULES.all[keyword];\n        for (const group of RULES.rules) {\n            const i = group.rules.findIndex((rule) => rule.keyword === keyword);\n            if (i >= 0)\n                group.rules.splice(i, 1);\n        }\n        return this;\n    }\n    // Add format\n    addFormat(name, format) {\n        if (typeof format == \"string\")\n            format = new RegExp(format);\n        this.formats[name] = format;\n        return this;\n    }\n    errorsText(errors = this.errors, // optional array of validation errors\n    { separator = \", \", dataVar = \"data\" } = {} // optional options with properties `separator` and `dataVar`\n    ) {\n        if (!errors || errors.length === 0)\n            return \"No errors\";\n        return errors\n            .map((e) => `${dataVar}${e.instancePath} ${e.message}`)\n            .reduce((text, msg) => text + separator + msg);\n    }\n    $dataMetaSchema(metaSchema, keywordsJsonPointers) {\n        const rules = this.RULES.all;\n        metaSchema = JSON.parse(JSON.stringify(metaSchema));\n        for (const jsonPointer of keywordsJsonPointers) {\n            const segments = jsonPointer.split(\"/\").slice(1); // first segment is an empty string\n            let keywords = metaSchema;\n            for (const seg of segments)\n                keywords = keywords[seg];\n            for (const key in rules) {\n                const rule = rules[key];\n                if (typeof rule != \"object\")\n                    continue;\n                const { $data } = rule.definition;\n                const schema = keywords[key];\n                if ($data && schema)\n                    keywords[key] = schemaOrData(schema);\n            }\n        }\n        return metaSchema;\n    }\n    _removeAllSchemas(schemas, regex) {\n        for (const keyRef in schemas) {\n            const sch = schemas[keyRef];\n            if (!regex || regex.test(keyRef)) {\n                if (typeof sch == \"string\") {\n                    delete schemas[keyRef];\n                }\n                else if (sch && !sch.meta) {\n                    this._cache.delete(sch.schema);\n                    delete schemas[keyRef];\n                }\n            }\n        }\n    }\n    _addSchema(schema, meta, baseId, validateSchema = this.opts.validateSchema, addSchema = this.opts.addUsedSchema) {\n        let id;\n        const { schemaId } = this.opts;\n        if (typeof schema == \"object\") {\n            id = schema[schemaId];\n        }\n        else {\n            if (this.opts.jtd)\n                throw new Error(\"schema must be object\");\n            else if (typeof schema != \"boolean\")\n                throw new Error(\"schema must be object or boolean\");\n        }\n        let sch = this._cache.get(schema);\n        if (sch !== undefined)\n            return sch;\n        baseId = (0, resolve_1.normalizeId)(id || baseId);\n        const localRefs = resolve_1.getSchemaRefs.call(this, schema, baseId);\n        sch = new compile_1.SchemaEnv({ schema, schemaId, meta, baseId, localRefs });\n        this._cache.set(sch.schema, sch);\n        if (addSchema && !baseId.startsWith(\"#\")) {\n            // TODO atm it is allowed to overwrite schemas without id (instead of not adding them)\n            if (baseId)\n                this._checkUnique(baseId);\n            this.refs[baseId] = sch;\n        }\n        if (validateSchema)\n            this.validateSchema(schema, true);\n        return sch;\n    }\n    _checkUnique(id) {\n        if (this.schemas[id] || this.refs[id]) {\n            throw new Error(`schema with key or id \"${id}\" already exists`);\n        }\n    }\n    _compileSchemaEnv(sch) {\n        if (sch.meta)\n            this._compileMetaSchema(sch);\n        else\n            compile_1.compileSchema.call(this, sch);\n        /* istanbul ignore if */\n        if (!sch.validate)\n            throw new Error(\"ajv implementation error\");\n        return sch.validate;\n    }\n    _compileMetaSchema(sch) {\n        const currentOpts = this.opts;\n        this.opts = this._metaOpts;\n        try {\n            compile_1.compileSchema.call(this, sch);\n        }\n        finally {\n            this.opts = currentOpts;\n        }\n    }\n}\nexports.default = Ajv;\nAjv.ValidationError = validation_error_1.default;\nAjv.MissingRefError = ref_error_1.default;\nfunction checkOptions(checkOpts, options, msg, log = \"error\") {\n    for (const key in checkOpts) {\n        const opt = key;\n        if (opt in options)\n            this.logger[log](`${msg}: option ${key}. ${checkOpts[opt]}`);\n    }\n}\nfunction getSchEnv(keyRef) {\n    keyRef = (0, resolve_1.normalizeId)(keyRef); // TODO tests fail without this line\n    return this.schemas[keyRef] || this.refs[keyRef];\n}\nfunction addInitialSchemas() {\n    const optsSchemas = this.opts.schemas;\n    if (!optsSchemas)\n        return;\n    if (Array.isArray(optsSchemas))\n        this.addSchema(optsSchemas);\n    else\n        for (const key in optsSchemas)\n            this.addSchema(optsSchemas[key], key);\n}\nfunction addInitialFormats() {\n    for (const name in this.opts.formats) {\n        const format = this.opts.formats[name];\n        if (format)\n            this.addFormat(name, format);\n    }\n}\nfunction addInitialKeywords(defs) {\n    if (Array.isArray(defs)) {\n        this.addVocabulary(defs);\n        return;\n    }\n    this.logger.warn(\"keywords option as map is deprecated, pass array\");\n    for (const keyword in defs) {\n        const def = defs[keyword];\n        if (!def.keyword)\n            def.keyword = keyword;\n        this.addKeyword(def);\n    }\n}\nfunction getMetaSchemaOptions() {\n    const metaOpts = { ...this.opts };\n    for (const opt of META_IGNORE_OPTIONS)\n        delete metaOpts[opt];\n    return metaOpts;\n}\nconst noLogs = { log() { }, warn() { }, error() { } };\nfunction getLogger(logger) {\n    if (logger === false)\n        return noLogs;\n    if (logger === undefined)\n        return console;\n    if (logger.log && logger.warn && logger.error)\n        return logger;\n    throw new Error(\"logger must implement log, warn and error methods\");\n}\nconst KEYWORD_NAME = /^[a-z_$][a-z0-9_$:-]*$/i;\nfunction checkKeyword(keyword, def) {\n    const { RULES } = this;\n    (0, util_1.eachItem)(keyword, (kwd) => {\n        if (RULES.keywords[kwd])\n            throw new Error(`Keyword ${kwd} is already defined`);\n        if (!KEYWORD_NAME.test(kwd))\n            throw new Error(`Keyword ${kwd} has invalid name`);\n    });\n    if (!def)\n        return;\n    if (def.$data && !(\"code\" in def || \"validate\" in def)) {\n        throw new Error('$data keyword must have \"code\" or \"validate\" function');\n    }\n}\nfunction addRule(keyword, definition, dataType) {\n    var _a;\n    const post = definition === null || definition === void 0 ? void 0 : definition.post;\n    if (dataType && post)\n        throw new Error('keyword with \"post\" flag cannot have \"type\"');\n    const { RULES } = this;\n    let ruleGroup = post ? RULES.post : RULES.rules.find(({ type: t }) => t === dataType);\n    if (!ruleGroup) {\n        ruleGroup = { type: dataType, rules: [] };\n        RULES.rules.push(ruleGroup);\n    }\n    RULES.keywords[keyword] = true;\n    if (!definition)\n        return;\n    const rule = {\n        keyword,\n        definition: {\n            ...definition,\n            type: (0, dataType_1.getJSONTypes)(definition.type),\n            schemaType: (0, dataType_1.getJSONTypes)(definition.schemaType),\n        },\n    };\n    if (definition.before)\n        addBeforeRule.call(this, ruleGroup, rule, definition.before);\n    else\n        ruleGroup.rules.push(rule);\n    RULES.all[keyword] = rule;\n    (_a = definition.implements) === null || _a === void 0 ? void 0 : _a.forEach((kwd) => this.addKeyword(kwd));\n}\nfunction addBeforeRule(ruleGroup, rule, before) {\n    const i = ruleGroup.rules.findIndex((_rule) => _rule.keyword === before);\n    if (i >= 0) {\n        ruleGroup.rules.splice(i, 0, rule);\n    }\n    else {\n        ruleGroup.rules.push(rule);\n        this.logger.warn(`rule ${before} is not defined`);\n    }\n}\nfunction keywordMetaschema(def) {\n    let { metaSchema } = def;\n    if (metaSchema === undefined)\n        return;\n    if (def.$data && this.opts.$data)\n        metaSchema = schemaOrData(metaSchema);\n    def.validateSchema = this.compile(metaSchema, true);\n}\nconst $dataRef = {\n    $ref: \"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#\",\n};\nfunction schemaOrData(schema) {\n    return { anyOf: [schema, $dataRef] };\n}\n//# sourceMappingURL=core.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// https://github.com/ajv-validator/ajv/issues/889\nconst equal = require(\"fast-deep-equal\");\nequal.code = 'require(\"ajv/dist/runtime/equal\").default';\nexports.default = equal;\n//# sourceMappingURL=equal.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// https://mathiasbynens.be/notes/javascript-encoding\n// https://github.com/bestiejs/punycode.js - punycode.ucs2.decode\nfunction ucs2length(str) {\n    const len = str.length;\n    let length = 0;\n    let pos = 0;\n    let value;\n    while (pos < len) {\n        length++;\n        value = str.charCodeAt(pos++);\n        if (value >= 0xd800 && value <= 0xdbff && pos < len) {\n            // high surrogate, and there is a next character\n            value = str.charCodeAt(pos);\n            if ((value & 0xfc00) === 0xdc00)\n                pos++; // low surrogate\n        }\n    }\n    return length;\n}\nexports.default = ucs2length;\nucs2length.code = 'require(\"ajv/dist/runtime/ucs2length\").default';\n//# sourceMappingURL=ucs2length.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst uri = require(\"uri-js\");\nuri.code = 'require(\"ajv/dist/runtime/uri\").default';\nexports.default = uri;\n//# sourceMappingURL=uri.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nclass ValidationError extends Error {\n    constructor(errors) {\n        super(\"validation failed\");\n        this.errors = errors;\n        this.ajv = this.validation = true;\n    }\n}\nexports.default = ValidationError;\n//# sourceMappingURL=validation_error.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.validateAdditionalItems = void 0;\nconst codegen_1 = require(\"../../compile/codegen\");\nconst util_1 = require(\"../../compile/util\");\nconst error = {\n    message: ({ params: { len } }) => (0, codegen_1.str) `must NOT have more than ${len} items`,\n    params: ({ params: { len } }) => (0, codegen_1._) `{limit: ${len}}`,\n};\nconst def = {\n    keyword: \"additionalItems\",\n    type: \"array\",\n    schemaType: [\"boolean\", \"object\"],\n    before: \"uniqueItems\",\n    error,\n    code(cxt) {\n        const { parentSchema, it } = cxt;\n        const { items } = parentSchema;\n        if (!Array.isArray(items)) {\n            (0, util_1.checkStrictMode)(it, '\"additionalItems\" is ignored when \"items\" is not an array of schemas');\n            return;\n        }\n        validateAdditionalItems(cxt, items);\n    },\n};\nfunction validateAdditionalItems(cxt, items) {\n    const { gen, schema, data, keyword, it } = cxt;\n    it.items = true;\n    const len = gen.const(\"len\", (0, codegen_1._) `${data}.length`);\n    if (schema === false) {\n        cxt.setParams({ len: items.length });\n        cxt.pass((0, codegen_1._) `${len} <= ${items.length}`);\n    }\n    else if (typeof schema == \"object\" && !(0, util_1.alwaysValidSchema)(it, schema)) {\n        const valid = gen.var(\"valid\", (0, codegen_1._) `${len} <= ${items.length}`); // TODO var\n        gen.if((0, codegen_1.not)(valid), () => validateItems(valid));\n        cxt.ok(valid);\n    }\n    function validateItems(valid) {\n        gen.forRange(\"i\", items.length, len, (i) => {\n            cxt.subschema({ keyword, dataProp: i, dataPropType: util_1.Type.Num }, valid);\n            if (!it.allErrors)\n                gen.if((0, codegen_1.not)(valid), () => gen.break());\n        });\n    }\n}\nexports.validateAdditionalItems = validateAdditionalItems;\nexports.default = def;\n//# sourceMappingURL=additionalItems.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst code_1 = require(\"../code\");\nconst codegen_1 = require(\"../../compile/codegen\");\nconst names_1 = require(\"../../compile/names\");\nconst util_1 = require(\"../../compile/util\");\nconst error = {\n    message: \"must NOT have additional properties\",\n    params: ({ params }) => (0, codegen_1._) `{additionalProperty: ${params.additionalProperty}}`,\n};\nconst def = {\n    keyword: \"additionalProperties\",\n    type: [\"object\"],\n    schemaType: [\"boolean\", \"object\"],\n    allowUndefined: true,\n    trackErrors: true,\n    error,\n    code(cxt) {\n        const { gen, schema, parentSchema, data, errsCount, it } = cxt;\n        /* istanbul ignore if */\n        if (!errsCount)\n            throw new Error(\"ajv implementation error\");\n        const { allErrors, opts } = it;\n        it.props = true;\n        if (opts.removeAdditional !== \"all\" && (0, util_1.alwaysValidSchema)(it, schema))\n            return;\n        const props = (0, code_1.allSchemaProperties)(parentSchema.properties);\n        const patProps = (0, code_1.allSchemaProperties)(parentSchema.patternProperties);\n        checkAdditionalProperties();\n        cxt.ok((0, codegen_1._) `${errsCount} === ${names_1.default.errors}`);\n        function checkAdditionalProperties() {\n            gen.forIn(\"key\", data, (key) => {\n                if (!props.length && !patProps.length)\n                    additionalPropertyCode(key);\n                else\n                    gen.if(isAdditional(key), () => additionalPropertyCode(key));\n            });\n        }\n        function isAdditional(key) {\n            let definedProp;\n            if (props.length > 8) {\n                // TODO maybe an option instead of hard-coded 8?\n                const propsSchema = (0, util_1.schemaRefOrVal)(it, parentSchema.properties, \"properties\");\n                definedProp = (0, code_1.isOwnProperty)(gen, propsSchema, key);\n            }\n            else if (props.length) {\n                definedProp = (0, codegen_1.or)(...props.map((p) => (0, codegen_1._) `${key} === ${p}`));\n            }\n            else {\n                definedProp = codegen_1.nil;\n            }\n            if (patProps.length) {\n                definedProp = (0, codegen_1.or)(definedProp, ...patProps.map((p) => (0, codegen_1._) `${(0, code_1.usePattern)(cxt, p)}.test(${key})`));\n            }\n            return (0, codegen_1.not)(definedProp);\n        }\n        function deleteAdditional(key) {\n            gen.code((0, codegen_1._) `delete ${data}[${key}]`);\n        }\n        function additionalPropertyCode(key) {\n            if (opts.removeAdditional === \"all\" || (opts.removeAdditional && schema === false)) {\n                deleteAdditional(key);\n                return;\n            }\n            if (schema === false) {\n                cxt.setParams({ additionalProperty: key });\n                cxt.error();\n                if (!allErrors)\n                    gen.break();\n                return;\n            }\n            if (typeof schema == \"object\" && !(0, util_1.alwaysValidSchema)(it, schema)) {\n                const valid = gen.name(\"valid\");\n                if (opts.removeAdditional === \"failing\") {\n                    applyAdditionalSchema(key, valid, false);\n                    gen.if((0, codegen_1.not)(valid), () => {\n                        cxt.reset();\n                        deleteAdditional(key);\n                    });\n                }\n                else {\n                    applyAdditionalSchema(key, valid);\n                    if (!allErrors)\n                        gen.if((0, codegen_1.not)(valid), () => gen.break());\n                }\n            }\n        }\n        function applyAdditionalSchema(key, valid, errors) {\n            const subschema = {\n                keyword: \"additionalProperties\",\n                dataProp: key,\n                dataPropType: util_1.Type.Str,\n            };\n            if (errors === false) {\n                Object.assign(subschema, {\n                    compositeRule: true,\n                    createErrors: false,\n                    allErrors: false,\n                });\n            }\n            cxt.subschema(subschema, valid);\n        }\n    },\n};\nexports.default = def;\n//# sourceMappingURL=additionalProperties.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst util_1 = require(\"../../compile/util\");\nconst def = {\n    keyword: \"allOf\",\n    schemaType: \"array\",\n    code(cxt) {\n        const { gen, schema, it } = cxt;\n        /* istanbul ignore if */\n        if (!Array.isArray(schema))\n            throw new Error(\"ajv implementation error\");\n        const valid = gen.name(\"valid\");\n        schema.forEach((sch, i) => {\n            if ((0, util_1.alwaysValidSchema)(it, sch))\n                return;\n            const schCxt = cxt.subschema({ keyword: \"allOf\", schemaProp: i }, valid);\n            cxt.ok(valid);\n            cxt.mergeEvaluated(schCxt);\n        });\n    },\n};\nexports.default = def;\n//# sourceMappingURL=allOf.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst code_1 = require(\"../code\");\nconst def = {\n    keyword: \"anyOf\",\n    schemaType: \"array\",\n    trackErrors: true,\n    code: code_1.validateUnion,\n    error: { message: \"must match a schema in anyOf\" },\n};\nexports.default = def;\n//# sourceMappingURL=anyOf.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst codegen_1 = require(\"../../compile/codegen\");\nconst util_1 = require(\"../../compile/util\");\nconst error = {\n    message: ({ params: { min, max } }) => max === undefined\n        ? (0, codegen_1.str) `must contain at least ${min} valid item(s)`\n        : (0, codegen_1.str) `must contain at least ${min} and no more than ${max} valid item(s)`,\n    params: ({ params: { min, max } }) => max === undefined ? (0, codegen_1._) `{minContains: ${min}}` : (0, codegen_1._) `{minContains: ${min}, maxContains: ${max}}`,\n};\nconst def = {\n    keyword: \"contains\",\n    type: \"array\",\n    schemaType: [\"object\", \"boolean\"],\n    before: \"uniqueItems\",\n    trackErrors: true,\n    error,\n    code(cxt) {\n        const { gen, schema, parentSchema, data, it } = cxt;\n        let min;\n        let max;\n        const { minContains, maxContains } = parentSchema;\n        if (it.opts.next) {\n            min = minContains === undefined ? 1 : minContains;\n            max = maxContains;\n        }\n        else {\n            min = 1;\n        }\n        const len = gen.const(\"len\", (0, codegen_1._) `${data}.length`);\n        cxt.setParams({ min, max });\n        if (max === undefined && min === 0) {\n            (0, util_1.checkStrictMode)(it, `\"minContains\" == 0 without \"maxContains\": \"contains\" keyword ignored`);\n            return;\n        }\n        if (max !== undefined && min > max) {\n            (0, util_1.checkStrictMode)(it, `\"minContains\" > \"maxContains\" is always invalid`);\n            cxt.fail();\n            return;\n        }\n        if ((0, util_1.alwaysValidSchema)(it, schema)) {\n            let cond = (0, codegen_1._) `${len} >= ${min}`;\n            if (max !== undefined)\n                cond = (0, codegen_1._) `${cond} && ${len} <= ${max}`;\n            cxt.pass(cond);\n            return;\n        }\n        it.items = true;\n        const valid = gen.name(\"valid\");\n        if (max === undefined && min === 1) {\n            validateItems(valid, () => gen.if(valid, () => gen.break()));\n        }\n        else if (min === 0) {\n            gen.let(valid, true);\n            if (max !== undefined)\n                gen.if((0, codegen_1._) `${data}.length > 0`, validateItemsWithCount);\n        }\n        else {\n            gen.let(valid, false);\n            validateItemsWithCount();\n        }\n        cxt.result(valid, () => cxt.reset());\n        function validateItemsWithCount() {\n            const schValid = gen.name(\"_valid\");\n            const count = gen.let(\"count\", 0);\n            validateItems(schValid, () => gen.if(schValid, () => checkLimits(count)));\n        }\n        function validateItems(_valid, block) {\n            gen.forRange(\"i\", 0, len, (i) => {\n                cxt.subschema({\n                    keyword: \"contains\",\n                    dataProp: i,\n                    dataPropType: util_1.Type.Num,\n                    compositeRule: true,\n                }, _valid);\n                block();\n            });\n        }\n        function checkLimits(count) {\n            gen.code((0, codegen_1._) `${count}++`);\n            if (max === undefined) {\n                gen.if((0, codegen_1._) `${count} >= ${min}`, () => gen.assign(valid, true).break());\n            }\n            else {\n                gen.if((0, codegen_1._) `${count} > ${max}`, () => gen.assign(valid, false).break());\n                if (min === 1)\n                    gen.assign(valid, true);\n                else\n                    gen.if((0, codegen_1._) `${count} >= ${min}`, () => gen.assign(valid, true));\n            }\n        }\n    },\n};\nexports.default = def;\n//# sourceMappingURL=contains.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.validateSchemaDeps = exports.validatePropertyDeps = exports.error = void 0;\nconst codegen_1 = require(\"../../compile/codegen\");\nconst util_1 = require(\"../../compile/util\");\nconst code_1 = require(\"../code\");\nexports.error = {\n    message: ({ params: { property, depsCount, deps } }) => {\n        const property_ies = depsCount === 1 ? \"property\" : \"properties\";\n        return (0, codegen_1.str) `must have ${property_ies} ${deps} when property ${property} is present`;\n    },\n    params: ({ params: { property, depsCount, deps, missingProperty } }) => (0, codegen_1._) `{property: ${property},\n    missingProperty: ${missingProperty},\n    depsCount: ${depsCount},\n    deps: ${deps}}`, // TODO change to reference\n};\nconst def = {\n    keyword: \"dependencies\",\n    type: \"object\",\n    schemaType: \"object\",\n    error: exports.error,\n    code(cxt) {\n        const [propDeps, schDeps] = splitDependencies(cxt);\n        validatePropertyDeps(cxt, propDeps);\n        validateSchemaDeps(cxt, schDeps);\n    },\n};\nfunction splitDependencies({ schema }) {\n    const propertyDeps = {};\n    const schemaDeps = {};\n    for (const key in schema) {\n        if (key === \"__proto__\")\n            continue;\n        const deps = Array.isArray(schema[key]) ? propertyDeps : schemaDeps;\n        deps[key] = schema[key];\n    }\n    return [propertyDeps, schemaDeps];\n}\nfunction validatePropertyDeps(cxt, propertyDeps = cxt.schema) {\n    const { gen, data, it } = cxt;\n    if (Object.keys(propertyDeps).length === 0)\n        return;\n    const missing = gen.let(\"missing\");\n    for (const prop in propertyDeps) {\n        const deps = propertyDeps[prop];\n        if (deps.length === 0)\n            continue;\n        const hasProperty = (0, code_1.propertyInData)(gen, data, prop, it.opts.ownProperties);\n        cxt.setParams({\n            property: prop,\n            depsCount: deps.length,\n            deps: deps.join(\", \"),\n        });\n        if (it.allErrors) {\n            gen.if(hasProperty, () => {\n                for (const depProp of deps) {\n                    (0, code_1.checkReportMissingProp)(cxt, depProp);\n                }\n            });\n        }\n        else {\n            gen.if((0, codegen_1._) `${hasProperty} && (${(0, code_1.checkMissingProp)(cxt, deps, missing)})`);\n            (0, code_1.reportMissingProp)(cxt, missing);\n            gen.else();\n        }\n    }\n}\nexports.validatePropertyDeps = validatePropertyDeps;\nfunction validateSchemaDeps(cxt, schemaDeps = cxt.schema) {\n    const { gen, data, keyword, it } = cxt;\n    const valid = gen.name(\"valid\");\n    for (const prop in schemaDeps) {\n        if ((0, util_1.alwaysValidSchema)(it, schemaDeps[prop]))\n            continue;\n        gen.if((0, code_1.propertyInData)(gen, data, prop, it.opts.ownProperties), () => {\n            const schCxt = cxt.subschema({ keyword, schemaProp: prop }, valid);\n            cxt.mergeValidEvaluated(schCxt, valid);\n        }, () => gen.var(valid, true) // TODO var\n        );\n        cxt.ok(valid);\n    }\n}\nexports.validateSchemaDeps = validateSchemaDeps;\nexports.default = def;\n//# sourceMappingURL=dependencies.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst codegen_1 = require(\"../../compile/codegen\");\nconst util_1 = require(\"../../compile/util\");\nconst error = {\n    message: ({ params }) => (0, codegen_1.str) `must match \"${params.ifClause}\" schema`,\n    params: ({ params }) => (0, codegen_1._) `{failingKeyword: ${params.ifClause}}`,\n};\nconst def = {\n    keyword: \"if\",\n    schemaType: [\"object\", \"boolean\"],\n    trackErrors: true,\n    error,\n    code(cxt) {\n        const { gen, parentSchema, it } = cxt;\n        if (parentSchema.then === undefined && parentSchema.else === undefined) {\n            (0, util_1.checkStrictMode)(it, '\"if\" without \"then\" and \"else\" is ignored');\n        }\n        const hasThen = hasSchema(it, \"then\");\n        const hasElse = hasSchema(it, \"else\");\n        if (!hasThen && !hasElse)\n            return;\n        const valid = gen.let(\"valid\", true);\n        const schValid = gen.name(\"_valid\");\n        validateIf();\n        cxt.reset();\n        if (hasThen && hasElse) {\n            const ifClause = gen.let(\"ifClause\");\n            cxt.setParams({ ifClause });\n            gen.if(schValid, validateClause(\"then\", ifClause), validateClause(\"else\", ifClause));\n        }\n        else if (hasThen) {\n            gen.if(schValid, validateClause(\"then\"));\n        }\n        else {\n            gen.if((0, codegen_1.not)(schValid), validateClause(\"else\"));\n        }\n        cxt.pass(valid, () => cxt.error(true));\n        function validateIf() {\n            const schCxt = cxt.subschema({\n                keyword: \"if\",\n                compositeRule: true,\n                createErrors: false,\n                allErrors: false,\n            }, schValid);\n            cxt.mergeEvaluated(schCxt);\n        }\n        function validateClause(keyword, ifClause) {\n            return () => {\n                const schCxt = cxt.subschema({ keyword }, schValid);\n                gen.assign(valid, schValid);\n                cxt.mergeValidEvaluated(schCxt, valid);\n                if (ifClause)\n                    gen.assign(ifClause, (0, codegen_1._) `${keyword}`);\n                else\n                    cxt.setParams({ ifClause: keyword });\n            };\n        }\n    },\n};\nfunction hasSchema(it, keyword) {\n    const schema = it.schema[keyword];\n    return schema !== undefined && !(0, util_1.alwaysValidSchema)(it, schema);\n}\nexports.default = def;\n//# sourceMappingURL=if.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst additionalItems_1 = require(\"./additionalItems\");\nconst prefixItems_1 = require(\"./prefixItems\");\nconst items_1 = require(\"./items\");\nconst items2020_1 = require(\"./items2020\");\nconst contains_1 = require(\"./contains\");\nconst dependencies_1 = require(\"./dependencies\");\nconst propertyNames_1 = require(\"./propertyNames\");\nconst additionalProperties_1 = require(\"./additionalProperties\");\nconst properties_1 = require(\"./properties\");\nconst patternProperties_1 = require(\"./patternProperties\");\nconst not_1 = require(\"./not\");\nconst anyOf_1 = require(\"./anyOf\");\nconst oneOf_1 = require(\"./oneOf\");\nconst allOf_1 = require(\"./allOf\");\nconst if_1 = require(\"./if\");\nconst thenElse_1 = require(\"./thenElse\");\nfunction getApplicator(draft2020 = false) {\n    const applicator = [\n        // any\n        not_1.default,\n        anyOf_1.default,\n        oneOf_1.default,\n        allOf_1.default,\n        if_1.default,\n        thenElse_1.default,\n        // object\n        propertyNames_1.default,\n        additionalProperties_1.default,\n        dependencies_1.default,\n        properties_1.default,\n        patternProperties_1.default,\n    ];\n    // array\n    if (draft2020)\n        applicator.push(prefixItems_1.default, items2020_1.default);\n    else\n        applicator.push(additionalItems_1.default, items_1.default);\n    applicator.push(contains_1.default);\n    return applicator;\n}\nexports.default = getApplicator;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.validateTuple = void 0;\nconst codegen_1 = require(\"../../compile/codegen\");\nconst util_1 = require(\"../../compile/util\");\nconst code_1 = require(\"../code\");\nconst def = {\n    keyword: \"items\",\n    type: \"array\",\n    schemaType: [\"object\", \"array\", \"boolean\"],\n    before: \"uniqueItems\",\n    code(cxt) {\n        const { schema, it } = cxt;\n        if (Array.isArray(schema))\n            return validateTuple(cxt, \"additionalItems\", schema);\n        it.items = true;\n        if ((0, util_1.alwaysValidSchema)(it, schema))\n            return;\n        cxt.ok((0, code_1.validateArray)(cxt));\n    },\n};\nfunction validateTuple(cxt, extraItems, schArr = cxt.schema) {\n    const { gen, parentSchema, data, keyword, it } = cxt;\n    checkStrictTuple(parentSchema);\n    if (it.opts.unevaluated && schArr.length && it.items !== true) {\n        it.items = util_1.mergeEvaluated.items(gen, schArr.length, it.items);\n    }\n    const valid = gen.name(\"valid\");\n    const len = gen.const(\"len\", (0, codegen_1._) `${data}.length`);\n    schArr.forEach((sch, i) => {\n        if ((0, util_1.alwaysValidSchema)(it, sch))\n            return;\n        gen.if((0, codegen_1._) `${len} > ${i}`, () => cxt.subschema({\n            keyword,\n            schemaProp: i,\n            dataProp: i,\n        }, valid));\n        cxt.ok(valid);\n    });\n    function checkStrictTuple(sch) {\n        const { opts, errSchemaPath } = it;\n        const l = schArr.length;\n        const fullTuple = l === sch.minItems && (l === sch.maxItems || sch[extraItems] === false);\n        if (opts.strictTuples && !fullTuple) {\n            const msg = `\"${keyword}\" is ${l}-tuple, but minItems or maxItems/${extraItems} are not specified or different at path \"${errSchemaPath}\"`;\n            (0, util_1.checkStrictMode)(it, msg, opts.strictTuples);\n        }\n    }\n}\nexports.validateTuple = validateTuple;\nexports.default = def;\n//# sourceMappingURL=items.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst codegen_1 = require(\"../../compile/codegen\");\nconst util_1 = require(\"../../compile/util\");\nconst code_1 = require(\"../code\");\nconst additionalItems_1 = require(\"./additionalItems\");\nconst error = {\n    message: ({ params: { len } }) => (0, codegen_1.str) `must NOT have more than ${len} items`,\n    params: ({ params: { len } }) => (0, codegen_1._) `{limit: ${len}}`,\n};\nconst def = {\n    keyword: \"items\",\n    type: \"array\",\n    schemaType: [\"object\", \"boolean\"],\n    before: \"uniqueItems\",\n    error,\n    code(cxt) {\n        const { schema, parentSchema, it } = cxt;\n        const { prefixItems } = parentSchema;\n        it.items = true;\n        if ((0, util_1.alwaysValidSchema)(it, schema))\n            return;\n        if (prefixItems)\n            (0, additionalItems_1.validateAdditionalItems)(cxt, prefixItems);\n        else\n            cxt.ok((0, code_1.validateArray)(cxt));\n    },\n};\nexports.default = def;\n//# sourceMappingURL=items2020.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst util_1 = require(\"../../compile/util\");\nconst def = {\n    keyword: \"not\",\n    schemaType: [\"object\", \"boolean\"],\n    trackErrors: true,\n    code(cxt) {\n        const { gen, schema, it } = cxt;\n        if ((0, util_1.alwaysValidSchema)(it, schema)) {\n            cxt.fail();\n            return;\n        }\n        const valid = gen.name(\"valid\");\n        cxt.subschema({\n            keyword: \"not\",\n            compositeRule: true,\n            createErrors: false,\n            allErrors: false,\n        }, valid);\n        cxt.failResult(valid, () => cxt.reset(), () => cxt.error());\n    },\n    error: { message: \"must NOT be valid\" },\n};\nexports.default = def;\n//# sourceMappingURL=not.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst codegen_1 = require(\"../../compile/codegen\");\nconst util_1 = require(\"../../compile/util\");\nconst error = {\n    message: \"must match exactly one schema in oneOf\",\n    params: ({ params }) => (0, codegen_1._) `{passingSchemas: ${params.passing}}`,\n};\nconst def = {\n    keyword: \"oneOf\",\n    schemaType: \"array\",\n    trackErrors: true,\n    error,\n    code(cxt) {\n        const { gen, schema, parentSchema, it } = cxt;\n        /* istanbul ignore if */\n        if (!Array.isArray(schema))\n            throw new Error(\"ajv implementation error\");\n        if (it.opts.discriminator && parentSchema.discriminator)\n            return;\n        const schArr = schema;\n        const valid = gen.let(\"valid\", false);\n        const passing = gen.let(\"passing\", null);\n        const schValid = gen.name(\"_valid\");\n        cxt.setParams({ passing });\n        // TODO possibly fail straight away (with warning or exception) if there are two empty always valid schemas\n        gen.block(validateOneOf);\n        cxt.result(valid, () => cxt.reset(), () => cxt.error(true));\n        function validateOneOf() {\n            schArr.forEach((sch, i) => {\n                let schCxt;\n                if ((0, util_1.alwaysValidSchema)(it, sch)) {\n                    gen.var(schValid, true);\n                }\n                else {\n                    schCxt = cxt.subschema({\n                        keyword: \"oneOf\",\n                        schemaProp: i,\n                        compositeRule: true,\n                    }, schValid);\n                }\n                if (i > 0) {\n                    gen\n                        .if((0, codegen_1._) `${schValid} && ${valid}`)\n                        .assign(valid, false)\n                        .assign(passing, (0, codegen_1._) `[${passing}, ${i}]`)\n                        .else();\n                }\n                gen.if(schValid, () => {\n                    gen.assign(valid, true);\n                    gen.assign(passing, i);\n                    if (schCxt)\n                        cxt.mergeEvaluated(schCxt, codegen_1.Name);\n                });\n            });\n        }\n    },\n};\nexports.default = def;\n//# sourceMappingURL=oneOf.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst code_1 = require(\"../code\");\nconst codegen_1 = require(\"../../compile/codegen\");\nconst util_1 = require(\"../../compile/util\");\nconst util_2 = require(\"../../compile/util\");\nconst def = {\n    keyword: \"patternProperties\",\n    type: \"object\",\n    schemaType: \"object\",\n    code(cxt) {\n        const { gen, schema, data, parentSchema, it } = cxt;\n        const { opts } = it;\n        const patterns = (0, code_1.allSchemaProperties)(schema);\n        const alwaysValidPatterns = patterns.filter((p) => (0, util_1.alwaysValidSchema)(it, schema[p]));\n        if (patterns.length === 0 ||\n            (alwaysValidPatterns.length === patterns.length &&\n                (!it.opts.unevaluated || it.props === true))) {\n            return;\n        }\n        const checkProperties = opts.strictSchema && !opts.allowMatchingProperties && parentSchema.properties;\n        const valid = gen.name(\"valid\");\n        if (it.props !== true && !(it.props instanceof codegen_1.Name)) {\n            it.props = (0, util_2.evaluatedPropsToName)(gen, it.props);\n        }\n        const { props } = it;\n        validatePatternProperties();\n        function validatePatternProperties() {\n            for (const pat of patterns) {\n                if (checkProperties)\n                    checkMatchingProperties(pat);\n                if (it.allErrors) {\n                    validateProperties(pat);\n                }\n                else {\n                    gen.var(valid, true); // TODO var\n                    validateProperties(pat);\n                    gen.if(valid);\n                }\n            }\n        }\n        function checkMatchingProperties(pat) {\n            for (const prop in checkProperties) {\n                if (new RegExp(pat).test(prop)) {\n                    (0, util_1.checkStrictMode)(it, `property ${prop} matches pattern ${pat} (use allowMatchingProperties)`);\n                }\n            }\n        }\n        function validateProperties(pat) {\n            gen.forIn(\"key\", data, (key) => {\n                gen.if((0, codegen_1._) `${(0, code_1.usePattern)(cxt, pat)}.test(${key})`, () => {\n                    const alwaysValid = alwaysValidPatterns.includes(pat);\n                    if (!alwaysValid) {\n                        cxt.subschema({\n                            keyword: \"patternProperties\",\n                            schemaProp: pat,\n                            dataProp: key,\n                            dataPropType: util_2.Type.Str,\n                        }, valid);\n                    }\n                    if (it.opts.unevaluated && props !== true) {\n                        gen.assign((0, codegen_1._) `${props}[${key}]`, true);\n                    }\n                    else if (!alwaysValid && !it.allErrors) {\n                        // can short-circuit if `unevaluatedProperties` is not supported (opts.next === false)\n                        // or if all properties were evaluated (props === true)\n                        gen.if((0, codegen_1.not)(valid), () => gen.break());\n                    }\n                });\n            });\n        }\n    },\n};\nexports.default = def;\n//# sourceMappingURL=patternProperties.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst items_1 = require(\"./items\");\nconst def = {\n    keyword: \"prefixItems\",\n    type: \"array\",\n    schemaType: [\"array\"],\n    before: \"uniqueItems\",\n    code: (cxt) => (0, items_1.validateTuple)(cxt, \"items\"),\n};\nexports.default = def;\n//# sourceMappingURL=prefixItems.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst validate_1 = require(\"../../compile/validate\");\nconst code_1 = require(\"../code\");\nconst util_1 = require(\"../../compile/util\");\nconst additionalProperties_1 = require(\"./additionalProperties\");\nconst def = {\n    keyword: \"properties\",\n    type: \"object\",\n    schemaType: \"object\",\n    code(cxt) {\n        const { gen, schema, parentSchema, data, it } = cxt;\n        if (it.opts.removeAdditional === \"all\" && parentSchema.additionalProperties === undefined) {\n            additionalProperties_1.default.code(new validate_1.KeywordCxt(it, additionalProperties_1.default, \"additionalProperties\"));\n        }\n        const allProps = (0, code_1.allSchemaProperties)(schema);\n        for (const prop of allProps) {\n            it.definedProperties.add(prop);\n        }\n        if (it.opts.unevaluated && allProps.length && it.props !== true) {\n            it.props = util_1.mergeEvaluated.props(gen, (0, util_1.toHash)(allProps), it.props);\n        }\n        const properties = allProps.filter((p) => !(0, util_1.alwaysValidSchema)(it, schema[p]));\n        if (properties.length === 0)\n            return;\n        const valid = gen.name(\"valid\");\n        for (const prop of properties) {\n            if (hasDefault(prop)) {\n                applyPropertySchema(prop);\n            }\n            else {\n                gen.if((0, code_1.propertyInData)(gen, data, prop, it.opts.ownProperties));\n                applyPropertySchema(prop);\n                if (!it.allErrors)\n                    gen.else().var(valid, true);\n                gen.endIf();\n            }\n            cxt.it.definedProperties.add(prop);\n            cxt.ok(valid);\n        }\n        function hasDefault(prop) {\n            return it.opts.useDefaults && !it.compositeRule && schema[prop].default !== undefined;\n        }\n        function applyPropertySchema(prop) {\n            cxt.subschema({\n                keyword: \"properties\",\n                schemaProp: prop,\n                dataProp: prop,\n            }, valid);\n        }\n    },\n};\nexports.default = def;\n//# sourceMappingURL=properties.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst codegen_1 = require(\"../../compile/codegen\");\nconst util_1 = require(\"../../compile/util\");\nconst error = {\n    message: \"property name must be valid\",\n    params: ({ params }) => (0, codegen_1._) `{propertyName: ${params.propertyName}}`,\n};\nconst def = {\n    keyword: \"propertyNames\",\n    type: \"object\",\n    schemaType: [\"object\", \"boolean\"],\n    error,\n    code(cxt) {\n        const { gen, schema, data, it } = cxt;\n        if ((0, util_1.alwaysValidSchema)(it, schema))\n            return;\n        const valid = gen.name(\"valid\");\n        gen.forIn(\"key\", data, (key) => {\n            cxt.setParams({ propertyName: key });\n            cxt.subschema({\n                keyword: \"propertyNames\",\n                data: key,\n                dataTypes: [\"string\"],\n                propertyName: key,\n                compositeRule: true,\n            }, valid);\n            gen.if((0, codegen_1.not)(valid), () => {\n                cxt.error(true);\n                if (!it.allErrors)\n                    gen.break();\n            });\n        });\n        cxt.ok(valid);\n    },\n};\nexports.default = def;\n//# sourceMappingURL=propertyNames.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst util_1 = require(\"../../compile/util\");\nconst def = {\n    keyword: [\"then\", \"else\"],\n    schemaType: [\"object\", \"boolean\"],\n    code({ keyword, parentSchema, it }) {\n        if (parentSchema.if === undefined)\n            (0, util_1.checkStrictMode)(it, `\"${keyword}\" without \"if\" is ignored`);\n    },\n};\nexports.default = def;\n//# sourceMappingURL=thenElse.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.validateUnion = exports.validateArray = exports.usePattern = exports.callValidateCode = exports.schemaProperties = exports.allSchemaProperties = exports.noPropertyInData = exports.propertyInData = exports.isOwnProperty = exports.hasPropFunc = exports.reportMissingProp = exports.checkMissingProp = exports.checkReportMissingProp = void 0;\nconst codegen_1 = require(\"../compile/codegen\");\nconst util_1 = require(\"../compile/util\");\nconst names_1 = require(\"../compile/names\");\nconst util_2 = require(\"../compile/util\");\nfunction checkReportMissingProp(cxt, prop) {\n    const { gen, data, it } = cxt;\n    gen.if(noPropertyInData(gen, data, prop, it.opts.ownProperties), () => {\n        cxt.setParams({ missingProperty: (0, codegen_1._) `${prop}` }, true);\n        cxt.error();\n    });\n}\nexports.checkReportMissingProp = checkReportMissingProp;\nfunction checkMissingProp({ gen, data, it: { opts } }, properties, missing) {\n    return (0, codegen_1.or)(...properties.map((prop) => (0, codegen_1.and)(noPropertyInData(gen, data, prop, opts.ownProperties), (0, codegen_1._) `${missing} = ${prop}`)));\n}\nexports.checkMissingProp = checkMissingProp;\nfunction reportMissingProp(cxt, missing) {\n    cxt.setParams({ missingProperty: missing }, true);\n    cxt.error();\n}\nexports.reportMissingProp = reportMissingProp;\nfunction hasPropFunc(gen) {\n    return gen.scopeValue(\"func\", {\n        // eslint-disable-next-line @typescript-eslint/unbound-method\n        ref: Object.prototype.hasOwnProperty,\n        code: (0, codegen_1._) `Object.prototype.hasOwnProperty`,\n    });\n}\nexports.hasPropFunc = hasPropFunc;\nfunction isOwnProperty(gen, data, property) {\n    return (0, codegen_1._) `${hasPropFunc(gen)}.call(${data}, ${property})`;\n}\nexports.isOwnProperty = isOwnProperty;\nfunction propertyInData(gen, data, property, ownProperties) {\n    const cond = (0, codegen_1._) `${data}${(0, codegen_1.getProperty)(property)} !== undefined`;\n    return ownProperties ? (0, codegen_1._) `${cond} && ${isOwnProperty(gen, data, property)}` : cond;\n}\nexports.propertyInData = propertyInData;\nfunction noPropertyInData(gen, data, property, ownProperties) {\n    const cond = (0, codegen_1._) `${data}${(0, codegen_1.getProperty)(property)} === undefined`;\n    return ownProperties ? (0, codegen_1.or)(cond, (0, codegen_1.not)(isOwnProperty(gen, data, property))) : cond;\n}\nexports.noPropertyInData = noPropertyInData;\nfunction allSchemaProperties(schemaMap) {\n    return schemaMap ? Object.keys(schemaMap).filter((p) => p !== \"__proto__\") : [];\n}\nexports.allSchemaProperties = allSchemaProperties;\nfunction schemaProperties(it, schemaMap) {\n    return allSchemaProperties(schemaMap).filter((p) => !(0, util_1.alwaysValidSchema)(it, schemaMap[p]));\n}\nexports.schemaProperties = schemaProperties;\nfunction callValidateCode({ schemaCode, data, it: { gen, topSchemaRef, schemaPath, errorPath }, it }, func, context, passSchema) {\n    const dataAndSchema = passSchema ? (0, codegen_1._) `${schemaCode}, ${data}, ${topSchemaRef}${schemaPath}` : data;\n    const valCxt = [\n        [names_1.default.instancePath, (0, codegen_1.strConcat)(names_1.default.instancePath, errorPath)],\n        [names_1.default.parentData, it.parentData],\n        [names_1.default.parentDataProperty, it.parentDataProperty],\n        [names_1.default.rootData, names_1.default.rootData],\n    ];\n    if (it.opts.dynamicRef)\n        valCxt.push([names_1.default.dynamicAnchors, names_1.default.dynamicAnchors]);\n    const args = (0, codegen_1._) `${dataAndSchema}, ${gen.object(...valCxt)}`;\n    return context !== codegen_1.nil ? (0, codegen_1._) `${func}.call(${context}, ${args})` : (0, codegen_1._) `${func}(${args})`;\n}\nexports.callValidateCode = callValidateCode;\nconst newRegExp = (0, codegen_1._) `new RegExp`;\nfunction usePattern({ gen, it: { opts } }, pattern) {\n    const u = opts.unicodeRegExp ? \"u\" : \"\";\n    const { regExp } = opts.code;\n    const rx = regExp(pattern, u);\n    return gen.scopeValue(\"pattern\", {\n        key: rx.toString(),\n        ref: rx,\n        code: (0, codegen_1._) `${regExp.code === \"new RegExp\" ? newRegExp : (0, util_2.useFunc)(gen, regExp)}(${pattern}, ${u})`,\n    });\n}\nexports.usePattern = usePattern;\nfunction validateArray(cxt) {\n    const { gen, data, keyword, it } = cxt;\n    const valid = gen.name(\"valid\");\n    if (it.allErrors) {\n        const validArr = gen.let(\"valid\", true);\n        validateItems(() => gen.assign(validArr, false));\n        return validArr;\n    }\n    gen.var(valid, true);\n    validateItems(() => gen.break());\n    return valid;\n    function validateItems(notValid) {\n        const len = gen.const(\"len\", (0, codegen_1._) `${data}.length`);\n        gen.forRange(\"i\", 0, len, (i) => {\n            cxt.subschema({\n                keyword,\n                dataProp: i,\n                dataPropType: util_1.Type.Num,\n            }, valid);\n            gen.if((0, codegen_1.not)(valid), notValid);\n        });\n    }\n}\nexports.validateArray = validateArray;\nfunction validateUnion(cxt) {\n    const { gen, schema, keyword, it } = cxt;\n    /* istanbul ignore if */\n    if (!Array.isArray(schema))\n        throw new Error(\"ajv implementation error\");\n    const alwaysValid = schema.some((sch) => (0, util_1.alwaysValidSchema)(it, sch));\n    if (alwaysValid && !it.opts.unevaluated)\n        return;\n    const valid = gen.let(\"valid\", false);\n    const schValid = gen.name(\"_valid\");\n    gen.block(() => schema.forEach((_sch, i) => {\n        const schCxt = cxt.subschema({\n            keyword,\n            schemaProp: i,\n            compositeRule: true,\n        }, schValid);\n        gen.assign(valid, (0, codegen_1._) `${valid} || ${schValid}`);\n        const merged = cxt.mergeValidEvaluated(schCxt, schValid);\n        // can short-circuit if `unevaluatedProperties/Items` not supported (opts.unevaluated !== true)\n        // or if all properties and items were evaluated (it.props === true && it.items === true)\n        if (!merged)\n            gen.if((0, codegen_1.not)(valid));\n    }));\n    cxt.result(valid, () => cxt.reset(), () => cxt.error(true));\n}\nexports.validateUnion = validateUnion;\n//# sourceMappingURL=code.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst def = {\n    keyword: \"id\",\n    code() {\n        throw new Error('NOT SUPPORTED: keyword \"id\", use \"$id\" for schema ID');\n    },\n};\nexports.default = def;\n//# sourceMappingURL=id.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst id_1 = require(\"./id\");\nconst ref_1 = require(\"./ref\");\nconst core = [\n    \"$schema\",\n    \"$id\",\n    \"$defs\",\n    \"$vocabulary\",\n    { keyword: \"$comment\" },\n    \"definitions\",\n    id_1.default,\n    ref_1.default,\n];\nexports.default = core;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.callRef = exports.getValidate = void 0;\nconst ref_error_1 = require(\"../../compile/ref_error\");\nconst code_1 = require(\"../code\");\nconst codegen_1 = require(\"../../compile/codegen\");\nconst names_1 = require(\"../../compile/names\");\nconst compile_1 = require(\"../../compile\");\nconst util_1 = require(\"../../compile/util\");\nconst def = {\n    keyword: \"$ref\",\n    schemaType: \"string\",\n    code(cxt) {\n        const { gen, schema: $ref, it } = cxt;\n        const { baseId, schemaEnv: env, validateName, opts, self } = it;\n        const { root } = env;\n        if (($ref === \"#\" || $ref === \"#/\") && baseId === root.baseId)\n            return callRootRef();\n        const schOrEnv = compile_1.resolveRef.call(self, root, baseId, $ref);\n        if (schOrEnv === undefined)\n            throw new ref_error_1.default(it.opts.uriResolver, baseId, $ref);\n        if (schOrEnv instanceof compile_1.SchemaEnv)\n            return callValidate(schOrEnv);\n        return inlineRefSchema(schOrEnv);\n        function callRootRef() {\n            if (env === root)\n                return callRef(cxt, validateName, env, env.$async);\n            const rootName = gen.scopeValue(\"root\", { ref: root });\n            return callRef(cxt, (0, codegen_1._) `${rootName}.validate`, root, root.$async);\n        }\n        function callValidate(sch) {\n            const v = getValidate(cxt, sch);\n            callRef(cxt, v, sch, sch.$async);\n        }\n        function inlineRefSchema(sch) {\n            const schName = gen.scopeValue(\"schema\", opts.code.source === true ? { ref: sch, code: (0, codegen_1.stringify)(sch) } : { ref: sch });\n            const valid = gen.name(\"valid\");\n            const schCxt = cxt.subschema({\n                schema: sch,\n                dataTypes: [],\n                schemaPath: codegen_1.nil,\n                topSchemaRef: schName,\n                errSchemaPath: $ref,\n            }, valid);\n            cxt.mergeEvaluated(schCxt);\n            cxt.ok(valid);\n        }\n    },\n};\nfunction getValidate(cxt, sch) {\n    const { gen } = cxt;\n    return sch.validate\n        ? gen.scopeValue(\"validate\", { ref: sch.validate })\n        : (0, codegen_1._) `${gen.scopeValue(\"wrapper\", { ref: sch })}.validate`;\n}\nexports.getValidate = getValidate;\nfunction callRef(cxt, v, sch, $async) {\n    const { gen, it } = cxt;\n    const { allErrors, schemaEnv: env, opts } = it;\n    const passCxt = opts.passContext ? names_1.default.this : codegen_1.nil;\n    if ($async)\n        callAsyncRef();\n    else\n        callSyncRef();\n    function callAsyncRef() {\n        if (!env.$async)\n            throw new Error(\"async schema referenced by sync schema\");\n        const valid = gen.let(\"valid\");\n        gen.try(() => {\n            gen.code((0, codegen_1._) `await ${(0, code_1.callValidateCode)(cxt, v, passCxt)}`);\n            addEvaluatedFrom(v); // TODO will not work with async, it has to be returned with the result\n            if (!allErrors)\n                gen.assign(valid, true);\n        }, (e) => {\n            gen.if((0, codegen_1._) `!(${e} instanceof ${it.ValidationError})`, () => gen.throw(e));\n            addErrorsFrom(e);\n            if (!allErrors)\n                gen.assign(valid, false);\n        });\n        cxt.ok(valid);\n    }\n    function callSyncRef() {\n        cxt.result((0, code_1.callValidateCode)(cxt, v, passCxt), () => addEvaluatedFrom(v), () => addErrorsFrom(v));\n    }\n    function addErrorsFrom(source) {\n        const errs = (0, codegen_1._) `${source}.errors`;\n        gen.assign(names_1.default.vErrors, (0, codegen_1._) `${names_1.default.vErrors} === null ? ${errs} : ${names_1.default.vErrors}.concat(${errs})`); // TODO tagged\n        gen.assign(names_1.default.errors, (0, codegen_1._) `${names_1.default.vErrors}.length`);\n    }\n    function addEvaluatedFrom(source) {\n        var _a;\n        if (!it.opts.unevaluated)\n            return;\n        const schEvaluated = (_a = sch === null || sch === void 0 ? void 0 : sch.validate) === null || _a === void 0 ? void 0 : _a.evaluated;\n        // TODO refactor\n        if (it.props !== true) {\n            if (schEvaluated && !schEvaluated.dynamicProps) {\n                if (schEvaluated.props !== undefined) {\n                    it.props = util_1.mergeEvaluated.props(gen, schEvaluated.props, it.props);\n                }\n            }\n            else {\n                const props = gen.var(\"props\", (0, codegen_1._) `${source}.evaluated.props`);\n                it.props = util_1.mergeEvaluated.props(gen, props, it.props, codegen_1.Name);\n            }\n        }\n        if (it.items !== true) {\n            if (schEvaluated && !schEvaluated.dynamicItems) {\n                if (schEvaluated.items !== undefined) {\n                    it.items = util_1.mergeEvaluated.items(gen, schEvaluated.items, it.items);\n                }\n            }\n            else {\n                const items = gen.var(\"items\", (0, codegen_1._) `${source}.evaluated.items`);\n                it.items = util_1.mergeEvaluated.items(gen, items, it.items, codegen_1.Name);\n            }\n        }\n    }\n}\nexports.callRef = callRef;\nexports.default = def;\n//# sourceMappingURL=ref.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst codegen_1 = require(\"../../compile/codegen\");\nconst types_1 = require(\"../discriminator/types\");\nconst compile_1 = require(\"../../compile\");\nconst util_1 = require(\"../../compile/util\");\nconst error = {\n    message: ({ params: { discrError, tagName } }) => discrError === types_1.DiscrError.Tag\n        ? `tag \"${tagName}\" must be string`\n        : `value of tag \"${tagName}\" must be in oneOf`,\n    params: ({ params: { discrError, tag, tagName } }) => (0, codegen_1._) `{error: ${discrError}, tag: ${tagName}, tagValue: ${tag}}`,\n};\nconst def = {\n    keyword: \"discriminator\",\n    type: \"object\",\n    schemaType: \"object\",\n    error,\n    code(cxt) {\n        const { gen, data, schema, parentSchema, it } = cxt;\n        const { oneOf } = parentSchema;\n        if (!it.opts.discriminator) {\n            throw new Error(\"discriminator: requires discriminator option\");\n        }\n        const tagName = schema.propertyName;\n        if (typeof tagName != \"string\")\n            throw new Error(\"discriminator: requires propertyName\");\n        if (schema.mapping)\n            throw new Error(\"discriminator: mapping is not supported\");\n        if (!oneOf)\n            throw new Error(\"discriminator: requires oneOf keyword\");\n        const valid = gen.let(\"valid\", false);\n        const tag = gen.const(\"tag\", (0, codegen_1._) `${data}${(0, codegen_1.getProperty)(tagName)}`);\n        gen.if((0, codegen_1._) `typeof ${tag} == \"string\"`, () => validateMapping(), () => cxt.error(false, { discrError: types_1.DiscrError.Tag, tag, tagName }));\n        cxt.ok(valid);\n        function validateMapping() {\n            const mapping = getMapping();\n            gen.if(false);\n            for (const tagValue in mapping) {\n                gen.elseIf((0, codegen_1._) `${tag} === ${tagValue}`);\n                gen.assign(valid, applyTagSchema(mapping[tagValue]));\n            }\n            gen.else();\n            cxt.error(false, { discrError: types_1.DiscrError.Mapping, tag, tagName });\n            gen.endIf();\n        }\n        function applyTagSchema(schemaProp) {\n            const _valid = gen.name(\"valid\");\n            const schCxt = cxt.subschema({ keyword: \"oneOf\", schemaProp }, _valid);\n            cxt.mergeEvaluated(schCxt, codegen_1.Name);\n            return _valid;\n        }\n        function getMapping() {\n            var _a;\n            const oneOfMapping = {};\n            const topRequired = hasRequired(parentSchema);\n            let tagRequired = true;\n            for (let i = 0; i < oneOf.length; i++) {\n                let sch = oneOf[i];\n                if ((sch === null || sch === void 0 ? void 0 : sch.$ref) && !(0, util_1.schemaHasRulesButRef)(sch, it.self.RULES)) {\n                    sch = compile_1.resolveRef.call(it.self, it.schemaEnv.root, it.baseId, sch === null || sch === void 0 ? void 0 : sch.$ref);\n                    if (sch instanceof compile_1.SchemaEnv)\n                        sch = sch.schema;\n                }\n                const propSch = (_a = sch === null || sch === void 0 ? void 0 : sch.properties) === null || _a === void 0 ? void 0 : _a[tagName];\n                if (typeof propSch != \"object\") {\n                    throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have \"properties/${tagName}\"`);\n                }\n                tagRequired = tagRequired && (topRequired || hasRequired(sch));\n                addMappings(propSch, i);\n            }\n            if (!tagRequired)\n                throw new Error(`discriminator: \"${tagName}\" must be required`);\n            return oneOfMapping;\n            function hasRequired({ required }) {\n                return Array.isArray(required) && required.includes(tagName);\n            }\n            function addMappings(sch, i) {\n                if (sch.const) {\n                    addMapping(sch.const, i);\n                }\n                else if (sch.enum) {\n                    for (const tagValue of sch.enum) {\n                        addMapping(tagValue, i);\n                    }\n                }\n                else {\n                    throw new Error(`discriminator: \"properties/${tagName}\" must have \"const\" or \"enum\"`);\n                }\n            }\n            function addMapping(tagValue, i) {\n                if (typeof tagValue != \"string\" || tagValue in oneOfMapping) {\n                    throw new Error(`discriminator: \"${tagName}\" values must be unique strings`);\n                }\n                oneOfMapping[tagValue] = i;\n            }\n        }\n    },\n};\nexports.default = def;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DiscrError = void 0;\nvar DiscrError;\n(function (DiscrError) {\n    DiscrError[\"Tag\"] = \"tag\";\n    DiscrError[\"Mapping\"] = \"mapping\";\n})(DiscrError = exports.DiscrError || (exports.DiscrError = {}));\n//# sourceMappingURL=types.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst core_1 = require(\"./core\");\nconst validation_1 = require(\"./validation\");\nconst applicator_1 = require(\"./applicator\");\nconst format_1 = require(\"./format\");\nconst metadata_1 = require(\"./metadata\");\nconst draft7Vocabularies = [\n    core_1.default,\n    validation_1.default,\n    (0, applicator_1.default)(),\n    format_1.default,\n    metadata_1.metadataVocabulary,\n    metadata_1.contentVocabulary,\n];\nexports.default = draft7Vocabularies;\n//# sourceMappingURL=draft7.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst codegen_1 = require(\"../../compile/codegen\");\nconst error = {\n    message: ({ schemaCode }) => (0, codegen_1.str) `must match format \"${schemaCode}\"`,\n    params: ({ schemaCode }) => (0, codegen_1._) `{format: ${schemaCode}}`,\n};\nconst def = {\n    keyword: \"format\",\n    type: [\"number\", \"string\"],\n    schemaType: \"string\",\n    $data: true,\n    error,\n    code(cxt, ruleType) {\n        const { gen, data, $data, schema, schemaCode, it } = cxt;\n        const { opts, errSchemaPath, schemaEnv, self } = it;\n        if (!opts.validateFormats)\n            return;\n        if ($data)\n            validate$DataFormat();\n        else\n            validateFormat();\n        function validate$DataFormat() {\n            const fmts = gen.scopeValue(\"formats\", {\n                ref: self.formats,\n                code: opts.code.formats,\n            });\n            const fDef = gen.const(\"fDef\", (0, codegen_1._) `${fmts}[${schemaCode}]`);\n            const fType = gen.let(\"fType\");\n            const format = gen.let(\"format\");\n            // TODO simplify\n            gen.if((0, codegen_1._) `typeof ${fDef} == \"object\" && !(${fDef} instanceof RegExp)`, () => gen.assign(fType, (0, codegen_1._) `${fDef}.type || \"string\"`).assign(format, (0, codegen_1._) `${fDef}.validate`), () => gen.assign(fType, (0, codegen_1._) `\"string\"`).assign(format, fDef));\n            cxt.fail$data((0, codegen_1.or)(unknownFmt(), invalidFmt()));\n            function unknownFmt() {\n                if (opts.strictSchema === false)\n                    return codegen_1.nil;\n                return (0, codegen_1._) `${schemaCode} && !${format}`;\n            }\n            function invalidFmt() {\n                const callFormat = schemaEnv.$async\n                    ? (0, codegen_1._) `(${fDef}.async ? await ${format}(${data}) : ${format}(${data}))`\n                    : (0, codegen_1._) `${format}(${data})`;\n                const validData = (0, codegen_1._) `(typeof ${format} == \"function\" ? ${callFormat} : ${format}.test(${data}))`;\n                return (0, codegen_1._) `${format} && ${format} !== true && ${fType} === ${ruleType} && !${validData}`;\n            }\n        }\n        function validateFormat() {\n            const formatDef = self.formats[schema];\n            if (!formatDef) {\n                unknownFormat();\n                return;\n            }\n            if (formatDef === true)\n                return;\n            const [fmtType, format, fmtRef] = getFormat(formatDef);\n            if (fmtType === ruleType)\n                cxt.pass(validCondition());\n            function unknownFormat() {\n                if (opts.strictSchema === false) {\n                    self.logger.warn(unknownMsg());\n                    return;\n                }\n                throw new Error(unknownMsg());\n                function unknownMsg() {\n                    return `unknown format \"${schema}\" ignored in schema at path \"${errSchemaPath}\"`;\n                }\n            }\n            function getFormat(fmtDef) {\n                const code = fmtDef instanceof RegExp\n                    ? (0, codegen_1.regexpCode)(fmtDef)\n                    : opts.code.formats\n                        ? (0, codegen_1._) `${opts.code.formats}${(0, codegen_1.getProperty)(schema)}`\n                        : undefined;\n                const fmt = gen.scopeValue(\"formats\", { key: schema, ref: fmtDef, code });\n                if (typeof fmtDef == \"object\" && !(fmtDef instanceof RegExp)) {\n                    return [fmtDef.type || \"string\", fmtDef.validate, (0, codegen_1._) `${fmt}.validate`];\n                }\n                return [\"string\", fmtDef, fmt];\n            }\n            function validCondition() {\n                if (typeof formatDef == \"object\" && !(formatDef instanceof RegExp) && formatDef.async) {\n                    if (!schemaEnv.$async)\n                        throw new Error(\"async format in sync schema\");\n                    return (0, codegen_1._) `await ${fmtRef}(${data})`;\n                }\n                return typeof format == \"function\" ? (0, codegen_1._) `${fmtRef}(${data})` : (0, codegen_1._) `${fmtRef}.test(${data})`;\n            }\n        }\n    },\n};\nexports.default = def;\n//# sourceMappingURL=format.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst format_1 = require(\"./format\");\nconst format = [format_1.default];\nexports.default = format;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.contentVocabulary = exports.metadataVocabulary = void 0;\nexports.metadataVocabulary = [\n    \"title\",\n    \"description\",\n    \"default\",\n    \"deprecated\",\n    \"readOnly\",\n    \"writeOnly\",\n    \"examples\",\n];\nexports.contentVocabulary = [\n    \"contentMediaType\",\n    \"contentEncoding\",\n    \"contentSchema\",\n];\n//# sourceMappingURL=metadata.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst codegen_1 = require(\"../../compile/codegen\");\nconst util_1 = require(\"../../compile/util\");\nconst equal_1 = require(\"../../runtime/equal\");\nconst error = {\n    message: \"must be equal to constant\",\n    params: ({ schemaCode }) => (0, codegen_1._) `{allowedValue: ${schemaCode}}`,\n};\nconst def = {\n    keyword: \"const\",\n    $data: true,\n    error,\n    code(cxt) {\n        const { gen, data, $data, schemaCode, schema } = cxt;\n        if ($data || (schema && typeof schema == \"object\")) {\n            cxt.fail$data((0, codegen_1._) `!${(0, util_1.useFunc)(gen, equal_1.default)}(${data}, ${schemaCode})`);\n        }\n        else {\n            cxt.fail((0, codegen_1._) `${schema} !== ${data}`);\n        }\n    },\n};\nexports.default = def;\n//# sourceMappingURL=const.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst codegen_1 = require(\"../../compile/codegen\");\nconst util_1 = require(\"../../compile/util\");\nconst equal_1 = require(\"../../runtime/equal\");\nconst error = {\n    message: \"must be equal to one of the allowed values\",\n    params: ({ schemaCode }) => (0, codegen_1._) `{allowedValues: ${schemaCode}}`,\n};\nconst def = {\n    keyword: \"enum\",\n    schemaType: \"array\",\n    $data: true,\n    error,\n    code(cxt) {\n        const { gen, data, $data, schema, schemaCode, it } = cxt;\n        if (!$data && schema.length === 0)\n            throw new Error(\"enum must have non-empty array\");\n        const useLoop = schema.length >= it.opts.loopEnum;\n        let eql;\n        const getEql = () => (eql !== null && eql !== void 0 ? eql : (eql = (0, util_1.useFunc)(gen, equal_1.default)));\n        let valid;\n        if (useLoop || $data) {\n            valid = gen.let(\"valid\");\n            cxt.block$data(valid, loopEnum);\n        }\n        else {\n            /* istanbul ignore if */\n            if (!Array.isArray(schema))\n                throw new Error(\"ajv implementation error\");\n            const vSchema = gen.const(\"vSchema\", schemaCode);\n            valid = (0, codegen_1.or)(...schema.map((_x, i) => equalCode(vSchema, i)));\n        }\n        cxt.pass(valid);\n        function loopEnum() {\n            gen.assign(valid, false);\n            gen.forOf(\"v\", schemaCode, (v) => gen.if((0, codegen_1._) `${getEql()}(${data}, ${v})`, () => gen.assign(valid, true).break()));\n        }\n        function equalCode(vSchema, i) {\n            const sch = schema[i];\n            return typeof sch === \"object\" && sch !== null\n                ? (0, codegen_1._) `${getEql()}(${data}, ${vSchema}[${i}])`\n                : (0, codegen_1._) `${data} === ${sch}`;\n        }\n    },\n};\nexports.default = def;\n//# sourceMappingURL=enum.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst limitNumber_1 = require(\"./limitNumber\");\nconst multipleOf_1 = require(\"./multipleOf\");\nconst limitLength_1 = require(\"./limitLength\");\nconst pattern_1 = require(\"./pattern\");\nconst limitProperties_1 = require(\"./limitProperties\");\nconst required_1 = require(\"./required\");\nconst limitItems_1 = require(\"./limitItems\");\nconst uniqueItems_1 = require(\"./uniqueItems\");\nconst const_1 = require(\"./const\");\nconst enum_1 = require(\"./enum\");\nconst validation = [\n    // number\n    limitNumber_1.default,\n    multipleOf_1.default,\n    // string\n    limitLength_1.default,\n    pattern_1.default,\n    // object\n    limitProperties_1.default,\n    required_1.default,\n    // array\n    limitItems_1.default,\n    uniqueItems_1.default,\n    // any\n    { keyword: \"type\", schemaType: [\"string\", \"array\"] },\n    { keyword: \"nullable\", schemaType: \"boolean\" },\n    const_1.default,\n    enum_1.default,\n];\nexports.default = validation;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst codegen_1 = require(\"../../compile/codegen\");\nconst error = {\n    message({ keyword, schemaCode }) {\n        const comp = keyword === \"maxItems\" ? \"more\" : \"fewer\";\n        return (0, codegen_1.str) `must NOT have ${comp} than ${schemaCode} items`;\n    },\n    params: ({ schemaCode }) => (0, codegen_1._) `{limit: ${schemaCode}}`,\n};\nconst def = {\n    keyword: [\"maxItems\", \"minItems\"],\n    type: \"array\",\n    schemaType: \"number\",\n    $data: true,\n    error,\n    code(cxt) {\n        const { keyword, data, schemaCode } = cxt;\n        const op = keyword === \"maxItems\" ? codegen_1.operators.GT : codegen_1.operators.LT;\n        cxt.fail$data((0, codegen_1._) `${data}.length ${op} ${schemaCode}`);\n    },\n};\nexports.default = def;\n//# sourceMappingURL=limitItems.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst codegen_1 = require(\"../../compile/codegen\");\nconst util_1 = require(\"../../compile/util\");\nconst ucs2length_1 = require(\"../../runtime/ucs2length\");\nconst error = {\n    message({ keyword, schemaCode }) {\n        const comp = keyword === \"maxLength\" ? \"more\" : \"fewer\";\n        return (0, codegen_1.str) `must NOT have ${comp} than ${schemaCode} characters`;\n    },\n    params: ({ schemaCode }) => (0, codegen_1._) `{limit: ${schemaCode}}`,\n};\nconst def = {\n    keyword: [\"maxLength\", \"minLength\"],\n    type: \"string\",\n    schemaType: \"number\",\n    $data: true,\n    error,\n    code(cxt) {\n        const { keyword, data, schemaCode, it } = cxt;\n        const op = keyword === \"maxLength\" ? codegen_1.operators.GT : codegen_1.operators.LT;\n        const len = it.opts.unicode === false ? (0, codegen_1._) `${data}.length` : (0, codegen_1._) `${(0, util_1.useFunc)(cxt.gen, ucs2length_1.default)}(${data})`;\n        cxt.fail$data((0, codegen_1._) `${len} ${op} ${schemaCode}`);\n    },\n};\nexports.default = def;\n//# sourceMappingURL=limitLength.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst codegen_1 = require(\"../../compile/codegen\");\nconst ops = codegen_1.operators;\nconst KWDs = {\n    maximum: { okStr: \"<=\", ok: ops.LTE, fail: ops.GT },\n    minimum: { okStr: \">=\", ok: ops.GTE, fail: ops.LT },\n    exclusiveMaximum: { okStr: \"<\", ok: ops.LT, fail: ops.GTE },\n    exclusiveMinimum: { okStr: \">\", ok: ops.GT, fail: ops.LTE },\n};\nconst error = {\n    message: ({ keyword, schemaCode }) => (0, codegen_1.str) `must be ${KWDs[keyword].okStr} ${schemaCode}`,\n    params: ({ keyword, schemaCode }) => (0, codegen_1._) `{comparison: ${KWDs[keyword].okStr}, limit: ${schemaCode}}`,\n};\nconst def = {\n    keyword: Object.keys(KWDs),\n    type: \"number\",\n    schemaType: \"number\",\n    $data: true,\n    error,\n    code(cxt) {\n        const { keyword, data, schemaCode } = cxt;\n        cxt.fail$data((0, codegen_1._) `${data} ${KWDs[keyword].fail} ${schemaCode} || isNaN(${data})`);\n    },\n};\nexports.default = def;\n//# sourceMappingURL=limitNumber.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst codegen_1 = require(\"../../compile/codegen\");\nconst error = {\n    message({ keyword, schemaCode }) {\n        const comp = keyword === \"maxProperties\" ? \"more\" : \"fewer\";\n        return (0, codegen_1.str) `must NOT have ${comp} than ${schemaCode} properties`;\n    },\n    params: ({ schemaCode }) => (0, codegen_1._) `{limit: ${schemaCode}}`,\n};\nconst def = {\n    keyword: [\"maxProperties\", \"minProperties\"],\n    type: \"object\",\n    schemaType: \"number\",\n    $data: true,\n    error,\n    code(cxt) {\n        const { keyword, data, schemaCode } = cxt;\n        const op = keyword === \"maxProperties\" ? codegen_1.operators.GT : codegen_1.operators.LT;\n        cxt.fail$data((0, codegen_1._) `Object.keys(${data}).length ${op} ${schemaCode}`);\n    },\n};\nexports.default = def;\n//# sourceMappingURL=limitProperties.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst codegen_1 = require(\"../../compile/codegen\");\nconst error = {\n    message: ({ schemaCode }) => (0, codegen_1.str) `must be multiple of ${schemaCode}`,\n    params: ({ schemaCode }) => (0, codegen_1._) `{multipleOf: ${schemaCode}}`,\n};\nconst def = {\n    keyword: \"multipleOf\",\n    type: \"number\",\n    schemaType: \"number\",\n    $data: true,\n    error,\n    code(cxt) {\n        const { gen, data, schemaCode, it } = cxt;\n        // const bdt = bad$DataType(schemaCode, <string>def.schemaType, $data)\n        const prec = it.opts.multipleOfPrecision;\n        const res = gen.let(\"res\");\n        const invalid = prec\n            ? (0, codegen_1._) `Math.abs(Math.round(${res}) - ${res}) > 1e-${prec}`\n            : (0, codegen_1._) `${res} !== parseInt(${res})`;\n        cxt.fail$data((0, codegen_1._) `(${schemaCode} === 0 || (${res} = ${data}/${schemaCode}, ${invalid}))`);\n    },\n};\nexports.default = def;\n//# sourceMappingURL=multipleOf.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst code_1 = require(\"../code\");\nconst codegen_1 = require(\"../../compile/codegen\");\nconst error = {\n    message: ({ schemaCode }) => (0, codegen_1.str) `must match pattern \"${schemaCode}\"`,\n    params: ({ schemaCode }) => (0, codegen_1._) `{pattern: ${schemaCode}}`,\n};\nconst def = {\n    keyword: \"pattern\",\n    type: \"string\",\n    schemaType: \"string\",\n    $data: true,\n    error,\n    code(cxt) {\n        const { data, $data, schema, schemaCode, it } = cxt;\n        // TODO regexp should be wrapped in try/catchs\n        const u = it.opts.unicodeRegExp ? \"u\" : \"\";\n        const regExp = $data ? (0, codegen_1._) `(new RegExp(${schemaCode}, ${u}))` : (0, code_1.usePattern)(cxt, schema);\n        cxt.fail$data((0, codegen_1._) `!${regExp}.test(${data})`);\n    },\n};\nexports.default = def;\n//# sourceMappingURL=pattern.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst code_1 = require(\"../code\");\nconst codegen_1 = require(\"../../compile/codegen\");\nconst util_1 = require(\"../../compile/util\");\nconst error = {\n    message: ({ params: { missingProperty } }) => (0, codegen_1.str) `must have required property '${missingProperty}'`,\n    params: ({ params: { missingProperty } }) => (0, codegen_1._) `{missingProperty: ${missingProperty}}`,\n};\nconst def = {\n    keyword: \"required\",\n    type: \"object\",\n    schemaType: \"array\",\n    $data: true,\n    error,\n    code(cxt) {\n        const { gen, schema, schemaCode, data, $data, it } = cxt;\n        const { opts } = it;\n        if (!$data && schema.length === 0)\n            return;\n        const useLoop = schema.length >= opts.loopRequired;\n        if (it.allErrors)\n            allErrorsMode();\n        else\n            exitOnErrorMode();\n        if (opts.strictRequired) {\n            const props = cxt.parentSchema.properties;\n            const { definedProperties } = cxt.it;\n            for (const requiredKey of schema) {\n                if ((props === null || props === void 0 ? void 0 : props[requiredKey]) === undefined && !definedProperties.has(requiredKey)) {\n                    const schemaPath = it.schemaEnv.baseId + it.errSchemaPath;\n                    const msg = `required property \"${requiredKey}\" is not defined at \"${schemaPath}\" (strictRequired)`;\n                    (0, util_1.checkStrictMode)(it, msg, it.opts.strictRequired);\n                }\n            }\n        }\n        function allErrorsMode() {\n            if (useLoop || $data) {\n                cxt.block$data(codegen_1.nil, loopAllRequired);\n            }\n            else {\n                for (const prop of schema) {\n                    (0, code_1.checkReportMissingProp)(cxt, prop);\n                }\n            }\n        }\n        function exitOnErrorMode() {\n            const missing = gen.let(\"missing\");\n            if (useLoop || $data) {\n                const valid = gen.let(\"valid\", true);\n                cxt.block$data(valid, () => loopUntilMissing(missing, valid));\n                cxt.ok(valid);\n            }\n            else {\n                gen.if((0, code_1.checkMissingProp)(cxt, schema, missing));\n                (0, code_1.reportMissingProp)(cxt, missing);\n                gen.else();\n            }\n        }\n        function loopAllRequired() {\n            gen.forOf(\"prop\", schemaCode, (prop) => {\n                cxt.setParams({ missingProperty: prop });\n                gen.if((0, code_1.noPropertyInData)(gen, data, prop, opts.ownProperties), () => cxt.error());\n            });\n        }\n        function loopUntilMissing(missing, valid) {\n            cxt.setParams({ missingProperty: missing });\n            gen.forOf(missing, schemaCode, () => {\n                gen.assign(valid, (0, code_1.propertyInData)(gen, data, missing, opts.ownProperties));\n                gen.if((0, codegen_1.not)(valid), () => {\n                    cxt.error();\n                    gen.break();\n                });\n            }, codegen_1.nil);\n        }\n    },\n};\nexports.default = def;\n//# sourceMappingURL=required.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst dataType_1 = require(\"../../compile/validate/dataType\");\nconst codegen_1 = require(\"../../compile/codegen\");\nconst util_1 = require(\"../../compile/util\");\nconst equal_1 = require(\"../../runtime/equal\");\nconst error = {\n    message: ({ params: { i, j } }) => (0, codegen_1.str) `must NOT have duplicate items (items ## ${j} and ${i} are identical)`,\n    params: ({ params: { i, j } }) => (0, codegen_1._) `{i: ${i}, j: ${j}}`,\n};\nconst def = {\n    keyword: \"uniqueItems\",\n    type: \"array\",\n    schemaType: \"boolean\",\n    $data: true,\n    error,\n    code(cxt) {\n        const { gen, data, $data, schema, parentSchema, schemaCode, it } = cxt;\n        if (!$data && !schema)\n            return;\n        const valid = gen.let(\"valid\");\n        const itemTypes = parentSchema.items ? (0, dataType_1.getSchemaTypes)(parentSchema.items) : [];\n        cxt.block$data(valid, validateUniqueItems, (0, codegen_1._) `${schemaCode} === false`);\n        cxt.ok(valid);\n        function validateUniqueItems() {\n            const i = gen.let(\"i\", (0, codegen_1._) `${data}.length`);\n            const j = gen.let(\"j\");\n            cxt.setParams({ i, j });\n            gen.assign(valid, true);\n            gen.if((0, codegen_1._) `${i} > 1`, () => (canOptimize() ? loopN : loopN2)(i, j));\n        }\n        function canOptimize() {\n            return itemTypes.length > 0 && !itemTypes.some((t) => t === \"object\" || t === \"array\");\n        }\n        function loopN(i, j) {\n            const item = gen.name(\"item\");\n            const wrongType = (0, dataType_1.checkDataTypes)(itemTypes, item, it.opts.strictNumbers, dataType_1.DataType.Wrong);\n            const indices = gen.const(\"indices\", (0, codegen_1._) `{}`);\n            gen.for((0, codegen_1._) `;${i}--;`, () => {\n                gen.let(item, (0, codegen_1._) `${data}[${i}]`);\n                gen.if(wrongType, (0, codegen_1._) `continue`);\n                if (itemTypes.length > 1)\n                    gen.if((0, codegen_1._) `typeof ${item} == \"string\"`, (0, codegen_1._) `${item} += \"_\"`);\n                gen\n                    .if((0, codegen_1._) `typeof ${indices}[${item}] == \"number\"`, () => {\n                    gen.assign(j, (0, codegen_1._) `${indices}[${item}]`);\n                    cxt.error();\n                    gen.assign(valid, false).break();\n                })\n                    .code((0, codegen_1._) `${indices}[${item}] = ${i}`);\n            });\n        }\n        function loopN2(i, j) {\n            const eql = (0, util_1.useFunc)(gen, equal_1.default);\n            const outer = gen.name(\"outer\");\n            gen.label(outer).for((0, codegen_1._) `;${i}--;`, () => gen.for((0, codegen_1._) `${j} = ${i}; ${j}--;`, () => gen.if((0, codegen_1._) `${eql}(${data}[${i}], ${data}[${j}])`, () => {\n                cxt.error();\n                gen.assign(valid, false).break(outer);\n            })));\n        }\n    },\n};\nexports.default = def;\n//# sourceMappingURL=uniqueItems.js.map","import cloneDeep from 'lodash/cloneDeep';\nimport mergeWith from 'lodash/mergeWith';\n\nconst CONFIG_KEY_PART_PATTERN = /^[a-z][a-z0-9]*(?:[-_][a-z][a-z0-9]*)*$/i;\nfunction isObject(value) {\n  return typeof value === \"object\" && value !== null && !Array.isArray(value);\n}\nfunction typeOf(value) {\n  if (value === null) {\n    return \"null\";\n  } else if (Array.isArray(value)) {\n    return \"array\";\n  }\n  const type = typeof value;\n  if (type === \"number\" && isNaN(value)) {\n    return \"nan\";\n  }\n  if (type === \"string\" && value === \"\") {\n    return \"empty-string\";\n  }\n  return type;\n}\nconst errors = {\n  type(key, context, typeName, expected) {\n    return `Invalid type in config for key '${key}' in '${context}', got ${typeName}, wanted ${expected}`;\n  },\n  missing(key) {\n    return `Missing required config value at '${key}'`;\n  },\n  convert(key, context, expected) {\n    return `Unable to convert config value for key '${key}' in '${context}' to a ${expected}`;\n  }\n};\nclass ConfigReader {\n  constructor(data, context = \"mock-config\", fallback, prefix = \"\") {\n    this.data = data;\n    this.context = context;\n    this.fallback = fallback;\n    this.prefix = prefix;\n    this.notifiedFilteredKeys = /* @__PURE__ */ new Set();\n  }\n  static fromConfigs(configs) {\n    if (configs.length === 0) {\n      return new ConfigReader(void 0);\n    }\n    return configs.reduce(\n      (previousReader, { data, context, filteredKeys, deprecatedKeys }) => {\n        const reader = new ConfigReader(data, context, previousReader);\n        reader.filteredKeys = filteredKeys;\n        if (deprecatedKeys) {\n          for (const { key, description } of deprecatedKeys) {\n            console.warn(\n              `The configuration key '${key}' of ${context} is deprecated and may be removed soon. ${description || \"\"}`\n            );\n          }\n        }\n        return reader;\n      },\n      void 0\n    );\n  }\n  has(key) {\n    var _a, _b;\n    const value = this.readValue(key);\n    if (value !== void 0) {\n      return true;\n    }\n    return (_b = (_a = this.fallback) == null ? void 0 : _a.has(key)) != null ? _b : false;\n  }\n  keys() {\n    var _a, _b;\n    const localKeys = this.data ? Object.keys(this.data) : [];\n    const fallbackKeys = (_b = (_a = this.fallback) == null ? void 0 : _a.keys()) != null ? _b : [];\n    return [.../* @__PURE__ */ new Set([...localKeys, ...fallbackKeys])];\n  }\n  get(key) {\n    const value = this.getOptional(key);\n    if (value === void 0) {\n      throw new Error(errors.missing(this.fullKey(key != null ? key : \"\")));\n    }\n    return value;\n  }\n  getOptional(key) {\n    var _a, _b;\n    const value = cloneDeep(this.readValue(key));\n    const fallbackValue = (_a = this.fallback) == null ? void 0 : _a.getOptional(key);\n    if (value === void 0) {\n      if (process.env.NODE_ENV === \"development\") {\n        if (fallbackValue === void 0 && key) {\n          const fullKey = this.fullKey(key);\n          if (((_b = this.filteredKeys) == null ? void 0 : _b.includes(fullKey)) && !this.notifiedFilteredKeys.has(fullKey)) {\n            this.notifiedFilteredKeys.add(fullKey);\n            console.warn(\n              `Failed to read configuration value at '${fullKey}' as it is not visible. See https://backstage.io/docs/conf/defining#visibility for instructions on how to make it visible.`\n            );\n          }\n        }\n      }\n      return fallbackValue;\n    } else if (fallbackValue === void 0) {\n      return value;\n    }\n    return mergeWith(\n      {},\n      { value: fallbackValue },\n      { value },\n      (into, from) => !isObject(from) || !isObject(into) ? from : void 0\n    ).value;\n  }\n  getConfig(key) {\n    const value = this.getOptionalConfig(key);\n    if (value === void 0) {\n      throw new Error(errors.missing(this.fullKey(key)));\n    }\n    return value;\n  }\n  getOptionalConfig(key) {\n    var _a;\n    const value = this.readValue(key);\n    const fallbackConfig = (_a = this.fallback) == null ? void 0 : _a.getOptionalConfig(key);\n    if (isObject(value)) {\n      return this.copy(value, key, fallbackConfig);\n    }\n    if (value !== void 0) {\n      throw new TypeError(\n        errors.type(this.fullKey(key), this.context, typeOf(value), \"object\")\n      );\n    }\n    return fallbackConfig;\n  }\n  getConfigArray(key) {\n    const value = this.getOptionalConfigArray(key);\n    if (value === void 0) {\n      throw new Error(errors.missing(this.fullKey(key)));\n    }\n    return value;\n  }\n  getOptionalConfigArray(key) {\n    var _a;\n    const configs = this.readConfigValue(key, (values) => {\n      if (!Array.isArray(values)) {\n        return { expected: \"object-array\" };\n      }\n      for (const [index, value] of values.entries()) {\n        if (!isObject(value)) {\n          return { expected: \"object-array\", value, key: `${key}[${index}]` };\n        }\n      }\n      return true;\n    });\n    if (!configs) {\n      if (process.env.NODE_ENV === \"development\") {\n        const fullKey = this.fullKey(key);\n        if (((_a = this.filteredKeys) == null ? void 0 : _a.some((k) => k.startsWith(fullKey))) && !this.notifiedFilteredKeys.has(key)) {\n          this.notifiedFilteredKeys.add(key);\n          console.warn(\n            `Failed to read configuration array at '${key}' as it does not have any visible elements. See https://backstage.io/docs/conf/defining#visibility for instructions on how to make it visible.`\n          );\n        }\n      }\n      return void 0;\n    }\n    return configs.map((obj, index) => this.copy(obj, `${key}[${index}]`));\n  }\n  getNumber(key) {\n    const value = this.getOptionalNumber(key);\n    if (value === void 0) {\n      throw new Error(errors.missing(this.fullKey(key)));\n    }\n    return value;\n  }\n  getOptionalNumber(key) {\n    const value = this.readConfigValue(\n      key,\n      (val) => typeof val === \"number\" || typeof val === \"string\" || { expected: \"number\" }\n    );\n    if (typeof value === \"number\" || value === void 0) {\n      return value;\n    }\n    const number = Number(value);\n    if (!Number.isFinite(number)) {\n      throw new Error(\n        errors.convert(this.fullKey(key), this.context, \"number\")\n      );\n    }\n    return number;\n  }\n  getBoolean(key) {\n    const value = this.getOptionalBoolean(key);\n    if (value === void 0) {\n      throw new Error(errors.missing(this.fullKey(key)));\n    }\n    return value;\n  }\n  getOptionalBoolean(key) {\n    return this.readConfigValue(\n      key,\n      (value) => typeof value === \"boolean\" || { expected: \"boolean\" }\n    );\n  }\n  getString(key) {\n    const value = this.getOptionalString(key);\n    if (value === void 0) {\n      throw new Error(errors.missing(this.fullKey(key)));\n    }\n    return value;\n  }\n  getOptionalString(key) {\n    return this.readConfigValue(\n      key,\n      (value) => typeof value === \"string\" && value !== \"\" || { expected: \"string\" }\n    );\n  }\n  getStringArray(key) {\n    const value = this.getOptionalStringArray(key);\n    if (value === void 0) {\n      throw new Error(errors.missing(this.fullKey(key)));\n    }\n    return value;\n  }\n  getOptionalStringArray(key) {\n    return this.readConfigValue(key, (values) => {\n      if (!Array.isArray(values)) {\n        return { expected: \"string-array\" };\n      }\n      for (const [index, value] of values.entries()) {\n        if (typeof value !== \"string\" || value === \"\") {\n          return { expected: \"string-array\", value, key: `${key}[${index}]` };\n        }\n      }\n      return true;\n    });\n  }\n  fullKey(key) {\n    return `${this.prefix}${this.prefix ? \".\" : \"\"}${key}`;\n  }\n  copy(data, key, fallback) {\n    const reader = new ConfigReader(\n      data,\n      this.context,\n      fallback,\n      this.fullKey(key)\n    );\n    reader.filteredKeys = this.filteredKeys;\n    return reader;\n  }\n  readConfigValue(key, validate) {\n    var _a, _b;\n    const value = this.readValue(key);\n    if (value === void 0) {\n      if (process.env.NODE_ENV === \"development\") {\n        const fullKey = this.fullKey(key);\n        if (((_a = this.filteredKeys) == null ? void 0 : _a.includes(fullKey)) && !this.notifiedFilteredKeys.has(fullKey)) {\n          this.notifiedFilteredKeys.add(fullKey);\n          console.warn(\n            `Failed to read configuration value at '${fullKey}' as it is not visible. See https://backstage.io/docs/conf/defining#visibility for instructions on how to make it visible.`\n          );\n        }\n      }\n      return (_b = this.fallback) == null ? void 0 : _b.readConfigValue(key, validate);\n    }\n    const result = validate(value);\n    if (result !== true) {\n      const { key: keyName = key, value: theValue = value, expected } = result;\n      throw new TypeError(\n        errors.type(\n          this.fullKey(keyName),\n          this.context,\n          typeOf(theValue),\n          expected\n        )\n      );\n    }\n    return value;\n  }\n  readValue(key) {\n    const parts = key ? key.split(\".\") : [];\n    for (const part of parts) {\n      if (!CONFIG_KEY_PART_PATTERN.test(part)) {\n        throw new TypeError(`Invalid config key '${key}'`);\n      }\n    }\n    if (this.data === void 0) {\n      return void 0;\n    }\n    let value = this.data;\n    for (const [index, part] of parts.entries()) {\n      if (isObject(value)) {\n        value = value[part];\n      } else if (value !== void 0) {\n        const badKey = this.fullKey(parts.slice(0, index).join(\".\"));\n        throw new TypeError(\n          errors.type(badKey, this.context, typeOf(value), \"object\")\n        );\n      }\n    }\n    return value;\n  }\n}\n\nexport { ConfigReader };\n//# sourceMappingURL=index.esm.js.map\n","import React, { useContext, Children, isValidElement, useEffect, useMemo, useState, createContext } from 'react';\nimport PropTypes from 'prop-types';\nimport { createVersionedContext, createVersionedValueMap, getOrCreateGlobalSingleton } from '@backstage/version-bridge';\nimport ObservableImpl from 'zen-observable';\nimport { SessionState, FeatureFlagState, getComponentData, attachComponentData, useApi, featureFlagsApiRef, AnalyticsContext, useAnalytics, appThemeApiRef, configApiRef, identityApiRef, useApp, useElementFilter } from '@backstage/core-plugin-api';\nimport { z } from 'zod';\nimport { ConfigReader } from '@backstage/config';\nexport { ConfigReader } from '@backstage/config';\nimport { matchRoutes, generatePath, useLocation, createRoutesFromChildren, Route, Routes, useRoutes } from 'react-router-dom';\nimport useAsync from 'react-use/lib/useAsync';\nimport useObservable from 'react-use/lib/useObservable';\n\nclass ApiAggregator {\n  constructor(...holders) {\n    this.holders = holders;\n  }\n  get(apiRef) {\n    for (const holder of this.holders) {\n      const api = holder.get(apiRef);\n      if (api) {\n        return api;\n      }\n    }\n    return void 0;\n  }\n}\n\nconst ApiContext = createVersionedContext(\"api-context\");\nconst ApiProvider = (props) => {\n  var _a;\n  const { apis, children } = props;\n  const parentHolder = (_a = useContext(ApiContext)) == null ? void 0 : _a.atVersion(1);\n  const holder = parentHolder ? new ApiAggregator(apis, parentHolder) : apis;\n  return /* @__PURE__ */ React.createElement(ApiContext.Provider, {\n    value: createVersionedValueMap({ 1: holder }),\n    children\n  });\n};\nApiProvider.propTypes = {\n  apis: PropTypes.shape({ get: PropTypes.func.isRequired }).isRequired,\n  children: PropTypes.node\n};\n\nclass ApiResolver {\n  constructor(factories) {\n    this.factories = factories;\n    this.apis = /* @__PURE__ */ new Map();\n  }\n  static validateFactories(factories, apis) {\n    for (const api of apis) {\n      const heap = [api];\n      const allDeps = /* @__PURE__ */ new Set();\n      while (heap.length) {\n        const apiRef = heap.shift();\n        const factory = factories.get(apiRef);\n        if (!factory) {\n          continue;\n        }\n        for (const dep of Object.values(factory.deps)) {\n          if (dep.id === api.id) {\n            throw new Error(`Circular dependency of api factory for ${api}`);\n          }\n          if (!allDeps.has(dep)) {\n            allDeps.add(dep);\n            heap.push(dep);\n          }\n        }\n      }\n    }\n  }\n  get(ref) {\n    return this.load(ref);\n  }\n  load(ref, loading = []) {\n    const impl = this.apis.get(ref.id);\n    if (impl) {\n      return impl;\n    }\n    const factory = this.factories.get(ref);\n    if (!factory) {\n      return void 0;\n    }\n    if (loading.includes(factory.api)) {\n      throw new Error(`Circular dependency of api factory for ${factory.api}`);\n    }\n    const deps = this.loadDeps(ref, factory.deps, [...loading, factory.api]);\n    const api = factory.factory(deps);\n    this.apis.set(ref.id, api);\n    return api;\n  }\n  loadDeps(dependent, apis, loading) {\n    const impls = {};\n    for (const key in apis) {\n      if (apis.hasOwnProperty(key)) {\n        const ref = apis[key];\n        const api = this.load(ref, loading);\n        if (!api) {\n          throw new Error(\n            `No API factory available for dependency ${ref} of dependent ${dependent}`\n          );\n        }\n        impls[key] = api;\n      }\n    }\n    return impls;\n  }\n}\n\nvar ScopePriority = /* @__PURE__ */ ((ScopePriority2) => {\n  ScopePriority2[ScopePriority2[\"default\"] = 10] = \"default\";\n  ScopePriority2[ScopePriority2[\"app\"] = 50] = \"app\";\n  ScopePriority2[ScopePriority2[\"static\"] = 100] = \"static\";\n  return ScopePriority2;\n})(ScopePriority || {});\nclass ApiFactoryRegistry {\n  constructor() {\n    this.factories = /* @__PURE__ */ new Map();\n  }\n  register(scope, factory) {\n    const priority = ScopePriority[scope];\n    const existing = this.factories.get(factory.api.id);\n    if (existing && existing.priority >= priority) {\n      return false;\n    }\n    this.factories.set(factory.api.id, { priority, factory });\n    return true;\n  }\n  get(api) {\n    const tuple = this.factories.get(api.id);\n    if (!tuple) {\n      return void 0;\n    }\n    return tuple.factory;\n  }\n  getAllApis() {\n    const refs = /* @__PURE__ */ new Set();\n    for (const { factory } of this.factories.values()) {\n      refs.add(factory.api);\n    }\n    return refs;\n  }\n}\n\nfunction showLoginPopup(options) {\n  return new Promise((resolve, reject) => {\n    const width = options.width || 500;\n    const height = options.height || 700;\n    const left = window.screen.width / 2 - width / 2;\n    const top = window.screen.height / 2 - height / 2;\n    const popup = window.open(\n      options.url,\n      options.name,\n      `menubar=no,location=no,resizable=no,scrollbars=no,status=no,width=${width},height=${height},top=${top},left=${left}`\n    );\n    let targetOrigin = \"\";\n    if (!popup || typeof popup.closed === \"undefined\" || popup.closed) {\n      const error = new Error(\"Failed to open auth popup.\");\n      error.name = \"PopupRejectedError\";\n      reject(error);\n      return;\n    }\n    const messageListener = (event) => {\n      if (event.source !== popup) {\n        return;\n      }\n      if (event.origin !== options.origin) {\n        return;\n      }\n      const { data } = event;\n      if (data.type === \"config_info\") {\n        targetOrigin = data.targetOrigin;\n        return;\n      }\n      if (data.type !== \"authorization_response\") {\n        return;\n      }\n      const authResult = data;\n      if (\"error\" in authResult) {\n        const error = new Error(authResult.error.message);\n        error.name = authResult.error.name;\n        reject(error);\n      } else {\n        resolve(authResult.response);\n      }\n      done();\n    };\n    const intervalId = setInterval(() => {\n      if (popup.closed) {\n        const errMessage = `Login failed, ${targetOrigin && targetOrigin !== window.location.origin ? `Incorrect app origin, expected ${targetOrigin}` : \"popup was closed\"}`;\n        const error = new Error(errMessage);\n        error.name = \"PopupClosedError\";\n        reject(error);\n        done();\n      }\n    }, 100);\n    function done() {\n      window.removeEventListener(\"message\", messageListener);\n      clearInterval(intervalId);\n    }\n    window.addEventListener(\"message\", messageListener);\n  });\n}\n\nfunction defaultJoinScopes(scopes) {\n  return [...scopes].join(\" \");\n}\nclass DefaultAuthConnector {\n  constructor(options) {\n    const {\n      discoveryApi,\n      environment,\n      provider,\n      joinScopes = defaultJoinScopes,\n      oauthRequestApi,\n      sessionTransform = (id) => id\n    } = options;\n    this.authRequester = oauthRequestApi.createAuthRequester({\n      provider,\n      onAuthRequest: (scopes) => this.showPopup(scopes)\n    });\n    this.discoveryApi = discoveryApi;\n    this.environment = environment;\n    this.provider = provider;\n    this.joinScopesFunc = joinScopes;\n    this.sessionTransform = sessionTransform;\n  }\n  async createSession(options) {\n    if (options.instantPopup) {\n      return this.showPopup(options.scopes);\n    }\n    return this.authRequester(options.scopes);\n  }\n  async refreshSession() {\n    const res = await fetch(\n      await this.buildUrl(\"/refresh\", { optional: true }),\n      {\n        headers: {\n          \"x-requested-with\": \"XMLHttpRequest\"\n        },\n        credentials: \"include\"\n      }\n    ).catch((error) => {\n      throw new Error(`Auth refresh request failed, ${error}`);\n    });\n    if (!res.ok) {\n      const error = new Error(\n        `Auth refresh request failed, ${res.statusText}`\n      );\n      error.status = res.status;\n      throw error;\n    }\n    const authInfo = await res.json();\n    if (authInfo.error) {\n      const error = new Error(authInfo.error.message);\n      if (authInfo.error.name) {\n        error.name = authInfo.error.name;\n      }\n      throw error;\n    }\n    return await this.sessionTransform(authInfo);\n  }\n  async removeSession() {\n    const res = await fetch(await this.buildUrl(\"/logout\"), {\n      method: \"POST\",\n      headers: {\n        \"x-requested-with\": \"XMLHttpRequest\"\n      },\n      credentials: \"include\"\n    }).catch((error) => {\n      throw new Error(`Logout request failed, ${error}`);\n    });\n    if (!res.ok) {\n      const error = new Error(`Logout request failed, ${res.statusText}`);\n      error.status = res.status;\n      throw error;\n    }\n  }\n  async showPopup(scopes) {\n    const scope = this.joinScopesFunc(scopes);\n    const popupUrl = await this.buildUrl(\"/start\", {\n      scope,\n      origin: location.origin\n    });\n    const payload = await showLoginPopup({\n      url: popupUrl,\n      name: `${this.provider.title} Login`,\n      origin: new URL(popupUrl).origin,\n      width: 450,\n      height: 730\n    });\n    return await this.sessionTransform(payload);\n  }\n  async buildUrl(path, query) {\n    const baseUrl = await this.discoveryApi.getBaseUrl(\"auth\");\n    const queryString = this.buildQueryString({\n      ...query,\n      env: this.environment\n    });\n    return `${baseUrl}/${this.provider.id}${path}${queryString}`;\n  }\n  buildQueryString(query) {\n    if (!query) {\n      return \"\";\n    }\n    const queryString = Object.entries(query).map(([key, value]) => {\n      if (typeof value === \"string\") {\n        return `${encodeURIComponent(key)}=${encodeURIComponent(value)}`;\n      } else if (value) {\n        return encodeURIComponent(key);\n      }\n      return void 0;\n    }).filter(Boolean).join(\"&\");\n    if (!queryString) {\n      return \"\";\n    }\n    return `?${queryString}`;\n  }\n}\n\nclass DirectAuthConnector {\n  constructor(options) {\n    const { discoveryApi, environment, provider } = options;\n    this.discoveryApi = discoveryApi;\n    this.environment = environment;\n    this.provider = provider;\n  }\n  async createSession() {\n    const popupUrl = await this.buildUrl(\"/start\");\n    const payload = await showLoginPopup({\n      url: popupUrl,\n      name: `${this.provider.title} Login`,\n      origin: new URL(popupUrl).origin,\n      width: 450,\n      height: 730\n    });\n    return {\n      ...payload,\n      id: payload.profile.email\n    };\n  }\n  async refreshSession() {\n  }\n  async removeSession() {\n    const res = await fetch(await this.buildUrl(\"/logout\"), {\n      method: \"POST\",\n      headers: {\n        \"x-requested-with\": \"XMLHttpRequest\"\n      },\n      credentials: \"include\"\n    }).catch((error) => {\n      throw new Error(`Logout request failed, ${error}`);\n    });\n    if (!res.ok) {\n      const error = new Error(`Logout request failed, ${res.statusText}`);\n      error.status = res.status;\n      throw error;\n    }\n  }\n  async buildUrl(path) {\n    const baseUrl = await this.discoveryApi.getBaseUrl(\"auth\");\n    return `${baseUrl}/${this.provider.id}${path}?env=${this.environment}`;\n  }\n}\n\nfunction hasScopes$1(searched, searchFor) {\n  for (const scope of searchFor) {\n    if (!searched.has(scope)) {\n      return false;\n    }\n  }\n  return true;\n}\nclass SessionScopeHelper {\n  constructor(options) {\n    this.options = options;\n  }\n  sessionExistsAndHasScope(session, scopes) {\n    if (!session) {\n      return false;\n    }\n    if (!scopes) {\n      return true;\n    }\n    if (this.options.sessionScopes === void 0) {\n      return true;\n    }\n    const sessionScopes = this.options.sessionScopes(session);\n    return hasScopes$1(sessionScopes, scopes);\n  }\n  getExtendedScope(session, scopes) {\n    const newScope = new Set(this.options.defaultScopes);\n    if (session && this.options.sessionScopes !== void 0) {\n      const sessionScopes = this.options.sessionScopes(session);\n      for (const scope of sessionScopes) {\n        newScope.add(scope);\n      }\n    }\n    if (scopes) {\n      for (const scope of scopes) {\n        newScope.add(scope);\n      }\n    }\n    return newScope;\n  }\n}\n\nclass PublishSubject {\n  constructor() {\n    this.isClosed = false;\n    this.observable = new ObservableImpl((subscriber) => {\n      if (this.isClosed) {\n        if (this.terminatingError) {\n          subscriber.error(this.terminatingError);\n        } else {\n          subscriber.complete();\n        }\n        return () => {\n        };\n      }\n      this.subscribers.add(subscriber);\n      return () => {\n        this.subscribers.delete(subscriber);\n      };\n    });\n    this.subscribers = /* @__PURE__ */ new Set();\n  }\n  [Symbol.observable]() {\n    return this;\n  }\n  get closed() {\n    return this.isClosed;\n  }\n  next(value) {\n    if (this.isClosed) {\n      throw new Error(\"PublishSubject is closed\");\n    }\n    this.subscribers.forEach((subscriber) => subscriber.next(value));\n  }\n  error(error) {\n    if (this.isClosed) {\n      throw new Error(\"PublishSubject is closed\");\n    }\n    this.isClosed = true;\n    this.terminatingError = error;\n    this.subscribers.forEach((subscriber) => subscriber.error(error));\n  }\n  complete() {\n    if (this.isClosed) {\n      throw new Error(\"PublishSubject is closed\");\n    }\n    this.isClosed = true;\n    this.subscribers.forEach((subscriber) => subscriber.complete());\n  }\n  subscribe(onNext, onError, onComplete) {\n    const observer = typeof onNext === \"function\" ? {\n      next: onNext,\n      error: onError,\n      complete: onComplete\n    } : onNext;\n    return this.observable.subscribe(observer);\n  }\n}\nclass BehaviorSubject {\n  constructor(value) {\n    this.subscribers = /* @__PURE__ */ new Set();\n    this.isClosed = false;\n    this.currentValue = value;\n    this.terminatingError = void 0;\n    this.observable = new ObservableImpl((subscriber) => {\n      if (this.isClosed) {\n        if (this.terminatingError) {\n          subscriber.error(this.terminatingError);\n        } else {\n          subscriber.complete();\n        }\n        return () => {\n        };\n      }\n      subscriber.next(this.currentValue);\n      this.subscribers.add(subscriber);\n      return () => {\n        this.subscribers.delete(subscriber);\n      };\n    });\n  }\n  [Symbol.observable]() {\n    return this;\n  }\n  get closed() {\n    return this.isClosed;\n  }\n  next(value) {\n    if (this.isClosed) {\n      throw new Error(\"BehaviorSubject is closed\");\n    }\n    this.currentValue = value;\n    this.subscribers.forEach((subscriber) => subscriber.next(value));\n  }\n  error(error) {\n    if (this.isClosed) {\n      throw new Error(\"BehaviorSubject is closed\");\n    }\n    this.isClosed = true;\n    this.terminatingError = error;\n    this.subscribers.forEach((subscriber) => subscriber.error(error));\n  }\n  complete() {\n    if (this.isClosed) {\n      throw new Error(\"BehaviorSubject is closed\");\n    }\n    this.isClosed = true;\n    this.subscribers.forEach((subscriber) => subscriber.complete());\n  }\n  subscribe(onNext, onError, onComplete) {\n    const observer = typeof onNext === \"function\" ? {\n      next: onNext,\n      error: onError,\n      complete: onComplete\n    } : onNext;\n    return this.observable.subscribe(observer);\n  }\n}\n\nclass SessionStateTracker {\n  constructor() {\n    this.subject = new BehaviorSubject(\n      SessionState.SignedOut\n    );\n    this.signedIn = false;\n  }\n  setIsSignedIn(isSignedIn) {\n    if (this.signedIn !== isSignedIn) {\n      this.signedIn = isSignedIn;\n      this.subject.next(\n        this.signedIn ? SessionState.SignedIn : SessionState.SignedOut\n      );\n    }\n  }\n  sessionState$() {\n    return this.subject;\n  }\n}\n\nclass RefreshingAuthSessionManager {\n  constructor(options) {\n    this.stateTracker = new SessionStateTracker();\n    const {\n      connector,\n      defaultScopes = /* @__PURE__ */ new Set(),\n      sessionScopes,\n      sessionShouldRefresh\n    } = options;\n    this.connector = connector;\n    this.sessionScopesFunc = sessionScopes;\n    this.sessionShouldRefreshFunc = sessionShouldRefresh;\n    this.helper = new SessionScopeHelper({ sessionScopes, defaultScopes });\n  }\n  async getSession(options) {\n    if (this.helper.sessionExistsAndHasScope(this.currentSession, options.scopes)) {\n      const shouldRefresh = this.sessionShouldRefreshFunc(this.currentSession);\n      if (!shouldRefresh) {\n        return this.currentSession;\n      }\n      try {\n        const refreshedSession = await this.collapsedSessionRefresh();\n        const currentScopes = this.sessionScopesFunc(this.currentSession);\n        const refreshedScopes = this.sessionScopesFunc(refreshedSession);\n        if (hasScopes$1(refreshedScopes, currentScopes)) {\n          this.currentSession = refreshedSession;\n        }\n        return refreshedSession;\n      } catch (error) {\n        if (options.optional) {\n          return void 0;\n        }\n        throw error;\n      }\n    }\n    if (!this.currentSession && !options.instantPopup) {\n      try {\n        const newSession = await this.collapsedSessionRefresh();\n        this.currentSession = newSession;\n        return this.getSession(options);\n      } catch {\n      }\n    }\n    if (options.optional) {\n      return void 0;\n    }\n    this.currentSession = await this.connector.createSession({\n      ...options,\n      scopes: this.helper.getExtendedScope(this.currentSession, options.scopes)\n    });\n    this.stateTracker.setIsSignedIn(true);\n    return this.currentSession;\n  }\n  async removeSession() {\n    this.currentSession = void 0;\n    await this.connector.removeSession();\n    this.stateTracker.setIsSignedIn(false);\n  }\n  sessionState$() {\n    return this.stateTracker.sessionState$();\n  }\n  async collapsedSessionRefresh() {\n    if (this.refreshPromise) {\n      return this.refreshPromise;\n    }\n    this.refreshPromise = this.connector.refreshSession();\n    try {\n      const session = await this.refreshPromise;\n      this.stateTracker.setIsSignedIn(true);\n      return session;\n    } finally {\n      delete this.refreshPromise;\n    }\n  }\n}\n\nclass StaticAuthSessionManager {\n  constructor(options) {\n    this.stateTracker = new SessionStateTracker();\n    const { connector, defaultScopes = /* @__PURE__ */ new Set(), sessionScopes } = options;\n    this.connector = connector;\n    this.helper = new SessionScopeHelper({ sessionScopes, defaultScopes });\n  }\n  setSession(session) {\n    this.currentSession = session;\n    this.stateTracker.setIsSignedIn(Boolean(session));\n  }\n  async getSession(options) {\n    if (this.helper.sessionExistsAndHasScope(this.currentSession, options.scopes)) {\n      return this.currentSession;\n    }\n    if (options.optional) {\n      return void 0;\n    }\n    this.currentSession = await this.connector.createSession({\n      ...options,\n      scopes: this.helper.getExtendedScope(this.currentSession, options.scopes)\n    });\n    this.stateTracker.setIsSignedIn(true);\n    return this.currentSession;\n  }\n  async removeSession() {\n    this.currentSession = void 0;\n    this.stateTracker.setIsSignedIn(false);\n  }\n  sessionState$() {\n    return this.stateTracker.sessionState$();\n  }\n}\n\nclass AuthSessionStore {\n  constructor(options) {\n    const {\n      manager,\n      storageKey,\n      schema,\n      sessionScopes,\n      sessionShouldRefresh = () => false\n    } = options;\n    this.manager = manager;\n    this.storageKey = storageKey;\n    this.schema = schema;\n    this.sessionShouldRefreshFunc = sessionShouldRefresh;\n    this.helper = new SessionScopeHelper({\n      sessionScopes,\n      defaultScopes: /* @__PURE__ */ new Set()\n    });\n  }\n  setSession(session) {\n    this.manager.setSession(session);\n    this.saveSession(session);\n  }\n  async getSession(options) {\n    const { scopes } = options;\n    const session = this.loadSession();\n    if (this.helper.sessionExistsAndHasScope(session, scopes)) {\n      const shouldRefresh = this.sessionShouldRefreshFunc(session);\n      if (!shouldRefresh) {\n        this.manager.setSession(session);\n        return session;\n      }\n    }\n    const newSession = await this.manager.getSession(options);\n    this.saveSession(newSession);\n    return newSession;\n  }\n  async removeSession() {\n    localStorage.removeItem(this.storageKey);\n    await this.manager.removeSession();\n  }\n  sessionState$() {\n    return this.manager.sessionState$();\n  }\n  loadSession() {\n    try {\n      const sessionJson = localStorage.getItem(this.storageKey);\n      if (sessionJson) {\n        const session = JSON.parse(sessionJson, (_key, value) => {\n          if ((value == null ? void 0 : value.__type) === \"Set\") {\n            return new Set(value.__value);\n          }\n          return value;\n        });\n        try {\n          return this.schema.parse(session);\n        } catch (e) {\n          console.log(\n            `Failed to load session from local storage because it did not conform to the expected schema, ${e}`\n          );\n          throw e;\n        }\n      }\n      return void 0;\n    } catch (error) {\n      localStorage.removeItem(this.storageKey);\n      return void 0;\n    }\n  }\n  saveSession(session) {\n    if (session === void 0) {\n      localStorage.removeItem(this.storageKey);\n      return;\n    }\n    try {\n      this.schema.parse(session);\n    } catch (e) {\n      console.warn(\n        `Failed to save session to local storage because it did not conform to the expected schema, ${e}`\n      );\n      return;\n    }\n    localStorage.setItem(\n      this.storageKey,\n      JSON.stringify(session, (_key, value) => {\n        if (value instanceof Set) {\n          return {\n            __type: \"Set\",\n            __value: Array.from(value)\n          };\n        }\n        return value;\n      })\n    );\n  }\n}\n\nconst DEFAULT_PROVIDER$9 = {\n  id: \"oauth2\",\n  title: \"Your Identity Provider\",\n  icon: () => null\n};\nclass OAuth2 {\n  static create(options) {\n    const {\n      discoveryApi,\n      environment = \"development\",\n      provider = DEFAULT_PROVIDER$9,\n      oauthRequestApi,\n      defaultScopes = [],\n      scopeTransform = (x) => x\n    } = options;\n    const connector = new DefaultAuthConnector({\n      discoveryApi,\n      environment,\n      provider,\n      oauthRequestApi,\n      sessionTransform(res) {\n        return {\n          ...res,\n          providerInfo: {\n            idToken: res.providerInfo.idToken,\n            accessToken: res.providerInfo.accessToken,\n            scopes: OAuth2.normalizeScopes(\n              scopeTransform,\n              res.providerInfo.scope\n            ),\n            expiresAt: new Date(\n              Date.now() + res.providerInfo.expiresInSeconds * 1e3\n            )\n          }\n        };\n      }\n    });\n    const sessionManager = new RefreshingAuthSessionManager({\n      connector,\n      defaultScopes: new Set(defaultScopes),\n      sessionScopes: (session) => session.providerInfo.scopes,\n      sessionShouldRefresh: (session) => {\n        const expiresInSec = (session.providerInfo.expiresAt.getTime() - Date.now()) / 1e3;\n        return expiresInSec < 60 * 5;\n      }\n    });\n    return new OAuth2({ sessionManager, scopeTransform });\n  }\n  constructor(options) {\n    this.sessionManager = options.sessionManager;\n    this.scopeTransform = options.scopeTransform;\n  }\n  async signIn() {\n    await this.getAccessToken();\n  }\n  async signOut() {\n    await this.sessionManager.removeSession();\n  }\n  sessionState$() {\n    return this.sessionManager.sessionState$();\n  }\n  async getAccessToken(scope, options) {\n    var _a;\n    const normalizedScopes = OAuth2.normalizeScopes(this.scopeTransform, scope);\n    const session = await this.sessionManager.getSession({\n      ...options,\n      scopes: normalizedScopes\n    });\n    return (_a = session == null ? void 0 : session.providerInfo.accessToken) != null ? _a : \"\";\n  }\n  async getIdToken(options = {}) {\n    var _a;\n    const session = await this.sessionManager.getSession(options);\n    return (_a = session == null ? void 0 : session.providerInfo.idToken) != null ? _a : \"\";\n  }\n  async getBackstageIdentity(options = {}) {\n    const session = await this.sessionManager.getSession(options);\n    return session == null ? void 0 : session.backstageIdentity;\n  }\n  async getProfile(options = {}) {\n    const session = await this.sessionManager.getSession(options);\n    return session == null ? void 0 : session.profile;\n  }\n  static normalizeScopes(scopeTransform, scopes) {\n    if (!scopes) {\n      return /* @__PURE__ */ new Set();\n    }\n    const scopeList = Array.isArray(scopes) ? scopes : scopes.split(/[\\s|,]/).filter(Boolean);\n    return new Set(scopeTransform(scopeList));\n  }\n}\n\nconst DEFAULT_PROVIDER$8 = {\n  id: \"github\",\n  title: \"GitHub\",\n  icon: () => null\n};\nclass GithubAuth {\n  static create(options) {\n    const {\n      discoveryApi,\n      environment = \"development\",\n      provider = DEFAULT_PROVIDER$8,\n      oauthRequestApi,\n      defaultScopes = [\"read:user\"]\n    } = options;\n    return OAuth2.create({\n      discoveryApi,\n      oauthRequestApi,\n      provider,\n      environment,\n      defaultScopes\n    });\n  }\n}\n\nconst DEFAULT_PROVIDER$7 = {\n  id: \"gitlab\",\n  title: \"GitLab\",\n  icon: () => null\n};\nclass GitlabAuth {\n  static create(options) {\n    const {\n      discoveryApi,\n      environment = \"development\",\n      provider = DEFAULT_PROVIDER$7,\n      oauthRequestApi,\n      defaultScopes = [\"read_user\"]\n    } = options;\n    return OAuth2.create({\n      discoveryApi,\n      oauthRequestApi,\n      provider,\n      environment,\n      defaultScopes\n    });\n  }\n}\n\nconst DEFAULT_PROVIDER$6 = {\n  id: \"google\",\n  title: \"Google\",\n  icon: () => null\n};\nconst SCOPE_PREFIX$1 = \"https://www.googleapis.com/auth/\";\nclass GoogleAuth {\n  static create(options) {\n    const {\n      discoveryApi,\n      oauthRequestApi,\n      environment = \"development\",\n      provider = DEFAULT_PROVIDER$6,\n      defaultScopes = [\n        \"openid\",\n        `${SCOPE_PREFIX$1}userinfo.email`,\n        `${SCOPE_PREFIX$1}userinfo.profile`\n      ]\n    } = options;\n    return OAuth2.create({\n      discoveryApi,\n      oauthRequestApi,\n      provider,\n      environment,\n      defaultScopes,\n      scopeTransform(scopes) {\n        return scopes.map((scope) => {\n          if (scope === \"openid\") {\n            return scope;\n          }\n          if (scope === \"profile\" || scope === \"email\") {\n            return `${SCOPE_PREFIX$1}userinfo.${scope}`;\n          }\n          if (scope.startsWith(SCOPE_PREFIX$1)) {\n            return scope;\n          }\n          return `${SCOPE_PREFIX$1}${scope}`;\n        });\n      }\n    });\n  }\n}\n\nconst DEFAULT_PROVIDER$5 = {\n  id: \"okta\",\n  title: \"Okta\",\n  icon: () => null\n};\nconst OKTA_OIDC_SCOPES = /* @__PURE__ */ new Set([\n  \"openid\",\n  \"profile\",\n  \"email\",\n  \"phone\",\n  \"address\",\n  \"groups\",\n  \"offline_access\"\n]);\nconst OKTA_SCOPE_PREFIX = \"okta.\";\nclass OktaAuth {\n  static create(options) {\n    const {\n      discoveryApi,\n      environment = \"development\",\n      provider = DEFAULT_PROVIDER$5,\n      oauthRequestApi,\n      defaultScopes = [\"openid\", \"email\", \"profile\", \"offline_access\"]\n    } = options;\n    return OAuth2.create({\n      discoveryApi,\n      oauthRequestApi,\n      provider,\n      environment,\n      defaultScopes,\n      scopeTransform(scopes) {\n        return scopes.map((scope) => {\n          if (OKTA_OIDC_SCOPES.has(scope)) {\n            return scope;\n          }\n          if (scope.startsWith(OKTA_SCOPE_PREFIX)) {\n            return scope;\n          }\n          return `${OKTA_SCOPE_PREFIX}${scope}`;\n        });\n      }\n    });\n  }\n}\n\nconst samlSessionSchema = z.object({\n  profile: z.object({\n    email: z.string().optional(),\n    displayName: z.string().optional(),\n    picture: z.string().optional()\n  }),\n  backstageIdentity: z.object({\n    token: z.string(),\n    identity: z.object({\n      type: z.literal(\"user\"),\n      userEntityRef: z.string(),\n      ownershipEntityRefs: z.array(z.string())\n    })\n  })\n});\n\nconst DEFAULT_PROVIDER$4 = {\n  id: \"saml\",\n  title: \"SAML\",\n  icon: () => null\n};\nclass SamlAuth {\n  constructor(sessionManager) {\n    this.sessionManager = sessionManager;\n  }\n  static create(options) {\n    const {\n      discoveryApi,\n      environment = \"development\",\n      provider = DEFAULT_PROVIDER$4\n    } = options;\n    const connector = new DirectAuthConnector({\n      discoveryApi,\n      environment,\n      provider\n    });\n    const sessionManager = new StaticAuthSessionManager({\n      connector\n    });\n    const authSessionStore = new AuthSessionStore({\n      manager: sessionManager,\n      storageKey: `${provider.id}Session`,\n      schema: samlSessionSchema\n    });\n    return new SamlAuth(authSessionStore);\n  }\n  sessionState$() {\n    return this.sessionManager.sessionState$();\n  }\n  async signIn() {\n    await this.getBackstageIdentity({});\n  }\n  async signOut() {\n    await this.sessionManager.removeSession();\n  }\n  async getBackstageIdentity(options = {}) {\n    const session = await this.sessionManager.getSession(options);\n    return session == null ? void 0 : session.backstageIdentity;\n  }\n  async getProfile(options = {}) {\n    const session = await this.sessionManager.getSession(options);\n    return session == null ? void 0 : session.profile;\n  }\n}\n\nconst DEFAULT_PROVIDER$3 = {\n  id: \"microsoft\",\n  title: \"Microsoft\",\n  icon: () => null\n};\nclass MicrosoftAuth {\n  static create(options) {\n    const {\n      environment = \"development\",\n      provider = DEFAULT_PROVIDER$3,\n      oauthRequestApi,\n      discoveryApi,\n      defaultScopes = [\n        \"openid\",\n        \"offline_access\",\n        \"profile\",\n        \"email\",\n        \"User.Read\"\n      ]\n    } = options;\n    return OAuth2.create({\n      discoveryApi,\n      oauthRequestApi,\n      provider,\n      environment,\n      defaultScopes\n    });\n  }\n}\n\nconst DEFAULT_PROVIDER$2 = {\n  id: \"onelogin\",\n  title: \"onelogin\",\n  icon: () => null\n};\nconst OIDC_SCOPES = /* @__PURE__ */ new Set([\n  \"openid\",\n  \"profile\",\n  \"email\",\n  \"phone\",\n  \"address\",\n  \"groups\",\n  \"offline_access\"\n]);\nconst SCOPE_PREFIX = \"onelogin.\";\nclass OneLoginAuth {\n  static create(options) {\n    const {\n      discoveryApi,\n      environment = \"development\",\n      provider = DEFAULT_PROVIDER$2,\n      oauthRequestApi\n    } = options;\n    return OAuth2.create({\n      discoveryApi,\n      oauthRequestApi,\n      provider,\n      environment,\n      defaultScopes: [\"openid\", \"email\", \"profile\", \"offline_access\"],\n      scopeTransform(scopes) {\n        return scopes.map((scope) => {\n          if (OIDC_SCOPES.has(scope)) {\n            return scope;\n          }\n          if (scope.startsWith(SCOPE_PREFIX)) {\n            return scope;\n          }\n          return `${SCOPE_PREFIX}${scope}`;\n        });\n      }\n    });\n  }\n}\n\nconst DEFAULT_PROVIDER$1 = {\n  id: \"bitbucket\",\n  title: \"Bitbucket\",\n  icon: () => null\n};\nclass BitbucketAuth {\n  static create(options) {\n    const {\n      discoveryApi,\n      environment = \"development\",\n      provider = DEFAULT_PROVIDER$1,\n      oauthRequestApi,\n      defaultScopes = [\"team\"]\n    } = options;\n    return OAuth2.create({\n      discoveryApi,\n      oauthRequestApi,\n      provider,\n      environment,\n      defaultScopes\n    });\n  }\n}\n\nconst DEFAULT_PROVIDER = {\n  id: \"atlassian\",\n  title: \"Atlassian\",\n  icon: () => null\n};\nclass AtlassianAuth {\n  static create(options) {\n    const {\n      discoveryApi,\n      environment = \"development\",\n      provider = DEFAULT_PROVIDER,\n      oauthRequestApi\n    } = options;\n    return OAuth2.create({\n      discoveryApi,\n      oauthRequestApi,\n      provider,\n      environment\n    });\n  }\n}\n\nclass AlertApiForwarder {\n  constructor() {\n    this.subject = new PublishSubject();\n  }\n  post(alert) {\n    this.subject.next(alert);\n  }\n  alert$() {\n    return this.subject;\n  }\n}\n\nclass MultipleAnalyticsApi {\n  constructor(actualApis) {\n    this.actualApis = actualApis;\n  }\n  static fromApis(actualApis) {\n    return new MultipleAnalyticsApi(actualApis);\n  }\n  captureEvent(event) {\n    this.actualApis.forEach((analyticsApi) => {\n      try {\n        analyticsApi.captureEvent(event);\n      } catch {\n      }\n    });\n  }\n}\n\nclass NoOpAnalyticsApi {\n  captureEvent(_event) {\n  }\n}\n\nconst STORAGE_KEY = \"theme\";\nclass AppThemeSelector {\n  constructor(themes) {\n    this.themes = themes;\n    this.subject = new BehaviorSubject(void 0);\n  }\n  static createWithStorage(themes) {\n    var _a;\n    const selector = new AppThemeSelector(themes);\n    if (!window.localStorage) {\n      return selector;\n    }\n    const initialThemeId = (_a = window.localStorage.getItem(STORAGE_KEY)) != null ? _a : void 0;\n    selector.setActiveThemeId(initialThemeId);\n    selector.activeThemeId$().subscribe((themeId) => {\n      if (themeId) {\n        window.localStorage.setItem(STORAGE_KEY, themeId);\n      } else {\n        window.localStorage.removeItem(STORAGE_KEY);\n      }\n    });\n    window.addEventListener(\"storage\", (event) => {\n      var _a2;\n      if (event.key === STORAGE_KEY) {\n        const themeId = (_a2 = localStorage.getItem(STORAGE_KEY)) != null ? _a2 : void 0;\n        selector.setActiveThemeId(themeId);\n      }\n    });\n    return selector;\n  }\n  getInstalledThemes() {\n    return this.themes.slice();\n  }\n  activeThemeId$() {\n    return this.subject;\n  }\n  getActiveThemeId() {\n    return this.activeThemeId;\n  }\n  setActiveThemeId(themeId) {\n    this.activeThemeId = themeId;\n    this.subject.next(themeId);\n  }\n}\n\nconst ERROR_PREFIX = \"Invalid discovery URL pattern,\";\nclass UrlPatternDiscovery {\n  constructor(parts) {\n    this.parts = parts;\n  }\n  static compile(pattern) {\n    const parts = pattern.split(/\\{\\{\\s*pluginId\\s*\\}\\}/);\n    const urlStr = parts.join(\"pluginId\");\n    let url;\n    try {\n      url = new URL(urlStr);\n    } catch {\n      throw new Error(`${ERROR_PREFIX} URL '${urlStr}' is invalid`);\n    }\n    if (url.hash) {\n      throw new Error(`${ERROR_PREFIX} URL must not have a hash`);\n    }\n    if (url.search) {\n      throw new Error(`${ERROR_PREFIX} URL must not have a query`);\n    }\n    if (urlStr.endsWith(\"/\")) {\n      throw new Error(`${ERROR_PREFIX} URL must not end with a slash`);\n    }\n    return new UrlPatternDiscovery(parts);\n  }\n  async getBaseUrl(pluginId) {\n    return this.parts.join(pluginId);\n  }\n}\n\nclass ErrorAlerter {\n  constructor(alertApi, errorApi) {\n    this.alertApi = alertApi;\n    this.errorApi = errorApi;\n  }\n  post(error, context) {\n    if (!(context == null ? void 0 : context.hidden)) {\n      this.alertApi.post({ message: error.message, severity: \"error\" });\n    }\n    return this.errorApi.post(error, context);\n  }\n  error$() {\n    return this.errorApi.error$();\n  }\n}\n\nclass ErrorApiForwarder {\n  constructor() {\n    this.subject = new PublishSubject();\n  }\n  post(error, context) {\n    this.subject.next({ error, context });\n  }\n  error$() {\n    return this.subject;\n  }\n}\n\nclass UnhandledErrorForwarder {\n  static forward(errorApi, errorContext) {\n    window.addEventListener(\n      \"unhandledrejection\",\n      (e) => {\n        errorApi.post(e.reason, errorContext);\n      }\n    );\n  }\n}\n\nfunction validateFlagName(name) {\n  if (name.length < 3) {\n    throw new Error(\n      `The '${name}' feature flag must have a minimum length of three characters.`\n    );\n  }\n  if (name.length > 150) {\n    throw new Error(\n      `The '${name}' feature flag must not exceed 150 characters.`\n    );\n  }\n  if (!name.match(/^[a-z]+[a-z0-9-]+$/)) {\n    throw new Error(\n      `The '${name}' feature flag must start with a lowercase letter and only contain lowercase letters, numbers and hyphens. Examples: feature-flag-one, alpha, release-2020`\n    );\n  }\n}\nclass LocalStorageFeatureFlags {\n  constructor() {\n    this.registeredFeatureFlags = [];\n  }\n  registerFlag(flag) {\n    validateFlagName(flag.name);\n    this.registeredFeatureFlags.push(flag);\n  }\n  getRegisteredFlags() {\n    return this.registeredFeatureFlags.slice();\n  }\n  isActive(name) {\n    if (!this.flags) {\n      this.flags = this.load();\n    }\n    return this.flags.get(name) === FeatureFlagState.Active;\n  }\n  save(options) {\n    if (!this.flags) {\n      this.flags = this.load();\n    }\n    if (!options.merge) {\n      this.flags.clear();\n    }\n    for (const [name, state] of Object.entries(options.states)) {\n      this.flags.set(name, state);\n    }\n    const enabled = Array.from(this.flags.entries()).filter(\n      ([, state]) => state === FeatureFlagState.Active\n    );\n    window.localStorage.setItem(\n      \"featureFlags\",\n      JSON.stringify(Object.fromEntries(enabled))\n    );\n  }\n  load() {\n    try {\n      const jsonStr = window.localStorage.getItem(\"featureFlags\");\n      if (!jsonStr) {\n        return /* @__PURE__ */ new Map();\n      }\n      const json = JSON.parse(jsonStr);\n      if (typeof json !== \"object\" || json === null || Array.isArray(json)) {\n        return /* @__PURE__ */ new Map();\n      }\n      const entries = Object.entries(json).filter(([name, value]) => {\n        validateFlagName(name);\n        return value === FeatureFlagState.Active;\n      });\n      return new Map(entries);\n    } catch {\n      return /* @__PURE__ */ new Map();\n    }\n  }\n}\n\nfunction createFetchApi(options) {\n  var _a;\n  let result = options.baseImplementation || global.fetch;\n  const middleware = [(_a = options.middleware) != null ? _a : []].flat().reverse();\n  for (const m of middleware) {\n    result = m.apply(result);\n  }\n  return {\n    fetch: result\n  };\n}\n\nclass IdentityAuthInjectorFetchMiddleware {\n  constructor(identityApi, allowUrl, headerName, headerValue) {\n    this.identityApi = identityApi;\n    this.allowUrl = allowUrl;\n    this.headerName = headerName;\n    this.headerValue = headerValue;\n  }\n  static create(options) {\n    var _a, _b;\n    const matcher = buildMatcher(options);\n    const headerName = ((_a = options.header) == null ? void 0 : _a.name) || \"authorization\";\n    const headerValue = ((_b = options.header) == null ? void 0 : _b.value) || ((token) => `Bearer ${token}`);\n    return new IdentityAuthInjectorFetchMiddleware(\n      options.identityApi,\n      matcher,\n      headerName,\n      headerValue\n    );\n  }\n  apply(next) {\n    return async (input, init) => {\n      const request = new Request(input, init);\n      const { token } = await this.identityApi.getCredentials();\n      if (request.headers.get(this.headerName) || typeof token !== \"string\" || !token || !this.allowUrl(request.url)) {\n        return next(input, init);\n      }\n      request.headers.set(this.headerName, this.headerValue(token));\n      return next(request);\n    };\n  }\n}\nfunction buildMatcher(options) {\n  if (options.allowUrl) {\n    return options.allowUrl;\n  } else if (options.urlPrefixAllowlist) {\n    return buildPrefixMatcher(options.urlPrefixAllowlist);\n  } else if (options.config) {\n    return buildPrefixMatcher([options.config.getString(\"backend.baseUrl\")]);\n  }\n  return () => false;\n}\nfunction buildPrefixMatcher(prefixes) {\n  const trimmedPrefixes = prefixes.map((prefix) => prefix.replace(/\\/$/, \"\"));\n  return (url) => trimmedPrefixes.some(\n    (prefix) => url === prefix || url.startsWith(`${prefix}/`)\n  );\n}\n\nfunction join(left, right) {\n  if (!right || right === \"/\") {\n    return left;\n  }\n  return `${left.replace(/\\/$/, \"\")}/${right.replace(/^\\//, \"\")}`;\n}\nclass PluginProtocolResolverFetchMiddleware {\n  constructor(discoveryApi) {\n    this.discoveryApi = discoveryApi;\n  }\n  apply(next) {\n    return async (input, init) => {\n      const request = new Request(input, init);\n      const prefix = \"plugin://\";\n      if (!request.url.startsWith(prefix)) {\n        return next(input, init);\n      }\n      const { hostname, pathname, search, hash, username, password } = new URL(\n        `http://${request.url.substring(prefix.length)}`\n      );\n      let base = await this.discoveryApi.getBaseUrl(hostname);\n      if (username || password) {\n        const baseUrl = new URL(base);\n        const authority = `${username}${password ? `:${password}` : \"\"}@`;\n        base = `${baseUrl.protocol}//${authority}${baseUrl.host}${baseUrl.pathname}`;\n      }\n      const target = `${join(base, pathname)}${search}${hash}`;\n      return next(\n        target,\n        typeof input === \"string\" || isUrl(input) ? init : input\n      );\n    };\n  }\n}\nfunction isUrl(a) {\n  return typeof a === \"object\" && (a == null ? void 0 : a.constructor) === URL;\n}\n\nclass FetchMiddlewares {\n  static resolvePluginProtocol(options) {\n    return new PluginProtocolResolverFetchMiddleware(options.discoveryApi);\n  }\n  static injectIdentityAuth(options) {\n    return IdentityAuthInjectorFetchMiddleware.create(options);\n  }\n  constructor() {\n  }\n}\n\nfunction hasScopes(searched, searchFor) {\n  for (const scope of searchFor) {\n    if (!searched.has(scope)) {\n      return false;\n    }\n  }\n  return true;\n}\nfunction joinScopes(scopes, ...moreScopess) {\n  const result = new Set(scopes);\n  for (const moreScopes of moreScopess) {\n    for (const scope of moreScopes) {\n      result.add(scope);\n    }\n  }\n  return result;\n}\nclass OAuthPendingRequests {\n  constructor() {\n    this.requests = [];\n    this.subject = new BehaviorSubject(\n      this.getCurrentPending()\n    );\n  }\n  request(scopes) {\n    return new Promise((resolve, reject) => {\n      this.requests.push({ scopes, resolve, reject });\n      this.subject.next(this.getCurrentPending());\n    });\n  }\n  resolve(scopes, result) {\n    this.requests = this.requests.filter((request) => {\n      if (hasScopes(scopes, request.scopes)) {\n        request.resolve(result);\n        return false;\n      }\n      return true;\n    });\n    this.subject.next(this.getCurrentPending());\n  }\n  reject(error) {\n    this.requests.forEach((request) => request.reject(error));\n    this.requests = [];\n    this.subject.next(this.getCurrentPending());\n  }\n  pending() {\n    return this.subject;\n  }\n  getCurrentPending() {\n    const currentScopes = this.requests.length === 0 ? void 0 : this.requests.slice(1).reduce(\n      (acc, current) => joinScopes(acc, current.scopes),\n      this.requests[0].scopes\n    );\n    return {\n      scopes: currentScopes,\n      resolve: (value) => {\n        if (currentScopes) {\n          this.resolve(currentScopes, value);\n        }\n      },\n      reject: (reason) => {\n        if (currentScopes) {\n          this.reject(reason);\n        }\n      }\n    };\n  }\n}\n\nclass OAuthRequestManager {\n  constructor() {\n    this.subject = new BehaviorSubject([]);\n    this.currentRequests = [];\n    this.handlerCount = 0;\n  }\n  createAuthRequester(options) {\n    const handler = new OAuthPendingRequests();\n    const index = this.handlerCount;\n    this.handlerCount++;\n    handler.pending().subscribe({\n      next: (scopeRequest) => {\n        const newRequests = this.currentRequests.slice();\n        const request = this.makeAuthRequest(scopeRequest, options);\n        if (!request) {\n          delete newRequests[index];\n        } else {\n          newRequests[index] = request;\n        }\n        this.currentRequests = newRequests;\n        this.subject.next(newRequests.filter(Boolean));\n      }\n    });\n    return (scopes) => {\n      return handler.request(scopes);\n    };\n  }\n  makeAuthRequest(request, options) {\n    const { scopes } = request;\n    if (!scopes) {\n      return void 0;\n    }\n    return {\n      provider: options.provider,\n      trigger: async () => {\n        const result = await options.onAuthRequest(scopes);\n        request.resolve(result);\n      },\n      reject: () => {\n        const error = new Error(\"Login failed, rejected by user\");\n        error.name = \"RejectedError\";\n        request.reject(error);\n      }\n    };\n  }\n  authRequest$() {\n    return this.subject;\n  }\n}\n\nconst buckets = /* @__PURE__ */ new Map();\nclass WebStorage {\n  constructor(namespace, errorApi) {\n    this.namespace = namespace;\n    this.errorApi = errorApi;\n    this.subscribers = /* @__PURE__ */ new Set();\n    this.observable = new ObservableImpl((subscriber) => {\n      this.subscribers.add(subscriber);\n      return () => {\n        this.subscribers.delete(subscriber);\n      };\n    });\n  }\n  static create(options) {\n    var _a;\n    return new WebStorage((_a = options.namespace) != null ? _a : \"\", options.errorApi);\n  }\n  get(key) {\n    return this.snapshot(key).value;\n  }\n  snapshot(key) {\n    let value = void 0;\n    let presence = \"absent\";\n    try {\n      const item = localStorage.getItem(this.getKeyName(key));\n      if (item) {\n        value = JSON.parse(item, (_key, val) => {\n          if (typeof val === \"object\" && val !== null) {\n            Object.freeze(val);\n          }\n          return val;\n        });\n        presence = \"present\";\n      }\n    } catch (e) {\n      this.errorApi.post(\n        new Error(`Error when parsing JSON config from storage for: ${key}`)\n      );\n    }\n    return { key, value, presence };\n  }\n  forBucket(name) {\n    const bucketPath = `${this.namespace}/${name}`;\n    if (!buckets.has(bucketPath)) {\n      buckets.set(bucketPath, new WebStorage(bucketPath, this.errorApi));\n    }\n    return buckets.get(bucketPath);\n  }\n  async set(key, data) {\n    localStorage.setItem(this.getKeyName(key), JSON.stringify(data));\n    this.notifyChanges(key);\n  }\n  async remove(key) {\n    localStorage.removeItem(this.getKeyName(key));\n    this.notifyChanges(key);\n  }\n  observe$(key) {\n    return this.observable.filter(({ key: messageKey }) => messageKey === key);\n  }\n  getKeyName(key) {\n    return `${this.namespace}/${encodeURIComponent(key)}`;\n  }\n  notifyChanges(key) {\n    const snapshot = this.snapshot(key);\n    for (const subscription of this.subscribers) {\n      subscription.next(snapshot);\n    }\n  }\n}\n\nfunction traverseElementTree(options) {\n  const collectors = {};\n  for (const name in options.collectors) {\n    if (options.collectors.hasOwnProperty(name)) {\n      collectors[name] = options.collectors[name]();\n    }\n  }\n  const queue = [\n    {\n      node: Children.toArray(options.root),\n      parent: void 0,\n      contexts: {}\n    }\n  ];\n  while (queue.length !== 0) {\n    const { node, parent, contexts } = queue.shift();\n    Children.forEach(node, (element) => {\n      if (!isValidElement(element)) {\n        return;\n      }\n      const nextContexts = {};\n      for (const name in collectors) {\n        if (collectors.hasOwnProperty(name)) {\n          const collector = collectors[name];\n          nextContexts[name] = collector.visit(\n            collector.accumulator,\n            element,\n            parent,\n            contexts[name]\n          );\n        }\n      }\n      for (const discoverer of options.discoverers) {\n        const children = discoverer(element);\n        if (children) {\n          queue.push({\n            node: children,\n            parent: element,\n            contexts: nextContexts\n          });\n        }\n      }\n    });\n  }\n  return Object.fromEntries(\n    Object.entries(collectors).map(([name, c]) => [name, c.accumulator])\n  );\n}\nfunction createCollector(accumulatorFactory, visit) {\n  return () => ({ accumulator: accumulatorFactory(), visit });\n}\nfunction childDiscoverer(element) {\n  var _a;\n  return (_a = element.props) == null ? void 0 : _a.children;\n}\nfunction routeElementDiscoverer(element) {\n  var _a, _b, _c;\n  if (((_a = element.props) == null ? void 0 : _a.path) && ((_b = element.props) == null ? void 0 : _b.element)) {\n    return (_c = element.props) == null ? void 0 : _c.element;\n  }\n  return void 0;\n}\n\nconst pluginCollector = createCollector(\n  () => /* @__PURE__ */ new Set(),\n  (acc, node) => {\n    const plugin = getComponentData(node, \"core.plugin\");\n    if (plugin) {\n      acc.add(plugin);\n    }\n  }\n);\n\nconst FeatureFlagged = (props) => {\n  const { children } = props;\n  const featureFlagApi = useApi(featureFlagsApiRef);\n  const isEnabled = \"with\" in props ? featureFlagApi.isActive(props.with) : !featureFlagApi.isActive(props.without);\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, isEnabled ? children : null);\n};\nattachComponentData(FeatureFlagged, \"core.featureFlagged\", true);\n\nconst MATCH_ALL_ROUTE = {\n  caseSensitive: false,\n  path: \"*\",\n  element: \"match-all\",\n  routeRefs: /* @__PURE__ */ new Set()\n};\nfunction stringifyNode(node) {\n  var _a, _b;\n  const anyNode = node;\n  if (anyNode == null ? void 0 : anyNode.type) {\n    return (_b = (_a = anyNode.type.displayName) != null ? _a : anyNode.type.name) != null ? _b : String(anyNode.type);\n  }\n  return String(anyNode);\n}\nfunction collectSubTree(node, entries = new Array()) {\n  Children.forEach(node, (element) => {\n    if (!isValidElement(element)) {\n      return;\n    }\n    const routeRef = getComponentData(element, \"core.mountPoint\");\n    if (routeRef) {\n      const plugin = getComponentData(element, \"core.plugin\");\n      entries.push({ routeRef, plugin });\n    }\n    collectSubTree(element.props.children, entries);\n  });\n  return entries;\n}\nconst routingV2Collector = createCollector(\n  () => ({\n    paths: /* @__PURE__ */ new Map(),\n    parents: /* @__PURE__ */ new Map(),\n    objects: new Array()\n  }),\n  (acc, node, parent, ctx) => {\n    var _a, _b, _c, _d, _e, _f;\n    if (ctx == null ? void 0 : ctx.isElementAncestor) {\n      return ctx;\n    }\n    if ((parent == null ? void 0 : parent.props.element) === node) {\n      return { ...ctx, isElementAncestor: true };\n    }\n    const pathProp = (_a = node.props) == null ? void 0 : _a.path;\n    const mountPoint = getComponentData(node, \"core.mountPoint\");\n    if (mountPoint && pathProp) {\n      throw new Error(\n        `Path property may not be set directly on a routable extension \"${stringifyNode(\n          node\n        )}\"`\n      );\n    }\n    const parentChildren = (_c = (_b = ctx == null ? void 0 : ctx.obj) == null ? void 0 : _b.children) != null ? _c : acc.objects;\n    if (pathProp !== void 0) {\n      if (typeof pathProp !== \"string\") {\n        throw new Error(\n          `Element path must be a string at \"${stringifyNode(node)}\"`\n        );\n      }\n      const path = pathProp.startsWith(\"/\") ? pathProp.slice(1) : pathProp;\n      const elementProp = node.props.element;\n      if (getComponentData(node, \"core.gatherMountPoints\")) {\n        if (elementProp) {\n          throw new Error(\n            `Mount point gatherers may not have an element prop \"${stringifyNode(\n              node\n            )}\"`\n          );\n        }\n        const newObj = {\n          path,\n          element: \"gathered\",\n          routeRefs: /* @__PURE__ */ new Set(),\n          caseSensitive: Boolean((_d = node.props) == null ? void 0 : _d.caseSensitive),\n          children: [MATCH_ALL_ROUTE],\n          plugin: void 0\n        };\n        parentChildren.push(newObj);\n        return {\n          obj: newObj,\n          gatherPath: path,\n          routeRef: ctx == null ? void 0 : ctx.routeRef,\n          gatherRouteRef: ctx == null ? void 0 : ctx.routeRef\n        };\n      }\n      if (elementProp) {\n        const [extension, ...others] = collectSubTree(elementProp);\n        if (others.length > 0) {\n          throw new Error(\n            `Route element with path \"${pathProp}\" may not contain multiple routable extensions`\n          );\n        }\n        if (!extension) {\n          return ctx;\n        }\n        const { routeRef, plugin } = extension;\n        const newObj = {\n          path,\n          element: \"mounted\",\n          routeRefs: /* @__PURE__ */ new Set([routeRef]),\n          caseSensitive: Boolean((_e = node.props) == null ? void 0 : _e.caseSensitive),\n          children: [MATCH_ALL_ROUTE],\n          plugin\n        };\n        parentChildren.push(newObj);\n        acc.paths.set(routeRef, path);\n        acc.parents.set(routeRef, ctx == null ? void 0 : ctx.routeRef);\n        return {\n          obj: newObj,\n          routeRef: routeRef != null ? routeRef : ctx == null ? void 0 : ctx.routeRef,\n          gatherPath: path,\n          gatherRouteRef: ctx == null ? void 0 : ctx.gatherRouteRef\n        };\n      }\n    }\n    if (mountPoint) {\n      if ((ctx == null ? void 0 : ctx.gatherPath) === void 0) {\n        throw new Error(\n          `Routable extension \"${stringifyNode(\n            node\n          )}\" with mount point \"${mountPoint}\" must be assigned a path`\n        );\n      }\n      (_f = ctx == null ? void 0 : ctx.obj) == null ? void 0 : _f.routeRefs.add(mountPoint);\n      acc.paths.set(mountPoint, ctx.gatherPath);\n      acc.parents.set(mountPoint, ctx == null ? void 0 : ctx.gatherRouteRef);\n      return {\n        ...ctx,\n        routeRef: mountPoint\n      };\n    }\n    return ctx;\n  }\n);\nconst routingV1Collector = createCollector(\n  () => ({\n    paths: /* @__PURE__ */ new Map(),\n    parents: /* @__PURE__ */ new Map(),\n    objects: new Array()\n  }),\n  (acc, node, parent, ctx) => {\n    var _a, _b, _c, _d, _e;\n    if ((parent == null ? void 0 : parent.props.element) === node) {\n      return ctx;\n    }\n    let currentObj = ctx == null ? void 0 : ctx.obj;\n    let currentParentRouteRef = ctx == null ? void 0 : ctx.routeRef;\n    let sticky = ctx == null ? void 0 : ctx.sticky;\n    const path = (_a = node.props) == null ? void 0 : _a.path;\n    const parentChildren = (_b = currentObj == null ? void 0 : currentObj.children) != null ? _b : acc.objects;\n    const caseSensitive = Boolean((_c = node.props) == null ? void 0 : _c.caseSensitive);\n    let currentCtxPath = ctx == null ? void 0 : ctx.path;\n    if (getComponentData(node, \"core.gatherMountPoints\")) {\n      if (!path) {\n        throw new Error(\"Mount point gatherer must have a path\");\n      }\n      currentCtxPath = path;\n    }\n    const element = (_d = node.props) == null ? void 0 : _d.element;\n    let routeRef = getComponentData(node, \"core.mountPoint\");\n    if (!routeRef && isValidElement(element)) {\n      routeRef = getComponentData(element, \"core.mountPoint\");\n    }\n    if (routeRef) {\n      let routePath = path;\n      if (currentCtxPath) {\n        if (routePath) {\n          currentCtxPath = void 0;\n        } else {\n          routePath = currentCtxPath;\n        }\n      }\n      if (!routePath) {\n        throw new Error(\"Mounted routable extension must have a path\");\n      }\n      acc.paths.set(routeRef, routePath);\n      if (currentParentRouteRef && sticky) {\n        acc.parents.set(routeRef, currentParentRouteRef);\n        if (path) {\n          currentParentRouteRef = routeRef;\n          sticky = false;\n        }\n      } else {\n        acc.parents.set(routeRef, currentParentRouteRef);\n        currentParentRouteRef = routeRef;\n      }\n      if (path) {\n        currentObj = {\n          caseSensitive,\n          path,\n          element: \"mounted\",\n          routeRefs: /* @__PURE__ */ new Set([routeRef]),\n          children: [MATCH_ALL_ROUTE],\n          plugin: getComponentData(\n            node.props.element,\n            \"core.plugin\"\n          )\n        };\n        parentChildren.push(currentObj);\n      } else {\n        currentObj == null ? void 0 : currentObj.routeRefs.add(routeRef);\n      }\n    }\n    if (getComponentData(node, \"core.gatherMountPoints\")) {\n      sticky = true;\n    }\n    const isGatherer = getComponentData(\n      node,\n      \"core.gatherMountPoints\"\n    );\n    if (isGatherer) {\n      if (!path) {\n        throw new Error(\"Mount point gatherer must have a path\");\n      }\n      if (!routeRef) {\n        currentObj = {\n          caseSensitive,\n          path,\n          element: \"gathered\",\n          routeRefs: /* @__PURE__ */ new Set(),\n          children: [MATCH_ALL_ROUTE],\n          plugin: (_e = ctx == null ? void 0 : ctx.obj) == null ? void 0 : _e.plugin\n        };\n        parentChildren.push(currentObj);\n      }\n    }\n    return {\n      obj: currentObj,\n      path: currentCtxPath,\n      routeRef: currentParentRouteRef,\n      sticky\n    };\n  }\n);\nconst featureFlagCollector = createCollector(\n  () => /* @__PURE__ */ new Set(),\n  (acc, node) => {\n    if (node.type === FeatureFlagged) {\n      const props = node.props;\n      acc.add(\"with\" in props ? props.with : props.without);\n    }\n  }\n);\n\nconst routeRefType = getOrCreateGlobalSingleton(\n  \"route-ref-type\",\n  () => Symbol(\"route-ref-type\")\n);\nfunction isRouteRef(routeRef) {\n  return routeRef[routeRefType] === \"absolute\";\n}\nfunction isSubRouteRef(routeRef) {\n  return routeRef[routeRefType] === \"sub\";\n}\nfunction isExternalRouteRef(routeRef) {\n  return routeRef[routeRefType] === \"external\";\n}\n\nfunction joinPaths(...paths) {\n  const normalized = paths.join(\"/\").replace(/\\/\\/+/g, \"/\");\n  if (normalized !== \"/\" && normalized.endsWith(\"/\")) {\n    return normalized.slice(0, -1);\n  }\n  return normalized;\n}\n\nfunction resolveTargetRef(anyRouteRef, routePaths, routeBindings) {\n  let targetRef;\n  let subRoutePath = \"\";\n  if (isRouteRef(anyRouteRef)) {\n    targetRef = anyRouteRef;\n  } else if (isSubRouteRef(anyRouteRef)) {\n    targetRef = anyRouteRef.parent;\n    subRoutePath = anyRouteRef.path;\n  } else if (isExternalRouteRef(anyRouteRef)) {\n    const resolvedRoute = routeBindings.get(anyRouteRef);\n    if (!resolvedRoute) {\n      return [void 0, \"\"];\n    }\n    if (isRouteRef(resolvedRoute)) {\n      targetRef = resolvedRoute;\n    } else if (isSubRouteRef(resolvedRoute)) {\n      targetRef = resolvedRoute.parent;\n      subRoutePath = resolvedRoute.path;\n    } else {\n      throw new Error(\n        `ExternalRouteRef was bound to invalid target, ${resolvedRoute}`\n      );\n    }\n  } else if (anyRouteRef[routeRefType]) {\n    throw new Error(\n      `Unknown or invalid route ref type, ${anyRouteRef[routeRefType]}`\n    );\n  } else {\n    throw new Error(`Unknown object passed to useRouteRef, got ${anyRouteRef}`);\n  }\n  if (!targetRef) {\n    return [void 0, \"\"];\n  }\n  const resolvedPath = routePaths.get(targetRef);\n  if (resolvedPath === void 0) {\n    return [void 0, \"\"];\n  }\n  const targetPath = joinPaths(resolvedPath, subRoutePath);\n  return [targetRef, targetPath];\n}\nfunction resolveBasePath(targetRef, sourceLocation, routePaths, routeParents, routeObjects) {\n  var _a;\n  const match = (_a = matchRoutes(routeObjects, sourceLocation)) != null ? _a : [];\n  const refDiffList = Array();\n  let matchIndex = -1;\n  for (let targetSearchRef = targetRef; targetSearchRef; targetSearchRef = routeParents.get(targetSearchRef)) {\n    matchIndex = match.findIndex(\n      (m) => m.route.routeRefs.has(targetSearchRef)\n    );\n    if (matchIndex !== -1) {\n      break;\n    }\n    refDiffList.unshift(targetSearchRef);\n  }\n  if (refDiffList.length === 0) {\n    matchIndex -= 1;\n  }\n  const parentPath = matchIndex === -1 ? \"\" : match[matchIndex].pathname;\n  const diffPaths = refDiffList.slice(0, -1).map((ref) => {\n    const path = routePaths.get(ref);\n    if (path === void 0) {\n      throw new Error(`No path for ${ref}`);\n    }\n    if (path.includes(\":\")) {\n      throw new Error(\n        `Cannot route to ${targetRef} with parent ${ref} as it has parameters`\n      );\n    }\n    return path;\n  });\n  return `${joinPaths(parentPath, ...diffPaths)}/`;\n}\nclass RouteResolver {\n  constructor(routePaths, routeParents, routeObjects, routeBindings, appBasePath) {\n    this.routePaths = routePaths;\n    this.routeParents = routeParents;\n    this.routeObjects = routeObjects;\n    this.routeBindings = routeBindings;\n    this.appBasePath = appBasePath;\n  }\n  resolve(anyRouteRef, sourceLocation) {\n    const [targetRef, targetPath] = resolveTargetRef(\n      anyRouteRef,\n      this.routePaths,\n      this.routeBindings\n    );\n    if (!targetRef) {\n      return void 0;\n    }\n    let relativeSourceLocation;\n    if (typeof sourceLocation === \"string\") {\n      relativeSourceLocation = this.trimPath(sourceLocation);\n    } else if (sourceLocation.pathname) {\n      relativeSourceLocation = {\n        ...sourceLocation,\n        pathname: this.trimPath(sourceLocation.pathname)\n      };\n    } else {\n      relativeSourceLocation = sourceLocation;\n    }\n    const basePath = this.appBasePath + resolveBasePath(\n      targetRef,\n      relativeSourceLocation,\n      this.routePaths,\n      this.routeParents,\n      this.routeObjects\n    );\n    const routeFunc = (...[params]) => {\n      return joinPaths(basePath, generatePath(targetPath, params));\n    };\n    return routeFunc;\n  }\n  trimPath(targetPath) {\n    if (!targetPath) {\n      return targetPath;\n    }\n    if (targetPath.startsWith(this.appBasePath)) {\n      return targetPath.slice(this.appBasePath.length);\n    }\n    return targetPath;\n  }\n}\n\nconst RoutingContext = createVersionedContext(\n  \"routing-context\"\n);\nconst RoutingProvider = ({\n  routePaths,\n  routeParents,\n  routeObjects,\n  routeBindings,\n  basePath = \"\",\n  children\n}) => {\n  const resolver = new RouteResolver(\n    routePaths,\n    routeParents,\n    routeObjects,\n    routeBindings,\n    basePath\n  );\n  const versionedValue = createVersionedValueMap({ 1: resolver });\n  return /* @__PURE__ */ React.createElement(RoutingContext.Provider, {\n    value: versionedValue\n  }, children);\n};\n\nconst getExtensionContext = (pathname, routes) => {\n  var _a, _b;\n  try {\n    const matches = matchRoutes(routes, { pathname });\n    const routeObject = (_a = matches == null ? void 0 : matches.filter((match) => {\n      var _a2;\n      return ((_a2 = match == null ? void 0 : match.route.routeRefs) == null ? void 0 : _a2.size) > 0;\n    }).pop()) == null ? void 0 : _a.route;\n    if (!routeObject) {\n      return {};\n    }\n    let routeRef;\n    if (routeObject.routeRefs.size === 1) {\n      routeRef = routeObject.routeRefs.values().next().value;\n    }\n    return {\n      extension: \"App\",\n      pluginId: ((_b = routeObject.plugin) == null ? void 0 : _b.getId()) || \"root\",\n      ...routeRef ? { routeRef: routeRef.id } : {}\n    };\n  } catch {\n    return {};\n  }\n};\nconst TrackNavigation = ({\n  pathname,\n  search,\n  hash\n}) => {\n  const analytics = useAnalytics();\n  useEffect(() => {\n    analytics.captureEvent(\"navigate\", `${pathname}${search}${hash}`);\n  }, [analytics, pathname, search, hash]);\n  return null;\n};\nconst RouteTracker = ({\n  routeObjects\n}) => {\n  const { pathname, search, hash } = useLocation();\n  return /* @__PURE__ */ React.createElement(AnalyticsContext, {\n    attributes: getExtensionContext(pathname, routeObjects)\n  }, /* @__PURE__ */ React.createElement(TrackNavigation, {\n    pathname,\n    search,\n    hash\n  }));\n};\n\nfunction validateRouteParameters(routePaths, routeParents) {\n  const notLeafRoutes = new Set(routeParents.values());\n  notLeafRoutes.delete(void 0);\n  for (const route of routeParents.keys()) {\n    if (notLeafRoutes.has(route)) {\n      continue;\n    }\n    let currentRouteRef = route;\n    let fullPath = \"\";\n    while (currentRouteRef) {\n      const path = routePaths.get(currentRouteRef);\n      if (path === void 0) {\n        throw new Error(`No path for ${currentRouteRef}`);\n      }\n      fullPath = joinPaths(path, fullPath);\n      currentRouteRef = routeParents.get(currentRouteRef);\n    }\n    const params = fullPath.match(/:(\\w+)/g);\n    if (params) {\n      for (let j = 0; j < params.length; j++) {\n        for (let i = j + 1; i < params.length; i++) {\n          if (params[i] === params[j]) {\n            throw new Error(\n              `Parameter ${params[i]} is duplicated in path ${fullPath}`\n            );\n          }\n        }\n      }\n    }\n  }\n}\nfunction validateRouteBindings(routeBindings, plugins) {\n  for (const plugin of plugins) {\n    if (!plugin.externalRoutes) {\n      continue;\n    }\n    for (const [name, externalRouteRef] of Object.entries(\n      plugin.externalRoutes\n    )) {\n      if (externalRouteRef.optional) {\n        continue;\n      }\n      if (!routeBindings.has(externalRouteRef)) {\n        throw new Error(\n          `External route '${name}' of the '${plugin.getId()}' plugin must be bound to a target route. See https://backstage.io/link?bind-routes for details.`\n        );\n      }\n    }\n  }\n}\n\nconst AppContext = createVersionedContext(\"app-context\");\nconst AppContextProvider = ({\n  appContext,\n  children\n}) => {\n  const versionedValue = createVersionedValueMap({ 1: appContext });\n  return /* @__PURE__ */ React.createElement(AppContext.Provider, {\n    value: versionedValue,\n    children\n  });\n};\n\nfunction mkError(thing) {\n  return new Error(\n    `Tried to access IdentityApi ${thing} before app was loaded`\n  );\n}\nfunction logDeprecation(thing) {\n  console.warn(\n    `WARNING: Call to ${thing} is deprecated and will break in the future`\n  );\n}\nclass AppIdentityProxy {\n  constructor() {\n    this.resolveTarget = () => {\n    };\n    this.signOutTargetUrl = \"/\";\n    this.waitForTarget = new Promise((resolve) => {\n      this.resolveTarget = resolve;\n    });\n  }\n  setTarget(identityApi, targetOptions) {\n    this.target = identityApi;\n    this.signOutTargetUrl = targetOptions.signOutTargetUrl;\n    this.resolveTarget(identityApi);\n  }\n  getUserId() {\n    if (!this.target) {\n      throw mkError(\"getUserId\");\n    }\n    if (!this.target.getUserId) {\n      throw new Error(\"IdentityApi does not implement getUserId\");\n    }\n    logDeprecation(\"getUserId\");\n    return this.target.getUserId();\n  }\n  getProfile() {\n    if (!this.target) {\n      throw mkError(\"getProfile\");\n    }\n    if (!this.target.getProfile) {\n      throw new Error(\"IdentityApi does not implement getProfile\");\n    }\n    logDeprecation(\"getProfile\");\n    return this.target.getProfile();\n  }\n  async getProfileInfo() {\n    return this.waitForTarget.then((target) => target.getProfileInfo());\n  }\n  async getBackstageIdentity() {\n    const identity = await this.waitForTarget.then(\n      (target) => target.getBackstageIdentity()\n    );\n    if (!identity.userEntityRef.match(/^.*:.*\\/.*$/)) {\n      console.warn(\n        `WARNING: The App IdentityApi provided an invalid userEntityRef, '${identity.userEntityRef}'. It must be a full Entity Reference of the form '<kind>:<namespace>/<name>'.`\n      );\n    }\n    return identity;\n  }\n  async getCredentials() {\n    return this.waitForTarget.then((target) => target.getCredentials());\n  }\n  async getIdToken() {\n    return this.waitForTarget.then((target) => {\n      if (!target.getIdToken) {\n        throw new Error(\"IdentityApi does not implement getIdToken\");\n      }\n      logDeprecation(\"getIdToken\");\n      return target.getIdToken();\n    });\n  }\n  async signOut() {\n    await this.waitForTarget.then((target) => target.signOut());\n    location.href = this.signOutTargetUrl;\n  }\n}\n\nfunction resolveTheme(themeId, shouldPreferDark, themes) {\n  if (themeId !== void 0) {\n    const selectedTheme = themes.find((theme) => theme.id === themeId);\n    if (selectedTheme) {\n      return selectedTheme;\n    }\n  }\n  if (shouldPreferDark) {\n    const darkTheme = themes.find((theme) => theme.variant === \"dark\");\n    if (darkTheme) {\n      return darkTheme;\n    }\n  }\n  const lightTheme = themes.find((theme) => theme.variant === \"light\");\n  if (lightTheme) {\n    return lightTheme;\n  }\n  return themes[0];\n}\nconst useShouldPreferDarkTheme = () => {\n  const mediaQuery = useMemo(\n    () => window.matchMedia(\"(prefers-color-scheme: dark)\"),\n    []\n  );\n  const [shouldPreferDark, setPrefersDark] = useState(mediaQuery.matches);\n  useEffect(() => {\n    const listener = (event) => {\n      setPrefersDark(event.matches);\n    };\n    mediaQuery.addListener(listener);\n    return () => {\n      mediaQuery.removeListener(listener);\n    };\n  }, [mediaQuery]);\n  return shouldPreferDark;\n};\nfunction AppThemeProvider({ children }) {\n  const appThemeApi = useApi(appThemeApiRef);\n  const themeId = useObservable(\n    appThemeApi.activeThemeId$(),\n    appThemeApi.getActiveThemeId()\n  );\n  const shouldPreferDark = Boolean(window.matchMedia) ? useShouldPreferDarkTheme() : false;\n  const appTheme = resolveTheme(\n    themeId,\n    shouldPreferDark,\n    appThemeApi.getInstalledThemes()\n  );\n  if (!appTheme) {\n    throw new Error(\"App has no themes\");\n  }\n  return /* @__PURE__ */ React.createElement(appTheme.Provider, {\n    children\n  });\n}\n\nconst defaultConfigLoader = async (runtimeConfigJson = \"__APP_INJECTED_RUNTIME_CONFIG__\") => {\n  const appConfig = process.env.APP_CONFIG;\n  if (!appConfig) {\n    throw new Error(\"No static configuration provided\");\n  }\n  if (!Array.isArray(appConfig)) {\n    throw new Error(\"Static configuration has invalid format\");\n  }\n  const configs = appConfig.slice();\n  if (runtimeConfigJson !== \"__app_injected_runtime_config__\".toLocaleUpperCase(\"en-US\")) {\n    try {\n      const data = JSON.parse(runtimeConfigJson);\n      if (Array.isArray(data)) {\n        configs.push(...data);\n      } else {\n        configs.push({ data, context: \"env\" });\n      }\n    } catch (error) {\n      throw new Error(`Failed to load runtime configuration, ${error}`);\n    }\n  }\n  const windowAppConfig = window.__APP_CONFIG__;\n  if (windowAppConfig) {\n    configs.push({\n      context: \"window\",\n      data: windowAppConfig\n    });\n  }\n  return configs;\n};\n\nclass ApiRegistryBuilder {\n  constructor() {\n    this.apis = [];\n  }\n  add(api, impl) {\n    this.apis.push([api.id, impl]);\n    return impl;\n  }\n  build() {\n    return new ApiRegistry(new Map(this.apis));\n  }\n}\nclass ApiRegistry {\n  constructor(apis) {\n    this.apis = apis;\n  }\n  static builder() {\n    return new ApiRegistryBuilder();\n  }\n  static from(apis) {\n    return new ApiRegistry(new Map(apis.map(([api, impl]) => [api.id, impl])));\n  }\n  static with(api, impl) {\n    return new ApiRegistry(/* @__PURE__ */ new Map([[api.id, impl]]));\n  }\n  with(api, impl) {\n    return new ApiRegistry(new Map([...this.apis, [api.id, impl]]));\n  }\n  get(api) {\n    return this.apis.get(api.id);\n  }\n}\n\nfunction resolveRouteBindings(bindRoutes) {\n  const result = /* @__PURE__ */ new Map();\n  if (bindRoutes) {\n    const bind = (externalRoutes, targetRoutes) => {\n      for (const [key, value] of Object.entries(targetRoutes)) {\n        const externalRoute = externalRoutes[key];\n        if (!externalRoute) {\n          throw new Error(`Key ${key} is not an existing external route`);\n        }\n        if (!value && !externalRoute.optional) {\n          throw new Error(\n            `External route ${key} is required but was undefined`\n          );\n        }\n        if (value) {\n          result.set(externalRoute, value);\n        }\n      }\n    };\n    bindRoutes({ bind });\n  }\n  return result;\n}\n\nfunction isReactRouterBeta() {\n  const [obj] = createRoutesFromChildren(/* @__PURE__ */ React.createElement(Route, {\n    index: true,\n    element: /* @__PURE__ */ React.createElement(\"div\", null)\n  }));\n  return !obj.index;\n}\n\nconst InternalAppContext = createContext({ routeObjects: [] });\nfunction getBasePath(configApi) {\n  var _a;\n  let { pathname } = new URL(\n    (_a = configApi.getOptionalString(\"app.baseUrl\")) != null ? _a : \"/\",\n    \"http://dummy.dev\"\n  );\n  pathname = pathname.replace(/\\/*$/, \"\");\n  return pathname;\n}\nfunction useConfigLoader(configLoader, components, appThemeApi) {\n  var _a;\n  const hasConfig = Boolean(configLoader);\n  const config = useAsync(configLoader || (() => Promise.resolve([])));\n  let noConfigNode = void 0;\n  if (hasConfig && config.loading) {\n    const { Progress } = components;\n    noConfigNode = /* @__PURE__ */ React.createElement(Progress, null);\n  } else if (config.error) {\n    const { BootErrorPage } = components;\n    noConfigNode = /* @__PURE__ */ React.createElement(BootErrorPage, {\n      step: \"load-config\",\n      error: config.error\n    });\n  }\n  const { ThemeProvider = AppThemeProvider } = components;\n  if (noConfigNode) {\n    return {\n      node: /* @__PURE__ */ React.createElement(ApiProvider, {\n        apis: ApiRegistry.with(appThemeApiRef, appThemeApi)\n      }, /* @__PURE__ */ React.createElement(ThemeProvider, null, noConfigNode))\n    };\n  }\n  const configReader = ConfigReader.fromConfigs((_a = config.value) != null ? _a : []);\n  return { api: configReader };\n}\nclass AppContextImpl {\n  constructor(app) {\n    this.app = app;\n  }\n  getPlugins() {\n    return this.app.getPlugins();\n  }\n  getSystemIcon(key) {\n    return this.app.getSystemIcon(key);\n  }\n  getSystemIcons() {\n    return this.app.getSystemIcons();\n  }\n  getComponents() {\n    return this.app.getComponents();\n  }\n}\nclass AppManager {\n  constructor(options) {\n    this.appIdentityProxy = new AppIdentityProxy();\n    var _a, _b, _c, _d;\n    this.apis = (_a = options.apis) != null ? _a : [];\n    this.icons = options.icons;\n    this.plugins = new Set((_b = options.plugins) != null ? _b : []);\n    this.components = options.components;\n    this.themes = options.themes;\n    this.configLoader = (_c = options.configLoader) != null ? _c : defaultConfigLoader;\n    this.defaultApis = (_d = options.defaultApis) != null ? _d : [];\n    this.bindRoutes = options.bindRoutes;\n    this.apiFactoryRegistry = new ApiFactoryRegistry();\n  }\n  getPlugins() {\n    return Array.from(this.plugins);\n  }\n  getSystemIcon(key) {\n    return this.icons[key];\n  }\n  getSystemIcons() {\n    return this.icons;\n  }\n  getComponents() {\n    return this.components;\n  }\n  getProvider() {\n    const appContext = new AppContextImpl(this);\n    let routesHaveBeenValidated = false;\n    const Provider = ({ children }) => {\n      const appThemeApi = useMemo(\n        () => AppThemeSelector.createWithStorage(this.themes),\n        []\n      );\n      const { routing, featureFlags, routeBindings } = useMemo(() => {\n        const result = traverseElementTree({\n          root: children,\n          discoverers: [childDiscoverer, routeElementDiscoverer],\n          collectors: {\n            routing: isReactRouterBeta() ? routingV1Collector : routingV2Collector,\n            collectedPlugins: pluginCollector,\n            featureFlags: featureFlagCollector\n          }\n        });\n        result.collectedPlugins.forEach((plugin) => this.plugins.add(plugin));\n        this.verifyPlugins(this.plugins);\n        this.getApiHolder();\n        return {\n          ...result,\n          routeBindings: resolveRouteBindings(this.bindRoutes)\n        };\n      }, [children]);\n      if (!routesHaveBeenValidated) {\n        routesHaveBeenValidated = true;\n        validateRouteParameters(routing.paths, routing.parents);\n        validateRouteBindings(\n          routeBindings,\n          this.plugins\n        );\n      }\n      const loadedConfig = useConfigLoader(\n        this.configLoader,\n        this.components,\n        appThemeApi\n      );\n      const hasConfigApi = \"api\" in loadedConfig;\n      if (hasConfigApi) {\n        const { api } = loadedConfig;\n        this.configApi = api;\n      }\n      useEffect(() => {\n        if (hasConfigApi) {\n          const featureFlagsApi = this.getApiHolder().get(featureFlagsApiRef);\n          for (const plugin of this.plugins.values()) {\n            if (\"getFeatureFlags\" in plugin) {\n              for (const flag of plugin.getFeatureFlags()) {\n                featureFlagsApi.registerFlag({\n                  name: flag.name,\n                  pluginId: plugin.getId()\n                });\n              }\n            } else {\n              for (const output of plugin.output()) {\n                if (output.type === \"feature-flag\") {\n                  featureFlagsApi.registerFlag({\n                    name: output.name,\n                    pluginId: plugin.getId()\n                  });\n                }\n              }\n            }\n          }\n          for (const name of featureFlags) {\n            featureFlagsApi.registerFlag({ name, pluginId: \"\" });\n          }\n        }\n      }, [hasConfigApi, loadedConfig, featureFlags]);\n      if (\"node\" in loadedConfig) {\n        return loadedConfig.node;\n      }\n      const { ThemeProvider = AppThemeProvider } = this.components;\n      return /* @__PURE__ */ React.createElement(ApiProvider, {\n        apis: this.getApiHolder()\n      }, /* @__PURE__ */ React.createElement(AppContextProvider, {\n        appContext\n      }, /* @__PURE__ */ React.createElement(ThemeProvider, null, /* @__PURE__ */ React.createElement(RoutingProvider, {\n        routePaths: routing.paths,\n        routeParents: routing.parents,\n        routeObjects: routing.objects,\n        routeBindings,\n        basePath: getBasePath(loadedConfig.api)\n      }, /* @__PURE__ */ React.createElement(InternalAppContext.Provider, {\n        value: { routeObjects: routing.objects }\n      }, children)))));\n    };\n    return Provider;\n  }\n  getRouter() {\n    const { Router: RouterComponent, SignInPage: SignInPageComponent } = this.components;\n    const SignInPageWrapper = ({\n      component: Component,\n      children\n    }) => {\n      const [identityApi, setIdentityApi] = useState();\n      const configApi = useApi(configApiRef);\n      const basePath = getBasePath(configApi);\n      if (!identityApi) {\n        return /* @__PURE__ */ React.createElement(Component, {\n          onSignInSuccess: setIdentityApi\n        });\n      }\n      this.appIdentityProxy.setTarget(identityApi, {\n        signOutTargetUrl: basePath || \"/\"\n      });\n      return children;\n    };\n    const AppRouter = ({ children }) => {\n      const configApi = useApi(configApiRef);\n      const basePath = getBasePath(configApi);\n      const mountPath = `${basePath}/*`;\n      const { routeObjects } = useContext(InternalAppContext);\n      if (!SignInPageComponent) {\n        this.appIdentityProxy.setTarget(\n          {\n            getUserId: () => \"guest\",\n            getIdToken: async () => void 0,\n            getProfile: () => ({\n              email: \"guest@example.com\",\n              displayName: \"Guest\"\n            }),\n            getProfileInfo: async () => ({\n              email: \"guest@example.com\",\n              displayName: \"Guest\"\n            }),\n            getBackstageIdentity: async () => ({\n              type: \"user\",\n              userEntityRef: \"user:default/guest\",\n              ownershipEntityRefs: [\"user:default/guest\"]\n            }),\n            getCredentials: async () => ({}),\n            signOut: async () => {\n            }\n          },\n          { signOutTargetUrl: basePath || \"/\" }\n        );\n        return /* @__PURE__ */ React.createElement(RouterComponent, null, /* @__PURE__ */ React.createElement(RouteTracker, {\n          routeObjects\n        }), /* @__PURE__ */ React.createElement(Routes, null, /* @__PURE__ */ React.createElement(Route, {\n          path: mountPath,\n          element: /* @__PURE__ */ React.createElement(React.Fragment, null, children)\n        })));\n      }\n      return /* @__PURE__ */ React.createElement(RouterComponent, null, /* @__PURE__ */ React.createElement(RouteTracker, {\n        routeObjects\n      }), /* @__PURE__ */ React.createElement(SignInPageWrapper, {\n        component: SignInPageComponent\n      }, /* @__PURE__ */ React.createElement(Routes, null, /* @__PURE__ */ React.createElement(Route, {\n        path: mountPath,\n        element: /* @__PURE__ */ React.createElement(React.Fragment, null, children)\n      }))));\n    };\n    return AppRouter;\n  }\n  getApiHolder() {\n    if (this.apiHolder) {\n      for (const plugin of this.plugins) {\n        for (const factory of plugin.getApis()) {\n          if (!this.apiFactoryRegistry.get(factory.api)) {\n            this.apiFactoryRegistry.register(\"default\", factory);\n          }\n        }\n      }\n      ApiResolver.validateFactories(\n        this.apiFactoryRegistry,\n        this.apiFactoryRegistry.getAllApis()\n      );\n      return this.apiHolder;\n    }\n    this.apiFactoryRegistry.register(\"static\", {\n      api: appThemeApiRef,\n      deps: {},\n      factory: () => AppThemeSelector.createWithStorage(this.themes)\n    });\n    this.apiFactoryRegistry.register(\"static\", {\n      api: configApiRef,\n      deps: {},\n      factory: () => {\n        if (!this.configApi) {\n          throw new Error(\n            \"Tried to access config API before config was loaded\"\n          );\n        }\n        return this.configApi;\n      }\n    });\n    this.apiFactoryRegistry.register(\"static\", {\n      api: identityApiRef,\n      deps: {},\n      factory: () => this.appIdentityProxy\n    });\n    this.apiFactoryRegistry.register(\"default\", {\n      api: featureFlagsApiRef,\n      deps: {},\n      factory: () => new LocalStorageFeatureFlags()\n    });\n    for (const factory of this.defaultApis) {\n      this.apiFactoryRegistry.register(\"default\", factory);\n    }\n    for (const plugin of this.plugins) {\n      for (const factory of plugin.getApis()) {\n        if (!this.apiFactoryRegistry.register(\"default\", factory)) {\n          throw new Error(\n            `Plugin ${plugin.getId()} tried to register duplicate or forbidden API factory for ${factory.api}`\n          );\n        }\n      }\n    }\n    for (const factory of this.apis) {\n      if (!this.apiFactoryRegistry.register(\"app\", factory)) {\n        throw new Error(\n          `Duplicate or forbidden API factory for ${factory.api} in app`\n        );\n      }\n    }\n    ApiResolver.validateFactories(\n      this.apiFactoryRegistry,\n      this.apiFactoryRegistry.getAllApis()\n    );\n    this.apiHolder = new ApiResolver(this.apiFactoryRegistry);\n    return this.apiHolder;\n  }\n  verifyPlugins(plugins) {\n    const pluginIds = /* @__PURE__ */ new Set();\n    for (const plugin of plugins) {\n      const id = plugin.getId();\n      if (pluginIds.has(id)) {\n        throw new Error(`Duplicate plugin found '${id}'`);\n      }\n      pluginIds.add(id);\n    }\n  }\n}\n\nfunction createSpecializedApp(options) {\n  return new AppManager(options);\n}\n\nlet warned = false;\nconst FlatRoutes = (props) => {\n  const app = useApp();\n  const { NotFoundErrorPage } = app.getComponents();\n  const isBeta = useMemo(() => isReactRouterBeta(), []);\n  const routes = useElementFilter(\n    props.children,\n    (elements) => elements.getElements().flatMap((child) => {\n      var _a;\n      let path = child.props.path;\n      if (path === \"\") {\n        return [];\n      }\n      path = (_a = path == null ? void 0 : path.replace(/\\/\\*$/, \"\")) != null ? _a : \"/\";\n      let element = isBeta ? child : child.props.element;\n      if (!isBeta && !element) {\n        element = child;\n        if (!warned && process.env.NODE_ENV !== \"test\") {\n          console.warn(\n            \"DEPRECATION WARNING: All elements within <FlatRoutes> must be of type <Route> with an element prop. Existing usages of <Navigate key=[path] to=[to] /> should be replaced with <Route path=[path] element={<Navigate to=[to] />} />.\"\n          );\n          warned = true;\n        }\n      }\n      return [\n        {\n          path,\n          element,\n          children: child.props.children ? [\n            {\n              path: path === \"/\" ? \"/\" : \"*\",\n              element: child.props.children\n            }\n          ] : void 0\n        }\n      ];\n    }).sort((a, b) => b.path.localeCompare(a.path)).map((obj) => ({ ...obj, path: obj.path === \"/\" ? \"/\" : `${obj.path}/*` }))\n  );\n  const withNotFound = [\n    ...routes,\n    {\n      path: \"*\",\n      element: /* @__PURE__ */ React.createElement(NotFoundErrorPage, null)\n    }\n  ];\n  return useRoutes(withNotFound);\n};\n\nexport { AlertApiForwarder, ApiFactoryRegistry, ApiProvider, ApiResolver, AppThemeSelector, AtlassianAuth, BitbucketAuth, ErrorAlerter, ErrorApiForwarder, FeatureFlagged, FetchMiddlewares, FlatRoutes, GithubAuth, GitlabAuth, GoogleAuth, LocalStorageFeatureFlags, MicrosoftAuth, MultipleAnalyticsApi, NoOpAnalyticsApi, OAuth2, OAuthRequestManager, OktaAuth, OneLoginAuth, SamlAuth, UnhandledErrorForwarder, UrlPatternDiscovery, WebStorage, createFetchApi, createSpecializedApp, defaultConfigLoader };\n//# sourceMappingURL=index.esm.js.map\n","import React, { useState, useEffect, useRef, useCallback, useLayoutEffect, lazy, Suspense, useMemo, Component as Component$3, Children, isValidElement, useContext, Fragment, createContext, forwardRef } from 'react';\nimport Snackbar from '@material-ui/core/Snackbar';\nimport IconButton from '@material-ui/core/IconButton';\nimport CloseIcon from '@material-ui/icons/Close';\nimport { Alert } from '@material-ui/lab';\nimport { useApi, alertApiRef, useAnalytics, configApiRef, errorApiRef, storageApiRef, useApp, oauthRequestApiRef, useApiHolder, useElementFilter, attachComponentData, discoveryApiRef } from '@backstage/core-plugin-api';\nimport pluralize from 'pluralize';\nimport { makeStyles, createStyles, useTheme, darken, lighten, withStyles, styled, ThemeProvider } from '@material-ui/core/styles';\nimport MaterialAvatar from '@material-ui/core/Avatar';\nimport Button$1 from '@material-ui/core/Button';\nimport classNames from 'classnames';\nimport Link$1 from '@material-ui/core/Link';\nimport { Link as Link$2, useSearchParams, useLocation, useResolvedPath as useResolvedPath$1, resolvePath } from 'react-router-dom';\nimport { trimEnd, isEqual, orderBy, isMatch, transform } from 'lodash';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport CopyIcon from '@material-ui/icons/FileCopy';\nimport useCopyToClipboard from 'react-use/lib/useCopyToClipboard';\nimport LightAsync from 'react-syntax-highlighter/dist/esm/light-async';\nimport dark from 'react-syntax-highlighter/dist/esm/styles/hljs/dark';\nimport docco from 'react-syntax-highlighter/dist/esm/styles/hljs/docco';\nimport useMediaQuery from '@material-ui/core/useMediaQuery';\nimport AddCircleOutline from '@material-ui/icons/AddCircleOutline';\nimport * as d3Zoom from 'd3-zoom';\nimport * as d3Selection from 'd3-selection';\nimport useTheme$1 from '@material-ui/core/styles/useTheme';\nimport dagre from 'dagre';\nimport debounce from 'lodash/debounce';\nimport makeStyles$1 from '@material-ui/core/styles/makeStyles';\nimport * as d3Shape from 'd3-shape';\nimport isFinite from 'lodash/isFinite';\nimport useObservable from 'react-use/lib/useObservable';\nimport SnackbarContent from '@material-ui/core/SnackbarContent';\nimport Grid from '@material-ui/core/Grid';\nimport Typography from '@material-ui/core/Typography';\nimport missingAnnotation from './components/EmptyState/assets/missingAnnotation.svg';\nimport noInformation from './components/EmptyState/assets/noInformation.svg';\nimport createComponent from './components/EmptyState/assets/createComponent.svg';\nimport noBuild from './components/EmptyState/assets/noBuild.svg';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport Accordion from '@material-ui/core/Accordion';\nimport AccordionSummary from '@material-ui/core/AccordionSummary';\nimport AccordionDetails from '@material-ui/core/AccordionDetails';\nimport ErrorOutline from '@material-ui/icons/ErrorOutline';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport Divider from '@material-ui/core/Divider';\nimport ClickAwayListener from '@material-ui/core/ClickAwayListener';\nimport { createPortal } from 'react-dom';\nimport LinkIcon from '@material-ui/icons/Link';\nimport ChevronLeftIcon from '@material-ui/icons/ChevronLeft';\nimport ChevronRight from '@material-ui/icons/ChevronRight';\nimport ReactMarkdown from 'react-markdown';\nimport gfm from 'remark-gfm';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar';\nimport { isError, ResponseError, ForwardedError } from '@backstage/errors';\nimport TextTruncate from 'react-text-truncate';\nimport { useIsMounted, useDebouncedEffect, useLocalStorageValue, useAsync, useMountEffect } from '@react-hookz/web';\nimport LinearProgress from '@material-ui/core/LinearProgress';\nimport Card from '@material-ui/core/Card';\nimport CardActions from '@material-ui/core/CardActions';\nimport CardContent from '@material-ui/core/CardContent';\nimport CardHeader from '@material-ui/core/CardHeader';\nimport Box from '@material-ui/core/Box';\nimport ArrowIcon from '@material-ui/icons/ArrowForward';\nimport { Circle, Line } from 'rc-progress';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport Chip from '@material-ui/core/Chip';\nimport FormControl from '@material-ui/core/FormControl';\nimport InputBase from '@material-ui/core/InputBase';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Select from '@material-ui/core/Select';\nimport SvgIcon from '@material-ui/core/SvgIcon';\nimport MuiStepper from '@material-ui/core/Stepper';\nimport MuiStep from '@material-ui/core/Step';\nimport StepContent from '@material-ui/core/StepContent';\nimport StepLabel from '@material-ui/core/StepLabel';\nimport startCase from 'lodash/startCase';\nimport Table$1 from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableRow from '@material-ui/core/TableRow';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport Popover from '@material-ui/core/Popover';\nimport qs from 'qs';\nimport MuiBrokenImageIcon from '@material-ui/icons/BrokenImage';\nimport { Helmet } from 'react-helmet';\nimport { useLocation as useLocation$1, useNavigate, useParams, useRoutes, matchRoutes } from 'react-router';\nimport { createVersionedContext, createVersionedValueMap } from '@backstage/version-bridge';\nimport BottomNavigation from '@material-ui/core/BottomNavigation';\nimport Drawer from '@material-ui/core/Drawer';\nimport MenuIcon from '@material-ui/icons/Menu';\nimport BottomNavigationAction from '@material-ui/core/BottomNavigationAction';\nimport ArrowDropDownIcon from '@material-ui/icons/ArrowDropDown';\nimport ArrowDropUpIcon from '@material-ui/icons/ArrowDropUp';\nimport Badge from '@material-ui/core/Badge';\nimport TextField from '@material-ui/core/TextField';\nimport ArrowRightIcon from '@material-ui/icons/ArrowRight';\nimport SearchIcon from '@material-ui/icons/Search';\nimport Collapse from '@material-ui/core/Collapse';\nimport ArrowBackIosIcon from '@material-ui/icons/ArrowBackIos';\nimport ArrowForwardIosIcon from '@material-ui/icons/ArrowForwardIos';\nimport Tab from '@material-ui/core/Tab';\nimport Tabs$1 from '@material-ui/core/Tabs';\nimport AddBox from '@material-ui/icons/AddBox';\nimport ArrowUpward from '@material-ui/icons/ArrowUpward';\nimport Check from '@material-ui/icons/Check';\nimport Clear from '@material-ui/icons/Clear';\nimport DeleteOutline from '@material-ui/icons/DeleteOutline';\nimport Edit from '@material-ui/icons/Edit';\nimport FilterList from '@material-ui/icons/FilterList';\nimport FirstPage from '@material-ui/icons/FirstPage';\nimport LastPage from '@material-ui/icons/LastPage';\nimport Remove from '@material-ui/icons/Remove';\nimport SaveAlt from '@material-ui/icons/SaveAlt';\nimport ViewColumn from '@material-ui/icons/ViewColumn';\nimport MTable, { MTableHeader, MTableToolbar, MTableBody } from '@material-table/core';\nimport AppBar from '@material-ui/core/AppBar';\nimport NavigateBeforeIcon from '@material-ui/icons/NavigateBefore';\nimport NavigateNextIcon from '@material-ui/icons/NavigateNext';\nimport useWindowSize from 'react-use/lib/useWindowSize';\nimport { Sparklines, SparklinesLine } from 'react-sparklines';\nimport MicDropSvgUrl from './layout/ErrorPage/mic-drop.svg';\nimport MaterialBreadcrumbs from '@material-ui/core/Breadcrumbs';\nimport MoreVert from '@material-ui/icons/MoreVert';\nimport CardMedia from '@material-ui/core/CardMedia';\nimport { z } from 'zod';\nimport { useForm } from 'react-hook-form';\nimport FormHelperText from '@material-ui/core/FormHelperText';\nimport isEmpty from 'lodash/isEmpty';\n\nfunction AlertDisplay(props) {\n  const [messages, setMessages] = useState([]);\n  const alertApi = useApi(alertApiRef);\n  const { anchorOrigin = { vertical: \"top\", horizontal: \"center\" } } = props;\n  useEffect(() => {\n    const subscription = alertApi.alert$().subscribe((message) => setMessages((msgs) => msgs.concat(message)));\n    return () => {\n      subscription.unsubscribe();\n    };\n  }, [alertApi]);\n  if (messages.length === 0) {\n    return null;\n  }\n  const [firstMessage] = messages;\n  const handleClose = () => {\n    setMessages((msgs) => msgs.filter((msg) => msg !== firstMessage));\n  };\n  return /* @__PURE__ */ React.createElement(Snackbar, {\n    open: true,\n    anchorOrigin\n  }, /* @__PURE__ */ React.createElement(Alert, {\n    action: /* @__PURE__ */ React.createElement(IconButton, {\n      color: \"inherit\",\n      size: \"small\",\n      onClick: handleClose,\n      \"data-testid\": \"error-button-close\"\n    }, /* @__PURE__ */ React.createElement(CloseIcon, null)),\n    severity: firstMessage.severity\n  }, /* @__PURE__ */ React.createElement(\"span\", null, firstMessage.message.toString(), messages.length > 1 && /* @__PURE__ */ React.createElement(\"em\", null, ` (${messages.length - 1} older ${pluralize(\n    \"message\",\n    messages.length - 1\n  )})`))));\n}\n\nfunction stringToColor(str) {\n  let hash = 0;\n  for (let i = 0; i < str.length; i++) {\n    hash = str.charCodeAt(i) + ((hash << 5) - hash);\n  }\n  let color = \"#\";\n  for (let i = 0; i < 3; i++) {\n    const value = hash >> i * 8 & 255;\n    color += `00${value.toString(16)}`.substr(-2);\n  }\n  return color;\n}\nfunction extractInitials(value) {\n  var _a;\n  return (_a = value.match(/\\b\\w/g)) == null ? void 0 : _a.join(\"\").substring(0, 2);\n}\n\nconst useStyles$S = makeStyles(\n  (theme) => createStyles({\n    avatar: {\n      width: \"4rem\",\n      height: \"4rem\",\n      color: \"#fff\",\n      fontWeight: theme.typography.fontWeightBold,\n      letterSpacing: \"1px\",\n      textTransform: \"uppercase\"\n    }\n  }),\n  { name: \"BackstageAvatar\" }\n);\nfunction Avatar(props) {\n  const { displayName, picture, customStyles } = props;\n  const classes = useStyles$S();\n  let styles = { ...customStyles };\n  if (!picture) {\n    styles = {\n      backgroundColor: stringToColor(displayName || \"\"),\n      ...customStyles\n    };\n  }\n  return /* @__PURE__ */ React.createElement(MaterialAvatar, {\n    alt: displayName,\n    src: picture,\n    className: classes.avatar,\n    style: styles\n  }, displayName && extractInitials(displayName));\n}\n\nconst useStyles$R = makeStyles(\n  {\n    visuallyHidden: {\n      clip: \"rect(0 0 0 0)\",\n      clipPath: \"inset(50%)\",\n      overflow: \"hidden\",\n      position: \"absolute\",\n      whiteSpace: \"nowrap\",\n      height: 1,\n      width: 1\n    },\n    externalLink: {\n      position: \"relative\"\n    }\n  },\n  { name: \"Link\" }\n);\nconst isExternalUri = (uri) => /^([a-z+.-]+):/.test(uri);\nconst useBaseUrl = () => {\n  try {\n    const config = useApi(configApiRef);\n    return config.getOptionalString(\"app.baseUrl\");\n  } catch {\n    return void 0;\n  }\n};\nconst useBasePath = () => {\n  var _a;\n  const base = \"http://dummy.dev\";\n  const url = (_a = useBaseUrl()) != null ? _a : \"/\";\n  const { pathname } = new URL(url, base);\n  return trimEnd(pathname, \"/\");\n};\nconst useResolvedPath = (uri) => {\n  let resolvedPath = String(uri);\n  const basePath = useBasePath();\n  const external = isExternalUri(resolvedPath);\n  const startsWithBasePath = resolvedPath.startsWith(basePath);\n  if (!external && !startsWithBasePath) {\n    resolvedPath = basePath.concat(resolvedPath);\n  }\n  return resolvedPath;\n};\nconst getNodeText = (node) => {\n  var _a;\n  if (node instanceof Array) {\n    return node.map(getNodeText).join(\" \").trim();\n  }\n  if (typeof node === \"object\" && node) {\n    return getNodeText((_a = node == null ? void 0 : node.props) == null ? void 0 : _a.children);\n  }\n  if ([\"string\", \"number\"].includes(typeof node)) {\n    return String(node);\n  }\n  return \"\";\n};\nconst Link = React.forwardRef(\n  ({ onClick, noTrack, ...props }, ref) => {\n    const classes = useStyles$R();\n    const analytics = useAnalytics();\n    const to = useResolvedPath(props.to);\n    const linkText = getNodeText(props.children) || to;\n    const external = isExternalUri(to);\n    const newWindow = external && !!/^https?:/.exec(to);\n    const handleClick = (event) => {\n      onClick == null ? void 0 : onClick(event);\n      if (!noTrack) {\n        analytics.captureEvent(\"click\", linkText, { attributes: { to } });\n      }\n    };\n    return external ? /* @__PURE__ */ React.createElement(Link$1, {\n      ...newWindow ? { target: \"_blank\", rel: \"noopener\" } : {},\n      ...props,\n      ref,\n      href: to,\n      onClick: handleClick,\n      className: classNames(classes.externalLink, props.className)\n    }, props.children, /* @__PURE__ */ React.createElement(\"span\", {\n      className: classes.visuallyHidden\n    }, \", Opens in a new window\")) : /* @__PURE__ */ React.createElement(Link$1, {\n      ...props,\n      ref,\n      component: Link$2,\n      to,\n      onClick: handleClick\n    });\n  }\n);\n\nconst LinkWrapper = React.forwardRef((props, ref) => /* @__PURE__ */ React.createElement(Link, {\n  ref,\n  ...props,\n  color: \"initial\"\n}));\nconst Button = React.forwardRef((props, ref) => /* @__PURE__ */ React.createElement(Button$1, {\n  ref,\n  component: LinkWrapper,\n  ...props\n}));\n\nfunction CopyTextButton(props) {\n  const {\n    text,\n    tooltipDelay = 1e3,\n    tooltipText = \"Text copied to clipboard\",\n    \"aria-label\": ariaLabel = \"Copy text\"\n  } = props;\n  const errorApi = useApi(errorApiRef);\n  const [open, setOpen] = useState(false);\n  const [{ error }, copyToClipboard] = useCopyToClipboard();\n  useEffect(() => {\n    if (error) {\n      errorApi.post(error);\n    }\n  }, [error, errorApi]);\n  const handleCopyClick = (e) => {\n    e.stopPropagation();\n    setOpen(true);\n    copyToClipboard(text);\n  };\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(Tooltip, {\n    id: \"copy-test-tooltip\",\n    title: tooltipText,\n    placement: \"top\",\n    leaveDelay: tooltipDelay,\n    onClose: () => setOpen(false),\n    open\n  }, /* @__PURE__ */ React.createElement(IconButton, {\n    onClick: handleCopyClick,\n    \"aria-label\": ariaLabel\n  }, /* @__PURE__ */ React.createElement(CopyIcon, null))));\n}\n\nfunction CodeSnippet(props) {\n  const {\n    text,\n    language,\n    showLineNumbers = false,\n    highlightedNumbers,\n    customStyle,\n    showCopyCodeButton = false\n  } = props;\n  const theme = useTheme();\n  const mode = theme.palette.type === \"dark\" ? dark : docco;\n  const highlightColor = theme.palette.type === \"dark\" ? \"#256bf3\" : \"#e6ffed\";\n  return /* @__PURE__ */ React.createElement(\"div\", {\n    style: { position: \"relative\" }\n  }, /* @__PURE__ */ React.createElement(LightAsync, {\n    customStyle,\n    language,\n    style: mode,\n    showLineNumbers,\n    wrapLines: true,\n    lineNumberStyle: { color: theme.palette.textVerySubtle },\n    lineProps: (lineNumber) => (highlightedNumbers == null ? void 0 : highlightedNumbers.includes(lineNumber)) ? {\n      style: {\n        backgroundColor: highlightColor\n      }\n    } : {}\n  }, text), showCopyCodeButton && /* @__PURE__ */ React.createElement(\"div\", {\n    style: { position: \"absolute\", top: 0, right: 0 }\n  }, /* @__PURE__ */ React.createElement(CopyTextButton, {\n    text\n  })));\n}\n\nfunction CreateButton(props) {\n  const { title, to } = props;\n  const isXSScreen = useMediaQuery(\n    (theme) => theme.breakpoints.down(\"xs\")\n  );\n  if (!to) {\n    return null;\n  }\n  return isXSScreen ? /* @__PURE__ */ React.createElement(IconButton, {\n    component: Link$2,\n    color: \"primary\",\n    title,\n    size: \"small\",\n    to\n  }, /* @__PURE__ */ React.createElement(AddCircleOutline, null)) : /* @__PURE__ */ React.createElement(Button$1, {\n    component: Link$2,\n    variant: \"contained\",\n    color: \"primary\",\n    to\n  }, title);\n}\n\nvar Direction = /* @__PURE__ */ ((Direction2) => {\n  Direction2[\"TOP_BOTTOM\"] = \"TB\";\n  Direction2[\"BOTTOM_TOP\"] = \"BT\";\n  Direction2[\"LEFT_RIGHT\"] = \"LR\";\n  Direction2[\"RIGHT_LEFT\"] = \"RL\";\n  return Direction2;\n})(Direction || {});\nvar Alignment = /* @__PURE__ */ ((Alignment2) => {\n  Alignment2[\"UP_LEFT\"] = \"UL\";\n  Alignment2[\"UP_RIGHT\"] = \"UR\";\n  Alignment2[\"DOWN_LEFT\"] = \"DL\";\n  Alignment2[\"DOWN_RIGHT\"] = \"DR\";\n  return Alignment2;\n})(Alignment || {});\nvar Ranker = /* @__PURE__ */ ((Ranker2) => {\n  Ranker2[\"NETWORK_SIMPLEX\"] = \"network-simplex\";\n  Ranker2[\"TIGHT_TREE\"] = \"tight-tree\";\n  Ranker2[\"LONGEST_PATH\"] = \"longest-path\";\n  return Ranker2;\n})(Ranker || {});\nvar LabelPosition = /* @__PURE__ */ ((LabelPosition2) => {\n  LabelPosition2[\"LEFT\"] = \"l\";\n  LabelPosition2[\"RIGHT\"] = \"r\";\n  LabelPosition2[\"CENTER\"] = \"c\";\n  return LabelPosition2;\n})(LabelPosition || {});\n\nvar types = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  Direction: Direction,\n  Alignment: Alignment,\n  Ranker: Ranker,\n  LabelPosition: LabelPosition\n});\n\nconst useStyles$Q = makeStyles(\n  (theme) => ({\n    node: {\n      fill: theme.palette.primary.light,\n      stroke: theme.palette.primary.light\n    },\n    text: {\n      fill: theme.palette.primary.contrastText\n    }\n  }),\n  { name: \"BackstageDependencyGraphDefaultNode\" }\n);\nfunction DefaultNode({ node: { id } }) {\n  const classes = useStyles$Q();\n  const [width, setWidth] = React.useState(0);\n  const [height, setHeight] = React.useState(0);\n  const idRef = React.useRef(null);\n  React.useLayoutEffect(() => {\n    if (idRef.current) {\n      let { height: renderedHeight, width: renderedWidth } = idRef.current.getBBox();\n      renderedHeight = Math.round(renderedHeight);\n      renderedWidth = Math.round(renderedWidth);\n      if (renderedHeight !== height || renderedWidth !== width) {\n        setWidth(renderedWidth);\n        setHeight(renderedHeight);\n      }\n    }\n  }, [width, height]);\n  const padding = 10;\n  const paddedWidth = width + padding * 2;\n  const paddedHeight = height + padding * 2;\n  return /* @__PURE__ */ React.createElement(\"g\", null, /* @__PURE__ */ React.createElement(\"rect\", {\n    className: classes.node,\n    width: paddedWidth,\n    height: paddedHeight,\n    rx: 10\n  }), /* @__PURE__ */ React.createElement(\"text\", {\n    ref: idRef,\n    className: classes.text,\n    y: paddedHeight / 2,\n    x: paddedWidth / 2,\n    textAnchor: \"middle\",\n    alignmentBaseline: \"middle\"\n  }, id));\n}\n\nconst ARROW_MARKER_ID = \"arrow-marker\";\nconst NODE_TEST_ID = \"node\";\nconst EDGE_TEST_ID = \"edge\";\nconst LABEL_TEST_ID = \"label\";\n\nconst useStyles$P = makeStyles$1(\n  (theme) => ({\n    node: {\n      transition: `${theme.transitions.duration.shortest}ms`\n    }\n  }),\n  { name: \"BackstageDependencyGraphNode\" }\n);\nconst renderDefault$1 = (props) => /* @__PURE__ */ React.createElement(DefaultNode, {\n  ...props\n});\nfunction Node({\n  render = renderDefault$1,\n  setNode,\n  node\n}) {\n  const { width, height, x = 0, y = 0 } = node;\n  const nodeProps = node;\n  const classes = useStyles$P();\n  const nodeRef = React.useRef(null);\n  React.useLayoutEffect(() => {\n    if (nodeRef.current) {\n      let { height: renderedHeight, width: renderedWidth } = nodeRef.current.getBBox();\n      renderedHeight = Math.round(renderedHeight);\n      renderedWidth = Math.round(renderedWidth);\n      if (renderedHeight !== height || renderedWidth !== width) {\n        setNode(node.id, {\n          ...node,\n          height: renderedHeight,\n          width: renderedWidth\n        });\n      }\n    }\n  }, [node, width, height, setNode]);\n  return /* @__PURE__ */ React.createElement(\"g\", {\n    ref: nodeRef,\n    \"data-testid\": NODE_TEST_ID,\n    className: classes.node,\n    transform: `translate(${x - width / 2},${y - height / 2})`\n  }, render({ node: nodeProps }));\n}\n\nconst useStyles$O = makeStyles$1(\n  (theme) => ({\n    text: {\n      fill: theme.palette.textContrast\n    }\n  }),\n  { name: \"BackstageDependencyGraphDefaultLabel\" }\n);\nfunction DefaultLabel({ edge: { label } }) {\n  const classes = useStyles$O();\n  return /* @__PURE__ */ React.createElement(\"text\", {\n    className: classes.text,\n    textAnchor: \"middle\"\n  }, label);\n}\n\nconst useStyles$N = makeStyles$1(\n  (theme) => ({\n    path: {\n      strokeWidth: 1,\n      stroke: theme.palette.textSubtle,\n      fill: \"none\",\n      transition: `${theme.transitions.duration.shortest}ms`\n    },\n    label: {\n      transition: `${theme.transitions.duration.shortest}ms`\n    }\n  }),\n  { name: \"BackstageDependencyGraphEdge\" }\n);\nconst renderDefault = (props) => /* @__PURE__ */ React.createElement(DefaultLabel, {\n  ...props\n});\nfunction Edge({\n  render = renderDefault,\n  setEdge,\n  id,\n  edge,\n  curve\n}) {\n  const { x = 0, y = 0, width, height, points } = edge;\n  const labelProps = edge;\n  const classes = useStyles$N();\n  const labelRef = React.useRef(null);\n  React.useLayoutEffect(() => {\n    if (labelRef.current) {\n      let { height: renderedHeight, width: renderedWidth } = labelRef.current.getBBox();\n      renderedHeight = Math.round(renderedHeight);\n      renderedWidth = Math.round(renderedWidth);\n      if (renderedHeight !== height || renderedWidth !== width) {\n        setEdge(id, {\n          ...edge,\n          height: renderedHeight,\n          width: renderedWidth\n        });\n      }\n    }\n  }, [edge, height, width, setEdge, id]);\n  let path = \"\";\n  const createPath = React.useMemo(\n    () => d3Shape.line().x((d) => d.x).y((d) => d.y).curve(d3Shape[curve]),\n    [curve]\n  );\n  if (points) {\n    const finitePoints = points.filter(\n      (point) => isFinite(point.x) && isFinite(point.y)\n    );\n    path = createPath(finitePoints) || \"\";\n  }\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, path && /* @__PURE__ */ React.createElement(\"path\", {\n    \"data-testid\": EDGE_TEST_ID,\n    className: classes.path,\n    d: path\n  }), labelProps.label ? /* @__PURE__ */ React.createElement(\"g\", {\n    ref: labelRef,\n    \"data-testid\": LABEL_TEST_ID,\n    className: classes.label,\n    transform: `translate(${x},${y})`\n  }, render({ edge: labelProps })) : null);\n}\n\nconst WORKSPACE_ID = \"workspace\";\nfunction DependencyGraph(props) {\n  var _a, _b;\n  const {\n    edges,\n    nodes,\n    renderNode,\n    direction = Direction.TOP_BOTTOM,\n    align,\n    nodeMargin = 50,\n    edgeMargin = 10,\n    rankMargin = 50,\n    paddingX = 0,\n    paddingY = 0,\n    acyclicer,\n    ranker = Ranker.NETWORK_SIMPLEX,\n    labelPosition = LabelPosition.RIGHT,\n    labelOffset = 10,\n    edgeRanks = 1,\n    edgeWeight = 1,\n    renderLabel,\n    defs,\n    zoom = \"enabled\",\n    curve = \"curveMonotoneX\",\n    ...svgProps\n  } = props;\n  const theme = useTheme$1();\n  const [containerWidth, setContainerWidth] = React.useState(100);\n  const [containerHeight, setContainerHeight] = React.useState(100);\n  const graph = React.useRef(\n    new dagre.graphlib.Graph()\n  );\n  const [graphWidth, setGraphWidth] = React.useState(\n    ((_a = graph.current.graph()) == null ? void 0 : _a.width) || 0\n  );\n  const [graphHeight, setGraphHeight] = React.useState(\n    ((_b = graph.current.graph()) == null ? void 0 : _b.height) || 0\n  );\n  const [graphNodes, setGraphNodes] = React.useState([]);\n  const [graphEdges, setGraphEdges] = React.useState([]);\n  const maxWidth = Math.max(graphWidth, containerWidth);\n  const maxHeight = Math.max(graphHeight, containerHeight);\n  const containerRef = React.useMemo(\n    () => debounce((node) => {\n      if (!node) {\n        return;\n      }\n      const container = d3Selection.select(node);\n      const workspace = d3Selection.select(node.getElementById(WORKSPACE_ID));\n      function enableZoom() {\n        container.call(\n          d3Zoom.zoom().scaleExtent([1, 10]).on(\"zoom\", (event) => {\n            event.transform.x = Math.min(\n              0,\n              Math.max(\n                event.transform.x,\n                maxWidth - maxWidth * event.transform.k\n              )\n            );\n            event.transform.y = Math.min(\n              0,\n              Math.max(\n                event.transform.y,\n                maxHeight - maxHeight * event.transform.k\n              )\n            );\n            workspace.attr(\"transform\", event.transform);\n          })\n        );\n      }\n      if (zoom === \"enabled\") {\n        enableZoom();\n      } else if (zoom === \"enable-on-click\") {\n        container.on(\"click\", () => enableZoom());\n      }\n      const { width: newContainerWidth, height: newContainerHeight } = node.getBoundingClientRect();\n      if (containerWidth !== newContainerWidth) {\n        setContainerWidth(newContainerWidth);\n      }\n      if (containerHeight !== newContainerHeight) {\n        setContainerHeight(newContainerHeight);\n      }\n    }, 100),\n    [containerHeight, containerWidth, maxWidth, maxHeight, zoom]\n  );\n  const setNodesAndEdges = React.useCallback(() => {\n    const currentGraphNodes = graph.current.nodes();\n    const currentGraphEdges = graph.current.edges();\n    currentGraphNodes.forEach((nodeId) => {\n      const remainingNode = nodes.some((node) => node.id === nodeId);\n      if (!remainingNode) {\n        graph.current.removeNode(nodeId);\n      }\n    });\n    currentGraphEdges.forEach((e) => {\n      const remainingEdge = edges.some(\n        (edge) => edge.from === e.v && edge.to === e.w\n      );\n      if (!remainingEdge) {\n        graph.current.removeEdge(e.v, e.w);\n      }\n    });\n    nodes.forEach((node) => {\n      const existingNode = graph.current.nodes().find((nodeId) => node.id === nodeId);\n      if (existingNode && graph.current.node(existingNode)) {\n        const { width, height, x, y } = graph.current.node(existingNode);\n        graph.current.setNode(existingNode, { ...node, width, height, x, y });\n      } else {\n        graph.current.setNode(node.id, { ...node, width: 0, height: 0 });\n      }\n    });\n    edges.forEach((e) => {\n      graph.current.setEdge(e.from, e.to, {\n        ...e,\n        label: e.label,\n        width: 0,\n        height: 0,\n        labelpos: labelPosition,\n        labeloffset: labelOffset,\n        weight: edgeWeight,\n        minlen: edgeRanks\n      });\n    });\n  }, [edges, nodes, labelPosition, labelOffset, edgeWeight, edgeRanks]);\n  const updateGraph = React.useMemo(\n    () => debounce(\n      () => {\n        dagre.layout(graph.current);\n        const { height, width } = graph.current.graph();\n        const newHeight = Math.max(0, height || 0);\n        const newWidth = Math.max(0, width || 0);\n        setGraphWidth(newWidth);\n        setGraphHeight(newHeight);\n        setGraphNodes(graph.current.nodes());\n        setGraphEdges(graph.current.edges());\n      },\n      250,\n      { leading: true }\n    ),\n    []\n  );\n  React.useEffect(() => {\n    graph.current.setGraph({\n      rankdir: direction,\n      align,\n      nodesep: nodeMargin,\n      edgesep: edgeMargin,\n      ranksep: rankMargin,\n      marginx: paddingX,\n      marginy: paddingY,\n      acyclicer,\n      ranker\n    });\n    setNodesAndEdges();\n    updateGraph();\n    return updateGraph.cancel;\n  }, [\n    acyclicer,\n    align,\n    direction,\n    edgeMargin,\n    paddingX,\n    paddingY,\n    nodeMargin,\n    rankMargin,\n    ranker,\n    setNodesAndEdges,\n    updateGraph\n  ]);\n  function setNode(id, node) {\n    graph.current.setNode(id, node);\n    updateGraph();\n    return graph.current;\n  }\n  function setEdge(id, edge) {\n    graph.current.setEdge(id, edge);\n    updateGraph();\n    return graph.current;\n  }\n  return /* @__PURE__ */ React.createElement(\"svg\", {\n    ref: containerRef,\n    ...svgProps,\n    width: \"100%\",\n    height: maxHeight,\n    viewBox: `0 0 ${maxWidth} ${maxHeight}`\n  }, /* @__PURE__ */ React.createElement(\"defs\", null, /* @__PURE__ */ React.createElement(\"marker\", {\n    id: ARROW_MARKER_ID,\n    viewBox: \"0 0 24 24\",\n    markerWidth: \"14\",\n    markerHeight: \"14\",\n    refX: \"16\",\n    refY: \"12\",\n    orient: \"auto\",\n    markerUnits: \"strokeWidth\"\n  }, /* @__PURE__ */ React.createElement(\"path\", {\n    fill: theme.palette.textSubtle,\n    d: \"M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z\"\n  })), defs), /* @__PURE__ */ React.createElement(\"g\", {\n    id: WORKSPACE_ID\n  }, /* @__PURE__ */ React.createElement(\"svg\", {\n    width: graphWidth,\n    height: graphHeight,\n    y: maxHeight / 2 - graphHeight / 2,\n    x: maxWidth / 2 - graphWidth / 2,\n    viewBox: `0 0 ${graphWidth} ${graphHeight}`\n  }, graphEdges.map((e) => {\n    const edge = graph.current.edge(e);\n    if (!edge)\n      return null;\n    return /* @__PURE__ */ React.createElement(Edge, {\n      key: `${e.v}-${e.w}`,\n      id: e,\n      setEdge,\n      render: renderLabel,\n      edge,\n      curve\n    });\n  }), graphNodes.map((id) => {\n    const node = graph.current.node(id);\n    if (!node)\n      return null;\n    return /* @__PURE__ */ React.createElement(Node, {\n      key: id,\n      setNode,\n      render: renderNode,\n      node\n    });\n  }))));\n}\n\nconst useStyles$M = makeStyles(\n  (theme) => {\n    var _a;\n    return {\n      root: {\n        padding: theme.spacing(0),\n        marginBottom: theme.spacing(0),\n        marginTop: theme.spacing(0),\n        display: \"flex\",\n        flexFlow: \"row nowrap\"\n      },\n      topPosition: {\n        position: \"relative\",\n        marginBottom: theme.spacing(6),\n        marginTop: -theme.spacing(3),\n        zIndex: \"unset\"\n      },\n      icon: {\n        fontSize: 20\n      },\n      content: {\n        width: \"100%\",\n        maxWidth: \"inherit\",\n        flexWrap: \"nowrap\"\n      },\n      message: {\n        display: \"flex\",\n        alignItems: \"center\",\n        color: theme.palette.banner.text,\n        \"& a\": {\n          color: theme.palette.banner.link\n        }\n      },\n      info: {\n        backgroundColor: theme.palette.banner.info\n      },\n      error: {\n        backgroundColor: theme.palette.banner.error\n      },\n      warning: {\n        backgroundColor: (_a = theme.palette.banner.warning) != null ? _a : theme.palette.banner.error\n      }\n    };\n  },\n  { name: \"BackstageDismissableBanner\" }\n);\nconst DismissableBanner = (props) => {\n  var _a;\n  const { variant, message, id, fixed = false } = props;\n  const classes = useStyles$M();\n  const storageApi = useApi(storageApiRef);\n  const notificationsStore = storageApi.forBucket(\"notifications\");\n  const rawDismissedBanners = (_a = notificationsStore.snapshot(\"dismissedBanners\").value) != null ? _a : [];\n  const [dismissedBanners, setDismissedBanners] = useState(\n    new Set(rawDismissedBanners)\n  );\n  const observedItems = useObservable(\n    notificationsStore.observe$(\"dismissedBanners\")\n  );\n  useEffect(() => {\n    var _a2;\n    if (observedItems == null ? void 0 : observedItems.value) {\n      const currentValue = (_a2 = observedItems == null ? void 0 : observedItems.value) != null ? _a2 : [];\n      setDismissedBanners(new Set(currentValue));\n    }\n  }, [observedItems == null ? void 0 : observedItems.value]);\n  const handleClick = () => {\n    notificationsStore.set(\"dismissedBanners\", [...dismissedBanners, id]);\n  };\n  return /* @__PURE__ */ React.createElement(Snackbar, {\n    anchorOrigin: fixed ? { vertical: \"bottom\", horizontal: \"center\" } : { vertical: \"top\", horizontal: \"center\" },\n    open: !dismissedBanners.has(id),\n    classes: {\n      root: classNames(classes.root, !fixed && classes.topPosition)\n    }\n  }, /* @__PURE__ */ React.createElement(SnackbarContent, {\n    classes: {\n      root: classNames(classes.content, classes[variant]),\n      message: classes.message\n    },\n    message,\n    action: [\n      /* @__PURE__ */ React.createElement(IconButton, {\n        key: \"dismiss\",\n        title: \"Permanently dismiss this message\",\n        color: \"inherit\",\n        onClick: handleClick\n      }, /* @__PURE__ */ React.createElement(CloseIcon, {\n        className: classes.icon\n      }))\n    ]\n  }));\n};\n\nconst useStyles$L = makeStyles(\n  {\n    generalImg: {\n      width: \"95%\",\n      zIndex: 2,\n      position: \"relative\",\n      left: \"50%\",\n      top: \"50%\",\n      transform: \"translate(-50%, 15%)\"\n    }\n  },\n  { name: \"BackstageEmptyStateImage\" }\n);\nconst EmptyStateImage = ({ missing }) => {\n  const classes = useStyles$L();\n  switch (missing) {\n    case \"field\":\n      return /* @__PURE__ */ React.createElement(\"img\", {\n        src: missingAnnotation,\n        className: classes.generalImg,\n        alt: \"annotation is missing\"\n      });\n    case \"info\":\n      return /* @__PURE__ */ React.createElement(\"img\", {\n        src: noInformation,\n        alt: \"no Information\",\n        className: classes.generalImg\n      });\n    case \"content\":\n      return /* @__PURE__ */ React.createElement(\"img\", {\n        src: createComponent,\n        alt: \"create Component\",\n        className: classes.generalImg\n      });\n    case \"data\":\n      return /* @__PURE__ */ React.createElement(\"img\", {\n        src: noBuild,\n        alt: \"no Build\",\n        className: classes.generalImg\n      });\n    default:\n      return null;\n  }\n};\n\nconst useStyles$K = makeStyles(\n  (theme) => ({\n    root: {\n      backgroundColor: theme.palette.background.default,\n      padding: theme.spacing(2, 0, 0, 0)\n    },\n    action: {\n      marginTop: theme.spacing(2)\n    },\n    imageContainer: {\n      position: \"relative\"\n    }\n  }),\n  { name: \"BackstageEmptyState\" }\n);\nfunction EmptyState(props) {\n  const { title, description, missing, action } = props;\n  const classes = useStyles$K();\n  return /* @__PURE__ */ React.createElement(Grid, {\n    container: true,\n    direction: \"row\",\n    justifyContent: \"space-around\",\n    alignItems: \"flex-start\",\n    className: classes.root,\n    spacing: 2\n  }, /* @__PURE__ */ React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    md: 6\n  }, /* @__PURE__ */ React.createElement(Grid, {\n    container: true,\n    direction: \"column\"\n  }, /* @__PURE__ */ React.createElement(Grid, {\n    item: true,\n    xs: true\n  }, /* @__PURE__ */ React.createElement(Typography, {\n    variant: \"h5\"\n  }, title)), /* @__PURE__ */ React.createElement(Grid, {\n    item: true,\n    xs: true\n  }, /* @__PURE__ */ React.createElement(Typography, {\n    variant: \"body1\"\n  }, description)), /* @__PURE__ */ React.createElement(Grid, {\n    item: true,\n    xs: true,\n    className: classes.action\n  }, action))), /* @__PURE__ */ React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    md: 6,\n    className: classes.imageContainer\n  }, typeof missing === \"string\" ? /* @__PURE__ */ React.createElement(EmptyStateImage, {\n    missing\n  }) : missing.customImage));\n}\n\nconst COMPONENT_YAML = `apiVersion: backstage.io/v1alpha1\nkind: Component\nmetadata:\n  name: example\n  description: example.com\n  annotations:\n    ANNOTATION: value\nspec:\n  type: website\n  lifecycle: production\n  owner: user:guest`;\nconst useStyles$J = makeStyles(\n  (theme) => ({\n    code: {\n      borderRadius: 6,\n      margin: `${theme.spacing(2)}px 0px`,\n      background: theme.palette.type === \"dark\" ? \"#444\" : \"#fff\"\n    }\n  }),\n  { name: \"BackstageMissingAnnotationEmptyState\" }\n);\nfunction MissingAnnotationEmptyState(props) {\n  const { annotation, readMoreUrl } = props;\n  const url = readMoreUrl || \"https://backstage.io/docs/features/software-catalog/well-known-annotations\";\n  const classes = useStyles$J();\n  const description = /* @__PURE__ */ React.createElement(React.Fragment, null, \"The \", /* @__PURE__ */ React.createElement(\"code\", null, annotation), \" annotation is missing. You need to add the annotation to your component if you want to enable this tool.\");\n  return /* @__PURE__ */ React.createElement(EmptyState, {\n    missing: \"field\",\n    title: \"Missing Annotation\",\n    description,\n    action: /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(Typography, {\n      variant: \"body1\"\n    }, \"Add the annotation to your component YAML as shown in the highlighted example below:\"), /* @__PURE__ */ React.createElement(\"div\", {\n      className: classes.code\n    }, /* @__PURE__ */ React.createElement(CodeSnippet, {\n      text: COMPONENT_YAML.replace(\"ANNOTATION\", annotation),\n      language: \"yaml\",\n      showLineNumbers: true,\n      highlightedNumbers: [6, 7],\n      customStyle: { background: \"inherit\", fontSize: \"115%\" }\n    })), /* @__PURE__ */ React.createElement(Button$1, {\n      color: \"primary\",\n      component: Link,\n      to: url\n    }, \"Read more\"))\n  });\n}\n\nconst getWarningTextColor = (severity, theme) => {\n  const getColor = theme.palette.type === \"light\" ? darken : lighten;\n  return getColor(theme.palette[severity].light, 0.6);\n};\nconst getWarningBackgroundColor = (severity, theme) => {\n  const getBackgroundColor = theme.palette.type === \"light\" ? lighten : darken;\n  return getBackgroundColor(theme.palette[severity].light, 0.9);\n};\nconst useErrorOutlineStyles = makeStyles((theme) => ({\n  root: {\n    marginRight: theme.spacing(1),\n    fill: ({ severity }) => getWarningTextColor(\n      severity,\n      theme\n    )\n  }\n}));\nconst ErrorOutlineStyled = ({ severity }) => {\n  const classes = useErrorOutlineStyles({ severity });\n  return /* @__PURE__ */ React.createElement(ErrorOutline, {\n    classes\n  });\n};\nconst ExpandMoreIconStyled = ({ severity }) => {\n  const classes = useErrorOutlineStyles({ severity });\n  return /* @__PURE__ */ React.createElement(ExpandMoreIcon, {\n    classes\n  });\n};\nconst useStyles$I = makeStyles(\n  (theme) => ({\n    panel: {\n      backgroundColor: ({ severity }) => getWarningBackgroundColor(\n        severity,\n        theme\n      ),\n      color: ({ severity }) => getWarningTextColor(\n        severity,\n        theme\n      ),\n      verticalAlign: \"middle\"\n    },\n    summary: {\n      display: \"flex\",\n      flexDirection: \"row\"\n    },\n    summaryText: {\n      color: ({ severity }) => getWarningTextColor(\n        severity,\n        theme\n      ),\n      fontWeight: \"bold\"\n    },\n    message: {\n      width: \"100%\",\n      display: \"block\",\n      color: ({ severity }) => getWarningTextColor(\n        severity,\n        theme\n      ),\n      backgroundColor: ({ severity }) => getWarningBackgroundColor(\n        severity,\n        theme\n      )\n    },\n    details: {\n      width: \"100%\",\n      display: \"block\",\n      color: theme.palette.textContrast,\n      backgroundColor: theme.palette.background.default,\n      border: `1px solid ${theme.palette.border}`,\n      padding: theme.spacing(2),\n      fontFamily: \"sans-serif\"\n    }\n  }),\n  { name: \"BackstageWarningPanel\" }\n);\nconst capitalize = (s) => {\n  return s.charAt(0).toLocaleUpperCase(\"en-US\") + s.slice(1);\n};\nfunction WarningPanel(props) {\n  const {\n    severity = \"warning\",\n    title,\n    message,\n    children,\n    defaultExpanded\n  } = props;\n  const classes = useStyles$I({ severity });\n  const subTitle = capitalize(severity) + (title ? `: ${title}` : \"\");\n  return /* @__PURE__ */ React.createElement(Accordion, {\n    defaultExpanded: defaultExpanded != null ? defaultExpanded : false,\n    className: classes.panel,\n    role: \"alert\"\n  }, /* @__PURE__ */ React.createElement(AccordionSummary, {\n    expandIcon: /* @__PURE__ */ React.createElement(ExpandMoreIconStyled, {\n      severity\n    }),\n    className: classes.summary\n  }, /* @__PURE__ */ React.createElement(ErrorOutlineStyled, {\n    severity\n  }), /* @__PURE__ */ React.createElement(Typography, {\n    className: classes.summaryText,\n    variant: \"subtitle1\"\n  }, subTitle)), (message || children) && /* @__PURE__ */ React.createElement(AccordionDetails, null, /* @__PURE__ */ React.createElement(Grid, {\n    container: true\n  }, message && /* @__PURE__ */ React.createElement(Grid, {\n    item: true,\n    xs: 12\n  }, /* @__PURE__ */ React.createElement(Typography, {\n    className: classes.message,\n    variant: \"body1\"\n  }, message)), children && /* @__PURE__ */ React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    className: classes.details\n  }, children))));\n}\n\nconst useStyles$H = makeStyles(\n  (theme) => ({\n    text: {\n      fontFamily: \"monospace\",\n      whiteSpace: \"pre\",\n      overflowX: \"auto\",\n      marginRight: theme.spacing(2)\n    },\n    divider: {\n      margin: theme.spacing(2)\n    }\n  }),\n  { name: \"BackstageErrorPanel\" }\n);\nconst ErrorList = ({\n  error,\n  message,\n  stack,\n  children\n}) => {\n  const classes = useStyles$H();\n  return /* @__PURE__ */ React.createElement(List, {\n    dense: true\n  }, /* @__PURE__ */ React.createElement(ListItem, {\n    alignItems: \"flex-start\"\n  }, /* @__PURE__ */ React.createElement(ListItemText, {\n    classes: { secondary: classes.text },\n    primary: \"Error\",\n    secondary: error\n  }), /* @__PURE__ */ React.createElement(CopyTextButton, {\n    text: error\n  })), /* @__PURE__ */ React.createElement(ListItem, {\n    alignItems: \"flex-start\"\n  }, /* @__PURE__ */ React.createElement(ListItemText, {\n    classes: { secondary: classes.text },\n    primary: \"Message\",\n    secondary: message\n  }), /* @__PURE__ */ React.createElement(CopyTextButton, {\n    text: message\n  })), stack && /* @__PURE__ */ React.createElement(ListItem, {\n    alignItems: \"flex-start\"\n  }, /* @__PURE__ */ React.createElement(ListItemText, {\n    classes: { secondary: classes.text },\n    primary: \"Stack Trace\",\n    secondary: stack\n  }), /* @__PURE__ */ React.createElement(CopyTextButton, {\n    text: stack\n  })), children);\n};\nfunction ErrorPanel(props) {\n  const { title, error, defaultExpanded, children } = props;\n  return /* @__PURE__ */ React.createElement(WarningPanel, {\n    severity: \"error\",\n    title: title != null ? title : error.message,\n    defaultExpanded\n  }, /* @__PURE__ */ React.createElement(ErrorList, {\n    error: error.name,\n    message: error.message,\n    stack: error.stack,\n    children\n  }));\n}\n\nconst useStyles$G = makeStyles(\n  (theme) => ({\n    text: {\n      fontFamily: \"monospace\",\n      whiteSpace: \"pre\",\n      overflowX: \"auto\",\n      marginRight: theme.spacing(2)\n    },\n    divider: {\n      margin: theme.spacing(2)\n    }\n  }),\n  { name: \"BackstageResponseErrorPanel\" }\n);\nfunction ResponseErrorPanel(props) {\n  var _a;\n  const { title, error, defaultExpanded } = props;\n  const classes = useStyles$G();\n  if (error.name !== \"ResponseError\") {\n    return /* @__PURE__ */ React.createElement(ErrorPanel, {\n      title: title != null ? title : error.message,\n      defaultExpanded,\n      error\n    });\n  }\n  const { body, cause } = error;\n  const { request, response } = body;\n  const errorString = `${response.statusCode}: ${cause.name}`;\n  const requestString = request && `${request.method} ${request.url}`;\n  const messageString = cause.message.replace(/\\\\n/g, \"\\n\");\n  const stackString = (_a = cause.stack) == null ? void 0 : _a.replace(/\\\\n/g, \"\\n\");\n  const jsonString = JSON.stringify(body, void 0, 2);\n  return /* @__PURE__ */ React.createElement(ErrorPanel, {\n    title: title != null ? title : error.message,\n    defaultExpanded,\n    error: { name: errorString, message: messageString, stack: stackString }\n  }, requestString && /* @__PURE__ */ React.createElement(ListItem, {\n    alignItems: \"flex-start\"\n  }, /* @__PURE__ */ React.createElement(ListItemText, {\n    classes: { secondary: classes.text },\n    primary: \"Request\",\n    secondary: request ? `${requestString}` : void 0\n  }), /* @__PURE__ */ React.createElement(CopyTextButton, {\n    text: requestString\n  })), /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(Divider, {\n    component: \"li\",\n    className: classes.divider\n  }), /* @__PURE__ */ React.createElement(ListItem, {\n    alignItems: \"flex-start\"\n  }, /* @__PURE__ */ React.createElement(ListItemText, {\n    classes: { secondary: classes.text },\n    primary: \"Full Error as JSON\"\n  })), /* @__PURE__ */ React.createElement(CodeSnippet, {\n    language: \"json\",\n    text: jsonString,\n    showCopyCodeButton: true\n  })));\n}\n\nfunction createRootElement(id) {\n  const rootContainer = document.createElement(\"div\");\n  rootContainer.setAttribute(\"id\", id);\n  return rootContainer;\n}\nfunction addRootElement(rootElem) {\n  document.body.insertBefore(\n    rootElem,\n    document.body.lastElementChild.nextElementSibling\n  );\n}\nfunction usePortal(id) {\n  const rootElemRef = useRef(null);\n  useEffect(\n    function setupElement() {\n      const existingParent = document.querySelector(`#${id}`);\n      const parentElem = existingParent || createRootElement(id);\n      if (!existingParent) {\n        addRootElement(parentElem);\n      }\n      parentElem.appendChild(rootElemRef.current);\n      return function removeElement() {\n        rootElemRef.current.remove();\n        if (parentElem.childNodes.length === -1) {\n          parentElem.remove();\n        }\n      };\n    },\n    [id]\n  );\n  function getRootElem() {\n    if (!rootElemRef.current) {\n      rootElemRef.current = document.createElement(\"div\");\n    }\n    return rootElemRef.current;\n  }\n  return getRootElem();\n}\n\nconst STATES_LOCAL_STORAGE_KEY = \"core.calloutSeen\";\nfunction useCalloutStates() {\n  const [states, setStates] = useState(() => {\n    const raw = localStorage.getItem(STATES_LOCAL_STORAGE_KEY);\n    return raw ? JSON.parse(raw) : {};\n  });\n  const setState = useCallback((key, value) => {\n    const raw = localStorage.getItem(STATES_LOCAL_STORAGE_KEY);\n    const oldStates = raw ? JSON.parse(raw) : {};\n    const newStates = { ...oldStates, [key]: value };\n    setStates(newStates);\n    localStorage.setItem(STATES_LOCAL_STORAGE_KEY, JSON.stringify(newStates));\n  }, []);\n  return { states, setState };\n}\nfunction useCalloutHasBeenSeen(featureId) {\n  const { states, setState } = useCalloutStates();\n  const markSeen = useCallback(() => {\n    setState(featureId, true);\n  }, [setState, featureId]);\n  return { seen: states[featureId] === true, markSeen };\n}\nfunction useShowCallout(featureId) {\n  const { seen, markSeen } = useCalloutHasBeenSeen(featureId);\n  return { show: seen === false, hide: markSeen };\n}\n\nconst useStyles$F = makeStyles(\n  {\n    \"@keyframes pulsateSlightly\": {\n      \"0%\": { transform: \"scale(1.0)\" },\n      \"100%\": { transform: \"scale(1.1)\" }\n    },\n    \"@keyframes pulsateAndFade\": {\n      \"0%\": { transform: \"scale(1.0)\", opacity: 0.9 },\n      \"100%\": { transform: \"scale(1.5)\", opacity: 0 }\n    },\n    featureWrapper: {\n      position: \"relative\"\n    },\n    backdrop: {\n      zIndex: 2e3,\n      position: \"fixed\",\n      overflow: \"hidden\",\n      left: 0,\n      right: 0,\n      top: 0,\n      bottom: 0\n    },\n    dot: {\n      position: \"absolute\",\n      backgroundColor: \"transparent\",\n      borderRadius: \"100%\",\n      border: \"1px solid rgba(103, 146, 180, 0.98)\",\n      boxShadow: \"0px 0px 0px 20000px rgba(0, 0, 0, 0.5)\",\n      zIndex: 2001,\n      transformOrigin: \"center center\",\n      animation: \"$pulsateSlightly 1744ms 1.2s cubic-bezier(0.4, 0, 0.2, 1) alternate infinite\"\n    },\n    pulseCircle: {\n      width: \"100%\",\n      height: \"100%\",\n      backgroundColor: \"transparent\",\n      borderRadius: \"100%\",\n      border: \"2px solid white\",\n      zIndex: 2001,\n      transformOrigin: \"center center\",\n      animation: \"$pulsateAndFade 872ms 1.2s cubic-bezier(0.4, 0, 0.2, 1) infinite\"\n    },\n    text: {\n      position: \"absolute\",\n      color: \"white\",\n      zIndex: 2003\n    }\n  },\n  { name: \"BackstageFeatureCalloutCircular\" }\n);\nfunction FeatureCalloutCircular(props) {\n  const { featureId, title, description, children } = props;\n  const { show, hide } = useShowCallout(featureId);\n  const portalElement = usePortal(\"core.callout\");\n  const wrapperRef = useRef(null);\n  const [placement, setPlacement] = useState();\n  const classes = useStyles$F();\n  const update = useCallback(() => {\n    if (wrapperRef.current) {\n      const wrapperBounds = wrapperRef.current.getBoundingClientRect();\n      const longest = Math.max(wrapperBounds.width, wrapperBounds.height);\n      const borderWidth = 800;\n      const dotLeft = wrapperBounds.x - (longest - wrapperBounds.width) / 2 - borderWidth;\n      const dotTop = wrapperBounds.y - (longest - wrapperBounds.height) / 2 - borderWidth;\n      const dotSize = longest + 2 * borderWidth;\n      const textWidth = 450;\n      const textLeft = wrapperBounds.x + wrapperBounds.width / 2 - textWidth;\n      const textTop = wrapperBounds.y - (longest - wrapperBounds.height) / 2 + longest + 20;\n      setPlacement({\n        dotLeft,\n        dotTop,\n        dotSize,\n        borderWidth,\n        textTop,\n        textLeft,\n        textWidth\n      });\n    }\n  }, []);\n  useEffect(() => {\n    window.addEventListener(\"resize\", update);\n    window.addEventListener(\"scroll\", update);\n    return () => {\n      window.removeEventListener(\"resize\", update);\n      window.removeEventListener(\"scroll\", update);\n    };\n  }, [update]);\n  useLayoutEffect(update, [wrapperRef.current, update]);\n  if (!show) {\n    return /* @__PURE__ */ React.createElement(React.Fragment, null, children);\n  }\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(\"div\", {\n    className: classes.featureWrapper,\n    ref: wrapperRef\n  }, children), createPortal(\n    /* @__PURE__ */ React.createElement(\"div\", {\n      className: classes.backdrop\n    }, /* @__PURE__ */ React.createElement(ClickAwayListener, {\n      onClickAway: hide\n    }, /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(\"div\", {\n      className: classes.dot,\n      \"data-testid\": \"dot\",\n      style: {\n        left: placement == null ? void 0 : placement.dotLeft,\n        top: placement == null ? void 0 : placement.dotTop,\n        width: placement == null ? void 0 : placement.dotSize,\n        height: placement == null ? void 0 : placement.dotSize,\n        borderWidth: placement == null ? void 0 : placement.borderWidth\n      },\n      onClick: hide,\n      onKeyDown: hide,\n      role: \"button\",\n      tabIndex: 0\n    }, /* @__PURE__ */ React.createElement(\"div\", {\n      className: classes.pulseCircle\n    })), /* @__PURE__ */ React.createElement(\"div\", {\n      className: classes.text,\n      \"data-testid\": \"text\",\n      style: {\n        left: placement == null ? void 0 : placement.textLeft,\n        top: placement == null ? void 0 : placement.textTop,\n        width: placement == null ? void 0 : placement.textWidth\n      }\n    }, /* @__PURE__ */ React.createElement(Typography, {\n      variant: \"h2\",\n      paragraph: true\n    }, title), /* @__PURE__ */ React.createElement(Typography, null, description))))),\n    portalElement\n  ));\n}\n\nconst useIconStyles = makeStyles(\n  (theme) => ({\n    link: {\n      display: \"grid\",\n      justifyItems: \"center\",\n      gridGap: 4,\n      textAlign: \"center\"\n    },\n    disabled: {\n      color: theme.palette.text.secondary,\n      cursor: \"default\"\n    },\n    primary: {\n      color: theme.palette.primary.main\n    },\n    secondary: {\n      color: theme.palette.secondary.main\n    },\n    label: {\n      fontSize: \"0.7rem\",\n      textTransform: \"uppercase\",\n      fontWeight: 600,\n      letterSpacing: 1.2\n    }\n  }),\n  { name: \"BackstageIconLinkVertical\" }\n);\nfunction IconLinkVertical({\n  color = \"primary\",\n  disabled = false,\n  href = \"#\",\n  icon = /* @__PURE__ */ React.createElement(LinkIcon, null),\n  label,\n  onClick,\n  title\n}) {\n  const classes = useIconStyles();\n  if (disabled) {\n    return /* @__PURE__ */ React.createElement(Link$1, {\n      title,\n      className: classNames(classes.link, classes.disabled),\n      underline: \"none\"\n    }, icon, /* @__PURE__ */ React.createElement(\"span\", {\n      className: classes.label\n    }, label));\n  }\n  return /* @__PURE__ */ React.createElement(Link$1, {\n    title,\n    className: classNames(classes.link, classes[color]),\n    to: href,\n    component: Link,\n    onClick\n  }, icon, /* @__PURE__ */ React.createElement(\"span\", {\n    className: classes.label\n  }, label));\n}\n\nconst useStyles$E = makeStyles(\n  (theme) => ({\n    links: {\n      margin: theme.spacing(2, 0),\n      display: \"grid\",\n      gridAutoFlow: \"column\",\n      gridAutoColumns: \"min-content\",\n      gridGap: theme.spacing(3)\n    }\n  }),\n  { name: \"BackstageHeaderIconLinkRow\" }\n);\nfunction HeaderIconLinkRow(props) {\n  const { links } = props;\n  const classes = useStyles$E();\n  return /* @__PURE__ */ React.createElement(\"nav\", {\n    className: classes.links\n  }, links.map((link, index) => /* @__PURE__ */ React.createElement(IconLinkVertical, {\n    key: index + 1,\n    ...link\n  })));\n}\n\nconst generateGradientStops = (themeType) => {\n  const luminance = themeType === \"dark\" ? \"16%\" : \"97%\";\n  return `\n    hsl(0, 0%, ${luminance}) 0%,\n    hsla(0, 0%, ${luminance}, 0.987) 8.1%,\n    hsla(0, 0%, ${luminance}, 0.951) 15.5%,\n    hsla(0, 0%, ${luminance}, 0.896) 22.5%,\n    hsla(0, 0%, ${luminance}, 0.825) 29%,\n    hsla(0, 0%, ${luminance}, 0.741) 35.3%,\n    hsla(0, 0%, ${luminance}, 0.648) 41.2%,\n    hsla(0, 0%, ${luminance}, 0.55) 47.1%,\n    hsla(0, 0%, ${luminance}, 0.45) 52.9%,\n    hsla(0, 0%, ${luminance}, 0.352) 58.8%,\n    hsla(0, 0%, ${luminance}, 0.259) 64.7%,\n    hsla(0, 0%, ${luminance}, 0.175) 71%,\n    hsla(0, 0%, ${luminance}, 0.104) 77.5%,\n    hsla(0, 0%, ${luminance}, 0.049) 84.5%,\n    hsla(0, 0%, ${luminance}, 0.013) 91.9%,\n    hsla(0, 0%, ${luminance}, 0) 100%\n  `;\n};\nconst fadeSize = 100;\nconst fadePadding = 10;\nconst useStyles$D = makeStyles(\n  (theme) => ({\n    root: {\n      position: \"relative\",\n      display: \"flex\",\n      flexFlow: \"row nowrap\",\n      alignItems: \"center\"\n    },\n    container: {\n      overflow: \"auto\",\n      scrollbarWidth: 0,\n      \"&::-webkit-scrollbar\": {\n        display: \"none\"\n      }\n    },\n    fade: {\n      position: \"absolute\",\n      width: fadeSize,\n      height: `calc(100% + ${fadePadding}px)`,\n      transition: \"opacity 300ms\",\n      pointerEvents: \"none\"\n    },\n    fadeLeft: {\n      left: -fadePadding,\n      background: `linear-gradient(90deg, ${generateGradientStops(\n        theme.palette.type\n      )})`\n    },\n    fadeRight: {\n      right: -fadePadding,\n      background: `linear-gradient(270deg, ${generateGradientStops(\n        theme.palette.type\n      )})`\n    },\n    fadeHidden: {\n      opacity: 0\n    },\n    button: {\n      position: \"absolute\"\n    },\n    buttonLeft: {\n      left: -theme.spacing(2)\n    },\n    buttonRight: {\n      right: -theme.spacing(2)\n    }\n  }),\n  { name: \"BackstageHorizontalScrollGrid\" }\n);\nfunction useScrollDistance(ref) {\n  const [[scrollLeft, scrollRight], setScroll] = React.useState([0, 0]);\n  React.useLayoutEffect(() => {\n    const el = ref.current;\n    if (!el) {\n      setScroll([0, 0]);\n      return;\n    }\n    const handleUpdate = () => {\n      const left = el.scrollLeft;\n      const right = el.scrollWidth - el.offsetWidth - el.scrollLeft;\n      setScroll([left, right]);\n    };\n    handleUpdate();\n    el.addEventListener(\"scroll\", handleUpdate);\n    window.addEventListener(\"resize\", handleUpdate);\n    return () => {\n      el.removeEventListener(\"scroll\", handleUpdate);\n      window.removeEventListener(\"resize\", handleUpdate);\n    };\n  }, [ref]);\n  return [scrollLeft, scrollRight];\n}\nfunction useSmoothScroll(ref, speed, minDistance) {\n  const [scrollTarget, setScrollTarget] = React.useState(0);\n  React.useLayoutEffect(() => {\n    if (scrollTarget === 0) {\n      return;\n    }\n    const startTime = performance.now();\n    const id = requestAnimationFrame((frameTime) => {\n      if (!ref.current) {\n        return;\n      }\n      const frameDuration = frameTime - startTime;\n      const scrollDistance = Math.abs(scrollTarget) * frameDuration / speed;\n      const cappedScrollDistance = Math.max(minDistance, scrollDistance);\n      const scrollAmount = cappedScrollDistance * Math.sign(scrollTarget);\n      ref.current.scrollBy({ left: scrollAmount });\n      const newScrollTarget = scrollTarget - scrollAmount;\n      if (Math.sign(scrollTarget) !== Math.sign(newScrollTarget)) {\n        setScrollTarget(0);\n      } else {\n        setScrollTarget(newScrollTarget);\n      }\n    });\n    return () => cancelAnimationFrame(id);\n  }, [ref, scrollTarget, speed, minDistance]);\n  return setScrollTarget;\n}\nfunction HorizontalScrollGrid(props) {\n  const {\n    scrollStep = 100,\n    scrollSpeed = 50,\n    minScrollDistance = 5,\n    children,\n    ...otherProps\n  } = props;\n  const classes = useStyles$D(props);\n  const ref = React.useRef();\n  const [scrollLeft, scrollRight] = useScrollDistance(ref);\n  const setScrollTarget = useSmoothScroll(ref, scrollSpeed, minScrollDistance);\n  const handleScrollClick = (forwards) => {\n    const el = ref.current;\n    if (!el) {\n      return;\n    }\n    setScrollTarget(forwards ? scrollStep : -scrollStep);\n  };\n  return /* @__PURE__ */ React.createElement(\"div\", {\n    ...otherProps,\n    className: classes.root\n  }, /* @__PURE__ */ React.createElement(Grid, {\n    container: true,\n    direction: \"row\",\n    wrap: \"nowrap\",\n    className: classes.container,\n    ref\n  }, children), /* @__PURE__ */ React.createElement(\"div\", {\n    className: classNames(classes.fade, classes.fadeLeft, {\n      [classes.fadeHidden]: scrollLeft === 0\n    })\n  }), /* @__PURE__ */ React.createElement(\"div\", {\n    className: classNames(classes.fade, classes.fadeRight, {\n      [classes.fadeHidden]: scrollRight === 0\n    })\n  }), scrollLeft > 0 && /* @__PURE__ */ React.createElement(IconButton, {\n    title: \"Scroll Left\",\n    onClick: () => handleScrollClick(false),\n    className: classNames(classes.button, classes.buttonLeft, {})\n  }, /* @__PURE__ */ React.createElement(ChevronLeftIcon, null)), scrollRight > 0 && /* @__PURE__ */ React.createElement(IconButton, {\n    title: \"Scroll Right\",\n    onClick: () => handleScrollClick(true),\n    className: classNames(classes.button, classes.buttonRight, {})\n  }, /* @__PURE__ */ React.createElement(ChevronRight, null)));\n}\n\nconst useStyles$C = makeStyles(\n  {\n    alpha: {\n      color: \"#ffffff\",\n      fontFamily: \"serif\",\n      fontWeight: \"normal\",\n      fontStyle: \"italic\"\n    },\n    beta: {\n      color: \"#4d65cc\",\n      fontFamily: \"serif\",\n      fontWeight: \"normal\",\n      fontStyle: \"italic\"\n    }\n  },\n  { name: \"BackstageLifecycle\" }\n);\nfunction Lifecycle(props) {\n  const classes = useStyles$C(props);\n  const { shorthand, alpha } = props;\n  return shorthand ? /* @__PURE__ */ React.createElement(\"span\", {\n    className: classes[alpha ? \"alpha\" : \"beta\"],\n    style: { fontSize: \"120%\" }\n  }, alpha ? /* @__PURE__ */ React.createElement(React.Fragment, null, \"\\u03B1\") : /* @__PURE__ */ React.createElement(React.Fragment, null, \"\\u03B2\")) : /* @__PURE__ */ React.createElement(\"span\", {\n    className: classes[alpha ? \"alpha\" : \"beta\"]\n  }, alpha ? \"Alpha\" : \"Beta\");\n}\n\nconst RealLogViewer = lazy(\n  () => import('./esm/RealLogViewer-22a2ee94.esm.js').then((m) => ({ default: m.RealLogViewer }))\n);\nfunction LogViewer(props) {\n  const { Progress } = useApp().getComponents();\n  return /* @__PURE__ */ React.createElement(Suspense, {\n    fallback: /* @__PURE__ */ React.createElement(Progress, null)\n  }, /* @__PURE__ */ React.createElement(RealLogViewer, {\n    ...props\n  }));\n}\n\nconst useStyles$B = makeStyles(\n  (theme) => ({\n    markdown: {\n      \"& table\": {\n        borderCollapse: \"collapse\",\n        border: `1px solid ${theme.palette.border}`\n      },\n      \"& th, & td\": {\n        border: `1px solid ${theme.palette.border}`,\n        padding: theme.spacing(1)\n      },\n      \"& td\": {\n        wordBreak: \"break-word\",\n        overflow: \"hidden\",\n        verticalAlign: \"middle\",\n        lineHeight: \"1\",\n        margin: 0,\n        padding: theme.spacing(3, 2, 3, 2.5),\n        borderBottom: 0\n      },\n      \"& th\": {\n        backgroundColor: theme.palette.background.paper\n      },\n      \"& tr\": {\n        backgroundColor: theme.palette.background.paper\n      },\n      \"& tr:nth-child(odd)\": {\n        backgroundColor: theme.palette.background.default\n      },\n      \"& a\": {\n        color: theme.palette.link\n      },\n      \"& img\": {\n        maxWidth: \"100%\"\n      }\n    }\n  }),\n  { name: \"BackstageMarkdownContent\" }\n);\nconst flatten = (text, child) => {\n  if (!child)\n    return text;\n  return typeof child === \"string\" ? text + child : React.Children.toArray(child.props.children).reduce(flatten, text);\n};\nconst headingRenderer = ({ level, children }) => {\n  const childrenArray = React.Children.toArray(children);\n  const text = childrenArray.reduce(flatten, \"\");\n  const slug = text.toLocaleLowerCase(\"en-US\").replace(/\\W/g, \"-\");\n  return React.createElement(`h${level}`, { id: slug }, children);\n};\nconst components = {\n  code: ({ inline, className, children, ...props }) => {\n    const text = String(children).replace(/\\n+$/, \"\");\n    const match = /language-(\\w+)/.exec(className || \"\");\n    return !inline && match ? /* @__PURE__ */ React.createElement(CodeSnippet, {\n      language: match[1],\n      text\n    }) : /* @__PURE__ */ React.createElement(\"code\", {\n      className,\n      ...props\n    }, children);\n  },\n  h1: headingRenderer,\n  h2: headingRenderer,\n  h3: headingRenderer,\n  h4: headingRenderer,\n  h5: headingRenderer,\n  h6: headingRenderer\n};\nfunction MarkdownContent(props) {\n  const {\n    content,\n    dialect = \"gfm\",\n    linkTarget,\n    transformLinkUri,\n    transformImageUri,\n    className\n  } = props;\n  const classes = useStyles$B();\n  return /* @__PURE__ */ React.createElement(ReactMarkdown, {\n    remarkPlugins: dialect === \"gfm\" ? [gfm] : [],\n    className: `${classes.markdown} ${className}`,\n    children: content,\n    components,\n    linkTarget,\n    transformLinkUri,\n    transformImageUri\n  });\n}\n\nconst useItemStyles = makeStyles(\n  (theme) => ({\n    root: {\n      paddingLeft: theme.spacing(3)\n    }\n  }),\n  { name: \"BackstageLoginRequestListItem\" }\n);\nconst LoginRequestListItem = ({ request, busy, setBusy }) => {\n  const classes = useItemStyles();\n  const [error, setError] = useState();\n  const handleContinue = async () => {\n    setBusy(true);\n    try {\n      await request.trigger();\n    } catch (e) {\n      setError(isError(e) ? e.message : \"An unspecified error occurred\");\n    } finally {\n      setBusy(false);\n    }\n  };\n  const IconComponent = request.provider.icon;\n  return /* @__PURE__ */ React.createElement(ListItem, {\n    disabled: busy,\n    classes: { root: classes.root }\n  }, /* @__PURE__ */ React.createElement(ListItemAvatar, null, /* @__PURE__ */ React.createElement(IconComponent, {\n    fontSize: \"large\"\n  })), /* @__PURE__ */ React.createElement(ListItemText, {\n    primary: request.provider.title,\n    secondary: error && /* @__PURE__ */ React.createElement(Typography, {\n      color: \"error\"\n    }, error)\n  }), /* @__PURE__ */ React.createElement(Button$1, {\n    color: \"primary\",\n    variant: \"contained\",\n    onClick: handleContinue\n  }, \"Log in\"));\n};\n\nconst useStyles$A = makeStyles(\n  (theme) => ({\n    dialog: {\n      paddingTop: theme.spacing(1)\n    },\n    title: {\n      minWidth: 0\n    },\n    titleHeading: {\n      fontSize: theme.typography.h6.fontSize\n    },\n    contentList: {\n      padding: 0\n    },\n    actionButtons: {\n      padding: theme.spacing(2, 0)\n    }\n  }),\n  { name: \"OAuthRequestDialog\" }\n);\nfunction OAuthRequestDialog(_props) {\n  const classes = useStyles$A();\n  const [busy, setBusy] = useState(false);\n  const oauthRequestApi = useApi(oauthRequestApiRef);\n  const requests = useObservable(\n    useMemo(() => oauthRequestApi.authRequest$(), [oauthRequestApi]),\n    []\n  );\n  const handleRejectAll = () => {\n    requests.forEach((request) => request.reject());\n  };\n  return /* @__PURE__ */ React.createElement(Dialog, {\n    open: Boolean(requests.length),\n    fullWidth: true,\n    maxWidth: \"xs\",\n    classes: { paper: classes.dialog },\n    \"aria-labelledby\": \"oauth-req-dialog-title\"\n  }, /* @__PURE__ */ React.createElement(\"main\", null, /* @__PURE__ */ React.createElement(DialogTitle, {\n    classes: { root: classes.title },\n    id: \"oauth-req-dialog-title\"\n  }, /* @__PURE__ */ React.createElement(Typography, {\n    className: classes.titleHeading,\n    variant: \"h1\"\n  }, \"Login Required\")), /* @__PURE__ */ React.createElement(DialogContent, {\n    dividers: true,\n    classes: { root: classes.contentList }\n  }, /* @__PURE__ */ React.createElement(List, null, requests.map((request) => /* @__PURE__ */ React.createElement(LoginRequestListItem, {\n    key: request.provider.title,\n    request,\n    busy,\n    setBusy\n  }))))), /* @__PURE__ */ React.createElement(DialogActions, {\n    classes: { root: classes.actionButtons }\n  }, /* @__PURE__ */ React.createElement(Button$1, {\n    onClick: handleRejectAll\n  }, \"Reject All\")));\n}\n\nconst useStyles$z = makeStyles(\n  {\n    container: {\n      overflow: \"visible !important\"\n    }\n  },\n  { name: \"BackstageOverflowTooltip\" }\n);\nfunction OverflowTooltip(props) {\n  var _a;\n  const [hover, setHover] = useState(false);\n  const isMounted = useIsMounted();\n  const classes = useStyles$z();\n  const handleToggled = (truncated) => {\n    if (isMounted()) {\n      setHover(truncated);\n    }\n  };\n  return /* @__PURE__ */ React.createElement(Tooltip, {\n    title: (_a = props.title) != null ? _a : props.text || \"\",\n    placement: props.placement,\n    disableHoverListener: !hover\n  }, /* @__PURE__ */ React.createElement(TextTruncate, {\n    text: props.text,\n    line: props.line,\n    onToggled: handleToggled,\n    containerClassName: classes.container\n  }));\n}\n\nfunction Progress(props) {\n  const [isVisible, setIsVisible] = useState(false);\n  useEffect(() => {\n    const handle = setTimeout(() => setIsVisible(true), 250);\n    return () => clearTimeout(handle);\n  }, []);\n  return isVisible ? /* @__PURE__ */ React.createElement(LinearProgress, {\n    ...props,\n    \"data-testid\": \"progress\"\n  }) : /* @__PURE__ */ React.createElement(\"div\", {\n    style: { display: \"none\" }\n  });\n}\n\nconst useStyles$y = makeStyles(\n  (theme) => ({\n    root: {\n      maxWidth: \"fit-content\",\n      padding: theme.spacing(2, 2, 2, 2.5)\n    },\n    boxTitle: {\n      margin: 0,\n      color: theme.palette.textSubtle\n    },\n    arrow: {\n      color: theme.palette.textSubtle\n    }\n  }),\n  { name: \"BackstageBottomLink\" }\n);\nfunction BottomLink(props) {\n  const { link, title, onClick } = props;\n  const classes = useStyles$y();\n  return /* @__PURE__ */ React.createElement(\"div\", null, /* @__PURE__ */ React.createElement(Divider, null), /* @__PURE__ */ React.createElement(Link, {\n    to: link,\n    onClick,\n    underline: \"none\"\n  }, /* @__PURE__ */ React.createElement(Box, {\n    display: \"flex\",\n    alignItems: \"center\",\n    className: classes.root\n  }, /* @__PURE__ */ React.createElement(Box, {\n    className: classes.boxTitle,\n    fontWeight: \"fontWeightBold\",\n    m: 1\n  }, /* @__PURE__ */ React.createElement(Typography, null, /* @__PURE__ */ React.createElement(\"strong\", null, title))), /* @__PURE__ */ React.createElement(ArrowIcon, {\n    className: classes.arrow\n  }))));\n}\n\nconst SlackLink = (props) => {\n  const { slackChannel } = props;\n  if (!slackChannel) {\n    return null;\n  } else if (typeof slackChannel === \"string\") {\n    return /* @__PURE__ */ React.createElement(React.Fragment, null, \"Please contact \", slackChannel, \" for help.\");\n  } else if (!slackChannel.href) {\n    return /* @__PURE__ */ React.createElement(React.Fragment, null, \"Please contact \", slackChannel.name, \" for help.\");\n  }\n  return /* @__PURE__ */ React.createElement(Button, {\n    to: slackChannel.href,\n    variant: \"contained\"\n  }, slackChannel.name);\n};\nconst ErrorBoundary = class ErrorBoundary2 extends Component$3 {\n  constructor(props) {\n    super(props);\n    this.state = {\n      error: void 0,\n      errorInfo: void 0\n    };\n  }\n  componentDidCatch(error, errorInfo) {\n    console.error(`ErrorBoundary, error: ${error}, info: ${errorInfo}`);\n    this.setState({ error, errorInfo });\n  }\n  render() {\n    const { slackChannel, children } = this.props;\n    const { error } = this.state;\n    if (!error) {\n      return children;\n    }\n    return /* @__PURE__ */ React.createElement(ErrorPanel, {\n      title: \"Something Went Wrong\",\n      error\n    }, /* @__PURE__ */ React.createElement(SlackLink, {\n      slackChannel\n    }));\n  }\n};\n\nconst useStyles$x = makeStyles(\n  (theme) => ({\n    noPadding: {\n      padding: 0,\n      \"&:last-child\": {\n        paddingBottom: 0\n      }\n    },\n    header: {\n      padding: theme.spacing(2, 2, 2, 2.5)\n    },\n    headerTitle: {\n      fontWeight: 700\n    },\n    headerSubheader: {\n      paddingTop: theme.spacing(1)\n    },\n    headerAvatar: {},\n    headerAction: {},\n    headerContent: {},\n    subheader: {\n      display: \"flex\"\n    }\n  }),\n  { name: \"BackstageInfoCard\" }\n);\nconst CardActionsTopRight = withStyles(\n  (theme) => ({\n    root: {\n      display: \"inline-block\",\n      padding: theme.spacing(8, 8, 0, 0),\n      float: \"right\"\n    }\n  }),\n  { name: \"BackstageInfoCardCardActionsTopRight\" }\n)(CardActions);\nconst VARIANT_STYLES = {\n  card: {\n    flex: {\n      display: \"flex\",\n      flexDirection: \"column\"\n    },\n    fullHeight: {\n      display: \"flex\",\n      flexDirection: \"column\",\n      height: \"100%\"\n    },\n    gridItem: {\n      display: \"flex\",\n      flexDirection: \"column\",\n      height: \"calc(100% - 10px)\",\n      marginBottom: \"10px\"\n    }\n  },\n  cardContent: {\n    fullHeight: {\n      flex: 1\n    },\n    gridItem: {\n      flex: 1\n    }\n  }\n};\nfunction InfoCard(props) {\n  const {\n    title,\n    subheader,\n    divider = true,\n    deepLink,\n    slackChannel,\n    errorBoundaryProps,\n    variant,\n    children,\n    headerStyle,\n    headerProps,\n    icon,\n    action,\n    actionsClassName,\n    actions,\n    cardClassName,\n    actionsTopRight,\n    className,\n    noPadding,\n    titleTypographyProps\n  } = props;\n  const classes = useStyles$x();\n  let calculatedStyle = {};\n  let calculatedCardStyle = {};\n  if (variant) {\n    const variants = variant.split(/[\\s]+/g);\n    variants.forEach((name) => {\n      calculatedStyle = {\n        ...calculatedStyle,\n        ...VARIANT_STYLES.card[name]\n      };\n      calculatedCardStyle = {\n        ...calculatedCardStyle,\n        ...VARIANT_STYLES.cardContent[name]\n      };\n    });\n  }\n  const cardSubTitle = () => {\n    return /* @__PURE__ */ React.createElement(\"div\", {\n      className: classes.headerSubheader\n    }, subheader && /* @__PURE__ */ React.createElement(\"div\", {\n      className: classes.subheader\n    }, subheader), icon);\n  };\n  const errProps = errorBoundaryProps || (slackChannel ? { slackChannel } : {});\n  return /* @__PURE__ */ React.createElement(Card, {\n    style: calculatedStyle,\n    className\n  }, /* @__PURE__ */ React.createElement(ErrorBoundary, {\n    ...errProps\n  }, title && /* @__PURE__ */ React.createElement(CardHeader, {\n    classes: {\n      root: classes.header,\n      title: classes.headerTitle,\n      subheader: classes.headerSubheader,\n      avatar: classes.headerAvatar,\n      action: classes.headerAction,\n      content: classes.headerContent\n    },\n    title,\n    subheader: cardSubTitle(),\n    action,\n    style: { ...headerStyle },\n    titleTypographyProps,\n    ...headerProps\n  }), actionsTopRight && /* @__PURE__ */ React.createElement(CardActionsTopRight, null, actionsTopRight), divider && /* @__PURE__ */ React.createElement(Divider, null), /* @__PURE__ */ React.createElement(CardContent, {\n    className: classNames(cardClassName, {\n      [classes.noPadding]: noPadding\n    }),\n    style: calculatedCardStyle\n  }, children), actions && /* @__PURE__ */ React.createElement(CardActions, {\n    className: actionsClassName\n  }, actions), deepLink && /* @__PURE__ */ React.createElement(BottomLink, {\n    ...deepLink\n  })));\n}\n\nconst useStyles$w = makeStyles(\n  (theme) => ({\n    root: {\n      position: \"relative\",\n      lineHeight: 0\n    },\n    overlay: {\n      position: \"absolute\",\n      top: \"50%\",\n      left: \"50%\",\n      transform: \"translate(-50%, -60%)\",\n      fontSize: 45,\n      fontWeight: \"bold\",\n      color: theme.palette.textContrast\n    },\n    description: {\n      fontSize: \"100%\",\n      top: \"50%\",\n      left: \"50%\",\n      transform: \"translate(-50%, -50%)\",\n      position: \"absolute\",\n      wordBreak: \"break-all\",\n      display: \"inline-block\"\n    },\n    circle: {\n      width: \"80%\",\n      transform: \"translate(10%, 0)\"\n    },\n    colorUnknown: {}\n  }),\n  { name: \"BackstageGauge\" }\n);\nconst defaultGaugeProps = {\n  fractional: true,\n  inverse: false,\n  unit: \"%\",\n  max: 100\n};\nconst getProgressColor = ({\n  palette,\n  value,\n  inverse,\n  max\n}) => {\n  if (isNaN(value)) {\n    return \"#ddd\";\n  }\n  const actualMax = max ? max : defaultGaugeProps.max;\n  const actualValue = inverse ? actualMax - value : value;\n  if (actualValue < actualMax / 3) {\n    return palette.status.error;\n  } else if (actualValue < actualMax * (2 / 3)) {\n    return palette.status.warning;\n  }\n  return palette.status.ok;\n};\nfunction Gauge(props) {\n  const [hoverRef, setHoverRef] = useState(null);\n  const { getColor = getProgressColor } = props;\n  const classes = useStyles$w(props);\n  const { palette } = useTheme();\n  const { value, fractional, inverse, unit, max, description } = {\n    ...defaultGaugeProps,\n    ...props\n  };\n  const asPercentage = fractional ? Math.round(value * max) : value;\n  const asActual = max !== 100 ? Math.round(value) : asPercentage;\n  const [isHovering, setIsHovering] = useState(false);\n  useEffect(() => {\n    const node = hoverRef;\n    const handleMouseOver = () => setIsHovering(true);\n    const handleMouseOut = () => setIsHovering(false);\n    if (node && description) {\n      node.addEventListener(\"mouseenter\", handleMouseOver);\n      node.addEventListener(\"mouseleave\", handleMouseOut);\n      return () => {\n        node.removeEventListener(\"mouseenter\", handleMouseOver);\n        node.removeEventListener(\"mouseleave\", handleMouseOut);\n      };\n    }\n    return () => {\n      setIsHovering(false);\n    };\n  }, [description, hoverRef]);\n  return /* @__PURE__ */ React.createElement(\"div\", {\n    ref: setHoverRef,\n    className: classes.root\n  }, /* @__PURE__ */ React.createElement(Circle, {\n    strokeLinecap: \"butt\",\n    percent: asPercentage,\n    strokeWidth: 12,\n    trailWidth: 12,\n    strokeColor: getColor({ palette, value: asActual, inverse, max }),\n    className: classes.circle\n  }), description && isHovering ? /* @__PURE__ */ React.createElement(\"div\", {\n    className: classes.description\n  }, description) : /* @__PURE__ */ React.createElement(\"div\", {\n    className: classes.overlay\n  }, isNaN(value) ? \"N/A\" : `${asActual}${unit}`));\n}\n\nconst useStyles$v = makeStyles(\n  {\n    root: {\n      height: \"100%\",\n      width: 250\n    }\n  },\n  { name: \"BackstageGaugeCard\" }\n);\nfunction GaugeCard(props) {\n  const classes = useStyles$v(props);\n  const {\n    title,\n    subheader,\n    progress,\n    inverse,\n    deepLink,\n    description,\n    icon,\n    variant,\n    getColor\n  } = props;\n  const gaugeProps = {\n    inverse,\n    description,\n    getColor,\n    value: progress\n  };\n  return /* @__PURE__ */ React.createElement(\"div\", {\n    className: classes.root\n  }, /* @__PURE__ */ React.createElement(InfoCard, {\n    title,\n    subheader,\n    deepLink,\n    variant,\n    icon\n  }, /* @__PURE__ */ React.createElement(Gauge, {\n    ...gaugeProps\n  })));\n}\n\nfunction LinearGauge(props) {\n  const { value, getColor = getProgressColor } = props;\n  const { palette } = useTheme();\n  if (isNaN(value)) {\n    return null;\n  }\n  let percent = Math.round(value * 100 * 100) / 100;\n  if (percent > 100) {\n    percent = 100;\n  }\n  const strokeColor = getColor({\n    palette,\n    value: percent,\n    inverse: false,\n    max: 100\n  });\n  return /* @__PURE__ */ React.createElement(Tooltip, {\n    title: `${percent}%`\n  }, /* @__PURE__ */ React.createElement(\"span\", null, /* @__PURE__ */ React.createElement(Line, {\n    percent,\n    strokeWidth: 4,\n    trailWidth: 4,\n    strokeColor\n  })));\n}\n\nconst useStyles$u = makeStyles(\n  () => createStyles({\n    icon: {\n      position: \"absolute\",\n      right: \"4px\",\n      pointerEvents: \"none\"\n    }\n  }),\n  { name: \"BackstageClosedDropdown\" }\n);\nconst ClosedDropdown = () => {\n  const classes = useStyles$u();\n  return /* @__PURE__ */ React.createElement(SvgIcon, {\n    className: classes.icon,\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\"\n  }, /* @__PURE__ */ React.createElement(\"path\", {\n    d: \"M7.5 8L6 9.5L12.0703 15.5703L18.1406 9.5L16.6406 8L12.0703 12.5703L7.5 8Z\",\n    fill: \"#616161\"\n  }));\n};\n\nconst useStyles$t = makeStyles(\n  () => createStyles({\n    icon: {\n      position: \"absolute\",\n      right: \"4px\",\n      pointerEvents: \"none\"\n    }\n  }),\n  { name: \"BackstageOpenedDropdown\" }\n);\nconst OpenedDropdown = () => {\n  const classes = useStyles$t();\n  return /* @__PURE__ */ React.createElement(SvgIcon, {\n    className: classes.icon,\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\"\n  }, /* @__PURE__ */ React.createElement(\"path\", {\n    d: \"M16.5 16L18 14.5L11.9297 8.42969L5.85938 14.5L7.35938 16L11.9297 11.4297L16.5 16Z\",\n    fill: \"#616161\"\n  }));\n};\n\nconst BootstrapInput = withStyles(\n  (theme) => createStyles({\n    root: {\n      \"label + &\": {\n        marginTop: theme.spacing(3)\n      }\n    },\n    input: {\n      borderRadius: 4,\n      position: \"relative\",\n      backgroundColor: theme.palette.background.paper,\n      border: \"1px solid #ced4da\",\n      fontSize: 16,\n      padding: \"10px 26px 10px 12px\",\n      transition: theme.transitions.create([\"border-color\", \"box-shadow\"]),\n      fontFamily: \"Helvetica Neue\",\n      \"&:focus\": {\n        background: theme.palette.background.paper,\n        borderRadius: 4\n      }\n    }\n  }),\n  { name: \"BackstageSelectInputBase\" }\n)(InputBase);\nconst useStyles$s = makeStyles(\n  (theme) => createStyles({\n    formControl: {\n      margin: `${theme.spacing(1)} 0px`,\n      maxWidth: 300\n    },\n    label: {\n      transform: \"initial\",\n      fontWeight: \"bold\",\n      fontSize: 14,\n      fontFamily: theme.typography.fontFamily,\n      color: theme.palette.text.primary,\n      \"&.Mui-focused\": {\n        color: theme.palette.text.primary\n      }\n    },\n    formLabel: {\n      transform: \"initial\",\n      fontWeight: \"bold\",\n      fontSize: 14,\n      fontFamily: theme.typography.fontFamily,\n      color: theme.palette.text.primary,\n      \"&.Mui-focused\": {\n        color: theme.palette.text.primary\n      }\n    },\n    chips: {\n      display: \"flex\",\n      flexWrap: \"wrap\"\n    },\n    chip: {\n      margin: 2\n    },\n    checkbox: {},\n    root: {\n      display: \"flex\",\n      flexDirection: \"column\"\n    }\n  }),\n  { name: \"BackstageSelect\" }\n);\nfunction SelectComponent(props) {\n  const {\n    multiple,\n    items,\n    label,\n    placeholder,\n    selected,\n    onChange,\n    triggerReset,\n    native = false,\n    disabled = false,\n    margin\n  } = props;\n  const classes = useStyles$s();\n  const [value, setValue] = useState(\n    selected || (multiple ? [] : \"\")\n  );\n  const [isOpen, setOpen] = useState(false);\n  useEffect(() => {\n    setValue(multiple ? [] : \"\");\n  }, [triggerReset, multiple]);\n  useEffect(() => {\n    if (selected !== void 0) {\n      setValue(selected);\n    }\n  }, [selected]);\n  const handleChange = (event) => {\n    setValue(event.target.value);\n    onChange(event.target.value);\n  };\n  const handleClick = (event) => {\n    if (disabled) {\n      event.preventDefault();\n      return;\n    }\n    setOpen((previous) => {\n      if (multiple && !(event.target instanceof HTMLElement)) {\n        return true;\n      }\n      return !previous;\n    });\n  };\n  const handleClickAway = () => {\n    setOpen(false);\n  };\n  const handleDelete = (selectedValue) => () => {\n    const newValue = value.filter((chip) => chip !== selectedValue);\n    setValue(newValue);\n    onChange(newValue);\n  };\n  return /* @__PURE__ */ React.createElement(\"div\", {\n    className: classes.root\n  }, /* @__PURE__ */ React.createElement(ClickAwayListener, {\n    onClickAway: handleClickAway\n  }, /* @__PURE__ */ React.createElement(FormControl, {\n    className: classes.formControl\n  }, /* @__PURE__ */ React.createElement(InputLabel, {\n    className: classes.formLabel\n  }, label), /* @__PURE__ */ React.createElement(Select, {\n    \"aria-label\": label,\n    value,\n    native,\n    disabled,\n    \"data-testid\": \"select\",\n    displayEmpty: true,\n    multiple,\n    margin,\n    onChange: handleChange,\n    onClick: handleClick,\n    open: isOpen,\n    input: /* @__PURE__ */ React.createElement(BootstrapInput, null),\n    label,\n    tabIndex: 0,\n    renderValue: (s) => {\n      var _a;\n      return multiple && value.length !== 0 ? /* @__PURE__ */ React.createElement(\"div\", {\n        className: classes.chips\n      }, s.map((selectedValue) => {\n        var _a2, _b;\n        return /* @__PURE__ */ React.createElement(Chip, {\n          key: (_a2 = items.find((el) => el.value === selectedValue)) == null ? void 0 : _a2.value,\n          label: (_b = items.find((el) => el.value === selectedValue)) == null ? void 0 : _b.label,\n          clickable: true,\n          onDelete: handleDelete(selectedValue),\n          className: classes.chip\n        });\n      })) : /* @__PURE__ */ React.createElement(Typography, null, value.length === 0 ? placeholder || \"\" : (_a = items.find((el) => el.value === s)) == null ? void 0 : _a.label);\n    },\n    IconComponent: () => !isOpen ? /* @__PURE__ */ React.createElement(ClosedDropdown, null) : /* @__PURE__ */ React.createElement(OpenedDropdown, null),\n    MenuProps: {\n      anchorOrigin: {\n        vertical: \"bottom\",\n        horizontal: \"left\"\n      },\n      transformOrigin: {\n        vertical: \"top\",\n        horizontal: \"left\"\n      },\n      getContentAnchorEl: null\n    }\n  }, placeholder && !multiple && /* @__PURE__ */ React.createElement(MenuItem, {\n    value: []\n  }, placeholder), native ? items && items.map((item) => /* @__PURE__ */ React.createElement(\"option\", {\n    value: item.value,\n    key: item.value\n  }, item.label)) : items && items.map((item) => /* @__PURE__ */ React.createElement(MenuItem, {\n    key: item.value,\n    value: item.value\n  }, multiple && /* @__PURE__ */ React.createElement(Checkbox, {\n    color: \"primary\",\n    checked: value.includes(item.value) || false,\n    className: classes.checkbox\n  }), item.label))))));\n}\n\nconst noop = () => {\n};\nconst VerticalStepperContext = React.createContext({\n  stepperLength: 0,\n  stepIndex: 0,\n  setStepIndex: noop,\n  stepHistory: [],\n  setStepHistory: noop,\n  onStepChange: noop\n});\nfunction SimpleStepper(props) {\n  const { children, elevated, onStepChange, activeStep = 0 } = props;\n  const [stepIndex, setStepIndex] = useState(activeStep);\n  const [stepHistory, setStepHistory] = useState([0]);\n  useEffect(() => {\n    setStepIndex(activeStep);\n  }, [activeStep]);\n  const steps = [];\n  let endStep;\n  Children.forEach(children, (child) => {\n    if (isValidElement(child)) {\n      if (child.props.end) {\n        endStep = child;\n      } else {\n        steps.push(child);\n      }\n    }\n  });\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(VerticalStepperContext.Provider, {\n    value: {\n      stepIndex,\n      setStepIndex,\n      stepHistory,\n      setStepHistory,\n      onStepChange,\n      stepperLength: Children.count(children)\n    }\n  }, /* @__PURE__ */ React.createElement(MuiStepper, {\n    activeStep: stepIndex,\n    orientation: \"vertical\",\n    elevation: elevated ? 2 : 0\n  }, steps)), stepIndex >= Children.count(children) - 1 && endStep);\n}\n\nconst useStyles$r = makeStyles(\n  (theme) => ({\n    root: {\n      marginTop: theme.spacing(3),\n      \"& button\": {\n        marginRight: theme.spacing(1)\n      }\n    }\n  }),\n  { name: \"BackstageSimpleStepperFooter\" }\n);\nconst RestartBtn = ({ text, handleClick }) => /* @__PURE__ */ React.createElement(Button$1, {\n  onClick: handleClick\n}, text || \"Reset\");\nconst NextBtn = ({\n  text,\n  handleClick,\n  disabled,\n  last,\n  stepIndex\n}) => /* @__PURE__ */ React.createElement(Button$1, {\n  variant: \"contained\",\n  color: \"primary\",\n  disabled,\n  \"data-testid\": `nextButton-${stepIndex}`,\n  onClick: handleClick\n}, text || (last ? \"Finish\" : \"Next\"));\nconst BackBtn = ({ text, handleClick, disabled, stepIndex }) => /* @__PURE__ */ React.createElement(Button$1, {\n  onClick: handleClick,\n  \"data-testid\": `backButton-${stepIndex}`,\n  disabled\n}, text || \"Back\");\nconst SimpleStepperFooter = ({\n  actions = {},\n  children\n}) => {\n  const classes = useStyles$r();\n  const {\n    stepperLength,\n    stepIndex,\n    setStepIndex,\n    stepHistory,\n    setStepHistory,\n    onStepChange\n  } = useContext(VerticalStepperContext);\n  const onChange = (newIndex, callback) => {\n    if (callback) {\n      callback();\n    }\n    if (onStepChange) {\n      onStepChange(stepIndex, newIndex);\n    }\n    setStepIndex(newIndex);\n  };\n  const handleNext = () => {\n    const newIndex = actions.nextStep ? actions.nextStep(stepIndex, stepperLength - 1) : stepIndex + 1;\n    onChange(newIndex, actions.onNext);\n    setStepHistory([...stepHistory, newIndex]);\n  };\n  const handleBack = () => {\n    stepHistory.pop();\n    onChange(stepHistory[stepHistory.length - 1], actions.onBack);\n    setStepHistory([...stepHistory]);\n  };\n  const handleRestart = () => {\n    onChange(0, actions.onRestart);\n    setStepHistory([0]);\n  };\n  return /* @__PURE__ */ React.createElement(\"div\", {\n    className: classes.root\n  }, [void 0, true].includes(actions.showBack) && stepIndex !== 0 && /* @__PURE__ */ React.createElement(BackBtn, {\n    text: actions.backText,\n    handleClick: handleBack,\n    disabled: stepIndex === 0,\n    stepIndex\n  }), [void 0, true].includes(actions.showNext) && /* @__PURE__ */ React.createElement(NextBtn, {\n    text: actions.nextText,\n    handleClick: handleNext,\n    disabled: !!stepperLength && stepIndex >= stepperLength || !!actions.canNext && !actions.canNext(),\n    stepIndex\n  }), actions.showRestart && stepIndex !== 0 && /* @__PURE__ */ React.createElement(RestartBtn, {\n    text: actions.restartText,\n    handleClick: handleRestart,\n    stepIndex\n  }), children);\n};\n\nconst useStyles$q = makeStyles(\n  (theme) => ({\n    end: {\n      padding: theme.spacing(3)\n    }\n  }),\n  { name: \"SimpleStepperStep\" }\n);\nfunction SimpleStepperStep(props) {\n  const { title, children, end, actions, ...muiProps } = props;\n  const classes = useStyles$q();\n  return end ? /* @__PURE__ */ React.createElement(\"div\", {\n    className: classes.end\n  }, /* @__PURE__ */ React.createElement(Typography, {\n    variant: \"h6\"\n  }, title), children, /* @__PURE__ */ React.createElement(SimpleStepperFooter, {\n    actions: { ...actions || {}, showNext: false }\n  })) : /* @__PURE__ */ React.createElement(MuiStep, {\n    ...muiProps\n  }, /* @__PURE__ */ React.createElement(StepLabel, null, /* @__PURE__ */ React.createElement(Typography, {\n    variant: \"h6\"\n  }, title)), /* @__PURE__ */ React.createElement(StepContent, null, children, /* @__PURE__ */ React.createElement(SimpleStepperFooter, {\n    actions\n  })));\n}\n\nconst useStyles$p = makeStyles(\n  (theme) => ({\n    status: {\n      fontWeight: 500,\n      \"&::before\": {\n        width: \"0.7em\",\n        height: \"0.7em\",\n        display: \"inline-block\",\n        marginRight: 8,\n        borderRadius: \"50%\",\n        content: '\"\"'\n      }\n    },\n    ok: {\n      \"&::before\": {\n        backgroundColor: theme.palette.status.ok\n      }\n    },\n    warning: {\n      \"&::before\": {\n        backgroundColor: theme.palette.status.warning\n      }\n    },\n    error: {\n      \"&::before\": {\n        backgroundColor: theme.palette.status.error\n      }\n    },\n    pending: {\n      \"&::before\": {\n        backgroundColor: theme.palette.status.pending\n      }\n    },\n    running: {\n      \"&::before\": {\n        backgroundColor: theme.palette.status.running\n      }\n    },\n    aborted: {\n      \"&::before\": {\n        backgroundColor: theme.palette.status.aborted\n      }\n    }\n  }),\n  { name: \"BackstageStatus\" }\n);\nfunction StatusOK(props) {\n  const classes = useStyles$p(props);\n  return /* @__PURE__ */ React.createElement(\"span\", {\n    className: classNames(classes.status, classes.ok),\n    \"aria-label\": \"Status ok\",\n    \"aria-hidden\": \"true\",\n    ...props\n  });\n}\nfunction StatusWarning(props) {\n  const classes = useStyles$p(props);\n  return /* @__PURE__ */ React.createElement(\"span\", {\n    className: classNames(classes.status, classes.warning),\n    \"aria-label\": \"Status warning\",\n    \"aria-hidden\": \"true\",\n    ...props\n  });\n}\nfunction StatusError(props) {\n  const classes = useStyles$p(props);\n  return /* @__PURE__ */ React.createElement(\"span\", {\n    className: classNames(classes.status, classes.error),\n    \"aria-label\": \"Status error\",\n    \"aria-hidden\": \"true\",\n    ...props\n  });\n}\nfunction StatusPending(props) {\n  const classes = useStyles$p(props);\n  return /* @__PURE__ */ React.createElement(\"span\", {\n    className: classNames(classes.status, classes.pending),\n    \"aria-label\": \"Status pending\",\n    \"aria-hidden\": \"true\",\n    ...props\n  });\n}\nfunction StatusRunning(props) {\n  const classes = useStyles$p(props);\n  return /* @__PURE__ */ React.createElement(\"span\", {\n    className: classNames(classes.status, classes.running),\n    \"aria-label\": \"Status running\",\n    \"aria-hidden\": \"true\",\n    ...props\n  });\n}\nfunction StatusAborted(props) {\n  const classes = useStyles$p(props);\n  return /* @__PURE__ */ React.createElement(\"span\", {\n    className: classNames(classes.status, classes.aborted),\n    \"aria-label\": \"Status aborted\",\n    \"aria-hidden\": \"true\",\n    ...props\n  });\n}\n\nconst tableTitleCellStyles = (theme) => createStyles({\n  root: {\n    fontWeight: \"bolder\",\n    whiteSpace: \"nowrap\",\n    paddingRight: theme.spacing(4),\n    border: \"0\",\n    verticalAlign: \"top\"\n  }\n});\nconst tableContentCellStyles = {\n  root: {\n    border: \"0\",\n    verticalAlign: \"top\"\n  }\n};\nconst listStyles = (theme) => createStyles({\n  root: {\n    listStyle: \"none\",\n    margin: theme.spacing(0, 0, -1, 0),\n    padding: \"0\"\n  }\n});\nconst listItemStyles = (theme) => createStyles({\n  root: {\n    padding: theme.spacing(0, 0, 1, 0)\n  },\n  random: {}\n});\nconst TitleCell = withStyles(tableTitleCellStyles, {\n  name: \"BackstageMetadataTableTitleCell\"\n})(TableCell);\nconst ContentCell = withStyles(tableContentCellStyles, {\n  name: \"BackstageMetadataTableCell\"\n})(TableCell);\nconst MetadataTable = ({\n  dense,\n  children\n}) => /* @__PURE__ */ React.createElement(Table$1, {\n  size: dense ? \"small\" : \"medium\"\n}, /* @__PURE__ */ React.createElement(TableBody, null, children));\nconst MetadataTableItem = ({\n  title,\n  children,\n  ...rest\n}) => /* @__PURE__ */ React.createElement(TableRow, null, title && /* @__PURE__ */ React.createElement(TitleCell, null, title), /* @__PURE__ */ React.createElement(ContentCell, {\n  colSpan: title ? 1 : 2,\n  ...rest\n}, children));\nconst MetadataList = withStyles(listStyles, {\n  name: \"BackstageMetadataTableList\"\n})(({ classes, children }) => /* @__PURE__ */ React.createElement(\"ul\", {\n  className: classes.root\n}, children));\nconst MetadataListItem = withStyles(listItemStyles, {\n  name: \"BackstageMetadataTableListItem\"\n})(({ classes, children }) => /* @__PURE__ */ React.createElement(\"li\", {\n  className: classes.root\n}, children));\n\nconst listStyle = createStyles({\n  root: {\n    margin: \"0 0\",\n    listStyleType: \"none\"\n  }\n});\nconst nestedListStyle = (theme) => createStyles({\n  root: {\n    ...listStyle.root,\n    paddingLeft: theme.spacing(1)\n  }\n});\nconst StyledList = withStyles(listStyle, {\n  name: \"BackstageStructuredMetadataTableList\"\n})(({ classes, children }) => /* @__PURE__ */ React.createElement(MetadataList, {\n  classes\n}, children));\nconst StyledNestedList = withStyles(nestedListStyle, {\n  name: \"BackstageStructuredMetadataTableNestedList\"\n})(({ classes, children }) => /* @__PURE__ */ React.createElement(MetadataList, {\n  classes\n}, children));\nfunction renderList(list, nested) {\n  const values = list.map((item, index) => /* @__PURE__ */ React.createElement(MetadataListItem, {\n    key: index\n  }, toValue(item)));\n  return nested ? /* @__PURE__ */ React.createElement(StyledNestedList, null, values) : /* @__PURE__ */ React.createElement(StyledList, null, values);\n}\nfunction renderMap(map, nested, options) {\n  const values = Object.keys(map).map((key) => {\n    const value = toValue(map[key], true);\n    const fmtKey = options && options.titleFormat ? options.titleFormat(key) : startCase(key);\n    return /* @__PURE__ */ React.createElement(MetadataListItem, {\n      key\n    }, `${fmtKey}: `, value);\n  });\n  return nested ? /* @__PURE__ */ React.createElement(StyledNestedList, null, values) : /* @__PURE__ */ React.createElement(StyledList, null, values);\n}\nfunction toValue(value, options, nested) {\n  if (React.isValidElement(value)) {\n    return /* @__PURE__ */ React.createElement(Fragment, null, value);\n  }\n  if (typeof value === \"object\" && !Array.isArray(value)) {\n    return renderMap(value, options, nested);\n  }\n  if (Array.isArray(value)) {\n    return renderList(value, nested);\n  }\n  if (typeof value === \"boolean\") {\n    return /* @__PURE__ */ React.createElement(Fragment, null, value ? \"\\u2705\" : \"\\u274C\");\n  }\n  return /* @__PURE__ */ React.createElement(Fragment, null, value);\n}\nconst ItemValue = ({ value, options }) => /* @__PURE__ */ React.createElement(Fragment, null, toValue(value, options));\nconst TableItem = ({\n  title,\n  value,\n  options\n}) => {\n  return /* @__PURE__ */ React.createElement(MetadataTableItem, {\n    title: options && options.titleFormat ? options.titleFormat(title) : startCase(title)\n  }, /* @__PURE__ */ React.createElement(ItemValue, {\n    value,\n    options\n  }));\n};\nfunction mapToItems(info, options) {\n  return Object.keys(info).map((key) => /* @__PURE__ */ React.createElement(TableItem, {\n    key,\n    title: key,\n    value: info[key],\n    options\n  }));\n}\nfunction StructuredMetadataTable(props) {\n  const { metadata, dense = true, options } = props;\n  const metadataItems = mapToItems(metadata, options || {});\n  return /* @__PURE__ */ React.createElement(MetadataTable, {\n    dense\n  }, metadataItems);\n}\n\nfunction stringify(queryParams) {\n  return qs.stringify(queryParams, {\n    strictNullHandling: true\n  });\n}\nfunction parse(queryString) {\n  return qs.parse(queryString, {\n    ignoreQueryPrefix: true,\n    strictNullHandling: true\n  });\n}\nfunction extractState(queryString, stateName) {\n  const queryParams = parse(queryString);\n  return queryParams[stateName];\n}\nfunction joinQueryString(queryString, stateName, state) {\n  const queryParams = {\n    ...parse(queryString),\n    [stateName]: state\n  };\n  return stringify(queryParams);\n}\nfunction useQueryParamState(stateName, debounceTime = 250) {\n  const [searchParams, setSearchParams] = useSearchParams();\n  const searchParamsString = searchParams.toString();\n  const [queryParamState, setQueryParamState] = useState(\n    extractState(searchParamsString, stateName)\n  );\n  useEffect(() => {\n    const newState = extractState(searchParamsString, stateName);\n    setQueryParamState(\n      (oldState) => isEqual(newState, oldState) ? oldState : newState\n    );\n  }, [searchParamsString, setQueryParamState, stateName]);\n  useDebouncedEffect(\n    () => {\n      const queryString = joinQueryString(\n        searchParamsString,\n        stateName,\n        queryParamState\n      );\n      if (searchParamsString !== queryString) {\n        setSearchParams(queryString, { replace: true });\n      }\n    },\n    [setSearchParams, queryParamState, searchParamsString, stateName],\n    debounceTime\n  );\n  return [queryParamState, setQueryParamState];\n}\n\nconst DEFAULT_SUPPORT_CONFIG = {\n  url: \"https://github.com/backstage/backstage/issues\",\n  items: [\n    {\n      title: \"Support Not Configured\",\n      icon: \"warning\",\n      links: [\n        {\n          title: \"Add `app.support` config key\",\n          url: \"https://github.com/backstage/backstage/blob/master/app-config.yaml\"\n        }\n      ]\n    }\n  ]\n};\nfunction useSupportConfig() {\n  const apiHolder = useApiHolder();\n  const config = apiHolder.get(configApiRef);\n  const supportConfig = config == null ? void 0 : config.getOptionalConfig(\"app.support\");\n  if (!supportConfig) {\n    return DEFAULT_SUPPORT_CONFIG;\n  }\n  return {\n    url: supportConfig.getString(\"url\"),\n    items: supportConfig.getConfigArray(\"items\").flatMap((itemConf) => {\n      var _a;\n      return {\n        title: itemConf.getString(\"title\"),\n        icon: itemConf.getOptionalString(\"icon\"),\n        links: ((_a = itemConf.getOptionalConfigArray(\"links\")) != null ? _a : []).flatMap(\n          (linkConf) => ({\n            url: linkConf.getString(\"url\"),\n            title: linkConf.getString(\"title\")\n          })\n        )\n      };\n    })\n  };\n}\n\nfunction useSystemIcon(key, props) {\n  const app = useApp();\n  const Icon = app.getSystemIcon(key);\n  return Icon ? /* @__PURE__ */ React.createElement(Icon, {\n    ...props\n  }) : /* @__PURE__ */ React.createElement(MuiBrokenImageIcon, {\n    ...props\n  });\n}\nfunction BrokenImageIcon(props) {\n  return useSystemIcon(\"brokenImage\", props);\n}\nfunction CatalogIcon(props) {\n  return useSystemIcon(\"catalog\", props);\n}\nfunction ChatIcon(props) {\n  return useSystemIcon(\"chat\", props);\n}\nfunction DashboardIcon(props) {\n  return useSystemIcon(\"dashboard\", props);\n}\nfunction DocsIcon(props) {\n  return useSystemIcon(\"docs\", props);\n}\nfunction EmailIcon(props) {\n  return useSystemIcon(\"email\", props);\n}\nfunction GitHubIcon(props) {\n  return useSystemIcon(\"github\", props);\n}\nfunction GroupIcon(props) {\n  return useSystemIcon(\"group\", props);\n}\nfunction HelpIcon(props) {\n  return useSystemIcon(\"help\", props);\n}\nfunction UserIcon(props) {\n  return useSystemIcon(\"user\", props);\n}\nfunction WarningIcon(props) {\n  return useSystemIcon(\"warning\", props);\n}\n\nconst useStyles$o = makeStyles(\n  {\n    popoverList: {\n      minWidth: 260,\n      maxWidth: 400\n    }\n  },\n  { name: \"BackstageSupportButton\" }\n);\nconst SupportIcon = ({ icon }) => {\n  var _a;\n  const app = useApp();\n  const Icon = icon ? (_a = app.getSystemIcon(icon)) != null ? _a : HelpIcon : HelpIcon;\n  return /* @__PURE__ */ React.createElement(Icon, null);\n};\nconst SupportLink = ({ link }) => {\n  var _a;\n  return /* @__PURE__ */ React.createElement(Link, {\n    to: link.url\n  }, (_a = link.title) != null ? _a : link.url);\n};\nconst SupportListItem = ({ item }) => {\n  var _a;\n  return /* @__PURE__ */ React.createElement(ListItem, null, /* @__PURE__ */ React.createElement(ListItemIcon, null, /* @__PURE__ */ React.createElement(SupportIcon, {\n    icon: item.icon\n  })), /* @__PURE__ */ React.createElement(ListItemText, {\n    primary: item.title,\n    secondary: (_a = item.links) == null ? void 0 : _a.reduce(\n      (prev, link, idx) => [\n        ...prev,\n        idx > 0 && /* @__PURE__ */ React.createElement(\"br\", {\n          key: idx\n        }),\n        /* @__PURE__ */ React.createElement(SupportLink, {\n          link,\n          key: link.url\n        })\n      ],\n      []\n    )\n  }));\n};\nfunction SupportButton(props) {\n  const { title, children } = props;\n  const { items } = useSupportConfig();\n  const [popoverOpen, setPopoverOpen] = useState(false);\n  const [anchorEl, setAnchorEl] = useState(null);\n  const classes = useStyles$o();\n  const isSmallScreen = useMediaQuery(\n    (theme) => theme.breakpoints.down(\"sm\")\n  );\n  const onClickHandler = (event) => {\n    setAnchorEl(event.currentTarget);\n    setPopoverOpen(true);\n  };\n  const popoverCloseHandler = () => {\n    setPopoverOpen(false);\n  };\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(Box, {\n    display: \"flex\",\n    ml: 1\n  }, isSmallScreen ? /* @__PURE__ */ React.createElement(IconButton, {\n    color: \"primary\",\n    size: \"small\",\n    onClick: onClickHandler,\n    \"data-testid\": \"support-button\"\n  }, /* @__PURE__ */ React.createElement(HelpIcon, null)) : /* @__PURE__ */ React.createElement(Button$1, {\n    \"data-testid\": \"support-button\",\n    \"aria-label\": \"support\",\n    color: \"primary\",\n    onClick: onClickHandler,\n    startIcon: /* @__PURE__ */ React.createElement(HelpIcon, null)\n  }, \"Support\")), /* @__PURE__ */ React.createElement(Popover, {\n    \"data-testid\": \"support-button-popover\",\n    open: popoverOpen,\n    anchorEl,\n    anchorOrigin: {\n      vertical: \"bottom\",\n      horizontal: \"right\"\n    },\n    transformOrigin: {\n      vertical: \"top\",\n      horizontal: \"right\"\n    },\n    onClose: popoverCloseHandler\n  }, /* @__PURE__ */ React.createElement(List, {\n    className: classes.popoverList\n  }, title && /* @__PURE__ */ React.createElement(ListItem, {\n    alignItems: \"flex-start\"\n  }, /* @__PURE__ */ React.createElement(Typography, {\n    variant: \"subtitle1\"\n  }, title)), React.Children.map(children, (child, i) => /* @__PURE__ */ React.createElement(ListItem, {\n    alignItems: \"flex-start\",\n    key: `child-${i}`\n  }, child)), items && items.map((item, i) => /* @__PURE__ */ React.createElement(SupportListItem, {\n    item,\n    key: `item-${i}`\n  }))), /* @__PURE__ */ React.createElement(DialogActions, null, /* @__PURE__ */ React.createElement(Button$1, {\n    color: \"primary\",\n    onClick: popoverCloseHandler\n  }, \"Close\"))));\n}\n\nconst drawerWidthClosed = 72;\nconst iconPadding = 24;\nconst userBadgePadding = 18;\nconst sidebarConfig = {\n  drawerWidthClosed,\n  drawerWidthOpen: 224,\n  defaultOpenDelayMs: 100,\n  defaultCloseDelayMs: 0,\n  defaultFadeDuration: 200,\n  logoHeight: 32,\n  iconContainerWidth: drawerWidthClosed,\n  iconSize: drawerWidthClosed - iconPadding * 2,\n  iconPadding,\n  selectedIndicatorWidth: 3,\n  userBadgePadding,\n  userBadgeDiameter: drawerWidthClosed - userBadgePadding * 2,\n  mobileSidebarHeight: 56\n};\nconst makeSidebarConfig = (customSidebarConfig) => ({\n  ...sidebarConfig,\n  ...customSidebarConfig,\n  iconContainerWidth: sidebarConfig.drawerWidthClosed,\n  iconSize: sidebarConfig.drawerWidthClosed - sidebarConfig.iconPadding * 2,\n  userBadgeDiameter: sidebarConfig.drawerWidthClosed - sidebarConfig.userBadgePadding * 2\n});\nconst submenuConfig = {\n  drawerWidthClosed: 0,\n  drawerWidthOpen: 202,\n  defaultOpenDelayMs: sidebarConfig.defaultOpenDelayMs + 200\n};\nconst makeSidebarSubmenuConfig = (customSubmenuConfig) => ({\n  ...submenuConfig,\n  ...customSubmenuConfig\n});\nconst SIDEBAR_INTRO_LOCAL_STORAGE = \"@backstage/core/sidebar-intro-dismissed\";\nconst SidebarConfigContext = createContext({\n  sidebarConfig,\n  submenuConfig\n});\nconst SidebarItemWithSubmenuContext = createContext({\n  isHoveredOn: false,\n  setIsHoveredOn: () => {\n  }\n});\n\nconst LocalStorage = {\n  getSidebarPinState() {\n    let value;\n    try {\n      value = JSON.parse(\n        window.localStorage.getItem(\"sidebarPinState\" /* SIDEBAR_PIN_STATE */) || \"true\"\n      );\n    } catch {\n      return true;\n    }\n    return !!value;\n  },\n  setSidebarPinState(state) {\n    return window.localStorage.setItem(\n      \"sidebarPinState\" /* SIDEBAR_PIN_STATE */,\n      JSON.stringify(state)\n    );\n  }\n};\n\nconst defaultSidebarPinStateContext = {\n  isPinned: true,\n  toggleSidebarPinState: () => {\n  },\n  isMobile: false\n};\nconst LegacySidebarPinStateContext = createContext(defaultSidebarPinStateContext);\nconst VersionedSidebarPinStateContext = createVersionedContext(\"sidebar-pin-state-context\");\nfunction SidebarPinStateProvider(props) {\n  const { children, value } = props;\n  return /* @__PURE__ */ React.createElement(LegacySidebarPinStateContext.Provider, {\n    value\n  }, /* @__PURE__ */ React.createElement(VersionedSidebarPinStateContext.Provider, {\n    value: createVersionedValueMap({ 1: value })\n  }, children));\n}\nconst useSidebarPinState = () => {\n  const versionedPinStateContext = useContext(VersionedSidebarPinStateContext);\n  const legacyPinStateContext = useContext(LegacySidebarPinStateContext);\n  if (versionedPinStateContext === void 0) {\n    return legacyPinStateContext || defaultSidebarPinStateContext;\n  }\n  const pinStateContext = versionedPinStateContext.atVersion(1);\n  if (pinStateContext === void 0) {\n    throw new Error(\"No context found for version 1.\");\n  }\n  return pinStateContext;\n};\n\nconst useStyles$n = makeStyles(\n  (theme) => ({\n    root: {\n      width: \"100%\",\n      transition: \"padding-left 0.1s ease-out\",\n      isolation: \"isolate\",\n      [theme.breakpoints.up(\"sm\")]: {\n        paddingLeft: (props) => props.isPinned ? props.sidebarConfig.drawerWidthOpen : props.sidebarConfig.drawerWidthClosed\n      },\n      [theme.breakpoints.down(\"xs\")]: {\n        paddingBottom: (props) => props.sidebarConfig.mobileSidebarHeight\n      }\n    },\n    content: {\n      zIndex: 0,\n      isolation: \"isolate\",\n      \"&:focus\": {\n        outline: 0\n      }\n    }\n  }),\n  { name: \"BackstageSidebarPage\" }\n);\nconst PageContext = createContext({\n  content: {\n    contentRef: void 0\n  }\n});\nfunction SidebarPage(props) {\n  const [isPinned, setIsPinned] = useState(\n    () => LocalStorage.getSidebarPinState()\n  );\n  const { sidebarConfig } = useContext(SidebarConfigContext);\n  const contentRef = useRef(null);\n  const pageContext = useMemo(\n    () => ({\n      content: {\n        contentRef\n      }\n    }),\n    [contentRef]\n  );\n  useEffect(() => {\n    LocalStorage.setSidebarPinState(isPinned);\n  }, [isPinned]);\n  const isMobile = useMediaQuery(\n    (theme) => theme.breakpoints.down(\"xs\"),\n    { noSsr: true }\n  );\n  const toggleSidebarPinState = () => setIsPinned(!isPinned);\n  const classes = useStyles$n({ isPinned, sidebarConfig });\n  return /* @__PURE__ */ React.createElement(SidebarPinStateProvider, {\n    value: {\n      isPinned,\n      toggleSidebarPinState,\n      isMobile\n    }\n  }, /* @__PURE__ */ React.createElement(PageContext.Provider, {\n    value: pageContext\n  }, /* @__PURE__ */ React.createElement(\"div\", {\n    className: classes.root\n  }, props.children)));\n}\nfunction useContent() {\n  const { content } = useContext(PageContext);\n  const focusContent = useCallback(() => {\n    var _a, _b;\n    (_b = (_a = content == null ? void 0 : content.contentRef) == null ? void 0 : _a.current) == null ? void 0 : _b.focus();\n  }, [content]);\n  return { focusContent, contentRef: content == null ? void 0 : content.contentRef };\n}\n\nconst defaultSidebarOpenStateContext = {\n  isOpen: false,\n  setOpen: () => {\n  }\n};\nconst LegacySidebarContext = createContext(\n  defaultSidebarOpenStateContext\n);\nconst VersionedSidebarContext = createVersionedContext(\"sidebar-open-state-context\");\nfunction SidebarOpenStateProvider(props) {\n  const { children, value } = props;\n  return /* @__PURE__ */ React.createElement(LegacySidebarContext.Provider, {\n    value\n  }, /* @__PURE__ */ React.createElement(VersionedSidebarContext.Provider, {\n    value: createVersionedValueMap({ 1: value })\n  }, children));\n}\nconst useSidebarOpenState = () => {\n  const versionedOpenStateContext = useContext(VersionedSidebarContext);\n  const legacyOpenStateContext = useContext(LegacySidebarContext);\n  if (versionedOpenStateContext === void 0) {\n    return legacyOpenStateContext || defaultSidebarOpenStateContext;\n  }\n  const openStateContext = versionedOpenStateContext.atVersion(1);\n  if (openStateContext === void 0) {\n    throw new Error(\"No context found for version 1.\");\n  }\n  return openStateContext;\n};\n\nconst useStyles$m = makeStyles(\n  (theme) => ({\n    root: {\n      flexGrow: 0,\n      margin: theme.spacing(0, 2),\n      color: theme.palette.navigation.color\n    },\n    selected: (props) => ({\n      color: `${theme.palette.navigation.selectedColor}!important`,\n      borderTop: `solid ${props.sidebarConfig.selectedIndicatorWidth}px ${theme.palette.navigation.indicator}`,\n      marginTop: \"-1px\"\n    }),\n    label: {\n      display: \"none\"\n    }\n  })\n);\nconst MobileSidebarGroup = (props) => {\n  const { to, label, icon, value } = props;\n  const { sidebarConfig } = useContext(SidebarConfigContext);\n  const classes = useStyles$m({ sidebarConfig });\n  const location = useLocation();\n  const { selectedMenuItemIndex, setSelectedMenuItemIndex } = useContext(MobileSidebarContext);\n  const onChange = (_, value2) => {\n    if (value2 === selectedMenuItemIndex) {\n      setSelectedMenuItemIndex(-1);\n    } else {\n      setSelectedMenuItemIndex(value2);\n    }\n  };\n  const selected = value === selectedMenuItemIndex && selectedMenuItemIndex >= 0 || !(value === selectedMenuItemIndex) && !(selectedMenuItemIndex >= 0) && to === location.pathname;\n  return /* @__PURE__ */ React.createElement(BottomNavigationAction, {\n    label,\n    icon,\n    component: Link,\n    to: to ? to : location.pathname,\n    onChange,\n    value,\n    selected,\n    classes\n  });\n};\nconst SidebarGroup = (props) => {\n  const { children, to, label, icon, value } = props;\n  const { isMobile } = useSidebarPinState();\n  return isMobile ? /* @__PURE__ */ React.createElement(MobileSidebarGroup, {\n    to,\n    label,\n    icon,\n    value\n  }) : /* @__PURE__ */ React.createElement(React.Fragment, null, children);\n};\n\nconst useStyles$l = makeStyles(\n  (theme) => ({\n    root: {\n      position: \"fixed\",\n      backgroundColor: theme.palette.navigation.background,\n      color: theme.palette.navigation.color,\n      bottom: 0,\n      left: 0,\n      right: 0,\n      zIndex: theme.zIndex.snackbar,\n      borderTop: \"1px solid #383838\"\n    },\n    overlay: (props) => ({\n      background: theme.palette.navigation.background,\n      width: \"100%\",\n      bottom: `${props.sidebarConfig.mobileSidebarHeight}px`,\n      height: `calc(100% - ${props.sidebarConfig.mobileSidebarHeight}px)`,\n      flex: \"0 1 auto\",\n      overflow: \"auto\"\n    }),\n    overlayHeader: {\n      display: \"flex\",\n      color: theme.palette.text.primary,\n      alignItems: \"center\",\n      justifyContent: \"space-between\",\n      padding: theme.spacing(2, 3)\n    },\n    overlayHeaderClose: {\n      color: theme.palette.text.primary\n    },\n    marginMobileSidebar: (props) => ({\n      marginBottom: `${props.sidebarConfig.mobileSidebarHeight}px`\n    })\n  })\n);\nconst sortSidebarGroupsForPriority = (children) => orderBy(\n  children,\n  ({ props: { priority } }) => Number.isInteger(priority) ? priority : -1,\n  \"desc\"\n);\nconst sidebarGroupType = React.createElement(SidebarGroup).type;\nconst OverlayMenu = ({\n  children,\n  label = \"Menu\",\n  open,\n  onClose\n}) => {\n  const { sidebarConfig } = useContext(SidebarConfigContext);\n  const classes = useStyles$l({ sidebarConfig });\n  return /* @__PURE__ */ React.createElement(Drawer, {\n    anchor: \"bottom\",\n    open,\n    onClose,\n    ModalProps: {\n      BackdropProps: { classes: { root: classes.marginMobileSidebar } }\n    },\n    classes: {\n      root: classes.marginMobileSidebar,\n      paperAnchorBottom: classes.overlay\n    }\n  }, /* @__PURE__ */ React.createElement(Box, {\n    className: classes.overlayHeader\n  }, /* @__PURE__ */ React.createElement(Typography, {\n    variant: \"h3\"\n  }, label), /* @__PURE__ */ React.createElement(IconButton, {\n    onClick: onClose,\n    classes: { root: classes.overlayHeaderClose }\n  }, /* @__PURE__ */ React.createElement(CloseIcon, null))), /* @__PURE__ */ React.createElement(Box, {\n    component: \"nav\"\n  }, children));\n};\nconst MobileSidebarContext = createContext({\n  selectedMenuItemIndex: -1,\n  setSelectedMenuItemIndex: () => {\n  }\n});\nconst MobileSidebar = (props) => {\n  const { sidebarConfig } = useContext(SidebarConfigContext);\n  const { children } = props;\n  const classes = useStyles$l({ sidebarConfig });\n  const location = useLocation$1();\n  const [selectedMenuItemIndex, setSelectedMenuItemIndex] = useState(-1);\n  useEffect(() => {\n    setSelectedMenuItemIndex(-1);\n  }, [location.pathname]);\n  let sidebarGroups = useElementFilter(\n    children,\n    (elements) => elements.getElements().filter((child) => child.type === sidebarGroupType)\n  );\n  if (!children) {\n    return null;\n  } else if (!sidebarGroups.length) {\n    sidebarGroups.push(\n      /* @__PURE__ */ React.createElement(SidebarGroup, {\n        key: \"default_menu\",\n        icon: /* @__PURE__ */ React.createElement(MenuIcon, null)\n      }, children)\n    );\n  } else {\n    sidebarGroups = sortSidebarGroupsForPriority(sidebarGroups);\n  }\n  const shouldShowGroupChildren = selectedMenuItemIndex >= 0 && !sidebarGroups[selectedMenuItemIndex].props.to;\n  return /* @__PURE__ */ React.createElement(SidebarOpenStateProvider, {\n    value: { isOpen: true, setOpen: () => {\n    } }\n  }, /* @__PURE__ */ React.createElement(MobileSidebarContext.Provider, {\n    value: { selectedMenuItemIndex, setSelectedMenuItemIndex }\n  }, /* @__PURE__ */ React.createElement(OverlayMenu, {\n    label: sidebarGroups[selectedMenuItemIndex] && sidebarGroups[selectedMenuItemIndex].props.label,\n    open: shouldShowGroupChildren,\n    onClose: () => setSelectedMenuItemIndex(-1)\n  }, sidebarGroups[selectedMenuItemIndex] && sidebarGroups[selectedMenuItemIndex].props.children), /* @__PURE__ */ React.createElement(BottomNavigation, {\n    className: classes.root,\n    \"data-testid\": \"mobile-sidebar-root\",\n    component: \"nav\"\n  }, sidebarGroups)));\n};\n\nconst useStyles$k = makeStyles(\n  (theme) => ({\n    drawer: (props) => ({\n      display: \"flex\",\n      flexFlow: \"column nowrap\",\n      alignItems: \"flex-start\",\n      position: \"fixed\",\n      left: 0,\n      top: 0,\n      bottom: 0,\n      zIndex: theme.zIndex.appBar,\n      background: theme.palette.navigation.background,\n      overflowX: \"hidden\",\n      msOverflowStyle: \"none\",\n      scrollbarWidth: \"none\",\n      width: props.sidebarConfig.drawerWidthClosed,\n      transition: theme.transitions.create(\"width\", {\n        easing: theme.transitions.easing.sharp,\n        duration: theme.transitions.duration.shortest\n      }),\n      \"& > *\": {\n        flexShrink: 0\n      },\n      \"&::-webkit-scrollbar\": {\n        display: \"none\"\n      }\n    }),\n    drawerOpen: (props) => ({\n      width: props.sidebarConfig.drawerWidthOpen,\n      transition: theme.transitions.create(\"width\", {\n        easing: theme.transitions.easing.sharp,\n        duration: theme.transitions.duration.shorter\n      })\n    }),\n    visuallyHidden: {\n      top: 0,\n      position: \"absolute\",\n      zIndex: 1e3,\n      transform: \"translateY(-200%)\",\n      \"&:focus\": {\n        transform: \"translateY(5px)\"\n      }\n    }\n  }),\n  { name: \"BackstageSidebar\" }\n);\nconst DesktopSidebar = (props) => {\n  const { sidebarConfig } = useContext(SidebarConfigContext);\n  const {\n    openDelayMs = sidebarConfig.defaultOpenDelayMs,\n    closeDelayMs = sidebarConfig.defaultCloseDelayMs,\n    disableExpandOnHover,\n    children\n  } = props;\n  const classes = useStyles$k({ sidebarConfig });\n  const isSmallScreen = useMediaQuery(\n    (theme) => theme.breakpoints.down(\"md\"),\n    { noSsr: true }\n  );\n  const [state, setState] = useState(0 /* Closed */);\n  const hoverTimerRef = useRef();\n  const { isPinned, toggleSidebarPinState } = useSidebarPinState();\n  const handleOpen = () => {\n    if (isPinned || disableExpandOnHover) {\n      return;\n    }\n    if (hoverTimerRef.current) {\n      clearTimeout(hoverTimerRef.current);\n      hoverTimerRef.current = void 0;\n    }\n    if (state !== 2 /* Open */ && !isSmallScreen) {\n      hoverTimerRef.current = window.setTimeout(() => {\n        hoverTimerRef.current = void 0;\n        setState(2 /* Open */);\n      }, openDelayMs);\n      setState(1 /* Idle */);\n    }\n  };\n  const handleClose = () => {\n    if (isPinned || disableExpandOnHover) {\n      return;\n    }\n    if (hoverTimerRef.current) {\n      clearTimeout(hoverTimerRef.current);\n      hoverTimerRef.current = void 0;\n    }\n    if (state === 1 /* Idle */) {\n      setState(0 /* Closed */);\n    } else if (state === 2 /* Open */) {\n      hoverTimerRef.current = window.setTimeout(() => {\n        hoverTimerRef.current = void 0;\n        setState(0 /* Closed */);\n      }, closeDelayMs);\n    }\n  };\n  const isOpen = state === 2 /* Open */ && !isSmallScreen || isPinned;\n  const setOpen = (open) => {\n    if (open) {\n      setState(2 /* Open */);\n      toggleSidebarPinState();\n    } else {\n      setState(0 /* Closed */);\n      toggleSidebarPinState();\n    }\n  };\n  return /* @__PURE__ */ React.createElement(\"nav\", {\n    style: {},\n    \"aria-label\": \"sidebar nav\"\n  }, /* @__PURE__ */ React.createElement(A11ySkipSidebar, null), /* @__PURE__ */ React.createElement(SidebarOpenStateProvider, {\n    value: { isOpen, setOpen }\n  }, /* @__PURE__ */ React.createElement(\"div\", {\n    className: classes.root,\n    \"data-testid\": \"sidebar-root\",\n    onMouseEnter: disableExpandOnHover ? () => {\n    } : handleOpen,\n    onFocus: disableExpandOnHover ? () => {\n    } : handleOpen,\n    onMouseLeave: disableExpandOnHover ? () => {\n    } : handleClose,\n    onBlur: disableExpandOnHover ? () => {\n    } : handleClose\n  }, /* @__PURE__ */ React.createElement(\"div\", {\n    className: classNames(classes.drawer, {\n      [classes.drawerOpen]: isOpen\n    })\n  }, children))));\n};\nconst Sidebar = (props) => {\n  var _a, _b;\n  const sidebarConfig = makeSidebarConfig(\n    (_a = props.sidebarOptions) != null ? _a : {}\n  );\n  const submenuConfig = makeSidebarSubmenuConfig(\n    (_b = props.submenuOptions) != null ? _b : {}\n  );\n  const { children, disableExpandOnHover, openDelayMs, closeDelayMs } = props;\n  const { isMobile } = useSidebarPinState();\n  return isMobile ? /* @__PURE__ */ React.createElement(MobileSidebar, null, children) : /* @__PURE__ */ React.createElement(SidebarConfigContext.Provider, {\n    value: { sidebarConfig, submenuConfig }\n  }, /* @__PURE__ */ React.createElement(DesktopSidebar, {\n    openDelayMs,\n    closeDelayMs,\n    disableExpandOnHover\n  }, children));\n};\nfunction A11ySkipSidebar() {\n  const { sidebarConfig } = useContext(SidebarConfigContext);\n  const { focusContent, contentRef } = useContent();\n  const classes = useStyles$k({ sidebarConfig });\n  if (!(contentRef == null ? void 0 : contentRef.current)) {\n    return null;\n  }\n  return /* @__PURE__ */ React.createElement(Button$1, {\n    onClick: focusContent,\n    variant: \"contained\",\n    className: classNames(classes.visuallyHidden)\n  }, \"Skip to content\");\n}\n\nfunction isLocationMatch(currentLocation, toLocation) {\n  const toDecodedSearch = new URLSearchParams(toLocation.search).toString();\n  const toQueryParameters = qs.parse(toDecodedSearch);\n  const currentDecodedSearch = new URLSearchParams(\n    currentLocation.search\n  ).toString();\n  const currentQueryParameters = qs.parse(currentDecodedSearch);\n  const matching = isEqual(toLocation.pathname, currentLocation.pathname) && isMatch(currentQueryParameters, toQueryParameters);\n  return matching;\n}\n\nconst useStyles$j = makeStyles(\n  (theme) => ({\n    item: {\n      height: 48,\n      width: \"100%\",\n      \"&:hover\": {\n        background: \"#6f6f6f\",\n        color: theme.palette.navigation.selectedColor\n      },\n      display: \"flex\",\n      alignItems: \"center\",\n      color: theme.palette.navigation.color,\n      padding: 20,\n      cursor: \"pointer\",\n      position: \"relative\",\n      background: \"none\",\n      border: \"none\"\n    },\n    itemContainer: {\n      width: \"100%\"\n    },\n    selected: {\n      background: \"#6f6f6f\",\n      color: \"#FFF\"\n    },\n    label: {\n      margin: 14,\n      marginLeft: 7,\n      fontSize: 14,\n      whiteSpace: \"nowrap\",\n      overflow: \"hidden\",\n      \"text-overflow\": \"ellipsis\",\n      lineHeight: 1\n    },\n    subtitle: {\n      fontSize: 10,\n      whiteSpace: \"nowrap\",\n      overflow: \"hidden\",\n      \"text-overflow\": \"ellipsis\"\n    },\n    dropdownArrow: {\n      position: \"absolute\",\n      right: 21\n    },\n    dropdown: {\n      display: \"flex\",\n      flexDirection: \"column\",\n      alignItems: \"end\"\n    },\n    dropdownItem: {\n      width: \"100%\",\n      padding: \"10px 0 10px 0\",\n      \"&:hover\": {\n        background: \"#6f6f6f\",\n        color: theme.palette.navigation.selectedColor\n      }\n    },\n    textContent: {\n      color: theme.palette.navigation.color,\n      paddingLeft: theme.spacing(4),\n      paddingRight: theme.spacing(1),\n      fontSize: \"14px\",\n      whiteSpace: \"nowrap\",\n      overflow: \"hidden\",\n      \"text-overflow\": \"ellipsis\"\n    }\n  }),\n  { name: \"BackstageSidebarSubmenuItem\" }\n);\nconst SidebarSubmenuItem = (props) => {\n  const { title, subtitle, to, icon: Icon, dropdownItems } = props;\n  const classes = useStyles$j();\n  const { setIsHoveredOn } = useContext(SidebarItemWithSubmenuContext);\n  const closeSubmenu = () => {\n    setIsHoveredOn(false);\n  };\n  const toLocation = useResolvedPath$1(to != null ? to : \"\");\n  const currentLocation = useLocation();\n  let isActive = isLocationMatch(currentLocation, toLocation);\n  const [showDropDown, setShowDropDown] = useState(false);\n  const handleClickDropdown = () => {\n    setShowDropDown(!showDropDown);\n  };\n  if (dropdownItems !== void 0) {\n    dropdownItems.some((item) => {\n      const resolvedPath = resolvePath(item.to);\n      isActive = isLocationMatch(currentLocation, resolvedPath);\n      return isActive;\n    });\n    return /* @__PURE__ */ React.createElement(\"div\", {\n      className: classes.itemContainer\n    }, /* @__PURE__ */ React.createElement(Tooltip, {\n      title,\n      enterDelay: 500,\n      enterNextDelay: 500\n    }, /* @__PURE__ */ React.createElement(\"button\", {\n      onClick: handleClickDropdown,\n      onTouchStart: (e) => e.stopPropagation(),\n      className: classNames(\n        classes.item,\n        isActive ? classes.selected : void 0\n      )\n    }, Icon && /* @__PURE__ */ React.createElement(Icon, {\n      fontSize: \"small\"\n    }), /* @__PURE__ */ React.createElement(Typography, {\n      variant: \"subtitle1\",\n      className: classes.label\n    }, title, /* @__PURE__ */ React.createElement(\"br\", null), subtitle && /* @__PURE__ */ React.createElement(Typography, {\n      variant: \"caption\",\n      className: classes.subtitle\n    }, subtitle)), showDropDown ? /* @__PURE__ */ React.createElement(ArrowDropUpIcon, {\n      className: classes.dropdownArrow\n    }) : /* @__PURE__ */ React.createElement(ArrowDropDownIcon, {\n      className: classes.dropdownArrow\n    }))), dropdownItems && showDropDown && /* @__PURE__ */ React.createElement(\"div\", {\n      className: classes.dropdown\n    }, dropdownItems.map((object, key) => /* @__PURE__ */ React.createElement(Tooltip, {\n      key,\n      title: object.title,\n      enterDelay: 500,\n      enterNextDelay: 500\n    }, /* @__PURE__ */ React.createElement(Link, {\n      to: object.to,\n      underline: \"none\",\n      className: classes.dropdownItem,\n      onClick: closeSubmenu,\n      onTouchStart: (e) => e.stopPropagation()\n    }, /* @__PURE__ */ React.createElement(Typography, {\n      className: classes.textContent\n    }, object.title))))));\n  }\n  return /* @__PURE__ */ React.createElement(\"div\", {\n    className: classes.itemContainer\n  }, /* @__PURE__ */ React.createElement(Tooltip, {\n    title,\n    enterDelay: 500,\n    enterNextDelay: 500\n  }, /* @__PURE__ */ React.createElement(Link, {\n    to,\n    underline: \"none\",\n    className: classNames(\n      classes.item,\n      isActive ? classes.selected : void 0\n    ),\n    onClick: closeSubmenu,\n    onTouchStart: (e) => e.stopPropagation()\n  }, Icon && /* @__PURE__ */ React.createElement(Icon, {\n    fontSize: \"small\"\n  }), /* @__PURE__ */ React.createElement(Typography, {\n    variant: \"subtitle1\",\n    className: classes.label\n  }, title, /* @__PURE__ */ React.createElement(\"br\", null), subtitle && /* @__PURE__ */ React.createElement(Typography, {\n    variant: \"caption\",\n    className: classes.subtitle\n  }, subtitle)))));\n};\n\nconst useStyles$i = makeStyles(\n  (theme) => ({\n    root: {\n      zIndex: 1e3,\n      position: \"relative\",\n      overflow: \"visible\",\n      width: theme.spacing(7) + 1\n    },\n    drawer: (props) => {\n      var _a, _b;\n      return {\n        display: \"flex\",\n        flexFlow: \"column nowrap\",\n        alignItems: \"flex-start\",\n        position: \"fixed\",\n        [theme.breakpoints.up(\"sm\")]: {\n          marginLeft: props.left,\n          transition: theme.transitions.create(\"margin-left\", {\n            easing: theme.transitions.easing.sharp,\n            duration: theme.transitions.duration.shortest\n          })\n        },\n        top: 0,\n        bottom: 0,\n        padding: 0,\n        background: (_b = (_a = theme.palette.navigation.submenu) == null ? void 0 : _a.background) != null ? _b : \"#404040\",\n        overflowX: \"hidden\",\n        msOverflowStyle: \"none\",\n        scrollbarWidth: \"none\",\n        cursor: \"default\",\n        width: props.submenuConfig.drawerWidthClosed,\n        transitionDelay: `${props.submenuConfig.defaultOpenDelayMs}ms`,\n        \"& > *\": {\n          flexShrink: 0\n        },\n        \"&::-webkit-scrollbar\": {\n          display: \"none\"\n        }\n      };\n    },\n    drawerOpen: (props) => ({\n      width: props.submenuConfig.drawerWidthOpen,\n      [theme.breakpoints.down(\"xs\")]: {\n        width: \"100%\",\n        position: \"relative\",\n        paddingLeft: theme.spacing(3),\n        left: 0,\n        top: 0\n      }\n    }),\n    title: {\n      fontSize: 24,\n      fontWeight: 500,\n      color: \"#FFF\",\n      padding: 20,\n      [theme.breakpoints.down(\"xs\")]: {\n        display: \"none\"\n      }\n    }\n  }),\n  { name: \"BackstageSidebarSubmenu\" }\n);\nconst SidebarSubmenu = (props) => {\n  const { isOpen } = useSidebarOpenState();\n  const { sidebarConfig, submenuConfig } = useContext(SidebarConfigContext);\n  const left = isOpen ? sidebarConfig.drawerWidthOpen : sidebarConfig.drawerWidthClosed;\n  const classes = useStyles$i({ left, submenuConfig });\n  const { isHoveredOn } = useContext(SidebarItemWithSubmenuContext);\n  const [isSubmenuOpen, setIsSubmenuOpen] = useState(false);\n  useEffect(() => {\n    setIsSubmenuOpen(isHoveredOn);\n  }, [isHoveredOn]);\n  return /* @__PURE__ */ React.createElement(\"div\", {\n    className: classNames(classes.drawer, {\n      [classes.drawerOpen]: isSubmenuOpen\n    })\n  }, /* @__PURE__ */ React.createElement(Typography, {\n    variant: \"h5\",\n    className: classes.title\n  }, props.title), props.children);\n};\n\nconst useStyles$h = makeStyles({\n  iconContainer: {\n    display: \"flex\",\n    position: \"relative\",\n    width: \"100%\"\n  },\n  arrow1: {\n    right: \"6px\",\n    position: \"absolute\"\n  }\n});\nconst DoubleArrowLeft = () => {\n  const classes = useStyles$h();\n  return /* @__PURE__ */ React.createElement(\"div\", {\n    className: classes.iconContainer\n  }, /* @__PURE__ */ React.createElement(\"div\", {\n    className: classes.arrow1\n  }, /* @__PURE__ */ React.createElement(ArrowBackIosIcon, {\n    style: { fontSize: \"12px\" }\n  })), /* @__PURE__ */ React.createElement(\"div\", null, /* @__PURE__ */ React.createElement(ArrowBackIosIcon, {\n    style: { fontSize: \"12px\" }\n  })));\n};\n\nconst useStyles$g = makeStyles({\n  iconContainer: {\n    display: \"flex\",\n    position: \"relative\",\n    width: \"100%\"\n  },\n  arrow1: {\n    right: \"6px\",\n    position: \"absolute\"\n  }\n});\nconst DoubleArrowRight = () => {\n  const classes = useStyles$g();\n  return /* @__PURE__ */ React.createElement(\"div\", {\n    className: classes.iconContainer\n  }, /* @__PURE__ */ React.createElement(\"div\", {\n    className: classes.arrow1\n  }, /* @__PURE__ */ React.createElement(ArrowForwardIosIcon, {\n    style: { fontSize: \"12px\" }\n  })), /* @__PURE__ */ React.createElement(\"div\", null, /* @__PURE__ */ React.createElement(ArrowForwardIosIcon, {\n    style: { fontSize: \"12px\" }\n  })));\n};\n\nconst makeSidebarStyles = (sidebarConfig) => makeStyles(\n  (theme) => {\n    var _a, _b, _c, _d;\n    return {\n      root: {\n        color: theme.palette.navigation.color,\n        display: \"flex\",\n        flexFlow: \"row nowrap\",\n        alignItems: \"center\",\n        height: 48,\n        cursor: \"pointer\"\n      },\n      buttonItem: {\n        background: \"none\",\n        border: \"none\",\n        width: \"100%\",\n        margin: 0,\n        padding: 0,\n        textAlign: \"inherit\",\n        font: \"inherit\"\n      },\n      closed: {\n        width: sidebarConfig.drawerWidthClosed,\n        justifyContent: \"center\"\n      },\n      open: {\n        [theme.breakpoints.up(\"sm\")]: {\n          width: sidebarConfig.drawerWidthOpen\n        }\n      },\n      highlightable: {\n        \"&:hover\": {\n          background: (_b = (_a = theme.palette.navigation.navItem) == null ? void 0 : _a.hoverBackground) != null ? _b : \"#404040\"\n        }\n      },\n      highlighted: {\n        background: (_d = (_c = theme.palette.navigation.navItem) == null ? void 0 : _c.hoverBackground) != null ? _d : \"#404040\"\n      },\n      label: {\n        fontWeight: \"bold\",\n        whiteSpace: \"nowrap\",\n        lineHeight: \"auto\",\n        flex: \"3 1 auto\",\n        width: \"110px\",\n        overflow: \"hidden\",\n        \"text-overflow\": \"ellipsis\"\n      },\n      iconContainer: {\n        boxSizing: \"border-box\",\n        height: \"100%\",\n        width: sidebarConfig.iconContainerWidth,\n        marginRight: -theme.spacing(2),\n        display: \"flex\",\n        alignItems: \"center\",\n        justifyContent: \"center\"\n      },\n      searchRoot: {\n        marginBottom: 12\n      },\n      searchField: {\n        color: \"#b5b5b5\",\n        fontWeight: \"bold\",\n        fontSize: theme.typography.fontSize\n      },\n      searchFieldHTMLInput: {\n        padding: theme.spacing(2, 0, 2)\n      },\n      searchContainer: {\n        width: sidebarConfig.drawerWidthOpen - sidebarConfig.iconContainerWidth\n      },\n      secondaryAction: {\n        width: theme.spacing(6),\n        textAlign: \"center\",\n        marginRight: theme.spacing(1)\n      },\n      closedItemIcon: {\n        width: \"100%\",\n        justifyContent: \"center\"\n      },\n      submenuArrow: {\n        display: \"flex\"\n      },\n      expandButton: {\n        background: \"none\",\n        border: \"none\",\n        color: theme.palette.navigation.color,\n        width: \"100%\",\n        cursor: \"pointer\",\n        position: \"relative\",\n        height: 48\n      },\n      arrows: {\n        position: \"absolute\",\n        right: 10\n      },\n      selected: {\n        \"&$root\": {\n          borderLeft: `solid ${sidebarConfig.selectedIndicatorWidth}px ${theme.palette.navigation.indicator}`,\n          color: theme.palette.navigation.selectedColor\n        },\n        \"&$closed\": {\n          width: sidebarConfig.drawerWidthClosed\n        },\n        \"& $closedItemIcon\": {\n          paddingRight: sidebarConfig.selectedIndicatorWidth\n        },\n        \"& $iconContainer\": {\n          marginLeft: -sidebarConfig.selectedIndicatorWidth\n        }\n      }\n    };\n  },\n  { name: \"BackstageSidebarItem\" }\n);\nfunction useMemoStyles(sidebarConfig) {\n  const useStyles = useMemo(\n    () => makeSidebarStyles(sidebarConfig),\n    [sidebarConfig]\n  );\n  return useStyles();\n}\nconst useLocationMatch = (submenu, location) => useElementFilter(\n  submenu.props.children,\n  (elements) => {\n    let active = false;\n    elements.getElements().forEach(\n      ({\n        props: { to, dropdownItems }\n      }) => {\n        if (!active) {\n          if (dropdownItems == null ? void 0 : dropdownItems.length) {\n            dropdownItems.forEach(\n              ({ to: _to }) => active = active || isLocationMatch(location, resolvePath(_to))\n            );\n            return;\n          }\n          if (to) {\n            active = isLocationMatch(location, resolvePath(to));\n          }\n        }\n      }\n    );\n    return active;\n  },\n  [location.pathname]\n);\nfunction isButtonItem(props) {\n  return props.to === void 0;\n}\nconst sidebarSubmenuType = React.createElement(SidebarSubmenu).type;\nconst WorkaroundNavLink = React.forwardRef(function WorkaroundNavLinkWithRef({\n  to,\n  end,\n  style,\n  className,\n  activeStyle,\n  caseSensitive,\n  activeClassName = \"active\",\n  \"aria-current\": ariaCurrentProp = \"page\",\n  ...rest\n}, ref) {\n  let { pathname: locationPathname } = useLocation();\n  let { pathname: toPathname } = useResolvedPath$1(to);\n  if (!caseSensitive) {\n    locationPathname = locationPathname.toLocaleLowerCase(\"en-US\");\n    toPathname = toPathname.toLocaleLowerCase(\"en-US\");\n  }\n  let isActive = locationPathname === toPathname;\n  if (!isActive && !end) {\n    isActive = locationPathname.startsWith(`${toPathname}/`);\n  }\n  const ariaCurrent = isActive ? ariaCurrentProp : void 0;\n  return /* @__PURE__ */ React.createElement(Link$2, {\n    ...rest,\n    to,\n    ref,\n    \"aria-current\": ariaCurrent,\n    style: { ...style, ...isActive ? activeStyle : void 0 },\n    className: classNames([\n      className,\n      isActive ? activeClassName : void 0\n    ])\n  });\n});\nconst SidebarItemBase = forwardRef((props, ref) => {\n  const {\n    icon: Icon,\n    text,\n    hasNotifications = false,\n    hasSubmenu = false,\n    disableHighlight = false,\n    onClick,\n    children,\n    className,\n    ...navLinkProps\n  } = props;\n  const { sidebarConfig } = useContext(SidebarConfigContext);\n  const classes = useMemoStyles(sidebarConfig);\n  const { isOpen } = useSidebarOpenState();\n  const divStyle = !isOpen && hasSubmenu ? { display: \"flex\", marginLeft: \"24px\" } : {};\n  const displayItemIcon = /* @__PURE__ */ React.createElement(\"div\", {\n    style: divStyle\n  }, /* @__PURE__ */ React.createElement(Icon, {\n    fontSize: \"small\"\n  }), !isOpen && hasSubmenu ? /* @__PURE__ */ React.createElement(ArrowRightIcon, null) : /* @__PURE__ */ React.createElement(React.Fragment, null));\n  const itemIcon = /* @__PURE__ */ React.createElement(Badge, {\n    color: \"secondary\",\n    variant: \"dot\",\n    overlap: \"circular\",\n    invisible: !hasNotifications,\n    className: classNames({ [classes.closedItemIcon]: !isOpen })\n  }, displayItemIcon);\n  const openContent = /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(\"div\", {\n    \"data-testid\": \"login-button\",\n    className: classes.iconContainer\n  }, itemIcon), text && /* @__PURE__ */ React.createElement(Typography, {\n    variant: \"subtitle2\",\n    className: classes.label\n  }, text), /* @__PURE__ */ React.createElement(\"div\", {\n    className: classes.secondaryAction\n  }, children));\n  const content = isOpen ? openContent : itemIcon;\n  const childProps = {\n    onClick,\n    className: classNames(\n      className,\n      classes.root,\n      isOpen ? classes.open : classes.closed,\n      isButtonItem(props) && classes.buttonItem,\n      { [classes.highlightable]: !disableHighlight }\n    )\n  };\n  if (isButtonItem(props)) {\n    return /* @__PURE__ */ React.createElement(\"button\", {\n      \"aria-label\": text,\n      ...childProps,\n      ref\n    }, content);\n  }\n  return /* @__PURE__ */ React.createElement(WorkaroundNavLink, {\n    ...childProps,\n    activeClassName: classes.selected,\n    to: props.to ? props.to : \"\",\n    ref,\n    \"aria-label\": text ? text : props.to,\n    ...navLinkProps\n  }, content);\n});\nconst SidebarItemWithSubmenu = ({\n  children,\n  ...props\n}) => {\n  const { sidebarConfig } = useContext(SidebarConfigContext);\n  const classes = useMemoStyles(sidebarConfig);\n  const [isHoveredOn, setIsHoveredOn] = useState(false);\n  const location = useLocation();\n  const isActive = useLocationMatch(children, location);\n  const isSmallScreen = useMediaQuery(\n    (theme) => theme.breakpoints.down(\"sm\")\n  );\n  const handleMouseEnter = () => {\n    setIsHoveredOn(true);\n  };\n  const handleMouseLeave = () => {\n    setIsHoveredOn(false);\n  };\n  const arrowIcon = () => {\n    if (isSmallScreen) {\n      return isHoveredOn ? /* @__PURE__ */ React.createElement(ArrowDropUpIcon, {\n        fontSize: \"small\",\n        className: classes.submenuArrow\n      }) : /* @__PURE__ */ React.createElement(ArrowDropDownIcon, {\n        fontSize: \"small\",\n        className: classes.submenuArrow\n      });\n    }\n    return !isHoveredOn && /* @__PURE__ */ React.createElement(ArrowRightIcon, {\n      fontSize: \"small\",\n      className: classes.submenuArrow\n    });\n  };\n  return /* @__PURE__ */ React.createElement(SidebarItemWithSubmenuContext.Provider, {\n    value: {\n      isHoveredOn,\n      setIsHoveredOn\n    }\n  }, /* @__PURE__ */ React.createElement(\"div\", {\n    \"data-testid\": \"item-with-submenu\",\n    onMouseLeave: handleMouseLeave,\n    onTouchStart: isHoveredOn ? handleMouseLeave : handleMouseEnter,\n    onMouseEnter: handleMouseEnter,\n    className: classNames(isHoveredOn && classes.highlighted)\n  }, /* @__PURE__ */ React.createElement(SidebarItemBase, {\n    hasSubmenu: true,\n    className: isActive ? classes.selected : \"\",\n    ...props\n  }, arrowIcon()), isHoveredOn && children));\n};\nconst SidebarItem = forwardRef((props, ref) => {\n  const [submenu] = useElementFilter(\n    props.children,\n    (elements) => elements.getElements().filter((child) => child.type === sidebarSubmenuType)\n  );\n  if (submenu) {\n    return /* @__PURE__ */ React.createElement(SidebarItemWithSubmenu, {\n      ...props\n    }, submenu);\n  }\n  return /* @__PURE__ */ React.createElement(SidebarItemBase, {\n    ...props,\n    ref\n  });\n});\nfunction SidebarSearchField(props) {\n  const { sidebarConfig } = useContext(SidebarConfigContext);\n  const [input, setInput] = useState(\"\");\n  const classes = useMemoStyles(sidebarConfig);\n  const Icon = props.icon ? props.icon : SearchIcon;\n  const search = () => {\n    props.onSearch(input);\n    setInput(\"\");\n  };\n  const handleEnter = (ev) => {\n    if (ev.key === \"Enter\") {\n      ev.preventDefault();\n      search();\n    }\n  };\n  const handleInput = (ev) => {\n    setInput(ev.target.value);\n  };\n  const handleInputClick = (ev) => {\n    ev.preventDefault();\n    ev.stopPropagation();\n  };\n  const handleItemClick = (ev) => {\n    search();\n    ev.preventDefault();\n  };\n  return /* @__PURE__ */ React.createElement(\"div\", {\n    className: classes.searchRoot\n  }, /* @__PURE__ */ React.createElement(SidebarItem, {\n    icon: Icon,\n    to: props.to,\n    onClick: handleItemClick,\n    disableHighlight: true\n  }, /* @__PURE__ */ React.createElement(TextField, {\n    placeholder: \"Search\",\n    value: input,\n    onClick: handleInputClick,\n    onChange: handleInput,\n    onKeyDown: handleEnter,\n    className: classes.searchContainer,\n    InputProps: {\n      disableUnderline: true,\n      className: classes.searchField\n    },\n    inputProps: {\n      className: classes.searchFieldHTMLInput\n    }\n  })));\n}\nconst SidebarSpace = styled(\"div\")(\n  {\n    flex: 1\n  },\n  { name: \"BackstageSidebarSpace\" }\n);\nconst SidebarSpacer = styled(\"div\")(\n  {\n    height: 8\n  },\n  { name: \"BackstageSidebarSpacer\" }\n);\nconst SidebarDivider = styled(\"hr\")(\n  {\n    height: 1,\n    width: \"100%\",\n    background: \"#383838\",\n    border: \"none\",\n    margin: \"12px 0px\"\n  },\n  { name: \"BackstageSidebarDivider\" }\n);\nconst styledScrollbar = (theme) => ({\n  overflowY: \"auto\",\n  \"&::-webkit-scrollbar\": {\n    backgroundColor: theme.palette.background.default,\n    width: \"5px\",\n    borderRadius: \"5px\"\n  },\n  \"&::-webkit-scrollbar-thumb\": {\n    backgroundColor: theme.palette.text.hint,\n    borderRadius: \"5px\"\n  }\n});\nconst SidebarScrollWrapper = styled(\"div\")(({ theme }) => {\n  const scrollbarStyles = styledScrollbar(theme);\n  return {\n    flex: \"0 1 auto\",\n    overflowX: \"hidden\",\n    width: \"calc(100% - 5px)\",\n    minHeight: \"48px\",\n    overflowY: \"hidden\",\n    \"@media (hover: none)\": scrollbarStyles,\n    \"&:hover\": scrollbarStyles\n  };\n});\nconst SidebarExpandButton = () => {\n  const { sidebarConfig } = useContext(SidebarConfigContext);\n  const classes = useMemoStyles(sidebarConfig);\n  const { isOpen, setOpen } = useSidebarOpenState();\n  const isSmallScreen = useMediaQuery(\n    (theme) => theme.breakpoints.down(\"md\"),\n    { noSsr: true }\n  );\n  if (isSmallScreen) {\n    return null;\n  }\n  const handleClick = () => {\n    setOpen(!isOpen);\n  };\n  return /* @__PURE__ */ React.createElement(\"button\", {\n    onClick: handleClick,\n    className: classes.expandButton,\n    \"aria-label\": \"Expand Sidebar\",\n    \"data-testid\": \"sidebar-expand-button\"\n  }, /* @__PURE__ */ React.createElement(\"div\", {\n    className: classes.arrows\n  }, isOpen ? /* @__PURE__ */ React.createElement(DoubleArrowLeft, null) : /* @__PURE__ */ React.createElement(DoubleArrowRight, null)));\n};\n\nconst useStyles$f = makeStyles(\n  (theme) => ({\n    introCard: (props) => ({\n      color: \"#b5b5b5\",\n      fontSize: 12,\n      width: props.sidebarConfig.drawerWidthOpen,\n      marginTop: 18,\n      marginBottom: 12,\n      paddingLeft: props.sidebarConfig.iconPadding,\n      paddingRight: props.sidebarConfig.iconPadding\n    }),\n    introDismiss: {\n      display: \"flex\",\n      justifyContent: \"flex-end\",\n      alignItems: \"center\",\n      marginTop: 12\n    },\n    introDismissLink: {\n      color: \"#dddddd\",\n      display: \"flex\",\n      alignItems: \"center\",\n      marginBottom: 4,\n      \"&:hover\": {\n        color: theme.palette.linkHover,\n        transition: theme.transitions.create(\"color\", {\n          easing: theme.transitions.easing.sharp,\n          duration: theme.transitions.duration.shortest\n        })\n      }\n    },\n    introDismissText: {\n      fontSize: \"0.7rem\",\n      fontWeight: \"bold\",\n      textTransform: \"uppercase\",\n      letterSpacing: 1\n    },\n    introDismissIcon: {\n      width: 18,\n      height: 18,\n      marginRight: 12\n    }\n  }),\n  { name: \"BackstageSidebarIntro\" }\n);\nfunction IntroCard(props) {\n  const { sidebarConfig } = useContext(SidebarConfigContext);\n  const classes = useStyles$f({ sidebarConfig });\n  const { text, onClose } = props;\n  const handleClose = () => onClose();\n  return /* @__PURE__ */ React.createElement(\"div\", {\n    className: classes.introCard\n  }, /* @__PURE__ */ React.createElement(Typography, {\n    variant: \"subtitle2\"\n  }, text), /* @__PURE__ */ React.createElement(\"div\", {\n    className: classes.introDismiss\n  }, /* @__PURE__ */ React.createElement(Link$1, {\n    component: \"button\",\n    onClick: handleClose,\n    underline: \"none\",\n    className: classes.introDismissLink\n  }, /* @__PURE__ */ React.createElement(CloseIcon, {\n    className: classes.introDismissIcon\n  }), /* @__PURE__ */ React.createElement(Typography, {\n    component: \"span\",\n    className: classes.introDismissText\n  }, \"Dismiss\"))));\n}\nconst SidebarIntroCard = (props) => {\n  const { text, onDismiss } = props;\n  const [collapsing, setCollapsing] = useState(false);\n  const startDismissing = () => {\n    setCollapsing(true);\n  };\n  return /* @__PURE__ */ React.createElement(Collapse, {\n    in: !collapsing,\n    onExited: onDismiss\n  }, /* @__PURE__ */ React.createElement(IntroCard, {\n    text,\n    onClose: startDismissing\n  }));\n};\nconst starredIntroText = `Fun fact! As you explore all the awesome plugins in Backstage, you can actually pin them to this side nav.\nKeep an eye out for the little star icon (\\u2B50) next to the plugin name and give it a click!`;\nconst recentlyViewedIntroText = \"And your recently viewed plugins will pop up here!\";\nfunction SidebarIntro(_props) {\n  const { isOpen } = useSidebarOpenState();\n  const defaultValue = {\n    starredItemsDismissed: false,\n    recentlyViewedItemsDismissed: false\n  };\n  const [dismissedIntro, setDismissedIntro] = useLocalStorageValue(SIDEBAR_INTRO_LOCAL_STORAGE);\n  const { starredItemsDismissed, recentlyViewedItemsDismissed } = dismissedIntro != null ? dismissedIntro : {};\n  const dismissStarred = () => {\n    setDismissedIntro((state) => ({\n      ...defaultValue,\n      ...state,\n      starredItemsDismissed: true\n    }));\n  };\n  const dismissRecentlyViewed = () => {\n    setDismissedIntro((state) => ({\n      ...defaultValue,\n      ...state,\n      recentlyViewedItemsDismissed: true\n    }));\n  };\n  if (!isOpen) {\n    return null;\n  }\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, !starredItemsDismissed && /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(SidebarIntroCard, {\n    text: starredIntroText,\n    onDismiss: dismissStarred\n  }), /* @__PURE__ */ React.createElement(SidebarDivider, null)), !recentlyViewedItemsDismissed && /* @__PURE__ */ React.createElement(SidebarIntroCard, {\n    text: recentlyViewedIntroText,\n    onDismiss: dismissRecentlyViewed\n  }));\n}\n\nconst useStyles$e = makeStyles(\n  (theme) => ({\n    root: {\n      gridArea: \"pageContent\",\n      minWidth: 0,\n      paddingTop: theme.spacing(3),\n      paddingBottom: theme.spacing(3),\n      paddingLeft: theme.spacing(2),\n      paddingRight: theme.spacing(2),\n      [theme.breakpoints.up(\"sm\")]: {\n        paddingLeft: theme.spacing(3),\n        paddingRight: theme.spacing(3)\n      }\n    },\n    stretch: {\n      display: \"flex\",\n      flexDirection: \"column\",\n      flexGrow: 1\n    },\n    noPadding: {\n      padding: 0\n    }\n  }),\n  { name: \"BackstageContent\" }\n);\nfunction Content(props) {\n  const { className, stretch, noPadding, children, ...restProps } = props;\n  const { contentRef } = useContent();\n  const classes = useStyles$e();\n  return /* @__PURE__ */ React.createElement(\"article\", {\n    ref: contentRef,\n    tabIndex: -1,\n    ...restProps,\n    className: classNames(classes.root, className, {\n      [classes.stretch]: stretch,\n      [classes.noPadding]: noPadding\n    })\n  }, children);\n}\n\nconst useStyles$d = makeStyles(\n  (theme) => ({\n    tabsWrapper: {\n      gridArea: \"pageSubheader\",\n      backgroundColor: theme.palette.background.paper,\n      paddingLeft: theme.spacing(3),\n      minWidth: 0\n    },\n    defaultTab: {\n      padding: theme.spacing(3, 3),\n      ...theme.typography.caption,\n      textTransform: \"uppercase\",\n      fontWeight: \"bold\",\n      color: theme.palette.text.secondary\n    },\n    selected: {\n      color: theme.palette.text.primary\n    },\n    tabRoot: {\n      \"&:hover\": {\n        backgroundColor: theme.palette.background.default,\n        color: theme.palette.text.primary\n      }\n    }\n  }),\n  { name: \"BackstageHeaderTabs\" }\n);\nfunction HeaderTabs(props) {\n  const { tabs, onChange, selectedIndex } = props;\n  const [selectedTab, setSelectedTab] = useState(selectedIndex != null ? selectedIndex : 0);\n  const styles = useStyles$d();\n  const handleChange = useCallback(\n    (_, index) => {\n      if (selectedIndex === void 0) {\n        setSelectedTab(index);\n      }\n      if (onChange && selectedIndex !== index)\n        onChange(index);\n    },\n    [selectedIndex, onChange]\n  );\n  useEffect(() => {\n    if (selectedIndex !== void 0) {\n      setSelectedTab(selectedIndex);\n    }\n  }, [selectedIndex]);\n  return /* @__PURE__ */ React.createElement(\"div\", {\n    className: styles.tabsWrapper\n  }, /* @__PURE__ */ React.createElement(Tabs$1, {\n    selectionFollowsFocus: true,\n    indicatorColor: \"primary\",\n    textColor: \"inherit\",\n    variant: \"scrollable\",\n    scrollButtons: \"auto\",\n    \"aria-label\": \"scrollable auto tabs example\",\n    onChange: handleChange,\n    value: selectedTab\n  }, tabs.map((tab, index) => /* @__PURE__ */ React.createElement(Tab, {\n    ...tab.tabProps,\n    \"data-testid\": `header-tab-${index}`,\n    label: tab.label,\n    key: tab.id,\n    value: index,\n    className: styles.defaultTab,\n    classes: { selected: styles.selected, root: styles.tabRoot }\n  }))));\n}\n\nfunction useSelectedSubRoute(subRoutes) {\n  var _a, _b, _c, _d;\n  const params = useParams();\n  const routes = subRoutes.map(({ path, children }) => ({\n    caseSensitive: false,\n    path: `${path}/*`,\n    element: children\n  }));\n  const sortedRoutes = routes.sort(\n    (a, b) => b.path.replace(/\\/\\*$/, \"\").localeCompare(a.path.replace(/\\/\\*$/, \"\"))\n  );\n  const element = (_a = useRoutes(sortedRoutes)) != null ? _a : subRoutes[0].children;\n  let currentRoute = (_b = params[\"*\"]) != null ? _b : \"\";\n  if (!currentRoute.startsWith(\"/\")) {\n    currentRoute = `/${currentRoute}`;\n  }\n  const [matchedRoute] = (_c = matchRoutes(sortedRoutes, currentRoute)) != null ? _c : [];\n  const foundIndex = matchedRoute ? subRoutes.findIndex((t) => `${t.path}/*` === matchedRoute.route.path) : 0;\n  return {\n    index: foundIndex === -1 ? 0 : foundIndex,\n    element,\n    route: (_d = subRoutes[foundIndex]) != null ? _d : subRoutes[0]\n  };\n}\nfunction RoutedTabs(props) {\n  const { routes } = props;\n  const navigate = useNavigate();\n  const { index, route, element } = useSelectedSubRoute(routes);\n  const headerTabs = useMemo(\n    () => routes.map((t) => ({\n      id: t.path,\n      label: t.title,\n      tabProps: t.tabProps\n    })),\n    [routes]\n  );\n  const onTabChange = (tabIndex) => {\n    let { path } = routes[tabIndex];\n    path = path.replace(/\\/\\*$/, \"\");\n    path = path.replace(/^\\//, \"\");\n    navigate(path);\n  };\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(HeaderTabs, {\n    tabs: headerTabs,\n    selectedIndex: index,\n    onChange: onTabChange\n  }), /* @__PURE__ */ React.createElement(Content, null, /* @__PURE__ */ React.createElement(Helmet, {\n    title: route.title\n  }), element));\n}\n\nconst Route = () => null;\nattachComponentData(Route, \"core.gatherMountPoints\", true);\nfunction createSubRoutesFromChildren(childrenProps) {\n  const routeType = (/* @__PURE__ */ React.createElement(Route, {\n    path: \"\",\n    title: \"\"\n  }, /* @__PURE__ */ React.createElement(\"div\", null))).type;\n  return Children.toArray(childrenProps).flatMap((child) => {\n    if (!isValidElement(child)) {\n      return [];\n    }\n    if (child.type === Fragment) {\n      return createSubRoutesFromChildren(child.props.children);\n    }\n    if (child.type !== routeType) {\n      throw new Error(\"Child of TabbedLayout must be an TabbedLayout.Route\");\n    }\n    const { path, title, children, tabProps } = child.props;\n    return [{ path, title, children, tabProps }];\n  });\n}\nfunction TabbedLayout(props) {\n  const routes = createSubRoutesFromChildren(props.children);\n  return /* @__PURE__ */ React.createElement(RoutedTabs, {\n    routes\n  });\n}\nTabbedLayout.Route = Route;\n\nconst useSubvalueCellStyles = makeStyles(\n  (theme) => ({\n    value: {\n      marginBottom: \"6px\"\n    },\n    subvalue: {\n      color: theme.palette.textSubtle,\n      fontWeight: \"normal\"\n    }\n  }),\n  { name: \"BackstageSubvalueCell\" }\n);\nfunction SubvalueCell(props) {\n  const { value, subvalue } = props;\n  const classes = useSubvalueCellStyles();\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(\"div\", {\n    className: classes.value\n  }, value), /* @__PURE__ */ React.createElement(\"div\", {\n    className: classes.subvalue\n  }, subvalue));\n}\n\nconst useFilterStyles$1 = makeStyles(\n  (theme) => ({\n    root: {\n      height: \"100%\",\n      width: \"315px\",\n      display: \"flex\",\n      flexDirection: \"column\",\n      marginRight: theme.spacing(3)\n    },\n    value: {\n      fontWeight: \"bold\",\n      fontSize: 18\n    },\n    header: {\n      display: \"flex\",\n      alignItems: \"center\",\n      height: \"60px\",\n      justifyContent: \"space-between\",\n      borderBottom: `1px solid ${theme.palette.grey[500]}`\n    },\n    filters: {\n      display: \"flex\",\n      flexDirection: \"column\",\n      \"& > *\": {\n        marginTop: theme.spacing(2)\n      }\n    }\n  }),\n  { name: \"BackstageTableFilters\" }\n);\nconst Filters = (props) => {\n  var _a;\n  const classes = useFilterStyles$1();\n  const { onChangeFilters } = props;\n  const [selectedFilters, setSelectedFilters] = useState({\n    ...props.selectedFilters\n  });\n  const [reset, triggerReset] = useState(false);\n  const handleClick = () => {\n    setSelectedFilters({});\n    triggerReset((el) => !el);\n  };\n  useEffect(() => {\n    onChangeFilters(selectedFilters);\n  }, [selectedFilters, onChangeFilters]);\n  return /* @__PURE__ */ React.createElement(\"div\", {\n    className: classes.root\n  }, /* @__PURE__ */ React.createElement(\"div\", {\n    className: classes.header\n  }, /* @__PURE__ */ React.createElement(\"div\", {\n    className: classes.value\n  }, \"Filters\"), /* @__PURE__ */ React.createElement(Button$1, {\n    color: \"primary\",\n    onClick: handleClick\n  }, \"Clear all\")), /* @__PURE__ */ React.createElement(\"div\", {\n    className: classes.filters\n  }, ((_a = props.filters) == null ? void 0 : _a.length) && props.filters.map((filter) => /* @__PURE__ */ React.createElement(SelectComponent, {\n    triggerReset: reset,\n    key: filter.element.label,\n    ...filter.element,\n    selected: selectedFilters[filter.element.label],\n    onChange: (el) => setSelectedFilters({\n      ...selectedFilters,\n      [filter.element.label]: el\n    })\n  }))));\n};\n\nconst tableIcons = {\n  Add: forwardRef((props, ref) => /* @__PURE__ */ React.createElement(AddBox, {\n    ...props,\n    ref\n  })),\n  Check: forwardRef((props, ref) => /* @__PURE__ */ React.createElement(Check, {\n    ...props,\n    ref\n  })),\n  Clear: forwardRef((props, ref) => /* @__PURE__ */ React.createElement(Clear, {\n    ...props,\n    ref\n  })),\n  Delete: forwardRef((props, ref) => /* @__PURE__ */ React.createElement(DeleteOutline, {\n    ...props,\n    ref\n  })),\n  DetailPanel: forwardRef((props, ref) => /* @__PURE__ */ React.createElement(ChevronRight, {\n    ...props,\n    ref\n  })),\n  Edit: forwardRef((props, ref) => /* @__PURE__ */ React.createElement(Edit, {\n    ...props,\n    ref\n  })),\n  Export: forwardRef((props, ref) => /* @__PURE__ */ React.createElement(SaveAlt, {\n    ...props,\n    ref\n  })),\n  Filter: forwardRef((props, ref) => /* @__PURE__ */ React.createElement(FilterList, {\n    ...props,\n    ref\n  })),\n  FirstPage: forwardRef((props, ref) => /* @__PURE__ */ React.createElement(FirstPage, {\n    ...props,\n    ref\n  })),\n  LastPage: forwardRef((props, ref) => /* @__PURE__ */ React.createElement(LastPage, {\n    ...props,\n    ref\n  })),\n  NextPage: forwardRef((props, ref) => /* @__PURE__ */ React.createElement(ChevronRight, {\n    ...props,\n    ref\n  })),\n  PreviousPage: forwardRef((props, ref) => /* @__PURE__ */ React.createElement(ChevronLeftIcon, {\n    ...props,\n    ref\n  })),\n  ResetSearch: forwardRef((props, ref) => /* @__PURE__ */ React.createElement(Clear, {\n    ...props,\n    ref\n  })),\n  Search: forwardRef((props, ref) => /* @__PURE__ */ React.createElement(FilterList, {\n    ...props,\n    ref\n  })),\n  SortArrow: forwardRef((props, ref) => /* @__PURE__ */ React.createElement(ArrowUpward, {\n    ...props,\n    ref\n  })),\n  ThirdStateCheck: forwardRef((props, ref) => /* @__PURE__ */ React.createElement(Remove, {\n    ...props,\n    ref\n  })),\n  ViewColumn: forwardRef((props, ref) => /* @__PURE__ */ React.createElement(ViewColumn, {\n    ...props,\n    ref\n  }))\n};\nfunction extractValueByField(data, field) {\n  const path = field.split(\".\");\n  let value = data[path[0]];\n  for (let i = 1; i < path.length; ++i) {\n    if (value === void 0) {\n      return value;\n    }\n    const f = path[i];\n    value = value[f];\n  }\n  return value;\n}\nconst StyledMTableHeader = withStyles(\n  (theme) => ({\n    header: {\n      padding: theme.spacing(1, 2, 1, 2.5),\n      borderTop: `1px solid ${theme.palette.grey.A100}`,\n      borderBottom: `1px solid ${theme.palette.grey.A100}`,\n      color: theme.palette.textSubtle,\n      fontWeight: theme.typography.fontWeightBold,\n      position: \"static\",\n      wordBreak: \"normal\"\n    }\n  }),\n  { name: \"BackstageTableHeader\" }\n)(MTableHeader);\nconst StyledMTableToolbar = withStyles(\n  (theme) => ({\n    root: {\n      padding: theme.spacing(3, 0, 2.5, 2.5)\n    },\n    title: {\n      \"& > h6\": {\n        fontWeight: \"bold\"\n      }\n    },\n    searchField: {\n      paddingRight: theme.spacing(2)\n    }\n  }),\n  { name: \"BackstageTableToolbar\" }\n)(MTableToolbar);\nconst useFilterStyles = makeStyles(\n  () => ({\n    root: {\n      display: \"flex\",\n      alignItems: \"center\",\n      justifyContent: \"space-between\"\n    },\n    title: {\n      fontWeight: \"bold\",\n      fontSize: 18,\n      whiteSpace: \"nowrap\"\n    }\n  }),\n  { name: \"BackstageTableFiltersContainer\" }\n);\nconst useTableStyles = makeStyles(\n  () => ({\n    root: {\n      display: \"flex\",\n      alignItems: \"start\"\n    }\n  }),\n  { name: \"BackstageTable\" }\n);\nfunction convertColumns(columns, theme) {\n  return columns.map((column) => {\n    const headerStyle = {};\n    let cellStyle = column.cellStyle || {};\n    if (column.highlight) {\n      headerStyle.color = theme.palette.textContrast;\n      if (typeof cellStyle === \"object\") {\n        cellStyle.fontWeight = theme.typography.fontWeightBold;\n      } else {\n        const cellStyleFn = cellStyle;\n        cellStyle = (data, rowData, rowColumn) => {\n          const style = cellStyleFn(data, rowData, rowColumn);\n          return { ...style, fontWeight: theme.typography.fontWeightBold };\n        };\n      }\n    }\n    return {\n      ...column,\n      headerStyle,\n      cellStyle\n    };\n  });\n}\nfunction removeDefaultValues(state, defaultState) {\n  return transform(state, (result, value, key) => {\n    if (!isEqual(value, defaultState[key])) {\n      result[key] = value;\n    }\n  });\n}\nconst defaultInitialState = {\n  search: \"\",\n  filtersOpen: false,\n  filters: {}\n};\nfunction TableToolbar(toolbarProps) {\n  const {\n    toolbarRef,\n    setSearch,\n    hasFilters,\n    selectedFiltersLength,\n    toggleFilters\n  } = toolbarProps;\n  const filtersClasses = useFilterStyles();\n  const onSearchChanged = useCallback(\n    (searchText) => {\n      toolbarProps.onSearchChanged(searchText);\n      setSearch(searchText);\n    },\n    [toolbarProps, setSearch]\n  );\n  if (hasFilters) {\n    return /* @__PURE__ */ React.createElement(\"div\", {\n      className: filtersClasses.root\n    }, /* @__PURE__ */ React.createElement(\"div\", {\n      className: filtersClasses.root\n    }, /* @__PURE__ */ React.createElement(IconButton, {\n      onClick: toggleFilters,\n      \"aria-label\": \"filter list\"\n    }, /* @__PURE__ */ React.createElement(FilterList, null)), /* @__PURE__ */ React.createElement(Typography, {\n      className: filtersClasses.title\n    }, \"Filters (\", selectedFiltersLength, \")\")), /* @__PURE__ */ React.createElement(StyledMTableToolbar, {\n      ...toolbarProps,\n      ref: toolbarRef,\n      onSearchChanged\n    }));\n  }\n  return /* @__PURE__ */ React.createElement(StyledMTableToolbar, {\n    ...toolbarProps,\n    ref: toolbarRef,\n    onSearchChanged\n  });\n}\nfunction Table(props) {\n  const {\n    data,\n    columns,\n    options,\n    title,\n    subtitle,\n    filters,\n    initialState,\n    emptyContent,\n    onStateChange,\n    components,\n    ...restProps\n  } = props;\n  const tableClasses = useTableStyles();\n  const theme = useTheme();\n  const calculatedInitialState = { ...defaultInitialState, ...initialState };\n  const [filtersOpen, setFiltersOpen] = useState(\n    calculatedInitialState.filtersOpen\n  );\n  const toggleFilters = useCallback(\n    () => setFiltersOpen((v) => !v),\n    [setFiltersOpen]\n  );\n  const [selectedFiltersLength, setSelectedFiltersLength] = useState(0);\n  const [tableData, setTableData] = useState(data);\n  const [selectedFilters, setSelectedFilters] = useState(\n    calculatedInitialState.filters\n  );\n  const MTColumns = convertColumns(columns, theme);\n  const [search, setSearch] = useState(calculatedInitialState.search);\n  useEffect(() => {\n    if (onStateChange) {\n      const state = removeDefaultValues(\n        {\n          search,\n          filtersOpen,\n          filters: selectedFilters\n        },\n        defaultInitialState\n      );\n      onStateChange(state);\n    }\n  }, [search, filtersOpen, selectedFilters, onStateChange]);\n  const defaultOptions = {\n    headerStyle: {\n      textTransform: \"uppercase\"\n    }\n  };\n  const getFieldByTitle = useCallback(\n    (titleValue) => {\n      var _a;\n      return (_a = columns.find((el) => el.title === titleValue)) == null ? void 0 : _a.field;\n    },\n    [columns]\n  );\n  useEffect(() => {\n    if (typeof data === \"function\") {\n      return;\n    }\n    if (!selectedFilters) {\n      setTableData(data);\n      return;\n    }\n    const selectedFiltersArray = Object.values(selectedFilters);\n    if (data && selectedFiltersArray.flat().length) {\n      const newData = data.filter(\n        (el) => !!Object.entries(selectedFilters).filter(([, value]) => !!value.length).every(([key, filterValue]) => {\n          const fieldValue = extractValueByField(\n            el,\n            getFieldByTitle(key)\n          );\n          if (Array.isArray(fieldValue) && Array.isArray(filterValue)) {\n            return fieldValue.some((v) => filterValue.includes(v));\n          } else if (Array.isArray(fieldValue)) {\n            return fieldValue.includes(filterValue);\n          } else if (Array.isArray(filterValue)) {\n            return filterValue.includes(fieldValue);\n          }\n          return fieldValue === filterValue;\n        })\n      );\n      setTableData(newData);\n    } else {\n      setTableData(data);\n    }\n    setSelectedFiltersLength(selectedFiltersArray.flat().length);\n  }, [data, selectedFilters, getFieldByTitle]);\n  const constructFilters = (filterConfig, dataValue) => {\n    const extractDistinctValues = (field) => {\n      const distinctValues = /* @__PURE__ */ new Set();\n      const addValue = (value) => {\n        if (value !== void 0 && value !== null) {\n          distinctValues.add(value);\n        }\n      };\n      if (dataValue) {\n        dataValue.forEach((el) => {\n          const value = extractValueByField(\n            el,\n            getFieldByTitle(field)\n          );\n          if (Array.isArray(value)) {\n            value.forEach(addValue);\n          } else {\n            addValue(value);\n          }\n        });\n      }\n      return distinctValues;\n    };\n    const constructSelect = (filter) => {\n      return {\n        placeholder: \"All results\",\n        label: filter.column,\n        multiple: filter.type === \"multiple-select\",\n        items: [...extractDistinctValues(filter.column)].sort().map((value) => ({\n          label: value,\n          value\n        }))\n      };\n    };\n    return filterConfig.map((filter) => ({\n      type: filter.type,\n      element: constructSelect(filter)\n    }));\n  };\n  const hasFilters = !!(filters == null ? void 0 : filters.length);\n  const Toolbar = useCallback(\n    (toolbarProps) => {\n      return /* @__PURE__ */ React.createElement(TableToolbar, {\n        setSearch,\n        hasFilters,\n        selectedFiltersLength,\n        toggleFilters,\n        ...toolbarProps\n      });\n    },\n    [toggleFilters, hasFilters, selectedFiltersLength, setSearch]\n  );\n  const hasNoRows = typeof data !== \"function\" && data.length === 0;\n  const columnCount = columns.length;\n  const Body = useCallback(\n    (bodyProps) => {\n      if (emptyContent && hasNoRows) {\n        return /* @__PURE__ */ React.createElement(\"tbody\", null, /* @__PURE__ */ React.createElement(\"tr\", null, /* @__PURE__ */ React.createElement(\"td\", {\n          colSpan: columnCount\n        }, emptyContent)));\n      }\n      return /* @__PURE__ */ React.createElement(MTableBody, {\n        ...bodyProps\n      });\n    },\n    [hasNoRows, emptyContent, columnCount]\n  );\n  return /* @__PURE__ */ React.createElement(\"div\", {\n    className: tableClasses.root\n  }, filtersOpen && data && typeof data !== \"function\" && (filters == null ? void 0 : filters.length) && /* @__PURE__ */ React.createElement(Filters, {\n    filters: constructFilters(filters, data),\n    selectedFilters,\n    onChangeFilters: setSelectedFilters\n  }), /* @__PURE__ */ React.createElement(MTable, {\n    components: {\n      Header: StyledMTableHeader,\n      Toolbar,\n      Body,\n      ...components\n    },\n    options: { ...defaultOptions, ...options },\n    columns: MTColumns,\n    icons: tableIcons,\n    title: /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(Typography, {\n      variant: \"h5\",\n      component: \"h2\"\n    }, title), subtitle && /* @__PURE__ */ React.createElement(Typography, {\n      color: \"textSecondary\",\n      variant: \"body1\"\n    }, subtitle)),\n    data: typeof data === \"function\" ? data : tableData,\n    style: { width: \"100%\" },\n    localization: { toolbar: { searchPlaceholder: \"Filter\" } },\n    ...restProps\n  }));\n}\nTable.icons = Object.freeze(tableIcons);\n\nfunction chunkArray(array, chunkSize) {\n  if (chunkSize <= 0) {\n    return [array];\n  }\n  const result = [];\n  for (let i = 0; i < array.length; i += chunkSize) {\n    result.push(array.slice(i, i + chunkSize));\n  }\n  return result;\n}\n\nconst TabPanel = (props) => {\n  const { children, value, index, ...other } = props;\n  return /* @__PURE__ */ React.createElement(\"div\", {\n    role: \"tabpanel\",\n    hidden: value !== index,\n    \"aria-labelledby\": `scrollable-auto-tab-${index}`,\n    ...other\n  }, value === index && /* @__PURE__ */ React.createElement(Box, {\n    p: 3\n  }, children));\n};\n\nconst useStyles$c = makeStyles(\n  () => ({\n    root: {\n      color: \"#6E6E6E\",\n      overflow: \"visible\",\n      fontSize: \"1.5rem\",\n      textAlign: \"center\",\n      borderRadius: \"50%\",\n      backgroundColor: \"#E6E6E6\",\n      marginLeft: (props) => props.isNext ? \"auto\" : \"0\",\n      marginRight: (props) => props.isNext ? \"0\" : \"10px\",\n      \"&:hover\": {\n        backgroundColor: \"#E6E6E6\",\n        opacity: \"1\"\n      }\n    }\n  }),\n  { name: \"BackstageTabIcon\" }\n);\nconst StyledIcon = (props) => {\n  const classes = useStyles$c(props);\n  const { ariaLabel, onClick } = props;\n  return /* @__PURE__ */ React.createElement(IconButton, {\n    onClick,\n    className: classes.root,\n    size: \"small\",\n    disableRipple: true,\n    disableFocusRipple: true,\n    \"aria-label\": ariaLabel\n  }, props.children);\n};\n\nconst tabMarginLeft = (isFirstNav, isFirstIndex) => {\n  if (isFirstIndex) {\n    if (isFirstNav) {\n      return \"20px\";\n    }\n    return \"0\";\n  }\n  return \"40px\";\n};\nconst useStyles$b = makeStyles(\n  (theme) => ({\n    root: {\n      textTransform: \"none\",\n      height: \"64px\",\n      fontWeight: theme.typography.fontWeightBold,\n      fontSize: theme.typography.pxToRem(13),\n      color: theme.palette.textSubtle,\n      marginLeft: (props) => tabMarginLeft(\n        props.isFirstNav,\n        props.isFirstIndex\n      ),\n      width: \"130px\",\n      minWidth: \"130px\",\n      \"&:hover\": {\n        outline: \"none\",\n        backgroundColor: \"transparent\",\n        color: theme.palette.textSubtle\n      }\n    }\n  }),\n  { name: \"BackstageTab\" }\n);\nconst StyledTab = (props) => {\n  const classes = useStyles$b(props);\n  const { isFirstNav, isFirstIndex, ...rest } = props;\n  return /* @__PURE__ */ React.createElement(Tab, {\n    classes,\n    disableRipple: true,\n    ...rest\n  });\n};\n\nconst useStyles$a = makeStyles(\n  (theme) => ({\n    indicator: {\n      display: \"flex\",\n      justifyContent: \"center\",\n      backgroundColor: theme.palette.tabbar.indicator,\n      height: \"4px\"\n    },\n    flexContainer: {\n      alignItems: \"center\"\n    },\n    root: {\n      \"&:last-child\": {\n        marginLeft: \"auto\"\n      }\n    }\n  }),\n  { name: \"BackstageTabBar\" }\n);\nconst StyledTabs = (props) => {\n  const classes = useStyles$a(props);\n  return /* @__PURE__ */ React.createElement(Tabs$1, {\n    classes,\n    ...props,\n    TabIndicatorProps: { children: /* @__PURE__ */ React.createElement(\"span\", null) }\n  });\n};\n\nconst useStyles$9 = makeStyles(\n  (theme) => ({\n    root: {\n      flexGrow: 1,\n      width: \"100%\"\n    },\n    styledTabs: {\n      backgroundColor: theme.palette.background.paper\n    },\n    appbar: {\n      boxShadow: \"none\",\n      backgroundColor: theme.palette.background.paper,\n      paddingLeft: \"10px\",\n      paddingRight: \"10px\"\n    }\n  }),\n  { name: \"BackstageTabs\" }\n);\nfunction Tabs(props) {\n  const { tabs } = props;\n  const classes = useStyles$9();\n  const [value, setValue] = useState([0, 0]);\n  const [navIndex, setNavIndex] = useState(0);\n  const [numberOfChunkedElement, setNumberOfChunkedElement] = useState(0);\n  const [chunkedTabs, setChunkedTabs] = useState([[]]);\n  const wrapper = useRef();\n  const { width } = useWindowSize();\n  const handleChange = (_, newValue) => {\n    setValue([navIndex, newValue]);\n  };\n  const navigateToPrevChunk = () => {\n    setNavIndex(navIndex - 1);\n  };\n  const navigateToNextChunk = () => {\n    setNavIndex(navIndex + 1);\n  };\n  const hasNextNavIndex = () => navIndex + 1 < chunkedTabs.length;\n  useEffect(() => {\n    const padding = 20;\n    const numberOfTabIcons = navIndex === 0 ? 1 : 2;\n    const wrapperWidth = wrapper.current.offsetWidth - padding - numberOfTabIcons * 30;\n    const flattenIndex = value[0] * numberOfChunkedElement + value[1];\n    const newChunkedElementSize = Math.floor(wrapperWidth / 170);\n    setNumberOfChunkedElement(newChunkedElementSize);\n    setChunkedTabs(chunkArray(tabs, newChunkedElementSize));\n    setValue([\n      Math.floor(flattenIndex / newChunkedElementSize),\n      flattenIndex % newChunkedElementSize\n    ]);\n  }, [width, tabs]);\n  const currentIndex = navIndex === value[0] ? value[1] : false;\n  return /* @__PURE__ */ React.createElement(\"div\", {\n    className: classes.root\n  }, /* @__PURE__ */ React.createElement(AppBar, {\n    ref: wrapper,\n    className: classes.appbar,\n    position: \"static\"\n  }, /* @__PURE__ */ React.createElement(\"div\", null, /* @__PURE__ */ React.createElement(StyledTabs, {\n    value: currentIndex,\n    onChange: handleChange,\n    selectionFollowsFocus: true\n  }, navIndex !== 0 && /* @__PURE__ */ React.createElement(StyledIcon, {\n    onClick: navigateToPrevChunk,\n    ariaLabel: \"navigate-before\"\n  }, /* @__PURE__ */ React.createElement(NavigateBeforeIcon, null)), chunkedTabs[navIndex].map((tab, index) => /* @__PURE__ */ React.createElement(StyledTab, {\n    value: index,\n    isFirstIndex: index === 0,\n    isFirstNav: navIndex === 0,\n    key: index,\n    icon: tab.icon || void 0,\n    label: tab.label || void 0\n  })), hasNextNavIndex() && /* @__PURE__ */ React.createElement(StyledIcon, {\n    isNext: true,\n    onClick: navigateToNextChunk,\n    ariaLabel: \"navigate-next\"\n  }, /* @__PURE__ */ React.createElement(NavigateNextIcon, null))))), currentIndex !== false ? chunkedTabs[navIndex].map((tab, index) => /* @__PURE__ */ React.createElement(TabPanel, {\n    key: index,\n    value: index,\n    index: currentIndex\n  }, tab.content)) : /* @__PURE__ */ React.createElement(TabPanel, {\n    key: \"panel_outside_chunked_array\",\n    value: value[1],\n    index: value[1]\n  }, chunkedTabs[value[0]][value[1]].content));\n}\n\nfunction color(data, theme) {\n  const lastNum = data[data.length - 1];\n  if (!lastNum)\n    return void 0;\n  if (lastNum >= 0.9)\n    return theme.palette.status.ok;\n  if (lastNum >= 0.5)\n    return theme.palette.status.warning;\n  return theme.palette.status.error;\n}\nfunction TrendLine(props) {\n  var _a;\n  const theme = useTheme();\n  if (!props.data)\n    return null;\n  return /* @__PURE__ */ React.createElement(Sparklines, {\n    width: 120,\n    height: 30,\n    min: 0,\n    max: 1,\n    ...props\n  }, props.title && /* @__PURE__ */ React.createElement(\"title\", null, props.title), /* @__PURE__ */ React.createElement(SparklinesLine, {\n    color: (_a = props.color) != null ? _a : color(props.data, theme)\n  }));\n}\n\nconst useStyles$8 = (props) => makeStyles(\n  (theme) => ({\n    container: {\n      width: \"100%\",\n      display: \"flex\",\n      flexDirection: \"row\",\n      flexWrap: \"wrap\",\n      justifyContent: \"flex-end\",\n      alignItems: \"center\",\n      marginBottom: theme.spacing(2),\n      textAlign: props.textAlign\n    },\n    leftItemsBox: {\n      flex: \"1 1 auto\",\n      minWidth: 0,\n      overflow: \"visible\"\n    },\n    rightItemsBox: {\n      flex: \"0 1 auto\",\n      display: \"flex\",\n      flexDirection: \"row\",\n      flexWrap: \"wrap\",\n      alignItems: \"center\",\n      marginLeft: theme.spacing(1),\n      minWidth: 0,\n      overflow: \"visible\"\n    },\n    description: {},\n    title: {\n      display: \"inline-flex\",\n      marginBottom: 0\n    }\n  }),\n  { name: \"BackstageContentHeader\" }\n);\nconst ContentHeaderTitle = ({\n  title = \"Unknown page\",\n  className\n}) => /* @__PURE__ */ React.createElement(Typography, {\n  variant: \"h4\",\n  component: \"h2\",\n  className,\n  \"data-testid\": \"header-title\"\n}, title);\nfunction ContentHeader(props) {\n  const {\n    description,\n    title,\n    titleComponent: TitleComponent = void 0,\n    children,\n    textAlign = \"left\"\n  } = props;\n  const classes = useStyles$8({ textAlign })();\n  const renderedTitle = TitleComponent ? TitleComponent : /* @__PURE__ */ React.createElement(ContentHeaderTitle, {\n    title,\n    className: classes.title\n  });\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(Helmet, {\n    title\n  }), /* @__PURE__ */ React.createElement(\"div\", {\n    className: classes.container\n  }, /* @__PURE__ */ React.createElement(\"div\", {\n    className: classes.leftItemsBox\n  }, renderedTitle, description && /* @__PURE__ */ React.createElement(Typography, {\n    className: classes.description,\n    variant: \"body2\"\n  }, description)), /* @__PURE__ */ React.createElement(\"div\", {\n    className: classes.rightItemsBox\n  }, children)));\n}\n\nconst useStyles$7 = makeStyles(\n  (theme) => ({\n    micDrop: {\n      maxWidth: \"60%\",\n      bottom: theme.spacing(2),\n      right: theme.spacing(2),\n      [theme.breakpoints.down(\"xs\")]: {\n        maxWidth: \"96%\",\n        bottom: \"unset\",\n        right: \"unset\",\n        margin: `${theme.spacing(10)}px auto ${theme.spacing(4)}px`\n      }\n    }\n  }),\n  { name: \"BackstageErrorPageMicDrop\" }\n);\nconst MicDrop = () => {\n  const classes = useStyles$7();\n  return /* @__PURE__ */ React.createElement(\"img\", {\n    src: MicDropSvgUrl,\n    className: classes.micDrop,\n    alt: \"Girl dropping mic from her hands\"\n  });\n};\n\nconst useStyles$6 = makeStyles(\n  (theme) => ({\n    container: {\n      padding: theme.spacing(8),\n      [theme.breakpoints.down(\"xs\")]: {\n        padding: theme.spacing(2)\n      }\n    },\n    title: {\n      paddingBottom: theme.spacing(5),\n      [theme.breakpoints.down(\"xs\")]: {\n        paddingBottom: theme.spacing(4),\n        fontSize: 32\n      }\n    },\n    subtitle: {\n      color: theme.palette.textSubtle\n    }\n  }),\n  { name: \"BackstageErrorPage\" }\n);\nfunction ErrorPage(props) {\n  const { status, statusMessage, additionalInfo, supportUrl } = props;\n  const classes = useStyles$6();\n  const navigate = useNavigate();\n  const support = useSupportConfig();\n  return /* @__PURE__ */ React.createElement(Grid, {\n    container: true,\n    spacing: 0,\n    className: classes.container\n  }, /* @__PURE__ */ React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    sm: 8,\n    md: 4\n  }, /* @__PURE__ */ React.createElement(Typography, {\n    \"data-testid\": \"error\",\n    variant: \"body1\",\n    className: classes.subtitle\n  }, \"ERROR \", status, \": \", statusMessage), /* @__PURE__ */ React.createElement(Typography, {\n    variant: \"body1\",\n    className: classes.subtitle\n  }, additionalInfo), /* @__PURE__ */ React.createElement(Typography, {\n    variant: \"h2\",\n    className: classes.title\n  }, \"Looks like someone dropped the mic!\"), /* @__PURE__ */ React.createElement(Typography, {\n    variant: \"h6\"\n  }, /* @__PURE__ */ React.createElement(Link, {\n    to: \"#\",\n    \"data-testid\": \"go-back-link\",\n    onClick: () => navigate(-1)\n  }, \"Go back\"), \"... or please\", \" \", /* @__PURE__ */ React.createElement(Link, {\n    to: supportUrl || support.url\n  }, \"contact support\"), \" if you think this is a bug.\")), /* @__PURE__ */ React.createElement(MicDrop, null));\n}\n\nconst ClickableText = withStyles(\n  {\n    root: {\n      textDecoration: \"underline\",\n      cursor: \"pointer\"\n    }\n  },\n  { name: \"BackstageBreadcrumbsClickableText\" }\n)(Typography);\nconst StyledBox = withStyles(\n  {\n    root: {\n      textDecoration: \"underline\",\n      color: \"inherit\"\n    }\n  },\n  { name: \"BackstageBreadcrumbsStyledBox\" }\n)(Box);\nfunction Breadcrumbs(props) {\n  const { children, ...restProps } = props;\n  const [anchorEl, setAnchorEl] = React.useState(\n    null\n  );\n  const childrenArray = React.Children.toArray(children);\n  const [firstPage, secondPage, ...expandablePages] = childrenArray;\n  const currentPage = expandablePages.length ? expandablePages.pop() : childrenArray[childrenArray.length - 1];\n  const hasHiddenBreadcrumbs = childrenArray.length > 3;\n  const handleClick = (event) => {\n    setAnchorEl(event.currentTarget);\n  };\n  const handleClose = () => {\n    setAnchorEl(null);\n  };\n  const open = Boolean(anchorEl);\n  return /* @__PURE__ */ React.createElement(Fragment, null, /* @__PURE__ */ React.createElement(MaterialBreadcrumbs, {\n    \"aria-label\": \"breadcrumb\",\n    ...restProps\n  }, childrenArray.length > 1 && /* @__PURE__ */ React.createElement(StyledBox, {\n    clone: true\n  }, firstPage), childrenArray.length > 2 && /* @__PURE__ */ React.createElement(StyledBox, {\n    clone: true\n  }, secondPage), hasHiddenBreadcrumbs && /* @__PURE__ */ React.createElement(ClickableText, {\n    onClick: handleClick\n  }, \"...\"), /* @__PURE__ */ React.createElement(Box, {\n    style: { fontStyle: \"italic\" }\n  }, currentPage)), /* @__PURE__ */ React.createElement(Popover, {\n    open,\n    anchorEl,\n    onClose: handleClose,\n    anchorOrigin: {\n      vertical: \"bottom\",\n      horizontal: \"left\"\n    },\n    transformOrigin: {\n      vertical: \"top\",\n      horizontal: \"left\"\n    }\n  }, /* @__PURE__ */ React.createElement(List, null, expandablePages.map((pageLink, index) => /* @__PURE__ */ React.createElement(ListItem, {\n    key: index,\n    button: true\n  }, /* @__PURE__ */ React.createElement(StyledBox, {\n    clone: true\n  }, pageLink))))));\n}\n\nconst useStyles$5 = makeStyles(\n  (theme) => ({\n    header: {\n      gridArea: \"pageHeader\",\n      padding: theme.spacing(3),\n      width: \"100%\",\n      boxShadow: theme.shadows[4],\n      position: \"relative\",\n      zIndex: 100,\n      display: \"flex\",\n      flexDirection: \"row\",\n      alignItems: \"center\",\n      backgroundImage: theme.page.backgroundImage,\n      backgroundPosition: \"center\",\n      backgroundSize: \"cover\",\n      [theme.breakpoints.down(\"sm\")]: {\n        flexWrap: \"wrap\"\n      }\n    },\n    leftItemsBox: {\n      maxWidth: \"100%\",\n      flexGrow: 1\n    },\n    rightItemsBox: {\n      width: \"auto\",\n      alignItems: \"center\"\n    },\n    title: {\n      color: theme.page.fontColor,\n      wordBreak: \"break-word\",\n      fontSize: theme.typography.h3.fontSize,\n      marginBottom: 0\n    },\n    subtitle: {\n      color: theme.page.fontColor,\n      opacity: 0.8,\n      display: \"inline-block\",\n      marginTop: theme.spacing(1),\n      maxWidth: \"75ch\"\n    },\n    type: {\n      textTransform: \"uppercase\",\n      fontSize: 11,\n      opacity: 0.8,\n      marginBottom: theme.spacing(1),\n      color: theme.page.fontColor\n    },\n    breadcrumb: {\n      color: theme.page.fontColor\n    },\n    breadcrumbType: {\n      fontSize: \"inherit\",\n      opacity: 0.7,\n      marginRight: -theme.spacing(0.3),\n      marginBottom: theme.spacing(0.3)\n    },\n    breadcrumbTitle: {\n      fontSize: \"inherit\",\n      marginLeft: -theme.spacing(0.3),\n      marginBottom: theme.spacing(0.3)\n    }\n  }),\n  { name: \"BackstageHeader\" }\n);\nconst TypeFragment = ({\n  type,\n  typeLink,\n  classes,\n  pageTitle\n}) => {\n  if (!type) {\n    return null;\n  }\n  if (!typeLink) {\n    return /* @__PURE__ */ React.createElement(Typography, {\n      className: classes.type\n    }, type);\n  }\n  return /* @__PURE__ */ React.createElement(Breadcrumbs, {\n    className: classes.breadcrumb\n  }, /* @__PURE__ */ React.createElement(Link, {\n    to: typeLink\n  }, type), /* @__PURE__ */ React.createElement(Typography, null, pageTitle));\n};\nconst TitleFragment = ({ pageTitle, classes, tooltip }) => {\n  const FinalTitle = /* @__PURE__ */ React.createElement(Typography, {\n    className: classes.title,\n    variant: \"h1\"\n  }, pageTitle);\n  if (!tooltip) {\n    return FinalTitle;\n  }\n  return /* @__PURE__ */ React.createElement(Tooltip, {\n    title: tooltip,\n    placement: \"top-start\"\n  }, FinalTitle);\n};\nconst SubtitleFragment = ({ classes, subtitle }) => {\n  if (!subtitle) {\n    return null;\n  }\n  if (typeof subtitle !== \"string\") {\n    return /* @__PURE__ */ React.createElement(React.Fragment, null, subtitle);\n  }\n  return /* @__PURE__ */ React.createElement(Typography, {\n    className: classes.subtitle,\n    variant: \"subtitle2\",\n    component: \"span\"\n  }, subtitle);\n};\nfunction Header(props) {\n  const {\n    children,\n    pageTitleOverride,\n    style,\n    subtitle,\n    title,\n    tooltip,\n    type,\n    typeLink\n  } = props;\n  const classes = useStyles$5();\n  const configApi = useApi(configApiRef);\n  const appTitle = configApi.getOptionalString(\"app.title\") || \"Backstage\";\n  const documentTitle = pageTitleOverride || title;\n  const pageTitle = title || pageTitleOverride;\n  const titleTemplate = `${documentTitle} | %s | ${appTitle}`;\n  const defaultTitle = `${documentTitle} | ${appTitle}`;\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(Helmet, {\n    titleTemplate,\n    defaultTitle\n  }), /* @__PURE__ */ React.createElement(\"header\", {\n    style,\n    className: classes.header\n  }, /* @__PURE__ */ React.createElement(Box, {\n    className: classes.leftItemsBox\n  }, /* @__PURE__ */ React.createElement(TypeFragment, {\n    classes,\n    type,\n    typeLink,\n    pageTitle\n  }), /* @__PURE__ */ React.createElement(TitleFragment, {\n    classes,\n    pageTitle,\n    tooltip\n  }), /* @__PURE__ */ React.createElement(SubtitleFragment, {\n    classes,\n    subtitle\n  })), /* @__PURE__ */ React.createElement(Grid, {\n    container: true,\n    className: classes.rightItemsBox,\n    spacing: 4\n  }, children)));\n}\n\nconst ActionItem = ({\n  label,\n  secondaryLabel,\n  icon,\n  disabled = false,\n  onClick\n}) => {\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(ListItem, {\n    \"data-testid\": \"header-action-item\",\n    disabled,\n    button: true,\n    onClick: (event) => {\n      if (onClick) {\n        onClick(event);\n      }\n    }\n  }, icon && /* @__PURE__ */ React.createElement(ListItemIcon, null, icon), /* @__PURE__ */ React.createElement(ListItemText, {\n    primary: label,\n    secondary: secondaryLabel\n  })));\n};\nfunction HeaderActionMenu(props) {\n  const { actionItems } = props;\n  const [open, setOpen] = React.useState(false);\n  const anchorElRef = React.useRef(null);\n  return /* @__PURE__ */ React.createElement(Fragment, null, /* @__PURE__ */ React.createElement(IconButton, {\n    onClick: () => setOpen(true),\n    \"data-testid\": \"header-action-menu\",\n    ref: anchorElRef,\n    style: {\n      color: \"white\",\n      height: 56,\n      width: 56,\n      marginRight: -4,\n      padding: 0\n    }\n  }, /* @__PURE__ */ React.createElement(MoreVert, null)), /* @__PURE__ */ React.createElement(Popover, {\n    open,\n    anchorEl: anchorElRef.current,\n    anchorOrigin: { horizontal: \"right\", vertical: \"bottom\" },\n    transformOrigin: { horizontal: \"right\", vertical: \"top\" },\n    onClose: () => setOpen(false)\n  }, /* @__PURE__ */ React.createElement(List, null, actionItems.map((actionItem, i) => {\n    return /* @__PURE__ */ React.createElement(ActionItem, {\n      key: `header-action-menu-${i}`,\n      ...actionItem\n    });\n  }))));\n}\n\nconst useStyles$4 = makeStyles(\n  (theme) => ({\n    root: {\n      textAlign: \"left\"\n    },\n    label: {\n      color: theme.palette.common.white,\n      fontWeight: \"bold\",\n      letterSpacing: 0,\n      fontSize: theme.typography.fontSize,\n      marginBottom: theme.spacing(1) / 2,\n      lineHeight: 1\n    },\n    value: {\n      color: \"rgba(255, 255, 255, 0.8)\",\n      fontSize: theme.typography.fontSize,\n      lineHeight: 1\n    }\n  }),\n  { name: \"BackstageHeaderLabel\" }\n);\nconst HeaderLabelContent = ({ value, className }) => /* @__PURE__ */ React.createElement(Typography, {\n  className\n}, value);\nfunction HeaderLabel(props) {\n  const { label, value, url } = props;\n  const classes = useStyles$4();\n  const content = /* @__PURE__ */ React.createElement(HeaderLabelContent, {\n    className: classes.value,\n    value: value || \"<Unknown>\"\n  });\n  return /* @__PURE__ */ React.createElement(Grid, {\n    item: true\n  }, /* @__PURE__ */ React.createElement(\"span\", {\n    className: classes.root\n  }, /* @__PURE__ */ React.createElement(Typography, {\n    className: classes.label\n  }, label), url ? /* @__PURE__ */ React.createElement(Link, {\n    to: url\n  }, content) : content));\n}\n\nconst timeFormat = {\n  hour: \"2-digit\",\n  minute: \"2-digit\"\n};\nfunction getTimes(configApi) {\n  const d = new Date();\n  const lang = window.navigator.language;\n  const clocks = [];\n  if (!configApi.has(\"homepage.clocks\")) {\n    return clocks;\n  }\n  const clockConfigs = configApi.getConfigArray(\"homepage.clocks\");\n  for (const clock of clockConfigs) {\n    if (clock.has(\"label\") && clock.has(\"timezone\")) {\n      let label = clock.getString(\"label\");\n      const options = {\n        timeZone: clock.getString(\"timezone\"),\n        ...timeFormat\n      };\n      try {\n        new Date().toLocaleString(lang, options);\n      } catch (e) {\n        console.warn(\n          `The timezone ${options.timeZone} is invalid. Defaulting to GMT`\n        );\n        options.timeZone = \"GMT\";\n        label = \"GMT\";\n      }\n      const time = d.toLocaleTimeString(lang, options);\n      clocks.push({ time, label });\n    }\n  }\n  return clocks;\n}\nfunction HomepageTimer(_props) {\n  const configApi = useApi(configApiRef);\n  const defaultTimes = [];\n  const [clocks, setTimes] = React.useState(defaultTimes);\n  React.useEffect(() => {\n    setTimes(getTimes(configApi));\n    const intervalId = setInterval(() => {\n      setTimes(getTimes(configApi));\n    }, 1e3);\n    return () => {\n      clearInterval(intervalId);\n    };\n  }, [configApi]);\n  if (clocks.length !== 0) {\n    return /* @__PURE__ */ React.createElement(React.Fragment, null, clocks.map((clock) => /* @__PURE__ */ React.createElement(HeaderLabel, {\n      label: clock.label,\n      value: clock.time,\n      key: clock.label\n    })));\n  }\n  return null;\n}\n\nconst styles$1 = (theme) => createStyles({\n  root: {\n    color: theme.palette.common.white,\n    padding: theme.spacing(2, 2, 3),\n    backgroundImage: theme.getPageTheme({ themeId: \"card\" }).backgroundImage,\n    backgroundPosition: 0,\n    backgroundSize: \"inherit\"\n  }\n});\nconst useStyles$3 = makeStyles(styles$1, { name: \"BackstageItemCardHeader\" });\nfunction ItemCardHeader(props) {\n  const { title, subtitle, children } = props;\n  const classes = useStyles$3(props);\n  return /* @__PURE__ */ React.createElement(\"div\", {\n    className: classes.root\n  }, subtitle && /* @__PURE__ */ React.createElement(Typography, {\n    variant: \"subtitle2\",\n    component: \"h3\"\n  }, subtitle), title && /* @__PURE__ */ React.createElement(Typography, {\n    variant: \"h6\",\n    component: \"h4\"\n  }, title), children);\n}\n\nfunction ItemCard(props) {\n  const { description, tags, title, type, subtitle, label, onClick, href } = props;\n  return /* @__PURE__ */ React.createElement(Card, null, /* @__PURE__ */ React.createElement(CardMedia, null, /* @__PURE__ */ React.createElement(ItemCardHeader, {\n    title,\n    subtitle: subtitle || type\n  })), /* @__PURE__ */ React.createElement(CardContent, null, (tags == null ? void 0 : tags.length) ? /* @__PURE__ */ React.createElement(Box, null, tags.map((tag, i) => /* @__PURE__ */ React.createElement(Chip, {\n    size: \"small\",\n    label: tag,\n    key: i\n  }))) : null, description), /* @__PURE__ */ React.createElement(CardActions, null, !href && /* @__PURE__ */ React.createElement(Button, {\n    to: \"#\",\n    onClick,\n    color: \"primary\"\n  }, label), href && /* @__PURE__ */ React.createElement(Button, {\n    to: href,\n    color: \"primary\"\n  }, label)));\n}\n\nconst styles = (theme) => createStyles({\n  root: {\n    display: \"grid\",\n    gridTemplateColumns: \"repeat(auto-fill, minmax(22em, 1fr))\",\n    gridAutoRows: \"1fr\",\n    gridGap: theme.spacing(2)\n  }\n});\nconst useStyles$2 = makeStyles(styles, { name: \"BackstageItemCardGrid\" });\nfunction ItemCardGrid(props) {\n  const { children, ...otherProps } = props;\n  const classes = useStyles$2(otherProps);\n  return /* @__PURE__ */ React.createElement(\"div\", {\n    className: classes.root,\n    ...otherProps\n  }, children);\n}\n\nconst useStyles$1 = makeStyles(\n  () => ({\n    root: ({ isMobile }) => ({\n      display: \"grid\",\n      gridTemplateAreas: \"'pageHeader pageHeader pageHeader' 'pageSubheader pageSubheader pageSubheader' 'pageNav pageContent pageSidebar'\",\n      gridTemplateRows: \"max-content auto 1fr\",\n      gridTemplateColumns: \"auto 1fr auto\",\n      height: isMobile ? \"100%\" : \"100vh\",\n      overflowY: \"auto\"\n    })\n  }),\n  { name: \"BackstagePage\" }\n);\nfunction Page(props) {\n  const { themeId, children } = props;\n  const { isMobile } = useSidebarPinState();\n  const classes = useStyles$1({ isMobile });\n  return /* @__PURE__ */ React.createElement(ThemeProvider, {\n    theme: (baseTheme) => ({\n      ...baseTheme,\n      page: baseTheme.getPageTheme({ themeId })\n    })\n  }, /* @__PURE__ */ React.createElement(\"main\", {\n    className: classes.root\n  }, children));\n}\n\nfunction PageWithHeader(props) {\n  const { themeId, children, ...restProps } = props;\n  return /* @__PURE__ */ React.createElement(Page, {\n    themeId\n  }, /* @__PURE__ */ React.createElement(Header, {\n    ...restProps\n  }), children);\n}\n\nconst proxiedSessionSchema = z.object({\n  providerInfo: z.object({}).catchall(z.unknown()).optional(),\n  profile: z.object({\n    email: z.string().optional(),\n    displayName: z.string().optional(),\n    picture: z.string().optional()\n  }),\n  backstageIdentity: z.object({\n    token: z.string(),\n    identity: z.object({\n      type: z.literal(\"user\"),\n      userEntityRef: z.string(),\n      ownershipEntityRefs: z.array(z.string())\n    })\n  })\n});\n\nconst DEFAULTS = {\n  defaultTokenExpiryMillis: 5 * 60 * 1e3,\n  tokenExpiryMarginMillis: 5 * 60 * 1e3\n};\nfunction tokenToExpiry(jwtToken) {\n  const fallback = new Date(Date.now() + DEFAULTS.defaultTokenExpiryMillis);\n  if (!jwtToken) {\n    return fallback;\n  }\n  const [_header, rawPayload, _signature] = jwtToken.split(\".\");\n  const payload = JSON.parse(atob(rawPayload));\n  if (typeof payload.exp !== \"number\") {\n    return fallback;\n  }\n  return new Date(payload.exp * 1e3 - DEFAULTS.tokenExpiryMarginMillis);\n}\nclass ProxiedSignInIdentity {\n  constructor(options) {\n    this.options = options;\n    this.abortController = new AbortController();\n    this.state = { type: \"empty\" };\n  }\n  async start() {\n    await this.getSessionAsync();\n  }\n  getUserId() {\n    const { backstageIdentity } = this.getSessionSync();\n    const ref = backstageIdentity.identity.userEntityRef;\n    const match = /^([^:/]+:)?([^:/]+\\/)?([^:/]+)$/.exec(ref);\n    if (!match) {\n      throw new TypeError(`Invalid user entity reference \"${ref}\"`);\n    }\n    return match[3];\n  }\n  async getIdToken() {\n    const session = await this.getSessionAsync();\n    return session.backstageIdentity.token;\n  }\n  getProfile() {\n    const session = this.getSessionSync();\n    return session.profile;\n  }\n  async getProfileInfo() {\n    const session = await this.getSessionAsync();\n    return session.profile;\n  }\n  async getBackstageIdentity() {\n    const session = await this.getSessionAsync();\n    return session.backstageIdentity.identity;\n  }\n  async getCredentials() {\n    const session = await this.getSessionAsync();\n    return {\n      token: session.backstageIdentity.token\n    };\n  }\n  async signOut() {\n    this.abortController.abort();\n  }\n  getSessionSync() {\n    if (this.state.type === \"active\") {\n      return this.state.session;\n    } else if (this.state.type === \"fetching\" && this.state.previous) {\n      return this.state.previous;\n    }\n    throw new Error(\"No session available. Try reloading your browser page.\");\n  }\n  async getSessionAsync() {\n    if (this.state.type === \"fetching\") {\n      return this.state.promise;\n    } else if (this.state.type === \"active\" && new Date() < this.state.expiresAt) {\n      return this.state.session;\n    }\n    const previous = this.state.type === \"active\" ? this.state.session : void 0;\n    const promise = this.fetchSession().then(\n      (session) => {\n        this.state = {\n          type: \"active\",\n          session,\n          expiresAt: tokenToExpiry(session.backstageIdentity.token)\n        };\n        return session;\n      },\n      (error) => {\n        this.state = {\n          type: \"failed\",\n          error\n        };\n        throw error;\n      }\n    );\n    this.state = {\n      type: \"fetching\",\n      promise,\n      previous\n    };\n    return promise;\n  }\n  async fetchSession() {\n    const baseUrl = await this.options.discoveryApi.getBaseUrl(\"auth\");\n    const response = await fetch(\n      `${baseUrl}/${this.options.provider}/refresh`,\n      {\n        signal: this.abortController.signal,\n        headers: { \"x-requested-with\": \"XMLHttpRequest\" },\n        credentials: \"include\"\n      }\n    );\n    if (!response.ok) {\n      throw await ResponseError.fromResponse(response);\n    }\n    return proxiedSessionSchema.parse(await response.json());\n  }\n}\n\nconst ProxiedSignInPage = (props) => {\n  const discoveryApi = useApi(discoveryApiRef);\n  const [{ status, error }, { execute }] = useAsync(async () => {\n    const identity = new ProxiedSignInIdentity({\n      provider: props.provider,\n      discoveryApi\n    });\n    await identity.start();\n    props.onSignInSuccess(identity);\n  });\n  useMountEffect(execute);\n  if (status === \"loading\") {\n    return /* @__PURE__ */ React.createElement(Progress, null);\n  } else if (error) {\n    return /* @__PURE__ */ React.createElement(ErrorPanel, {\n      title: \"You do not appear to be signed in. Please try reloading the browser page.\",\n      error\n    });\n  }\n  return null;\n};\n\nclass GuestUserIdentity {\n  getUserId() {\n    return \"guest\";\n  }\n  async getIdToken() {\n    return void 0;\n  }\n  getProfile() {\n    return {\n      email: \"guest@example.com\",\n      displayName: \"Guest\"\n    };\n  }\n  async getProfileInfo() {\n    return {\n      email: \"guest@example.com\",\n      displayName: \"Guest\"\n    };\n  }\n  async getBackstageIdentity() {\n    const userEntityRef = `user:default/guest`;\n    return {\n      type: \"user\",\n      userEntityRef,\n      ownershipEntityRefs: [userEntityRef]\n    };\n  }\n  async getCredentials() {\n    return {};\n  }\n  async signOut() {\n  }\n}\n\nfunction parseJwtPayload(token) {\n  const [_header, payload, _signature] = token.split(\".\");\n  return JSON.parse(atob(payload));\n}\nclass LegacyUserIdentity {\n  constructor(result) {\n    this.result = result;\n  }\n  getUserId() {\n    return this.result.userId;\n  }\n  static fromResult(result) {\n    return new LegacyUserIdentity(result);\n  }\n  async getIdToken() {\n    var _a, _b;\n    return (_b = (_a = this.result).getIdToken) == null ? void 0 : _b.call(_a);\n  }\n  getProfile() {\n    return this.result.profile;\n  }\n  async getProfileInfo() {\n    return this.result.profile;\n  }\n  async getBackstageIdentity() {\n    const token = await this.getIdToken();\n    if (!token) {\n      const userEntityRef = `user:default/${this.getUserId()}`;\n      return {\n        type: \"user\",\n        userEntityRef,\n        ownershipEntityRefs: [userEntityRef]\n      };\n    }\n    const { sub, ent } = parseJwtPayload(token);\n    return {\n      type: \"user\",\n      userEntityRef: sub,\n      ownershipEntityRefs: ent != null ? ent : []\n    };\n  }\n  async getCredentials() {\n    var _a, _b;\n    const token = await ((_b = (_a = this.result).getIdToken) == null ? void 0 : _b.call(_a));\n    return { token };\n  }\n  async signOut() {\n    var _a, _b;\n    return (_b = (_a = this.result).signOut) == null ? void 0 : _b.call(_a);\n  }\n}\n\nclass UserIdentity {\n  constructor(identity, authApi, profile) {\n    this.identity = identity;\n    this.authApi = authApi;\n    this.profile = profile;\n  }\n  static createGuest() {\n    return new GuestUserIdentity();\n  }\n  static fromLegacy(result) {\n    return LegacyUserIdentity.fromResult(result);\n  }\n  static create(options) {\n    return new UserIdentity(options.identity, options.authApi, options.profile);\n  }\n  getUserId() {\n    const ref = this.identity.userEntityRef;\n    const match = /^([^:/]+:)?([^:/]+\\/)?([^:/]+)$/.exec(ref);\n    if (!match) {\n      throw new TypeError(`Invalid user entity reference \"${ref}\"`);\n    }\n    return match[3];\n  }\n  async getIdToken() {\n    const identity = await this.authApi.getBackstageIdentity();\n    return identity.token;\n  }\n  getProfile() {\n    if (!this.profile) {\n      throw new Error(\n        \"The identity API does not implement synchronous profile fetching, use getProfileInfo() instead\"\n      );\n    }\n    return this.profile;\n  }\n  async getProfileInfo() {\n    if (this.profilePromise) {\n      return await this.profilePromise;\n    }\n    try {\n      this.profilePromise = this.authApi.getProfile();\n      return await this.profilePromise;\n    } catch (ex) {\n      this.profilePromise = void 0;\n      throw ex;\n    }\n  }\n  async getBackstageIdentity() {\n    return this.identity;\n  }\n  async getCredentials() {\n    const identity = await this.authApi.getBackstageIdentity();\n    return { token: identity.token };\n  }\n  async signOut() {\n    return this.authApi.signOut();\n  }\n}\n\nconst useStyles = makeStyles(\n  {\n    container: {\n      padding: 0,\n      listStyle: \"none\"\n    },\n    item: {\n      display: \"flex\",\n      flexDirection: \"column\",\n      width: \"100%\",\n      maxWidth: \"400px\",\n      margin: 0,\n      padding: 0\n    }\n  },\n  { name: \"BackstageSignInPage\" }\n);\nconst GridItem = ({ children }) => {\n  const classes = useStyles();\n  return /* @__PURE__ */ React.createElement(Grid, {\n    component: \"li\",\n    item: true,\n    classes\n  }, children);\n};\n\nconst Component$2 = ({ config, onSignInSuccess }) => {\n  const { apiRef, title, message } = config;\n  const authApi = useApi(apiRef);\n  const errorApi = useApi(errorApiRef);\n  const handleLogin = async () => {\n    try {\n      const identityResponse = await authApi.getBackstageIdentity({\n        instantPopup: true\n      });\n      if (!identityResponse) {\n        throw new Error(\n          `The ${title} provider is not configured to support sign-in`\n        );\n      }\n      const profile = await authApi.getProfile();\n      onSignInSuccess(\n        UserIdentity.create({\n          identity: identityResponse.identity,\n          profile,\n          authApi\n        })\n      );\n    } catch (error) {\n      errorApi.post(new ForwardedError(\"Login failed\", error));\n    }\n  };\n  return /* @__PURE__ */ React.createElement(GridItem, null, /* @__PURE__ */ React.createElement(InfoCard, {\n    variant: \"fullHeight\",\n    title,\n    actions: /* @__PURE__ */ React.createElement(Button$1, {\n      color: \"primary\",\n      variant: \"outlined\",\n      onClick: handleLogin\n    }, \"Sign In\")\n  }, /* @__PURE__ */ React.createElement(Typography, {\n    variant: \"body1\"\n  }, message)));\n};\nconst loader$2 = async (apis, apiRef) => {\n  const authApi = apis.get(apiRef);\n  const identityResponse = await authApi.getBackstageIdentity({\n    optional: true\n  });\n  if (!identityResponse) {\n    return void 0;\n  }\n  const profile = await authApi.getProfile();\n  return UserIdentity.create({\n    identity: identityResponse.identity,\n    profile,\n    authApi\n  });\n};\nconst commonProvider = { Component: Component$2, loader: loader$2 };\n\nconst Component$1 = ({ onSignInSuccess }) => /* @__PURE__ */ React.createElement(GridItem, null, /* @__PURE__ */ React.createElement(InfoCard, {\n  title: \"Guest\",\n  variant: \"fullHeight\",\n  actions: /* @__PURE__ */ React.createElement(Button$1, {\n    color: \"primary\",\n    variant: \"outlined\",\n    onClick: () => onSignInSuccess(new GuestUserIdentity())\n  }, \"Enter\")\n}, /* @__PURE__ */ React.createElement(Typography, {\n  variant: \"body1\"\n}, \"Enter as a Guest User.\", /* @__PURE__ */ React.createElement(\"br\", null), \"You will not have a verified identity,\", /* @__PURE__ */ React.createElement(\"br\", null), \"meaning some features might be unavailable.\")));\nconst loader$1 = async () => {\n  return new GuestUserIdentity();\n};\nconst guestProvider = { Component: Component$1, loader: loader$1 };\n\nconst ID_TOKEN_REGEX = /^[a-z0-9_\\-]+\\.[a-z0-9_\\-]+\\.[a-z0-9_\\-]+$/i;\nconst useFormStyles = makeStyles(\n  (theme) => ({\n    form: {\n      display: \"flex\",\n      flexFlow: \"column nowrap\"\n    },\n    button: {\n      alignSelf: \"center\",\n      marginTop: theme.spacing(2)\n    }\n  }),\n  { name: \"BackstageCustomProvider\" }\n);\nconst asInputRef = (renderResult) => {\n  const { ref, ...rest } = renderResult;\n  return {\n    inputRef: ref,\n    ...rest\n  };\n};\nconst Component = ({ onSignInSuccess }) => {\n  const classes = useFormStyles();\n  const { register, handleSubmit, formState } = useForm({\n    mode: \"onChange\"\n  });\n  const { errors } = formState;\n  const handleResult = ({ userId }) => {\n    onSignInSuccess(\n      UserIdentity.fromLegacy({\n        userId,\n        profile: {\n          email: `${userId}@example.com`\n        }\n      })\n    );\n  };\n  return /* @__PURE__ */ React.createElement(GridItem, null, /* @__PURE__ */ React.createElement(InfoCard, {\n    title: \"Custom User\",\n    variant: \"fullHeight\"\n  }, /* @__PURE__ */ React.createElement(Typography, {\n    variant: \"body1\"\n  }, \"Enter your own User ID and credentials.\", /* @__PURE__ */ React.createElement(\"br\", null), \"This selection will not be stored.\"), /* @__PURE__ */ React.createElement(\"form\", {\n    className: classes.form,\n    onSubmit: handleSubmit(handleResult)\n  }, /* @__PURE__ */ React.createElement(FormControl, null, /* @__PURE__ */ React.createElement(TextField, {\n    ...asInputRef(register(\"userId\", { required: true })),\n    label: \"User ID\",\n    margin: \"normal\",\n    error: Boolean(errors.userId)\n  }), errors.userId && /* @__PURE__ */ React.createElement(FormHelperText, {\n    error: true\n  }, errors.userId.message)), /* @__PURE__ */ React.createElement(FormControl, null, /* @__PURE__ */ React.createElement(TextField, {\n    ...asInputRef(\n      register(\"idToken\", {\n        required: false,\n        validate: (token) => !token || ID_TOKEN_REGEX.test(token) || \"Token is not a valid OpenID Connect JWT Token\"\n      })\n    ),\n    label: \"ID Token (optional)\",\n    margin: \"normal\",\n    autoComplete: \"off\",\n    error: Boolean(errors.idToken)\n  }), errors.idToken && /* @__PURE__ */ React.createElement(FormHelperText, {\n    error: true\n  }, errors.idToken.message)), /* @__PURE__ */ React.createElement(Button$1, {\n    type: \"submit\",\n    color: \"primary\",\n    variant: \"outlined\",\n    className: classes.button,\n    disabled: !(formState == null ? void 0 : formState.isDirty) || !isEmpty(errors)\n  }, \"Continue\"))));\n};\nconst loader = async () => void 0;\nconst customProvider = { Component, loader };\n\nclass IdentityApiSignOutProxy {\n  constructor(config) {\n    this.config = config;\n  }\n  static from(config) {\n    return new IdentityApiSignOutProxy(config);\n  }\n  getUserId() {\n    if (!this.config.identityApi.getUserId) {\n      throw new Error(`SignOutProxy IdentityApi.getUserId is not implemented`);\n    }\n    return this.config.identityApi.getUserId();\n  }\n  getIdToken() {\n    if (!this.config.identityApi.getIdToken) {\n      throw new Error(`SignOutProxy IdentityApi.getIdToken is not implemented`);\n    }\n    return this.config.identityApi.getIdToken();\n  }\n  getProfile() {\n    if (!this.config.identityApi.getProfile) {\n      throw new Error(`SignOutProxy IdentityApi.getProfile is not implemented`);\n    }\n    return this.config.identityApi.getProfile();\n  }\n  getProfileInfo() {\n    return this.config.identityApi.getProfileInfo();\n  }\n  getBackstageIdentity() {\n    return this.config.identityApi.getBackstageIdentity();\n  }\n  getCredentials() {\n    return this.config.identityApi.getCredentials();\n  }\n  signOut() {\n    return this.config.signOut();\n  }\n}\n\nconst PROVIDER_STORAGE_KEY = \"@backstage/core:SignInPage:provider\";\nconst signInProviders = {\n  guest: guestProvider,\n  custom: customProvider,\n  common: commonProvider\n};\nfunction validateIDs(id, providers) {\n  if (id in providers)\n    throw new Error(\n      `\"${id}\" ID is duplicated. IDs of identity providers have to be unique.`\n    );\n}\nfunction getSignInProviders(identityProviders) {\n  const providers = identityProviders.reduce(\n    (acc, config) => {\n      if (typeof config === \"string\") {\n        validateIDs(config, acc);\n        acc[config] = { components: signInProviders[config], id: config };\n        return acc;\n      }\n      const { id } = config;\n      validateIDs(id, acc);\n      acc[id] = { components: signInProviders.common, id, config };\n      return acc;\n    },\n    {}\n  );\n  return providers;\n}\nconst useSignInProviders = (providers, onSignInSuccess) => {\n  const errorApi = useApi(errorApiRef);\n  const apiHolder = useApiHolder();\n  const [loading, setLoading] = useState(true);\n  const handleWrappedResult = useCallback(\n    (identityApi) => {\n      onSignInSuccess(\n        IdentityApiSignOutProxy.from({\n          identityApi,\n          signOut: async () => {\n            var _a;\n            localStorage.removeItem(PROVIDER_STORAGE_KEY);\n            await ((_a = identityApi.signOut) == null ? void 0 : _a.call(identityApi));\n          }\n        })\n      );\n    },\n    [onSignInSuccess]\n  );\n  useLayoutEffect(() => {\n    var _a;\n    if (!loading) {\n      return void 0;\n    }\n    const selectedProviderId = localStorage.getItem(\n      PROVIDER_STORAGE_KEY\n    );\n    if (selectedProviderId === null) {\n      setLoading(false);\n      return void 0;\n    }\n    const provider = providers[selectedProviderId];\n    if (!provider) {\n      setLoading(false);\n      return void 0;\n    }\n    let didCancel = false;\n    provider.components.loader(apiHolder, (_a = provider.config) == null ? void 0 : _a.apiRef).then((result) => {\n      if (didCancel) {\n        return;\n      }\n      if (result) {\n        handleWrappedResult(result);\n      } else {\n        setLoading(false);\n      }\n    }).catch((error) => {\n      if (didCancel) {\n        return;\n      }\n      localStorage.removeItem(PROVIDER_STORAGE_KEY);\n      errorApi.post(error);\n      setLoading(false);\n    });\n    return () => {\n      didCancel = true;\n    };\n  }, [\n    loading,\n    errorApi,\n    onSignInSuccess,\n    apiHolder,\n    providers,\n    handleWrappedResult\n  ]);\n  const elements = useMemo(\n    () => Object.keys(providers).map((key) => {\n      const provider = providers[key];\n      const { Component } = provider.components;\n      const handleSignInSuccess = (result) => {\n        localStorage.setItem(PROVIDER_STORAGE_KEY, provider.id);\n        handleWrappedResult(result);\n      };\n      return /* @__PURE__ */ React.createElement(Component, {\n        key: provider.id,\n        config: provider.config,\n        onSignInSuccess: handleSignInSuccess\n      });\n    }),\n    [providers, handleWrappedResult]\n  );\n  return [loading, elements];\n};\n\nconst MultiSignInPage = ({\n  onSignInSuccess,\n  providers = [],\n  title,\n  align = \"left\"\n}) => {\n  const configApi = useApi(configApiRef);\n  const classes = useStyles();\n  const signInProviders = getSignInProviders(providers);\n  const [loading, providerElements] = useSignInProviders(\n    signInProviders,\n    onSignInSuccess\n  );\n  if (loading) {\n    return /* @__PURE__ */ React.createElement(Progress, null);\n  }\n  return /* @__PURE__ */ React.createElement(Page, {\n    themeId: \"home\"\n  }, /* @__PURE__ */ React.createElement(Header, {\n    title: configApi.getString(\"app.title\")\n  }), /* @__PURE__ */ React.createElement(Content, null, title && /* @__PURE__ */ React.createElement(ContentHeader, {\n    title,\n    textAlign: align\n  }), /* @__PURE__ */ React.createElement(Grid, {\n    container: true,\n    justifyContent: align === \"center\" ? align : \"flex-start\",\n    spacing: 2,\n    component: \"ul\",\n    classes\n  }, providerElements)));\n};\nconst SingleSignInPage = ({\n  provider,\n  auto,\n  onSignInSuccess\n}) => {\n  const classes = useStyles();\n  const authApi = useApi(provider.apiRef);\n  const configApi = useApi(configApiRef);\n  const [error, setError] = useState();\n  const [showLoginPage, setShowLoginPage] = useState(false);\n  const login = async ({ checkExisting, showPopup }) => {\n    try {\n      let identityResponse;\n      if (checkExisting) {\n        identityResponse = await authApi.getBackstageIdentity({\n          optional: true\n        });\n      }\n      if (!identityResponse && (showPopup || auto)) {\n        setShowLoginPage(true);\n        identityResponse = await authApi.getBackstageIdentity({\n          instantPopup: true\n        });\n        if (!identityResponse) {\n          throw new Error(\n            `The ${provider.title} provider is not configured to support sign-in`\n          );\n        }\n      }\n      if (!identityResponse) {\n        setShowLoginPage(true);\n        return;\n      }\n      const profile = await authApi.getProfile();\n      onSignInSuccess(\n        UserIdentity.create({\n          identity: identityResponse.identity,\n          authApi,\n          profile\n        })\n      );\n    } catch (err) {\n      setError(err);\n      setShowLoginPage(true);\n    }\n  };\n  useMountEffect(() => login({ checkExisting: true }));\n  return showLoginPage ? /* @__PURE__ */ React.createElement(Page, {\n    themeId: \"home\"\n  }, /* @__PURE__ */ React.createElement(Header, {\n    title: configApi.getString(\"app.title\")\n  }), /* @__PURE__ */ React.createElement(Content, null, /* @__PURE__ */ React.createElement(Grid, {\n    container: true,\n    justifyContent: \"center\",\n    spacing: 2,\n    component: \"ul\",\n    classes\n  }, /* @__PURE__ */ React.createElement(GridItem, null, /* @__PURE__ */ React.createElement(InfoCard, {\n    variant: \"fullHeight\",\n    title: provider.title,\n    actions: /* @__PURE__ */ React.createElement(Button$1, {\n      color: \"primary\",\n      variant: \"outlined\",\n      onClick: () => {\n        login({ showPopup: true });\n      }\n    }, \"Sign In\")\n  }, /* @__PURE__ */ React.createElement(Typography, {\n    variant: \"body1\"\n  }, provider.message), error && error.name !== \"PopupRejectedError\" && /* @__PURE__ */ React.createElement(Typography, {\n    variant: \"body1\",\n    color: \"error\"\n  }, error.message)))))) : /* @__PURE__ */ React.createElement(Progress, null);\n};\nfunction SignInPage(props) {\n  if (\"provider\" in props) {\n    return /* @__PURE__ */ React.createElement(SingleSignInPage, {\n      ...props\n    });\n  }\n  return /* @__PURE__ */ React.createElement(MultiSignInPage, {\n    ...props\n  });\n}\n\nconst useTabsStyles = makeStyles(\n  (theme) => ({\n    root: {\n      padding: theme.spacing(0, 2, 0, 2.5),\n      minHeight: theme.spacing(3)\n    },\n    indicator: {\n      backgroundColor: theme.palette.info.main,\n      height: theme.spacing(0.3)\n    }\n  }),\n  { name: \"BackstageTabbedCard\" }\n);\nconst BoldHeader = withStyles(\n  (theme) => ({\n    root: { padding: theme.spacing(2, 2, 2, 2.5), display: \"inline-block\" },\n    title: { fontWeight: 700 },\n    subheader: { paddingTop: theme.spacing(1) }\n  }),\n  { name: \"BackstageTabbedCardBoldHeader\" }\n)(CardHeader);\nfunction TabbedCard(props) {\n  const {\n    slackChannel,\n    errorBoundaryProps,\n    children,\n    title,\n    deepLink,\n    value,\n    onChange\n  } = props;\n  const tabsClasses = useTabsStyles();\n  const [selectedIndex, selectIndex] = useState(0);\n  const handleChange = onChange ? onChange : (_ev, newSelectedIndex) => selectIndex(newSelectedIndex);\n  let selectedTabContent;\n  if (!value) {\n    React.Children.map(children, (child, index) => {\n      if (React.isValidElement(child) && index === selectedIndex) {\n        selectedTabContent = child == null ? void 0 : child.props.children;\n      }\n    });\n  } else {\n    React.Children.map(children, (child) => {\n      if (React.isValidElement(child) && (child == null ? void 0 : child.props.value) === value) {\n        selectedTabContent = child == null ? void 0 : child.props.children;\n      }\n    });\n  }\n  const errProps = errorBoundaryProps || (slackChannel ? { slackChannel } : {});\n  return /* @__PURE__ */ React.createElement(Card, null, /* @__PURE__ */ React.createElement(ErrorBoundary, {\n    ...errProps\n  }, title && /* @__PURE__ */ React.createElement(BoldHeader, {\n    title\n  }), /* @__PURE__ */ React.createElement(Tabs$1, {\n    selectionFollowsFocus: true,\n    classes: tabsClasses,\n    value: value || selectedIndex,\n    onChange: handleChange\n  }, children), /* @__PURE__ */ React.createElement(Divider, null), /* @__PURE__ */ React.createElement(CardContent, null, selectedTabContent), deepLink && /* @__PURE__ */ React.createElement(BottomLink, {\n    ...deepLink\n  })));\n}\nconst useCardTabStyles = makeStyles(\n  (theme) => ({\n    root: {\n      minWidth: theme.spacing(6),\n      minHeight: theme.spacing(3),\n      margin: theme.spacing(0, 2, 0, 0),\n      padding: theme.spacing(0.5, 0, 0.5, 0),\n      textTransform: \"none\",\n      \"&:hover\": {\n        opacity: 1,\n        backgroundColor: \"transparent\",\n        color: theme.palette.text.primary\n      }\n    },\n    selected: {\n      fontWeight: \"bold\"\n    }\n  }),\n  { name: \"BackstageCardTab\" }\n);\nfunction CardTab(props) {\n  const { children, ...restProps } = props;\n  const classes = useCardTabStyles();\n  return /* @__PURE__ */ React.createElement(Tab, {\n    disableRipple: true,\n    classes,\n    ...restProps\n  });\n}\n\nexport { AlertDisplay, Avatar, BottomLink, Breadcrumbs, BrokenImageIcon, Button, CardTab, CatalogIcon, ChatIcon, CodeSnippet, Content, ContentHeader, CopyTextButton, CreateButton, DashboardIcon, DependencyGraph, types as DependencyGraphTypes, DismissableBanner, DocsIcon, EmailIcon, EmptyState, ErrorBoundary, ErrorPage, ErrorPanel, FeatureCalloutCircular, Gauge, GaugeCard, GitHubIcon, GroupIcon, Header, HeaderActionMenu, HeaderIconLinkRow, HeaderLabel, HeaderTabs, HelpIcon, HomepageTimer, HorizontalScrollGrid, InfoCard, IntroCard, ItemCard, ItemCardGrid, ItemCardHeader, Lifecycle, LinearGauge, Link, LogViewer, MarkdownContent, MissingAnnotationEmptyState, MobileSidebar, OAuthRequestDialog, OverflowTooltip, Page, PageWithHeader, Progress, ProxiedSignInPage, ResponseErrorPanel, RoutedTabs, SIDEBAR_INTRO_LOCAL_STORAGE, SelectComponent as Select, Sidebar, LegacySidebarContext as SidebarContext, SidebarDivider, SidebarExpandButton, SidebarGroup, SidebarIntro, SidebarItem, SidebarOpenStateProvider, SidebarPage, LegacySidebarPinStateContext as SidebarPinStateContext, SidebarPinStateProvider, SidebarScrollWrapper, SidebarSearchField, SidebarSpace, SidebarSpacer, SidebarSubmenu, SidebarSubmenuItem, SignInPage, SimpleStepper, SimpleStepperStep, StatusAborted, StatusError, StatusOK, StatusPending, StatusRunning, StatusWarning, StructuredMetadataTable, SubvalueCell, SupportButton, TabbedCard, TabbedLayout, Table, Tabs, TrendLine, UserIcon, UserIdentity, WarningIcon, WarningPanel, sidebarConfig, useContent, useQueryParamState, useSidebarOpenState, useSidebarPinState, useSupportConfig };\n//# sourceMappingURL=index.esm.js.map\n","import { createVersionedContext, createVersionedValueMap, useVersionedContext, getOrCreateGlobalSingleton } from '@backstage/version-bridge';\nimport React, { useContext, useRef, useMemo, lazy, Suspense, Children, isValidElement, Fragment } from 'react';\nimport { useLocation, useParams } from 'react-router-dom';\n\nconst AnalyticsReactContext = createVersionedContext(\"analytics-context\");\nconst useAnalyticsContext = () => {\n  const theContext = useContext(AnalyticsReactContext);\n  if (theContext === void 0) {\n    return {\n      routeRef: \"unknown\",\n      pluginId: \"root\",\n      extension: \"App\"\n    };\n  }\n  const theValue = theContext.atVersion(1);\n  if (theValue === void 0) {\n    throw new Error(\"No context found for version 1.\");\n  }\n  return theValue;\n};\nconst AnalyticsContext = (options) => {\n  const { attributes, children } = options;\n  const parentValues = useAnalyticsContext();\n  const combinedValue = {\n    ...parentValues,\n    ...attributes\n  };\n  const versionedCombinedValue = createVersionedValueMap({ 1: combinedValue });\n  return /* @__PURE__ */ React.createElement(AnalyticsReactContext.Provider, {\n    value: versionedCombinedValue\n  }, children);\n};\n\nfunction useApiHolder() {\n  const versionedHolder = useVersionedContext(\"api-context\");\n  if (!versionedHolder) {\n    throw new Error(\"API context is not available\");\n  }\n  const apiHolder = versionedHolder.atVersion(1);\n  if (!apiHolder) {\n    throw new Error(\"ApiContext v1 not available\");\n  }\n  return apiHolder;\n}\nfunction useApi(apiRef) {\n  const apiHolder = useApiHolder();\n  const api = apiHolder.get(apiRef);\n  if (!api) {\n    throw new Error(`No implementation available for ${apiRef}`);\n  }\n  return api;\n}\nfunction withApis(apis) {\n  return function withApisWrapper(WrappedComponent) {\n    const Hoc = (props) => {\n      const apiHolder = useApiHolder();\n      const impls = {};\n      for (const key in apis) {\n        if (apis.hasOwnProperty(key)) {\n          const ref = apis[key];\n          const api = apiHolder.get(ref);\n          if (!api) {\n            throw new Error(`No implementation available for ${ref}`);\n          }\n          impls[key] = api;\n        }\n      }\n      return /* @__PURE__ */ React.createElement(WrappedComponent, {\n        ...props,\n        ...impls\n      });\n    };\n    const displayName = WrappedComponent.displayName || WrappedComponent.name || \"Component\";\n    Hoc.displayName = `withApis(${displayName})`;\n    return Hoc;\n  };\n}\n\nclass ApiRefImpl {\n  constructor(config) {\n    this.config = config;\n    const valid = config.id.split(\".\").flatMap((part) => part.split(\"-\")).every((part) => part.match(/^[a-z][a-z0-9]*$/));\n    if (!valid) {\n      throw new Error(\n        `API id must only contain period separated lowercase alphanum tokens with dashes, got '${config.id}'`\n      );\n    }\n  }\n  get id() {\n    return this.config.id;\n  }\n  get T() {\n    throw new Error(`tried to read ApiRef.T of ${this}`);\n  }\n  toString() {\n    return `apiRef{${this.config.id}}`;\n  }\n}\nfunction createApiRef(config) {\n  return new ApiRefImpl(config);\n}\n\nfunction createApiFactory(factory, instance) {\n  if (\"id\" in factory) {\n    return {\n      api: factory,\n      deps: {},\n      factory: () => instance\n    };\n  }\n  return factory;\n}\n\nvar SessionState = /* @__PURE__ */ ((SessionState2) => {\n  SessionState2[\"SignedIn\"] = \"SignedIn\";\n  SessionState2[\"SignedOut\"] = \"SignedOut\";\n  return SessionState2;\n})(SessionState || {});\nconst googleAuthApiRef = createApiRef({\n  id: \"core.auth.google\"\n});\nconst githubAuthApiRef = createApiRef({\n  id: \"core.auth.github\"\n});\nconst oktaAuthApiRef = createApiRef({\n  id: \"core.auth.okta\"\n});\nconst gitlabAuthApiRef = createApiRef({\n  id: \"core.auth.gitlab\"\n});\nconst microsoftAuthApiRef = createApiRef({\n  id: \"core.auth.microsoft\"\n});\nconst oneloginAuthApiRef = createApiRef({\n  id: \"core.auth.onelogin\"\n});\nconst bitbucketAuthApiRef = createApiRef({\n  id: \"core.auth.bitbucket\"\n});\nconst atlassianAuthApiRef = createApiRef({\n  id: \"core.auth.atlassian\"\n});\n\nconst alertApiRef = createApiRef({\n  id: \"core.alert\"\n});\n\nconst analyticsApiRef = createApiRef({\n  id: \"core.analytics\"\n});\n\nconst appThemeApiRef = createApiRef({\n  id: \"core.apptheme\"\n});\n\nconst configApiRef = createApiRef({\n  id: \"core.config\"\n});\n\nconst discoveryApiRef = createApiRef({\n  id: \"core.discovery\"\n});\n\nconst errorApiRef = createApiRef({\n  id: \"core.error\"\n});\n\nvar FeatureFlagState = /* @__PURE__ */ ((FeatureFlagState2) => {\n  FeatureFlagState2[FeatureFlagState2[\"None\"] = 0] = \"None\";\n  FeatureFlagState2[FeatureFlagState2[\"Active\"] = 1] = \"Active\";\n  return FeatureFlagState2;\n})(FeatureFlagState || {});\nconst featureFlagsApiRef = createApiRef({\n  id: \"core.featureflags\"\n});\n\nconst fetchApiRef = createApiRef({\n  id: \"core.fetch\"\n});\n\nconst identityApiRef = createApiRef({\n  id: \"core.identity\"\n});\n\nconst oauthRequestApiRef = createApiRef({\n  id: \"core.oauthrequest\"\n});\n\nconst storageApiRef = createApiRef({\n  id: \"core.storage\"\n});\n\nclass Tracker {\n  constructor(analyticsApi, context = {\n    routeRef: \"unknown\",\n    pluginId: \"root\",\n    extension: \"App\"\n  }) {\n    this.analyticsApi = analyticsApi;\n    this.context = context;\n  }\n  setContext(context) {\n    this.context = context;\n  }\n  captureEvent(action, subject, {\n    value,\n    attributes\n  } = {}) {\n    try {\n      this.analyticsApi.captureEvent({\n        action,\n        subject,\n        value,\n        attributes,\n        context: this.context\n      });\n    } catch (e) {\n      console.warn(\"Error during analytics event capture. %o\", e);\n    }\n  }\n}\n\nfunction useAnalyticsApi() {\n  try {\n    return useApi(analyticsApiRef);\n  } catch {\n    return { captureEvent: () => {\n    } };\n  }\n}\nfunction useAnalytics() {\n  const trackerRef = useRef(null);\n  const context = useAnalyticsContext();\n  const analyticsApi = useAnalyticsApi();\n  function getTracker() {\n    if (trackerRef.current === null) {\n      trackerRef.current = new Tracker(analyticsApi);\n    }\n    return trackerRef.current;\n  }\n  const tracker = getTracker();\n  tracker.setContext(context);\n  return tracker;\n}\n\nconst contextKey = \"plugin-context\";\nconst PluginProvider = (props) => {\n  const { children, plugin } = props;\n  const { Provider } = createVersionedContext(contextKey);\n  return /* @__PURE__ */ React.createElement(Provider, {\n    value: createVersionedValueMap({\n      1: {\n        plugin\n      }\n    })\n  }, children);\n};\nfunction usePluginOptions() {\n  const versionedHolder = useVersionedContext(\n    contextKey\n  );\n  if (!versionedHolder) {\n    throw new Error(\"Plugin Options context is not available\");\n  }\n  const value = versionedHolder.atVersion(1);\n  if (!value) {\n    throw new Error(\"Plugin Options v1 is not available\");\n  }\n  return value.plugin.getPluginOptions();\n}\n\nconst useApp = () => {\n  const versionedContext = useVersionedContext(\n    \"app-context\"\n  );\n  if (!versionedContext) {\n    throw new Error(\"App context is not available\");\n  }\n  const appContext = versionedContext.atVersion(1);\n  if (!appContext) {\n    throw new Error(\"AppContext v1 not available\");\n  }\n  return appContext;\n};\n\nconst globalStore = getOrCreateGlobalSingleton(\n  \"component-data-store\",\n  () => /* @__PURE__ */ new WeakMap()\n);\nconst componentDataKey = \"__backstage_data\";\nfunction attachComponentData(component, type, data) {\n  var _a;\n  const dataComponent = component;\n  let container = (_a = dataComponent[componentDataKey]) != null ? _a : globalStore.get(component);\n  if (!container) {\n    container = { map: /* @__PURE__ */ new Map() };\n    Object.defineProperty(dataComponent, componentDataKey, {\n      enumerable: false,\n      configurable: true,\n      writable: false,\n      value: container\n    });\n    globalStore.set(component, container);\n  }\n  if (container.map.has(type)) {\n    const name = component.displayName || component.name;\n    throw new Error(\n      `Attempted to attach duplicate data \"${type}\" to component \"${name}\"`\n    );\n  }\n  container.map.set(type, data);\n}\nfunction getComponentData(node, type) {\n  var _a;\n  if (!node) {\n    return void 0;\n  }\n  const component = node.type;\n  if (!component) {\n    return void 0;\n  }\n  const container = (_a = component[componentDataKey]) != null ? _a : globalStore.get(component);\n  if (!container) {\n    return void 0;\n  }\n  return container.map.get(type);\n}\n\nconst routeRefType = getOrCreateGlobalSingleton(\n  \"route-ref-type\",\n  () => Symbol(\"route-ref-type\")\n);\n\nvar _a$2;\nclass RouteRefImpl {\n  constructor(id, params) {\n    this.id = id;\n    this.params = params;\n    this[_a$2] = \"absolute\";\n  }\n  get title() {\n    return this.id;\n  }\n  toString() {\n    return `routeRef{type=absolute,id=${this.id}}`;\n  }\n}\n_a$2 = routeRefType;\nfunction createRouteRef(config) {\n  var _a2;\n  return new RouteRefImpl(\n    config.id,\n    (_a2 = config.params) != null ? _a2 : []\n  );\n}\n\nvar _a$1;\nconst PARAM_PATTERN = /^\\w+$/;\nclass SubRouteRefImpl {\n  constructor(id, path, parent, params) {\n    this.id = id;\n    this.path = path;\n    this.parent = parent;\n    this.params = params;\n    this[_a$1] = \"sub\";\n  }\n  toString() {\n    return `routeRef{type=sub,id=${this.id}}`;\n  }\n}\n_a$1 = routeRefType;\nfunction createSubRouteRef(config) {\n  const { id, path, parent } = config;\n  const pathParams = path.split(\"/\").filter((p) => p.startsWith(\":\")).map((p) => p.substring(1));\n  const params = [...parent.params, ...pathParams];\n  if (parent.params.some((p) => pathParams.includes(p))) {\n    throw new Error(\n      \"SubRouteRef may not have params that overlap with its parent\"\n    );\n  }\n  if (!path.startsWith(\"/\")) {\n    throw new Error(`SubRouteRef path must start with '/', got '${path}'`);\n  }\n  if (path.endsWith(\"/\")) {\n    throw new Error(`SubRouteRef path must not end with '/', got '${path}'`);\n  }\n  for (const param of pathParams) {\n    if (!PARAM_PATTERN.test(param)) {\n      throw new Error(`SubRouteRef path has invalid param, got '${param}'`);\n    }\n  }\n  const subRouteRef = new SubRouteRefImpl(\n    id,\n    path,\n    parent,\n    params\n  );\n  return subRouteRef;\n}\n\nvar _a;\nclass ExternalRouteRefImpl {\n  constructor(id, params, optional) {\n    this.id = id;\n    this.params = params;\n    this.optional = optional;\n    this[_a] = \"external\";\n  }\n  toString() {\n    return `routeRef{type=external,id=${this.id}}`;\n  }\n}\n_a = routeRefType;\nfunction createExternalRouteRef(options) {\n  var _a2;\n  return new ExternalRouteRefImpl(\n    options.id,\n    (_a2 = options.params) != null ? _a2 : [],\n    Boolean(options.optional)\n  );\n}\n\nfunction useRouteRef(routeRef) {\n  const sourceLocation = useLocation();\n  const versionedContext = useVersionedContext(\n    \"routing-context\"\n  );\n  if (!versionedContext) {\n    throw new Error(\"Routing context is not available\");\n  }\n  const resolver = versionedContext.atVersion(1);\n  const routeFunc = useMemo(\n    () => resolver && resolver.resolve(routeRef, sourceLocation),\n    [resolver, routeRef, sourceLocation]\n  );\n  if (!versionedContext) {\n    throw new Error(\"useRouteRef used outside of routing context\");\n  }\n  if (!resolver) {\n    throw new Error(\"RoutingContext v1 not available\");\n  }\n  const isOptional = \"optional\" in routeRef && routeRef.optional;\n  if (!routeFunc && !isOptional) {\n    throw new Error(`No path for ${routeRef}`);\n  }\n  return routeFunc;\n}\n\nfunction useRouteRefParams(_routeRef) {\n  return useParams();\n}\n\nclass PluginErrorBoundary extends React.Component {\n  constructor() {\n    super(...arguments);\n    this.state = { error: void 0 };\n    this.handleErrorReset = () => {\n      this.setState({ error: void 0 });\n    };\n  }\n  static getDerivedStateFromError(error) {\n    return { error };\n  }\n  render() {\n    const { error } = this.state;\n    const { app, plugin } = this.props;\n    const { ErrorBoundaryFallback } = app.getComponents();\n    if (error) {\n      return /* @__PURE__ */ React.createElement(ErrorBoundaryFallback, {\n        error,\n        resetError: this.handleErrorReset,\n        plugin\n      });\n    }\n    return this.props.children;\n  }\n}\n\nfunction createRoutableExtension(options) {\n  const { component, mountPoint, name } = options;\n  return createReactExtension({\n    component: {\n      lazy: () => component().then(\n        (InnerComponent) => {\n          const RoutableExtensionWrapper = (props) => {\n            try {\n              useRouteRef(mountPoint);\n            } catch (error) {\n              if (typeof error === \"object\" && error !== null) {\n                const { message } = error;\n                if (typeof message === \"string\" && message.startsWith(\"No path for \")) {\n                  throw new Error(\n                    `Routable extension component with mount point ${mountPoint} was not discovered in the app element tree. Routable extension components may not be rendered by other components and must be directly available as an element within the App provider component.`\n                  );\n                }\n              }\n              throw error;\n            }\n            return /* @__PURE__ */ React.createElement(InnerComponent, {\n              ...props\n            });\n          };\n          const componentName = name || InnerComponent.displayName || InnerComponent.name || \"LazyComponent\";\n          RoutableExtensionWrapper.displayName = `RoutableExtension(${componentName})`;\n          return RoutableExtensionWrapper;\n        },\n        (error) => {\n          const RoutableExtensionWrapper = (_) => {\n            const app = useApp();\n            const { BootErrorPage } = app.getComponents();\n            return /* @__PURE__ */ React.createElement(BootErrorPage, {\n              step: \"load-chunk\",\n              error\n            });\n          };\n          return RoutableExtensionWrapper;\n        }\n      )\n    },\n    data: {\n      \"core.mountPoint\": mountPoint\n    },\n    name\n  });\n}\nfunction createComponentExtension(options) {\n  const { component, name } = options;\n  return createReactExtension({ component, name });\n}\nfunction createReactExtension(options) {\n  const { data = {}, name } = options;\n  if (!name) {\n    console.warn(\n      \"Declaring extensions without name is DEPRECATED. Make sure that all usages of createReactExtension, createComponentExtension and createRoutableExtension provide a name.\"\n    );\n  }\n  let Component;\n  if (\"lazy\" in options.component) {\n    const lazyLoader = options.component.lazy;\n    Component = lazy(\n      () => lazyLoader().then((component) => ({ default: component }))\n    );\n  } else {\n    Component = options.component.sync;\n  }\n  const componentName = name || Component.displayName || Component.name || \"Component\";\n  return {\n    expose(plugin) {\n      const Result = (props) => {\n        const app = useApp();\n        const { Progress } = app.getComponents();\n        const mountPoint = data == null ? void 0 : data[\"core.mountPoint\"];\n        return /* @__PURE__ */ React.createElement(Suspense, {\n          fallback: /* @__PURE__ */ React.createElement(Progress, null)\n        }, /* @__PURE__ */ React.createElement(PluginErrorBoundary, {\n          app,\n          plugin\n        }, /* @__PURE__ */ React.createElement(AnalyticsContext, {\n          attributes: {\n            pluginId: plugin.getId(),\n            ...name && { extension: name },\n            ...mountPoint && { routeRef: mountPoint.id }\n          }\n        }, /* @__PURE__ */ React.createElement(PluginProvider, {\n          plugin\n        }, /* @__PURE__ */ React.createElement(Component, {\n          ...props\n        })))));\n      };\n      attachComponentData(Result, \"core.plugin\", plugin);\n      for (const [key, value] of Object.entries(data)) {\n        attachComponentData(Result, key, value);\n      }\n      Result.displayName = `Extension(${componentName})`;\n      return Result;\n    }\n  };\n}\n\nfunction selectChildren(rootNode, featureFlagsApi, selector, strictError) {\n  return Children.toArray(rootNode).flatMap((node) => {\n    if (!isValidElement(node)) {\n      return [];\n    }\n    if (node.type === Fragment) {\n      return selectChildren(\n        node.props.children,\n        featureFlagsApi,\n        selector,\n        strictError\n      );\n    }\n    if (getComponentData(node, \"core.featureFlagged\")) {\n      const props = node.props;\n      const isEnabled = \"with\" in props ? featureFlagsApi.isActive(props.with) : !featureFlagsApi.isActive(props.without);\n      if (isEnabled) {\n        return selectChildren(\n          node.props.children,\n          featureFlagsApi,\n          selector,\n          strictError\n        );\n      }\n      return [];\n    }\n    if (selector === void 0 || selector(node)) {\n      return [node];\n    }\n    if (strictError) {\n      throw new Error(strictError);\n    }\n    return selectChildren(\n      node.props.children,\n      featureFlagsApi,\n      selector,\n      strictError\n    );\n  });\n}\nclass Collection {\n  constructor(node, featureFlagsApi) {\n    this.node = node;\n    this.featureFlagsApi = featureFlagsApi;\n  }\n  selectByComponentData(query) {\n    const selection = selectChildren(\n      this.node,\n      this.featureFlagsApi,\n      (node) => getComponentData(node, query.key) !== void 0,\n      query.withStrictError\n    );\n    return new Collection(selection, this.featureFlagsApi);\n  }\n  findComponentData(query) {\n    const selection = selectChildren(\n      this.node,\n      this.featureFlagsApi,\n      (node) => getComponentData(node, query.key) !== void 0\n    );\n    return selection.map((node) => getComponentData(node, query.key)).filter((data) => data !== void 0);\n  }\n  getElements() {\n    return selectChildren(this.node, this.featureFlagsApi);\n  }\n}\nfunction useElementFilter(node, filterFn, dependencies = []) {\n  const featureFlagsApi = useApi(featureFlagsApiRef);\n  const elements = new Collection(node, featureFlagsApi);\n  return useMemo(() => filterFn(elements), [node, ...dependencies]);\n}\n\nclass PluginImpl {\n  constructor(config) {\n    this.config = config;\n    this.options = void 0;\n  }\n  getId() {\n    return this.config.id;\n  }\n  getApis() {\n    var _a;\n    return (_a = this.config.apis) != null ? _a : [];\n  }\n  getFeatureFlags() {\n    var _a, _b;\n    return (_b = (_a = this.config.featureFlags) == null ? void 0 : _a.slice()) != null ? _b : [];\n  }\n  get routes() {\n    var _a;\n    return (_a = this.config.routes) != null ? _a : {};\n  }\n  get externalRoutes() {\n    var _a;\n    return (_a = this.config.externalRoutes) != null ? _a : {};\n  }\n  provide(extension) {\n    return extension.expose(this);\n  }\n  __experimentalReconfigure(options) {\n    if (this.config.__experimentalConfigure) {\n      this.options = this.config.__experimentalConfigure(options);\n    }\n  }\n  getPluginOptions() {\n    var _a;\n    if (this.config.__experimentalConfigure && !this.options) {\n      this.options = this.config.__experimentalConfigure();\n    }\n    return (_a = this.options) != null ? _a : {};\n  }\n  toString() {\n    return `plugin{${this.config.id}}`;\n  }\n}\nfunction createPlugin(config) {\n  return new PluginImpl(config);\n}\n\nexport { AnalyticsContext, FeatureFlagState, PluginProvider, SessionState, alertApiRef, analyticsApiRef, appThemeApiRef, atlassianAuthApiRef, attachComponentData, bitbucketAuthApiRef, configApiRef, createApiFactory, createApiRef, createComponentExtension, createExternalRouteRef, createPlugin, createReactExtension, createRoutableExtension, createRouteRef, createSubRouteRef, discoveryApiRef, errorApiRef, featureFlagsApiRef, fetchApiRef, getComponentData, githubAuthApiRef, gitlabAuthApiRef, googleAuthApiRef, identityApiRef, microsoftAuthApiRef, oauthRequestApiRef, oktaAuthApiRef, oneloginAuthApiRef, storageApiRef, useAnalytics, useApi, useApiHolder, useApp, useElementFilter, usePluginOptions, useRouteRef, useRouteRefParams, withApis };\n//# sourceMappingURL=index.esm.js.map\n","import { serializeError as serializeError$1, deserializeError as deserializeError$1 } from 'serialize-error';\n\nfunction isError(value) {\n  if (typeof value !== \"object\" || value === null || Array.isArray(value)) {\n    return false;\n  }\n  const maybe = value;\n  if (typeof maybe.name !== \"string\" || maybe.name === \"\") {\n    return false;\n  }\n  if (typeof maybe.message !== \"string\") {\n    return false;\n  }\n  return true;\n}\nfunction assertError(value) {\n  if (typeof value !== \"object\" || value === null || Array.isArray(value)) {\n    throw new Error(`Encountered invalid error, not an object, got '${value}'`);\n  }\n  const maybe = value;\n  if (typeof maybe.name !== \"string\" || maybe.name === \"\") {\n    throw new Error(`Encountered error object without a name, got '${value}'`);\n  }\n  if (typeof maybe.message !== \"string\") {\n    throw new Error(\n      `Encountered error object without a message, got '${value}'`\n    );\n  }\n}\n\nfunction serializeError(error, options) {\n  const serialized = serializeError$1(error);\n  const result = {\n    name: \"Unknown\",\n    message: \"<no reason given>\",\n    ...serialized\n  };\n  if (!(options == null ? void 0 : options.includeStack)) {\n    delete result.stack;\n  }\n  return result;\n}\nfunction deserializeError(data) {\n  const result = deserializeError$1(data);\n  if (!data.stack) {\n    result.stack = void 0;\n  }\n  return result;\n}\nfunction stringifyError(error) {\n  if (isError(error)) {\n    const str = String(error);\n    return str !== \"[object Object]\" ? str : `${error.name}: ${error.message}`;\n  }\n  return `unknown error '${error}'`;\n}\n\nasync function parseErrorResponseBody(response) {\n  var _a;\n  try {\n    const text = await response.text();\n    if (text) {\n      if ((_a = response.headers.get(\"content-type\")) == null ? void 0 : _a.startsWith(\"application/json\")) {\n        try {\n          const body = JSON.parse(text);\n          if (body.error && body.response) {\n            return body;\n          }\n        } catch {\n        }\n      }\n      return {\n        error: {\n          name: \"Error\",\n          message: `Request failed with status ${response.status} ${response.statusText}, ${text}`\n        },\n        response: {\n          statusCode: response.status\n        }\n      };\n    }\n  } catch {\n  }\n  return {\n    error: {\n      name: \"Error\",\n      message: `Request failed with status ${response.status} ${response.statusText}`\n    },\n    response: {\n      statusCode: response.status\n    }\n  };\n}\n\nclass CustomErrorBase extends Error {\n  constructor(message, cause) {\n    var _a;\n    let fullMessage = message;\n    if (cause !== void 0) {\n      const causeStr = stringifyError(cause);\n      if (fullMessage) {\n        fullMessage += `; caused by ${causeStr}`;\n      } else {\n        fullMessage = `caused by ${causeStr}`;\n      }\n    }\n    super(fullMessage);\n    (_a = Error.captureStackTrace) == null ? void 0 : _a.call(Error, this, this.constructor);\n    this.name = this.constructor.name;\n    this.cause = isError(cause) ? cause : void 0;\n  }\n}\n\nclass InputError extends CustomErrorBase {\n}\nclass AuthenticationError extends CustomErrorBase {\n}\nclass NotAllowedError extends CustomErrorBase {\n}\nclass NotFoundError extends CustomErrorBase {\n}\nclass ConflictError extends CustomErrorBase {\n}\nclass NotModifiedError extends CustomErrorBase {\n}\nclass ForwardedError extends CustomErrorBase {\n  constructor(message, cause) {\n    super(message, cause);\n    this.name = isError(cause) ? cause.name : \"Error\";\n  }\n}\n\nclass ResponseError extends Error {\n  constructor(props) {\n    super(props.message);\n    this.name = \"ResponseError\";\n    this.response = props.response;\n    this.body = props.data;\n    this.cause = props.cause;\n  }\n  static async fromResponse(response) {\n    const data = await parseErrorResponseBody(response);\n    const status = data.response.statusCode || response.status;\n    const statusText = data.error.name || response.statusText;\n    const message = `Request failed with ${status} ${statusText}`;\n    const cause = deserializeError(data.error);\n    return new ResponseError({\n      message,\n      response,\n      data,\n      cause\n    });\n  }\n}\n\nexport { AuthenticationError, ConflictError, CustomErrorBase, ForwardedError, InputError, NotAllowedError, NotFoundError, NotModifiedError, ResponseError, assertError, deserializeError, isError, parseErrorResponseBody, serializeError, stringifyError };\n//# sourceMappingURL=index.esm.js.map\n","import { createApiRef, createApiFactory, githubAuthApiRef, gitlabAuthApiRef, microsoftAuthApiRef, bitbucketAuthApiRef, useApp } from '@backstage/core-plugin-api';\nimport { ScmIntegrations } from '@backstage/integration';\nimport CodeIcon from '@material-ui/icons/Code';\nimport React from 'react';\n\nconst scmAuthApiRef = createApiRef({\n  id: \"core.scmauth\"\n});\n\nvar __accessCheck = (obj, member, msg) => {\n  if (!member.has(obj))\n    throw TypeError(\"Cannot \" + msg);\n};\nvar __privateGet = (obj, member, getter) => {\n  __accessCheck(obj, member, \"read from private field\");\n  return getter ? getter.call(obj) : member.get(obj);\n};\nvar __privateAdd = (obj, member, value) => {\n  if (member.has(obj))\n    throw TypeError(\"Cannot add the same private member more than once\");\n  member instanceof WeakSet ? member.add(obj) : member.set(obj, value);\n};\nvar __privateSet = (obj, member, value, setter) => {\n  __accessCheck(obj, member, \"write to private field\");\n  setter ? setter.call(obj, value) : member.set(obj, value);\n  return value;\n};\nvar _providers, _api, _host, _scopeMapping, _providerName;\nclass ScmAuthMux {\n  constructor(providers) {\n    __privateAdd(this, _providers, void 0);\n    __privateSet(this, _providers, providers);\n  }\n  async getCredentials(options) {\n    const url = new URL(options.url);\n    const provider = __privateGet(this, _providers).find((p) => p.isUrlSupported(url));\n    if (!provider) {\n      throw new Error(\n        `No auth provider available for '${options.url}', see https://backstage.io/link?scm-auth`\n      );\n    }\n    return provider.getCredentials(options);\n  }\n}\n_providers = new WeakMap();\nconst _ScmAuth = class {\n  constructor(providerName, api, host, scopeMapping) {\n    __privateAdd(this, _api, void 0);\n    __privateAdd(this, _host, void 0);\n    __privateAdd(this, _scopeMapping, void 0);\n    __privateAdd(this, _providerName, void 0);\n    __privateSet(this, _api, api);\n    __privateSet(this, _host, host);\n    __privateSet(this, _scopeMapping, scopeMapping);\n    __privateSet(this, _providerName, providerName);\n  }\n  static createDefaultApiFactory() {\n    return createApiFactory({\n      api: scmAuthApiRef,\n      deps: {\n        github: githubAuthApiRef,\n        gitlab: gitlabAuthApiRef,\n        azure: microsoftAuthApiRef,\n        bitbucket: bitbucketAuthApiRef\n      },\n      factory: ({ github, gitlab, azure, bitbucket }) => _ScmAuth.merge(\n        _ScmAuth.forGithub(github),\n        _ScmAuth.forGitlab(gitlab),\n        _ScmAuth.forAzure(azure),\n        _ScmAuth.forBitbucket(bitbucket)\n      )\n    });\n  }\n  static forAuthApi(authApi, options) {\n    return new _ScmAuth(\"generic\", authApi, options.host, options.scopeMapping);\n  }\n  static forGithub(githubAuthApi, options) {\n    var _a;\n    const host = (_a = options == null ? void 0 : options.host) != null ? _a : \"github.com\";\n    return new _ScmAuth(\"github\", githubAuthApi, host, {\n      default: [\"repo\", \"read:org\", \"read:user\"],\n      repoWrite: [\"gist\"]\n    });\n  }\n  static forGitlab(gitlabAuthApi, options) {\n    var _a;\n    const host = (_a = options == null ? void 0 : options.host) != null ? _a : \"gitlab.com\";\n    return new _ScmAuth(\"gitlab\", gitlabAuthApi, host, {\n      default: [\"read_user\", \"read_api\", \"read_repository\"],\n      repoWrite: [\"write_repository\", \"api\"]\n    });\n  }\n  static forAzure(microsoftAuthApi, options) {\n    var _a;\n    const host = (_a = options == null ? void 0 : options.host) != null ? _a : \"dev.azure.com\";\n    return new _ScmAuth(\"azure\", microsoftAuthApi, host, {\n      default: [\n        \"vso.build\",\n        \"vso.code\",\n        \"vso.graph\",\n        \"vso.project\",\n        \"vso.profile\"\n      ],\n      repoWrite: [\"vso.code_manage\"]\n    });\n  }\n  static forBitbucket(bitbucketAuthApi, options) {\n    var _a;\n    const host = (_a = options == null ? void 0 : options.host) != null ? _a : \"bitbucket.org\";\n    return new _ScmAuth(\"bitbucket\", bitbucketAuthApi, host, {\n      default: [\"account\", \"team\", \"pullrequest\", \"snippet\", \"issue\"],\n      repoWrite: [\"pullrequest:write\", \"snippet:write\", \"issue:write\"]\n    });\n  }\n  static merge(...providers) {\n    return new ScmAuthMux(providers);\n  }\n  isUrlSupported(url) {\n    return url.host === __privateGet(this, _host);\n  }\n  getAdditionalScopesForProvider(additionalScopes) {\n    var _a, _b;\n    if (!(additionalScopes == null ? void 0 : additionalScopes.customScopes) || __privateGet(this, _providerName) === \"generic\") {\n      return [];\n    }\n    return (_b = (_a = additionalScopes.customScopes) == null ? void 0 : _a[__privateGet(this, _providerName)]) != null ? _b : [];\n  }\n  async getCredentials(options) {\n    const { url, additionalScope, ...restOptions } = options;\n    const scopes = __privateGet(this, _scopeMapping).default.slice();\n    if (additionalScope == null ? void 0 : additionalScope.repoWrite) {\n      scopes.push(...__privateGet(this, _scopeMapping).repoWrite);\n    }\n    const additionalScopes = this.getAdditionalScopesForProvider(additionalScope);\n    if (additionalScopes.length) {\n      scopes.push(...additionalScopes);\n    }\n    const uniqueScopes = [...new Set(scopes)];\n    const token = await __privateGet(this, _api).getAccessToken(uniqueScopes, restOptions);\n    return {\n      token,\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    };\n  }\n};\nlet ScmAuth = _ScmAuth;\n_api = new WeakMap();\n_host = new WeakMap();\n_scopeMapping = new WeakMap();\n_providerName = new WeakMap();\n\nclass ScmIntegrationsApi {\n  static fromConfig(config) {\n    return ScmIntegrations.fromConfig(config);\n  }\n}\nconst scmIntegrationsApiRef = createApiRef({\n  id: \"integration.scmintegrations\"\n});\n\nconst ScmIntegrationIcon = (props) => {\n  var _a;\n  const { type } = props;\n  const app = useApp();\n  const DefaultIcon = CodeIcon;\n  const Icon = type ? (_a = app.getSystemIcon(type)) != null ? _a : DefaultIcon : DefaultIcon;\n  return /* @__PURE__ */ React.createElement(Icon, null);\n};\n\nexport { ScmAuth, ScmIntegrationIcon, ScmIntegrationsApi, scmAuthApiRef, scmIntegrationsApiRef };\n//# sourceMappingURL=index.esm.js.map\n","import parseGitUrl from 'git-url-parse';\nimport { trimEnd, trimStart } from 'lodash';\nimport fetch from 'cross-fetch';\nimport { createAppAuth } from '@octokit/auth-app';\nimport { Octokit } from '@octokit/rest';\nimport { DateTime } from 'luxon';\n\nfunction isValidHost(host) {\n  const check = new URL(\"http://example.com\");\n  check.host = host;\n  return check.host === host;\n}\nfunction isValidUrl(url) {\n  try {\n    new URL(url);\n    return true;\n  } catch {\n    return false;\n  }\n}\nfunction basicIntegrations(integrations, getHost) {\n  return {\n    list() {\n      return integrations;\n    },\n    byUrl(url) {\n      try {\n        const parsed = typeof url === \"string\" ? new URL(url) : url;\n        return integrations.find((i) => getHost(i) === parsed.host);\n      } catch {\n        return void 0;\n      }\n    },\n    byHost(host) {\n      return integrations.find((i) => getHost(i) === host);\n    }\n  };\n}\nfunction defaultScmResolveUrl(options) {\n  const { url, base, lineNumber } = options;\n  try {\n    new URL(url);\n    return url;\n  } catch {\n  }\n  let updated;\n  if (url.startsWith(\"/\")) {\n    const { filepath } = parseGitUrl(base);\n    updated = new URL(base);\n    const repoRootPath = trimEnd(\n      updated.pathname.substring(0, updated.pathname.length - filepath.length),\n      \"/\"\n    );\n    updated.pathname = `${repoRootPath}${url}`;\n  } else {\n    updated = new URL(url, base);\n  }\n  updated.search = new URL(base).search;\n  if (lineNumber) {\n    updated.hash = `L${lineNumber}`;\n  }\n  return updated.toString();\n}\n\nconst AMAZON_AWS_HOST = \"amazonaws.com\";\nfunction readAwsS3IntegrationConfig(config) {\n  var _a;\n  const endpoint = config.getOptionalString(\"endpoint\");\n  const s3ForcePathStyle = (_a = config.getOptionalBoolean(\"s3ForcePathStyle\")) != null ? _a : false;\n  let host;\n  let pathname;\n  if (endpoint) {\n    try {\n      const url = new URL(endpoint);\n      host = url.host;\n      pathname = url.pathname;\n    } catch {\n      throw new Error(\n        `invalid awsS3 integration config, endpoint '${endpoint}' is not a valid URL`\n      );\n    }\n    if (pathname !== \"/\") {\n      throw new Error(\n        `invalid awsS3 integration config, endpoints cannot contain path, got '${endpoint}'`\n      );\n    }\n  } else {\n    host = AMAZON_AWS_HOST;\n  }\n  const accessKeyId = config.getOptionalString(\"accessKeyId\");\n  const secretAccessKey = config.getOptionalString(\"secretAccessKey\");\n  const roleArn = config.getOptionalString(\"roleArn\");\n  const externalId = config.getOptionalString(\"externalId\");\n  return {\n    host,\n    endpoint,\n    s3ForcePathStyle,\n    accessKeyId,\n    secretAccessKey,\n    roleArn,\n    externalId\n  };\n}\nfunction readAwsS3IntegrationConfigs(configs) {\n  const result = configs.map(readAwsS3IntegrationConfig);\n  if (!result.some((c) => c.host === AMAZON_AWS_HOST)) {\n    result.push({\n      host: AMAZON_AWS_HOST\n    });\n  }\n  return result;\n}\n\nconst _AwsS3Integration = class {\n  constructor(integrationConfig) {\n    this.integrationConfig = integrationConfig;\n  }\n  get type() {\n    return \"awsS3\";\n  }\n  get title() {\n    return this.integrationConfig.host;\n  }\n  get config() {\n    return this.integrationConfig;\n  }\n  resolveUrl(options) {\n    const resolved = defaultScmResolveUrl(options);\n    return resolved;\n  }\n  resolveEditUrl(url) {\n    return url;\n  }\n};\nlet AwsS3Integration = _AwsS3Integration;\nAwsS3Integration.factory = ({ config }) => {\n  var _a;\n  const configs = readAwsS3IntegrationConfigs(\n    (_a = config.getOptionalConfigArray(\"integrations.awsS3\")) != null ? _a : []\n  );\n  return basicIntegrations(\n    configs.map((c) => new _AwsS3Integration(c)),\n    (i) => i.config.host\n  );\n};\n\nvar __accessCheck = (obj, member, msg) => {\n  if (!member.has(obj))\n    throw TypeError(\"Cannot \" + msg);\n};\nvar __privateGet = (obj, member, getter) => {\n  __accessCheck(obj, member, \"read from private field\");\n  return getter ? getter.call(obj) : member.get(obj);\n};\nvar __privateAdd = (obj, member, value) => {\n  if (member.has(obj))\n    throw TypeError(\"Cannot add the same private member more than once\");\n  member instanceof WeakSet ? member.add(obj) : member.set(obj, value);\n};\nvar __privateSet = (obj, member, value, setter) => {\n  __accessCheck(obj, member, \"write to private field\");\n  setter ? setter.call(obj, value) : member.set(obj, value);\n  return value;\n};\nvar _origin, _owner, _project, _repo, _path, _ref, _baseUrl;\nconst VERSION_PREFIX_GIT_BRANCH = \"GB\";\nconst _AzureUrl = class {\n  constructor(origin, owner, project, repo, path, ref) {\n    __privateAdd(this, _origin, void 0);\n    __privateAdd(this, _owner, void 0);\n    __privateAdd(this, _project, void 0);\n    __privateAdd(this, _repo, void 0);\n    __privateAdd(this, _path, void 0);\n    __privateAdd(this, _ref, void 0);\n    __privateAdd(this, _baseUrl, (...parts) => {\n      const url = new URL(__privateGet(this, _origin));\n      url.pathname = parts.map((part) => encodeURIComponent(part)).join(\"/\");\n      return url;\n    });\n    __privateSet(this, _origin, origin);\n    __privateSet(this, _owner, owner);\n    __privateSet(this, _project, project);\n    __privateSet(this, _repo, repo);\n    __privateSet(this, _path, path);\n    __privateSet(this, _ref, ref);\n  }\n  static fromRepoUrl(repoUrl) {\n    var _a;\n    const url = new URL(repoUrl);\n    let owner;\n    let project;\n    let repo;\n    const parts = url.pathname.split(\"/\").map((part) => decodeURIComponent(part));\n    if (parts[2] === \"_git\") {\n      owner = parts[1];\n      project = repo = parts[3];\n    } else if (parts[3] === \"_git\") {\n      owner = parts[1];\n      project = parts[2];\n      repo = parts[4];\n    } else if (parts[4] === \"_git\") {\n      owner = `${parts[1]}/${parts[2]}`;\n      project = parts[3];\n      repo = parts[5];\n    }\n    if (!owner || !project || !repo) {\n      throw new Error(\"Azure URL must point to a git repository\");\n    }\n    const path = (_a = url.searchParams.get(\"path\")) != null ? _a : void 0;\n    let ref;\n    const version = url.searchParams.get(\"version\");\n    if (version) {\n      const prefix = version.slice(0, 2);\n      if (prefix !== \"GB\") {\n        throw new Error(\"Azure URL version must point to a git branch\");\n      }\n      ref = version.slice(2);\n    }\n    return new _AzureUrl(url.origin, owner, project, repo, path, ref);\n  }\n  toRepoUrl() {\n    let url;\n    if (__privateGet(this, _project) === __privateGet(this, _repo)) {\n      url = __privateGet(this, _baseUrl).call(this, __privateGet(this, _owner), \"_git\", __privateGet(this, _repo));\n    } else {\n      url = __privateGet(this, _baseUrl).call(this, __privateGet(this, _owner), __privateGet(this, _project), \"_git\", __privateGet(this, _repo));\n    }\n    if (__privateGet(this, _path)) {\n      url.searchParams.set(\"path\", __privateGet(this, _path));\n    }\n    if (__privateGet(this, _ref)) {\n      url.searchParams.set(\"version\", VERSION_PREFIX_GIT_BRANCH + __privateGet(this, _ref));\n    }\n    return url.toString();\n  }\n  toFileUrl() {\n    if (!__privateGet(this, _path)) {\n      throw new Error(\n        \"Azure URL must point to a specific path to be able to download a file\"\n      );\n    }\n    const url = __privateGet(this, _baseUrl).call(this, __privateGet(this, _owner), __privateGet(this, _project), \"_apis\", \"git\", \"repositories\", __privateGet(this, _repo), \"items\");\n    url.searchParams.set(\"api-version\", \"6.0\");\n    url.searchParams.set(\"path\", __privateGet(this, _path));\n    if (__privateGet(this, _ref)) {\n      url.searchParams.set(\"version\", __privateGet(this, _ref));\n    }\n    return url.toString();\n  }\n  toArchiveUrl() {\n    const url = __privateGet(this, _baseUrl).call(this, __privateGet(this, _owner), __privateGet(this, _project), \"_apis\", \"git\", \"repositories\", __privateGet(this, _repo), \"items\");\n    url.searchParams.set(\"recursionLevel\", \"full\");\n    url.searchParams.set(\"download\", \"true\");\n    url.searchParams.set(\"api-version\", \"6.0\");\n    if (__privateGet(this, _path)) {\n      url.searchParams.set(\"scopePath\", __privateGet(this, _path));\n    }\n    if (__privateGet(this, _ref)) {\n      url.searchParams.set(\"version\", __privateGet(this, _ref));\n    }\n    return url.toString();\n  }\n  toCommitsUrl() {\n    const url = __privateGet(this, _baseUrl).call(this, __privateGet(this, _owner), __privateGet(this, _project), \"_apis\", \"git\", \"repositories\", __privateGet(this, _repo), \"commits\");\n    url.searchParams.set(\"api-version\", \"6.0\");\n    if (__privateGet(this, _ref)) {\n      url.searchParams.set(\"searchCriteria.itemVersion.version\", __privateGet(this, _ref));\n    }\n    return url.toString();\n  }\n  getOwner() {\n    return __privateGet(this, _owner);\n  }\n  getProject() {\n    return __privateGet(this, _project);\n  }\n  getRepo() {\n    return __privateGet(this, _repo);\n  }\n  getPath() {\n    return __privateGet(this, _path);\n  }\n  getRef() {\n    return __privateGet(this, _ref);\n  }\n};\nlet AzureUrl = _AzureUrl;\n_origin = new WeakMap();\n_owner = new WeakMap();\n_project = new WeakMap();\n_repo = new WeakMap();\n_path = new WeakMap();\n_ref = new WeakMap();\n_baseUrl = new WeakMap();\n\nconst AZURE_HOST = \"dev.azure.com\";\nfunction readAzureIntegrationConfig(config) {\n  var _a;\n  const host = (_a = config.getOptionalString(\"host\")) != null ? _a : AZURE_HOST;\n  const token = config.getOptionalString(\"token\");\n  if (!isValidHost(host)) {\n    throw new Error(\n      `Invalid Azure integration config, '${host}' is not a valid host`\n    );\n  }\n  return { host, token };\n}\nfunction readAzureIntegrationConfigs(configs) {\n  const result = configs.map(readAzureIntegrationConfig);\n  if (!result.some((c) => c.host === AZURE_HOST)) {\n    result.push({ host: AZURE_HOST });\n  }\n  return result;\n}\n\nconst _AzureIntegration = class {\n  constructor(integrationConfig) {\n    this.integrationConfig = integrationConfig;\n  }\n  get type() {\n    return \"azure\";\n  }\n  get title() {\n    return this.integrationConfig.host;\n  }\n  get config() {\n    return this.integrationConfig;\n  }\n  resolveUrl(options) {\n    var _a;\n    const { url, base } = options;\n    if (isValidUrl(url)) {\n      return url;\n    }\n    try {\n      const azureUrl = AzureUrl.fromRepoUrl(base);\n      const newUrl = new URL(base);\n      const mockBaseUrl = new URL(`https://a.com${(_a = azureUrl.getPath()) != null ? _a : \"\"}`);\n      const updatedPath = new URL(url, mockBaseUrl).pathname;\n      newUrl.searchParams.set(\"path\", updatedPath);\n      if (options.lineNumber) {\n        newUrl.searchParams.set(\"line\", String(options.lineNumber));\n        newUrl.searchParams.set(\"lineEnd\", String(options.lineNumber + 1));\n        newUrl.searchParams.set(\"lineStartColumn\", \"1\");\n        newUrl.searchParams.set(\"lineEndColumn\", \"1\");\n      }\n      return newUrl.toString();\n    } catch {\n      return new URL(url, base).toString();\n    }\n  }\n  resolveEditUrl(url) {\n    return url;\n  }\n};\nlet AzureIntegration = _AzureIntegration;\nAzureIntegration.factory = ({ config }) => {\n  var _a;\n  const configs = readAzureIntegrationConfigs(\n    (_a = config.getOptionalConfigArray(\"integrations.azure\")) != null ? _a : []\n  );\n  return basicIntegrations(\n    configs.map((c) => new _AzureIntegration(c)),\n    (i) => i.config.host\n  );\n};\n\nfunction getAzureFileFetchUrl(url) {\n  return AzureUrl.fromRepoUrl(url).toFileUrl();\n}\nfunction getAzureDownloadUrl(url) {\n  return AzureUrl.fromRepoUrl(url).toArchiveUrl();\n}\nfunction getAzureCommitsUrl(url) {\n  return AzureUrl.fromRepoUrl(url).toCommitsUrl();\n}\nfunction getAzureRequestOptions(config, additionalHeaders) {\n  const headers = additionalHeaders ? { ...additionalHeaders } : {};\n  if (config.token) {\n    const buffer = Buffer.from(`:${config.token}`, \"utf8\");\n    headers.Authorization = `Basic ${buffer.toString(\"base64\")}`;\n  }\n  return { headers };\n}\n\nconst BITBUCKET_HOST = \"bitbucket.org\";\nconst BITBUCKET_API_BASE_URL = \"https://api.bitbucket.org/2.0\";\nfunction readBitbucketIntegrationConfig(config) {\n  var _a;\n  const host = (_a = config.getOptionalString(\"host\")) != null ? _a : BITBUCKET_HOST;\n  let apiBaseUrl = config.getOptionalString(\"apiBaseUrl\");\n  const token = config.getOptionalString(\"token\");\n  const username = config.getOptionalString(\"username\");\n  const appPassword = config.getOptionalString(\"appPassword\");\n  if (!isValidHost(host)) {\n    throw new Error(\n      `Invalid Bitbucket integration config, '${host}' is not a valid host`\n    );\n  }\n  if (apiBaseUrl) {\n    apiBaseUrl = trimEnd(apiBaseUrl, \"/\");\n  } else if (host === BITBUCKET_HOST) {\n    apiBaseUrl = BITBUCKET_API_BASE_URL;\n  } else {\n    apiBaseUrl = `https://${host}/rest/api/1.0`;\n  }\n  return {\n    host,\n    apiBaseUrl,\n    token,\n    username,\n    appPassword\n  };\n}\nfunction readBitbucketIntegrationConfigs(configs) {\n  const result = configs.map(readBitbucketIntegrationConfig);\n  if (!result.some((c) => c.host === BITBUCKET_HOST)) {\n    result.push({\n      host: BITBUCKET_HOST,\n      apiBaseUrl: BITBUCKET_API_BASE_URL\n    });\n  }\n  return result;\n}\n\nconst _BitbucketIntegration = class {\n  constructor(integrationConfig) {\n    this.integrationConfig = integrationConfig;\n  }\n  get type() {\n    return \"bitbucket\";\n  }\n  get title() {\n    return this.integrationConfig.host;\n  }\n  get config() {\n    return this.integrationConfig;\n  }\n  resolveUrl(options) {\n    const resolved = defaultScmResolveUrl(options);\n    if (!options.lineNumber) {\n      return resolved;\n    }\n    const url = new URL(resolved);\n    if (this.integrationConfig.host === \"bitbucket.org\") {\n      url.hash = `lines-${options.lineNumber}`;\n    } else {\n      url.hash = `${options.lineNumber}`;\n    }\n    return url.toString();\n  }\n  resolveEditUrl(url) {\n    const urlData = parseGitUrl(url);\n    const editUrl = new URL(url);\n    editUrl.searchParams.set(\"mode\", \"edit\");\n    editUrl.searchParams.set(\"spa\", \"0\");\n    editUrl.searchParams.set(\"at\", urlData.ref);\n    return editUrl.toString();\n  }\n};\nlet BitbucketIntegration = _BitbucketIntegration;\nBitbucketIntegration.factory = ({\n  config\n}) => {\n  var _a, _b, _c;\n  const configs = readBitbucketIntegrationConfigs(\n    (_c = config.getOptionalConfigArray(\"integrations.bitbucket\")) != null ? _c : [\n      ...(_a = config.getOptionalConfigArray(\"integrations.bitbucketCloud\")) != null ? _a : [],\n      ...(_b = config.getOptionalConfigArray(\"integrations.bitbucketServer\")) != null ? _b : []\n    ]\n  );\n  return basicIntegrations(\n    configs.map((c) => new _BitbucketIntegration(c)),\n    (i) => i.config.host\n  );\n};\n\nasync function getBitbucketDefaultBranch(url, config) {\n  const { name: repoName, owner: project, resource } = parseGitUrl(url);\n  const isHosted = resource === \"bitbucket.org\";\n  let branchUrl = isHosted ? `${config.apiBaseUrl}/repositories/${project}/${repoName}` : `${config.apiBaseUrl}/projects/${project}/repos/${repoName}/default-branch`;\n  let response = await fetch(branchUrl, getBitbucketRequestOptions(config));\n  if (response.status === 404 && !isHosted) {\n    branchUrl = `${config.apiBaseUrl}/projects/${project}/repos/${repoName}/branches/default`;\n    response = await fetch(branchUrl, getBitbucketRequestOptions(config));\n  }\n  if (!response.ok) {\n    const message = `Failed to retrieve default branch from ${branchUrl}, ${response.status} ${response.statusText}`;\n    throw new Error(message);\n  }\n  let defaultBranch;\n  if (isHosted) {\n    const repoInfo = await response.json();\n    defaultBranch = repoInfo.mainbranch.name;\n  } else {\n    const { displayId } = await response.json();\n    defaultBranch = displayId;\n  }\n  if (!defaultBranch) {\n    throw new Error(\n      `Failed to read default branch from ${branchUrl}. Response ${response.status} ${response.json()}`\n    );\n  }\n  return defaultBranch;\n}\nasync function getBitbucketDownloadUrl(url, config) {\n  const {\n    name: repoName,\n    owner: project,\n    ref,\n    protocol,\n    resource,\n    filepath\n  } = parseGitUrl(url);\n  const isHosted = resource === \"bitbucket.org\";\n  let branch = ref;\n  if (!branch) {\n    branch = await getBitbucketDefaultBranch(url, config);\n  }\n  const path = filepath ? `&path=${encodeURIComponent(decodeURIComponent(filepath))}` : \"\";\n  const archiveUrl = isHosted ? `${protocol}://${resource}/${project}/${repoName}/get/${branch}.tar.gz` : `${config.apiBaseUrl}/projects/${project}/repos/${repoName}/archive?format=tgz&at=${branch}&prefix=${project}-${repoName}${path}`;\n  return archiveUrl;\n}\nfunction getBitbucketFileFetchUrl(url, config) {\n  try {\n    const { owner, name, ref, filepathtype, filepath } = parseGitUrl(url);\n    if (!owner || !name || filepathtype !== \"browse\" && filepathtype !== \"raw\" && filepathtype !== \"src\") {\n      throw new Error(\"Invalid Bitbucket URL or file path\");\n    }\n    const pathWithoutSlash = filepath.replace(/^\\//, \"\");\n    if (config.host === \"bitbucket.org\") {\n      if (!ref) {\n        throw new Error(\"Invalid Bitbucket URL or file path\");\n      }\n      return `${config.apiBaseUrl}/repositories/${owner}/${name}/src/${ref}/${pathWithoutSlash}`;\n    }\n    return `${config.apiBaseUrl}/projects/${owner}/repos/${name}/raw/${pathWithoutSlash}?at=${ref}`;\n  } catch (e) {\n    throw new Error(`Incorrect URL: ${url}, ${e}`);\n  }\n}\nfunction getBitbucketRequestOptions(config) {\n  const headers = {};\n  if (config.token) {\n    headers.Authorization = `Bearer ${config.token}`;\n  } else if (config.username && config.appPassword) {\n    const buffer = Buffer.from(\n      `${config.username}:${config.appPassword}`,\n      \"utf8\"\n    );\n    headers.Authorization = `Basic ${buffer.toString(\"base64\")}`;\n  }\n  return {\n    headers\n  };\n}\n\nconst BITBUCKET_CLOUD_HOST = \"bitbucket.org\";\nconst BITBUCKET_CLOUD_API_BASE_URL = \"https://api.bitbucket.org/2.0\";\nfunction readBitbucketCloudIntegrationConfig(config) {\n  const host = BITBUCKET_CLOUD_HOST;\n  const apiBaseUrl = BITBUCKET_CLOUD_API_BASE_URL;\n  const username = config.getString(\"username\");\n  const appPassword = config.getString(\"appPassword\");\n  return {\n    host,\n    apiBaseUrl,\n    username,\n    appPassword\n  };\n}\nfunction readBitbucketCloudIntegrationConfigs(configs) {\n  const result = configs.map(readBitbucketCloudIntegrationConfig);\n  if (result.length === 0) {\n    result.push({\n      host: BITBUCKET_CLOUD_HOST,\n      apiBaseUrl: BITBUCKET_CLOUD_API_BASE_URL\n    });\n  }\n  return result;\n}\n\nconst _BitbucketCloudIntegration = class {\n  constructor(integrationConfig) {\n    this.integrationConfig = integrationConfig;\n  }\n  get type() {\n    return \"bitbucketCloud\";\n  }\n  get title() {\n    return this.integrationConfig.host;\n  }\n  get config() {\n    return this.integrationConfig;\n  }\n  resolveUrl(options) {\n    const resolved = defaultScmResolveUrl(options);\n    if (options.lineNumber) {\n      const url = new URL(resolved);\n      url.hash = `lines-${options.lineNumber}`;\n      return url.toString();\n    }\n    return resolved;\n  }\n  resolveEditUrl(url) {\n    const urlData = parseGitUrl(url);\n    const editUrl = new URL(url);\n    editUrl.searchParams.set(\"mode\", \"edit\");\n    editUrl.searchParams.set(\"at\", urlData.ref);\n    return editUrl.toString();\n  }\n};\nlet BitbucketCloudIntegration = _BitbucketCloudIntegration;\nBitbucketCloudIntegration.factory = ({\n  config\n}) => {\n  var _a;\n  const configs = readBitbucketCloudIntegrationConfigs(\n    (_a = config.getOptionalConfigArray(\"integrations.bitbucketCloud\")) != null ? _a : []\n  );\n  return basicIntegrations(\n    configs.map((c) => new _BitbucketCloudIntegration(c)),\n    (i) => i.config.host\n  );\n};\n\nasync function getBitbucketCloudDefaultBranch(url, config) {\n  const { name: repoName, owner: project } = parseGitUrl(url);\n  const branchUrl = `${config.apiBaseUrl}/repositories/${project}/${repoName}`;\n  const response = await fetch(\n    branchUrl,\n    getBitbucketCloudRequestOptions(config)\n  );\n  if (!response.ok) {\n    const message = `Failed to retrieve default branch from ${branchUrl}, ${response.status} ${response.statusText}`;\n    throw new Error(message);\n  }\n  const repoInfo = await response.json();\n  const defaultBranch = repoInfo.mainbranch.name;\n  if (!defaultBranch) {\n    throw new Error(\n      `Failed to read default branch from ${branchUrl}. Response ${response.status} ${response.json()}`\n    );\n  }\n  return defaultBranch;\n}\nasync function getBitbucketCloudDownloadUrl(url, config) {\n  const {\n    name: repoName,\n    owner: project,\n    ref,\n    protocol,\n    resource\n  } = parseGitUrl(url);\n  let branch = ref;\n  if (!branch) {\n    branch = await getBitbucketCloudDefaultBranch(url, config);\n  }\n  return `${protocol}://${resource}/${project}/${repoName}/get/${branch}.tar.gz`;\n}\nfunction getBitbucketCloudFileFetchUrl(url, config) {\n  try {\n    const { owner, name, ref, filepathtype, filepath } = parseGitUrl(url);\n    if (!owner || !name || filepathtype !== \"src\" && filepathtype !== \"raw\") {\n      throw new Error(\"Invalid Bitbucket Cloud URL or file path\");\n    }\n    const pathWithoutSlash = filepath.replace(/^\\//, \"\");\n    if (!ref) {\n      throw new Error(\"Invalid Bitbucket Cloud URL or file path\");\n    }\n    return `${config.apiBaseUrl}/repositories/${owner}/${name}/src/${ref}/${pathWithoutSlash}`;\n  } catch (e) {\n    throw new Error(`Incorrect URL: ${url}, ${e}`);\n  }\n}\nfunction getBitbucketCloudRequestOptions(config) {\n  const headers = {};\n  if (config.username && config.appPassword) {\n    const buffer = Buffer.from(\n      `${config.username}:${config.appPassword}`,\n      \"utf8\"\n    );\n    headers.Authorization = `Basic ${buffer.toString(\"base64\")}`;\n  }\n  return {\n    headers\n  };\n}\n\nfunction readBitbucketServerIntegrationConfig(config) {\n  const host = config.getString(\"host\");\n  let apiBaseUrl = config.getOptionalString(\"apiBaseUrl\");\n  const token = config.getOptionalString(\"token\");\n  const username = config.getOptionalString(\"username\");\n  const password = config.getOptionalString(\"password\");\n  if (!isValidHost(host)) {\n    throw new Error(\n      `Invalid Bitbucket Server integration config, '${host}' is not a valid host`\n    );\n  }\n  if (apiBaseUrl) {\n    apiBaseUrl = trimEnd(apiBaseUrl, \"/\");\n  } else {\n    apiBaseUrl = `https://${host}/rest/api/1.0`;\n  }\n  return {\n    host,\n    apiBaseUrl,\n    token,\n    username,\n    password\n  };\n}\nfunction readBitbucketServerIntegrationConfigs(configs) {\n  return configs.map(readBitbucketServerIntegrationConfig);\n}\n\nconst _BitbucketServerIntegration = class {\n  constructor(integrationConfig) {\n    this.integrationConfig = integrationConfig;\n  }\n  get type() {\n    return \"bitbucketServer\";\n  }\n  get title() {\n    return this.integrationConfig.host;\n  }\n  get config() {\n    return this.integrationConfig;\n  }\n  resolveUrl(options) {\n    const resolved = defaultScmResolveUrl(options);\n    if (options.lineNumber) {\n      const url = new URL(resolved);\n      url.hash = options.lineNumber.toString();\n      return url.toString();\n    }\n    return resolved;\n  }\n  resolveEditUrl(url) {\n    if (url.includes(\"?\")) {\n      return url.substring(0, url.indexOf(\"?\"));\n    }\n    return url;\n  }\n};\nlet BitbucketServerIntegration = _BitbucketServerIntegration;\nBitbucketServerIntegration.factory = ({\n  config\n}) => {\n  var _a;\n  const configs = readBitbucketServerIntegrationConfigs(\n    (_a = config.getOptionalConfigArray(\"integrations.bitbucketServer\")) != null ? _a : []\n  );\n  return basicIntegrations(\n    configs.map((c) => new _BitbucketServerIntegration(c)),\n    (i) => i.config.host\n  );\n};\n\nasync function getBitbucketServerDefaultBranch(url, config) {\n  const { name: repoName, owner: project } = parseGitUrl(url);\n  let branchUrl = `${config.apiBaseUrl}/projects/${project}/repos/${repoName}/default-branch`;\n  let response = await fetch(\n    branchUrl,\n    getBitbucketServerRequestOptions(config)\n  );\n  if (response.status === 404) {\n    branchUrl = `${config.apiBaseUrl}/projects/${project}/repos/${repoName}/branches/default`;\n    response = await fetch(branchUrl, getBitbucketServerRequestOptions(config));\n  }\n  if (!response.ok) {\n    const message = `Failed to retrieve default branch from ${branchUrl}, ${response.status} ${response.statusText}`;\n    throw new Error(message);\n  }\n  const { displayId } = await response.json();\n  const defaultBranch = displayId;\n  if (!defaultBranch) {\n    throw new Error(\n      `Failed to read default branch from ${branchUrl}. Response ${response.status} ${response.json()}`\n    );\n  }\n  return defaultBranch;\n}\nasync function getBitbucketServerDownloadUrl(url, config) {\n  const { name: repoName, owner: project, ref, filepath } = parseGitUrl(url);\n  let branch = ref;\n  if (!branch) {\n    branch = await getBitbucketServerDefaultBranch(url, config);\n  }\n  const path = filepath ? `&path=${encodeURIComponent(decodeURIComponent(filepath))}` : \"\";\n  return `${config.apiBaseUrl}/projects/${project}/repos/${repoName}/archive?format=tgz&at=${branch}&prefix=${project}-${repoName}${path}`;\n}\nfunction getBitbucketServerFileFetchUrl(url, config) {\n  try {\n    const { owner, name, ref, filepathtype, filepath } = parseGitUrl(url);\n    if (!owner || !name || filepathtype !== \"browse\" && filepathtype !== \"raw\" && filepathtype !== \"src\") {\n      throw new Error(\"Invalid Bitbucket Server URL or file path\");\n    }\n    const pathWithoutSlash = filepath.replace(/^\\//, \"\");\n    return `${config.apiBaseUrl}/projects/${owner}/repos/${name}/raw/${pathWithoutSlash}?at=${ref}`;\n  } catch (e) {\n    throw new Error(`Incorrect URL: ${url}, ${e}`);\n  }\n}\nfunction getBitbucketServerRequestOptions(config) {\n  const headers = {};\n  if (config.token) {\n    headers.Authorization = `Bearer ${config.token}`;\n  } else if (config.username && config.password) {\n    const buffer = Buffer.from(`${config.username}:${config.password}`, \"utf8\");\n    headers.Authorization = `Basic ${buffer.toString(\"base64\")}`;\n  }\n  return {\n    headers\n  };\n}\n\nfunction readGerritIntegrationConfig(config) {\n  const host = config.getString(\"host\");\n  let baseUrl = config.getOptionalString(\"baseUrl\");\n  let cloneUrl = config.getOptionalString(\"cloneUrl\");\n  let gitilesBaseUrl = config.getOptionalString(\"gitilesBaseUrl\");\n  const username = config.getOptionalString(\"username\");\n  const password = config.getOptionalString(\"password\");\n  if (!isValidHost(host)) {\n    throw new Error(\n      `Invalid Gerrit integration config, '${host}' is not a valid host`\n    );\n  } else if (baseUrl && !isValidUrl(baseUrl)) {\n    throw new Error(\n      `Invalid Gerrit integration config, '${baseUrl}' is not a valid baseUrl`\n    );\n  } else if (cloneUrl && !isValidUrl(cloneUrl)) {\n    throw new Error(\n      `Invalid Gerrit integration config, '${cloneUrl}' is not a valid cloneUrl`\n    );\n  } else if (gitilesBaseUrl && !isValidUrl(gitilesBaseUrl)) {\n    throw new Error(\n      `Invalid Gerrit integration config, '${gitilesBaseUrl}' is not a valid gitilesBaseUrl`\n    );\n  }\n  if (baseUrl) {\n    baseUrl = trimEnd(baseUrl, \"/\");\n  } else {\n    baseUrl = `https://${host}`;\n  }\n  if (gitilesBaseUrl) {\n    gitilesBaseUrl = trimEnd(gitilesBaseUrl, \"/\");\n  } else {\n    gitilesBaseUrl = `https://${host}`;\n  }\n  if (cloneUrl) {\n    cloneUrl = trimEnd(cloneUrl, \"/\");\n  } else {\n    cloneUrl = baseUrl;\n  }\n  return {\n    host,\n    baseUrl,\n    cloneUrl,\n    gitilesBaseUrl,\n    username,\n    password\n  };\n}\nfunction readGerritIntegrationConfigs(configs) {\n  return configs.map(readGerritIntegrationConfig);\n}\n\nconst GERRIT_BODY_PREFIX = \")]}'\";\nfunction parseGerritGitilesUrl(config, url) {\n  const urlPath = url.replace(config.gitilesBaseUrl, \"\");\n  const parts = urlPath.split(\"/\").filter((p) => !!p);\n  const projectEndIndex = parts.indexOf(\"+\");\n  if (projectEndIndex <= 0) {\n    throw new Error(`Unable to parse project from url: ${url}`);\n  }\n  const project = trimStart(parts.slice(0, projectEndIndex).join(\"/\"), \"/\");\n  const branchIndex = parts.indexOf(\"heads\");\n  if (branchIndex <= 0) {\n    throw new Error(`Unable to parse branch from url: ${url}`);\n  }\n  const branch = parts[branchIndex + 1];\n  const filePath = parts.slice(branchIndex + 2).join(\"/\");\n  return {\n    branch,\n    filePath: filePath === \"\" ? \"/\" : filePath,\n    project\n  };\n}\nfunction builldGerritGitilesUrl(config, project, branch, filePath) {\n  return `${config.gitilesBaseUrl}/${project}/+/refs/heads/${branch}/${trimStart(filePath, \"/\")}`;\n}\nfunction getAuthenticationPrefix(config) {\n  return config.password ? \"/a/\" : \"/\";\n}\nfunction getGerritBranchApiUrl(config, url) {\n  const { branch, project } = parseGerritGitilesUrl(config, url);\n  return `${config.baseUrl}${getAuthenticationPrefix(\n    config\n  )}projects/${encodeURIComponent(project)}/branches/${branch}`;\n}\nfunction getGerritCloneRepoUrl(config, url) {\n  const { project } = parseGerritGitilesUrl(config, url);\n  return `${config.cloneUrl}${getAuthenticationPrefix(config)}${project}`;\n}\nfunction getGerritFileContentsApiUrl(config, url) {\n  const { branch, filePath, project } = parseGerritGitilesUrl(config, url);\n  return `${config.baseUrl}${getAuthenticationPrefix(\n    config\n  )}projects/${encodeURIComponent(\n    project\n  )}/branches/${branch}/files/${encodeURIComponent(filePath)}/content`;\n}\nfunction getGerritProjectsApiUrl(config) {\n  return `${config.baseUrl}${getAuthenticationPrefix(config)}projects/`;\n}\nfunction getGerritRequestOptions(config) {\n  const headers = {};\n  if (!config.password) {\n    return headers;\n  }\n  const buffer = Buffer.from(`${config.username}:${config.password}`, \"utf8\");\n  headers.Authorization = `Basic ${buffer.toString(\"base64\")}`;\n  return {\n    headers\n  };\n}\nasync function parseGerritJsonResponse(response) {\n  const responseBody = await response.text();\n  if (responseBody.startsWith(GERRIT_BODY_PREFIX)) {\n    try {\n      return JSON.parse(responseBody.slice(GERRIT_BODY_PREFIX.length));\n    } catch (ex) {\n      throw new Error(\n        `Invalid response from Gerrit: ${responseBody.slice(0, 10)} - ${ex}`\n      );\n    }\n  }\n  throw new Error(\n    `Gerrit JSON body prefix missing. Found: ${responseBody.slice(0, 10)}`\n  );\n}\n\nconst _GerritIntegration = class {\n  constructor(integrationConfig) {\n    this.integrationConfig = integrationConfig;\n  }\n  get type() {\n    return \"gerrit\";\n  }\n  get title() {\n    return this.integrationConfig.host;\n  }\n  get config() {\n    return this.integrationConfig;\n  }\n  resolveUrl(options) {\n    const { url, base, lineNumber } = options;\n    let updated;\n    if (url.startsWith(\"/\")) {\n      const { branch, project } = parseGerritGitilesUrl(this.config, base);\n      return builldGerritGitilesUrl(this.config, project, branch, url);\n    }\n    if (url) {\n      updated = new URL(url, base);\n    } else {\n      updated = new URL(base);\n    }\n    if (lineNumber) {\n      updated.hash = lineNumber.toString();\n    }\n    return updated.toString();\n  }\n  resolveEditUrl(url) {\n    return url;\n  }\n};\nlet GerritIntegration = _GerritIntegration;\nGerritIntegration.factory = ({ config }) => {\n  var _a;\n  const configs = readGerritIntegrationConfigs(\n    (_a = config.getOptionalConfigArray(\"integrations.gerrit\")) != null ? _a : []\n  );\n  return basicIntegrations(\n    configs.map((c) => new _GerritIntegration(c)),\n    (i) => i.config.host\n  );\n};\n\nconst GITHUB_HOST = \"github.com\";\nconst GITHUB_API_BASE_URL = \"https://api.github.com\";\nconst GITHUB_RAW_BASE_URL = \"https://raw.githubusercontent.com\";\nfunction readGitHubIntegrationConfig(config) {\n  var _a, _b;\n  const host = (_a = config.getOptionalString(\"host\")) != null ? _a : GITHUB_HOST;\n  let apiBaseUrl = config.getOptionalString(\"apiBaseUrl\");\n  let rawBaseUrl = config.getOptionalString(\"rawBaseUrl\");\n  const token = config.getOptionalString(\"token\");\n  const apps = (_b = config.getOptionalConfigArray(\"apps\")) == null ? void 0 : _b.map((c) => ({\n    appId: c.getNumber(\"appId\"),\n    clientId: c.getString(\"clientId\"),\n    clientSecret: c.getString(\"clientSecret\"),\n    webhookSecret: c.getString(\"webhookSecret\"),\n    privateKey: c.getString(\"privateKey\"),\n    allowedInstallationOwners: c.getOptionalStringArray(\n      \"allowedInstallationOwners\"\n    )\n  }));\n  if (!isValidHost(host)) {\n    throw new Error(\n      `Invalid GitHub integration config, '${host}' is not a valid host`\n    );\n  }\n  if (apiBaseUrl) {\n    apiBaseUrl = trimEnd(apiBaseUrl, \"/\");\n  } else if (host === GITHUB_HOST) {\n    apiBaseUrl = GITHUB_API_BASE_URL;\n  }\n  if (rawBaseUrl) {\n    rawBaseUrl = trimEnd(rawBaseUrl, \"/\");\n  } else if (host === GITHUB_HOST) {\n    rawBaseUrl = GITHUB_RAW_BASE_URL;\n  }\n  return { host, apiBaseUrl, rawBaseUrl, token, apps };\n}\nfunction readGitHubIntegrationConfigs(configs) {\n  const result = configs.map(readGitHubIntegrationConfig);\n  if (!result.some((c) => c.host === GITHUB_HOST)) {\n    result.push({\n      host: GITHUB_HOST,\n      apiBaseUrl: GITHUB_API_BASE_URL,\n      rawBaseUrl: GITHUB_RAW_BASE_URL\n    });\n  }\n  return result;\n}\n\nfunction getGitHubFileFetchUrl(url, config, credentials) {\n  try {\n    const { owner, name, ref, filepathtype, filepath } = parseGitUrl(url);\n    if (!owner || !name || !ref || filepathtype !== \"blob\" && filepathtype !== \"raw\" && filepathtype !== \"tree\") {\n      throw new Error(\"Invalid GitHub URL or file path\");\n    }\n    const pathWithoutSlash = filepath.replace(/^\\//, \"\");\n    if (chooseEndpoint(config, credentials) === \"api\") {\n      return `${config.apiBaseUrl}/repos/${owner}/${name}/contents/${pathWithoutSlash}?ref=${ref}`;\n    }\n    return `${config.rawBaseUrl}/${owner}/${name}/${ref}/${pathWithoutSlash}`;\n  } catch (e) {\n    throw new Error(`Incorrect URL: ${url}, ${e}`);\n  }\n}\nfunction getGitHubRequestOptions(config, credentials) {\n  const headers = {};\n  if (chooseEndpoint(config, credentials) === \"api\") {\n    headers.Accept = \"application/vnd.github.v3.raw\";\n  }\n  if (credentials.token) {\n    headers.Authorization = `token ${credentials.token}`;\n  }\n  return { headers };\n}\nfunction chooseEndpoint(config, credentials) {\n  if (config.apiBaseUrl && (credentials.token || !config.rawBaseUrl)) {\n    return \"api\";\n  }\n  return \"raw\";\n}\n\nclass Cache {\n  constructor() {\n    this.tokenCache = /* @__PURE__ */ new Map();\n    this.isExpired = (date) => DateTime.local() > date;\n  }\n  async getOrCreateToken(owner, repo, supplier) {\n    let existingInstallationData = this.tokenCache.get(owner);\n    if (!existingInstallationData || this.isExpired(existingInstallationData.expiresAt)) {\n      existingInstallationData = await supplier();\n      existingInstallationData.expiresAt = existingInstallationData.expiresAt.minus({ minutes: 10 });\n      this.tokenCache.set(owner, existingInstallationData);\n    }\n    if (!this.appliesToRepo(existingInstallationData, repo)) {\n      throw new Error(\n        `The Backstage GitHub application used in the ${owner} organization does not have access to a repository with the name ${repo}`\n      );\n    }\n    return { accessToken: existingInstallationData.token };\n  }\n  appliesToRepo(tokenData, repo) {\n    if (repo === void 0) {\n      return true;\n    }\n    if (tokenData.repositories !== void 0) {\n      return tokenData.repositories.includes(repo);\n    }\n    return true;\n  }\n}\nconst HEADERS = {\n  Accept: \"application/vnd.github.machine-man-preview+json\"\n};\nclass GithubAppManager {\n  constructor(config, baseUrl) {\n    this.cache = new Cache();\n    this.allowedInstallationOwners = config.allowedInstallationOwners;\n    this.baseUrl = baseUrl;\n    this.baseAuthConfig = {\n      appId: config.appId,\n      privateKey: config.privateKey.replace(/\\\\n/gm, \"\\n\")\n    };\n    this.appClient = new Octokit({\n      baseUrl,\n      headers: HEADERS,\n      authStrategy: createAppAuth,\n      auth: this.baseAuthConfig\n    });\n  }\n  async getInstallationCredentials(owner, repo) {\n    var _a;\n    if (this.allowedInstallationOwners) {\n      if (!((_a = this.allowedInstallationOwners) == null ? void 0 : _a.includes(owner))) {\n        return { accessToken: void 0 };\n      }\n    }\n    return this.cache.getOrCreateToken(owner, repo, async () => {\n      var _a2;\n      const { installationId, suspended } = await this.getInstallationData(\n        owner\n      );\n      if (suspended) {\n        throw new Error(`The GitHub application for ${owner} is suspended`);\n      }\n      const result = await this.appClient.apps.createInstallationAccessToken({\n        installation_id: installationId,\n        headers: HEADERS\n      });\n      let repositoryNames;\n      if (result.data.repository_selection === \"selected\") {\n        const installationClient = new Octokit({\n          baseUrl: this.baseUrl,\n          auth: result.data.token\n        });\n        const repos = await installationClient.paginate(\n          installationClient.apps.listReposAccessibleToInstallation\n        );\n        const repositories = (_a2 = repos.repositories) != null ? _a2 : repos;\n        repositoryNames = repositories.map((repository) => repository.name);\n      }\n      return {\n        token: result.data.token,\n        expiresAt: DateTime.fromISO(result.data.expires_at),\n        repositories: repositoryNames\n      };\n    });\n  }\n  getInstallations() {\n    return this.appClient.paginate(this.appClient.apps.listInstallations);\n  }\n  async getInstallationData(owner) {\n    const allInstallations = await this.getInstallations();\n    const installation = allInstallations.find(\n      (inst) => {\n        var _a, _b;\n        return ((_b = (_a = inst.account) == null ? void 0 : _a.login) == null ? void 0 : _b.toLocaleLowerCase(\"en-US\")) === owner.toLocaleLowerCase(\"en-US\");\n      }\n    );\n    if (installation) {\n      return {\n        installationId: installation.id,\n        suspended: Boolean(installation.suspended_by)\n      };\n    }\n    const notFoundError = new Error(\n      `No app installation found for ${owner} in ${this.baseAuthConfig.appId}`\n    );\n    notFoundError.name = \"NotFoundError\";\n    throw notFoundError;\n  }\n}\nclass GithubAppCredentialsMux {\n  constructor(config) {\n    var _a, _b;\n    this.apps = (_b = (_a = config.apps) == null ? void 0 : _a.map((ac) => new GithubAppManager(ac, config.apiBaseUrl))) != null ? _b : [];\n  }\n  async getAllInstallations() {\n    if (!this.apps.length) {\n      return [];\n    }\n    const installs = await Promise.all(\n      this.apps.map((app) => app.getInstallations())\n    );\n    return installs.flat();\n  }\n  async getAppToken(owner, repo) {\n    if (this.apps.length === 0) {\n      return void 0;\n    }\n    const results = await Promise.all(\n      this.apps.map(\n        (app) => app.getInstallationCredentials(owner, repo).then(\n          (credentials) => ({ credentials, error: void 0 }),\n          (error) => ({ credentials: void 0, error })\n        )\n      )\n    );\n    const result = results.find((resultItem) => resultItem.credentials);\n    if (result) {\n      return result.credentials.accessToken;\n    }\n    const errors = results.map((r) => r.error);\n    const notNotFoundError = errors.find((err) => err.name !== \"NotFoundError\");\n    if (notNotFoundError) {\n      throw notNotFoundError;\n    }\n    return void 0;\n  }\n}\nconst _SingleInstanceGithubCredentialsProvider = class {\n  constructor(githubAppCredentialsMux, token) {\n    this.githubAppCredentialsMux = githubAppCredentialsMux;\n    this.token = token;\n  }\n  async getCredentials(opts) {\n    const parsed = parseGitUrl(opts.url);\n    const owner = parsed.owner || parsed.name;\n    const repo = parsed.owner ? parsed.name : void 0;\n    let type = \"app\";\n    let token = await this.githubAppCredentialsMux.getAppToken(owner, repo);\n    if (!token) {\n      type = \"token\";\n      token = this.token;\n    }\n    return {\n      headers: token ? { Authorization: `Bearer ${token}` } : void 0,\n      token,\n      type\n    };\n  }\n};\nlet SingleInstanceGithubCredentialsProvider = _SingleInstanceGithubCredentialsProvider;\nSingleInstanceGithubCredentialsProvider.create = (config) => {\n  return new _SingleInstanceGithubCredentialsProvider(\n    new GithubAppCredentialsMux(config),\n    config.token\n  );\n};\n\nclass DefaultGithubCredentialsProvider {\n  constructor(providers) {\n    this.providers = providers;\n  }\n  static fromIntegrations(integrations) {\n    const credentialsProviders = /* @__PURE__ */ new Map();\n    integrations.github.list().forEach((integration) => {\n      const credentialsProvider = SingleInstanceGithubCredentialsProvider.create(integration.config);\n      credentialsProviders.set(integration.config.host, credentialsProvider);\n    });\n    return new DefaultGithubCredentialsProvider(credentialsProviders);\n  }\n  async getCredentials(opts) {\n    const parsed = new URL(opts.url);\n    const provider = this.providers.get(parsed.host);\n    if (!provider) {\n      throw new Error(\n        `There is no GitHub integration that matches ${opts.url}. Please add a configuration for an integration.`\n      );\n    }\n    return provider.getCredentials(opts);\n  }\n}\n\nconst _GitHubIntegration = class {\n  constructor(integrationConfig) {\n    this.integrationConfig = integrationConfig;\n  }\n  get type() {\n    return \"github\";\n  }\n  get title() {\n    return this.integrationConfig.host;\n  }\n  get config() {\n    return this.integrationConfig;\n  }\n  resolveUrl(options) {\n    return replaceGitHubUrlType(defaultScmResolveUrl(options), \"tree\");\n  }\n  resolveEditUrl(url) {\n    return replaceGitHubUrlType(url, \"edit\");\n  }\n};\nlet GitHubIntegration = _GitHubIntegration;\nGitHubIntegration.factory = ({ config }) => {\n  var _a;\n  const configs = readGitHubIntegrationConfigs(\n    (_a = config.getOptionalConfigArray(\"integrations.github\")) != null ? _a : []\n  );\n  return basicIntegrations(\n    configs.map((c) => new _GitHubIntegration(c)),\n    (i) => i.config.host\n  );\n};\nfunction replaceGitHubUrlType(url, type) {\n  return url.replace(\n    /\\/\\/([^/]+)\\/([^/]+)\\/([^/]+)\\/(blob|tree|edit)\\//,\n    (_, host, owner, repo) => {\n      return `//${host}/${owner}/${repo}/${type}/`;\n    }\n  );\n}\n\nconst GITLAB_HOST = \"gitlab.com\";\nconst GITLAB_API_BASE_URL = \"https://gitlab.com/api/v4\";\nfunction readGitLabIntegrationConfig(config) {\n  const host = config.getString(\"host\");\n  let apiBaseUrl = config.getOptionalString(\"apiBaseUrl\");\n  const token = config.getOptionalString(\"token\");\n  let baseUrl = config.getOptionalString(\"baseUrl\");\n  if (apiBaseUrl) {\n    apiBaseUrl = trimEnd(apiBaseUrl, \"/\");\n  } else if (host === GITLAB_HOST) {\n    apiBaseUrl = GITLAB_API_BASE_URL;\n  }\n  if (baseUrl) {\n    baseUrl = trimEnd(baseUrl, \"/\");\n  } else {\n    baseUrl = `https://${host}`;\n  }\n  if (!isValidHost(host)) {\n    throw new Error(\n      `Invalid GitLab integration config, '${host}' is not a valid host`\n    );\n  } else if (!apiBaseUrl || !isValidUrl(apiBaseUrl)) {\n    throw new Error(\n      `Invalid GitLab integration config, '${apiBaseUrl}' is not a valid apiBaseUrl`\n    );\n  } else if (!isValidUrl(baseUrl)) {\n    throw new Error(\n      `Invalid GitLab integration config, '${baseUrl}' is not a valid baseUrl`\n    );\n  }\n  return { host, token, apiBaseUrl, baseUrl };\n}\nfunction readGitLabIntegrationConfigs(configs) {\n  const result = configs.map(readGitLabIntegrationConfig);\n  if (!result.some((c) => c.host === GITLAB_HOST)) {\n    result.push({\n      host: GITLAB_HOST,\n      apiBaseUrl: GITLAB_API_BASE_URL,\n      baseUrl: `https://${GITLAB_HOST}`\n    });\n  }\n  return result;\n}\nfunction getGitLabIntegrationRelativePath(config) {\n  let relativePath = \"\";\n  if (config.host !== GITLAB_HOST) {\n    relativePath = new URL(config.baseUrl).pathname;\n  }\n  return trimEnd(relativePath, \"/\");\n}\n\nasync function getGitLabFileFetchUrl(url, config) {\n  const projectID = await getProjectId(url, config);\n  return buildProjectUrl(url, projectID, config).toString();\n}\nfunction getGitLabRequestOptions(config) {\n  const { token = \"\" } = config;\n  return {\n    headers: {\n      \"PRIVATE-TOKEN\": token\n    }\n  };\n}\nfunction buildProjectUrl(target, projectID, config) {\n  try {\n    const url = new URL(target);\n    const branchAndFilePath = url.pathname.split(\"/blob/\").slice(1).join(\"/blob/\");\n    const [branch, ...filePath] = branchAndFilePath.split(\"/\");\n    const relativePath = getGitLabIntegrationRelativePath(config);\n    url.pathname = [\n      ...relativePath ? [relativePath] : [],\n      \"api/v4/projects\",\n      projectID,\n      \"repository/files\",\n      encodeURIComponent(decodeURIComponent(filePath.join(\"/\"))),\n      \"raw\"\n    ].join(\"/\");\n    url.search = `?ref=${branch}`;\n    return url;\n  } catch (e) {\n    throw new Error(`Incorrect url: ${target}, ${e}`);\n  }\n}\nasync function getProjectId(target, config) {\n  const url = new URL(target);\n  if (!url.pathname.includes(\"/blob/\")) {\n    throw new Error(\"Please provide full path to yaml file from GitLab\");\n  }\n  try {\n    let repo = url.pathname.split(\"/-/blob/\")[0].split(\"/blob/\")[0];\n    const relativePath = getGitLabIntegrationRelativePath(config);\n    if (relativePath) {\n      repo = repo.replace(relativePath, \"\");\n    }\n    const repoIDLookup = new URL(\n      `${url.origin}${relativePath}/api/v4/projects/${encodeURIComponent(\n        repo.replace(/^\\//, \"\")\n      )}`\n    );\n    const response = await fetch(\n      repoIDLookup.toString(),\n      getGitLabRequestOptions(config)\n    );\n    const data = await response.json();\n    if (!response.ok) {\n      throw new Error(\n        `GitLab Error '${data.error}', ${data.error_description}`\n      );\n    }\n    return Number(data.id);\n  } catch (e) {\n    throw new Error(`Could not get GitLab project ID for: ${target}, ${e}`);\n  }\n}\n\nconst _GitLabIntegration = class {\n  constructor(integrationConfig) {\n    this.integrationConfig = integrationConfig;\n  }\n  get type() {\n    return \"gitlab\";\n  }\n  get title() {\n    return this.integrationConfig.host;\n  }\n  get config() {\n    return this.integrationConfig;\n  }\n  resolveUrl(options) {\n    return defaultScmResolveUrl(options);\n  }\n  resolveEditUrl(url) {\n    return replaceGitLabUrlType(url, \"edit\");\n  }\n};\nlet GitLabIntegration = _GitLabIntegration;\nGitLabIntegration.factory = ({ config }) => {\n  var _a;\n  const configs = readGitLabIntegrationConfigs(\n    (_a = config.getOptionalConfigArray(\"integrations.gitlab\")) != null ? _a : []\n  );\n  return basicIntegrations(\n    configs.map((c) => new _GitLabIntegration(c)),\n    (i) => i.config.host\n  );\n};\nfunction replaceGitLabUrlType(url, type) {\n  return url.replace(/\\/\\-\\/(blob|tree|edit)\\//, `/-/${type}/`);\n}\n\nfunction readGoogleGcsIntegrationConfig(config) {\n  if (!config) {\n    return {};\n  }\n  if (!config.has(\"clientEmail\") && !config.has(\"privateKey\")) {\n    return {};\n  }\n  const privateKey = config.getString(\"privateKey\").split(\"\\\\n\").join(\"\\n\");\n  const clientEmail = config.getString(\"clientEmail\");\n  return { clientEmail, privateKey };\n}\n\nclass ScmIntegrations {\n  static fromConfig(config) {\n    return new ScmIntegrations({\n      awsS3: AwsS3Integration.factory({ config }),\n      azure: AzureIntegration.factory({ config }),\n      bitbucket: BitbucketIntegration.factory({ config }),\n      bitbucketCloud: BitbucketCloudIntegration.factory({ config }),\n      bitbucketServer: BitbucketServerIntegration.factory({ config }),\n      gerrit: GerritIntegration.factory({ config }),\n      github: GitHubIntegration.factory({ config }),\n      gitlab: GitLabIntegration.factory({ config })\n    });\n  }\n  constructor(integrationsByType) {\n    this.byType = integrationsByType;\n  }\n  get awsS3() {\n    return this.byType.awsS3;\n  }\n  get azure() {\n    return this.byType.azure;\n  }\n  get bitbucket() {\n    return this.byType.bitbucket;\n  }\n  get bitbucketCloud() {\n    return this.byType.bitbucketCloud;\n  }\n  get bitbucketServer() {\n    return this.byType.bitbucketServer;\n  }\n  get gerrit() {\n    return this.byType.gerrit;\n  }\n  get github() {\n    return this.byType.github;\n  }\n  get gitlab() {\n    return this.byType.gitlab;\n  }\n  list() {\n    return Object.values(this.byType).flatMap(\n      (i) => i.list()\n    );\n  }\n  byUrl(url) {\n    let candidates = Object.values(this.byType).map((i) => i.byUrl(url)).filter(Boolean);\n    if (candidates.length > 1) {\n      const filteredCandidates = candidates.filter(\n        (x) => !(x instanceof BitbucketIntegration)\n      );\n      if (filteredCandidates.length !== 0) {\n        candidates = filteredCandidates;\n      }\n    }\n    return candidates[0];\n  }\n  byHost(host) {\n    return Object.values(this.byType).map((i) => i.byHost(host)).find(Boolean);\n  }\n  resolveUrl(options) {\n    const integration = this.byUrl(options.base);\n    if (!integration) {\n      return defaultScmResolveUrl(options);\n    }\n    return integration.resolveUrl(options);\n  }\n  resolveEditUrl(url) {\n    const integration = this.byUrl(url);\n    if (!integration) {\n      return url;\n    }\n    return integration.resolveEditUrl(url);\n  }\n}\n\nexport { AwsS3Integration, AzureIntegration, BitbucketCloudIntegration, BitbucketIntegration, BitbucketServerIntegration, DefaultGithubCredentialsProvider, GerritIntegration, GitHubIntegration, GitLabIntegration, GithubAppCredentialsMux, ScmIntegrations, SingleInstanceGithubCredentialsProvider, defaultScmResolveUrl, getAzureCommitsUrl, getAzureDownloadUrl, getAzureFileFetchUrl, getAzureRequestOptions, getBitbucketCloudDefaultBranch, getBitbucketCloudDownloadUrl, getBitbucketCloudFileFetchUrl, getBitbucketCloudRequestOptions, getBitbucketDefaultBranch, getBitbucketDownloadUrl, getBitbucketFileFetchUrl, getBitbucketRequestOptions, getBitbucketServerDefaultBranch, getBitbucketServerDownloadUrl, getBitbucketServerFileFetchUrl, getBitbucketServerRequestOptions, getGerritBranchApiUrl, getGerritCloneRepoUrl, getGerritFileContentsApiUrl, getGerritProjectsApiUrl, getGerritRequestOptions, getGitHubFileFetchUrl, getGitHubRequestOptions, getGitLabFileFetchUrl, getGitLabIntegrationRelativePath, getGitLabRequestOptions, parseGerritGitilesUrl, parseGerritJsonResponse, readAwsS3IntegrationConfig, readAwsS3IntegrationConfigs, readAzureIntegrationConfig, readAzureIntegrationConfigs, readBitbucketCloudIntegrationConfig, readBitbucketCloudIntegrationConfigs, readBitbucketIntegrationConfig, readBitbucketIntegrationConfigs, readBitbucketServerIntegrationConfig, readBitbucketServerIntegrationConfigs, readGerritIntegrationConfig, readGerritIntegrationConfigs, readGitHubIntegrationConfig, readGitHubIntegrationConfigs, readGitLabIntegrationConfig, readGitLabIntegrationConfigs, readGoogleGcsIntegrationConfig, replaceGitHubUrlType, replaceGitLabUrlType };\n//# sourceMappingURL=index.esm.js.map\n","import React, { Suspense } from 'react';\nimport { useOutlet } from 'react-router';\nimport { PageWithHeader, Content, ContentHeader, CreateButton, SupportButton, CodeSnippet, TabbedCard, CardTab, Progress, InfoCard, WarningPanel, Link } from '@backstage/core-components';\nimport { createRouteRef, createExternalRouteRef, useApi, configApiRef, useRouteRef, createApiRef, createPlugin, createApiFactory, createRoutableExtension, createComponentExtension } from '@backstage/core-plugin-api';\nimport { CatalogTable } from '@backstage/plugin-catalog';\nimport { EntityListProvider, CatalogFilterLayout, EntityKindPicker, EntityTypePicker, UserListPicker, EntityOwnerPicker, EntityLifecyclePicker, EntityTagPicker, useEntity, EntityTable, useRelatedEntities } from '@backstage/plugin-catalog-react';\nimport { Alert } from '@material-ui/lab';\nimport { useTheme } from '@material-ui/core/styles';\nimport { RELATION_CONSUMES_API, RELATION_HAS_PART, RELATION_PROVIDES_API, RELATION_API_CONSUMED_BY, RELATION_API_PROVIDED_BY } from '@backstage/catalog-model';\nimport { Typography } from '@material-ui/core';\n\nconst rootRoute = createRouteRef({\n  id: \"api-docs\"\n});\nconst registerComponentRouteRef = createExternalRouteRef({\n  id: \"register-component\",\n  optional: true\n});\n\nconst defaultColumns = [\n  CatalogTable.columns.createTitleColumn({ hidden: true }),\n  CatalogTable.columns.createNameColumn({ defaultKind: \"API\" }),\n  CatalogTable.columns.createSystemColumn(),\n  CatalogTable.columns.createOwnerColumn(),\n  CatalogTable.columns.createSpecTypeColumn(),\n  CatalogTable.columns.createSpecLifecycleColumn(),\n  CatalogTable.columns.createMetadataDescriptionColumn(),\n  CatalogTable.columns.createTagsColumn()\n];\nconst DefaultApiExplorerPage = (props) => {\n  var _a;\n  const { initiallySelectedFilter = \"all\", columns, actions } = props;\n  const configApi = useApi(configApiRef);\n  const generatedSubtitle = `${(_a = configApi.getOptionalString(\"organization.name\")) != null ? _a : \"Backstage\"} API Explorer`;\n  const registerComponentLink = useRouteRef(registerComponentRouteRef);\n  return /* @__PURE__ */ React.createElement(PageWithHeader, {\n    themeId: \"apis\",\n    title: \"APIs\",\n    subtitle: generatedSubtitle,\n    pageTitleOverride: \"APIs\"\n  }, /* @__PURE__ */ React.createElement(Content, null, /* @__PURE__ */ React.createElement(ContentHeader, {\n    title: \"\"\n  }, /* @__PURE__ */ React.createElement(CreateButton, {\n    title: \"Register Existing API\",\n    to: registerComponentLink == null ? void 0 : registerComponentLink()\n  }), /* @__PURE__ */ React.createElement(SupportButton, null, \"All your APIs\")), /* @__PURE__ */ React.createElement(EntityListProvider, null, /* @__PURE__ */ React.createElement(CatalogFilterLayout, null, /* @__PURE__ */ React.createElement(CatalogFilterLayout.Filters, null, /* @__PURE__ */ React.createElement(EntityKindPicker, {\n    initialFilter: \"api\",\n    hidden: true\n  }), /* @__PURE__ */ React.createElement(EntityTypePicker, null), /* @__PURE__ */ React.createElement(UserListPicker, {\n    initialFilter: initiallySelectedFilter\n  }), /* @__PURE__ */ React.createElement(EntityOwnerPicker, null), /* @__PURE__ */ React.createElement(EntityLifecyclePicker, null), /* @__PURE__ */ React.createElement(EntityTagPicker, null)), /* @__PURE__ */ React.createElement(CatalogFilterLayout.Content, null, /* @__PURE__ */ React.createElement(CatalogTable, {\n    columns: columns || defaultColumns,\n    actions\n  }))))));\n};\n\nconst ApiExplorerPage$1 = (props) => {\n  const outlet = useOutlet();\n  return outlet || /* @__PURE__ */ React.createElement(DefaultApiExplorerPage, {\n    ...props\n  });\n};\n\nconst apiDocsConfigRef = createApiRef({\n  id: \"plugin.api-docs.config\"\n});\n\nconst PlainApiDefinitionWidget = (props) => {\n  return /* @__PURE__ */ React.createElement(CodeSnippet, {\n    text: props.definition,\n    language: props.language,\n    showCopyCodeButton: true\n  });\n};\n\nconst ApiDefinitionCard = () => {\n  var _a;\n  const { entity } = useEntity();\n  const config = useApi(apiDocsConfigRef);\n  const { getApiDefinitionWidget } = config;\n  if (!entity) {\n    return /* @__PURE__ */ React.createElement(Alert, {\n      severity: \"error\"\n    }, \"Could not fetch the API\");\n  }\n  const definitionWidget = getApiDefinitionWidget(entity);\n  const entityTitle = (_a = entity.metadata.title) != null ? _a : entity.metadata.name;\n  if (definitionWidget) {\n    return /* @__PURE__ */ React.createElement(TabbedCard, {\n      title: entityTitle\n    }, /* @__PURE__ */ React.createElement(CardTab, {\n      label: definitionWidget.title,\n      key: \"widget\"\n    }, definitionWidget.component(entity.spec.definition)), /* @__PURE__ */ React.createElement(CardTab, {\n      label: \"Raw\",\n      key: \"raw\"\n    }, /* @__PURE__ */ React.createElement(PlainApiDefinitionWidget, {\n      definition: entity.spec.definition,\n      language: definitionWidget.rawLanguage || entity.spec.type\n    })));\n  }\n  return /* @__PURE__ */ React.createElement(TabbedCard, {\n    title: entityTitle,\n    children: [\n      /* @__PURE__ */ React.createElement(CardTab, {\n        label: entity.spec.type,\n        key: \"raw\"\n      }, /* @__PURE__ */ React.createElement(PlainApiDefinitionWidget, {\n        definition: entity.spec.definition,\n        language: entity.spec.type\n      }))\n    ]\n  });\n};\n\nconst LazyAsyncApiDefinition = React.lazy(\n  () => import('./esm/AsyncApiDefinition-f3e7e26e.esm.js').then((m) => ({\n    default: m.AsyncApiDefinition\n  }))\n);\nconst AsyncApiDefinitionWidget = (props) => {\n  return /* @__PURE__ */ React.createElement(Suspense, {\n    fallback: /* @__PURE__ */ React.createElement(Progress, null)\n  }, /* @__PURE__ */ React.createElement(LazyAsyncApiDefinition, {\n    ...props\n  }));\n};\n\nconst LazyGraphQlDefinition = React.lazy(\n  () => import('./esm/GraphQlDefinition-b8afc092.esm.js').then((m) => ({\n    default: m.GraphQlDefinition\n  }))\n);\nconst GraphQlDefinitionWidget = (props) => {\n  return /* @__PURE__ */ React.createElement(Suspense, {\n    fallback: /* @__PURE__ */ React.createElement(Progress, null)\n  }, /* @__PURE__ */ React.createElement(LazyGraphQlDefinition, {\n    ...props\n  }));\n};\n\nconst LazyOpenApiDefinition = React.lazy(\n  () => import('./esm/OpenApiDefinition-c48cabce.esm.js').then((m) => ({\n    default: m.OpenApiDefinition\n  }))\n);\nconst OpenApiDefinitionWidget = (props) => {\n  return /* @__PURE__ */ React.createElement(Suspense, {\n    fallback: /* @__PURE__ */ React.createElement(Progress, null)\n  }, /* @__PURE__ */ React.createElement(LazyOpenApiDefinition, {\n    ...props\n  }));\n};\n\nconst GrpcApiDefinitionWidget = (props) => {\n  const theme = useTheme();\n  return /* @__PURE__ */ React.createElement(CodeSnippet, {\n    customStyle: { backgroundColor: theme.palette.background.default },\n    text: props.definition,\n    language: \"protobuf\",\n    showCopyCodeButton: true\n  });\n};\n\nfunction defaultDefinitionWidgets() {\n  return [\n    {\n      type: \"openapi\",\n      title: \"OpenAPI\",\n      rawLanguage: \"yaml\",\n      component: (definition) => /* @__PURE__ */ React.createElement(OpenApiDefinitionWidget, {\n        definition\n      })\n    },\n    {\n      type: \"asyncapi\",\n      title: \"AsyncAPI\",\n      rawLanguage: \"yaml\",\n      component: (definition) => /* @__PURE__ */ React.createElement(AsyncApiDefinitionWidget, {\n        definition\n      })\n    },\n    {\n      type: \"graphql\",\n      title: \"GraphQL\",\n      rawLanguage: \"graphql\",\n      component: (definition) => /* @__PURE__ */ React.createElement(GraphQlDefinitionWidget, {\n        definition\n      })\n    },\n    {\n      type: \"grpc\",\n      title: \"gRPC\",\n      component: (definition) => /* @__PURE__ */ React.createElement(GrpcApiDefinitionWidget, {\n        definition\n      })\n    }\n  ];\n}\n\nconst ApiTypeTitle = (props) => {\n  const { apiEntity } = props;\n  const config = useApi(apiDocsConfigRef);\n  const definition = config.getApiDefinitionWidget(apiEntity);\n  const type = definition ? definition.title : apiEntity.spec.type;\n  return /* @__PURE__ */ React.createElement(\"span\", null, type);\n};\n\nfunction createSpecApiTypeColumn() {\n  return {\n    title: \"Type\",\n    field: \"spec.type\",\n    render: (entity) => /* @__PURE__ */ React.createElement(ApiTypeTitle, {\n      apiEntity: entity\n    })\n  };\n}\nconst apiEntityColumns = [\n  EntityTable.columns.createEntityRefColumn({ defaultKind: \"API\" }),\n  EntityTable.columns.createSystemColumn(),\n  EntityTable.columns.createOwnerColumn(),\n  createSpecApiTypeColumn(),\n  EntityTable.columns.createSpecLifecycleColumn(),\n  EntityTable.columns.createMetadataDescriptionColumn()\n];\n\nconst ConsumedApisCard = (props) => {\n  const { variant = \"gridItem\" } = props;\n  const { entity } = useEntity();\n  const { entities, loading, error } = useRelatedEntities(entity, {\n    type: RELATION_CONSUMES_API\n  });\n  if (loading) {\n    return /* @__PURE__ */ React.createElement(InfoCard, {\n      variant,\n      title: \"Consumed APIs\"\n    }, /* @__PURE__ */ React.createElement(Progress, null));\n  }\n  if (error || !entities) {\n    return /* @__PURE__ */ React.createElement(InfoCard, {\n      variant,\n      title: \"Consumed APIs\"\n    }, /* @__PURE__ */ React.createElement(WarningPanel, {\n      severity: \"error\",\n      title: \"Could not load APIs\",\n      message: /* @__PURE__ */ React.createElement(CodeSnippet, {\n        text: `${error}`,\n        language: \"text\"\n      })\n    }));\n  }\n  return /* @__PURE__ */ React.createElement(EntityTable, {\n    title: \"Consumed APIs\",\n    variant,\n    emptyContent: /* @__PURE__ */ React.createElement(\"div\", {\n      style: { textAlign: \"center\" }\n    }, /* @__PURE__ */ React.createElement(Typography, {\n      variant: \"body1\"\n    }, \"This \", entity.kind.toLocaleLowerCase(\"en-US\"), \" does not consume any APIs.\"), /* @__PURE__ */ React.createElement(Typography, {\n      variant: \"body2\"\n    }, /* @__PURE__ */ React.createElement(Link, {\n      to: \"https://backstage.io/docs/features/software-catalog/descriptor-format#specconsumesapis-optional\"\n    }, \"Learn how to change this.\"))),\n    columns: apiEntityColumns,\n    entities\n  });\n};\n\nconst columns = [\n  EntityTable.columns.createEntityRefColumn({ defaultKind: \"API\" }),\n  EntityTable.columns.createOwnerColumn(),\n  createSpecApiTypeColumn(),\n  EntityTable.columns.createSpecLifecycleColumn(),\n  EntityTable.columns.createMetadataDescriptionColumn()\n];\nconst HasApisCard = (props) => {\n  const { variant = \"gridItem\" } = props;\n  const { entity } = useEntity();\n  const { entities, loading, error } = useRelatedEntities(entity, {\n    type: RELATION_HAS_PART,\n    kind: \"API\"\n  });\n  if (loading) {\n    return /* @__PURE__ */ React.createElement(InfoCard, {\n      variant,\n      title: \"APIs\"\n    }, /* @__PURE__ */ React.createElement(Progress, null));\n  }\n  if (error || !entities) {\n    return /* @__PURE__ */ React.createElement(InfoCard, {\n      variant,\n      title: \"APIs\"\n    }, /* @__PURE__ */ React.createElement(WarningPanel, {\n      severity: \"error\",\n      title: \"Could not load APIs\",\n      message: /* @__PURE__ */ React.createElement(CodeSnippet, {\n        text: `${error}`,\n        language: \"text\"\n      })\n    }));\n  }\n  return /* @__PURE__ */ React.createElement(EntityTable, {\n    title: \"APIs\",\n    variant,\n    emptyContent: /* @__PURE__ */ React.createElement(\"div\", {\n      style: { textAlign: \"center\" }\n    }, /* @__PURE__ */ React.createElement(Typography, {\n      variant: \"body1\"\n    }, \"This \", entity.kind.toLocaleLowerCase(\"en-US\"), \" does not contain any APIs.\"), /* @__PURE__ */ React.createElement(Typography, {\n      variant: \"body2\"\n    }, /* @__PURE__ */ React.createElement(Link, {\n      to: \"https://backstage.io/docs/features/software-catalog/descriptor-format#kind-api\"\n    }, \"Learn how to change this.\"))),\n    columns,\n    entities\n  });\n};\n\nconst ProvidedApisCard = (props) => {\n  const { variant = \"gridItem\" } = props;\n  const { entity } = useEntity();\n  const { entities, loading, error } = useRelatedEntities(entity, {\n    type: RELATION_PROVIDES_API\n  });\n  if (loading) {\n    return /* @__PURE__ */ React.createElement(InfoCard, {\n      variant,\n      title: \"Provided APIs\"\n    }, /* @__PURE__ */ React.createElement(Progress, null));\n  }\n  if (error || !entities) {\n    return /* @__PURE__ */ React.createElement(InfoCard, {\n      variant,\n      title: \"Provided APIs\"\n    }, /* @__PURE__ */ React.createElement(WarningPanel, {\n      severity: \"error\",\n      title: \"Could not load APIs\",\n      message: /* @__PURE__ */ React.createElement(CodeSnippet, {\n        text: `${error}`,\n        language: \"text\"\n      })\n    }));\n  }\n  return /* @__PURE__ */ React.createElement(EntityTable, {\n    title: \"Provided APIs\",\n    variant,\n    emptyContent: /* @__PURE__ */ React.createElement(\"div\", {\n      style: { textAlign: \"center\" }\n    }, /* @__PURE__ */ React.createElement(Typography, {\n      variant: \"body1\"\n    }, \"This \", entity.kind.toLocaleLowerCase(\"en-US\"), \" does not provide any APIs.\"), /* @__PURE__ */ React.createElement(Typography, {\n      variant: \"body2\"\n    }, /* @__PURE__ */ React.createElement(Link, {\n      to: \"https://backstage.io/docs/features/software-catalog/descriptor-format#specprovidesapis-optional\"\n    }, \"Learn how to change this.\"))),\n    columns: apiEntityColumns,\n    entities\n  });\n};\n\nconst ConsumingComponentsCard = (props) => {\n  const { variant = \"gridItem\" } = props;\n  const { entity } = useEntity();\n  const { entities, loading, error } = useRelatedEntities(entity, {\n    type: RELATION_API_CONSUMED_BY\n  });\n  if (loading) {\n    return /* @__PURE__ */ React.createElement(InfoCard, {\n      variant,\n      title: \"Consumers\"\n    }, /* @__PURE__ */ React.createElement(Progress, null));\n  }\n  if (error || !entities) {\n    return /* @__PURE__ */ React.createElement(InfoCard, {\n      variant,\n      title: \"Consumers\"\n    }, /* @__PURE__ */ React.createElement(WarningPanel, {\n      severity: \"error\",\n      title: \"Could not load components\",\n      message: /* @__PURE__ */ React.createElement(CodeSnippet, {\n        text: `${error}`,\n        language: \"text\"\n      })\n    }));\n  }\n  return /* @__PURE__ */ React.createElement(EntityTable, {\n    title: \"Consumers\",\n    variant,\n    emptyContent: /* @__PURE__ */ React.createElement(\"div\", {\n      style: { textAlign: \"center\" }\n    }, /* @__PURE__ */ React.createElement(Typography, {\n      variant: \"body1\"\n    }, \"No component consumes this API.\"), /* @__PURE__ */ React.createElement(Typography, {\n      variant: \"body2\"\n    }, /* @__PURE__ */ React.createElement(Link, {\n      to: \"https://backstage.io/docs/features/software-catalog/descriptor-format#specconsumesapis-optional\"\n    }, \"Learn how to change this.\"))),\n    columns: EntityTable.componentEntityColumns,\n    entities\n  });\n};\n\nconst ProvidingComponentsCard = (props) => {\n  const { variant = \"gridItem\" } = props;\n  const { entity } = useEntity();\n  const { entities, loading, error } = useRelatedEntities(entity, {\n    type: RELATION_API_PROVIDED_BY\n  });\n  if (loading) {\n    return /* @__PURE__ */ React.createElement(InfoCard, {\n      variant,\n      title: \"Providers\"\n    }, /* @__PURE__ */ React.createElement(Progress, null));\n  }\n  if (error || !entities) {\n    return /* @__PURE__ */ React.createElement(InfoCard, {\n      variant,\n      title: \"Providers\"\n    }, /* @__PURE__ */ React.createElement(WarningPanel, {\n      severity: \"error\",\n      title: \"Could not load components\",\n      message: /* @__PURE__ */ React.createElement(CodeSnippet, {\n        text: `${error}`,\n        language: \"text\"\n      })\n    }));\n  }\n  return /* @__PURE__ */ React.createElement(EntityTable, {\n    title: \"Providers\",\n    variant,\n    emptyContent: /* @__PURE__ */ React.createElement(\"div\", {\n      style: { textAlign: \"center\" }\n    }, /* @__PURE__ */ React.createElement(Typography, {\n      variant: \"body1\"\n    }, \"No component provides this API.\"), /* @__PURE__ */ React.createElement(Typography, {\n      variant: \"body2\"\n    }, /* @__PURE__ */ React.createElement(Link, {\n      to: \"https://backstage.io/docs/features/software-catalog/descriptor-format#specprovidesapis-optional\"\n    }, \"Learn how to change this.\"))),\n    columns: EntityTable.componentEntityColumns,\n    entities\n  });\n};\n\nconst apiDocsPlugin = createPlugin({\n  id: \"api-docs\",\n  routes: {\n    root: rootRoute\n  },\n  apis: [\n    createApiFactory({\n      api: apiDocsConfigRef,\n      deps: {},\n      factory: () => {\n        const definitionWidgets = defaultDefinitionWidgets();\n        return {\n          getApiDefinitionWidget: (apiEntity) => {\n            return definitionWidgets.find((d) => d.type === apiEntity.spec.type);\n          }\n        };\n      }\n    })\n  ],\n  externalRoutes: {\n    registerApi: registerComponentRouteRef\n  }\n});\nconst ApiExplorerPage = apiDocsPlugin.provide(\n  createRoutableExtension({\n    name: \"ApiExplorerPage\",\n    component: () => import('./esm/index-5bc4fdc7.esm.js').then((m) => m.ApiExplorerIndexPage),\n    mountPoint: rootRoute\n  })\n);\nconst EntityApiDefinitionCard = apiDocsPlugin.provide(\n  createComponentExtension({\n    name: \"EntityApiDefinitionCard\",\n    component: {\n      lazy: () => import('./esm/index-9e8e4d8c.esm.js').then((m) => m.ApiDefinitionCard)\n    }\n  })\n);\nconst EntityConsumedApisCard = apiDocsPlugin.provide(\n  createComponentExtension({\n    name: \"EntityConsumedApisCard\",\n    component: {\n      lazy: () => import('./esm/index-f33becda.esm.js').then((m) => m.ConsumedApisCard)\n    }\n  })\n);\nconst EntityConsumingComponentsCard = apiDocsPlugin.provide(\n  createComponentExtension({\n    name: \"EntityConsumingComponentsCard\",\n    component: {\n      lazy: () => import('./esm/index-dfba78dd.esm.js').then(\n        (m) => m.ConsumingComponentsCard\n      )\n    }\n  })\n);\nconst EntityProvidedApisCard = apiDocsPlugin.provide(\n  createComponentExtension({\n    name: \"EntityProvidedApisCard\",\n    component: {\n      lazy: () => import('./esm/index-f33becda.esm.js').then((m) => m.ProvidedApisCard)\n    }\n  })\n);\nconst EntityProvidingComponentsCard = apiDocsPlugin.provide(\n  createComponentExtension({\n    name: \"EntityProvidingComponentsCard\",\n    component: {\n      lazy: () => import('./esm/index-dfba78dd.esm.js').then(\n        (m) => m.ProvidingComponentsCard\n      )\n    }\n  })\n);\nconst EntityHasApisCard = apiDocsPlugin.provide(\n  createComponentExtension({\n    name: \"EntityHasApisCard\",\n    component: {\n      lazy: () => import('./esm/index-f33becda.esm.js').then((m) => m.HasApisCard)\n    }\n  })\n);\n\nexport { ApiDefinitionCard, ApiExplorerPage$1 as ApiExplorerIndexPage, ApiExplorerPage, ApiTypeTitle, AsyncApiDefinitionWidget, ConsumedApisCard, ConsumingComponentsCard, DefaultApiExplorerPage, EntityApiDefinitionCard, EntityConsumedApisCard, EntityConsumingComponentsCard, EntityHasApisCard, EntityProvidedApisCard, EntityProvidingComponentsCard, GraphQlDefinitionWidget, HasApisCard, OpenApiDefinitionWidget, PlainApiDefinitionWidget, ProvidedApisCard, ProvidingComponentsCard, apiDocsConfigRef, apiDocsPlugin, defaultDefinitionWidgets, apiDocsPlugin as plugin };\n//# sourceMappingURL=index.esm.js.map\n","import { createPermission } from '@backstage/plugin-permission-common';\n\nconst RESOURCE_TYPE_CATALOG_ENTITY = \"catalog-entity\";\nconst catalogEntityReadPermission = createPermission({\n  name: \"catalog.entity.read\",\n  attributes: {\n    action: \"read\"\n  },\n  resourceType: RESOURCE_TYPE_CATALOG_ENTITY\n});\nconst catalogEntityCreatePermission = createPermission({\n  name: \"catalog.entity.create\",\n  attributes: {\n    action: \"create\"\n  }\n});\nconst catalogEntityDeletePermission = createPermission({\n  name: \"catalog.entity.delete\",\n  attributes: {\n    action: \"delete\"\n  },\n  resourceType: RESOURCE_TYPE_CATALOG_ENTITY\n});\nconst catalogEntityRefreshPermission = createPermission({\n  name: \"catalog.entity.refresh\",\n  attributes: {\n    action: \"update\"\n  },\n  resourceType: RESOURCE_TYPE_CATALOG_ENTITY\n});\nconst catalogLocationReadPermission = createPermission({\n  name: \"catalog.location.read\",\n  attributes: {\n    action: \"read\"\n  }\n});\nconst catalogLocationCreatePermission = createPermission({\n  name: \"catalog.location.create\",\n  attributes: {\n    action: \"create\"\n  }\n});\nconst catalogLocationDeletePermission = createPermission({\n  name: \"catalog.location.delete\",\n  attributes: {\n    action: \"delete\"\n  }\n});\nconst catalogPermissions = [\n  catalogEntityReadPermission,\n  catalogEntityCreatePermission,\n  catalogEntityDeletePermission,\n  catalogEntityRefreshPermission,\n  catalogLocationReadPermission,\n  catalogLocationCreatePermission,\n  catalogLocationDeletePermission\n];\n\nexport { RESOURCE_TYPE_CATALOG_ENTITY, catalogEntityCreatePermission, catalogEntityDeletePermission, catalogEntityReadPermission, catalogEntityRefreshPermission, catalogLocationCreatePermission, catalogLocationDeletePermission, catalogLocationReadPermission, catalogPermissions };\n//# sourceMappingURL=index.esm.js.map\n","import { RELATION_OWNER_OF, RELATION_OWNED_BY, RELATION_CONSUMES_API, RELATION_API_CONSUMED_BY, RELATION_API_PROVIDED_BY, RELATION_PROVIDES_API, RELATION_HAS_PART, RELATION_PART_OF, RELATION_PARENT_OF, RELATION_CHILD_OF, RELATION_HAS_MEMBER, RELATION_MEMBER_OF, RELATION_DEPENDS_ON, RELATION_DEPENDENCY_OF, DEFAULT_NAMESPACE, stringifyEntityRef } from '@backstage/catalog-model';\nimport { DependencyGraph, DependencyGraphTypes } from '@backstage/core-components';\nimport { useApp, useApi, errorApiRef, createRouteRef, createExternalRouteRef, createPlugin, createComponentExtension, createRoutableExtension } from '@backstage/core-plugin-api';\nimport { makeStyles as makeStyles$2, useTheme, CircularProgress } from '@material-ui/core';\nimport classNames from 'classnames';\nimport React, { useState, useRef, useLayoutEffect, useCallback, useEffect, useMemo } from 'react';\nimport makeStyles from '@material-ui/core/styles/makeStyles';\nimport { humanizeEntityRef, catalogApiRef } from '@backstage/plugin-catalog-react';\nimport { makeStyles as makeStyles$1 } from '@material-ui/core/styles';\nimport WorkIcon from '@material-ui/icons/Work';\nimport useDebounce from 'react-use/lib/useDebounce';\nimport limiterFactory from 'p-limit';\nimport useAsyncFn from 'react-use/lib/useAsyncFn';\n\nconst useStyles$2 = makeStyles((theme) => ({\n  text: {\n    fill: theme.palette.textContrast\n  },\n  secondary: {\n    fill: theme.palette.textSubtle\n  }\n}));\nfunction CustomLabel({\n  edge: { relations }\n}) {\n  const classes = useStyles$2();\n  return /* @__PURE__ */ React.createElement(\"text\", {\n    className: classes.text,\n    textAnchor: \"middle\"\n  }, relations.map((r, i) => /* @__PURE__ */ React.createElement(\"tspan\", {\n    key: r,\n    className: classNames(i > 0 && classes.secondary)\n  }, i > 0 && /* @__PURE__ */ React.createElement(\"tspan\", null, \" / \"), r)));\n}\n\nfunction EntityKindIcon({\n  kind,\n  ...props\n}) {\n  var _a;\n  const app = useApp();\n  const Icon = (_a = app.getSystemIcon(`kind:${kind.toLocaleLowerCase(\"en-US\")}`)) != null ? _a : WorkIcon;\n  return /* @__PURE__ */ React.createElement(Icon, {\n    ...props\n  });\n}\n\nconst useStyles$1 = makeStyles$1((theme) => ({\n  node: {\n    fill: theme.palette.grey[300],\n    stroke: theme.palette.grey[300],\n    \"&.primary\": {\n      fill: theme.palette.primary.light,\n      stroke: theme.palette.primary.light\n    },\n    \"&.secondary\": {\n      fill: theme.palette.secondary.light,\n      stroke: theme.palette.secondary.light\n    }\n  },\n  text: {\n    fill: theme.palette.getContrastText(theme.palette.grey[300]),\n    \"&.primary\": {\n      fill: theme.palette.primary.contrastText\n    },\n    \"&.secondary\": {\n      fill: theme.palette.secondary.contrastText\n    },\n    \"&.focused\": {\n      fontWeight: \"bold\"\n    }\n  },\n  clickable: {\n    cursor: \"pointer\"\n  }\n}));\nfunction CustomNode({\n  node: {\n    id,\n    kind,\n    namespace,\n    name,\n    color = \"default\",\n    focused,\n    title,\n    onClick\n  }\n}) {\n  const classes = useStyles$1();\n  const [width, setWidth] = useState(0);\n  const [height, setHeight] = useState(0);\n  const idRef = useRef(null);\n  useLayoutEffect(() => {\n    if (idRef.current) {\n      let { height: renderedHeight, width: renderedWidth } = idRef.current.getBBox();\n      renderedHeight = Math.round(renderedHeight);\n      renderedWidth = Math.round(renderedWidth);\n      if (renderedHeight !== height || renderedWidth !== width) {\n        setWidth(renderedWidth);\n        setHeight(renderedHeight);\n      }\n    }\n  }, [width, height]);\n  const padding = 10;\n  const iconSize = height;\n  const paddedIconWidth = kind ? iconSize + padding : 0;\n  const paddedWidth = paddedIconWidth + width + padding * 2;\n  const paddedHeight = height + padding * 2;\n  const displayTitle = title != null ? title : kind && name && namespace ? humanizeEntityRef({ kind, name, namespace }) : id;\n  return /* @__PURE__ */ React.createElement(\"g\", {\n    onClick,\n    className: classNames(onClick && classes.clickable)\n  }, /* @__PURE__ */ React.createElement(\"rect\", {\n    className: classNames(\n      classes.node,\n      color === \"primary\" && \"primary\",\n      color === \"secondary\" && \"secondary\"\n    ),\n    width: paddedWidth,\n    height: paddedHeight,\n    rx: 10\n  }), kind && /* @__PURE__ */ React.createElement(EntityKindIcon, {\n    kind,\n    y: padding,\n    x: padding,\n    width: iconSize,\n    height: iconSize,\n    className: classNames(\n      classes.text,\n      focused && \"focused\",\n      color === \"primary\" && \"primary\",\n      color === \"secondary\" && \"secondary\"\n    )\n  }), /* @__PURE__ */ React.createElement(\"text\", {\n    ref: idRef,\n    className: classNames(\n      classes.text,\n      focused && \"focused\",\n      color === \"primary\" && \"primary\",\n      color === \"secondary\" && \"secondary\"\n    ),\n    y: paddedHeight / 2,\n    x: paddedIconWidth + (width + padding * 2) / 2,\n    textAnchor: \"middle\",\n    alignmentBaseline: \"middle\"\n  }, displayTitle));\n}\n\nconst ALL_RELATION_PAIRS = [\n  [RELATION_OWNER_OF, RELATION_OWNED_BY],\n  [RELATION_CONSUMES_API, RELATION_API_CONSUMED_BY],\n  [RELATION_API_PROVIDED_BY, RELATION_PROVIDES_API],\n  [RELATION_HAS_PART, RELATION_PART_OF],\n  [RELATION_PARENT_OF, RELATION_CHILD_OF],\n  [RELATION_HAS_MEMBER, RELATION_MEMBER_OF],\n  [RELATION_DEPENDS_ON, RELATION_DEPENDENCY_OF]\n];\n\nvar Direction = /* @__PURE__ */ ((Direction2) => {\n  Direction2[\"TOP_BOTTOM\"] = \"TB\";\n  Direction2[\"BOTTOM_TOP\"] = \"BT\";\n  Direction2[\"LEFT_RIGHT\"] = \"LR\";\n  Direction2[\"RIGHT_LEFT\"] = \"RL\";\n  return Direction2;\n})(Direction || {});\n\nconst limiter = limiterFactory(10);\nfunction useEntityStore() {\n  const catalogClient = useApi(catalogApiRef);\n  const state = useRef({\n    requestedEntities: /* @__PURE__ */ new Set(),\n    outstandingEntities: /* @__PURE__ */ new Map(),\n    cachedEntities: /* @__PURE__ */ new Map()\n  });\n  const [entities, setEntities] = useState({});\n  const updateEntities = useCallback(() => {\n    const { cachedEntities, requestedEntities } = state.current;\n    const filteredEntities = {};\n    requestedEntities.forEach((entityRef) => {\n      const entity = cachedEntities.get(entityRef);\n      if (entity) {\n        filteredEntities[entityRef] = entity;\n      }\n    });\n    setEntities(filteredEntities);\n  }, [state, setEntities]);\n  const [asyncState, fetch] = useAsyncFn(async () => {\n    const { requestedEntities, outstandingEntities, cachedEntities } = state.current;\n    await Promise.all(\n      Array.from(requestedEntities).map(\n        (entityRef) => limiter(async () => {\n          if (cachedEntities.has(entityRef)) {\n            return;\n          }\n          if (outstandingEntities.has(entityRef)) {\n            await outstandingEntities.get(entityRef);\n            return;\n          }\n          const promise = catalogClient.getEntityByRef(entityRef);\n          outstandingEntities.set(entityRef, promise);\n          try {\n            const entity = await promise;\n            if (entity) {\n              cachedEntities.set(entityRef, entity);\n              updateEntities();\n            }\n          } finally {\n            outstandingEntities.delete(entityRef);\n          }\n        })\n      )\n    );\n  }, [state, updateEntities]);\n  const { loading, error } = asyncState;\n  const requestEntities = useCallback(\n    (entityRefs) => {\n      const n = new Set(entityRefs);\n      const { requestedEntities } = state.current;\n      if (n.size !== requestedEntities.size || Array.from(n).some((e) => !requestedEntities.has(e))) {\n        state.current.requestedEntities = n;\n        fetch();\n        updateEntities();\n      }\n    },\n    [state, fetch, updateEntities]\n  );\n  return {\n    entities,\n    loading,\n    error,\n    requestEntities\n  };\n}\n\nfunction useEntityRelationGraph({\n  rootEntityRefs,\n  filter: { maxDepth = Number.POSITIVE_INFINITY, relations, kinds } = {}\n}) {\n  const { entities, loading, error, requestEntities } = useEntityStore();\n  useEffect(() => {\n    const expectedEntities = /* @__PURE__ */ new Set([...rootEntityRefs]);\n    const processedEntityRefs = /* @__PURE__ */ new Set();\n    let nextDepthRefQueue = [...rootEntityRefs];\n    let depth = 0;\n    while (nextDepthRefQueue.length > 0 && (!isFinite(maxDepth) || depth < maxDepth)) {\n      const entityRefQueue = nextDepthRefQueue;\n      nextDepthRefQueue = [];\n      while (entityRefQueue.length > 0) {\n        const entityRef = entityRefQueue.shift();\n        const entity = entities[entityRef];\n        processedEntityRefs.add(entityRef);\n        if (entity && entity.relations) {\n          for (const rel of entity.relations) {\n            if ((!relations || relations.includes(rel.type)) && (!kinds || kinds.some(\n              (kind) => rel.targetRef.startsWith(\n                `${kind.toLocaleLowerCase(\"en-US\")}:`\n              )\n            ))) {\n              if (!processedEntityRefs.has(rel.targetRef)) {\n                nextDepthRefQueue.push(rel.targetRef);\n                expectedEntities.add(rel.targetRef);\n              }\n            }\n          }\n        }\n      }\n      ++depth;\n    }\n    requestEntities([...expectedEntities]);\n  }, [entities, rootEntityRefs, maxDepth, relations, kinds, requestEntities]);\n  return {\n    entities,\n    loading,\n    error\n  };\n}\n\nfunction useEntityRelationNodesAndEdges({\n  rootEntityRefs,\n  maxDepth = Number.POSITIVE_INFINITY,\n  unidirectional = true,\n  mergeRelations = true,\n  kinds,\n  relations,\n  onNodeClick,\n  relationPairs = ALL_RELATION_PAIRS\n}) {\n  const [nodesAndEdges, setNodesAndEdges] = useState({});\n  const { entities, loading, error } = useEntityRelationGraph({\n    rootEntityRefs,\n    filter: {\n      maxDepth,\n      kinds,\n      relations\n    }\n  });\n  useDebounce(\n    () => {\n      var _a;\n      if (!entities || Object.keys(entities).length === 0) {\n        setNodesAndEdges({});\n        return;\n      }\n      const nodes = Object.entries(entities).map(([entityRef, entity]) => {\n        var _a2, _b, _c;\n        const focused = rootEntityRefs.includes(entityRef);\n        const node = {\n          id: entityRef,\n          title: (_b = (_a2 = entity.metadata) == null ? void 0 : _a2.title) != null ? _b : void 0,\n          kind: entity.kind,\n          name: entity.metadata.name,\n          namespace: (_c = entity.metadata.namespace) != null ? _c : DEFAULT_NAMESPACE,\n          focused,\n          color: focused ? \"secondary\" : \"primary\"\n        };\n        if (onNodeClick) {\n          node.onClick = (event) => onNodeClick(node, event);\n        }\n        return node;\n      });\n      const edges = [];\n      const visitedNodes = /* @__PURE__ */ new Set();\n      const nodeQueue = [...rootEntityRefs];\n      while (nodeQueue.length > 0) {\n        const entityRef = nodeQueue.pop();\n        const entity = entities[entityRef];\n        visitedNodes.add(entityRef);\n        if (entity) {\n          (_a = entity == null ? void 0 : entity.relations) == null ? void 0 : _a.forEach((rel) => {\n            var _a2;\n            if (!entities[rel.targetRef]) {\n              return;\n            }\n            if (relations && !relations.includes(rel.type)) {\n              return;\n            }\n            if (kinds && !kinds.some(\n              (kind) => rel.targetRef.startsWith(`${kind.toLocaleLowerCase(\"en-US\")}:`)\n            )) {\n              return;\n            }\n            if (!unidirectional || !visitedNodes.has(rel.targetRef)) {\n              if (mergeRelations) {\n                const pair = (_a2 = relationPairs.find(\n                  ([l, r]) => l === rel.type || r === rel.type\n                )) != null ? _a2 : [rel.type];\n                const [left] = pair;\n                edges.push({\n                  from: left === rel.type ? entityRef : rel.targetRef,\n                  to: left === rel.type ? rel.targetRef : entityRef,\n                  relations: pair,\n                  label: \"visible\"\n                });\n              } else {\n                edges.push({\n                  from: entityRef,\n                  to: rel.targetRef,\n                  relations: [rel.type],\n                  label: \"visible\"\n                });\n              }\n            }\n            if (!visitedNodes.has(rel.targetRef)) {\n              nodeQueue.push(rel.targetRef);\n              visitedNodes.add(rel.targetRef);\n            }\n          });\n        }\n      }\n      setNodesAndEdges({ nodes, edges });\n    },\n    100,\n    [\n      entities,\n      rootEntityRefs,\n      kinds,\n      relations,\n      unidirectional,\n      mergeRelations,\n      onNodeClick,\n      relationPairs\n    ]\n  );\n  return {\n    loading,\n    error,\n    ...nodesAndEdges\n  };\n}\n\nconst useStyles = makeStyles$2((theme) => ({\n  progress: {\n    position: \"absolute\",\n    left: \"50%\",\n    top: \"50%\",\n    marginLeft: \"-20px\",\n    marginTop: \"-20px\"\n  },\n  container: {\n    position: \"relative\",\n    width: \"100%\",\n    display: \"flex\",\n    flexDirection: \"column\"\n  },\n  graph: {\n    width: \"100%\",\n    flex: 1,\n    \"& path[marker-end]\": {\n      transition: \"filter 0.1s ease-in-out\"\n    },\n    \"& path[marker-end]:hover\": {\n      filter: `drop-shadow(2px 2px 4px ${theme.palette.primary.dark});`\n    },\n    \"& g[data-testid=label]\": {\n      transition: \"transform 0s\"\n    }\n  }\n}));\nconst EntityRelationsGraph = (props) => {\n  const {\n    rootEntityNames,\n    maxDepth = Number.POSITIVE_INFINITY,\n    unidirectional = true,\n    mergeRelations = true,\n    kinds,\n    relations,\n    direction = Direction.LEFT_RIGHT,\n    onNodeClick,\n    relationPairs = ALL_RELATION_PAIRS,\n    className,\n    zoom = \"enabled\",\n    renderNode,\n    renderLabel,\n    curve\n  } = props;\n  const theme = useTheme();\n  const classes = useStyles();\n  const rootEntityRefs = useMemo(\n    () => (Array.isArray(rootEntityNames) ? rootEntityNames : [rootEntityNames]).map((e) => stringifyEntityRef(e)),\n    [rootEntityNames]\n  );\n  const errorApi = useApi(errorApiRef);\n  const { loading, error, nodes, edges } = useEntityRelationNodesAndEdges({\n    rootEntityRefs,\n    maxDepth,\n    unidirectional,\n    mergeRelations,\n    kinds,\n    relations,\n    onNodeClick,\n    relationPairs\n  });\n  useEffect(() => {\n    if (error) {\n      errorApi.post(error);\n    }\n  }, [errorApi, error]);\n  return /* @__PURE__ */ React.createElement(\"div\", {\n    className: classNames(classes.container, className)\n  }, loading && /* @__PURE__ */ React.createElement(CircularProgress, {\n    className: classes.progress\n  }), nodes && edges && /* @__PURE__ */ React.createElement(DependencyGraph, {\n    nodes,\n    edges,\n    renderNode: renderNode || CustomNode,\n    renderLabel: renderLabel || CustomLabel,\n    direction,\n    className: classes.graph,\n    paddingX: theme.spacing(4),\n    paddingY: theme.spacing(4),\n    labelPosition: DependencyGraphTypes.LabelPosition.RIGHT,\n    labelOffset: theme.spacing(1),\n    zoom,\n    curve\n  }));\n};\n\nconst catalogGraphRouteRef = createRouteRef({\n  id: \"catalog-graph\"\n});\nconst catalogEntityRouteRef = createExternalRouteRef({\n  id: \"catalog-entity\",\n  params: [\"namespace\", \"kind\", \"name\"],\n  optional: true\n});\n\nconst catalogGraphPlugin = createPlugin({\n  id: \"catalog-graph\",\n  routes: {\n    catalogGraph: catalogGraphRouteRef\n  },\n  externalRoutes: {\n    catalogEntity: catalogEntityRouteRef\n  }\n});\n\nconst EntityCatalogGraphCard = catalogGraphPlugin.provide(\n  createComponentExtension({\n    name: \"EntityCatalogGraphCard\",\n    component: {\n      lazy: () => import('./esm/index-cfbe3f5b.esm.js').then((m) => m.CatalogGraphCard)\n    }\n  })\n);\nconst CatalogGraphPage = catalogGraphPlugin.provide(\n  createRoutableExtension({\n    name: \"CatalogGraphPage\",\n    component: () => import('./esm/index-66781555.esm.js').then((m) => m.CatalogGraphPage),\n    mountPoint: catalogGraphRouteRef\n  })\n);\n\nexport { ALL_RELATION_PAIRS, CatalogGraphPage, Direction, EntityCatalogGraphCard, EntityRelationsGraph, catalogGraphPlugin, catalogGraphRouteRef };\n//# sourceMappingURL=index.esm.js.map\n","import { createApiRef, createRouteRef, createPlugin, createApiFactory, discoveryApiRef, identityApiRef, configApiRef, createRoutableExtension, useApi, useApp, errorApiRef } from '@backstage/core-plugin-api';\nimport { scmAuthApiRef, scmIntegrationsApiRef } from '@backstage/integration-react';\nimport { catalogApiRef, humanizeEntityRef, EntityRefLink } from '@backstage/plugin-catalog-react';\nimport { Octokit } from '@octokit/rest';\nimport { Base64 } from 'js-base64';\nimport parseGitUrl from 'git-url-parse';\nimport { InfoCard, Link, CodeSnippet, MarkdownContent, Page, Header, Content, ContentHeader, SupportButton } from '@backstage/core-components';\nimport { Typography, Chip, Button, CircularProgress, List, ListItem, ListItemIcon, ListItemText, ListItemSecondaryAction, IconButton, Collapse, Grid, TextField, FormHelperText, Card, CardHeader, CardContent, Box, Checkbox, StepLabel, FormControlLabel, Stepper, Step, StepContent } from '@material-ui/core';\nimport React, { useReducer, useState, useCallback, useEffect, useMemo } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport LocationOnIcon from '@material-ui/icons/LocationOn';\nimport ExpandLessIcon from '@material-ui/icons/ExpandLess';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport WorkIcon from '@material-ui/icons/Work';\nimport partition from 'lodash/partition';\nimport { useForm, Controller, FormProvider } from 'react-hook-form';\nimport { Autocomplete } from '@material-ui/lab';\nimport YAML from 'yaml';\nimport { trimEnd } from 'lodash';\nimport { assertError } from '@backstage/errors';\nimport useAsync from 'react-use/lib/useAsync';\nimport { stringifyEntityRef } from '@backstage/catalog-model';\n\nconst catalogImportApiRef = createApiRef({\n  id: \"plugin.catalog-import.service\"\n});\n\nconst getGithubIntegrationConfig = (scmIntegrationsApi, location) => {\n  const integration = scmIntegrationsApi.github.byUrl(location);\n  if (!integration) {\n    return void 0;\n  }\n  const { name: repo, owner } = parseGitUrl(location);\n  return {\n    repo,\n    owner,\n    githubIntegrationConfig: integration.config\n  };\n};\n\nfunction asInputRef(renderResult) {\n  const { ref, ...rest } = renderResult;\n  return {\n    inputRef: ref,\n    ...rest\n  };\n}\nfunction getCatalogFilename(config) {\n  var _a;\n  return (_a = config.getOptionalString(\"catalog.import.entityFilename\")) != null ? _a : \"catalog-info.yaml\";\n}\nfunction getBranchName(config) {\n  var _a;\n  return (_a = config.getOptionalString(\"catalog.import.pullRequestBranchName\")) != null ? _a : \"backstage-integration\";\n}\n\nclass CatalogImportClient {\n  constructor(options) {\n    this.discoveryApi = options.discoveryApi;\n    this.scmAuthApi = options.scmAuthApi;\n    this.identityApi = options.identityApi;\n    this.scmIntegrationsApi = options.scmIntegrationsApi;\n    this.catalogApi = options.catalogApi;\n    this.configApi = options.configApi;\n  }\n  async analyzeUrl(url) {\n    var _a;\n    if (new URL(url).pathname.match(/\\.ya?ml$/) || ((_a = new URL(url).searchParams.get(\"path\")) == null ? void 0 : _a.match(/.ya?ml$/))) {\n      const location = await this.catalogApi.addLocation({\n        type: \"url\",\n        target: url,\n        dryRun: true\n      });\n      return {\n        type: \"locations\",\n        locations: [\n          {\n            exists: location.exists,\n            target: location.location.target,\n            entities: location.entities.map((e) => {\n              var _a2;\n              return {\n                kind: e.kind,\n                namespace: (_a2 = e.metadata.namespace) != null ? _a2 : \"default\",\n                name: e.metadata.name\n              };\n            })\n          }\n        ]\n      };\n    }\n    const ghConfig = getGithubIntegrationConfig(this.scmIntegrationsApi, url);\n    if (!ghConfig) {\n      const other = this.scmIntegrationsApi.byUrl(url);\n      const catalogFilename = getCatalogFilename(this.configApi);\n      if (other) {\n        throw new Error(\n          `The ${other.title} integration only supports full URLs to ${catalogFilename} files. Did you try to pass in the URL of a directory instead?`\n        );\n      }\n      throw new Error(\n        `This URL was not recognized as a valid GitHub URL because there was no configured integration that matched the given host name. You could try to paste the full URL to a ${catalogFilename} file instead.`\n      );\n    }\n    const analyzation = await this.analyzeLocation({\n      repo: url\n    });\n    if (analyzation.existingEntityFiles.length > 0) {\n      const locations = analyzation.existingEntityFiles.reduce((state, curr) => {\n        var _a2;\n        state[curr.location.target] = {\n          target: curr.location.target,\n          exists: curr.isRegistered,\n          entities: [\n            ...curr.location.target in state ? state[curr.location.target].entities : [],\n            {\n              name: curr.entity.metadata.name,\n              namespace: (_a2 = curr.entity.metadata.namespace) != null ? _a2 : \"default\",\n              kind: curr.entity.kind\n            }\n          ]\n        };\n        return state;\n      }, {});\n      return {\n        type: \"locations\",\n        locations: Object.values(locations)\n      };\n    }\n    return {\n      type: \"repository\",\n      integrationType: \"github\",\n      url,\n      generatedEntities: analyzation.generateEntities.map((x) => x.entity)\n    };\n  }\n  async preparePullRequest() {\n    var _a;\n    const appTitle = (_a = this.configApi.getOptionalString(\"app.title\")) != null ? _a : \"Backstage\";\n    const appBaseUrl = this.configApi.getString(\"app.baseUrl\");\n    const catalogFilename = getCatalogFilename(this.configApi);\n    return {\n      title: `Add ${catalogFilename} config file`,\n      body: `This pull request adds a **Backstage entity metadata file** to this repository so that the component can be added to the [${appTitle} software catalog](${appBaseUrl}).\n\nAfter this pull request is merged, the component will become available.\n\nFor more information, read an [overview of the Backstage software catalog](https://backstage.io/docs/features/software-catalog/software-catalog-overview).`\n    };\n  }\n  async submitPullRequest(options) {\n    const { repositoryUrl, fileContent, title, body } = options;\n    const ghConfig = getGithubIntegrationConfig(\n      this.scmIntegrationsApi,\n      repositoryUrl\n    );\n    if (ghConfig) {\n      return await this.submitGitHubPrToRepo({\n        ...ghConfig,\n        repositoryUrl,\n        fileContent,\n        title,\n        body\n      });\n    }\n    throw new Error(\"unimplemented!\");\n  }\n  async analyzeLocation(options) {\n    const { token } = await this.identityApi.getCredentials();\n    const response = await fetch(\n      `${await this.discoveryApi.getBaseUrl(\"catalog\")}/analyze-location`,\n      {\n        headers: {\n          \"Content-Type\": \"application/json\",\n          ...token && { Authorization: `Bearer ${token}` }\n        },\n        method: \"POST\",\n        body: JSON.stringify({\n          location: { type: \"url\", target: options.repo },\n          ...this.configApi.getOptionalString(\n            \"catalog.import.entityFilename\"\n          ) && {\n            catalogFilename: this.configApi.getOptionalString(\n              \"catalog.import.entityFilename\"\n            )\n          }\n        })\n      }\n    ).catch((e) => {\n      throw new Error(`Failed to generate entity definitions, ${e.message}`);\n    });\n    if (!response.ok) {\n      throw new Error(\n        `Failed to generate entity definitions. Received http response ${response.status}: ${response.statusText}`\n      );\n    }\n    const payload = await response.json();\n    return payload;\n  }\n  async submitGitHubPrToRepo(options) {\n    const {\n      owner,\n      repo,\n      title,\n      body,\n      fileContent,\n      repositoryUrl,\n      githubIntegrationConfig\n    } = options;\n    const { token } = await this.scmAuthApi.getCredentials({\n      url: repositoryUrl,\n      additionalScope: {\n        repoWrite: true\n      }\n    });\n    const octo = new Octokit({\n      auth: token,\n      baseUrl: githubIntegrationConfig.apiBaseUrl\n    });\n    const branchName = getBranchName(this.configApi);\n    const fileName = getCatalogFilename(this.configApi);\n    const repoData = await octo.repos.get({\n      owner,\n      repo\n    }).catch((e) => {\n      throw new Error(formatHttpErrorMessage(\"Couldn't fetch repo data\", e));\n    });\n    const parentRef = await octo.git.getRef({\n      owner,\n      repo,\n      ref: `heads/${repoData.data.default_branch}`\n    }).catch((e) => {\n      throw new Error(\n        formatHttpErrorMessage(\"Couldn't fetch default branch data\", e)\n      );\n    });\n    await octo.git.createRef({\n      owner,\n      repo,\n      ref: `refs/heads/${branchName}`,\n      sha: parentRef.data.object.sha\n    }).catch((e) => {\n      throw new Error(\n        formatHttpErrorMessage(\n          `Couldn't create a new branch with name '${branchName}'`,\n          e\n        )\n      );\n    });\n    await octo.repos.createOrUpdateFileContents({\n      owner,\n      repo,\n      path: fileName,\n      message: title,\n      content: Base64.encode(fileContent),\n      branch: branchName\n    }).catch((e) => {\n      throw new Error(\n        formatHttpErrorMessage(\n          `Couldn't create a commit with ${fileName} file added`,\n          e\n        )\n      );\n    });\n    const pullRequestResponse = await octo.pulls.create({\n      owner,\n      repo,\n      title,\n      head: branchName,\n      body,\n      base: repoData.data.default_branch\n    }).catch((e) => {\n      throw new Error(\n        formatHttpErrorMessage(\n          `Couldn't create a pull request for ${branchName} branch`,\n          e\n        )\n      );\n    });\n    return {\n      link: pullRequestResponse.data.html_url,\n      location: `https://${githubIntegrationConfig.host}/${owner}/${repo}/blob/${repoData.data.default_branch}/${fileName}`\n    };\n  }\n}\nfunction formatHttpErrorMessage(message, error) {\n  return `${message}, received http response status code ${error.status}: ${error.message}`;\n}\n\nconst rootRouteRef = createRouteRef({\n  id: \"catalog-import\"\n});\nconst catalogImportPlugin = createPlugin({\n  id: \"catalog-import\",\n  apis: [\n    createApiFactory({\n      api: catalogImportApiRef,\n      deps: {\n        discoveryApi: discoveryApiRef,\n        scmAuthApi: scmAuthApiRef,\n        identityApi: identityApiRef,\n        scmIntegrationsApi: scmIntegrationsApiRef,\n        catalogApi: catalogApiRef,\n        configApi: configApiRef\n      },\n      factory: ({\n        discoveryApi,\n        scmAuthApi,\n        identityApi,\n        scmIntegrationsApi,\n        catalogApi,\n        configApi\n      }) => new CatalogImportClient({\n        discoveryApi,\n        scmAuthApi,\n        scmIntegrationsApi,\n        identityApi,\n        catalogApi,\n        configApi\n      })\n    })\n  ],\n  routes: {\n    importPage: rootRouteRef\n  }\n});\nconst CatalogImportPage = catalogImportPlugin.provide(\n  createRoutableExtension({\n    name: \"CatalogImportPage\",\n    component: () => import('./esm/index-1cc6da03.esm.js').then((m) => m.ImportPage),\n    mountPoint: rootRouteRef\n  })\n);\n\nfunction useCatalogFilename() {\n  const config = useApi(configApiRef);\n  return getCatalogFilename(config);\n}\n\nconst ImportInfoCard = (props) => {\n  const {\n    exampleLocationUrl = \"https://github.com/backstage/backstage/blob/master/catalog-info.yaml\",\n    exampleRepositoryUrl = \"https://github.com/backstage/backstage\"\n  } = props;\n  const configApi = useApi(configApiRef);\n  const appTitle = configApi.getOptional(\"app.title\") || \"Backstage\";\n  const catalogImportApi = useApi(catalogImportApiRef);\n  const hasGithubIntegration = configApi.has(\"integrations.github\");\n  const catalogFilename = useCatalogFilename();\n  return /* @__PURE__ */ React.createElement(InfoCard, {\n    title: \"Register an existing component\",\n    titleTypographyProps: { component: \"h3\" },\n    deepLink: {\n      title: \"Learn more about the Software Catalog\",\n      link: \"https://backstage.io/docs/features/software-catalog/software-catalog-overview\"\n    }\n  }, /* @__PURE__ */ React.createElement(Typography, {\n    variant: \"body2\",\n    paragraph: true\n  }, \"Enter the URL to your source code repository to add it to \", appTitle, \".\"), /* @__PURE__ */ React.createElement(Typography, {\n    component: \"h4\",\n    variant: \"h6\"\n  }, \"Link to an existing entity file\"), /* @__PURE__ */ React.createElement(Typography, {\n    variant: \"subtitle2\",\n    color: \"textSecondary\",\n    paragraph: true\n  }, \"Example: \", /* @__PURE__ */ React.createElement(\"code\", null, exampleLocationUrl)), /* @__PURE__ */ React.createElement(Typography, {\n    variant: \"body2\",\n    paragraph: true\n  }, \"The wizard analyzes the file, previews the entities, and adds them to the \", appTitle, \" catalog.\"), hasGithubIntegration && /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(Typography, {\n    component: \"h4\",\n    variant: \"h6\"\n  }, \"Link to a repository\", \" \", /* @__PURE__ */ React.createElement(Chip, {\n    label: \"GitHub only\",\n    variant: \"outlined\",\n    size: \"small\"\n  })), /* @__PURE__ */ React.createElement(Typography, {\n    variant: \"subtitle2\",\n    color: \"textSecondary\",\n    paragraph: true\n  }, \"Example: \", /* @__PURE__ */ React.createElement(\"code\", null, exampleRepositoryUrl)), /* @__PURE__ */ React.createElement(Typography, {\n    variant: \"body2\",\n    paragraph: true\n  }, \"The wizard discovers all \", /* @__PURE__ */ React.createElement(\"code\", null, catalogFilename), \" files in the repository, previews the entities, and adds them to the \", appTitle, \" \", \"catalog.\"), catalogImportApi.preparePullRequest && /* @__PURE__ */ React.createElement(Typography, {\n    variant: \"body2\",\n    paragraph: true\n  }, \"If no entities are found, the wizard will prepare a Pull Request that adds an example \", /* @__PURE__ */ React.createElement(\"code\", null, catalogFilename), \" and prepares the \", appTitle, \" catalog to load all entities as soon as the Pull Request is merged.\")));\n};\n\nfunction init(initialUrl) {\n  return {\n    activeFlow: \"unknown\",\n    activeState: \"analyze\",\n    analysisUrl: initialUrl,\n    previousStates: []\n  };\n}\nfunction reducer(state, action) {\n  switch (action.type) {\n    case \"onAnalysis\": {\n      if (state.activeState !== \"analyze\") {\n        return state;\n      }\n      const { activeState, previousStates } = state;\n      const [activeFlow, analysisUrl, analyzeResult, opts] = action.args;\n      return {\n        ...state,\n        analysisUrl,\n        activeFlow,\n        analyzeResult,\n        prepareResult: opts == null ? void 0 : opts.prepareResult,\n        activeState: (opts == null ? void 0 : opts.prepareResult) === void 0 ? \"prepare\" : \"review\",\n        previousStates: previousStates.concat(activeState)\n      };\n    }\n    case \"onPrepare\": {\n      if (state.activeState !== \"prepare\") {\n        return state;\n      }\n      const { activeState, previousStates } = state;\n      const [prepareResult, opts] = action.args;\n      return {\n        ...state,\n        prepareResult,\n        activeState: \"review\",\n        previousStates: (opts == null ? void 0 : opts.notRepeatable) ? [] : previousStates.concat(activeState)\n      };\n    }\n    case \"onReview\": {\n      if (state.activeState !== \"review\") {\n        return state;\n      }\n      const { activeState, previousStates } = state;\n      const [reviewResult] = action.args;\n      return {\n        ...state,\n        reviewResult,\n        activeState: \"finish\",\n        previousStates: previousStates.concat(activeState)\n      };\n    }\n    case \"onGoBack\": {\n      const { activeState, previousStates } = state;\n      return {\n        ...state,\n        activeState: previousStates.length > 0 ? previousStates[previousStates.length - 1] : activeState,\n        previousStates: previousStates.slice(0, previousStates.length - 1)\n      };\n    }\n    case \"onReset\":\n      return {\n        ...init(action.initialUrl),\n        prepareResult: state.prepareResult\n      };\n    default:\n      throw new Error();\n  }\n}\nconst useImportState = (options) => {\n  const [state, dispatch] = useReducer(reducer, options == null ? void 0 : options.initialUrl, init);\n  const { activeFlow, activeState, analysisUrl, previousStates } = state;\n  return {\n    activeFlow,\n    activeState,\n    activeStepNumber: [\"analyze\", \"prepare\", \"review\", \"finish\"].indexOf(\n      activeState\n    ),\n    analysisUrl,\n    analyzeResult: state.analyzeResult,\n    prepareResult: state.prepareResult,\n    reviewResult: state.reviewResult,\n    onAnalysis: (flow, url, result, opts) => dispatch({\n      type: \"onAnalysis\",\n      args: [flow, url, result, opts]\n    }),\n    onPrepare: (result, opts) => dispatch({\n      type: \"onPrepare\",\n      args: [result, opts]\n    }),\n    onReview: (result) => dispatch({ type: \"onReview\", args: [result] }),\n    onGoBack: previousStates.length > 0 ? () => dispatch({ type: \"onGoBack\" }) : void 0,\n    onReset: () => dispatch({ type: \"onReset\", initialUrl: options == null ? void 0 : options.initialUrl })\n  };\n};\n\nconst useStyles$3 = makeStyles((theme) => ({\n  wrapper: {\n    marginTop: theme.spacing(1),\n    marginRight: theme.spacing(1),\n    position: \"relative\"\n  },\n  buttonProgress: {\n    position: \"absolute\",\n    top: \"50%\",\n    left: \"50%\",\n    marginTop: -12,\n    marginLeft: -12\n  },\n  button: {\n    marginTop: theme.spacing(1),\n    marginRight: theme.spacing(1)\n  }\n}));\nconst NextButton = (props) => {\n  const { loading, ...buttonProps } = props;\n  const classes = useStyles$3();\n  return /* @__PURE__ */ React.createElement(\"div\", {\n    className: classes.wrapper\n  }, /* @__PURE__ */ React.createElement(Button, {\n    color: \"primary\",\n    variant: \"contained\",\n    ...buttonProps,\n    disabled: props.disabled || props.loading\n  }), props.loading && /* @__PURE__ */ React.createElement(CircularProgress, {\n    size: \"1.5rem\",\n    className: classes.buttonProgress\n  }), props.loading);\n};\nconst BackButton = (props) => {\n  const classes = useStyles$3();\n  return /* @__PURE__ */ React.createElement(Button, {\n    variant: \"outlined\",\n    className: classes.button,\n    ...props\n  }, props.children || \"Back\");\n};\n\nconst useStyles$2 = makeStyles((theme) => ({\n  nested: {\n    paddingLeft: theme.spacing(4)\n  }\n}));\nfunction sortEntities(entities) {\n  return entities.sort(\n    (a, b) => humanizeEntityRef(a).localeCompare(humanizeEntityRef(b))\n  );\n}\nconst EntityListComponent = (props) => {\n  const {\n    locations,\n    collapsed = false,\n    locationListItemIcon,\n    onItemClick,\n    firstListItem,\n    withLinks = false\n  } = props;\n  const app = useApp();\n  const classes = useStyles$2();\n  const [expandedUrls, setExpandedUrls] = useState([]);\n  const handleClick = (url) => {\n    setExpandedUrls(\n      (urls) => urls.includes(url) ? urls.filter((u) => u !== url) : urls.concat(url)\n    );\n  };\n  return /* @__PURE__ */ React.createElement(List, null, firstListItem, locations.map((r) => /* @__PURE__ */ React.createElement(React.Fragment, {\n    key: r.target\n  }, /* @__PURE__ */ React.createElement(ListItem, {\n    dense: true,\n    button: Boolean(onItemClick),\n    onClick: () => onItemClick == null ? void 0 : onItemClick.call(void 0, r.target)\n  }, /* @__PURE__ */ React.createElement(ListItemIcon, null, locationListItemIcon(r.target)), /* @__PURE__ */ React.createElement(ListItemText, {\n    primary: r.target,\n    secondary: `Entities: ${r.entities.length}`\n  }), collapsed && /* @__PURE__ */ React.createElement(ListItemSecondaryAction, null, /* @__PURE__ */ React.createElement(IconButton, {\n    edge: \"end\",\n    onClick: () => handleClick(r.target)\n  }, expandedUrls.includes(r.target) ? /* @__PURE__ */ React.createElement(ExpandLessIcon, null) : /* @__PURE__ */ React.createElement(ExpandMoreIcon, null)))), /* @__PURE__ */ React.createElement(Collapse, {\n    in: !collapsed || expandedUrls.includes(r.target),\n    timeout: \"auto\",\n    unmountOnExit: true\n  }, /* @__PURE__ */ React.createElement(List, {\n    component: \"div\",\n    disablePadding: true,\n    dense: true\n  }, sortEntities(r.entities).map((entity) => {\n    var _a;\n    const Icon = (_a = app.getSystemIcon(\n      `kind:${entity.kind.toLocaleLowerCase(\"en-US\")}`\n    )) != null ? _a : WorkIcon;\n    return /* @__PURE__ */ React.createElement(ListItem, {\n      key: humanizeEntityRef(entity),\n      className: classes.nested,\n      ...withLinks ? {\n        component: EntityRefLink,\n        entityRef: entity,\n        button: withLinks\n      } : {}\n    }, /* @__PURE__ */ React.createElement(ListItemIcon, null, /* @__PURE__ */ React.createElement(Icon, null)), /* @__PURE__ */ React.createElement(ListItemText, {\n      primary: humanizeEntityRef(entity)\n    }));\n  }))))));\n};\n\nconst StepFinishImportLocation = ({ prepareResult, onReset }) => {\n  const continueButton = /* @__PURE__ */ React.createElement(Grid, {\n    container: true,\n    spacing: 0\n  }, /* @__PURE__ */ React.createElement(BackButton, {\n    onClick: onReset\n  }, \"Register another\"));\n  if (prepareResult.type === \"repository\") {\n    return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(Typography, {\n      paragraph: true\n    }, \"The following Pull Request has been opened:\", \" \", /* @__PURE__ */ React.createElement(Link, {\n      to: prepareResult.pullRequest.url,\n      target: \"_blank\",\n      rel: \"noreferrer\"\n    }, prepareResult.pullRequest.url)), /* @__PURE__ */ React.createElement(Typography, {\n      paragraph: true\n    }, \"Your entities will be imported as soon as the Pull Request is merged.\"), continueButton);\n  }\n  const [existingLocations, newLocations] = partition(\n    prepareResult.locations,\n    (l) => l.exists\n  );\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, newLocations.length > 0 && /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(Typography, null, \"The following entities have been added to the catalog:\"), /* @__PURE__ */ React.createElement(EntityListComponent, {\n    locations: newLocations,\n    locationListItemIcon: () => /* @__PURE__ */ React.createElement(LocationOnIcon, null),\n    withLinks: true\n  })), existingLocations.length > 0 && /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(Typography, null, \"A refresh was triggered for the following locations:\"), /* @__PURE__ */ React.createElement(EntityListComponent, {\n    locations: existingLocations,\n    locationListItemIcon: () => /* @__PURE__ */ React.createElement(LocationOnIcon, null),\n    withLinks: true\n  })), continueButton);\n};\n\nconst StepInitAnalyzeUrl = (props) => {\n  const {\n    onAnalysis,\n    analysisUrl = \"\",\n    disablePullRequest = false,\n    exampleLocationUrl = \"https://github.com/backstage/backstage/blob/master/catalog-info.yaml\"\n  } = props;\n  const errorApi = useApi(errorApiRef);\n  const catalogImportApi = useApi(catalogImportApiRef);\n  const {\n    register,\n    handleSubmit,\n    formState: { errors },\n    watch\n  } = useForm({\n    mode: \"onTouched\",\n    defaultValues: {\n      url: analysisUrl\n    }\n  });\n  const [submitted, setSubmitted] = useState(false);\n  const [error, setError] = useState(void 0);\n  const handleResult = useCallback(\n    async ({ url }) => {\n      var _a, _b, _c;\n      setSubmitted(true);\n      try {\n        const analysisResult = await catalogImportApi.analyzeUrl(url);\n        switch (analysisResult.type) {\n          case \"repository\":\n            if (!disablePullRequest && analysisResult.generatedEntities.length > 0) {\n              onAnalysis(\"no-location\", url, analysisResult);\n            } else {\n              setError(\"Couldn't generate entities for your repository\");\n              setSubmitted(false);\n            }\n            break;\n          case \"locations\": {\n            if (analysisResult.locations.length === 1) {\n              onAnalysis(\"single-location\", url, analysisResult, {\n                prepareResult: analysisResult\n              });\n            } else if (analysisResult.locations.length > 1) {\n              onAnalysis(\"multiple-locations\", url, analysisResult);\n            } else {\n              setError(\"There are no entities at this location\");\n              setSubmitted(false);\n            }\n            break;\n          }\n          default: {\n            const err = `Received unknown analysis result of type ${analysisResult.type}. Please contact the support team.`;\n            setError(err);\n            setSubmitted(false);\n            errorApi.post(new Error(err));\n            break;\n          }\n        }\n      } catch (e) {\n        setError((_c = (_b = (_a = e == null ? void 0 : e.data) == null ? void 0 : _a.error) == null ? void 0 : _b.message) != null ? _c : e.message);\n        setSubmitted(false);\n      }\n    },\n    [catalogImportApi, disablePullRequest, errorApi, onAnalysis]\n  );\n  return /* @__PURE__ */ React.createElement(\"form\", {\n    onSubmit: handleSubmit(handleResult)\n  }, /* @__PURE__ */ React.createElement(TextField, {\n    ...asInputRef(\n      register(\"url\", {\n        required: true,\n        validate: {\n          httpsValidator: (value) => typeof value === \"string\" && value.match(/^http[s]?:\\/\\//) !== null || \"Must start with http:// or https://.\"\n        }\n      })\n    ),\n    fullWidth: true,\n    id: \"url\",\n    label: \"Repository URL\",\n    placeholder: exampleLocationUrl,\n    helperText: \"Enter the full path to your entity file to start tracking your component\",\n    margin: \"normal\",\n    variant: \"outlined\",\n    error: Boolean(errors.url),\n    required: true\n  }), errors.url && /* @__PURE__ */ React.createElement(FormHelperText, {\n    error: true\n  }, errors.url.message), error && /* @__PURE__ */ React.createElement(FormHelperText, {\n    error: true\n  }, error), /* @__PURE__ */ React.createElement(Grid, {\n    container: true,\n    spacing: 0\n  }, /* @__PURE__ */ React.createElement(NextButton, {\n    disabled: Boolean(errors.url) || !watch(\"url\"),\n    loading: submitted,\n    type: \"submit\"\n  }, \"Analyze\")));\n};\n\nconst AutocompleteTextField = (props) => {\n  const {\n    name,\n    options,\n    required,\n    errors,\n    rules,\n    loading = false,\n    loadingText,\n    helperText,\n    errorHelperText,\n    textFieldProps = {}\n  } = props;\n  return /* @__PURE__ */ React.createElement(Controller, {\n    name,\n    rules,\n    render: ({ field: { onChange } }) => /* @__PURE__ */ React.createElement(Autocomplete, {\n      loading,\n      loadingText,\n      options: options || [],\n      autoSelect: true,\n      freeSolo: true,\n      onChange: (_event, value) => onChange(value),\n      renderInput: (params) => /* @__PURE__ */ React.createElement(TextField, {\n        ...params,\n        helperText: (errors == null ? void 0 : errors[name]) && errorHelperText || helperText,\n        error: Boolean(errors == null ? void 0 : errors[name]),\n        margin: \"normal\",\n        variant: \"outlined\",\n        required,\n        InputProps: {\n          ...params.InputProps,\n          endAdornment: /* @__PURE__ */ React.createElement(React.Fragment, null, loading ? /* @__PURE__ */ React.createElement(CircularProgress, {\n            color: \"inherit\",\n            size: \"1em\"\n          }) : null, params.InputProps.endAdornment)\n        },\n        ...textFieldProps\n      })\n    })\n  });\n};\n\nconst PreparePullRequestForm = (props) => {\n  const { defaultValues, onSubmit, render } = props;\n  const methods = useForm({ mode: \"onTouched\", defaultValues });\n  const { handleSubmit, watch, control, register, formState, setValue } = methods;\n  return /* @__PURE__ */ React.createElement(FormProvider, {\n    ...methods\n  }, /* @__PURE__ */ React.createElement(\"form\", {\n    onSubmit: handleSubmit(onSubmit)\n  }, render({ values: watch(), formState, register, control, setValue })));\n};\n\nconst PreviewCatalogInfoComponent = (props) => {\n  const { repositoryUrl, entities, classes } = props;\n  const catalogFilename = useCatalogFilename();\n  return /* @__PURE__ */ React.createElement(Card, {\n    variant: \"outlined\",\n    className: classes == null ? void 0 : classes.card\n  }, /* @__PURE__ */ React.createElement(CardHeader, {\n    title: /* @__PURE__ */ React.createElement(\"code\", null, `${trimEnd(repositoryUrl, \"/\")}/${catalogFilename}`)\n  }), /* @__PURE__ */ React.createElement(CardContent, {\n    className: classes == null ? void 0 : classes.cardContent\n  }, /* @__PURE__ */ React.createElement(CodeSnippet, {\n    text: entities.map((e) => YAML.stringify(e)).join(\"---\\n\").trim(),\n    language: \"yaml\"\n  })));\n};\n\nconst PreviewPullRequestComponent = (props) => {\n  const { title, description, classes } = props;\n  return /* @__PURE__ */ React.createElement(Card, {\n    variant: \"outlined\",\n    className: classes == null ? void 0 : classes.card\n  }, /* @__PURE__ */ React.createElement(CardHeader, {\n    title,\n    subheader: \"Create a new Pull Request\"\n  }), /* @__PURE__ */ React.createElement(CardContent, {\n    className: classes == null ? void 0 : classes.cardContent\n  }, /* @__PURE__ */ React.createElement(MarkdownContent, {\n    content: description\n  })));\n};\n\nconst useStyles$1 = makeStyles((theme) => ({\n  previewCard: {\n    marginTop: theme.spacing(1)\n  },\n  previewCardContent: {\n    paddingTop: 0\n  }\n}));\nfunction generateEntities(entities, componentName, owner) {\n  return entities.map((e) => ({\n    ...e,\n    apiVersion: e.apiVersion,\n    kind: e.kind,\n    metadata: {\n      ...e.metadata,\n      name: componentName\n    },\n    spec: {\n      ...e.spec,\n      ...owner ? { owner } : {}\n    }\n  }));\n}\nconst StepPrepareCreatePullRequest = (props) => {\n  var _a, _b, _c, _d, _e, _f;\n  const { analyzeResult, onPrepare, onGoBack, renderFormFields } = props;\n  const classes = useStyles$1();\n  const catalogApi = useApi(catalogApiRef);\n  const catalogImportApi = useApi(catalogImportApiRef);\n  const errorApi = useApi(errorApiRef);\n  const [submitted, setSubmitted] = useState(false);\n  const [error, setError] = useState();\n  const catalogFilename = useCatalogFilename();\n  const {\n    loading: prDefaultsLoading,\n    value: prDefaults,\n    error: prDefaultsError\n  } = useAsync(\n    () => catalogImportApi.preparePullRequest(),\n    [catalogImportApi.preparePullRequest]\n  );\n  useEffect(() => {\n    if (prDefaultsError) {\n      errorApi.post(prDefaultsError);\n    }\n  }, [prDefaultsError, errorApi]);\n  const { loading: groupsLoading, value: groups } = useAsync(async () => {\n    const groupEntities = await catalogApi.getEntities({\n      filter: { kind: \"group\" }\n    });\n    return groupEntities.items.map((e) => humanizeEntityRef(e, { defaultKind: \"group\" })).sort();\n  });\n  const handleResult = useCallback(\n    async (data) => {\n      setSubmitted(true);\n      try {\n        const pr = await catalogImportApi.submitPullRequest({\n          repositoryUrl: analyzeResult.url,\n          title: data.title,\n          body: data.body,\n          fileContent: generateEntities(\n            analyzeResult.generatedEntities,\n            data.componentName,\n            data.owner\n          ).map((e) => YAML.stringify(e)).join(\"---\\n\")\n        });\n        onPrepare(\n          {\n            type: \"repository\",\n            url: analyzeResult.url,\n            integrationType: analyzeResult.integrationType,\n            pullRequest: {\n              url: pr.link\n            },\n            locations: [\n              {\n                target: pr.location,\n                entities: generateEntities(\n                  analyzeResult.generatedEntities,\n                  data.componentName,\n                  data.owner\n                ).map((e) => ({\n                  kind: e.kind,\n                  namespace: e.metadata.namespace,\n                  name: e.metadata.name\n                }))\n              }\n            ]\n          },\n          { notRepeatable: true }\n        );\n      } catch (e) {\n        assertError(e);\n        setError(e.message);\n        setSubmitted(false);\n      }\n    },\n    [\n      analyzeResult.generatedEntities,\n      analyzeResult.integrationType,\n      analyzeResult.url,\n      catalogImportApi,\n      onPrepare\n    ]\n  );\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(Typography, null, \"You entered a link to a \", analyzeResult.integrationType, \" repository but a\", \" \", /* @__PURE__ */ React.createElement(\"code\", null, catalogFilename), \" could not be found. Use this form to open a Pull Request that creates one.\"), !prDefaultsLoading && /* @__PURE__ */ React.createElement(PreparePullRequestForm, {\n    onSubmit: handleResult,\n    defaultValues: {\n      title: (_a = prDefaults == null ? void 0 : prDefaults.title) != null ? _a : \"\",\n      body: (_b = prDefaults == null ? void 0 : prDefaults.body) != null ? _b : \"\",\n      owner: ((_d = (_c = analyzeResult.generatedEntities[0]) == null ? void 0 : _c.spec) == null ? void 0 : _d.owner) || \"\",\n      componentName: ((_f = (_e = analyzeResult.generatedEntities[0]) == null ? void 0 : _e.metadata) == null ? void 0 : _f.name) || \"\",\n      useCodeowners: false\n    },\n    render: ({ values, formState, register, setValue }) => /* @__PURE__ */ React.createElement(React.Fragment, null, renderFormFields({\n      values,\n      formState,\n      register,\n      setValue,\n      groups: groups != null ? groups : [],\n      groupsLoading\n    }), /* @__PURE__ */ React.createElement(Box, {\n      marginTop: 2\n    }, /* @__PURE__ */ React.createElement(Typography, {\n      variant: \"h6\"\n    }, \"Preview Pull Request\")), /* @__PURE__ */ React.createElement(PreviewPullRequestComponent, {\n      title: values.title,\n      description: values.body,\n      classes: {\n        card: classes.previewCard,\n        cardContent: classes.previewCardContent\n      }\n    }), /* @__PURE__ */ React.createElement(Box, {\n      marginTop: 2,\n      marginBottom: 1\n    }, /* @__PURE__ */ React.createElement(Typography, {\n      variant: \"h6\"\n    }, \"Preview Entities\")), /* @__PURE__ */ React.createElement(PreviewCatalogInfoComponent, {\n      entities: generateEntities(\n        analyzeResult.generatedEntities,\n        values.componentName,\n        values.owner\n      ),\n      repositoryUrl: analyzeResult.url,\n      classes: {\n        card: classes.previewCard,\n        cardContent: classes.previewCardContent\n      }\n    }), error && /* @__PURE__ */ React.createElement(FormHelperText, {\n      error: true\n    }, error), /* @__PURE__ */ React.createElement(Grid, {\n      container: true,\n      spacing: 0\n    }, onGoBack && /* @__PURE__ */ React.createElement(BackButton, {\n      onClick: onGoBack,\n      disabled: submitted\n    }), /* @__PURE__ */ React.createElement(NextButton, {\n      type: \"submit\",\n      disabled: Boolean(\n        formState.errors.title || formState.errors.body || formState.errors.owner\n      ),\n      loading: submitted\n    }, \"Create PR\")))\n  }));\n};\n\nconst StepPrepareSelectLocations = ({\n  analyzeResult,\n  prepareResult,\n  onPrepare,\n  onGoBack\n}) => {\n  const [selectedUrls, setSelectedUrls] = useState(\n    (prepareResult == null ? void 0 : prepareResult.locations.map((l) => l.target)) || []\n  );\n  const [existingLocations, locations] = partition(\n    analyzeResult == null ? void 0 : analyzeResult.locations,\n    (l) => l.exists\n  );\n  const handleResult = useCallback(async () => {\n    onPrepare({\n      type: \"locations\",\n      locations: locations.filter((l) => selectedUrls.includes(l.target))\n    });\n  }, [locations, onPrepare, selectedUrls]);\n  const onItemClick = (url) => {\n    setSelectedUrls(\n      (urls) => urls.includes(url) ? urls.filter((u) => u !== url) : urls.concat(url)\n    );\n  };\n  const onSelectAll = () => {\n    setSelectedUrls(\n      (urls) => urls.length < locations.length ? locations.map((l) => l.target) : []\n    );\n  };\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, locations.length > 0 && /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(Typography, null, \"Select one or more locations that are present in your git repository:\"), /* @__PURE__ */ React.createElement(EntityListComponent, {\n    firstListItem: /* @__PURE__ */ React.createElement(ListItem, {\n      dense: true,\n      button: true,\n      onClick: onSelectAll\n    }, /* @__PURE__ */ React.createElement(ListItemIcon, null, /* @__PURE__ */ React.createElement(Checkbox, {\n      edge: \"start\",\n      checked: selectedUrls.length === locations.length,\n      indeterminate: selectedUrls.length > 0 && selectedUrls.length < locations.length,\n      tabIndex: -1,\n      disableRipple: true\n    })), /* @__PURE__ */ React.createElement(ListItemText, {\n      primary: \"Select All\"\n    })),\n    onItemClick,\n    locations,\n    locationListItemIcon: (target) => /* @__PURE__ */ React.createElement(Checkbox, {\n      edge: \"start\",\n      checked: selectedUrls.includes(target),\n      tabIndex: -1,\n      disableRipple: true\n    }),\n    collapsed: true\n  })), existingLocations.length > 0 && /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(Typography, null, \"These locations already exist in the catalog:\"), /* @__PURE__ */ React.createElement(EntityListComponent, {\n    locations: existingLocations,\n    locationListItemIcon: () => /* @__PURE__ */ React.createElement(LocationOnIcon, null),\n    withLinks: true,\n    collapsed: true\n  })), /* @__PURE__ */ React.createElement(Grid, {\n    container: true,\n    spacing: 0\n  }, onGoBack && /* @__PURE__ */ React.createElement(BackButton, {\n    onClick: onGoBack\n  }), /* @__PURE__ */ React.createElement(NextButton, {\n    disabled: selectedUrls.length === 0,\n    onClick: handleResult\n  }, \"Review\")));\n};\n\nconst StepReviewLocation = ({\n  prepareResult,\n  onReview,\n  onGoBack\n}) => {\n  const catalogApi = useApi(catalogApiRef);\n  const configApi = useApi(configApiRef);\n  const appTitle = configApi.getOptional(\"app.title\") || \"Backstage\";\n  const [submitted, setSubmitted] = useState(false);\n  const [error, setError] = useState();\n  const exists = prepareResult.type === \"locations\" && prepareResult.locations.some((l) => l.exists) ? true : false;\n  const handleClick = useCallback(async () => {\n    setSubmitted(true);\n    try {\n      let refreshed = new Array();\n      if (prepareResult.type === \"locations\") {\n        refreshed = await Promise.all(\n          prepareResult.locations.filter((l) => l.exists).map(async (l) => {\n            var _a;\n            const ref = stringifyEntityRef((_a = l.entities[0]) != null ? _a : l);\n            await catalogApi.refreshEntity(ref);\n            return { target: l.target };\n          })\n        );\n      }\n      const locations = await Promise.all(\n        prepareResult.locations.filter((l) => !l.exists).map(async (l) => {\n          const result = await catalogApi.addLocation({\n            type: \"url\",\n            target: l.target\n          });\n          return {\n            target: result.location.target,\n            entities: result.entities\n          };\n        })\n      );\n      onReview({\n        ...prepareResult,\n        ...{ refreshed },\n        locations\n      });\n    } catch (e) {\n      assertError(e);\n      if (prepareResult.type === \"repository\" && e.message.startsWith(\n        \"Location was added but has no entities specified yet\"\n      )) {\n        onReview({\n          ...prepareResult,\n          locations: prepareResult.locations.map((l) => ({\n            target: l.target,\n            entities: []\n          }))\n        });\n      } else {\n        setError(e.message);\n        setSubmitted(false);\n      }\n    }\n  }, [prepareResult, onReview, catalogApi]);\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, prepareResult.type === \"repository\" && /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(Typography, {\n    paragraph: true\n  }, \"The following Pull Request has been opened:\", \" \", /* @__PURE__ */ React.createElement(Link, {\n    to: prepareResult.pullRequest.url,\n    target: \"_blank\",\n    rel: \"noopener noreferrer\"\n  }, prepareResult.pullRequest.url)), /* @__PURE__ */ React.createElement(Typography, {\n    paragraph: true\n  }, \"You can already import the location and \", appTitle, \" will fetch the entities as soon as the Pull Request is merged.\")), /* @__PURE__ */ React.createElement(Typography, null, exists ? \"The following locations already exist in the catalog:\" : \"The following entities will be added to the catalog:\"), /* @__PURE__ */ React.createElement(EntityListComponent, {\n    locations: prepareResult.locations,\n    locationListItemIcon: () => /* @__PURE__ */ React.createElement(LocationOnIcon, null)\n  }), error && /* @__PURE__ */ React.createElement(FormHelperText, {\n    error: true\n  }, error), /* @__PURE__ */ React.createElement(Grid, {\n    container: true,\n    spacing: 0\n  }, onGoBack && /* @__PURE__ */ React.createElement(BackButton, {\n    onClick: onGoBack,\n    disabled: submitted\n  }), /* @__PURE__ */ React.createElement(NextButton, {\n    disabled: submitted,\n    loading: submitted,\n    onClick: () => handleClick()\n  }, exists ? \"Refresh\" : \"Import\")));\n};\n\nfunction defaultGenerateStepper(flow, defaults) {\n  switch (flow) {\n    case \"single-location\":\n      return {\n        ...defaults,\n        prepare: () => ({\n          stepLabel: /* @__PURE__ */ React.createElement(StepLabel, {\n            optional: /* @__PURE__ */ React.createElement(Typography, {\n              variant: \"caption\"\n            }, \"Discovered Locations: 1\")\n          }, \"Select Locations\"),\n          content: /* @__PURE__ */ React.createElement(React.Fragment, null)\n        })\n      };\n    case \"multiple-locations\":\n      return {\n        ...defaults,\n        prepare: (state, opts) => {\n          if (state.analyzeResult.type !== \"locations\") {\n            return defaults.prepare(state, opts);\n          }\n          return {\n            stepLabel: /* @__PURE__ */ React.createElement(StepLabel, {\n              optional: /* @__PURE__ */ React.createElement(Typography, {\n                variant: \"caption\"\n              }, \"Discovered Locations: \", state.analyzeResult.locations.length)\n            }, \"Select Locations\"),\n            content: /* @__PURE__ */ React.createElement(StepPrepareSelectLocations, {\n              analyzeResult: state.analyzeResult,\n              prepareResult: state.prepareResult,\n              onPrepare: state.onPrepare,\n              onGoBack: state.onGoBack\n            })\n          };\n        }\n      };\n    case \"no-location\":\n      return {\n        ...defaults,\n        prepare: (state, opts) => {\n          if (state.analyzeResult.type !== \"repository\") {\n            return defaults.prepare(state, opts);\n          }\n          return {\n            stepLabel: /* @__PURE__ */ React.createElement(StepLabel, null, \"Create Pull Request\"),\n            content: /* @__PURE__ */ React.createElement(StepPrepareCreatePullRequest, {\n              analyzeResult: state.analyzeResult,\n              onPrepare: state.onPrepare,\n              onGoBack: state.onGoBack,\n              renderFormFields: ({\n                values,\n                setValue,\n                formState,\n                groupsLoading,\n                groups,\n                register\n              }) => /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(Box, {\n                marginTop: 2\n              }, /* @__PURE__ */ React.createElement(Typography, {\n                variant: \"h6\"\n              }, \"Pull Request Details\")), /* @__PURE__ */ React.createElement(TextField, {\n                ...asInputRef(\n                  register(\"title\", {\n                    required: true\n                  })\n                ),\n                label: \"Pull Request Title\",\n                placeholder: \"Add Backstage catalog entity descriptor files\",\n                margin: \"normal\",\n                variant: \"outlined\",\n                fullWidth: true,\n                error: Boolean(formState.errors.title),\n                required: true\n              }), /* @__PURE__ */ React.createElement(TextField, {\n                ...asInputRef(\n                  register(\"body\", {\n                    required: true\n                  })\n                ),\n                label: \"Pull Request Body\",\n                placeholder: \"A describing text with Markdown support\",\n                margin: \"normal\",\n                variant: \"outlined\",\n                fullWidth: true,\n                error: Boolean(formState.errors.body),\n                multiline: true,\n                required: true\n              }), /* @__PURE__ */ React.createElement(Box, {\n                marginTop: 2\n              }, /* @__PURE__ */ React.createElement(Typography, {\n                variant: \"h6\"\n              }, \"Entity Configuration\")), /* @__PURE__ */ React.createElement(TextField, {\n                ...asInputRef(\n                  register(\"componentName\", { required: true })\n                ),\n                label: \"Name of the created component\",\n                placeholder: \"my-component\",\n                margin: \"normal\",\n                variant: \"outlined\",\n                fullWidth: true,\n                error: Boolean(formState.errors.componentName),\n                required: true\n              }), !values.useCodeowners && /* @__PURE__ */ React.createElement(AutocompleteTextField, {\n                name: \"owner\",\n                errors: formState.errors,\n                options: groups || [],\n                loading: groupsLoading,\n                loadingText: \"Loading groups\\u2026\",\n                helperText: \"Select an owner from the list or enter a reference to a Group or a User\",\n                errorHelperText: \"required value\",\n                textFieldProps: {\n                  label: \"Entity Owner\",\n                  placeholder: \"my-group\"\n                },\n                rules: { required: true },\n                required: true\n              }), /* @__PURE__ */ React.createElement(FormControlLabel, {\n                control: /* @__PURE__ */ React.createElement(Checkbox, {\n                  ...asInputRef(register(\"useCodeowners\")),\n                  onChange: (_, value) => {\n                    if (value) {\n                      setValue(\"owner\", \"\");\n                    }\n                  }\n                }),\n                label: /* @__PURE__ */ React.createElement(React.Fragment, null, \"Use \", /* @__PURE__ */ React.createElement(\"em\", null, \"CODEOWNERS\"), \" file as Entity Owner\")\n              }), /* @__PURE__ */ React.createElement(FormHelperText, null, \"WARNING: This may fail if no CODEOWNERS file is found at the target location.\"))\n            })\n          };\n        }\n      };\n    default:\n      return defaults;\n  }\n}\nconst defaultStepper = {\n  analyze: (state, { apis }) => ({\n    stepLabel: /* @__PURE__ */ React.createElement(StepLabel, null, \"Select URL\"),\n    content: /* @__PURE__ */ React.createElement(StepInitAnalyzeUrl, {\n      key: \"analyze\",\n      analysisUrl: state.analysisUrl,\n      onAnalysis: state.onAnalysis,\n      disablePullRequest: !apis.catalogImportApi.preparePullRequest\n    })\n  }),\n  prepare: (state) => ({\n    stepLabel: /* @__PURE__ */ React.createElement(StepLabel, {\n      optional: /* @__PURE__ */ React.createElement(Typography, {\n        variant: \"caption\"\n      }, \"Optional\")\n    }, \"Import Actions\"),\n    content: /* @__PURE__ */ React.createElement(BackButton, {\n      onClick: state.onGoBack\n    })\n  }),\n  review: (state) => ({\n    stepLabel: /* @__PURE__ */ React.createElement(StepLabel, null, \"Review\"),\n    content: /* @__PURE__ */ React.createElement(StepReviewLocation, {\n      prepareResult: state.prepareResult,\n      onReview: state.onReview,\n      onGoBack: state.onGoBack\n    })\n  }),\n  finish: (state) => ({\n    stepLabel: /* @__PURE__ */ React.createElement(StepLabel, null, \"Finish\"),\n    content: /* @__PURE__ */ React.createElement(StepFinishImportLocation, {\n      prepareResult: state.prepareResult,\n      onReset: state.onReset\n    })\n  })\n};\n\nconst useStyles = makeStyles(() => ({\n  stepperRoot: {\n    padding: 0\n  }\n}));\nconst ImportStepper = (props) => {\n  const {\n    initialUrl,\n    generateStepper = defaultGenerateStepper,\n    variant\n  } = props;\n  const catalogImportApi = useApi(catalogImportApiRef);\n  const classes = useStyles();\n  const state = useImportState({ initialUrl });\n  const states = useMemo(\n    () => generateStepper(state.activeFlow, defaultStepper),\n    [generateStepper, state.activeFlow]\n  );\n  const render = (step) => {\n    return /* @__PURE__ */ React.createElement(Step, null, step.stepLabel, /* @__PURE__ */ React.createElement(StepContent, null, step.content));\n  };\n  return /* @__PURE__ */ React.createElement(InfoCard, {\n    variant\n  }, /* @__PURE__ */ React.createElement(Stepper, {\n    classes: { root: classes.stepperRoot },\n    activeStep: state.activeStepNumber,\n    orientation: \"vertical\"\n  }, render(\n    states.analyze(\n      state,\n      { apis: { catalogImportApi } }\n    )\n  ), render(\n    states.prepare(\n      state,\n      { apis: { catalogImportApi } }\n    )\n  ), render(\n    states.review(\n      state,\n      { apis: { catalogImportApi } }\n    )\n  ), render(\n    states.finish(\n      state,\n      { apis: { catalogImportApi } }\n    )\n  )));\n};\n\nconst DefaultImportPage = () => {\n  const configApi = useApi(configApiRef);\n  const appTitle = configApi.getOptional(\"app.title\") || \"Backstage\";\n  return /* @__PURE__ */ React.createElement(Page, {\n    themeId: \"home\"\n  }, /* @__PURE__ */ React.createElement(Header, {\n    title: \"Register an existing component\"\n  }), /* @__PURE__ */ React.createElement(Content, null, /* @__PURE__ */ React.createElement(ContentHeader, {\n    title: `Start tracking your component in ${appTitle}`\n  }, /* @__PURE__ */ React.createElement(SupportButton, null, \"Start tracking your component in \", appTitle, \" by adding it to the software catalog.\")), /* @__PURE__ */ React.createElement(Grid, {\n    container: true,\n    spacing: 2,\n    direction: \"row-reverse\"\n  }, /* @__PURE__ */ React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    md: 4,\n    lg: 6,\n    xl: 8\n  }, /* @__PURE__ */ React.createElement(ImportInfoCard, null)), /* @__PURE__ */ React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    md: 8,\n    lg: 6,\n    xl: 4\n  }, /* @__PURE__ */ React.createElement(ImportStepper, null)))));\n};\n\nexport { AutocompleteTextField, CatalogImportClient, CatalogImportPage, DefaultImportPage, EntityListComponent, ImportInfoCard, ImportStepper, PreparePullRequestForm, PreviewCatalogInfoComponent, PreviewPullRequestComponent, StepInitAnalyzeUrl, StepPrepareCreatePullRequest, catalogImportApiRef, catalogImportPlugin, defaultGenerateStepper, catalogImportPlugin as plugin };\n//# sourceMappingURL=index.esm.js.map\n","export { CATALOG_FILTER_EXISTS } from '@backstage/catalog-client';\nimport { createApiRef, createRouteRef, useRouteRef, useApi, identityApiRef, alertApiRef, useApp, configApiRef } from '@backstage/core-plugin-api';\nimport ObservableImpl from 'zen-observable';\nimport React, { useState, forwardRef, createContext, useMemo, useCallback, useContext, useEffect, useRef, useLayoutEffect, Fragment } from 'react';\nimport { Grid, useMediaQuery, useTheme, Button, Drawer, Box, Typography, Tooltip, makeStyles, FormControlLabel, Checkbox, TextField, Toolbar, FormControl, Input, InputAdornment, IconButton, withStyles, DialogContentText, ListItemText as ListItemText$1, ListSubheader as ListSubheader$1, Card, CardContent, ListItem, ListItemIcon, List, Dialog, DialogTitle, DialogContent, Tabs, Tab, DialogActions, Divider, MenuItem, ListItemSecondaryAction } from '@material-ui/core';\nimport FilterListIcon from '@material-ui/icons/FilterList';\nimport { Link, Progress, ErrorPanel, Select, OverflowTooltip, Table, ResponseErrorPanel, DependencyGraph, DependencyGraphTypes, CodeSnippet } from '@backstage/core-components';\nimport capitalize from 'lodash/capitalize';\nimport sortBy from 'lodash/sortBy';\nimport useAsync from 'react-use/lib/useAsync';\nimport { DEFAULT_NAMESPACE, parseEntityRef, ANNOTATION_SOURCE_LOCATION, parseLocationRef, RELATION_MEMBER_OF, getCompoundEntityRef, stringifyEntityRef, RELATION_OWNED_BY, RELATION_PART_OF, ANNOTATION_LOCATION, ANNOTATION_ORIGIN_LOCATION } from '@backstage/catalog-model';\nimport { getOrCreateGlobalSingleton, createVersionedContext, createVersionedValueMap, useVersionedContext } from '@backstage/version-bridge';\nimport { compact, isEqual, groupBy, chunk } from 'lodash';\nimport qs from 'qs';\nimport { useLocation, useNavigate } from 'react-router';\nimport useAsyncFn from 'react-use/lib/useAsyncFn';\nimport useDebounce from 'react-use/lib/useDebounce';\nimport useMountedState from 'react-use/lib/useMountedState';\nimport isEqual$1 from 'lodash/isEqual';\nimport useObservable from 'react-use/lib/useObservable';\nimport { usePermission } from '@backstage/plugin-permission-react';\nimport CheckBoxIcon from '@material-ui/icons/CheckBox';\nimport CheckBoxOutlineBlankIcon from '@material-ui/icons/CheckBoxOutlineBlank';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport { Autocomplete, Alert } from '@material-ui/lab';\nimport Clear from '@material-ui/icons/Clear';\nimport Search from '@material-ui/icons/Search';\nimport Star from '@material-ui/icons/Star';\nimport StarBorder from '@material-ui/icons/StarBorder';\nimport classNames from 'classnames';\nimport WorkIcon from '@material-ui/icons/Work';\nimport HelpOutlineIcon from '@material-ui/icons/HelpOutline';\nimport groupBy$1 from 'lodash/groupBy';\nimport DialogContentText$1 from '@material-ui/core/DialogContentText';\nimport YAML from 'yaml';\nimport Alert$1 from '@material-ui/lab/Alert';\nimport { assertError } from '@backstage/errors';\nimport SettingsIcon from '@material-ui/icons/Settings';\n\nconst catalogApiRef = createApiRef({\n  id: \"plugin.catalog.service\"\n});\n\nconst starredEntitiesApiRef = createApiRef({\n  id: \"catalog-react.starred-entities\"\n});\n\nclass MockStarredEntitiesApi {\n  constructor() {\n    this.starredEntities = /* @__PURE__ */ new Set();\n    this.subscribers = /* @__PURE__ */ new Set();\n    this.observable = new ObservableImpl((subscriber) => {\n      subscriber.next(new Set(this.starredEntities));\n      this.subscribers.add(subscriber);\n      return () => {\n        this.subscribers.delete(subscriber);\n      };\n    });\n  }\n  async toggleStarred(entityRef) {\n    if (!this.starredEntities.delete(entityRef)) {\n      this.starredEntities.add(entityRef);\n    }\n    for (const subscription of this.subscribers) {\n      subscription.next(new Set(this.starredEntities));\n    }\n  }\n  starredEntitie$() {\n    return this.observable;\n  }\n}\n\nconst Filters = (props) => {\n  const isMidSizeScreen = useMediaQuery(\n    (theme2) => theme2.breakpoints.down(\"md\")\n  );\n  const theme = useTheme();\n  const [filterDrawerOpen, setFilterDrawerOpen] = useState(false);\n  return isMidSizeScreen ? /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(Button, {\n    style: { marginTop: theme.spacing(1), marginLeft: theme.spacing(1) },\n    onClick: () => setFilterDrawerOpen(true),\n    startIcon: /* @__PURE__ */ React.createElement(FilterListIcon, null)\n  }, \"Filters\"), /* @__PURE__ */ React.createElement(Drawer, {\n    open: filterDrawerOpen,\n    onClose: () => setFilterDrawerOpen(false),\n    anchor: \"left\",\n    disableAutoFocus: true,\n    keepMounted: true,\n    variant: \"temporary\"\n  }, /* @__PURE__ */ React.createElement(Box, {\n    m: 2\n  }, /* @__PURE__ */ React.createElement(Typography, {\n    variant: \"h6\",\n    component: \"h2\",\n    style: { marginBottom: theme.spacing(1) }\n  }, \"Filters\"), props.children))) : /* @__PURE__ */ React.createElement(Grid, {\n    item: true,\n    lg: 2\n  }, props.children);\n};\nconst Content = (props) => {\n  return /* @__PURE__ */ React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    lg: 10\n  }, props.children);\n};\nconst CatalogFilterLayout = (props) => {\n  return /* @__PURE__ */ React.createElement(Grid, {\n    container: true,\n    style: { position: \"relative\" }\n  }, props.children);\n};\nCatalogFilterLayout.Filters = Filters;\nCatalogFilterLayout.Content = Content;\n\nconst entityRouteRef = getOrCreateGlobalSingleton(\n  \"catalog:entity-route-ref\",\n  () => createRouteRef({\n    id: \"catalog:entity\",\n    params: [\"namespace\", \"kind\", \"name\"]\n  })\n);\nfunction entityRouteParams(entity) {\n  var _a, _b;\n  return {\n    kind: entity.kind.toLocaleLowerCase(\"en-US\"),\n    namespace: (_b = (_a = entity.metadata.namespace) == null ? void 0 : _a.toLocaleLowerCase(\"en-US\")) != null ? _b : DEFAULT_NAMESPACE,\n    name: entity.metadata.name\n  };\n}\n\nfunction humanizeEntityRef(entityRef, opts) {\n  const defaultKind = opts == null ? void 0 : opts.defaultKind;\n  let kind;\n  let namespace;\n  let name;\n  if (\"metadata\" in entityRef) {\n    kind = entityRef.kind;\n    namespace = entityRef.metadata.namespace;\n    name = entityRef.metadata.name;\n  } else {\n    kind = entityRef.kind;\n    namespace = entityRef.namespace;\n    name = entityRef.name;\n  }\n  if (namespace === void 0 || namespace === \"\") {\n    namespace = DEFAULT_NAMESPACE;\n  }\n  if ((opts == null ? void 0 : opts.defaultNamespace) !== void 0) {\n    if ((opts == null ? void 0 : opts.defaultNamespace) === namespace) {\n      namespace = void 0;\n    }\n  } else if (namespace === DEFAULT_NAMESPACE) {\n    namespace = void 0;\n  }\n  kind = kind.toLocaleLowerCase(\"en-US\");\n  kind = defaultKind && defaultKind.toLocaleLowerCase(\"en-US\") === kind ? void 0 : kind;\n  return `${kind ? `${kind}:` : \"\"}${namespace ? `${namespace}/` : \"\"}${name}`;\n}\n\nconst EntityRefLink = forwardRef(\n  (props, ref) => {\n    var _a;\n    const { entityRef, defaultKind, title, children, ...linkProps } = props;\n    const entityRoute = useRouteRef(entityRouteRef);\n    let kind;\n    let namespace;\n    let name;\n    if (typeof entityRef === \"string\") {\n      const parsed = parseEntityRef(entityRef);\n      kind = parsed.kind;\n      namespace = parsed.namespace;\n      name = parsed.name;\n    } else if (\"metadata\" in entityRef) {\n      kind = entityRef.kind;\n      namespace = entityRef.metadata.namespace;\n      name = entityRef.metadata.name;\n    } else {\n      kind = entityRef.kind;\n      namespace = entityRef.namespace;\n      name = entityRef.name;\n    }\n    kind = kind.toLocaleLowerCase(\"en-US\");\n    namespace = (_a = namespace == null ? void 0 : namespace.toLocaleLowerCase(\"en-US\")) != null ? _a : DEFAULT_NAMESPACE;\n    const routeParams = { kind, namespace, name };\n    const formattedEntityRefTitle = humanizeEntityRef(\n      { kind, namespace, name },\n      { defaultKind }\n    );\n    const link = /* @__PURE__ */ React.createElement(Link, {\n      ...linkProps,\n      ref,\n      to: entityRoute(routeParams)\n    }, children, !children && (title != null ? title : formattedEntityRefTitle));\n    return title ? /* @__PURE__ */ React.createElement(Tooltip, {\n      title: formattedEntityRefTitle\n    }, link) : link;\n  }\n);\n\nfunction FetchedEntityRefLinks(props) {\n  const { entityRefs, defaultKind, getTitle, ...linkProps } = props;\n  const catalogApi = useApi(catalogApiRef);\n  const {\n    value: entities = new Array(),\n    loading,\n    error\n  } = useAsync(async () => {\n    const refs = entityRefs.reduce((acc, current) => {\n      return \"metadata\" in current ? acc : [...acc, parseEntityRef(current)];\n    }, new Array());\n    const pureEntities = entityRefs.filter(\n      (ref) => \"metadata\" in ref\n    );\n    return refs.length > 0 ? [\n      ...(await catalogApi.getEntities({\n        filter: refs.map((ref) => ({\n          kind: ref.kind,\n          \"metadata.namespace\": ref.namespace,\n          \"metadata.name\": ref.name\n        }))\n      })).items,\n      ...pureEntities\n    ] : pureEntities;\n  }, [entityRefs]);\n  if (loading) {\n    return /* @__PURE__ */ React.createElement(Progress, null);\n  }\n  if (error) {\n    return /* @__PURE__ */ React.createElement(ErrorPanel, {\n      error\n    });\n  }\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, entities.map((r, i) => {\n    return /* @__PURE__ */ React.createElement(React.Fragment, {\n      key: i\n    }, i > 0 && \", \", /* @__PURE__ */ React.createElement(EntityRefLink, {\n      ...linkProps,\n      defaultKind,\n      entityRef: r,\n      title: getTitle(r)\n    }));\n  }));\n}\n\nfunction EntityRefLinks(props) {\n  const { entityRefs, defaultKind, fetchEntities, getTitle, ...linkProps } = props;\n  if (fetchEntities) {\n    return /* @__PURE__ */ React.createElement(FetchedEntityRefLinks, {\n      ...linkProps,\n      defaultKind,\n      entityRefs,\n      getTitle\n    });\n  }\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, entityRefs.map((r, i) => {\n    return /* @__PURE__ */ React.createElement(React.Fragment, {\n      key: i\n    }, i > 0 && \", \", /* @__PURE__ */ React.createElement(EntityRefLink, {\n      ...linkProps,\n      defaultKind,\n      entityRef: r,\n      title: getTitle ? getTitle(r) : void 0\n    }));\n  }));\n}\n\nfunction reduceCatalogFilters(filters) {\n  return filters.reduce((compoundFilter, filter) => {\n    return {\n      ...compoundFilter,\n      ...filter.getCatalogFilters ? filter.getCatalogFilters() : {}\n    };\n  }, {});\n}\nfunction reduceEntityFilters(filters) {\n  return (entity) => filters.every(\n    (filter) => !filter.filterEntity || filter.filterEntity(entity)\n  );\n}\n\nfunction getEntityRelations(entity, relationType, filter) {\n  var _a;\n  let entityNames = ((_a = entity == null ? void 0 : entity.relations) == null ? void 0 : _a.filter((r) => r.type === relationType).map((r) => parseEntityRef(r.targetRef))) || [];\n  if (filter == null ? void 0 : filter.kind) {\n    entityNames = entityNames.filter(\n      (e) => e.kind.toLocaleLowerCase(\"en-US\") === filter.kind.toLocaleLowerCase(\"en-US\")\n    );\n  }\n  return entityNames;\n}\n\nfunction getEntitySourceLocation(entity, scmIntegrationsApi) {\n  var _a;\n  const sourceLocation = (_a = entity.metadata.annotations) == null ? void 0 : _a[ANNOTATION_SOURCE_LOCATION];\n  if (!sourceLocation) {\n    return void 0;\n  }\n  try {\n    const sourceLocationRef = parseLocationRef(sourceLocation);\n    const integration = scmIntegrationsApi.byUrl(sourceLocationRef.target);\n    return {\n      locationTargetUrl: sourceLocationRef.target,\n      integrationType: integration == null ? void 0 : integration.type\n    };\n  } catch {\n    return void 0;\n  }\n}\n\nfunction isOwnerOf(owner, entity) {\n  const possibleOwners = new Set(\n    [\n      ...getEntityRelations(owner, RELATION_MEMBER_OF, { kind: \"group\" }),\n      ...owner ? [getCompoundEntityRef(owner)] : []\n    ].map(stringifyEntityRef)\n  );\n  const owners = getEntityRelations(entity, RELATION_OWNED_BY).map(\n    stringifyEntityRef\n  );\n  for (const ownerItem of owners) {\n    if (possibleOwners.has(ownerItem)) {\n      return true;\n    }\n  }\n  return false;\n}\n\nclass EntityKindFilter {\n  constructor(value) {\n    this.value = value;\n  }\n  getCatalogFilters() {\n    return { kind: this.value };\n  }\n  toQueryValue() {\n    return this.value;\n  }\n}\nclass EntityTypeFilter {\n  constructor(value) {\n    this.value = value;\n  }\n  getTypes() {\n    return Array.isArray(this.value) ? this.value : [this.value];\n  }\n  getCatalogFilters() {\n    return { \"spec.type\": this.getTypes() };\n  }\n  toQueryValue() {\n    return this.getTypes();\n  }\n}\nclass EntityTagFilter {\n  constructor(values) {\n    this.values = values;\n  }\n  filterEntity(entity) {\n    return this.values.every((v) => {\n      var _a;\n      return ((_a = entity.metadata.tags) != null ? _a : []).includes(v);\n    });\n  }\n  toQueryValue() {\n    return this.values;\n  }\n}\nclass EntityTextFilter {\n  constructor(value) {\n    this.value = value;\n  }\n  filterEntity(entity) {\n    const words = this.toUpperArray(this.value.split(/\\s/));\n    const exactMatch = this.toUpperArray([entity.metadata.tags]);\n    const partialMatch = this.toUpperArray([\n      entity.metadata.name,\n      entity.metadata.title\n    ]);\n    for (const word of words) {\n      if (exactMatch.every((m) => m !== word) && partialMatch.every((m) => !m.includes(word))) {\n        return false;\n      }\n    }\n    return true;\n  }\n  toUpperArray(value) {\n    return value.flat().filter((m) => Boolean(m)).map((m) => m.toLocaleUpperCase(\"en-US\"));\n  }\n}\nclass EntityOwnerFilter {\n  constructor(values) {\n    this.values = values;\n  }\n  filterEntity(entity) {\n    return this.values.some(\n      (v) => getEntityRelations(entity, RELATION_OWNED_BY).some(\n        (o) => humanizeEntityRef(o, { defaultKind: \"group\" }) === v\n      )\n    );\n  }\n  toQueryValue() {\n    return this.values;\n  }\n}\nclass EntityLifecycleFilter {\n  constructor(values) {\n    this.values = values;\n  }\n  filterEntity(entity) {\n    return this.values.some((v) => {\n      var _a;\n      return ((_a = entity.spec) == null ? void 0 : _a.lifecycle) === v;\n    });\n  }\n  toQueryValue() {\n    return this.values;\n  }\n}\nclass UserListFilter {\n  constructor(value, isOwnedEntity, isStarredEntity) {\n    this.value = value;\n    this.isOwnedEntity = isOwnedEntity;\n    this.isStarredEntity = isStarredEntity;\n  }\n  filterEntity(entity) {\n    switch (this.value) {\n      case \"owned\":\n        return this.isOwnedEntity(entity);\n      case \"starred\":\n        return this.isStarredEntity(entity);\n      default:\n        return true;\n    }\n  }\n  toQueryValue() {\n    return this.value;\n  }\n}\nclass EntityOrphanFilter {\n  constructor(value) {\n    this.value = value;\n  }\n  filterEntity(entity) {\n    var _a;\n    const orphan = (_a = entity.metadata.annotations) == null ? void 0 : _a[\"backstage.io/orphan\"];\n    return orphan !== void 0 && this.value.toString() === orphan;\n  }\n}\nclass EntityErrorFilter {\n  constructor(value) {\n    this.value = value;\n  }\n  filterEntity(entity) {\n    var _a, _b;\n    const error = ((_b = (_a = entity == null ? void 0 : entity.status) == null ? void 0 : _a.items) == null ? void 0 : _b.length) > 0;\n    return error !== void 0 && this.value === error;\n  }\n}\n\nconst NewEntityContext = createVersionedContext(\n  \"entity-context\"\n);\nconst AsyncEntityProvider = ({\n  children,\n  entity,\n  loading,\n  error,\n  refresh\n}) => {\n  const value = { entity, loading, error, refresh };\n  return /* @__PURE__ */ React.createElement(NewEntityContext.Provider, {\n    value: createVersionedValueMap({ 1: value })\n  }, children);\n};\nconst EntityProvider = (props) => /* @__PURE__ */ React.createElement(AsyncEntityProvider, {\n  entity: props.entity,\n  loading: !Boolean(props.entity),\n  error: void 0,\n  refresh: void 0,\n  children: props.children\n});\nfunction useEntity() {\n  const versionedHolder = useVersionedContext(\n    \"entity-context\"\n  );\n  if (!versionedHolder) {\n    throw new Error(\"Entity context is not available\");\n  }\n  const value = versionedHolder.atVersion(1);\n  if (!value) {\n    throw new Error(\"EntityContext v1 not available\");\n  }\n  if (!value.entity) {\n    throw new Error(\n      \"useEntity hook is being called outside of an EntityLayout where the entity has not been loaded. If this is intentional, please use useAsyncEntity instead.\"\n    );\n  }\n  return { entity: value.entity };\n}\nfunction useAsyncEntity() {\n  const versionedHolder = useVersionedContext(\n    \"entity-context\"\n  );\n  if (!versionedHolder) {\n    throw new Error(\"Entity context is not available\");\n  }\n  const value = versionedHolder.atVersion(1);\n  if (!value) {\n    throw new Error(\"EntityContext v1 not available\");\n  }\n  const { entity, loading, error, refresh } = value;\n  return { entity, loading, error, refresh };\n}\n\nconst EntityListContext = createContext(void 0);\nconst EntityListProvider = ({\n  children\n}) => {\n  const isMounted = useMountedState();\n  const catalogApi = useApi(catalogApiRef);\n  const [requestedFilters, setRequestedFilters] = useState(\n    {}\n  );\n  const location = useLocation();\n  const queryParameters = useMemo(\n    () => {\n      var _a;\n      return (_a = qs.parse(location.search, {\n        ignoreQueryPrefix: true\n      }).filters) != null ? _a : {};\n    },\n    [location]\n  );\n  const [outputState, setOutputState] = useState(\n    () => {\n      return {\n        appliedFilters: {},\n        entities: [],\n        backendEntities: []\n      };\n    }\n  );\n  const [{ loading, error }, refresh] = useAsyncFn(\n    async () => {\n      var _a;\n      const compacted = compact(Object.values(requestedFilters));\n      const entityFilter = reduceEntityFilters(compacted);\n      const backendFilter = reduceCatalogFilters(compacted);\n      const previousBackendFilter = reduceCatalogFilters(\n        compact(Object.values(outputState.appliedFilters))\n      );\n      const queryParams = Object.keys(requestedFilters).reduce(\n        (params, key) => {\n          const filter = requestedFilters[key];\n          if (filter == null ? void 0 : filter.toQueryValue) {\n            params[key] = filter.toQueryValue();\n          }\n          return params;\n        },\n        {}\n      );\n      if (!isEqual(previousBackendFilter, backendFilter)) {\n        const response = await catalogApi.getEntities({\n          filter: backendFilter\n        });\n        setOutputState({\n          appliedFilters: requestedFilters,\n          backendEntities: response.items,\n          entities: response.items.filter(entityFilter)\n        });\n      } else {\n        setOutputState({\n          appliedFilters: requestedFilters,\n          backendEntities: outputState.backendEntities,\n          entities: outputState.backendEntities.filter(entityFilter)\n        });\n      }\n      if (isMounted()) {\n        const oldParams = qs.parse(location.search, {\n          ignoreQueryPrefix: true\n        });\n        const newParams = qs.stringify(\n          { ...oldParams, filters: queryParams },\n          { addQueryPrefix: true, arrayFormat: \"repeat\" }\n        );\n        const newUrl = `${window.location.pathname}${newParams}`;\n        (_a = window.history) == null ? void 0 : _a.replaceState(null, document.title, newUrl);\n      }\n    },\n    [catalogApi, queryParameters, requestedFilters, outputState],\n    { loading: true }\n  );\n  useDebounce(refresh, 10, [requestedFilters]);\n  const updateFilters = useCallback(\n    (update) => {\n      setRequestedFilters((prevFilters) => {\n        const newFilters = typeof update === \"function\" ? update(prevFilters) : update;\n        return { ...prevFilters, ...newFilters };\n      });\n    },\n    []\n  );\n  const value = useMemo(\n    () => ({\n      filters: outputState.appliedFilters,\n      entities: outputState.entities,\n      backendEntities: outputState.backendEntities,\n      updateFilters,\n      queryParameters,\n      loading,\n      error\n    }),\n    [outputState, updateFilters, queryParameters, loading, error]\n  );\n  return /* @__PURE__ */ React.createElement(EntityListContext.Provider, {\n    value\n  }, children);\n};\nfunction useEntityList() {\n  const context = useContext(EntityListContext);\n  if (!context)\n    throw new Error(\"useEntityList must be used within EntityListProvider\");\n  return context;\n}\n\nfunction useEntityTypeFilter() {\n  var _a;\n  const catalogApi = useApi(catalogApiRef);\n  const {\n    filters: { kind: kindFilter, type: typeFilter },\n    queryParameters: { type: typeParameter },\n    updateFilters\n  } = useEntityList();\n  const flattenedQueryTypes = useMemo(\n    () => [typeParameter].flat().filter(Boolean),\n    [typeParameter]\n  );\n  const [selectedTypes, setSelectedTypes] = useState(\n    flattenedQueryTypes.length ? flattenedQueryTypes : (_a = typeFilter == null ? void 0 : typeFilter.getTypes()) != null ? _a : []\n  );\n  useEffect(() => {\n    if (flattenedQueryTypes.length) {\n      setSelectedTypes(flattenedQueryTypes);\n    }\n  }, [flattenedQueryTypes]);\n  const [availableTypes, setAvailableTypes] = useState([]);\n  const kind = useMemo(() => kindFilter == null ? void 0 : kindFilter.value, [kindFilter]);\n  const {\n    error,\n    loading,\n    value: facets\n  } = useAsync(async () => {\n    if (kind) {\n      const items = await catalogApi.getEntityFacets({\n        filter: { kind },\n        facets: [\"spec.type\"]\n      }).then((response) => response.facets[\"spec.type\"] || []);\n      return items;\n    }\n    return [];\n  }, [kind, catalogApi]);\n  const facetsRef = useRef(facets);\n  useEffect(() => {\n    const oldFacets = facetsRef.current;\n    facetsRef.current = facets;\n    if (loading || !kind || oldFacets === facets || !facets) {\n      return;\n    }\n    const newTypes = [\n      ...new Set(\n        sortBy(facets, (f) => -f.count).map(\n          (f) => f.value.toLocaleLowerCase(\"en-US\")\n        )\n      )\n    ];\n    setAvailableTypes(newTypes);\n    const stillValidTypes = selectedTypes.filter(\n      (value) => newTypes.includes(value)\n    );\n    if (!isEqual$1(selectedTypes, stillValidTypes)) {\n      setSelectedTypes(stillValidTypes);\n    }\n  }, [loading, kind, selectedTypes, setSelectedTypes, facets]);\n  useEffect(() => {\n    updateFilters({\n      type: selectedTypes.length ? new EntityTypeFilter(selectedTypes) : void 0\n    });\n  }, [selectedTypes, updateFilters]);\n  return {\n    loading,\n    error,\n    availableTypes,\n    selectedTypes,\n    setSelectedTypes\n  };\n}\n\nconst BATCH_SIZE = 20;\nfunction useRelatedEntities(entity, relationFilter) {\n  var _a, _b;\n  const filterByTypeLower = (_a = relationFilter == null ? void 0 : relationFilter.type) == null ? void 0 : _a.toLocaleLowerCase(\"en-US\");\n  const filterByKindLower = (_b = relationFilter == null ? void 0 : relationFilter.kind) == null ? void 0 : _b.toLocaleLowerCase(\"en-US\");\n  const catalogApi = useApi(catalogApiRef);\n  const {\n    loading,\n    value: entities,\n    error\n  } = useAsync(async () => {\n    var _a2;\n    const relations = (_a2 = entity.relations) == null ? void 0 : _a2.map((r) => ({ type: r.type, target: parseEntityRef(r.targetRef) })).filter(\n      (r) => (!filterByTypeLower || r.type.toLocaleLowerCase(\"en-US\") === filterByTypeLower) && (!filterByKindLower || r.target.kind === filterByKindLower)\n    );\n    if (!relations) {\n      return [];\n    }\n    const relationsByKindAndNamespace = Object.values(\n      groupBy(relations, ({ target }) => {\n        return `${target.kind}:${target.namespace}`.toLocaleLowerCase(\"en-US\");\n      })\n    );\n    const batchedRelationsByKindAndNamespace = [];\n    for (const rs of relationsByKindAndNamespace) {\n      batchedRelationsByKindAndNamespace.push({\n        kind: rs[0].target.kind,\n        namespace: rs[0].target.namespace,\n        nameBatches: chunk(\n          rs.map((r) => r.target.name),\n          BATCH_SIZE\n        )\n      });\n    }\n    const results = await Promise.all(\n      batchedRelationsByKindAndNamespace.flatMap((rs) => {\n        return rs.nameBatches.map((names) => {\n          return catalogApi.getEntities({\n            filter: {\n              kind: rs.kind,\n              \"metadata.namespace\": rs.namespace,\n              \"metadata.name\": names\n            }\n          });\n        });\n      })\n    );\n    return results.flatMap((r) => r.items);\n  }, [entity, filterByTypeLower, filterByKindLower]);\n  return {\n    entities,\n    loading,\n    error\n  };\n}\n\nfunction getEntityRef$1(entityOrRef) {\n  return typeof entityOrRef === \"string\" ? entityOrRef : stringifyEntityRef(entityOrRef);\n}\nfunction useStarredEntities() {\n  const starredEntitiesApi = useApi(starredEntitiesApiRef);\n  const starredEntities = useObservable(\n    starredEntitiesApi.starredEntitie$(),\n    /* @__PURE__ */ new Set()\n  );\n  const isStarredEntity = useCallback(\n    (entityOrRef) => starredEntities.has(getEntityRef$1(entityOrRef)),\n    [starredEntities]\n  );\n  const toggleStarredEntity = useCallback(\n    (entityOrRef) => starredEntitiesApi.toggleStarred(getEntityRef$1(entityOrRef)).then(),\n    [starredEntitiesApi]\n  );\n  return {\n    starredEntities,\n    toggleStarredEntity,\n    isStarredEntity\n  };\n}\n\nfunction getEntityRef(entityOrRef) {\n  return typeof entityOrRef === \"string\" ? entityOrRef : stringifyEntityRef(entityOrRef);\n}\nfunction useStarredEntity(entityOrRef) {\n  const starredEntitiesApi = useApi(starredEntitiesApiRef);\n  const [isStarredEntity, setIsStarredEntity] = useState(false);\n  useEffect(() => {\n    const subscription = starredEntitiesApi.starredEntitie$().subscribe({\n      next(starredEntities) {\n        setIsStarredEntity(starredEntities.has(getEntityRef(entityOrRef)));\n      }\n    });\n    return () => {\n      subscription.unsubscribe();\n    };\n  }, [entityOrRef, starredEntitiesApi]);\n  const toggleStarredEntity = useCallback(\n    () => starredEntitiesApi.toggleStarred(getEntityRef(entityOrRef)).then(),\n    [entityOrRef, starredEntitiesApi]\n  );\n  return {\n    toggleStarredEntity,\n    isStarredEntity\n  };\n}\n\nfunction useEntityOwnership() {\n  const identityApi = useApi(identityApiRef);\n  const { loading, value: refs } = useAsync(async () => {\n    const { ownershipEntityRefs } = await identityApi.getBackstageIdentity();\n    return ownershipEntityRefs;\n  }, []);\n  const isOwnedEntity = useMemo(() => {\n    const myOwnerRefs = new Set(refs != null ? refs : []);\n    return (entity) => {\n      const entityOwnerRefs = getEntityRelations(entity, RELATION_OWNED_BY).map(\n        stringifyEntityRef\n      );\n      for (const ref of entityOwnerRefs) {\n        if (myOwnerRefs.has(ref)) {\n          return true;\n        }\n      }\n      return false;\n    };\n  }, [refs]);\n  return useMemo(() => ({ loading, isOwnedEntity }), [loading, isOwnedEntity]);\n}\n\nfunction useEntityPermission(permission) {\n  const {\n    entity,\n    loading: loadingEntity,\n    error: entityError\n  } = useAsyncEntity();\n  const {\n    allowed,\n    loading: loadingPermission,\n    error: permissionError\n  } = usePermission({\n    permission,\n    resourceRef: entity ? stringifyEntityRef(entity) : void 0\n  });\n  if (loadingEntity || loadingPermission) {\n    return { loading: true, allowed: false };\n  }\n  if (entityError) {\n    return { loading: false, allowed: false, error: entityError };\n  }\n  return { loading: false, allowed, error: permissionError };\n}\n\nfunction useAvailableKinds() {\n  const catalogApi = useApi(catalogApiRef);\n  const [availableKinds, setAvailableKinds] = useState([]);\n  const {\n    error,\n    loading,\n    value: facets\n  } = useAsync(async () => {\n    const facet = \"kind\";\n    const items = await catalogApi.getEntityFacets({\n      facets: [facet]\n    }).then((response) => response.facets[facet] || []);\n    return items;\n  }, [catalogApi]);\n  const facetsRef = useRef(facets);\n  useEffect(() => {\n    const oldFacets = facetsRef.current;\n    facetsRef.current = facets;\n    if (loading || oldFacets === facets || !facets) {\n      return;\n    }\n    const newKinds = [\n      ...new Set(\n        sortBy(facets, (f) => f.value).map(\n          (f) => f.value.toLocaleLowerCase(\"en-US\")\n        )\n      )\n    ];\n    setAvailableKinds(newKinds);\n  }, [loading, facets, setAvailableKinds]);\n  return { loading, error, availableKinds };\n}\nfunction useEntityKindFilter(opts) {\n  var _a, _b;\n  const {\n    filters,\n    queryParameters: { kind: kindParameter },\n    updateFilters\n  } = useEntityList();\n  const flattenedQueryKind = useMemo(\n    () => [kindParameter].flat()[0],\n    [kindParameter]\n  );\n  const [selectedKind, setSelectedKind] = useState(\n    (_b = flattenedQueryKind != null ? flattenedQueryKind : (_a = filters.kind) == null ? void 0 : _a.value) != null ? _b : opts.initialFilter\n  );\n  useEffect(() => {\n    if (flattenedQueryKind) {\n      setSelectedKind(flattenedQueryKind);\n    }\n  }, [flattenedQueryKind]);\n  useEffect(() => {\n    var _a2, _b2;\n    if ((_a2 = filters.kind) == null ? void 0 : _a2.value) {\n      setSelectedKind((_b2 = filters.kind) == null ? void 0 : _b2.value);\n    }\n  }, [filters.kind]);\n  const { availableKinds, loading, error } = useAvailableKinds();\n  useEffect(() => {\n    updateFilters({\n      kind: selectedKind ? new EntityKindFilter(selectedKind) : void 0\n    });\n  }, [selectedKind, updateFilters]);\n  return {\n    loading,\n    error,\n    availableKinds,\n    selectedKind,\n    setSelectedKind\n  };\n}\nconst EntityKindPicker = (props) => {\n  const { hidden, initialFilter = \"component\" } = props;\n  const alertApi = useApi(alertApiRef);\n  const { error, availableKinds, selectedKind, setSelectedKind } = useEntityKindFilter({\n    initialFilter\n  });\n  useEffect(() => {\n    if (error) {\n      alertApi.post({\n        message: `Failed to load entity kinds`,\n        severity: \"error\"\n      });\n    }\n  }, [error, alertApi]);\n  if ((availableKinds == null ? void 0 : availableKinds.length) === 0 || error)\n    return null;\n  const items = [\n    ...availableKinds.map((kind) => ({\n      value: kind,\n      label: capitalize(kind)\n    }))\n  ];\n  return hidden ? null : /* @__PURE__ */ React.createElement(Box, {\n    pb: 1,\n    pt: 1\n  }, /* @__PURE__ */ React.createElement(Select, {\n    label: \"Kind\",\n    items,\n    selected: selectedKind,\n    onChange: (value) => setSelectedKind(String(value))\n  }));\n};\n\nconst useStyles$c = makeStyles(\n  {\n    input: {}\n  },\n  {\n    name: \"CatalogReactEntityLifecyclePicker\"\n  }\n);\nconst icon$3 = /* @__PURE__ */ React.createElement(CheckBoxOutlineBlankIcon, {\n  fontSize: \"small\"\n});\nconst checkedIcon$3 = /* @__PURE__ */ React.createElement(CheckBoxIcon, {\n  fontSize: \"small\"\n});\nconst EntityLifecyclePicker = () => {\n  var _a, _b;\n  const classes = useStyles$c();\n  const {\n    updateFilters,\n    backendEntities,\n    filters,\n    queryParameters: { lifecycles: lifecyclesParameter }\n  } = useEntityList();\n  const queryParamLifecycles = useMemo(\n    () => [lifecyclesParameter].flat().filter(Boolean),\n    [lifecyclesParameter]\n  );\n  const [selectedLifecycles, setSelectedLifecycles] = useState(\n    queryParamLifecycles.length ? queryParamLifecycles : (_b = (_a = filters.lifecycles) == null ? void 0 : _a.values) != null ? _b : []\n  );\n  useEffect(() => {\n    if (queryParamLifecycles.length) {\n      setSelectedLifecycles(queryParamLifecycles);\n    }\n  }, [queryParamLifecycles]);\n  useEffect(() => {\n    updateFilters({\n      lifecycles: selectedLifecycles.length ? new EntityLifecycleFilter(selectedLifecycles) : void 0\n    });\n  }, [selectedLifecycles, updateFilters]);\n  const availableLifecycles = useMemo(\n    () => [\n      ...new Set(\n        backendEntities.map((e) => {\n          var _a2;\n          return (_a2 = e.spec) == null ? void 0 : _a2.lifecycle;\n        }).filter(Boolean)\n      )\n    ].sort(),\n    [backendEntities]\n  );\n  if (!availableLifecycles.length)\n    return null;\n  return /* @__PURE__ */ React.createElement(Box, {\n    pb: 1,\n    pt: 1\n  }, /* @__PURE__ */ React.createElement(Typography, {\n    variant: \"button\",\n    component: \"label\"\n  }, \"Lifecycle\", /* @__PURE__ */ React.createElement(Autocomplete, {\n    multiple: true,\n    options: availableLifecycles,\n    value: selectedLifecycles,\n    onChange: (_, value) => setSelectedLifecycles(value),\n    renderOption: (option, { selected }) => /* @__PURE__ */ React.createElement(FormControlLabel, {\n      control: /* @__PURE__ */ React.createElement(Checkbox, {\n        icon: icon$3,\n        checkedIcon: checkedIcon$3,\n        checked: selected\n      }),\n      label: option\n    }),\n    size: \"small\",\n    popupIcon: /* @__PURE__ */ React.createElement(ExpandMoreIcon, {\n      \"data-testid\": \"lifecycle-picker-expand\"\n    }),\n    renderInput: (params) => /* @__PURE__ */ React.createElement(TextField, {\n      ...params,\n      className: classes.input,\n      variant: \"outlined\"\n    })\n  })));\n};\n\nconst useStyles$b = makeStyles(\n  {\n    input: {}\n  },\n  {\n    name: \"CatalogReactEntityOwnerPicker\"\n  }\n);\nconst icon$2 = /* @__PURE__ */ React.createElement(CheckBoxOutlineBlankIcon, {\n  fontSize: \"small\"\n});\nconst checkedIcon$2 = /* @__PURE__ */ React.createElement(CheckBoxIcon, {\n  fontSize: \"small\"\n});\nconst EntityOwnerPicker = () => {\n  var _a, _b;\n  const classes = useStyles$b();\n  const {\n    updateFilters,\n    backendEntities,\n    filters,\n    queryParameters: { owners: ownersParameter }\n  } = useEntityList();\n  const queryParamOwners = useMemo(\n    () => [ownersParameter].flat().filter(Boolean),\n    [ownersParameter]\n  );\n  const [selectedOwners, setSelectedOwners] = useState(\n    queryParamOwners.length ? queryParamOwners : (_b = (_a = filters.owners) == null ? void 0 : _a.values) != null ? _b : []\n  );\n  useEffect(() => {\n    if (queryParamOwners.length) {\n      setSelectedOwners(queryParamOwners);\n    }\n  }, [queryParamOwners]);\n  useEffect(() => {\n    updateFilters({\n      owners: selectedOwners.length ? new EntityOwnerFilter(selectedOwners) : void 0\n    });\n  }, [selectedOwners, updateFilters]);\n  const availableOwners = useMemo(\n    () => [\n      ...new Set(\n        backendEntities.flatMap(\n          (e) => getEntityRelations(e, RELATION_OWNED_BY).map(\n            (o) => humanizeEntityRef(o, { defaultKind: \"group\" })\n          )\n        ).filter(Boolean)\n      )\n    ].sort(),\n    [backendEntities]\n  );\n  if (!availableOwners.length)\n    return null;\n  return /* @__PURE__ */ React.createElement(Box, {\n    pb: 1,\n    pt: 1\n  }, /* @__PURE__ */ React.createElement(Typography, {\n    variant: \"button\",\n    component: \"label\"\n  }, \"Owner\", /* @__PURE__ */ React.createElement(Autocomplete, {\n    multiple: true,\n    options: availableOwners,\n    value: selectedOwners,\n    onChange: (_, value) => setSelectedOwners(value),\n    renderOption: (option, { selected }) => /* @__PURE__ */ React.createElement(FormControlLabel, {\n      control: /* @__PURE__ */ React.createElement(Checkbox, {\n        icon: icon$2,\n        checkedIcon: checkedIcon$2,\n        checked: selected\n      }),\n      label: option\n    }),\n    size: \"small\",\n    popupIcon: /* @__PURE__ */ React.createElement(ExpandMoreIcon, {\n      \"data-testid\": \"owner-picker-expand\"\n    }),\n    renderInput: (params) => /* @__PURE__ */ React.createElement(TextField, {\n      ...params,\n      className: classes.input,\n      variant: \"outlined\"\n    })\n  })));\n};\n\nconst useStyles$a = makeStyles(\n  (_theme) => ({\n    searchToolbar: {\n      paddingLeft: 0,\n      paddingRight: 0\n    },\n    input: {}\n  }),\n  {\n    name: \"CatalogReactEntitySearchBar\"\n  }\n);\nconst EntitySearchBar = () => {\n  var _a, _b;\n  const classes = useStyles$a();\n  const { filters, updateFilters } = useEntityList();\n  const [search, setSearch] = useState((_b = (_a = filters.text) == null ? void 0 : _a.value) != null ? _b : \"\");\n  useDebounce(\n    () => {\n      updateFilters({\n        text: search.length ? new EntityTextFilter(search) : void 0\n      });\n    },\n    250,\n    [search, updateFilters]\n  );\n  return /* @__PURE__ */ React.createElement(Toolbar, {\n    className: classes.searchToolbar\n  }, /* @__PURE__ */ React.createElement(FormControl, null, /* @__PURE__ */ React.createElement(Input, {\n    \"aria-label\": \"search\",\n    id: \"input-with-icon-adornment\",\n    className: classes.input,\n    placeholder: \"Search\",\n    autoComplete: \"off\",\n    onChange: (event) => setSearch(event.target.value),\n    value: search,\n    startAdornment: /* @__PURE__ */ React.createElement(InputAdornment, {\n      position: \"start\"\n    }, /* @__PURE__ */ React.createElement(Search, null)),\n    endAdornment: /* @__PURE__ */ React.createElement(InputAdornment, {\n      position: \"end\"\n    }, /* @__PURE__ */ React.createElement(IconButton, {\n      \"aria-label\": \"clear search\",\n      onClick: () => setSearch(\"\"),\n      edge: \"end\",\n      disabled: search.length === 0\n    }, /* @__PURE__ */ React.createElement(Clear, null)))\n  })));\n};\n\nconst columnFactories = Object.freeze({\n  createEntityRefColumn(options) {\n    const { defaultKind } = options;\n    function formatContent(entity) {\n      var _a;\n      return ((_a = entity.metadata) == null ? void 0 : _a.title) || humanizeEntityRef(entity, {\n        defaultKind\n      });\n    }\n    return {\n      title: \"Name\",\n      highlight: true,\n      customFilterAndSearch(filter, entity) {\n        return formatContent(entity).includes(filter);\n      },\n      customSort(entity1, entity2) {\n        return formatContent(entity1).localeCompare(formatContent(entity2));\n      },\n      render: (entity) => {\n        var _a;\n        return /* @__PURE__ */ React.createElement(EntityRefLink, {\n          entityRef: entity,\n          defaultKind,\n          title: (_a = entity.metadata) == null ? void 0 : _a.title\n        });\n      }\n    };\n  },\n  createEntityRelationColumn(options) {\n    const { title, relation, defaultKind, filter: entityFilter } = options;\n    function getRelations(entity) {\n      return getEntityRelations(entity, relation, entityFilter);\n    }\n    function formatContent(entity) {\n      return getRelations(entity).map((r) => humanizeEntityRef(r, { defaultKind })).join(\", \");\n    }\n    return {\n      title,\n      customFilterAndSearch(filter, entity) {\n        return formatContent(entity).includes(filter);\n      },\n      customSort(entity1, entity2) {\n        return formatContent(entity1).localeCompare(formatContent(entity2));\n      },\n      render: (entity) => {\n        return /* @__PURE__ */ React.createElement(EntityRefLinks, {\n          entityRefs: getRelations(entity),\n          defaultKind\n        });\n      }\n    };\n  },\n  createOwnerColumn() {\n    return this.createEntityRelationColumn({\n      title: \"Owner\",\n      relation: RELATION_OWNED_BY,\n      defaultKind: \"group\"\n    });\n  },\n  createDomainColumn() {\n    return this.createEntityRelationColumn({\n      title: \"Domain\",\n      relation: RELATION_PART_OF,\n      defaultKind: \"domain\",\n      filter: {\n        kind: \"domain\"\n      }\n    });\n  },\n  createSystemColumn() {\n    return this.createEntityRelationColumn({\n      title: \"System\",\n      relation: RELATION_PART_OF,\n      defaultKind: \"system\",\n      filter: {\n        kind: \"system\"\n      }\n    });\n  },\n  createMetadataDescriptionColumn() {\n    return {\n      title: \"Description\",\n      field: \"metadata.description\",\n      render: (entity) => /* @__PURE__ */ React.createElement(OverflowTooltip, {\n        text: entity.metadata.description,\n        placement: \"bottom-start\",\n        line: 2\n      })\n    };\n  },\n  createSpecLifecycleColumn() {\n    return {\n      title: \"Lifecycle\",\n      field: \"spec.lifecycle\"\n    };\n  },\n  createSpecTypeColumn() {\n    return {\n      title: \"Type\",\n      field: \"spec.type\"\n    };\n  }\n});\n\nconst systemEntityColumns = [\n  columnFactories.createEntityRefColumn({ defaultKind: \"system\" }),\n  columnFactories.createDomainColumn(),\n  columnFactories.createOwnerColumn(),\n  columnFactories.createMetadataDescriptionColumn()\n];\nconst componentEntityColumns = [\n  columnFactories.createEntityRefColumn({ defaultKind: \"component\" }),\n  columnFactories.createSystemColumn(),\n  columnFactories.createOwnerColumn(),\n  columnFactories.createSpecTypeColumn(),\n  columnFactories.createSpecLifecycleColumn(),\n  columnFactories.createMetadataDescriptionColumn()\n];\n\nconst useStyles$9 = makeStyles((theme) => ({\n  empty: {\n    padding: theme.spacing(2),\n    display: \"flex\",\n    justifyContent: \"center\"\n  }\n}));\nconst EntityTable = (props) => {\n  const {\n    entities,\n    title,\n    emptyContent,\n    variant = \"gridItem\",\n    columns\n  } = props;\n  const classes = useStyles$9();\n  const tableStyle = {\n    minWidth: \"0\",\n    width: \"100%\"\n  };\n  if (variant === \"gridItem\") {\n    tableStyle.height = \"calc(100% - 10px)\";\n  }\n  return /* @__PURE__ */ React.createElement(Table, {\n    columns,\n    title,\n    style: tableStyle,\n    emptyContent: emptyContent && /* @__PURE__ */ React.createElement(\"div\", {\n      className: classes.empty\n    }, emptyContent),\n    options: {\n      search: false,\n      paging: false,\n      actionsColumnIndex: -1,\n      padding: \"dense\",\n      draggable: false\n    },\n    data: entities\n  });\n};\nEntityTable.columns = columnFactories;\nEntityTable.systemEntityColumns = systemEntityColumns;\nEntityTable.componentEntityColumns = componentEntityColumns;\n\nconst useStyles$8 = makeStyles(\n  {\n    input: {}\n  },\n  {\n    name: \"CatalogReactEntityTagPicker\"\n  }\n);\nconst icon$1 = /* @__PURE__ */ React.createElement(CheckBoxOutlineBlankIcon, {\n  fontSize: \"small\"\n});\nconst checkedIcon$1 = /* @__PURE__ */ React.createElement(CheckBoxIcon, {\n  fontSize: \"small\"\n});\nconst EntityTagPicker = (props) => {\n  var _a, _b;\n  const classes = useStyles$8();\n  const {\n    updateFilters,\n    filters,\n    queryParameters: { tags: tagsParameter }\n  } = useEntityList();\n  const catalogApi = useApi(catalogApiRef);\n  const { value: availableTags } = useAsync(async () => {\n    var _a2;\n    const facet = \"metadata.tags\";\n    const { facets } = await catalogApi.getEntityFacets({\n      facets: [facet],\n      filter: (_a2 = filters.kind) == null ? void 0 : _a2.getCatalogFilters()\n    });\n    return Object.fromEntries(\n      facets[facet].map(({ value, count }) => [value, count])\n    );\n  }, [filters.kind]);\n  const queryParamTags = useMemo(\n    () => [tagsParameter].flat().filter(Boolean),\n    [tagsParameter]\n  );\n  const [selectedTags, setSelectedTags] = useState(\n    queryParamTags.length ? queryParamTags : (_b = (_a = filters.tags) == null ? void 0 : _a.values) != null ? _b : []\n  );\n  useEffect(() => {\n    if (queryParamTags.length) {\n      setSelectedTags(queryParamTags);\n    }\n  }, [queryParamTags]);\n  useEffect(() => {\n    updateFilters({\n      tags: selectedTags.length ? new EntityTagFilter(selectedTags) : void 0\n    });\n  }, [selectedTags, updateFilters]);\n  if (!Object.keys(availableTags != null ? availableTags : {}).length)\n    return null;\n  return /* @__PURE__ */ React.createElement(Box, {\n    pb: 1,\n    pt: 1\n  }, /* @__PURE__ */ React.createElement(Typography, {\n    variant: \"button\",\n    component: \"label\"\n  }, \"Tags\", /* @__PURE__ */ React.createElement(Autocomplete, {\n    multiple: true,\n    options: Object.keys(availableTags != null ? availableTags : {}),\n    value: selectedTags,\n    onChange: (_, value) => setSelectedTags(value),\n    renderOption: (option, { selected }) => /* @__PURE__ */ React.createElement(FormControlLabel, {\n      control: /* @__PURE__ */ React.createElement(Checkbox, {\n        icon: icon$1,\n        checkedIcon: checkedIcon$1,\n        checked: selected\n      }),\n      label: props.showCounts ? `${option} (${availableTags == null ? void 0 : availableTags[option]})` : option\n    }),\n    size: \"small\",\n    popupIcon: /* @__PURE__ */ React.createElement(ExpandMoreIcon, {\n      \"data-testid\": \"tag-picker-expand\"\n    }),\n    renderInput: (params) => /* @__PURE__ */ React.createElement(TextField, {\n      ...params,\n      className: classes.input,\n      variant: \"outlined\"\n    })\n  })));\n};\n\nconst EntityTypePicker = (props) => {\n  var _a;\n  const { hidden, initialFilter } = props;\n  const alertApi = useApi(alertApiRef);\n  const { error, availableTypes, selectedTypes, setSelectedTypes } = useEntityTypeFilter();\n  useEffect(() => {\n    if (error) {\n      alertApi.post({\n        message: `Failed to load entity types`,\n        severity: \"error\"\n      });\n    }\n    if (initialFilter) {\n      setSelectedTypes([initialFilter]);\n    }\n  }, [error, alertApi, initialFilter, setSelectedTypes]);\n  if (availableTypes.length === 0 || error)\n    return null;\n  const items = [\n    { value: \"all\", label: \"All\" },\n    ...availableTypes.map((type) => ({\n      value: type,\n      label: capitalize(type)\n    }))\n  ];\n  return hidden ? null : /* @__PURE__ */ React.createElement(Box, {\n    pb: 1,\n    pt: 1\n  }, /* @__PURE__ */ React.createElement(Select, {\n    label: \"Type\",\n    items,\n    selected: (_a = items.length > 1 ? selectedTypes[0] : void 0) != null ? _a : \"all\",\n    onChange: (value) => setSelectedTypes(value === \"all\" ? [] : [String(value)])\n  }));\n};\n\nconst YellowStar = withStyles({\n  root: {\n    color: \"#f3ba37\"\n  }\n})(Star);\nconst FavoriteEntity = (props) => {\n  const { toggleStarredEntity, isStarredEntity } = useStarredEntity(\n    props.entity\n  );\n  return /* @__PURE__ */ React.createElement(IconButton, {\n    \"aria-label\": \"favorite\",\n    color: \"inherit\",\n    ...props,\n    onClick: () => toggleStarredEntity()\n  }, /* @__PURE__ */ React.createElement(Tooltip, {\n    title: isStarredEntity ? \"Remove from favorites\" : \"Add to favorites\"\n  }, isStarredEntity ? /* @__PURE__ */ React.createElement(YellowStar, null) : /* @__PURE__ */ React.createElement(StarBorder, null)));\n};\n\nconst DEFAULT_ICON = WorkIcon;\nfunction getKind(kind, entityRef) {\n  if (kind) {\n    return kind.toLocaleLowerCase(\"en-US\");\n  }\n  if (entityRef) {\n    try {\n      return parseEntityRef(entityRef).kind.toLocaleLowerCase(\"en-US\");\n    } catch {\n      return void 0;\n    }\n  }\n  return void 0;\n}\nfunction useIcon(kind, entityRef) {\n  const app = useApp();\n  const actualKind = getKind(kind, entityRef);\n  if (!actualKind) {\n    return DEFAULT_ICON;\n  }\n  const icon = app.getSystemIcon(`kind:${actualKind}`);\n  return icon || DEFAULT_ICON;\n}\nfunction EntityKindIcon(props) {\n  const { kind, entityRef, ...otherProps } = props;\n  const Icon = useIcon(kind, entityRef);\n  return /* @__PURE__ */ React.createElement(Icon, {\n    ...otherProps\n  });\n}\n\nconst useStyles$7 = makeStyles((theme) => ({\n  node: {\n    fill: theme.palette.grey[300],\n    stroke: theme.palette.grey[300],\n    \"&.primary\": {\n      fill: theme.palette.primary.light,\n      stroke: theme.palette.primary.light\n    },\n    \"&.secondary\": {\n      fill: theme.palette.secondary.light,\n      stroke: theme.palette.secondary.light\n    }\n  },\n  text: {\n    fill: theme.palette.getContrastText(theme.palette.grey[300]),\n    \"&.primary\": {\n      fill: theme.palette.primary.contrastText\n    },\n    \"&.secondary\": {\n      fill: theme.palette.secondary.contrastText\n    },\n    \"&.focused\": {\n      fontWeight: \"bold\"\n    }\n  },\n  clickable: {\n    cursor: \"pointer\"\n  }\n}));\nfunction useAncestry(root) {\n  const catalogClient = useApi(catalogApiRef);\n  const entityRef = stringifyEntityRef(root);\n  const { loading, error, value } = useAsync(async () => {\n    const response = await catalogClient.getEntityAncestors({ entityRef });\n    const nodes = new Array();\n    const edges = new Array();\n    for (const current of response.items) {\n      const currentRef = stringifyEntityRef(current.entity);\n      const isRootNode = currentRef === response.rootEntityRef;\n      nodes.push({ id: currentRef, root: isRootNode, ...current.entity });\n      for (const parentRef of current.parentEntityRefs) {\n        edges.push({ from: currentRef, to: parentRef });\n      }\n    }\n    return { nodes, edges };\n  }, [entityRef]);\n  return {\n    loading,\n    error,\n    nodes: (value == null ? void 0 : value.nodes) || [],\n    edges: (value == null ? void 0 : value.edges) || []\n  };\n}\nfunction CustomNode({ node }) {\n  const classes = useStyles$7();\n  const navigate = useNavigate();\n  const entityRoute = useRouteRef(entityRouteRef);\n  const [width, setWidth] = useState(0);\n  const [height, setHeight] = useState(0);\n  const idRef = useRef(null);\n  useLayoutEffect(() => {\n    if (idRef.current) {\n      let { height: renderedHeight, width: renderedWidth } = idRef.current.getBBox();\n      renderedHeight = Math.round(renderedHeight);\n      renderedWidth = Math.round(renderedWidth);\n      if (renderedHeight !== height || renderedWidth !== width) {\n        setWidth(renderedWidth);\n        setHeight(renderedHeight);\n      }\n    }\n  }, [width, height]);\n  const padding = 10;\n  const iconSize = height;\n  const paddedIconWidth = iconSize + padding;\n  const paddedWidth = paddedIconWidth + width + padding * 2;\n  const paddedHeight = height + padding * 2;\n  const displayTitle = node.metadata.title || (node.kind && node.metadata.name && node.metadata.namespace ? humanizeEntityRef({\n    kind: node.kind,\n    name: node.metadata.name,\n    namespace: node.metadata.namespace || \"\"\n  }) : node.id);\n  const onClick = () => {\n    navigate(\n      entityRoute({\n        kind: node.kind,\n        namespace: node.metadata.namespace || DEFAULT_NAMESPACE,\n        name: node.metadata.name\n      })\n    );\n  };\n  return /* @__PURE__ */ React.createElement(\"g\", {\n    onClick,\n    className: classes.clickable\n  }, /* @__PURE__ */ React.createElement(\"rect\", {\n    className: classNames(\n      classes.node,\n      node.root ? \"secondary\" : \"primary\"\n    ),\n    width: paddedWidth,\n    height: paddedHeight,\n    rx: 10\n  }), /* @__PURE__ */ React.createElement(EntityKindIcon, {\n    kind: node.kind,\n    y: padding,\n    x: padding,\n    width: iconSize,\n    height: iconSize,\n    className: classNames(\n      classes.text,\n      node.root ? \"secondary\" : \"primary\"\n    )\n  }), /* @__PURE__ */ React.createElement(\"text\", {\n    ref: idRef,\n    className: classNames(\n      classes.text,\n      node.root ? \"secondary\" : \"primary\"\n    ),\n    y: paddedHeight / 2,\n    x: paddedIconWidth + (width + padding * 2) / 2,\n    textAnchor: \"middle\",\n    alignmentBaseline: \"middle\"\n  }, displayTitle));\n}\nfunction AncestryPage(props) {\n  const { loading, error, nodes, edges } = useAncestry(props.entity);\n  if (loading) {\n    return /* @__PURE__ */ React.createElement(Progress, null);\n  } else if (error) {\n    return /* @__PURE__ */ React.createElement(ResponseErrorPanel, {\n      error\n    });\n  }\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(DialogContentText, {\n    variant: \"h2\"\n  }, \"Ancestry\"), /* @__PURE__ */ React.createElement(DialogContentText, {\n    gutterBottom: true\n  }, \"This is the ancestry of entities above the current one - as in, the chain(s) of entities down to the current one, where\", \" \", /* @__PURE__ */ React.createElement(Link, {\n    to: \"https://backstage.io/docs/features/software-catalog/life-of-an-entity\"\n  }, \"processors emitted\"), \" \", \"child entities that ultimately led to the current one existing. Note that this is a completely different mechanism from relations.\"), /* @__PURE__ */ React.createElement(Box, {\n    mt: 4\n  }, /* @__PURE__ */ React.createElement(DependencyGraph, {\n    nodes,\n    edges,\n    renderNode: CustomNode,\n    direction: DependencyGraphTypes.Direction.BOTTOM_TOP,\n    zoom: \"enable-on-click\"\n  })));\n}\n\nconst useStyles$6 = makeStyles((theme) => ({\n  root: {\n    display: \"flex\",\n    flexDirection: \"column\"\n  },\n  marginTop: {\n    marginTop: theme.spacing(2)\n  },\n  helpIcon: {\n    marginLeft: theme.spacing(1),\n    color: theme.palette.text.disabled\n  },\n  monospace: {\n    fontFamily: \"monospace\"\n  }\n}));\nfunction ListItemText(props) {\n  const classes = useStyles$6();\n  return /* @__PURE__ */ React.createElement(ListItemText$1, {\n    ...props,\n    primaryTypographyProps: { className: classes.monospace },\n    secondaryTypographyProps: { className: classes.monospace }\n  });\n}\nfunction ListSubheader(props) {\n  const classes = useStyles$6();\n  return /* @__PURE__ */ React.createElement(ListSubheader$1, {\n    className: classes.monospace\n  }, props.children);\n}\nfunction Container(props) {\n  return /* @__PURE__ */ React.createElement(Box, {\n    mt: 2\n  }, /* @__PURE__ */ React.createElement(Card, {\n    variant: \"outlined\"\n  }, /* @__PURE__ */ React.createElement(CardContent, null, /* @__PURE__ */ React.createElement(Typography, {\n    variant: \"h6\",\n    gutterBottom: true\n  }, props.title, props.helpLink && /* @__PURE__ */ React.createElement(HelpIcon, {\n    to: props.helpLink\n  })), props.children)));\n}\nfunction findLink(value) {\n  if (value.match(/^url:https?:\\/\\//)) {\n    return value.slice(\"url:\".length);\n  }\n  if (value.match(/^https?:\\/\\//)) {\n    return value;\n  }\n  return void 0;\n}\nfunction KeyValueListItem(props) {\n  const [key, value] = props.entry;\n  const link = findLink(value);\n  return /* @__PURE__ */ React.createElement(ListItem, null, props.indent && /* @__PURE__ */ React.createElement(ListItemIcon, null), /* @__PURE__ */ React.createElement(ListItemText, {\n    primary: key,\n    secondary: link ? /* @__PURE__ */ React.createElement(Link, {\n      to: link\n    }, value) : value\n  }));\n}\nfunction HelpIcon(props) {\n  const classes = useStyles$6();\n  return /* @__PURE__ */ React.createElement(Link, {\n    to: props.to,\n    className: classes.helpIcon\n  }, /* @__PURE__ */ React.createElement(HelpOutlineIcon, {\n    fontSize: \"inherit\"\n  }));\n}\n\nconst useStyles$5 = makeStyles({\n  root: {\n    display: \"flex\",\n    flexDirection: \"column\"\n  }\n});\nfunction useColocated(entity) {\n  var _a, _b;\n  const catalogApi = useApi(catalogApiRef);\n  const currentEntityRef = stringifyEntityRef(entity);\n  const location = (_a = entity.metadata.annotations) == null ? void 0 : _a[ANNOTATION_LOCATION];\n  const origin = (_b = entity.metadata.annotations) == null ? void 0 : _b[ANNOTATION_ORIGIN_LOCATION];\n  const { loading, error, value } = useAsync(async () => {\n    if (!location && !origin) {\n      return [];\n    }\n    const response = await catalogApi.getEntities({\n      filter: [\n        ...location ? [{ [`metadata.annotations.${ANNOTATION_LOCATION}`]: location }] : [],\n        ...origin ? [{ [`metadata.annotations.${ANNOTATION_ORIGIN_LOCATION}`]: origin }] : []\n      ]\n    });\n    return response.items;\n  }, [location, origin]);\n  return {\n    loading,\n    error,\n    location,\n    originLocation: origin,\n    colocatedEntities: value == null ? void 0 : value.filter(\n      (colocated) => stringifyEntityRef(colocated) !== currentEntityRef\n    )\n  };\n}\nfunction EntityList(props) {\n  return /* @__PURE__ */ React.createElement(List, {\n    dense: true\n  }, props.header && /* @__PURE__ */ React.createElement(KeyValueListItem, {\n    key: \"header\",\n    entry: props.header\n  }), props.entities.map((entity) => /* @__PURE__ */ React.createElement(ListItem, {\n    key: stringifyEntityRef(entity)\n  }, /* @__PURE__ */ React.createElement(ListItemIcon, null, /* @__PURE__ */ React.createElement(EntityKindIcon, {\n    kind: entity.kind\n  })), /* @__PURE__ */ React.createElement(ListItemText, {\n    primary: /* @__PURE__ */ React.createElement(EntityRefLink, {\n      entityRef: entity\n    })\n  }))));\n}\nfunction Contents$1(props) {\n  const { entity } = props;\n  const { loading, error, location, originLocation, colocatedEntities } = useColocated(entity);\n  if (loading) {\n    return /* @__PURE__ */ React.createElement(Progress, null);\n  } else if (error) {\n    return /* @__PURE__ */ React.createElement(ResponseErrorPanel, {\n      error\n    });\n  }\n  if (!location && !originLocation) {\n    return /* @__PURE__ */ React.createElement(Alert, {\n      severity: \"warning\"\n    }, \"Entity had no location information.\");\n  } else if (!(colocatedEntities == null ? void 0 : colocatedEntities.length)) {\n    return /* @__PURE__ */ React.createElement(Alert, {\n      severity: \"info\"\n    }, \"There were no other entities on this location.\");\n  }\n  if (location === originLocation) {\n    return /* @__PURE__ */ React.createElement(EntityList, {\n      entities: colocatedEntities\n    });\n  }\n  const atLocation = colocatedEntities.filter(\n    (e) => {\n      var _a;\n      return ((_a = e.metadata.annotations) == null ? void 0 : _a[ANNOTATION_LOCATION]) === location;\n    }\n  );\n  const atOrigin = colocatedEntities.filter(\n    (e) => {\n      var _a;\n      return ((_a = e.metadata.annotations) == null ? void 0 : _a[ANNOTATION_ORIGIN_LOCATION]) === originLocation;\n    }\n  );\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, atLocation.length > 0 && /* @__PURE__ */ React.createElement(EntityList, {\n    entities: atLocation,\n    header: [\"At the same location\", location]\n  }), atOrigin.length > 0 && /* @__PURE__ */ React.createElement(EntityList, {\n    entities: atOrigin,\n    header: [\"At the same origin\", originLocation]\n  }));\n}\nfunction ColocatedPage(props) {\n  const classes = useStyles$5();\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(DialogContentText, {\n    variant: \"h2\"\n  }, \"Colocated\"), /* @__PURE__ */ React.createElement(DialogContentText, null, \"These are the entities that are colocated with this entity - as in, they originated from the same data source (e.g. came from the same YAML file), or from the same origin (e.g. the originally registered URL).\"), /* @__PURE__ */ React.createElement(\"div\", {\n    className: classes.root\n  }, /* @__PURE__ */ React.createElement(Contents$1, {\n    entity: props.entity\n  })));\n}\n\nfunction sortKeys(data) {\n  return Object.fromEntries(\n    [...Object.entries(data)].sort((a, b) => a[0] < b[0] ? -1 : 1)\n  );\n}\n\nfunction JsonPage(props) {\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(DialogContentText, {\n    variant: \"h2\"\n  }, \"Entity as JSON\"), /* @__PURE__ */ React.createElement(DialogContentText, null, \"This is the raw entity data as received from the catalog, on JSON form.\"), /* @__PURE__ */ React.createElement(DialogContentText, null, /* @__PURE__ */ React.createElement(\"div\", {\n    style: { fontSize: \"75%\" },\n    \"data-testid\": \"code-snippet\"\n  }, /* @__PURE__ */ React.createElement(CodeSnippet, {\n    text: JSON.stringify(sortKeys(props.entity), void 0, 2),\n    language: \"json\",\n    showCopyCodeButton: true\n  }))));\n}\n\nconst useStyles$4 = makeStyles({\n  root: {\n    display: \"flex\",\n    flexDirection: \"column\"\n  }\n});\nfunction OverviewPage(props) {\n  var _a, _b;\n  const classes = useStyles$4();\n  const {\n    apiVersion,\n    kind,\n    metadata,\n    spec,\n    relations = [],\n    status = {}\n  } = props.entity;\n  const groupedRelations = groupBy$1(\n    sortBy(relations, (r) => r.targetRef),\n    \"type\"\n  );\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(DialogContentText, {\n    variant: \"h2\"\n  }, \"Overview\"), /* @__PURE__ */ React.createElement(\"div\", {\n    className: classes.root\n  }, /* @__PURE__ */ React.createElement(Container, {\n    title: \"Identity\"\n  }, /* @__PURE__ */ React.createElement(List, {\n    dense: true\n  }, /* @__PURE__ */ React.createElement(ListItem, null, /* @__PURE__ */ React.createElement(ListItemText, {\n    primary: \"apiVersion\",\n    secondary: apiVersion\n  })), /* @__PURE__ */ React.createElement(ListItem, null, /* @__PURE__ */ React.createElement(ListItemText, {\n    primary: \"kind\",\n    secondary: kind\n  })), (spec == null ? void 0 : spec.type) && /* @__PURE__ */ React.createElement(ListItem, null, /* @__PURE__ */ React.createElement(ListItemText, {\n    primary: \"spec.type\",\n    secondary: spec.type\n  })), metadata.uid && /* @__PURE__ */ React.createElement(ListItem, null, /* @__PURE__ */ React.createElement(ListItemText, {\n    primary: \"uid\",\n    secondary: metadata.uid\n  })), metadata.etag && /* @__PURE__ */ React.createElement(ListItem, null, /* @__PURE__ */ React.createElement(ListItemText, {\n    primary: \"etag\",\n    secondary: metadata.etag\n  })))), /* @__PURE__ */ React.createElement(Container, {\n    title: \"Metadata\"\n  }, !!Object.keys(metadata.annotations || {}).length && /* @__PURE__ */ React.createElement(List, {\n    dense: true,\n    subheader: /* @__PURE__ */ React.createElement(ListSubheader, null, \"Annotations\", /* @__PURE__ */ React.createElement(HelpIcon, {\n      to: \"https://backstage.io/docs/features/software-catalog/well-known-annotations\"\n    }))\n  }, Object.entries(metadata.annotations).map((entry) => /* @__PURE__ */ React.createElement(KeyValueListItem, {\n    key: entry[0],\n    indent: true,\n    entry\n  }))), !!Object.keys(metadata.labels || {}).length && /* @__PURE__ */ React.createElement(List, {\n    dense: true,\n    subheader: /* @__PURE__ */ React.createElement(ListSubheader, null, \"Labels\")\n  }, Object.entries(metadata.labels).map((entry) => /* @__PURE__ */ React.createElement(KeyValueListItem, {\n    key: entry[0],\n    indent: true,\n    entry\n  }))), !!((_a = metadata.tags) == null ? void 0 : _a.length) && /* @__PURE__ */ React.createElement(List, {\n    dense: true,\n    subheader: /* @__PURE__ */ React.createElement(ListSubheader, null, \"Tags\")\n  }, metadata.tags.map((tag, index) => /* @__PURE__ */ React.createElement(ListItem, {\n    key: `${tag}-${index}`\n  }, /* @__PURE__ */ React.createElement(ListItemIcon, null), /* @__PURE__ */ React.createElement(ListItemText, {\n    primary: tag\n  }))))), !!relations.length && /* @__PURE__ */ React.createElement(Container, {\n    title: \"Relations\",\n    helpLink: \"https://backstage.io/docs/features/software-catalog/well-known-relations\"\n  }, Object.entries(groupedRelations).map(\n    ([type, groupRelations], index) => /* @__PURE__ */ React.createElement(\"div\", {\n      key: index\n    }, /* @__PURE__ */ React.createElement(List, {\n      dense: true,\n      subheader: /* @__PURE__ */ React.createElement(ListSubheader, null, type)\n    }, groupRelations.map((group) => /* @__PURE__ */ React.createElement(ListItem, {\n      key: group.targetRef\n    }, /* @__PURE__ */ React.createElement(ListItemIcon, null, /* @__PURE__ */ React.createElement(EntityKindIcon, {\n      entityRef: group.targetRef\n    })), /* @__PURE__ */ React.createElement(ListItemText, {\n      primary: /* @__PURE__ */ React.createElement(EntityRefLink, {\n        entityRef: group.targetRef\n      })\n    })))))\n  )), !!((_b = status.items) == null ? void 0 : _b.length) && /* @__PURE__ */ React.createElement(Container, {\n    title: \"Status\",\n    helpLink: \"https://backstage.io/docs/features/software-catalog/well-known-statuses\"\n  }, status.items.map((item, index) => /* @__PURE__ */ React.createElement(\"div\", {\n    key: index\n  }, /* @__PURE__ */ React.createElement(Typography, null, item.level, \": \", item.type), /* @__PURE__ */ React.createElement(Box, {\n    ml: 2\n  }, item.message))))));\n}\n\nfunction YamlPage(props) {\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(DialogContentText$1, {\n    variant: \"h2\"\n  }, \"Entity as YAML\"), /* @__PURE__ */ React.createElement(DialogContentText$1, null, \"This is the raw entity data as received from the catalog, on YAML form.\"), /* @__PURE__ */ React.createElement(DialogContentText$1, null, /* @__PURE__ */ React.createElement(\"div\", {\n    style: { fontSize: \"75%\" },\n    \"data-testid\": \"code-snippet\"\n  }, /* @__PURE__ */ React.createElement(CodeSnippet, {\n    text: YAML.stringify(sortKeys(props.entity)),\n    language: \"yaml\",\n    showCopyCodeButton: true\n  }))));\n}\n\nconst useStyles$3 = makeStyles((theme) => ({\n  fullHeightDialog: {\n    height: \"calc(100% - 64px)\"\n  },\n  root: {\n    display: \"flex\",\n    flexGrow: 1,\n    width: \"100%\",\n    backgroundColor: theme.palette.background.paper\n  },\n  tabs: {\n    borderRight: `1px solid ${theme.palette.divider}`,\n    flexShrink: 0\n  },\n  tabContents: {\n    flexGrow: 1,\n    overflowX: \"auto\"\n  }\n}));\nfunction TabPanel(props) {\n  const { children, value, index, ...other } = props;\n  const classes = useStyles$3();\n  return /* @__PURE__ */ React.createElement(\"div\", {\n    role: \"tabpanel\",\n    hidden: value !== index,\n    id: `vertical-tabpanel-${index}`,\n    \"aria-labelledby\": `vertical-tab-${index}`,\n    className: classes.tabContents,\n    ...other\n  }, value === index && /* @__PURE__ */ React.createElement(Box, {\n    pl: 3,\n    pr: 3\n  }, children));\n}\nfunction a11yProps(index) {\n  return {\n    id: `vertical-tab-${index}`,\n    \"aria-controls\": `vertical-tabpanel-${index}`\n  };\n}\nfunction InspectEntityDialog(props) {\n  const classes = useStyles$3();\n  const [activeTab, setActiveTab] = React.useState(0);\n  useEffect(() => {\n    setActiveTab(0);\n  }, [props.open]);\n  if (!props.entity) {\n    return null;\n  }\n  return /* @__PURE__ */ React.createElement(Dialog, {\n    fullWidth: true,\n    maxWidth: \"xl\",\n    open: props.open,\n    onClose: props.onClose,\n    \"aria-labelledby\": \"entity-inspector-dialog-title\",\n    PaperProps: { className: classes.fullHeightDialog }\n  }, /* @__PURE__ */ React.createElement(DialogTitle, {\n    id: \"entity-inspector-dialog-title\"\n  }, \"Entity Inspector\"), /* @__PURE__ */ React.createElement(DialogContent, {\n    dividers: true\n  }, /* @__PURE__ */ React.createElement(\"div\", {\n    className: classes.root\n  }, /* @__PURE__ */ React.createElement(Tabs, {\n    orientation: \"vertical\",\n    variant: \"scrollable\",\n    value: activeTab,\n    onChange: (_, newValue) => setActiveTab(newValue),\n    \"aria-label\": \"Inspector options\",\n    className: classes.tabs\n  }, /* @__PURE__ */ React.createElement(Tab, {\n    label: \"Overview\",\n    ...a11yProps(0)\n  }), /* @__PURE__ */ React.createElement(Tab, {\n    label: \"Ancestry\",\n    ...a11yProps(1)\n  }), /* @__PURE__ */ React.createElement(Tab, {\n    label: \"Colocated\",\n    ...a11yProps(2)\n  }), /* @__PURE__ */ React.createElement(Tab, {\n    label: \"Raw JSON\",\n    ...a11yProps(3)\n  }), /* @__PURE__ */ React.createElement(Tab, {\n    label: \"Raw YAML\",\n    ...a11yProps(4)\n  })), /* @__PURE__ */ React.createElement(TabPanel, {\n    value: activeTab,\n    index: 0\n  }, /* @__PURE__ */ React.createElement(OverviewPage, {\n    entity: props.entity\n  })), /* @__PURE__ */ React.createElement(TabPanel, {\n    value: activeTab,\n    index: 1\n  }, /* @__PURE__ */ React.createElement(AncestryPage, {\n    entity: props.entity\n  })), /* @__PURE__ */ React.createElement(TabPanel, {\n    value: activeTab,\n    index: 2\n  }, /* @__PURE__ */ React.createElement(ColocatedPage, {\n    entity: props.entity\n  })), /* @__PURE__ */ React.createElement(TabPanel, {\n    value: activeTab,\n    index: 3\n  }, /* @__PURE__ */ React.createElement(JsonPage, {\n    entity: props.entity\n  })), /* @__PURE__ */ React.createElement(TabPanel, {\n    value: activeTab,\n    index: 4\n  }, /* @__PURE__ */ React.createElement(YamlPage, {\n    entity: props.entity\n  })))), /* @__PURE__ */ React.createElement(DialogActions, null, /* @__PURE__ */ React.createElement(Button, {\n    onClick: props.onClose,\n    color: \"primary\"\n  }, \"Close\")));\n}\n\nfunction useUnregisterEntityDialogState(entity) {\n  var _a;\n  const catalogApi = useApi(catalogApiRef);\n  const locationRef = (_a = entity.metadata.annotations) == null ? void 0 : _a[ANNOTATION_ORIGIN_LOCATION];\n  const uid = entity.metadata.uid;\n  const isBootstrap = locationRef === \"bootstrap:bootstrap\";\n  const prerequisites = useAsync(async () => {\n    const locationPromise = catalogApi.getLocationByRef(locationRef);\n    let colocatedEntitiesPromise;\n    if (!locationRef) {\n      colocatedEntitiesPromise = Promise.resolve([]);\n    } else {\n      const locationAnnotationFilter = `metadata.annotations.${ANNOTATION_ORIGIN_LOCATION}`;\n      colocatedEntitiesPromise = catalogApi.getEntities({\n        filter: { [locationAnnotationFilter]: locationRef },\n        fields: [\n          \"kind\",\n          \"metadata.uid\",\n          \"metadata.name\",\n          \"metadata.namespace\"\n        ]\n      }).then((response) => response.items);\n    }\n    return Promise.all([locationPromise, colocatedEntitiesPromise]).then(\n      ([location2, colocatedEntities2]) => ({\n        location: location2,\n        colocatedEntities: colocatedEntities2\n      })\n    );\n  }, [catalogApi, entity]);\n  const unregisterLocation = useCallback(\n    async function unregisterLocationFn() {\n      const { location: location2 } = prerequisites.value;\n      await catalogApi.removeLocationById(location2.id);\n    },\n    [catalogApi, prerequisites]\n  );\n  const deleteEntity = useCallback(\n    async function deleteEntityFn() {\n      await catalogApi.removeEntityByUid(uid);\n    },\n    [catalogApi, uid]\n  );\n  if (isBootstrap) {\n    return { type: \"bootstrap\", location: locationRef, deleteEntity };\n  }\n  const { loading, error, value } = prerequisites;\n  if (loading) {\n    return { type: \"loading\" };\n  } else if (error) {\n    return { type: \"error\", error };\n  }\n  const { location, colocatedEntities } = value;\n  if (!location) {\n    return { type: \"only-delete\", deleteEntity };\n  }\n  return {\n    type: \"unregister\",\n    location: locationRef,\n    colocatedEntities: colocatedEntities.map(getCompoundEntityRef),\n    unregisterLocation,\n    deleteEntity\n  };\n}\n\nconst useStyles$2 = makeStyles({\n  advancedButton: {\n    fontSize: \"0.7em\"\n  }\n});\nconst Contents = ({\n  entity,\n  onConfirm\n}) => {\n  var _a;\n  const alertApi = useApi(alertApiRef);\n  const configApi = useApi(configApiRef);\n  const classes = useStyles$2();\n  const state = useUnregisterEntityDialogState(entity);\n  const [showDelete, setShowDelete] = useState(false);\n  const [busy, setBusy] = useState(false);\n  const appTitle = (_a = configApi.getOptionalString(\"app.title\")) != null ? _a : \"Backstage\";\n  const onUnregister = useCallback(\n    async function onUnregisterFn() {\n      if (\"unregisterLocation\" in state) {\n        setBusy(true);\n        try {\n          await state.unregisterLocation();\n          onConfirm();\n        } catch (err) {\n          assertError(err);\n          alertApi.post({ message: err.message });\n        } finally {\n          setBusy(false);\n        }\n      }\n    },\n    [alertApi, onConfirm, state]\n  );\n  const onDelete = useCallback(\n    async function onDeleteFn() {\n      if (\"deleteEntity\" in state) {\n        setBusy(true);\n        try {\n          await state.deleteEntity();\n          onConfirm();\n        } catch (err) {\n          assertError(err);\n          alertApi.post({ message: err.message });\n        } finally {\n          setBusy(false);\n        }\n      }\n    },\n    [alertApi, onConfirm, state]\n  );\n  if (state.type === \"loading\") {\n    return /* @__PURE__ */ React.createElement(Progress, null);\n  }\n  if (state.type === \"error\") {\n    return /* @__PURE__ */ React.createElement(ResponseErrorPanel, {\n      error: state.error\n    });\n  }\n  if (state.type === \"bootstrap\") {\n    return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(Alert$1, {\n      severity: \"info\"\n    }, 'You cannot unregister this entity, since it originates from a protected Backstage configuration (location \"', state.location, '\"). If you believe this is in error, please contact the ', appTitle, \" \", \"integrator.\"), /* @__PURE__ */ React.createElement(Box, {\n      marginTop: 2\n    }, !showDelete && /* @__PURE__ */ React.createElement(Button, {\n      variant: \"text\",\n      size: \"small\",\n      color: \"primary\",\n      className: classes.advancedButton,\n      onClick: () => setShowDelete(true)\n    }, \"Advanced Options\"), showDelete && /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(DialogContentText, null, \"You have the option to delete the entity itself from the catalog. Note that this should only be done if you know that the catalog file has been deleted at, or moved from, its origin location. If that is not the case, the entity will reappear shortly as the next refresh round is performed by the catalog.\"), /* @__PURE__ */ React.createElement(Button, {\n      variant: \"contained\",\n      color: \"secondary\",\n      disabled: busy,\n      onClick: onDelete\n    }, \"Delete Entity\"))));\n  }\n  if (state.type === \"only-delete\") {\n    return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(DialogContentText, null, \"This entity does not seem to originate from a registered location. You therefore only have the option to delete it outright from the catalog.\"), /* @__PURE__ */ React.createElement(Button, {\n      variant: \"contained\",\n      color: \"secondary\",\n      disabled: busy,\n      onClick: onDelete\n    }, \"Delete Entity\"));\n  }\n  if (state.type === \"unregister\") {\n    return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(DialogContentText, null, \"This action will unregister the following entities:\"), /* @__PURE__ */ React.createElement(DialogContentText, {\n      component: \"ul\"\n    }, state.colocatedEntities.map((e) => /* @__PURE__ */ React.createElement(\"li\", {\n      key: `${e.kind}:${e.namespace}/${e.name}`\n    }, /* @__PURE__ */ React.createElement(EntityRefLink, {\n      entityRef: e\n    })))), /* @__PURE__ */ React.createElement(DialogContentText, null, \"Located at the following location:\"), /* @__PURE__ */ React.createElement(DialogContentText, {\n      component: \"ul\"\n    }, /* @__PURE__ */ React.createElement(\"li\", null, state.location)), /* @__PURE__ */ React.createElement(DialogContentText, null, \"To undo, just re-register the entity in \", appTitle, \".\"), /* @__PURE__ */ React.createElement(Box, {\n      marginTop: 2\n    }, /* @__PURE__ */ React.createElement(Button, {\n      variant: \"contained\",\n      color: \"secondary\",\n      disabled: busy,\n      onClick: onUnregister\n    }, \"Unregister Location\"), !showDelete && /* @__PURE__ */ React.createElement(Box, {\n      component: \"span\",\n      marginLeft: 2\n    }, /* @__PURE__ */ React.createElement(Button, {\n      variant: \"text\",\n      size: \"small\",\n      color: \"primary\",\n      className: classes.advancedButton,\n      onClick: () => setShowDelete(true)\n    }, \"Advanced Options\"))), showDelete && /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(Box, {\n      paddingTop: 4,\n      paddingBottom: 4\n    }, /* @__PURE__ */ React.createElement(Divider, null)), /* @__PURE__ */ React.createElement(DialogContentText, null, \"You also have the option to delete the entity itself from the catalog. Note that this should only be done if you know that the catalog file has been deleted at, or moved from, its origin location. If that is not the case, the entity will reappear shortly as the next refresh round is performed by the catalog.\"), /* @__PURE__ */ React.createElement(Button, {\n      variant: \"contained\",\n      color: \"secondary\",\n      disabled: busy,\n      onClick: onDelete\n    }, \"Delete Entity\")));\n  }\n  return /* @__PURE__ */ React.createElement(Alert$1, {\n    severity: \"error\"\n  }, \"Internal error: Unknown state\");\n};\nconst UnregisterEntityDialog = (props) => {\n  const { open, onConfirm, onClose, entity } = props;\n  return /* @__PURE__ */ React.createElement(Dialog, {\n    open,\n    onClose\n  }, /* @__PURE__ */ React.createElement(DialogTitle, {\n    id: \"responsive-dialog-title\"\n  }, \"Are you sure you want to unregister this entity?\"), /* @__PURE__ */ React.createElement(DialogContent, null, /* @__PURE__ */ React.createElement(Contents, {\n    entity,\n    onConfirm\n  })), /* @__PURE__ */ React.createElement(DialogActions, null, /* @__PURE__ */ React.createElement(Button, {\n    onClick: onClose,\n    color: \"primary\"\n  }, \"Cancel\")));\n};\n\nconst useStyles$1 = makeStyles(\n  (theme) => ({\n    root: {\n      backgroundColor: \"rgba(0, 0, 0, .11)\",\n      boxShadow: \"none\",\n      margin: theme.spacing(1, 0, 1, 0)\n    },\n    title: {\n      margin: theme.spacing(1, 0, 0, 1),\n      textTransform: \"uppercase\",\n      fontSize: 12,\n      fontWeight: \"bold\"\n    },\n    listIcon: {\n      minWidth: 30,\n      color: theme.palette.text.primary\n    },\n    menuItem: {\n      minHeight: theme.spacing(6)\n    },\n    groupWrapper: {\n      margin: theme.spacing(1, 1, 2, 1)\n    }\n  }),\n  {\n    name: \"CatalogReactUserListPicker\"\n  }\n);\nfunction getFilterGroups(orgName) {\n  return [\n    {\n      name: \"Personal\",\n      items: [\n        {\n          id: \"owned\",\n          label: \"Owned\",\n          icon: SettingsIcon\n        },\n        {\n          id: \"starred\",\n          label: \"Starred\",\n          icon: Star\n        }\n      ]\n    },\n    {\n      name: orgName != null ? orgName : \"Company\",\n      items: [\n        {\n          id: \"all\",\n          label: \"All\"\n        }\n      ]\n    }\n  ];\n}\nconst UserListPicker = (props) => {\n  var _a;\n  const { initialFilter, availableFilters } = props;\n  const classes = useStyles$1();\n  const configApi = useApi(configApiRef);\n  const orgName = (_a = configApi.getOptionalString(\"organization.name\")) != null ? _a : \"Company\";\n  const {\n    filters,\n    updateFilters,\n    backendEntities,\n    queryParameters: { kind: kindParameter, user: userParameter },\n    loading: loadingBackendEntities\n  } = useEntityList();\n  const userAndGroupFilterIds = [\"starred\", \"all\"];\n  const filterGroups = getFilterGroups(orgName).map((filterGroup) => ({\n    ...filterGroup,\n    items: filterGroup.items.filter(\n      ({ id }) => [\"group\", \"user\"].some((kind) => kind === kindParameter) ? userAndGroupFilterIds.includes(id) : !availableFilters || availableFilters.includes(id)\n    )\n  })).filter(({ items }) => !!items.length);\n  const { isStarredEntity } = useStarredEntities();\n  const { isOwnedEntity, loading: loadingEntityOwnership } = useEntityOwnership();\n  const loading = loadingBackendEntities || loadingEntityOwnership;\n  const ownedFilter = useMemo(\n    () => new UserListFilter(\"owned\", isOwnedEntity, isStarredEntity),\n    [isOwnedEntity, isStarredEntity]\n  );\n  const starredFilter = useMemo(\n    () => new UserListFilter(\"starred\", isOwnedEntity, isStarredEntity),\n    [isOwnedEntity, isStarredEntity]\n  );\n  const queryParamUserFilter = useMemo(\n    () => [userParameter].flat()[0],\n    [userParameter]\n  );\n  const [selectedUserFilter, setSelectedUserFilter] = useState(\n    queryParamUserFilter != null ? queryParamUserFilter : initialFilter\n  );\n  const entitiesWithoutUserFilter = useMemo(\n    () => backendEntities.filter(\n      reduceEntityFilters(\n        compact(Object.values({ ...filters, user: void 0 }))\n      )\n    ),\n    [filters, backendEntities]\n  );\n  const filterCounts = useMemo(\n    () => ({\n      all: entitiesWithoutUserFilter.length,\n      starred: entitiesWithoutUserFilter.filter(\n        (entity) => starredFilter.filterEntity(entity)\n      ).length,\n      owned: entitiesWithoutUserFilter.filter(\n        (entity) => ownedFilter.filterEntity(entity)\n      ).length\n    }),\n    [entitiesWithoutUserFilter, starredFilter, ownedFilter]\n  );\n  useEffect(() => {\n    if (queryParamUserFilter) {\n      setSelectedUserFilter(queryParamUserFilter);\n    }\n  }, [queryParamUserFilter]);\n  useEffect(() => {\n    if (!loading && !!selectedUserFilter && selectedUserFilter !== \"all\" && filterCounts[selectedUserFilter] === 0) {\n      setSelectedUserFilter(\"all\");\n    }\n  }, [loading, filterCounts, selectedUserFilter, setSelectedUserFilter]);\n  useEffect(() => {\n    updateFilters({\n      user: selectedUserFilter ? new UserListFilter(\n        selectedUserFilter,\n        isOwnedEntity,\n        isStarredEntity\n      ) : void 0\n    });\n  }, [selectedUserFilter, isOwnedEntity, isStarredEntity, updateFilters]);\n  return /* @__PURE__ */ React.createElement(Card, {\n    className: classes.root\n  }, filterGroups.map((group) => /* @__PURE__ */ React.createElement(Fragment, {\n    key: group.name\n  }, /* @__PURE__ */ React.createElement(Typography, {\n    variant: \"subtitle2\",\n    component: \"span\",\n    className: classes.title\n  }, group.name), /* @__PURE__ */ React.createElement(Card, {\n    className: classes.groupWrapper\n  }, /* @__PURE__ */ React.createElement(List, {\n    disablePadding: true,\n    dense: true,\n    role: \"menu\",\n    \"aria-label\": group.name\n  }, group.items.map((item) => {\n    var _a2, _b;\n    return /* @__PURE__ */ React.createElement(MenuItem, {\n      role: \"none presentation\",\n      key: item.id,\n      button: true,\n      divider: true,\n      onClick: () => setSelectedUserFilter(item.id),\n      selected: item.id === ((_a2 = filters.user) == null ? void 0 : _a2.value),\n      className: classes.menuItem,\n      disabled: filterCounts[item.id] === 0,\n      \"data-testid\": `user-picker-${item.id}`,\n      tabIndex: 0,\n      ContainerProps: { role: \"menuitem\" }\n    }, item.icon && /* @__PURE__ */ React.createElement(ListItemIcon, {\n      className: classes.listIcon\n    }, /* @__PURE__ */ React.createElement(item.icon, {\n      fontSize: \"small\"\n    })), /* @__PURE__ */ React.createElement(ListItemText$1, null, /* @__PURE__ */ React.createElement(Typography, {\n      variant: \"body1\"\n    }, item.label, \" \")), /* @__PURE__ */ React.createElement(ListItemSecondaryAction, null, (_b = filterCounts[item.id]) != null ? _b : \"-\"));\n  }))))));\n};\n\nconst useStyles = makeStyles(\n  {\n    input: {}\n  },\n  {\n    name: \"CatalogReactEntityProcessingStatusPickerPicker\"\n  }\n);\nconst icon = /* @__PURE__ */ React.createElement(CheckBoxOutlineBlankIcon, {\n  fontSize: \"small\"\n});\nconst checkedIcon = /* @__PURE__ */ React.createElement(CheckBoxIcon, {\n  fontSize: \"small\"\n});\nconst EntityProcessingStatusPicker = () => {\n  const classes = useStyles();\n  const { updateFilters } = useEntityList();\n  const [selectedAdvancedItems, setSelectedAdvancedItems] = useState(\n    []\n  );\n  function orphanChange(value) {\n    updateFilters({\n      orphan: value ? new EntityOrphanFilter(value) : void 0\n    });\n  }\n  function errorChange(value) {\n    updateFilters({\n      error: value ? new EntityErrorFilter(value) : void 0\n    });\n  }\n  const availableAdvancedItems = [\"Is Orphan\", \"Has Error\"];\n  return /* @__PURE__ */ React.createElement(Box, {\n    pb: 1,\n    pt: 1\n  }, /* @__PURE__ */ React.createElement(Typography, {\n    variant: \"button\",\n    component: \"label\"\n  }, \"Processing Status\", /* @__PURE__ */ React.createElement(Autocomplete, {\n    multiple: true,\n    options: availableAdvancedItems,\n    value: selectedAdvancedItems,\n    onChange: (_, value) => {\n      setSelectedAdvancedItems(value);\n      orphanChange(value.includes(\"Is Orphan\"));\n      errorChange(value.includes(\"Has Error\"));\n    },\n    renderOption: (option, { selected }) => /* @__PURE__ */ React.createElement(FormControlLabel, {\n      control: /* @__PURE__ */ React.createElement(Checkbox, {\n        icon,\n        checkedIcon,\n        checked: selected\n      }),\n      label: option\n    }),\n    size: \"small\",\n    popupIcon: /* @__PURE__ */ React.createElement(ExpandMoreIcon, {\n      \"data-testid\": \"processing-status-picker-expand\"\n    }),\n    renderInput: (params) => /* @__PURE__ */ React.createElement(TextField, {\n      ...params,\n      className: classes.input,\n      variant: \"outlined\"\n    })\n  })));\n};\n\nconst MockEntityListContextProvider = ({\n  children,\n  value\n}) => {\n  var _a;\n  const [filters, setFilters] = useState(\n    (_a = value == null ? void 0 : value.filters) != null ? _a : {}\n  );\n  const updateFilters = useCallback(\n    (update) => {\n      setFilters((prevFilters) => {\n        const newFilters = typeof update === \"function\" ? update(prevFilters) : update;\n        return { ...prevFilters, ...newFilters };\n      });\n    },\n    []\n  );\n  const defaultValues = useMemo(\n    () => ({\n      entities: [],\n      backendEntities: [],\n      queryParameters: {}\n    }),\n    []\n  );\n  const resolvedValue = useMemo(\n    () => {\n      var _a2, _b, _c, _d, _e;\n      return {\n        entities: (_a2 = value == null ? void 0 : value.entities) != null ? _a2 : defaultValues.entities,\n        backendEntities: (_b = value == null ? void 0 : value.backendEntities) != null ? _b : defaultValues.backendEntities,\n        updateFilters: (_c = value == null ? void 0 : value.updateFilters) != null ? _c : updateFilters,\n        filters,\n        loading: (_d = value == null ? void 0 : value.loading) != null ? _d : false,\n        queryParameters: (_e = value == null ? void 0 : value.queryParameters) != null ? _e : defaultValues.queryParameters,\n        error: value == null ? void 0 : value.error\n      };\n    },\n    [value, defaultValues, filters, updateFilters]\n  );\n  return /* @__PURE__ */ React.createElement(EntityListContext.Provider, {\n    value: resolvedValue\n  }, children);\n};\n\nexport { AsyncEntityProvider, CatalogFilterLayout, EntityErrorFilter, EntityKindFilter, EntityKindPicker, EntityLifecycleFilter, EntityLifecyclePicker, EntityListContext, EntityListProvider, EntityOrphanFilter, EntityOwnerFilter, EntityOwnerPicker, EntityProcessingStatusPicker, EntityProvider, EntityRefLink, EntityRefLinks, EntitySearchBar, EntityTable, EntityTagFilter, EntityTagPicker, EntityTextFilter, EntityTypeFilter, EntityTypePicker, FavoriteEntity, InspectEntityDialog, MockEntityListContextProvider, MockStarredEntitiesApi, UnregisterEntityDialog, UserListFilter, UserListPicker, catalogApiRef, columnFactories, entityRouteParams, entityRouteRef, getEntityRelations, getEntitySourceLocation, humanizeEntityRef, isOwnerOf, starredEntitiesApiRef, useAsyncEntity, useEntity, useEntityList, useEntityOwnership, useEntityPermission, useEntityTypeFilter, useRelatedEntities, useStarredEntities, useStarredEntity };\n//# sourceMappingURL=index.esm.js.map\n","import ObservableImpl from 'zen-observable';\nimport { stringifyEntityRef, RELATION_PART_OF, RELATION_OWNED_BY, getEntitySourceLocation, ANNOTATION_EDIT_URL, DEFAULT_NAMESPACE, ANNOTATION_LOCATION, ANNOTATION_VIEW_URL } from '@backstage/catalog-model';\nimport { isArray, isString, capitalize as capitalize$1 } from 'lodash';\nimport { Link, HeaderIconLinkRow, OverflowTooltip, WarningPanel, CodeSnippet, Table, Page, Header, Progress, RoutedTabs, Content, HeaderLabel, ResponseErrorPanel } from '@backstage/core-components';\nimport { createExternalRouteRef, createRouteRef, useElementFilter, useApi, alertApiRef, useRouteRef, useAnalytics, attachComponentData, useRouteRefParams, useApiHolder, createPlugin, createApiFactory, discoveryApiRef, fetchApiRef, storageApiRef, createRoutableExtension, createComponentExtension } from '@backstage/core-plugin-api';\nimport { scmIntegrationsApiRef, ScmIntegrationIcon } from '@backstage/integration-react';\nimport { getEntityRelations, EntityRefLinks, useEntity, catalogApiRef, getEntitySourceLocation as getEntitySourceLocation$1, useEntityList, EntityKindFilter, EntityRefLink, humanizeEntityRef, useStarredEntities, useEntityPermission, entityRouteRef, useAsyncEntity, UnregisterEntityDialog, InspectEntityDialog, FavoriteEntity, CatalogFilterLayout, starredEntitiesApiRef } from '@backstage/plugin-catalog-react';\nimport { makeStyles, Typography, Grid, Box, useMediaQuery, ImageList, ImageListItem, Chip, Card, CardHeader, IconButton, Divider, CardContent, createStyles, capitalize, Select, InputBase, MenuItem, ListItem, ListItemIcon, ListItemText, Popover, MenuList, Dialog, DialogTitle, DialogActions, Button } from '@material-ui/core';\nimport CachedIcon from '@material-ui/icons/Cached';\nimport DocsIcon from '@material-ui/icons/Description';\nimport EditIcon from '@material-ui/icons/Edit';\nimport React, { useCallback, useMemo, useState, useEffect } from 'react';\nimport LanguageIcon from '@material-ui/icons/Language';\nimport useAsync from 'react-use/lib/useAsync';\nimport { HighlightedSearchResultText } from '@backstage/plugin-search-react';\nimport { withStyles, makeStyles as makeStyles$1 } from '@material-ui/core/styles';\nimport OpenInNew from '@material-ui/icons/OpenInNew';\nimport Star from '@material-ui/icons/Star';\nimport StarBorder from '@material-ui/icons/StarBorder';\nimport { Alert } from '@material-ui/lab';\nimport { useLocation, useNavigate } from 'react-router';\nimport BugReportIcon from '@material-ui/icons/BugReport';\nimport MoreVert from '@material-ui/icons/MoreVert';\nimport FileCopyTwoToneIcon from '@material-ui/icons/FileCopyTwoTone';\nimport { catalogEntityDeletePermission } from '@backstage/plugin-catalog-common';\nimport CancelIcon from '@material-ui/icons/Cancel';\nimport { assertError } from '@backstage/errors';\nimport { ENTITY_STATUS_CATALOG_PROCESSING_TYPE, CatalogClient } from '@backstage/catalog-client';\n\nasync function performMigrationToTheNewBucket({\n  storageApi\n}) {\n  var _a;\n  const source = storageApi.forBucket(\"settings\");\n  const target = storageApi.forBucket(\"starredEntities\");\n  const oldStarredEntities = source.snapshot(\"starredEntities\").value;\n  if (!isArray(oldStarredEntities)) {\n    return;\n  }\n  const targetEntities = new Set(\n    (_a = target.snapshot(\"entityRefs\").value) != null ? _a : []\n  );\n  oldStarredEntities.filter(isString).map((old) => old.split(\":\")).filter((split) => split.length === 4 && split[0] === \"entity\").map(\n    ([_, kind, namespace, name]) => stringifyEntityRef({ kind, namespace, name })\n  ).forEach((e) => targetEntities.add(e));\n  await target.set(\"entityRefs\", Array.from(targetEntities));\n  await source.remove(\"starredEntities\");\n}\n\nclass DefaultStarredEntitiesApi {\n  constructor(opts) {\n    this.subscribers = /* @__PURE__ */ new Set();\n    this.observable = new ObservableImpl((subscriber) => {\n      subscriber.next(new Set(this.starredEntities));\n      this.subscribers.add(subscriber);\n      return () => {\n        this.subscribers.delete(subscriber);\n      };\n    });\n    var _a;\n    performMigrationToTheNewBucket(opts).then();\n    this.settingsStore = opts.storageApi.forBucket(\"starredEntities\");\n    this.starredEntities = new Set(\n      (_a = this.settingsStore.snapshot(\"entityRefs\").value) != null ? _a : []\n    );\n    this.settingsStore.observe$(\"entityRefs\").subscribe({\n      next: (next) => {\n        var _a2;\n        this.starredEntities = new Set((_a2 = next.value) != null ? _a2 : []);\n        this.notifyChanges();\n      }\n    });\n  }\n  async toggleStarred(entityRef) {\n    if (this.starredEntities.has(entityRef)) {\n      this.starredEntities.delete(entityRef);\n    } else {\n      this.starredEntities.add(entityRef);\n    }\n    await this.settingsStore.set(\n      \"entityRefs\",\n      Array.from(this.starredEntities)\n    );\n  }\n  starredEntitie$() {\n    return this.observable;\n  }\n  notifyChanges() {\n    for (const subscription of this.subscribers) {\n      subscription.next(new Set(this.starredEntities));\n    }\n  }\n}\n\nconst createComponentRouteRef = createExternalRouteRef({\n  id: \"create-component\",\n  optional: true\n});\nconst viewTechDocRouteRef = createExternalRouteRef({\n  id: \"view-techdoc\",\n  optional: true,\n  params: [\"namespace\", \"kind\", \"name\"]\n});\nconst rootRouteRef = createRouteRef({\n  id: \"catalog\"\n});\n\nconst useStyles$6 = makeStyles((theme) => ({\n  value: {\n    fontWeight: \"bold\",\n    overflow: \"hidden\",\n    lineHeight: \"24px\",\n    wordBreak: \"break-word\"\n  },\n  label: {\n    color: theme.palette.text.secondary,\n    textTransform: \"uppercase\",\n    fontSize: \"10px\",\n    fontWeight: \"bold\",\n    letterSpacing: 0.5,\n    overflow: \"hidden\",\n    whiteSpace: \"nowrap\"\n  }\n}));\nfunction AboutField(props) {\n  const { label, value, gridSizes, children } = props;\n  const classes = useStyles$6();\n  const childElements = useElementFilter(children, (c) => c.getElements());\n  const content = childElements.length > 0 ? childElements : /* @__PURE__ */ React.createElement(Typography, {\n    variant: \"body2\",\n    className: classes.value\n  }, value || `unknown`);\n  return /* @__PURE__ */ React.createElement(Grid, {\n    item: true,\n    ...gridSizes\n  }, /* @__PURE__ */ React.createElement(Typography, {\n    variant: \"h2\",\n    className: classes.label\n  }, label), content);\n}\n\nconst useStyles$5 = makeStyles({\n  svgIcon: {\n    display: \"inline-block\",\n    \"& svg\": {\n      display: \"inline-block\",\n      fontSize: \"inherit\",\n      verticalAlign: \"baseline\"\n    }\n  }\n});\nfunction IconLink(props) {\n  const { href, text, Icon } = props;\n  const classes = useStyles$5();\n  return /* @__PURE__ */ React.createElement(Box, {\n    display: \"flex\"\n  }, /* @__PURE__ */ React.createElement(Box, {\n    mr: 1,\n    className: classes.svgIcon\n  }, /* @__PURE__ */ React.createElement(Typography, {\n    component: \"div\"\n  }, Icon ? /* @__PURE__ */ React.createElement(Icon, null) : /* @__PURE__ */ React.createElement(LanguageIcon, null))), /* @__PURE__ */ React.createElement(Box, {\n    flexGrow: \"1\"\n  }, /* @__PURE__ */ React.createElement(Link, {\n    to: href,\n    target: \"_blank\",\n    rel: \"noopener\"\n  }, text || href)));\n}\n\nconst colDefaults = {\n  xs: 1,\n  sm: 1,\n  md: 1,\n  lg: 2,\n  xl: 3\n};\nfunction useDynamicColumns(cols) {\n  var _a, _b;\n  const matches = [\n    useMediaQuery((theme) => theme.breakpoints.up(\"xl\")) ? \"xl\" : null,\n    useMediaQuery((theme) => theme.breakpoints.up(\"lg\")) ? \"lg\" : null,\n    useMediaQuery((theme) => theme.breakpoints.up(\"md\")) ? \"md\" : null,\n    useMediaQuery((theme) => theme.breakpoints.up(\"sm\")) ? \"sm\" : null,\n    useMediaQuery((theme) => theme.breakpoints.up(\"xs\")) ? \"xs\" : null\n  ];\n  let numOfCols = 1;\n  if (typeof cols === \"number\") {\n    numOfCols = cols;\n  } else {\n    const breakpoint = (_a = matches.find((k) => k !== null)) != null ? _a : \"xs\";\n    numOfCols = (_b = cols == null ? void 0 : cols[breakpoint]) != null ? _b : colDefaults[breakpoint];\n  }\n  return numOfCols;\n}\n\nfunction LinksGridList(props) {\n  const { items, cols = void 0 } = props;\n  const numOfCols = useDynamicColumns(cols);\n  return /* @__PURE__ */ React.createElement(ImageList, {\n    rowHeight: \"auto\",\n    cols: numOfCols\n  }, items.map(({ text, href, Icon }, i) => /* @__PURE__ */ React.createElement(ImageListItem, {\n    key: i\n  }, /* @__PURE__ */ React.createElement(IconLink, {\n    href,\n    text: text != null ? text : href,\n    Icon\n  }))));\n}\n\nconst useStyles$4 = makeStyles({\n  description: {\n    wordBreak: \"break-word\"\n  }\n});\nfunction getLocationTargetHref(target, type, entitySourceLocation) {\n  if (type === \"url\" || target.includes(\"://\")) {\n    return target;\n  }\n  const srcLocationUrl = entitySourceLocation.type === \"file\" ? `file://${entitySourceLocation.target}` : entitySourceLocation.target;\n  if (type === \"file\" || entitySourceLocation.type === \"file\") {\n    return new URL(target, srcLocationUrl).href;\n  }\n  return srcLocationUrl;\n}\nfunction AboutContent(props) {\n  var _a, _b, _c, _d, _e, _f, _g, _h;\n  const { entity } = props;\n  const classes = useStyles$4();\n  const isSystem = entity.kind.toLocaleLowerCase(\"en-US\") === \"system\";\n  const isResource = entity.kind.toLocaleLowerCase(\"en-US\") === \"resource\";\n  const isComponent = entity.kind.toLocaleLowerCase(\"en-US\") === \"component\";\n  const isAPI = entity.kind.toLocaleLowerCase(\"en-US\") === \"api\";\n  const isTemplate = entity.kind.toLocaleLowerCase(\"en-US\") === \"template\";\n  const isLocation = entity.kind.toLocaleLowerCase(\"en-US\") === \"location\";\n  const isGroup = entity.kind.toLocaleLowerCase(\"en-US\") === \"group\";\n  const partOfSystemRelations = getEntityRelations(entity, RELATION_PART_OF, {\n    kind: \"system\"\n  });\n  const partOfComponentRelations = getEntityRelations(\n    entity,\n    RELATION_PART_OF,\n    {\n      kind: \"component\"\n    }\n  );\n  const partOfDomainRelations = getEntityRelations(entity, RELATION_PART_OF, {\n    kind: \"domain\"\n  });\n  const ownedByRelations = getEntityRelations(entity, RELATION_OWNED_BY);\n  let entitySourceLocation;\n  try {\n    entitySourceLocation = getEntitySourceLocation(entity);\n  } catch (e) {\n    entitySourceLocation = void 0;\n  }\n  return /* @__PURE__ */ React.createElement(Grid, {\n    container: true\n  }, /* @__PURE__ */ React.createElement(AboutField, {\n    label: \"Description\",\n    gridSizes: { xs: 12 }\n  }, /* @__PURE__ */ React.createElement(Typography, {\n    variant: \"body2\",\n    paragraph: true,\n    className: classes.description\n  }, ((_a = entity == null ? void 0 : entity.metadata) == null ? void 0 : _a.description) || \"No description\")), /* @__PURE__ */ React.createElement(AboutField, {\n    label: \"Owner\",\n    value: \"No Owner\",\n    gridSizes: { xs: 12, sm: 6, lg: 4 }\n  }, ownedByRelations.length > 0 && /* @__PURE__ */ React.createElement(EntityRefLinks, {\n    entityRefs: ownedByRelations,\n    defaultKind: \"group\"\n  })), (isSystem || partOfDomainRelations.length > 0) && /* @__PURE__ */ React.createElement(AboutField, {\n    label: \"Domain\",\n    value: \"No Domain\",\n    gridSizes: { xs: 12, sm: 6, lg: 4 }\n  }, partOfDomainRelations.length > 0 && /* @__PURE__ */ React.createElement(EntityRefLinks, {\n    entityRefs: partOfDomainRelations,\n    defaultKind: \"domain\"\n  })), (isAPI || isComponent || isResource || partOfSystemRelations.length > 0) && /* @__PURE__ */ React.createElement(AboutField, {\n    label: \"System\",\n    value: \"No System\",\n    gridSizes: { xs: 12, sm: 6, lg: 4 }\n  }, partOfSystemRelations.length > 0 && /* @__PURE__ */ React.createElement(EntityRefLinks, {\n    entityRefs: partOfSystemRelations,\n    defaultKind: \"system\"\n  })), isComponent && partOfComponentRelations.length > 0 && /* @__PURE__ */ React.createElement(AboutField, {\n    label: \"Parent Component\",\n    value: \"No Parent Component\",\n    gridSizes: { xs: 12, sm: 6, lg: 4 }\n  }, /* @__PURE__ */ React.createElement(EntityRefLinks, {\n    entityRefs: partOfComponentRelations,\n    defaultKind: \"component\"\n  })), (isAPI || isComponent || isResource || isTemplate || isGroup || isLocation || typeof ((_b = entity == null ? void 0 : entity.spec) == null ? void 0 : _b.type) === \"string\") && /* @__PURE__ */ React.createElement(AboutField, {\n    label: \"Type\",\n    value: (_c = entity == null ? void 0 : entity.spec) == null ? void 0 : _c.type,\n    gridSizes: { xs: 12, sm: 6, lg: 4 }\n  }), (isAPI || isComponent || typeof ((_d = entity == null ? void 0 : entity.spec) == null ? void 0 : _d.lifecycle) === \"string\") && /* @__PURE__ */ React.createElement(AboutField, {\n    label: \"Lifecycle\",\n    value: (_e = entity == null ? void 0 : entity.spec) == null ? void 0 : _e.lifecycle,\n    gridSizes: { xs: 12, sm: 6, lg: 4 }\n  }), /* @__PURE__ */ React.createElement(AboutField, {\n    label: \"Tags\",\n    value: \"No Tags\",\n    gridSizes: { xs: 12, sm: 6, lg: 4 }\n  }, (((_f = entity == null ? void 0 : entity.metadata) == null ? void 0 : _f.tags) || []).map((t) => /* @__PURE__ */ React.createElement(Chip, {\n    key: t,\n    size: \"small\",\n    label: t\n  }))), isLocation && (((_g = entity == null ? void 0 : entity.spec) == null ? void 0 : _g.targets) || ((_h = entity == null ? void 0 : entity.spec) == null ? void 0 : _h.target)) && /* @__PURE__ */ React.createElement(AboutField, {\n    label: \"Targets\",\n    gridSizes: { xs: 12 }\n  }, /* @__PURE__ */ React.createElement(LinksGridList, {\n    cols: 1,\n    items: (entity.spec.targets || [entity.spec.target]).map((target) => target).map((target) => {\n      var _a2;\n      return {\n        text: target,\n        href: getLocationTargetHref(\n          target,\n          ((_a2 = entity == null ? void 0 : entity.spec) == null ? void 0 : _a2.type) || \"unknown\",\n          entitySourceLocation\n        )\n      };\n    })\n  })));\n}\n\nconst useStyles$3 = makeStyles({\n  gridItemCard: {\n    display: \"flex\",\n    flexDirection: \"column\",\n    height: \"calc(100% - 10px)\",\n    marginBottom: \"10px\"\n  },\n  fullHeightCard: {\n    display: \"flex\",\n    flexDirection: \"column\",\n    height: \"100%\"\n  },\n  gridItemCardContent: {\n    flex: 1\n  },\n  fullHeightCardContent: {\n    flex: 1\n  }\n});\nfunction AboutCard(props) {\n  var _a, _b, _c;\n  const { variant } = props;\n  const classes = useStyles$3();\n  const { entity } = useEntity();\n  const scmIntegrationsApi = useApi(scmIntegrationsApiRef);\n  const catalogApi = useApi(catalogApiRef);\n  const alertApi = useApi(alertApiRef);\n  const viewTechdocLink = useRouteRef(viewTechDocRouteRef);\n  const entitySourceLocation = getEntitySourceLocation$1(\n    entity,\n    scmIntegrationsApi\n  );\n  const entityMetadataEditUrl = (_a = entity.metadata.annotations) == null ? void 0 : _a[ANNOTATION_EDIT_URL];\n  const viewInSource = {\n    label: \"View Source\",\n    disabled: !entitySourceLocation,\n    icon: /* @__PURE__ */ React.createElement(ScmIntegrationIcon, {\n      type: entitySourceLocation == null ? void 0 : entitySourceLocation.integrationType\n    }),\n    href: entitySourceLocation == null ? void 0 : entitySourceLocation.locationTargetUrl\n  };\n  const viewInTechDocs = {\n    label: \"View TechDocs\",\n    disabled: !((_b = entity.metadata.annotations) == null ? void 0 : _b[\"backstage.io/techdocs-ref\"]) || !viewTechdocLink,\n    icon: /* @__PURE__ */ React.createElement(DocsIcon, null),\n    href: viewTechdocLink && viewTechdocLink({\n      namespace: entity.metadata.namespace || DEFAULT_NAMESPACE,\n      kind: entity.kind,\n      name: entity.metadata.name\n    })\n  };\n  let cardClass = \"\";\n  if (variant === \"gridItem\") {\n    cardClass = classes.gridItemCard;\n  } else if (variant === \"fullHeight\") {\n    cardClass = classes.fullHeightCard;\n  }\n  let cardContentClass = \"\";\n  if (variant === \"gridItem\") {\n    cardContentClass = classes.gridItemCardContent;\n  } else if (variant === \"fullHeight\") {\n    cardContentClass = classes.fullHeightCardContent;\n  }\n  const entityLocation = (_c = entity.metadata.annotations) == null ? void 0 : _c[ANNOTATION_LOCATION];\n  const allowRefresh = (entityLocation == null ? void 0 : entityLocation.startsWith(\"url:\")) || (entityLocation == null ? void 0 : entityLocation.startsWith(\"file:\"));\n  const refreshEntity = useCallback(async () => {\n    await catalogApi.refreshEntity(stringifyEntityRef(entity));\n    alertApi.post({ message: \"Refresh scheduled\", severity: \"info\" });\n  }, [catalogApi, alertApi, entity]);\n  return /* @__PURE__ */ React.createElement(Card, {\n    className: cardClass\n  }, /* @__PURE__ */ React.createElement(CardHeader, {\n    title: \"About\",\n    action: /* @__PURE__ */ React.createElement(React.Fragment, null, allowRefresh && /* @__PURE__ */ React.createElement(IconButton, {\n      \"aria-label\": \"Refresh\",\n      title: \"Schedule entity refresh\",\n      onClick: refreshEntity\n    }, /* @__PURE__ */ React.createElement(CachedIcon, null)), /* @__PURE__ */ React.createElement(IconButton, {\n      component: Link,\n      \"aria-label\": \"Edit\",\n      disabled: !entityMetadataEditUrl,\n      title: \"Edit Metadata\",\n      to: entityMetadataEditUrl != null ? entityMetadataEditUrl : \"#\"\n    }, /* @__PURE__ */ React.createElement(EditIcon, null))),\n    subheader: /* @__PURE__ */ React.createElement(HeaderIconLinkRow, {\n      links: [viewInSource, viewInTechDocs]\n    })\n  }), /* @__PURE__ */ React.createElement(Divider, null), /* @__PURE__ */ React.createElement(CardContent, {\n    className: cardContentClass\n  }, /* @__PURE__ */ React.createElement(AboutContent, {\n    entity\n  })));\n}\n\nconst useStyles$2 = makeStyles(\n  (theme) => createStyles({\n    root: {\n      ...theme.typography.h4\n    }\n  })\n);\nfunction CatalogKindHeader(props) {\n  var _a;\n  const { initialFilter = \"component\", allowedKinds } = props;\n  const classes = useStyles$2();\n  const catalogApi = useApi(catalogApiRef);\n  const { value: allKinds } = useAsync(async () => {\n    return await catalogApi.getEntityFacets({ facets: [\"kind\"] }).then((response) => {\n      var _a2;\n      return ((_a2 = response.facets.kind) == null ? void 0 : _a2.map((f) => f.value).sort()) || [];\n    });\n  });\n  const {\n    filters,\n    updateFilters,\n    queryParameters: { kind: kindParameter }\n  } = useEntityList();\n  const queryParamKind = useMemo(\n    () => {\n      var _a2;\n      return (_a2 = [kindParameter].flat()[0]) == null ? void 0 : _a2.toLocaleLowerCase(\"en-US\");\n    },\n    [kindParameter]\n  );\n  const [selectedKind, setSelectedKind] = useState(\n    queryParamKind != null ? queryParamKind : initialFilter\n  );\n  useEffect(() => {\n    var _a2, _b;\n    if ((_a2 = filters.kind) == null ? void 0 : _a2.value) {\n      setSelectedKind((_b = filters.kind) == null ? void 0 : _b.value);\n    }\n  }, [filters.kind]);\n  useEffect(() => {\n    updateFilters({\n      kind: selectedKind ? new EntityKindFilter(selectedKind) : void 0\n    });\n  }, [selectedKind, updateFilters]);\n  useEffect(() => {\n    if (queryParamKind) {\n      setSelectedKind(queryParamKind);\n    }\n  }, [queryParamKind]);\n  const availableKinds = [capitalize(selectedKind)].concat(\n    (_a = allKinds == null ? void 0 : allKinds.filter(\n      (k) => allowedKinds ? allowedKinds.some(\n        (a) => a.toLocaleLowerCase(\"en-US\") === k.toLocaleLowerCase(\"en-US\")\n      ) : true\n    )) != null ? _a : []\n  );\n  const options = availableKinds.sort().reduce((acc, kind) => {\n    acc[kind.toLocaleLowerCase(\"en-US\")] = kind;\n    return acc;\n  }, {});\n  return /* @__PURE__ */ React.createElement(Select, {\n    input: /* @__PURE__ */ React.createElement(InputBase, {\n      value: selectedKind\n    }),\n    value: selectedKind,\n    onChange: (e) => setSelectedKind(e.target.value),\n    classes\n  }, Object.keys(options).map((kind) => /* @__PURE__ */ React.createElement(MenuItem, {\n    value: kind,\n    key: kind\n  }, `${options[kind]}s`)));\n}\n\nconst useStyles$1 = makeStyles({\n  flexContainer: {\n    flexWrap: \"wrap\"\n  },\n  itemText: {\n    width: \"100%\",\n    wordBreak: \"break-all\",\n    marginBottom: \"1rem\"\n  }\n});\nfunction CatalogSearchResultListItem(props) {\n  var _a, _b;\n  const result = props.result;\n  const classes = useStyles$1();\n  const analytics = useAnalytics();\n  const handleClick = () => {\n    analytics.captureEvent(\"discover\", result.title, {\n      attributes: { to: result.location },\n      value: props.rank\n    });\n  };\n  return /* @__PURE__ */ React.createElement(Link, {\n    noTrack: true,\n    to: result.location,\n    onClick: handleClick\n  }, /* @__PURE__ */ React.createElement(ListItem, {\n    alignItems: \"flex-start\"\n  }, props.icon && /* @__PURE__ */ React.createElement(ListItemIcon, null, props.icon), /* @__PURE__ */ React.createElement(\"div\", {\n    className: classes.flexContainer\n  }, /* @__PURE__ */ React.createElement(ListItemText, {\n    className: classes.itemText,\n    primaryTypographyProps: { variant: \"h6\" },\n    primary: ((_a = props.highlight) == null ? void 0 : _a.fields.title) ? /* @__PURE__ */ React.createElement(HighlightedSearchResultText, {\n      text: props.highlight.fields.title,\n      preTag: props.highlight.preTag,\n      postTag: props.highlight.postTag\n    }) : result.title,\n    secondary: ((_b = props.highlight) == null ? void 0 : _b.fields.text) ? /* @__PURE__ */ React.createElement(HighlightedSearchResultText, {\n      text: props.highlight.fields.text,\n      preTag: props.highlight.preTag,\n      postTag: props.highlight.postTag\n    }) : result.text\n  }), /* @__PURE__ */ React.createElement(Box, null, result.kind && /* @__PURE__ */ React.createElement(Chip, {\n    label: `Kind: ${result.kind}`,\n    size: \"small\"\n  }), result.lifecycle && /* @__PURE__ */ React.createElement(Chip, {\n    label: `Lifecycle: ${result.lifecycle}`,\n    size: \"small\"\n  })))), /* @__PURE__ */ React.createElement(Divider, {\n    component: \"li\"\n  }));\n}\n\nconst columnFactories = Object.freeze({\n  createNameColumn(options) {\n    function formatContent(entity) {\n      var _a;\n      return ((_a = entity.metadata) == null ? void 0 : _a.title) || humanizeEntityRef(entity, {\n        defaultKind: options == null ? void 0 : options.defaultKind\n      });\n    }\n    return {\n      title: \"Name\",\n      field: \"resolved.name\",\n      highlight: true,\n      customSort({ entity: entity1 }, { entity: entity2 }) {\n        return formatContent(entity1).localeCompare(formatContent(entity2));\n      },\n      render: ({ entity }) => {\n        var _a;\n        return /* @__PURE__ */ React.createElement(EntityRefLink, {\n          entityRef: entity,\n          defaultKind: (options == null ? void 0 : options.defaultKind) || \"Component\",\n          title: (_a = entity.metadata) == null ? void 0 : _a.title\n        });\n      }\n    };\n  },\n  createSystemColumn() {\n    return {\n      title: \"System\",\n      field: \"resolved.partOfSystemRelationTitle\",\n      render: ({ resolved }) => /* @__PURE__ */ React.createElement(EntityRefLinks, {\n        entityRefs: resolved.partOfSystemRelations,\n        defaultKind: \"system\"\n      })\n    };\n  },\n  createOwnerColumn() {\n    return {\n      title: \"Owner\",\n      field: \"resolved.ownedByRelationsTitle\",\n      render: ({ resolved }) => /* @__PURE__ */ React.createElement(EntityRefLinks, {\n        entityRefs: resolved.ownedByRelations,\n        defaultKind: \"group\"\n      })\n    };\n  },\n  createSpecTargetsColumn() {\n    return {\n      title: \"Targets\",\n      field: \"entity.spec.targets\",\n      render: ({ entity }) => {\n        var _a, _b;\n        return /* @__PURE__ */ React.createElement(React.Fragment, null, (((_a = entity == null ? void 0 : entity.spec) == null ? void 0 : _a.targets) || ((_b = entity == null ? void 0 : entity.spec) == null ? void 0 : _b.target)) && /* @__PURE__ */ React.createElement(OverflowTooltip, {\n          text: (entity.spec.targets || [entity.spec.target]).join(\", \"),\n          placement: \"bottom-start\"\n        }));\n      }\n    };\n  },\n  createSpecTypeColumn() {\n    return {\n      title: \"Type\",\n      field: \"entity.spec.type\",\n      hidden: true,\n      width: \"auto\"\n    };\n  },\n  createSpecLifecycleColumn() {\n    return {\n      title: \"Lifecycle\",\n      field: \"entity.spec.lifecycle\"\n    };\n  },\n  createMetadataDescriptionColumn() {\n    return {\n      title: \"Description\",\n      field: \"entity.metadata.description\",\n      render: ({ entity }) => /* @__PURE__ */ React.createElement(OverflowTooltip, {\n        text: entity.metadata.description,\n        placement: \"bottom-start\"\n      }),\n      width: \"auto\"\n    };\n  },\n  createTagsColumn() {\n    return {\n      title: \"Tags\",\n      field: \"entity.metadata.tags\",\n      cellStyle: {\n        padding: \"0px 16px 0px 20px\"\n      },\n      render: ({ entity }) => /* @__PURE__ */ React.createElement(React.Fragment, null, entity.metadata.tags && entity.metadata.tags.map((t) => /* @__PURE__ */ React.createElement(Chip, {\n        key: t,\n        label: t,\n        size: \"small\",\n        variant: \"outlined\",\n        style: { marginBottom: \"0px\" }\n      }))),\n      width: \"auto\"\n    };\n  },\n  createTitleColumn(options) {\n    return {\n      title: \"Title\",\n      field: \"entity.metadata.title\",\n      hidden: options == null ? void 0 : options.hidden,\n      searchable: true\n    };\n  },\n  createLabelColumn(key, options) {\n    return {\n      title: (options == null ? void 0 : options.title) || \"Label\",\n      field: \"entity.metadata.labels\",\n      cellStyle: {\n        padding: \"0px 16px 0px 20px\"\n      },\n      render: ({ entity }) => {\n        var _a;\n        const labels = (_a = entity.metadata) == null ? void 0 : _a.labels;\n        const specifiedLabelValue = labels && labels[key] || (options == null ? void 0 : options.defaultValue);\n        return /* @__PURE__ */ React.createElement(React.Fragment, null, specifiedLabelValue && /* @__PURE__ */ React.createElement(Chip, {\n          key: specifiedLabelValue,\n          label: specifiedLabelValue,\n          size: \"small\",\n          variant: \"outlined\"\n        }));\n      },\n      width: \"auto\"\n    };\n  }\n});\n\nconst YellowStar = withStyles({\n  root: {\n    color: \"#f3ba37\"\n  }\n})(Star);\nconst CatalogTable = (props) => {\n  var _a, _b, _c;\n  const { columns, actions, tableOptions, subtitle, emptyContent } = props;\n  const { isStarredEntity, toggleStarredEntity } = useStarredEntities();\n  const { loading, error, entities, filters } = useEntityList();\n  const defaultColumns = useMemo(() => {\n    var _a2;\n    return [\n      columnFactories.createTitleColumn({ hidden: true }),\n      columnFactories.createNameColumn({ defaultKind: (_a2 = filters.kind) == null ? void 0 : _a2.value }),\n      ...createEntitySpecificColumns(),\n      columnFactories.createMetadataDescriptionColumn(),\n      columnFactories.createTagsColumn()\n    ];\n    function createEntitySpecificColumns() {\n      var _a3;\n      switch ((_a3 = filters.kind) == null ? void 0 : _a3.value) {\n        case \"user\":\n          return [];\n        case \"domain\":\n        case \"system\":\n          return [columnFactories.createOwnerColumn()];\n        case \"group\":\n        case \"template\":\n          return [columnFactories.createSpecTypeColumn()];\n        case \"location\":\n          return [\n            columnFactories.createSpecTypeColumn(),\n            columnFactories.createSpecTargetsColumn()\n          ];\n        default:\n          return [\n            columnFactories.createSystemColumn(),\n            columnFactories.createOwnerColumn(),\n            columnFactories.createSpecTypeColumn(),\n            columnFactories.createSpecLifecycleColumn()\n          ];\n      }\n    }\n  }, [(_a = filters.kind) == null ? void 0 : _a.value]);\n  const showTypeColumn = filters.type === void 0;\n  const titlePreamble = capitalize$1((_c = (_b = filters.user) == null ? void 0 : _b.value) != null ? _c : \"all\");\n  if (error) {\n    return /* @__PURE__ */ React.createElement(\"div\", null, /* @__PURE__ */ React.createElement(WarningPanel, {\n      severity: \"error\",\n      title: \"Could not fetch catalog entities.\"\n    }, /* @__PURE__ */ React.createElement(CodeSnippet, {\n      language: \"text\",\n      text: error.toString()\n    })));\n  }\n  const defaultActions = [\n    ({ entity }) => {\n      var _a2;\n      const url = (_a2 = entity.metadata.annotations) == null ? void 0 : _a2[ANNOTATION_VIEW_URL];\n      const title = \"View\";\n      return {\n        icon: () => /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(Typography, {\n          variant: \"srOnly\"\n        }, title), /* @__PURE__ */ React.createElement(OpenInNew, {\n          fontSize: \"small\"\n        })),\n        tooltip: title,\n        disabled: !url,\n        onClick: () => {\n          if (!url)\n            return;\n          window.open(url, \"_blank\");\n        }\n      };\n    },\n    ({ entity }) => {\n      var _a2;\n      const url = (_a2 = entity.metadata.annotations) == null ? void 0 : _a2[ANNOTATION_EDIT_URL];\n      const title = \"Edit\";\n      return {\n        icon: () => /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(Typography, {\n          variant: \"srOnly\"\n        }, title), /* @__PURE__ */ React.createElement(EditIcon, {\n          fontSize: \"small\"\n        })),\n        tooltip: title,\n        disabled: !url,\n        onClick: () => {\n          if (!url)\n            return;\n          window.open(url, \"_blank\");\n        }\n      };\n    },\n    ({ entity }) => {\n      const isStarred = isStarredEntity(entity);\n      const title = isStarred ? \"Remove from favorites\" : \"Add to favorites\";\n      return {\n        cellStyle: { paddingLeft: \"1em\" },\n        icon: () => /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(Typography, {\n          variant: \"srOnly\"\n        }, title), isStarred ? /* @__PURE__ */ React.createElement(YellowStar, null) : /* @__PURE__ */ React.createElement(StarBorder, null)),\n        tooltip: title,\n        onClick: () => toggleStarredEntity(entity)\n      };\n    }\n  ];\n  const rows = entities.map((entity) => {\n    const partOfSystemRelations = getEntityRelations(entity, RELATION_PART_OF, {\n      kind: \"system\"\n    });\n    const ownedByRelations = getEntityRelations(entity, RELATION_OWNED_BY);\n    return {\n      entity,\n      resolved: {\n        name: humanizeEntityRef(entity, {\n          defaultKind: \"Component\"\n        }),\n        ownedByRelationsTitle: ownedByRelations.map((r) => humanizeEntityRef(r, { defaultKind: \"group\" })).join(\", \"),\n        ownedByRelations,\n        partOfSystemRelationTitle: partOfSystemRelations.map(\n          (r) => humanizeEntityRef(r, {\n            defaultKind: \"system\"\n          })\n        ).join(\", \"),\n        partOfSystemRelations\n      }\n    };\n  });\n  const typeColumn = (columns || defaultColumns).find((c) => c.title === \"Type\");\n  if (typeColumn) {\n    typeColumn.hidden = !showTypeColumn;\n  }\n  const showPagination = rows.length > 20;\n  return /* @__PURE__ */ React.createElement(Table, {\n    isLoading: loading,\n    columns: columns || defaultColumns,\n    options: {\n      paging: showPagination,\n      pageSize: 20,\n      actionsColumnIndex: -1,\n      loadingType: \"linear\",\n      showEmptyDataSourceMessage: !loading,\n      padding: \"dense\",\n      pageSizeOptions: [20, 50, 100],\n      ...tableOptions\n    },\n    title: `${titlePreamble} (${entities.length})`,\n    data: rows,\n    actions: actions || defaultActions,\n    subtitle,\n    emptyContent\n  });\n};\nCatalogTable.columns = columnFactories;\n\nfunction UnregisterEntity(props) {\n  var _a;\n  const {\n    unregisterEntityOptions,\n    isUnregisterAllowed,\n    onUnregisterEntity,\n    onClose\n  } = props;\n  const isBoolean = typeof (unregisterEntityOptions == null ? void 0 : unregisterEntityOptions.disableUnregister) === \"boolean\";\n  const isDisabled = (_a = !isUnregisterAllowed || (isBoolean ? !!(unregisterEntityOptions == null ? void 0 : unregisterEntityOptions.disableUnregister) : (unregisterEntityOptions == null ? void 0 : unregisterEntityOptions.disableUnregister) === \"disable\")) != null ? _a : false;\n  let unregisterButton = /* @__PURE__ */ React.createElement(React.Fragment, null);\n  if ((unregisterEntityOptions == null ? void 0 : unregisterEntityOptions.disableUnregister) !== \"hidden\") {\n    unregisterButton = /* @__PURE__ */ React.createElement(MenuItem, {\n      onClick: () => {\n        onClose();\n        onUnregisterEntity();\n      },\n      disabled: isDisabled\n    }, /* @__PURE__ */ React.createElement(ListItemIcon, null, /* @__PURE__ */ React.createElement(CancelIcon, {\n      fontSize: \"small\"\n    })), /* @__PURE__ */ React.createElement(ListItemText, {\n      primary: \"Unregister entity\"\n    }));\n  }\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, unregisterButton);\n}\n\nconst useStyles = makeStyles$1(\n  (theme) => {\n    return {\n      button: {\n        color: theme.page.fontColor\n      }\n    };\n  },\n  { name: \"PluginCatalogEntityContextMenu\" }\n);\nfunction EntityContextMenu(props) {\n  const {\n    UNSTABLE_extraContextMenuItems,\n    UNSTABLE_contextMenuOptions,\n    onUnregisterEntity,\n    onInspectEntity\n  } = props;\n  const [anchorEl, setAnchorEl] = useState();\n  const classes = useStyles();\n  const unregisterPermission = useEntityPermission(\n    catalogEntityDeletePermission\n  );\n  const isAllowed = unregisterPermission.allowed;\n  const onOpen = (event) => {\n    setAnchorEl(event.currentTarget);\n  };\n  const onClose = () => {\n    setAnchorEl(void 0);\n  };\n  const alertApi = useApi(alertApiRef);\n  const copyToClipboard = useCallback(() => {\n    navigator.clipboard.writeText(window.location.toString()).then(() => alertApi.post({ message: \"Copied!\", severity: \"info\" }));\n  }, [alertApi]);\n  const extraItems = UNSTABLE_extraContextMenuItems && [\n    ...UNSTABLE_extraContextMenuItems.map((item) => /* @__PURE__ */ React.createElement(MenuItem, {\n      key: item.title,\n      onClick: () => {\n        onClose();\n        item.onClick();\n      }\n    }, /* @__PURE__ */ React.createElement(ListItemIcon, null, /* @__PURE__ */ React.createElement(item.Icon, {\n      fontSize: \"small\"\n    })), /* @__PURE__ */ React.createElement(ListItemText, {\n      primary: item.title\n    }))),\n    /* @__PURE__ */ React.createElement(Divider, {\n      key: \"the divider is here!\"\n    })\n  ];\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(IconButton, {\n    \"aria-label\": \"more\",\n    \"aria-controls\": \"long-menu\",\n    \"aria-haspopup\": \"true\",\n    \"aria-expanded\": !!anchorEl,\n    role: \"button\",\n    onClick: onOpen,\n    \"data-testid\": \"menu-button\",\n    className: classes.button,\n    id: \"long-menu\"\n  }, /* @__PURE__ */ React.createElement(MoreVert, null)), /* @__PURE__ */ React.createElement(Popover, {\n    open: Boolean(anchorEl),\n    onClose,\n    anchorEl,\n    anchorOrigin: { vertical: \"bottom\", horizontal: \"right\" },\n    transformOrigin: { vertical: \"top\", horizontal: \"right\" },\n    \"aria-labelledby\": \"long-menu\"\n  }, /* @__PURE__ */ React.createElement(MenuList, null, extraItems, /* @__PURE__ */ React.createElement(UnregisterEntity, {\n    unregisterEntityOptions: UNSTABLE_contextMenuOptions,\n    isUnregisterAllowed: isAllowed,\n    onUnregisterEntity,\n    onClose\n  }), /* @__PURE__ */ React.createElement(MenuItem, {\n    onClick: () => {\n      onClose();\n      onInspectEntity();\n    }\n  }, /* @__PURE__ */ React.createElement(ListItemIcon, null, /* @__PURE__ */ React.createElement(BugReportIcon, {\n    fontSize: \"small\"\n  })), /* @__PURE__ */ React.createElement(ListItemText, {\n    primary: \"Inspect entity\"\n  })), /* @__PURE__ */ React.createElement(MenuItem, {\n    onClick: () => {\n      onClose();\n      copyToClipboard();\n    }\n  }, /* @__PURE__ */ React.createElement(ListItemIcon, null, /* @__PURE__ */ React.createElement(FileCopyTwoToneIcon, {\n    fontSize: \"small\"\n  })), /* @__PURE__ */ React.createElement(ListItemText, {\n    primary: \"Copy entity URL\"\n  })))));\n}\n\nconst dataKey = \"plugin.catalog.entityLayoutRoute\";\nconst Route = () => null;\nattachComponentData(Route, dataKey, true);\nattachComponentData(Route, \"core.gatherMountPoints\", true);\nfunction EntityLayoutTitle(props) {\n  const { entity, title } = props;\n  return /* @__PURE__ */ React.createElement(Box, {\n    display: \"inline-flex\",\n    alignItems: \"center\",\n    height: \"1em\",\n    maxWidth: \"100%\"\n  }, /* @__PURE__ */ React.createElement(Box, {\n    component: \"span\",\n    textOverflow: \"ellipsis\",\n    whiteSpace: \"nowrap\",\n    overflow: \"hidden\"\n  }, title), entity && /* @__PURE__ */ React.createElement(FavoriteEntity, {\n    entity\n  }));\n}\nfunction headerProps(paramKind, paramNamespace, paramName, entity) {\n  var _a, _b, _c, _d, _e;\n  const kind = (_a = paramKind != null ? paramKind : entity == null ? void 0 : entity.kind) != null ? _a : \"\";\n  const namespace = (_b = paramNamespace != null ? paramNamespace : entity == null ? void 0 : entity.metadata.namespace) != null ? _b : \"\";\n  const name = (_e = (_d = (_c = entity == null ? void 0 : entity.metadata.title) != null ? _c : paramName) != null ? _d : entity == null ? void 0 : entity.metadata.name) != null ? _e : \"\";\n  return {\n    headerTitle: `${name}${namespace && namespace !== DEFAULT_NAMESPACE ? ` in ${namespace}` : \"\"}`,\n    headerType: (() => {\n      let t = kind.toLocaleLowerCase(\"en-US\");\n      if (entity && entity.spec && \"type\" in entity.spec) {\n        t += \" \\u2014 \";\n        t += entity.spec.type.toLocaleLowerCase(\"en-US\");\n      }\n      return t;\n    })()\n  };\n}\nfunction EntityLabels(props) {\n  var _a;\n  const { entity } = props;\n  const ownedByRelations = getEntityRelations(entity, RELATION_OWNED_BY);\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, ownedByRelations.length > 0 && /* @__PURE__ */ React.createElement(HeaderLabel, {\n    label: \"Owner\",\n    value: /* @__PURE__ */ React.createElement(EntityRefLinks, {\n      entityRefs: ownedByRelations,\n      defaultKind: \"Group\",\n      color: \"inherit\"\n    })\n  }), ((_a = entity.spec) == null ? void 0 : _a.lifecycle) && /* @__PURE__ */ React.createElement(HeaderLabel, {\n    label: \"Lifecycle\",\n    value: entity.spec.lifecycle\n  }));\n}\nconst EntityLayout = (props) => {\n  var _a, _b, _c;\n  const {\n    UNSTABLE_extraContextMenuItems,\n    UNSTABLE_contextMenuOptions,\n    children,\n    NotFoundComponent\n  } = props;\n  const { kind, namespace, name } = useRouteRefParams(entityRouteRef);\n  const { entity, loading, error } = useAsyncEntity();\n  const location = useLocation();\n  const routes = useElementFilter(\n    children,\n    (elements) => elements.selectByComponentData({\n      key: dataKey,\n      withStrictError: \"Child of EntityLayout must be an EntityLayout.Route\"\n    }).getElements().flatMap(({ props: elementProps }) => {\n      if (!entity) {\n        return [];\n      } else if (elementProps.if && !elementProps.if(entity)) {\n        return [];\n      }\n      return [\n        {\n          path: elementProps.path,\n          title: elementProps.title,\n          children: elementProps.children,\n          tabProps: elementProps.tabProps\n        }\n      ];\n    }),\n    [entity]\n  );\n  const { headerTitle, headerType } = headerProps(\n    kind,\n    namespace,\n    name,\n    entity\n  );\n  const [confirmationDialogOpen, setConfirmationDialogOpen] = useState(false);\n  const [inspectionDialogOpen, setInspectionDialogOpen] = useState(false);\n  const navigate = useNavigate();\n  const cleanUpAfterRemoval = async () => {\n    setConfirmationDialogOpen(false);\n    setInspectionDialogOpen(false);\n    navigate(\"/\");\n  };\n  useEffect(() => {\n    setConfirmationDialogOpen(false);\n    setInspectionDialogOpen(false);\n  }, [location.pathname]);\n  return /* @__PURE__ */ React.createElement(Page, {\n    themeId: (_c = (_b = (_a = entity == null ? void 0 : entity.spec) == null ? void 0 : _a.type) == null ? void 0 : _b.toString()) != null ? _c : \"home\"\n  }, /* @__PURE__ */ React.createElement(Header, {\n    title: /* @__PURE__ */ React.createElement(EntityLayoutTitle, {\n      title: headerTitle,\n      entity\n    }),\n    pageTitleOverride: headerTitle,\n    type: headerType\n  }, entity && /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(EntityLabels, {\n    entity\n  }), /* @__PURE__ */ React.createElement(EntityContextMenu, {\n    UNSTABLE_extraContextMenuItems,\n    UNSTABLE_contextMenuOptions,\n    onUnregisterEntity: () => setConfirmationDialogOpen(true),\n    onInspectEntity: () => setInspectionDialogOpen(true)\n  }))), loading && /* @__PURE__ */ React.createElement(Progress, null), entity && /* @__PURE__ */ React.createElement(RoutedTabs, {\n    routes\n  }), error && /* @__PURE__ */ React.createElement(Content, null, /* @__PURE__ */ React.createElement(Alert, {\n    severity: \"error\"\n  }, error.toString())), !loading && !error && !entity && /* @__PURE__ */ React.createElement(Content, null, NotFoundComponent ? NotFoundComponent : /* @__PURE__ */ React.createElement(WarningPanel, {\n    title: \"Entity not found\"\n  }, \"There is no \", kind, \" with the requested\", \" \", /* @__PURE__ */ React.createElement(Link, {\n    to: \"https://backstage.io/docs/features/software-catalog/references\"\n  }, \"kind, namespace, and name\"), \".\")), /* @__PURE__ */ React.createElement(UnregisterEntityDialog, {\n    open: confirmationDialogOpen,\n    entity,\n    onConfirm: cleanUpAfterRemoval,\n    onClose: () => setConfirmationDialogOpen(false)\n  }), /* @__PURE__ */ React.createElement(InspectEntityDialog, {\n    open: inspectionDialogOpen,\n    entity,\n    onClose: () => setInspectionDialogOpen(false)\n  }));\n};\nEntityLayout.Route = Route;\n\nfunction DeleteEntityDialog(props) {\n  const { open, onClose, onConfirm, entity } = props;\n  const [busy, setBusy] = useState(false);\n  const catalogApi = useApi(catalogApiRef);\n  const alertApi = useApi(alertApiRef);\n  const onDelete = async () => {\n    setBusy(true);\n    try {\n      const uid = entity.metadata.uid;\n      await catalogApi.removeEntityByUid(uid);\n      onConfirm();\n    } catch (err) {\n      assertError(err);\n      alertApi.post({ message: err.message });\n    } finally {\n      setBusy(false);\n    }\n  };\n  return /* @__PURE__ */ React.createElement(Dialog, {\n    open,\n    onClose\n  }, /* @__PURE__ */ React.createElement(DialogTitle, {\n    id: \"responsive-dialog-title\"\n  }, \"Are you sure you want to delete this entity?\"), /* @__PURE__ */ React.createElement(DialogActions, null, /* @__PURE__ */ React.createElement(Button, {\n    variant: \"contained\",\n    color: \"secondary\",\n    disabled: busy,\n    onClick: onDelete\n  }, \"Delete\"), /* @__PURE__ */ React.createElement(Button, {\n    onClick: onClose,\n    color: \"primary\"\n  }, \"Cancel\")));\n}\n\nfunction isOrphan(entity) {\n  var _a, _b;\n  return ((_b = (_a = entity == null ? void 0 : entity.metadata) == null ? void 0 : _a.annotations) == null ? void 0 : _b[\"backstage.io/orphan\"]) === \"true\";\n}\nfunction EntityOrphanWarning() {\n  const navigate = useNavigate();\n  const catalogLink = useRouteRef(rootRouteRef);\n  const [confirmationDialogOpen, setConfirmationDialogOpen] = useState(false);\n  const { entity } = useEntity();\n  const cleanUpAfterRemoval = async () => {\n    setConfirmationDialogOpen(false);\n    navigate(catalogLink());\n  };\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(Alert, {\n    severity: \"warning\",\n    onClick: () => setConfirmationDialogOpen(true)\n  }, \"This entity is not referenced by any location and is therefore not receiving updates. Click here to delete.\"), /* @__PURE__ */ React.createElement(DeleteEntityDialog, {\n    open: confirmationDialogOpen,\n    entity,\n    onConfirm: cleanUpAfterRemoval,\n    onClose: () => setConfirmationDialogOpen(false)\n  }));\n}\n\nconst errorFilter = (i) => i.error && i.level === \"error\" && i.type === ENTITY_STATUS_CATALOG_PROCESSING_TYPE;\nasync function getOwnAndAncestorsErrors(entityRef, catalogApi) {\n  const ancestors = await catalogApi.getEntityAncestors({ entityRef });\n  const items = ancestors.items.map((item) => {\n    var _a, _b;\n    const statuses = (_b = (_a = item.entity.status) == null ? void 0 : _a.items) != null ? _b : [];\n    const errors = statuses.filter(errorFilter).map((e) => e.error).filter((e) => Boolean(e));\n    return { errors, entity: item.entity };\n  }).filter((item) => item.errors.length > 0);\n  return { items };\n}\nasync function hasCatalogProcessingErrors(entity, context) {\n  const catalogApi = context.apis.get(catalogApiRef);\n  if (!catalogApi) {\n    throw new Error(`No implementation available for ${catalogApiRef}`);\n  }\n  const errors = await getOwnAndAncestorsErrors(\n    stringifyEntityRef(entity),\n    catalogApi\n  );\n  return errors.items.length > 0;\n}\nfunction EntityProcessingErrorsPanel() {\n  const { entity } = useEntity();\n  const entityRef = stringifyEntityRef(entity);\n  const catalogApi = useApi(catalogApiRef);\n  const { loading, error, value } = useAsync(async () => {\n    return getOwnAndAncestorsErrors(entityRef, catalogApi);\n  }, [entityRef, catalogApi]);\n  if (error) {\n    return /* @__PURE__ */ React.createElement(Box, {\n      mb: 1\n    }, /* @__PURE__ */ React.createElement(ResponseErrorPanel, {\n      error\n    }));\n  }\n  if (loading || !value) {\n    return null;\n  }\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, value.items.map((ancestorError, index) => /* @__PURE__ */ React.createElement(Box, {\n    key: index,\n    mb: 1\n  }, stringifyEntityRef(entity) !== stringifyEntityRef(ancestorError.entity) && /* @__PURE__ */ React.createElement(Box, {\n    p: 1\n  }, \"The error below originates from\", \" \", /* @__PURE__ */ React.createElement(EntityRefLink, {\n    entityRef: ancestorError.entity\n  })), ancestorError.errors.map((e, i) => /* @__PURE__ */ React.createElement(ResponseErrorPanel, {\n    key: i,\n    error: e\n  })))));\n}\n\nconst ENTITY_SWITCH_KEY = \"core.backstage.entitySwitch\";\nconst EntitySwitchCaseComponent = (_props) => null;\nattachComponentData(EntitySwitchCaseComponent, ENTITY_SWITCH_KEY, true);\nconst EntitySwitch = (props) => {\n  var _a, _b;\n  const { entity, loading } = useAsyncEntity();\n  const apis = useApiHolder();\n  const results = useElementFilter(\n    props.children,\n    (collection) => collection.selectByComponentData({\n      key: ENTITY_SWITCH_KEY,\n      withStrictError: \"Child of EntitySwitch is not an EntitySwitch.Case\"\n    }).getElements().flatMap((element) => {\n      var _a2;\n      if (loading) {\n        return [];\n      }\n      const { if: condition, children: elementsChildren } = element.props;\n      if (!entity) {\n        return [\n          {\n            if: condition === void 0,\n            children: elementsChildren\n          }\n        ];\n      }\n      return [\n        {\n          if: (_a2 = condition == null ? void 0 : condition(entity, { apis })) != null ? _a2 : true,\n          children: elementsChildren\n        }\n      ];\n    }),\n    [apis, entity, loading]\n  );\n  const hasAsyncCases = results.some(\n    (r) => typeof r.if === \"object\" && \"then\" in r.if\n  );\n  if (hasAsyncCases) {\n    return /* @__PURE__ */ React.createElement(AsyncEntitySwitch, {\n      results\n    });\n  }\n  return (_b = (_a = results.find((r) => r.if)) == null ? void 0 : _a.children) != null ? _b : null;\n};\nfunction AsyncEntitySwitch({ results }) {\n  const { loading, value } = useAsync(async () => {\n    var _a;\n    const promises = results.map(\n      async ({ if: condition, children: output }) => {\n        try {\n          if (await condition) {\n            return output;\n          }\n        } catch {\n        }\n        return null;\n      }\n    );\n    return (_a = (await Promise.all(promises)).find(Boolean)) != null ? _a : null;\n  }, [results]);\n  if (loading || !value) {\n    return null;\n  }\n  return value;\n}\nEntitySwitch.Case = EntitySwitchCaseComponent;\n\nfunction strCmp(a, b) {\n  return Boolean(\n    a && (a == null ? void 0 : a.toLocaleLowerCase(\"en-US\")) === (b == null ? void 0 : b.toLocaleLowerCase(\"en-US\"))\n  );\n}\nfunction strCmpAll(value, cmpValues) {\n  return typeof cmpValues === \"string\" ? strCmp(value, cmpValues) : cmpValues.some((cmpVal) => strCmp(value, cmpVal));\n}\nfunction isKind(kinds) {\n  return (entity) => strCmpAll(entity.kind, kinds);\n}\nfunction isComponentType(types) {\n  return (entity) => {\n    if (!strCmp(entity.kind, \"component\")) {\n      return false;\n    }\n    const componentEntity = entity;\n    return strCmpAll(componentEntity.spec.type, types);\n  };\n}\nfunction isNamespace(namespaces) {\n  return (entity) => {\n    var _a;\n    return strCmpAll((_a = entity.metadata) == null ? void 0 : _a.namespace, namespaces);\n  };\n}\n\nconst FilteredEntityLayout = CatalogFilterLayout;\nconst FilterContainer = CatalogFilterLayout.Filters;\nconst EntityListContainer = CatalogFilterLayout.Content;\n\nconst catalogPlugin = createPlugin({\n  id: \"catalog\",\n  apis: [\n    createApiFactory({\n      api: catalogApiRef,\n      deps: {\n        discoveryApi: discoveryApiRef,\n        fetchApi: fetchApiRef\n      },\n      factory: ({ discoveryApi, fetchApi }) => new CatalogClient({ discoveryApi, fetchApi })\n    }),\n    createApiFactory({\n      api: starredEntitiesApiRef,\n      deps: { storageApi: storageApiRef },\n      factory: ({ storageApi }) => new DefaultStarredEntitiesApi({ storageApi })\n    })\n  ],\n  routes: {\n    catalogIndex: rootRouteRef,\n    catalogEntity: entityRouteRef\n  },\n  externalRoutes: {\n    createComponent: createComponentRouteRef,\n    viewTechDoc: viewTechDocRouteRef\n  },\n  __experimentalConfigure(options) {\n    const defaultOptions = {\n      createButtonTitle: \"Create\"\n    };\n    return { ...defaultOptions, ...options };\n  }\n});\nconst CatalogIndexPage = catalogPlugin.provide(\n  createRoutableExtension({\n    name: \"CatalogIndexPage\",\n    component: () => import('./index-d0312962.esm.js').then((m) => m.CatalogPage),\n    mountPoint: rootRouteRef\n  })\n);\nconst CatalogEntityPage = catalogPlugin.provide(\n  createRoutableExtension({\n    name: \"CatalogEntityPage\",\n    component: () => import('./index-46417657.esm.js').then((m) => m.CatalogEntityPage),\n    mountPoint: entityRouteRef\n  })\n);\nconst EntityAboutCard = catalogPlugin.provide(\n  createComponentExtension({\n    name: \"EntityAboutCard\",\n    component: {\n      lazy: () => import('./index-0b991da4.esm.js').then((m) => m.AboutCard)\n    }\n  })\n);\nconst EntityLinksCard = catalogPlugin.provide(\n  createComponentExtension({\n    name: \"EntityLinksCard\",\n    component: {\n      lazy: () => import('./index-cb20ec68.esm.js').then((m) => m.EntityLinksCard)\n    }\n  })\n);\nconst EntityHasSystemsCard = catalogPlugin.provide(\n  createComponentExtension({\n    name: \"EntityHasSystemsCard\",\n    component: {\n      lazy: () => import('./index-3763491b.esm.js').then((m) => m.HasSystemsCard)\n    }\n  })\n);\nconst EntityHasComponentsCard = catalogPlugin.provide(\n  createComponentExtension({\n    name: \"EntityHasComponentsCard\",\n    component: {\n      lazy: () => import('./index-acb3cf04.esm.js').then((m) => m.HasComponentsCard)\n    }\n  })\n);\nconst EntityHasSubcomponentsCard = catalogPlugin.provide(\n  createComponentExtension({\n    name: \"EntityHasSubcomponentsCard\",\n    component: {\n      lazy: () => import('./index-41ab53b6.esm.js').then(\n        (m) => m.HasSubcomponentsCard\n      )\n    }\n  })\n);\nconst EntityHasResourcesCard = catalogPlugin.provide(\n  createComponentExtension({\n    name: \"EntityHasResourcesCard\",\n    component: {\n      lazy: () => import('./index-b3ad464b.esm.js').then((m) => m.HasResourcesCard)\n    }\n  })\n);\nconst EntityDependsOnComponentsCard = catalogPlugin.provide(\n  createComponentExtension({\n    name: \"EntityDependsOnComponentsCard\",\n    component: {\n      lazy: () => import('./index-66fdb6ad.esm.js').then(\n        (m) => m.DependsOnComponentsCard\n      )\n    }\n  })\n);\nconst EntityDependencyOfComponentsCard = catalogPlugin.provide(\n  createComponentExtension({\n    name: \"EntityDependencyOfComponentsCard\",\n    component: {\n      lazy: () => import('./index-390fab14.esm.js').then(\n        (m) => m.DependencyOfComponentsCard\n      )\n    }\n  })\n);\nconst EntityDependsOnResourcesCard = catalogPlugin.provide(\n  createComponentExtension({\n    name: \"EntityDependsOnResourcesCard\",\n    component: {\n      lazy: () => import('./index-d41abbff.esm.js').then(\n        (m) => m.DependsOnResourcesCard\n      )\n    }\n  })\n);\nconst RelatedEntitiesCard = catalogPlugin.provide(\n  createComponentExtension({\n    name: \"RelatedEntitiesCard\",\n    component: {\n      lazy: () => import('./index-c2914273.esm.js').then(\n        (m) => m.RelatedEntitiesCard\n      )\n    }\n  })\n);\n\nexport { AboutCard as A, EntityListContainer as B, CatalogKindHeader as C, DefaultStarredEntitiesApi as D, EntityAboutCard as E, FilteredEntityLayout as F, LinksGridList as L, RelatedEntitiesCard as R, CatalogTable as a, AboutContent as b, createComponentRouteRef as c, AboutField as d, CatalogEntityPage as e, CatalogIndexPage as f, catalogPlugin as g, EntityDependencyOfComponentsCard as h, EntityDependsOnComponentsCard as i, EntityDependsOnResourcesCard as j, EntityHasComponentsCard as k, EntityHasResourcesCard as l, EntityHasSubcomponentsCard as m, EntityHasSystemsCard as n, EntityLinksCard as o, CatalogSearchResultListItem as p, EntityLayout as q, EntityOrphanWarning as r, isOrphan as s, EntityProcessingErrorsPanel as t, hasCatalogProcessingErrors as u, EntitySwitch as v, isKind as w, isNamespace as x, isComponentType as y, FilterContainer as z };\n//# sourceMappingURL=index-84e3a83e.esm.js.map\n","import { postBuildActions, BuildAction, getBuildSummaries, getMe, getFullBuild, GitType } from 'circleci-api';\nimport { createApiRef, createRouteRef, createSubRouteRef, createPlugin, createApiFactory, discoveryApiRef, createRoutableExtension, useApi, errorApiRef, useRouteRef } from '@backstage/core-plugin-api';\nimport React, { useState, useEffect, useRef, useCallback, useMemo } from 'react';\nimport { Routes, Route } from 'react-router';\nimport { useParams, Link as Link$1 } from 'react-router-dom';\nimport { Accordion, AccordionSummary, Typography, AccordionDetails, Box, Grid, IconButton, makeStyles as makeStyles$1, Avatar } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { LogViewer, Breadcrumbs, Link, InfoCard, Progress, Table, StatusWarning, StatusOK, StatusError, StatusRunning, StatusPending, MissingAnnotationEmptyState } from '@backstage/core-components';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport { DateTime, Interval } from 'luxon';\nimport humanizeDuration from 'humanize-duration';\nimport LaunchIcon from '@material-ui/icons/Launch';\nimport useAsyncRetry from 'react-use/lib/useAsyncRetry';\nimport { useEntity } from '@backstage/plugin-catalog-react';\nimport { getOr } from 'lodash/fp';\nimport RetryIcon from '@material-ui/icons/Replay';\nimport GitHubIcon from '@material-ui/icons/GitHub';\n\nconst circleCIApiRef = createApiRef({\n  id: \"plugin.circleci.service\"\n});\nconst DEFAULT_PROXY_PATH = \"/circleci/api\";\nclass CircleCIApi {\n  constructor(options) {\n    var _a;\n    this.discoveryApi = options.discoveryApi;\n    this.proxyPath = (_a = options.proxyPath) != null ? _a : DEFAULT_PROXY_PATH;\n  }\n  async retry(buildNumber, options) {\n    return postBuildActions(\"\", buildNumber, BuildAction.RETRY, {\n      circleHost: await this.getApiUrl(),\n      ...options.vcs\n    });\n  }\n  async getBuilds(pagination, options) {\n    const { limit = 10, offset = 0 } = pagination;\n    return getBuildSummaries(\"\", {\n      options: {\n        limit,\n        offset\n      },\n      vcs: {},\n      circleHost: await this.getApiUrl(),\n      ...options\n    });\n  }\n  async getUser(options) {\n    return getMe(\"\", { circleHost: await this.getApiUrl(), ...options });\n  }\n  async getBuild(buildNumber, options) {\n    return getFullBuild(\"\", buildNumber, {\n      circleHost: await this.getApiUrl(),\n      ...options.vcs\n    });\n  }\n  async getApiUrl() {\n    const proxyUrl = await this.discoveryApi.getBaseUrl(\"proxy\");\n    return proxyUrl + this.proxyPath;\n  }\n}\n\nconst circleCIRouteRef = createRouteRef({\n  id: \"circle-ci\"\n});\nconst circleCIBuildRouteRef = createSubRouteRef({\n  id: \"circle-ci/build\",\n  parent: circleCIRouteRef,\n  path: \"/:buildId\"\n});\n\nconst circleCIPlugin = createPlugin({\n  id: \"circleci\",\n  apis: [\n    createApiFactory({\n      api: circleCIApiRef,\n      deps: { discoveryApi: discoveryApiRef },\n      factory: ({ discoveryApi }) => new CircleCIApi({ discoveryApi })\n    })\n  ]\n});\nconst EntityCircleCIContent = circleCIPlugin.provide(\n  createRoutableExtension({\n    name: \"EntityCircleCIContent\",\n    component: () => Promise.resolve().then(function () { return Router$1; }).then((m) => m.Router),\n    mountPoint: circleCIRouteRef\n  })\n);\n\nfunction relativeTimeTo(dateTimeISOString) {\n  return dateTimeISOString ? DateTime.fromISO(dateTimeISOString).toRelative() : \"\";\n}\nfunction durationHumanized(startDateTimeISOString, endDateTimeISOString) {\n  if (!startDateTimeISOString || !endDateTimeISOString) {\n    return \"\";\n  }\n  const startDateTime = DateTime.fromISO(startDateTimeISOString);\n  const endDateTime = DateTime.fromISO(endDateTimeISOString);\n  const duration = Interval.fromDateTimes(\n    startDateTime,\n    endDateTime\n  ).toDuration();\n  return humanizeDuration(duration.as(\"milliseconds\"), {\n    largest: 1\n  });\n}\n\nconst useStyles$2 = makeStyles({\n  accordionDetails: {\n    padding: 0\n  },\n  button: {\n    order: -1,\n    marginRight: 0,\n    marginLeft: \"-20px\"\n  }\n});\nconst ActionOutput = ({\n  url,\n  name,\n  className,\n  action\n}) => {\n  const classes = useStyles$2();\n  const [messages, setMessages] = useState([]);\n  useEffect(() => {\n    fetch(url).then((res) => res.json()).then((actionOutput) => {\n      if (typeof actionOutput !== \"undefined\") {\n        setMessages(\n          actionOutput.map(({ message }) => message)\n        );\n      }\n    });\n  }, [url]);\n  const timeElapsed = durationHumanized(action.start_time, action.end_time);\n  return /* @__PURE__ */ React.createElement(Accordion, {\n    TransitionProps: { unmountOnExit: true },\n    className\n  }, /* @__PURE__ */ React.createElement(AccordionSummary, {\n    expandIcon: /* @__PURE__ */ React.createElement(ExpandMoreIcon, null),\n    \"aria-controls\": `panel-${name}-content`,\n    id: `panel-${name}-header`,\n    IconButtonProps: {\n      className: classes.button\n    }\n  }, /* @__PURE__ */ React.createElement(Typography, {\n    variant: \"button\"\n  }, name, \" (\", timeElapsed, \")\")), /* @__PURE__ */ React.createElement(AccordionDetails, {\n    className: classes.accordionDetails\n  }, messages.length === 0 ? \"Nothing here...\" : /* @__PURE__ */ React.createElement(\"div\", {\n    style: { height: \"20vh\", width: \"100%\" }\n  }, /* @__PURE__ */ React.createElement(LogViewer, {\n    text: messages.join(\"\\n\")\n  }))));\n};\n\nconst useAsyncPolling = (pollingFn, interval) => {\n  const isPolling = useRef(false);\n  const startPolling = async () => {\n    if (isPolling.current === true)\n      return;\n    isPolling.current = true;\n    while (isPolling.current === true) {\n      await pollingFn();\n      await new Promise((resolve) => setTimeout(resolve, interval));\n    }\n  };\n  const stopPolling = () => {\n    isPolling.current = false;\n  };\n  return { startPolling, stopPolling };\n};\n\nconst CIRCLECI_ANNOTATION = \"circleci.com/project-slug\";\n\nconst makeReadableStatus = (status) => {\n  if (!status)\n    return \"\";\n  return {\n    retried: \"Retried\",\n    canceled: \"Canceled\",\n    infrastructure_fail: \"Infra fail\",\n    timedout: \"Timedout\",\n    not_run: \"Not run\",\n    running: \"Running\",\n    failed: \"Failed\",\n    queued: \"Queued\",\n    scheduled: \"Scheduled\",\n    not_running: \"Not running\",\n    no_tests: \"No tests\",\n    fixed: \"Fixed\",\n    success: \"Success\"\n  }[status];\n};\nconst mapWorkflowDetails = (buildData) => {\n  const { workflows } = buildData != null ? buildData : {};\n  return {\n    id: workflows == null ? void 0 : workflows.workflow_id,\n    url: `${buildData.build_url}/workflows/${workflows == null ? void 0 : workflows.workflow_id}`,\n    jobName: workflows == null ? void 0 : workflows.job_name,\n    name: workflows == null ? void 0 : workflows.workflow_name\n  };\n};\nconst mapSourceDetails = (buildData) => {\n  const commitDetails = getOr({}, \"all_commit_details[0]\", buildData);\n  return {\n    branchName: String(buildData.branch),\n    commit: {\n      hash: String(buildData.vcs_revision),\n      shortHash: String(buildData.vcs_revision).substr(0, 7),\n      committerName: buildData.committer_name,\n      url: commitDetails.commit_url\n    }\n  };\n};\nconst mapUser = (buildData) => {\n  var _a, _b, _c, _d;\n  return {\n    isUser: ((_a = buildData == null ? void 0 : buildData.user) == null ? void 0 : _a.is_user) || false,\n    login: ((_b = buildData == null ? void 0 : buildData.user) == null ? void 0 : _b.login) || \"none\",\n    name: (_c = buildData == null ? void 0 : buildData.user) == null ? void 0 : _c.name,\n    avatarUrl: (_d = buildData == null ? void 0 : buildData.user) == null ? void 0 : _d.avatar_url\n  };\n};\nconst transform = (buildsData, restartBuild) => {\n  return buildsData.map((buildData) => {\n    const tableBuildInfo = {\n      id: String(buildData.build_num),\n      buildName: buildData.subject ? buildData.subject + (buildData.retry_of ? ` (retry of #${buildData.retry_of})` : \"\") : \"\",\n      startTime: buildData.start_time,\n      stopTime: buildData.stop_time,\n      onRestartClick: () => typeof buildData.build_num !== \"undefined\" && restartBuild(buildData.build_num),\n      source: mapSourceDetails(buildData),\n      workflow: mapWorkflowDetails(buildData),\n      user: mapUser(buildData),\n      status: makeReadableStatus(buildData.status),\n      buildUrl: buildData.build_url\n    };\n    return tableBuildInfo;\n  });\n};\nconst useProjectSlugFromEntity = () => {\n  var _a, _b;\n  const { entity } = useEntity();\n  const [vcs, owner, repo] = ((_b = (_a = entity.metadata.annotations) == null ? void 0 : _a[CIRCLECI_ANNOTATION]) != null ? _b : \"\").split(\"/\");\n  return { vcs, owner, repo };\n};\nfunction mapVcsType(vcs) {\n  switch (vcs) {\n    case \"gh\":\n    case \"github\":\n      return GitType.GITHUB;\n    default:\n      return GitType.BITBUCKET;\n  }\n}\nfunction useBuilds() {\n  const { repo, owner, vcs } = useProjectSlugFromEntity();\n  const api = useApi(circleCIApiRef);\n  const errorApi = useApi(errorApiRef);\n  const [total, setTotal] = useState(0);\n  const [page, setPage] = useState(0);\n  const [pageSize, setPageSize] = useState(10);\n  const getBuilds = useCallback(\n    async ({ limit, offset }) => {\n      if (owner === \"\" || repo === \"\" || vcs === \"\") {\n        return Promise.reject(\"No credentials provided\");\n      }\n      try {\n        return await api.getBuilds(\n          { limit, offset },\n          {\n            vcs: {\n              owner,\n              repo,\n              type: mapVcsType(vcs)\n            }\n          }\n        );\n      } catch (e) {\n        errorApi.post(e);\n        return Promise.reject(e);\n      }\n    },\n    [repo, owner, vcs, api, errorApi]\n  );\n  const restartBuild = async (buildId) => {\n    try {\n      await api.retry(buildId, {\n        vcs: {\n          owner,\n          repo,\n          type: mapVcsType(vcs)\n        }\n      });\n    } catch (e) {\n      errorApi.post(e);\n    }\n  };\n  useEffect(() => {\n    getBuilds({ limit: 1, offset: 0 }).then((b) => setTotal(b == null ? void 0 : b[0].build_num));\n  }, [repo, getBuilds]);\n  const { loading, value, retry } = useAsyncRetry(\n    () => getBuilds({\n      offset: page * pageSize,\n      limit: pageSize\n    }).then((builds) => transform(builds != null ? builds : [], restartBuild)),\n    [page, pageSize, getBuilds]\n  );\n  const projectName = `${owner}/${repo}`;\n  return [\n    {\n      page,\n      pageSize,\n      loading,\n      value,\n      projectName,\n      total\n    },\n    {\n      getBuilds,\n      setPage,\n      setPageSize,\n      restartBuild,\n      retry\n    }\n  ];\n}\n\nconst INTERVAL_AMOUNT = 1500;\nfunction useBuildWithSteps(buildId) {\n  const { vcs, repo, owner } = useProjectSlugFromEntity();\n  const api = useApi(circleCIApiRef);\n  const errorApi = useApi(errorApiRef);\n  const vcsOption = useMemo(\n    () => ({\n      owner,\n      repo,\n      type: mapVcsType(vcs)\n    }),\n    [owner, repo, vcs]\n  );\n  const getBuildWithSteps = useCallback(async () => {\n    if (owner === \"\" || repo === \"\" || vcs === \"\") {\n      return Promise.reject(\"No credentials provided\");\n    }\n    try {\n      const options = {\n        vcs: vcsOption\n      };\n      const build = await api.getBuild(buildId, options);\n      return Promise.resolve(build);\n    } catch (e) {\n      errorApi.post(e);\n      return Promise.reject(e);\n    }\n  }, [vcsOption, buildId, api, errorApi]);\n  const restartBuild = async () => {\n    try {\n      await api.retry(buildId, {\n        vcs: vcsOption\n      });\n    } catch (e) {\n      errorApi.post(e);\n    }\n  };\n  const { loading, value, retry } = useAsyncRetry(\n    () => getBuildWithSteps(),\n    [getBuildWithSteps]\n  );\n  const { startPolling, stopPolling } = useAsyncPolling(\n    getBuildWithSteps,\n    INTERVAL_AMOUNT\n  );\n  return [\n    { loading, value, retry },\n    {\n      restartBuild,\n      getBuildWithSteps,\n      startPolling,\n      stopPolling\n    }\n  ];\n}\n\nconst IconLink = IconButton;\nconst BuildName = ({ build }) => /* @__PURE__ */ React.createElement(Box, {\n  display: \"flex\",\n  alignItems: \"center\"\n}, \"#\", build == null ? void 0 : build.build_num, \" - \", build == null ? void 0 : build.subject, /* @__PURE__ */ React.createElement(IconLink, {\n  href: build == null ? void 0 : build.build_url,\n  target: \"_blank\"\n}, /* @__PURE__ */ React.createElement(LaunchIcon, null)));\nconst useStyles$1 = makeStyles((theme) => ({\n  neutral: {},\n  failed: {\n    position: \"relative\",\n    \"&:after\": {\n      pointerEvents: \"none\",\n      content: '\"\"',\n      position: \"absolute\",\n      top: 0,\n      right: 0,\n      left: 0,\n      bottom: 0,\n      boxShadow: `inset 4px 0px 0px ${theme.palette.error.main}`\n    }\n  },\n  running: {\n    position: \"relative\",\n    \"&:after\": {\n      pointerEvents: \"none\",\n      content: '\"\"',\n      position: \"absolute\",\n      top: 0,\n      right: 0,\n      left: 0,\n      bottom: 0,\n      boxShadow: `inset 4px 0px 0px ${theme.palette.info.main}`\n    }\n  },\n  cardContent: {\n    backgroundColor: theme.palette.background.default\n  },\n  success: {\n    position: \"relative\",\n    \"&:after\": {\n      pointerEvents: \"none\",\n      content: '\"\"',\n      position: \"absolute\",\n      top: 0,\n      right: 0,\n      left: 0,\n      bottom: 0,\n      boxShadow: `inset 4px 0px 0px ${theme.palette.success.main}`\n    }\n  }\n}));\nconst pickClassName = (classes, build = {}) => {\n  if (build.failed)\n    return classes.failed;\n  if ([\"running\", \"queued\"].includes(build.status))\n    return classes.running;\n  if (build.status === \"success\")\n    return classes.success;\n  return classes.neutral;\n};\nconst ActionsList = ({\n  actions\n}) => {\n  const classes = useStyles$1();\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, actions.map((action) => /* @__PURE__ */ React.createElement(ActionOutput, {\n    className: action.failed ? classes.failed : classes.success,\n    action,\n    name: action.name,\n    url: action.output_url || \"\"\n  })));\n};\nconst BuildsList = ({ build }) => /* @__PURE__ */ React.createElement(Box, null, build && build.steps && build.steps.map(\n  ({ name, actions }) => /* @__PURE__ */ React.createElement(ActionsList, {\n    key: name,\n    name,\n    actions\n  })\n));\nconst BuildWithStepsPage = () => {\n  const { buildId = \"\" } = useParams();\n  const classes = useStyles$1();\n  const [{ loading, value }, { startPolling, stopPolling }] = useBuildWithSteps(\n    parseInt(buildId, 10)\n  );\n  useEffect(() => {\n    startPolling();\n    return () => stopPolling();\n  }, [buildId, startPolling, stopPolling]);\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(Box, {\n    mb: 3\n  }, /* @__PURE__ */ React.createElement(Breadcrumbs, {\n    \"aria-label\": \"breadcrumb\"\n  }, /* @__PURE__ */ React.createElement(Link, {\n    to: \"..\"\n  }, \"All builds\"), /* @__PURE__ */ React.createElement(Typography, null, \"Build details\"))), /* @__PURE__ */ React.createElement(Grid, {\n    container: true,\n    spacing: 3,\n    direction: \"column\"\n  }, /* @__PURE__ */ React.createElement(Grid, {\n    item: true\n  }, /* @__PURE__ */ React.createElement(InfoCard, {\n    className: pickClassName(classes, value),\n    title: /* @__PURE__ */ React.createElement(BuildName, {\n      build: value\n    }),\n    cardClassName: classes.cardContent\n  }, loading ? /* @__PURE__ */ React.createElement(Progress, null) : /* @__PURE__ */ React.createElement(BuildsList, {\n    build: value\n  })))));\n};\n\nconst getStatusComponent = (status = \"\") => {\n  switch (status.toLocaleLowerCase(\"en-US\")) {\n    case \"queued\":\n    case \"scheduled\":\n      return /* @__PURE__ */ React.createElement(StatusPending, null);\n    case \"running\":\n      return /* @__PURE__ */ React.createElement(StatusRunning, null);\n    case \"failed\":\n      return /* @__PURE__ */ React.createElement(StatusError, null);\n    case \"success\":\n      return /* @__PURE__ */ React.createElement(StatusOK, null);\n    case \"canceled\":\n    default:\n      return /* @__PURE__ */ React.createElement(StatusWarning, null);\n  }\n};\nconst useStyles = makeStyles$1((theme) => ({\n  root: {\n    display: \"flex\",\n    \"& > *\": {\n      margin: theme.spacing(1),\n      verticalAlign: \"center\"\n    }\n  },\n  small: {\n    width: theme.spacing(3),\n    height: theme.spacing(3)\n  }\n}));\nconst SourceInfo = ({ build }) => {\n  var _a, _b;\n  const classes = useStyles();\n  const { user, source } = build;\n  return /* @__PURE__ */ React.createElement(Box, {\n    display: \"flex\",\n    alignItems: \"center\",\n    className: classes.root\n  }, /* @__PURE__ */ React.createElement(Avatar, {\n    alt: user.name,\n    src: user.avatarUrl,\n    className: classes.small\n  }), /* @__PURE__ */ React.createElement(Box, null, /* @__PURE__ */ React.createElement(Typography, {\n    variant: \"button\"\n  }, source == null ? void 0 : source.branchName), /* @__PURE__ */ React.createElement(Typography, {\n    variant: \"body1\"\n  }, ((_a = source == null ? void 0 : source.commit) == null ? void 0 : _a.url) !== void 0 ? /* @__PURE__ */ React.createElement(Link, {\n    to: (_b = source == null ? void 0 : source.commit) == null ? void 0 : _b.url\n  }, source == null ? void 0 : source.commit.shortHash) : source == null ? void 0 : source.commit.shortHash)));\n};\nconst generatedColumns = [\n  {\n    title: \"ID\",\n    field: \"id\",\n    type: \"numeric\",\n    width: \"80px\"\n  },\n  {\n    title: \"Build\",\n    field: \"buildName\",\n    highlight: true,\n    width: \"20%\",\n    render: (row) => {\n      const LinkWrapper = () => {\n        var _a;\n        const routeLink = useRouteRef(circleCIBuildRouteRef);\n        return /* @__PURE__ */ React.createElement(Link, {\n          component: Link$1,\n          to: `${routeLink({\n            buildId: row.id\n          })}`\n        }, row.buildName ? row.buildName : (_a = row == null ? void 0 : row.workflow) == null ? void 0 : _a.name);\n      };\n      return /* @__PURE__ */ React.createElement(LinkWrapper, null);\n    }\n  },\n  {\n    title: \"Job\",\n    field: \"buildName\",\n    highlight: true,\n    render: (row) => {\n      var _a, _b;\n      return /* @__PURE__ */ React.createElement(Link, {\n        to: (_a = row == null ? void 0 : row.buildUrl) != null ? _a : \"\"\n      }, /* @__PURE__ */ React.createElement(Box, {\n        display: \"flex\",\n        alignItems: \"center\"\n      }, /* @__PURE__ */ React.createElement(LaunchIcon, {\n        fontSize: \"small\",\n        color: \"disabled\"\n      }), /* @__PURE__ */ React.createElement(Box, {\n        mr: 1\n      }), (_b = row == null ? void 0 : row.workflow) == null ? void 0 : _b.jobName));\n    }\n  },\n  {\n    title: \"Source\",\n    field: \"source.commit.hash\",\n    highlight: true,\n    render: (row) => /* @__PURE__ */ React.createElement(SourceInfo, {\n      build: row\n    })\n  },\n  {\n    title: \"Status\",\n    field: \"status\",\n    render: (row) => /* @__PURE__ */ React.createElement(Box, {\n      display: \"flex\",\n      alignItems: \"center\"\n    }, getStatusComponent(row.status), /* @__PURE__ */ React.createElement(Box, {\n      mr: 1\n    }), /* @__PURE__ */ React.createElement(Typography, {\n      variant: \"button\"\n    }, row.status))\n  },\n  {\n    title: \"Time\",\n    field: \"startTime\",\n    render: (row) => /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(Typography, {\n      variant: \"body2\"\n    }, \"run \", relativeTimeTo(row == null ? void 0 : row.startTime)), /* @__PURE__ */ React.createElement(Typography, {\n      variant: \"body2\"\n    }, \"took \", durationHumanized(row == null ? void 0 : row.startTime, row == null ? void 0 : row.stopTime)))\n  },\n  {\n    title: \"Workflow\",\n    field: \"workflow.name\"\n  },\n  {\n    title: \"Actions\",\n    width: \"10%\",\n    render: (row) => /* @__PURE__ */ React.createElement(IconButton, {\n      onClick: row.onRestartClick\n    }, /* @__PURE__ */ React.createElement(RetryIcon, null))\n  }\n];\nconst CITable = ({\n  projectName,\n  loading,\n  pageSize,\n  page,\n  retry,\n  builds,\n  onChangePage,\n  onChangePageSize,\n  total\n}) => {\n  return /* @__PURE__ */ React.createElement(Table, {\n    isLoading: loading,\n    options: {\n      paging: true,\n      pageSize,\n      padding: \"dense\",\n      pageSizeOptions: [10, 20, 50]\n    },\n    totalCount: total,\n    page,\n    actions: [\n      {\n        icon: () => /* @__PURE__ */ React.createElement(RetryIcon, null),\n        tooltip: \"Refresh Data\",\n        isFreeAction: true,\n        onClick: () => retry()\n      }\n    ],\n    data: builds,\n    onPageChange: onChangePage,\n    onRowsPerPageChange: onChangePageSize,\n    title: /* @__PURE__ */ React.createElement(Box, {\n      display: \"flex\",\n      alignItems: \"center\"\n    }, /* @__PURE__ */ React.createElement(GitHubIcon, null), /* @__PURE__ */ React.createElement(Box, {\n      mr: 1\n    }), /* @__PURE__ */ React.createElement(Typography, {\n      variant: \"h6\"\n    }, projectName)),\n    columns: generatedColumns\n  });\n};\n\nconst Builds = () => {\n  const [\n    { total, loading, value, projectName, page, pageSize },\n    { setPage, retry, setPageSize }\n  ] = useBuilds();\n  return /* @__PURE__ */ React.createElement(CITable, {\n    total,\n    loading,\n    retry,\n    builds: value != null ? value : [],\n    projectName,\n    page,\n    onChangePage: setPage,\n    pageSize,\n    onChangePageSize: setPageSize\n  });\n};\n\nconst BuildsPage = () => /* @__PURE__ */ React.createElement(Grid, {\n  container: true,\n  spacing: 3,\n  direction: \"column\"\n}, /* @__PURE__ */ React.createElement(Grid, {\n  item: true\n}, /* @__PURE__ */ React.createElement(Builds, null)));\n\nconst isCircleCIAvailable = (entity) => {\n  var _a;\n  return Boolean((_a = entity.metadata.annotations) == null ? void 0 : _a[CIRCLECI_ANNOTATION]);\n};\nconst Router = () => {\n  const { entity } = useEntity();\n  if (!isCircleCIAvailable(entity)) {\n    return /* @__PURE__ */ React.createElement(MissingAnnotationEmptyState, {\n      annotation: CIRCLECI_ANNOTATION\n    });\n  }\n  return /* @__PURE__ */ React.createElement(Routes, null, /* @__PURE__ */ React.createElement(Route, {\n    path: \"/\",\n    element: /* @__PURE__ */ React.createElement(BuildsPage, null)\n  }), /* @__PURE__ */ React.createElement(Route, {\n    path: `${circleCIBuildRouteRef.path}`,\n    element: /* @__PURE__ */ React.createElement(BuildWithStepsPage, null)\n  }));\n};\n\nvar Router$1 = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  isCircleCIAvailable: isCircleCIAvailable,\n  Router: Router\n});\n\nexport { CIRCLECI_ANNOTATION, CircleCIApi, EntityCircleCIContent, Router, circleCIApiRef, circleCIBuildRouteRef, circleCIPlugin, circleCIRouteRef, isCircleCIAvailable, isCircleCIAvailable as isPluginApplicableToEntity, circleCIPlugin as plugin };\n//# sourceMappingURL=index.esm.js.map\n","import { createApiRef, createRouteRef, createSubRouteRef, createPlugin, createApiFactory, configApiRef, githubAuthApiRef, createRoutableExtension, createComponentExtension, useApi, useRouteRefParams, errorApiRef, useRouteRef } from '@backstage/core-plugin-api';\nimport { readGitHubIntegrationConfigs } from '@backstage/integration';\nimport { Octokit } from '@octokit/rest';\nimport React, { useState, useEffect } from 'react';\nimport { useEntity } from '@backstage/plugin-catalog-react';\nimport { Routes, Route } from 'react-router';\nimport { makeStyles, Accordion, AccordionSummary, Typography, CircularProgress, Tooltip, Zoom, Modal, Fade, LinearProgress, Box, TableContainer, Paper, Table, TableBody, TableRow, TableCell, Link as Link$1, AccordionDetails, ListItemText, Button, IconButton } from '@material-ui/core';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport ExternalLinkIcon from '@material-ui/icons/Launch';\nimport { DateTime } from 'luxon';\nimport { StatusPending, StatusOK, StatusError, StatusWarning, StatusAborted, StatusRunning, LogViewer, Breadcrumbs, Link, EmptyState, Table as Table$1, MissingAnnotationEmptyState, InfoCard, StructuredMetadataTable } from '@backstage/core-components';\nimport useAsync from 'react-use/lib/useAsync';\nimport DescriptionIcon from '@material-ui/icons/Description';\nimport RetryIcon from '@material-ui/icons/Replay';\nimport GitHubIcon from '@material-ui/icons/GitHub';\nimport { Link as Link$2 } from 'react-router-dom';\nimport useAsyncRetry from 'react-use/lib/useAsyncRetry';\nimport SyncIcon from '@material-ui/icons/Sync';\n\nconst githubActionsApiRef = createApiRef({\n  id: \"plugin.githubactions.service\"\n});\n\nclass GithubActionsClient {\n  constructor(options) {\n    this.configApi = options.configApi;\n    this.githubAuthApi = options.githubAuthApi;\n  }\n  async getOctokit(hostname) {\n    var _a;\n    const token = await this.githubAuthApi.getAccessToken([\"repo\"]);\n    const configs = readGitHubIntegrationConfigs(\n      (_a = this.configApi.getOptionalConfigArray(\"integrations.github\")) != null ? _a : []\n    );\n    const githubIntegrationConfig = configs.find(\n      (v) => v.host === hostname\n    );\n    const baseUrl = githubIntegrationConfig == null ? void 0 : githubIntegrationConfig.apiBaseUrl;\n    return new Octokit({ auth: token, baseUrl });\n  }\n  async reRunWorkflow(options) {\n    const { hostname, owner, repo, runId } = options;\n    const octokit = await this.getOctokit(hostname);\n    return octokit.actions.reRunWorkflow({\n      owner,\n      repo,\n      run_id: runId\n    });\n  }\n  async listWorkflowRuns(options) {\n    const { hostname, owner, repo, pageSize = 100, page = 0, branch } = options;\n    const octokit = await this.getOctokit(hostname);\n    const workflowRuns = await octokit.actions.listWorkflowRunsForRepo({\n      owner,\n      repo,\n      per_page: pageSize,\n      page,\n      ...branch ? { branch } : {}\n    });\n    return workflowRuns.data;\n  }\n  async getWorkflow(options) {\n    const { hostname, owner, repo, id } = options;\n    const octokit = await this.getOctokit(hostname);\n    const workflow = await octokit.actions.getWorkflow({\n      owner,\n      repo,\n      workflow_id: id\n    });\n    return workflow.data;\n  }\n  async getWorkflowRun(options) {\n    const { hostname, owner, repo, id } = options;\n    const octokit = await this.getOctokit(hostname);\n    const run = await octokit.actions.getWorkflowRun({\n      owner,\n      repo,\n      run_id: id\n    });\n    return run.data;\n  }\n  async listJobsForWorkflowRun(options) {\n    const { hostname, owner, repo, id, pageSize = 100, page = 0 } = options;\n    const octokit = await this.getOctokit(hostname);\n    const jobs = await octokit.actions.listJobsForWorkflowRun({\n      owner,\n      repo,\n      run_id: id,\n      per_page: pageSize,\n      page\n    });\n    return jobs.data;\n  }\n  async downloadJobLogsForWorkflowRun(options) {\n    const { hostname, owner, repo, runId } = options;\n    const octokit = await this.getOctokit(hostname);\n    const workflow = await octokit.actions.downloadJobLogsForWorkflowRun({\n      owner,\n      repo,\n      job_id: runId\n    });\n    return workflow.data;\n  }\n}\n\nvar BuildStatus = /* @__PURE__ */ ((BuildStatus2) => {\n  BuildStatus2[BuildStatus2[\"success\"] = 0] = \"success\";\n  BuildStatus2[BuildStatus2[\"failure\"] = 1] = \"failure\";\n  BuildStatus2[BuildStatus2[\"pending\"] = 2] = \"pending\";\n  BuildStatus2[BuildStatus2[\"running\"] = 3] = \"running\";\n  return BuildStatus2;\n})(BuildStatus || {});\n\nconst rootRouteRef = createRouteRef({\n  id: \"github-actions\"\n});\nconst buildRouteRef = createSubRouteRef({\n  id: \"github-actions/build\",\n  path: \"/:id\",\n  parent: rootRouteRef\n});\n\nconst githubActionsPlugin = createPlugin({\n  id: \"github-actions\",\n  apis: [\n    createApiFactory({\n      api: githubActionsApiRef,\n      deps: { configApi: configApiRef, githubAuthApi: githubAuthApiRef },\n      factory: ({ configApi, githubAuthApi }) => new GithubActionsClient({ configApi, githubAuthApi })\n    })\n  ],\n  routes: {\n    entityContent: rootRouteRef\n  }\n});\nconst EntityGithubActionsContent = githubActionsPlugin.provide(\n  createRoutableExtension({\n    name: \"EntityGithubActionsContent\",\n    component: () => Promise.resolve().then(function () { return Router$1; }).then((m) => m.Router),\n    mountPoint: rootRouteRef\n  })\n);\nconst EntityLatestGithubActionRunCard = githubActionsPlugin.provide(\n  createComponentExtension({\n    name: \"EntityLatestGithubActionRunCard\",\n    component: {\n      lazy: () => import('./esm/index-2998a4dd.esm.js').then((m) => m.LatestWorkflowRunCard)\n    }\n  })\n);\nconst EntityLatestGithubActionsForBranchCard = githubActionsPlugin.provide(\n  createComponentExtension({\n    name: \"EntityLatestGithubActionsForBranchCard\",\n    component: {\n      lazy: () => import('./esm/index-2998a4dd.esm.js').then(\n        (m) => m.LatestWorkflowsForBranchCard\n      )\n    }\n  })\n);\nconst EntityRecentGithubActionsRunsCard = githubActionsPlugin.provide(\n  createComponentExtension({\n    name: \"EntityRecentGithubActionsRunsCard\",\n    component: {\n      lazy: () => import('./esm/index-2998a4dd.esm.js').then((m) => m.RecentWorkflowRunsCard)\n    }\n  })\n);\n\nconst GITHUB_ACTIONS_ANNOTATION = \"github.com/project-slug\";\nconst getProjectNameFromEntity = (entity) => {\n  var _a, _b;\n  return (_b = (_a = entity == null ? void 0 : entity.metadata.annotations) == null ? void 0 : _a[GITHUB_ACTIONS_ANNOTATION]) != null ? _b : \"\";\n};\n\nconst WorkflowRunStatus = ({\n  status,\n  conclusion\n}) => {\n  if (status === void 0)\n    return null;\n  switch (status.toLocaleLowerCase(\"en-US\")) {\n    case \"queued\":\n      return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(StatusPending, null), \" Queued\");\n    case \"in_progress\":\n      return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(StatusRunning, null), \" In progress\");\n    case \"completed\":\n      switch (conclusion == null ? void 0 : conclusion.toLocaleLowerCase(\"en-US\")) {\n        case \"skipped\":\n          return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(StatusAborted, null), \" Aborted\");\n        case \"timed_out\":\n          return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(StatusWarning, null), \" Timed out\");\n        case \"failure\":\n          return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(StatusError, null), \" Error\");\n        default:\n          return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(StatusOK, null), \" Completed\");\n      }\n    default:\n      return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(StatusPending, null), \" Pending\");\n  }\n};\n\nconst useWorkflowRunJobs = ({\n  hostname,\n  owner,\n  repo\n}) => {\n  const api = useApi(githubActionsApiRef);\n  const { id } = useRouteRefParams(buildRouteRef);\n  return useAsync(async () => {\n    if (!repo || !owner) {\n      throw new Error(\"No repo/owner provided\");\n    }\n    const jobs = await api.listJobsForWorkflowRun({\n      hostname,\n      owner,\n      repo,\n      id: parseInt(id, 10)\n    });\n    return {\n      total_count: jobs.total_count,\n      jobs: jobs.jobs.map((job) => {\n        var _a, _b, _c, _d;\n        return {\n          html_url: (_a = job.html_url) != null ? _a : void 0,\n          status: job.status,\n          conclusion: (_b = job.conclusion) != null ? _b : void 0,\n          started_at: job.started_at,\n          completed_at: (_c = job.completed_at) != null ? _c : void 0,\n          id: job.id,\n          name: job.name,\n          steps: (_d = job.steps) == null ? void 0 : _d.map((step) => {\n            var _a2, _b2, _c2;\n            return {\n              name: step.name,\n              status: step.status,\n              conclusion: (_a2 = step.conclusion) != null ? _a2 : void 0,\n              number: step.number,\n              started_at: (_b2 = step.started_at) != null ? _b2 : void 0,\n              completed_at: (_c2 = step.completed_at) != null ? _c2 : void 0\n            };\n          })\n        };\n      })\n    };\n  }, [repo, owner, id]);\n};\n\nconst useWorkflowRunsDetails = ({\n  hostname,\n  owner,\n  repo\n}) => {\n  const api = useApi(githubActionsApiRef);\n  const { id } = useRouteRefParams(buildRouteRef);\n  const details = useAsync(async () => {\n    return repo && owner ? api.getWorkflowRun({\n      hostname,\n      owner,\n      repo,\n      id: parseInt(id, 10)\n    }) : Promise.reject(new Error(\"No repo/owner provided\"));\n  }, [repo, owner, id]);\n  return details;\n};\n\nconst useDownloadWorkflowRunLogs = ({\n  hostname,\n  owner,\n  repo,\n  id\n}) => {\n  const api = useApi(githubActionsApiRef);\n  const details = useAsync(async () => {\n    return repo && owner ? api.downloadJobLogsForWorkflowRun({\n      hostname,\n      owner,\n      repo,\n      runId: id\n    }) : Promise.reject(\"No repo/owner provided\");\n  }, [repo, owner, id]);\n  return details;\n};\n\nconst useStyles$2 = makeStyles((theme) => ({\n  button: {\n    order: -1,\n    marginRight: 0,\n    marginLeft: \"-20px\"\n  },\n  modal: {\n    display: \"flex\",\n    alignItems: \"center\",\n    width: \"85%\",\n    height: \"85%\",\n    justifyContent: \"center\",\n    margin: \"auto\"\n  },\n  normalLogContainer: {\n    height: \"75vh\",\n    width: \"100%\"\n  },\n  modalLogContainer: {\n    height: \"100%\",\n    width: \"100%\"\n  },\n  log: {\n    background: theme.palette.background.default\n  }\n}));\nconst WorkflowRunLogs = ({\n  entity,\n  runId,\n  inProgress\n}) => {\n  var _a;\n  const config = useApi(configApiRef);\n  const classes = useStyles$2();\n  const projectName = getProjectNameFromEntity(entity);\n  const hostname = readGitHubIntegrationConfigs(\n    (_a = config.getOptionalConfigArray(\"integrations.github\")) != null ? _a : []\n  )[0].host;\n  const [owner, repo] = projectName && projectName.split(\"/\") || [];\n  const jobLogs = useDownloadWorkflowRunLogs({\n    hostname,\n    owner,\n    repo,\n    id: runId\n  });\n  const logText = jobLogs.value ? String(jobLogs.value) : void 0;\n  const [open, setOpen] = React.useState(false);\n  const handleOpen = () => {\n    setOpen(true);\n  };\n  const handleClose = () => {\n    setOpen(false);\n  };\n  return /* @__PURE__ */ React.createElement(Accordion, {\n    TransitionProps: { unmountOnExit: true },\n    disabled: inProgress\n  }, /* @__PURE__ */ React.createElement(AccordionSummary, {\n    expandIcon: /* @__PURE__ */ React.createElement(ExpandMoreIcon, null),\n    \"aria-controls\": `panel-${name}-content`,\n    id: `panel-${name}-header`,\n    IconButtonProps: {\n      className: classes.button\n    }\n  }, /* @__PURE__ */ React.createElement(Typography, {\n    variant: \"button\"\n  }, jobLogs.loading ? /* @__PURE__ */ React.createElement(CircularProgress, null) : \"Job Log\"), /* @__PURE__ */ React.createElement(Tooltip, {\n    title: \"Open Log\",\n    TransitionComponent: Zoom,\n    arrow: true\n  }, /* @__PURE__ */ React.createElement(DescriptionIcon, {\n    onClick: (event) => {\n      event.stopPropagation();\n      handleOpen();\n    },\n    style: { marginLeft: \"auto\" }\n  })), /* @__PURE__ */ React.createElement(Modal, {\n    className: classes.modal,\n    onClick: (event) => event.stopPropagation(),\n    open,\n    onClose: handleClose\n  }, /* @__PURE__ */ React.createElement(Fade, {\n    in: open\n  }, /* @__PURE__ */ React.createElement(\"div\", {\n    className: classes.modalLogContainer\n  }, /* @__PURE__ */ React.createElement(LogViewer, {\n    text: logText != null ? logText : \"No Values Found\",\n    classes: { root: classes.log }\n  }))))), logText && /* @__PURE__ */ React.createElement(\"div\", {\n    className: classes.normalLogContainer\n  }, /* @__PURE__ */ React.createElement(LogViewer, {\n    text: logText,\n    classes: { root: classes.log }\n  })));\n};\n\nconst useStyles$1 = makeStyles((theme) => ({\n  root: {\n    maxWidth: 720,\n    margin: theme.spacing(2)\n  },\n  title: {\n    padding: theme.spacing(1, 0, 2, 0)\n  },\n  table: {\n    padding: theme.spacing(1)\n  },\n  accordionDetails: {\n    padding: 0\n  },\n  button: {\n    order: -1,\n    marginRight: 0,\n    marginLeft: \"-20px\"\n  },\n  externalLinkIcon: {\n    fontSize: \"inherit\",\n    verticalAlign: \"bottom\"\n  }\n}));\nconst getElapsedTime = (start, end) => {\n  if (!start || !end) {\n    return \"\";\n  }\n  const startDate = DateTime.fromISO(start);\n  const endDate = end ? DateTime.fromISO(end) : DateTime.now();\n  const diff = endDate.diff(startDate);\n  const timeElapsed = diff.toFormat(`m 'minutes' s 'seconds'`);\n  return timeElapsed;\n};\nconst StepView = ({ step }) => {\n  var _a;\n  return /* @__PURE__ */ React.createElement(TableRow, null, /* @__PURE__ */ React.createElement(TableCell, null, /* @__PURE__ */ React.createElement(ListItemText, {\n    primary: step.name,\n    secondary: getElapsedTime(step.started_at, step.completed_at)\n  })), /* @__PURE__ */ React.createElement(TableCell, null, /* @__PURE__ */ React.createElement(WorkflowRunStatus, {\n    status: step.status.toLocaleUpperCase(\"en-US\"),\n    conclusion: (_a = step.conclusion) == null ? void 0 : _a.toLocaleUpperCase(\"en-US\")\n  })));\n};\nconst JobListItem = ({\n  job,\n  className,\n  entity\n}) => {\n  var _a;\n  const classes = useStyles$1();\n  return /* @__PURE__ */ React.createElement(Accordion, {\n    TransitionProps: { unmountOnExit: true },\n    className\n  }, /* @__PURE__ */ React.createElement(AccordionSummary, {\n    expandIcon: /* @__PURE__ */ React.createElement(ExpandMoreIcon, null),\n    \"aria-controls\": `panel-${name}-content`,\n    id: `panel-${name}-header`,\n    IconButtonProps: {\n      className: classes.button\n    }\n  }, /* @__PURE__ */ React.createElement(Typography, {\n    variant: \"button\"\n  }, job.name, \" (\", getElapsedTime(job.started_at, job.completed_at), \")\")), /* @__PURE__ */ React.createElement(AccordionDetails, {\n    className: classes.accordionDetails\n  }, /* @__PURE__ */ React.createElement(TableContainer, null, /* @__PURE__ */ React.createElement(Table, null, (_a = job.steps) == null ? void 0 : _a.map((step) => /* @__PURE__ */ React.createElement(StepView, {\n    key: step.number,\n    step\n  }))))), job.status === \"queued\" || job.status === \"in_progress\" ? /* @__PURE__ */ React.createElement(WorkflowRunLogs, {\n    runId: job.id,\n    inProgress: true,\n    entity\n  }) : /* @__PURE__ */ React.createElement(WorkflowRunLogs, {\n    runId: job.id,\n    inProgress: false,\n    entity\n  }));\n};\nconst JobsList = ({ jobs, entity }) => {\n  const classes = useStyles$1();\n  return /* @__PURE__ */ React.createElement(Box, null, jobs && jobs.total_count > 0 && jobs.jobs.map((job) => /* @__PURE__ */ React.createElement(JobListItem, {\n    key: job.id,\n    job,\n    className: job.status !== \"success\" ? classes.failed : classes.success,\n    entity\n  })));\n};\nconst WorkflowRunDetails = ({ entity }) => {\n  var _a, _b, _c, _d, _e, _f, _g, _h, _i, _j, _k, _l, _m, _n, _o, _p;\n  const config = useApi(configApiRef);\n  const projectName = getProjectNameFromEntity(entity);\n  const hostname = readGitHubIntegrationConfigs(\n    (_a = config.getOptionalConfigArray(\"integrations.github\")) != null ? _a : []\n  )[0].host;\n  const [owner, repo] = projectName && projectName.split(\"/\") || [];\n  const details = useWorkflowRunsDetails({ hostname, owner, repo });\n  const jobs = useWorkflowRunJobs({ hostname, owner, repo });\n  const classes = useStyles$1();\n  if (details.error && details.error.message) {\n    return /* @__PURE__ */ React.createElement(Typography, {\n      variant: \"h6\",\n      color: \"error\"\n    }, \"Failed to load build, \", details.error.message);\n  } else if (details.loading) {\n    return /* @__PURE__ */ React.createElement(LinearProgress, null);\n  }\n  return /* @__PURE__ */ React.createElement(\"div\", {\n    className: classes.root\n  }, /* @__PURE__ */ React.createElement(Box, {\n    mb: 3\n  }, /* @__PURE__ */ React.createElement(Breadcrumbs, {\n    \"aria-label\": \"breadcrumb\"\n  }, /* @__PURE__ */ React.createElement(Link, {\n    to: \"..\"\n  }, \"Workflow runs\"), /* @__PURE__ */ React.createElement(Typography, null, \"Workflow run details\"))), /* @__PURE__ */ React.createElement(TableContainer, {\n    component: Paper,\n    className: classes.table\n  }, /* @__PURE__ */ React.createElement(Table, null, /* @__PURE__ */ React.createElement(TableBody, null, /* @__PURE__ */ React.createElement(TableRow, null, /* @__PURE__ */ React.createElement(TableCell, null, /* @__PURE__ */ React.createElement(Typography, {\n    noWrap: true\n  }, \"Branch\")), /* @__PURE__ */ React.createElement(TableCell, null, (_b = details.value) == null ? void 0 : _b.head_branch)), /* @__PURE__ */ React.createElement(TableRow, null, /* @__PURE__ */ React.createElement(TableCell, null, /* @__PURE__ */ React.createElement(Typography, {\n    noWrap: true\n  }, \"Message\")), /* @__PURE__ */ React.createElement(TableCell, null, (_d = (_c = details.value) == null ? void 0 : _c.head_commit) == null ? void 0 : _d.message)), /* @__PURE__ */ React.createElement(TableRow, null, /* @__PURE__ */ React.createElement(TableCell, null, /* @__PURE__ */ React.createElement(Typography, {\n    noWrap: true\n  }, \"Commit ID\")), /* @__PURE__ */ React.createElement(TableCell, null, (_f = (_e = details.value) == null ? void 0 : _e.head_commit) == null ? void 0 : _f.id)), /* @__PURE__ */ React.createElement(TableRow, null, /* @__PURE__ */ React.createElement(TableCell, null, /* @__PURE__ */ React.createElement(Typography, {\n    noWrap: true\n  }, \"Workflow\")), /* @__PURE__ */ React.createElement(TableCell, null, (_g = details.value) == null ? void 0 : _g.name)), /* @__PURE__ */ React.createElement(TableRow, null, /* @__PURE__ */ React.createElement(TableCell, null, /* @__PURE__ */ React.createElement(Typography, {\n    noWrap: true\n  }, \"Status\")), /* @__PURE__ */ React.createElement(TableCell, null, /* @__PURE__ */ React.createElement(WorkflowRunStatus, {\n    status: ((_h = details.value) == null ? void 0 : _h.status) || void 0,\n    conclusion: ((_i = details.value) == null ? void 0 : _i.conclusion) || void 0\n  }))), /* @__PURE__ */ React.createElement(TableRow, null, /* @__PURE__ */ React.createElement(TableCell, null, /* @__PURE__ */ React.createElement(Typography, {\n    noWrap: true\n  }, \"Author\")), /* @__PURE__ */ React.createElement(TableCell, null, `${(_l = (_k = (_j = details.value) == null ? void 0 : _j.head_commit) == null ? void 0 : _k.author) == null ? void 0 : _l.name} (${(_o = (_n = (_m = details.value) == null ? void 0 : _m.head_commit) == null ? void 0 : _n.author) == null ? void 0 : _o.email})`)), /* @__PURE__ */ React.createElement(TableRow, null, /* @__PURE__ */ React.createElement(TableCell, null, /* @__PURE__ */ React.createElement(Typography, {\n    noWrap: true\n  }, \"Links\")), /* @__PURE__ */ React.createElement(TableCell, null, ((_p = details.value) == null ? void 0 : _p.html_url) && /* @__PURE__ */ React.createElement(Link$1, {\n    target: \"_blank\",\n    href: details.value.html_url\n  }, \"Workflow runs on GitHub\", \" \", /* @__PURE__ */ React.createElement(ExternalLinkIcon, {\n    className: classes.externalLinkIcon\n  })))), /* @__PURE__ */ React.createElement(TableRow, null, /* @__PURE__ */ React.createElement(TableCell, {\n    colSpan: 2\n  }, /* @__PURE__ */ React.createElement(Typography, {\n    noWrap: true\n  }, \"Jobs\"), jobs.loading ? /* @__PURE__ */ React.createElement(CircularProgress, null) : /* @__PURE__ */ React.createElement(JobsList, {\n    jobs: jobs.value,\n    entity\n  })))))));\n};\n\nfunction useWorkflowRuns({\n  hostname,\n  owner,\n  repo,\n  branch,\n  initialPageSize = 5\n}) {\n  const api = useApi(githubActionsApiRef);\n  const errorApi = useApi(errorApiRef);\n  const [total, setTotal] = useState(0);\n  const [page, setPage] = useState(0);\n  const [pageSize, setPageSize] = useState(initialPageSize);\n  const {\n    loading,\n    value: runs,\n    retry,\n    error\n  } = useAsyncRetry(async () => {\n    const workflowRunsData = await api.listWorkflowRuns({\n      hostname,\n      owner,\n      repo,\n      pageSize,\n      page: page + 1,\n      branch\n    });\n    setTotal(workflowRunsData.total_count);\n    return workflowRunsData.workflow_runs.map((run) => {\n      var _a, _b, _c, _d, _e, _f, _g, _h, _i;\n      return {\n        workflowName: (_a = run.name) != null ? _a : void 0,\n        message: (_b = run.head_commit) == null ? void 0 : _b.message,\n        id: `${run.id}`,\n        onReRunClick: async () => {\n          try {\n            await api.reRunWorkflow({\n              hostname,\n              owner,\n              repo,\n              runId: run.id\n            });\n          } catch (e) {\n            errorApi.post(e);\n          }\n        },\n        source: {\n          branchName: (_c = run.head_branch) != null ? _c : void 0,\n          commit: {\n            hash: (_d = run.head_commit) == null ? void 0 : _d.id,\n            url: (_g = (_e = run.head_repository) == null ? void 0 : _e.branches_url) == null ? void 0 : _g.replace(\n              \"{/branch}\",\n              (_f = run.head_branch) != null ? _f : \"\"\n            )\n          }\n        },\n        status: (_h = run.status) != null ? _h : void 0,\n        conclusion: (_i = run.conclusion) != null ? _i : void 0,\n        url: run.url,\n        githubUrl: run.html_url\n      };\n    });\n  }, [page, pageSize, repo, owner]);\n  return [\n    {\n      page,\n      pageSize,\n      loading,\n      runs,\n      projectName: `${owner}/${repo}`,\n      total,\n      error\n    },\n    {\n      runs,\n      setPage,\n      setPageSize,\n      retry\n    }\n  ];\n}\n\nconst generatedColumns = [\n  {\n    title: \"ID\",\n    field: \"id\",\n    type: \"numeric\",\n    width: \"150px\"\n  },\n  {\n    title: \"Message\",\n    field: \"message\",\n    highlight: true,\n    render: (row) => {\n      const LinkWrapper = () => {\n        const routeLink = useRouteRef(buildRouteRef);\n        return /* @__PURE__ */ React.createElement(Link$1, {\n          component: Link$2,\n          to: routeLink({ id: row.id })\n        }, row.message);\n      };\n      return /* @__PURE__ */ React.createElement(LinkWrapper, null);\n    }\n  },\n  {\n    title: \"Source\",\n    render: (row) => {\n      var _a, _b;\n      return /* @__PURE__ */ React.createElement(Typography, {\n        variant: \"body2\",\n        noWrap: true\n      }, /* @__PURE__ */ React.createElement(\"p\", null, (_a = row.source) == null ? void 0 : _a.branchName), /* @__PURE__ */ React.createElement(\"p\", null, (_b = row.source) == null ? void 0 : _b.commit.hash));\n    }\n  },\n  {\n    title: \"Workflow\",\n    field: \"workflowName\"\n  },\n  {\n    title: \"Status\",\n    width: \"150px\",\n    render: (row) => /* @__PURE__ */ React.createElement(Box, {\n      display: \"flex\",\n      alignItems: \"center\"\n    }, /* @__PURE__ */ React.createElement(WorkflowRunStatus, {\n      status: row.status,\n      conclusion: row.conclusion\n    }))\n  },\n  {\n    title: \"Actions\",\n    render: (row) => /* @__PURE__ */ React.createElement(Tooltip, {\n      title: \"Rerun workflow\"\n    }, /* @__PURE__ */ React.createElement(IconButton, {\n      onClick: row.onReRunClick\n    }, /* @__PURE__ */ React.createElement(RetryIcon, null))),\n    width: \"10%\"\n  }\n];\nconst WorkflowRunsTableView = ({\n  projectName,\n  loading,\n  pageSize,\n  page,\n  retry,\n  runs,\n  onChangePage,\n  onChangePageSize,\n  total\n}) => {\n  return /* @__PURE__ */ React.createElement(Table$1, {\n    isLoading: loading,\n    options: { paging: true, pageSize, padding: \"dense\" },\n    totalCount: total,\n    page,\n    actions: [\n      {\n        icon: () => /* @__PURE__ */ React.createElement(SyncIcon, null),\n        tooltip: \"Reload workflow runs\",\n        isFreeAction: true,\n        onClick: () => retry()\n      }\n    ],\n    data: runs != null ? runs : [],\n    onPageChange: onChangePage,\n    onRowsPerPageChange: onChangePageSize,\n    style: { width: \"100%\" },\n    title: /* @__PURE__ */ React.createElement(Box, {\n      display: \"flex\",\n      alignItems: \"center\"\n    }, /* @__PURE__ */ React.createElement(GitHubIcon, null), /* @__PURE__ */ React.createElement(Box, {\n      mr: 1\n    }), /* @__PURE__ */ React.createElement(Typography, {\n      variant: \"h6\"\n    }, projectName)),\n    columns: generatedColumns\n  });\n};\nconst WorkflowRunsTable = ({\n  entity,\n  branch\n}) => {\n  var _a;\n  const config = useApi(configApiRef);\n  const projectName = getProjectNameFromEntity(entity);\n  const hostname = readGitHubIntegrationConfigs(\n    (_a = config.getOptionalConfigArray(\"integrations.github\")) != null ? _a : []\n  )[0].host;\n  const [owner, repo] = (projectName != null ? projectName : \"/\").split(\"/\");\n  const [{ runs, ...tableProps }, { retry, setPage, setPageSize }] = useWorkflowRuns({\n    hostname,\n    owner,\n    repo,\n    branch\n  });\n  const githubHost = hostname || \"github.com\";\n  const hasNoRuns = !tableProps.loading && !runs;\n  return hasNoRuns ? /* @__PURE__ */ React.createElement(EmptyState, {\n    missing: \"data\",\n    title: \"No Workflow Data\",\n    description: \"This component has GitHub Actions enabled, but no data was found. Have you created any Workflows? Click the button below to create a new Workflow.\",\n    action: /* @__PURE__ */ React.createElement(Button, {\n      variant: \"contained\",\n      color: \"primary\",\n      href: `https://${githubHost}/${projectName}/actions/new`\n    }, \"Create new Workflow\")\n  }) : /* @__PURE__ */ React.createElement(WorkflowRunsTableView, {\n    ...tableProps,\n    runs,\n    loading: tableProps.loading,\n    retry,\n    onChangePageSize: setPageSize,\n    onChangePage: setPage\n  });\n};\n\nconst isGithubActionsAvailable = (entity) => {\n  var _a;\n  return Boolean((_a = entity.metadata.annotations) == null ? void 0 : _a[GITHUB_ACTIONS_ANNOTATION]);\n};\nconst Router = () => {\n  const { entity } = useEntity();\n  if (!isGithubActionsAvailable(entity)) {\n    return /* @__PURE__ */ React.createElement(MissingAnnotationEmptyState, {\n      annotation: GITHUB_ACTIONS_ANNOTATION\n    });\n  }\n  return /* @__PURE__ */ React.createElement(Routes, null, /* @__PURE__ */ React.createElement(Route, {\n    path: \"/\",\n    element: /* @__PURE__ */ React.createElement(WorkflowRunsTable, {\n      entity\n    })\n  }), /* @__PURE__ */ React.createElement(Route, {\n    path: `${buildRouteRef.path}`,\n    element: /* @__PURE__ */ React.createElement(WorkflowRunDetails, {\n      entity\n    })\n  }), \")\");\n};\n\nvar Router$1 = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  isGithubActionsAvailable: isGithubActionsAvailable,\n  Router: Router\n});\n\nconst useStyles = makeStyles({\n  externalLinkIcon: {\n    fontSize: \"inherit\",\n    verticalAlign: \"bottom\"\n  }\n});\nconst WidgetContent = (props) => {\n  var _a;\n  const { error, loading, lastRun, branch } = props;\n  const classes = useStyles();\n  if (error)\n    return /* @__PURE__ */ React.createElement(Typography, null, \"Couldn't fetch latest \", branch, \" run\");\n  if (loading)\n    return /* @__PURE__ */ React.createElement(LinearProgress, null);\n  return /* @__PURE__ */ React.createElement(StructuredMetadataTable, {\n    metadata: {\n      status: /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(WorkflowRunStatus, {\n        status: lastRun.status,\n        conclusion: lastRun.conclusion\n      })),\n      message: lastRun.message,\n      url: /* @__PURE__ */ React.createElement(Link, {\n        to: (_a = lastRun.githubUrl) != null ? _a : \"\"\n      }, \"See more on GitHub\", \" \", /* @__PURE__ */ React.createElement(ExternalLinkIcon, {\n        className: classes.externalLinkIcon\n      }))\n    }\n  });\n};\nconst LatestWorkflowRunCard = (props) => {\n  var _a, _b, _c, _d;\n  const { branch = \"master\", variant } = props;\n  const { entity } = useEntity();\n  const config = useApi(configApiRef);\n  const errorApi = useApi(errorApiRef);\n  const hostname = readGitHubIntegrationConfigs(\n    (_a = config.getOptionalConfigArray(\"integrations.github\")) != null ? _a : []\n  )[0].host;\n  const [owner, repo] = ((_c = (_b = entity == null ? void 0 : entity.metadata.annotations) == null ? void 0 : _b[GITHUB_ACTIONS_ANNOTATION]) != null ? _c : \"/\").split(\"/\");\n  const [{ runs, loading, error }] = useWorkflowRuns({\n    hostname,\n    owner,\n    repo,\n    branch\n  });\n  const lastRun = (_d = runs == null ? void 0 : runs[0]) != null ? _d : {};\n  useEffect(() => {\n    if (error) {\n      errorApi.post(error);\n    }\n  }, [error, errorApi]);\n  return /* @__PURE__ */ React.createElement(InfoCard, {\n    title: `Last ${branch} build`,\n    variant\n  }, /* @__PURE__ */ React.createElement(WidgetContent, {\n    error,\n    loading,\n    branch,\n    lastRun\n  }));\n};\nconst LatestWorkflowsForBranchCard = (props) => {\n  const { branch = \"master\", variant } = props;\n  const { entity } = useEntity();\n  return /* @__PURE__ */ React.createElement(InfoCard, {\n    title: `Last ${branch} build`,\n    variant\n  }, /* @__PURE__ */ React.createElement(WorkflowRunsTable, {\n    branch,\n    entity\n  }));\n};\n\nconst firstLine = (message) => message.split(\"\\n\")[0];\nconst RecentWorkflowRunsCard = (props) => {\n  var _a, _b, _c;\n  const { branch, dense = false, limit = 5, variant } = props;\n  const { entity } = useEntity();\n  const config = useApi(configApiRef);\n  const errorApi = useApi(errorApiRef);\n  const hostname = readGitHubIntegrationConfigs(\n    (_a = config.getOptionalConfigArray(\"integrations.github\")) != null ? _a : []\n  )[0].host;\n  const [owner, repo] = ((_c = (_b = entity == null ? void 0 : entity.metadata.annotations) == null ? void 0 : _b[GITHUB_ACTIONS_ANNOTATION]) != null ? _c : \"/\").split(\"/\");\n  const [{ runs = [], loading, error }] = useWorkflowRuns({\n    hostname,\n    owner,\n    repo,\n    branch,\n    initialPageSize: limit\n  });\n  useEffect(() => {\n    if (error) {\n      errorApi.post(error);\n    }\n  }, [error, errorApi]);\n  const githubHost = hostname || \"github.com\";\n  const routeLink = useRouteRef(buildRouteRef);\n  return /* @__PURE__ */ React.createElement(InfoCard, {\n    title: \"Recent Workflow Runs\",\n    subheader: branch ? `Branch: ${branch}` : \"All Branches\",\n    noPadding: true,\n    variant\n  }, !runs.length ? /* @__PURE__ */ React.createElement(\"div\", {\n    style: { textAlign: \"center\" }\n  }, /* @__PURE__ */ React.createElement(Typography, {\n    variant: \"body1\"\n  }, \"This component has GitHub Actions enabled, but no workflows were found.\"), /* @__PURE__ */ React.createElement(Typography, {\n    variant: \"body2\"\n  }, /* @__PURE__ */ React.createElement(Link, {\n    to: `https://${githubHost}/${owner}/${repo}/actions/new`\n  }, \"Create a new workflow\"))) : /* @__PURE__ */ React.createElement(Table$1, {\n    isLoading: loading,\n    options: {\n      search: false,\n      paging: false,\n      padding: dense ? \"dense\" : \"default\",\n      toolbar: false\n    },\n    columns: [\n      {\n        title: \"Commit Message\",\n        field: \"message\",\n        render: (data) => {\n          var _a2;\n          return /* @__PURE__ */ React.createElement(Link, {\n            component: Link$2,\n            to: routeLink({ id: data.id })\n          }, firstLine((_a2 = data.message) != null ? _a2 : \"\"));\n        }\n      },\n      { title: \"Branch\", field: \"source.branchName\" },\n      { title: \"Status\", field: \"status\", render: WorkflowRunStatus }\n    ],\n    data: runs\n  }));\n};\n\nexport { BuildStatus, EntityGithubActionsContent, EntityLatestGithubActionRunCard, EntityLatestGithubActionsForBranchCard, EntityRecentGithubActionsRunsCard, GITHUB_ACTIONS_ANNOTATION, GithubActionsClient, LatestWorkflowRunCard, LatestWorkflowsForBranchCard, RecentWorkflowRunsCard, Router, githubActionsApiRef, githubActionsPlugin, isGithubActionsAvailable, isGithubActionsAvailable as isPluginApplicableToEntity, githubActionsPlugin as plugin };\n//# sourceMappingURL=index.esm.js.map\n","import { createExternalRouteRef, createPlugin, createComponentExtension, useApi, alertApiRef, useRouteRef, identityApiRef } from '@backstage/core-plugin-api';\nimport { stringifyEntityRef, DEFAULT_NAMESPACE, RELATION_PARENT_OF, RELATION_CHILD_OF, ANNOTATION_LOCATION, ANNOTATION_EDIT_URL, RELATION_MEMBER_OF, parseEntityRef, getCompoundEntityRef } from '@backstage/catalog-model';\nimport { useEntity, catalogApiRef, entityRouteParams, getEntityRelations, EntityRefLinks, humanizeEntityRef, entityRouteRef } from '@backstage/plugin-catalog-react';\nimport { makeStyles, createStyles, Grid, Box, Typography, IconButton, List, ListItem, ListItemIcon, Tooltip, ListItemText, ListItemSecondaryAction, Switch } from '@material-ui/core';\nimport Pagination from '@material-ui/lab/Pagination';\nimport React, { useCallback, useState } from 'react';\nimport { generatePath } from 'react-router-dom';\nimport useAsync from 'react-use/lib/useAsync';\nimport { Progress, ResponseErrorPanel, InfoCard, Avatar, Link, SidebarItem, SidebarSubmenu, SidebarSubmenuItem } from '@backstage/core-components';\nimport AccountTreeIcon from '@material-ui/icons/AccountTree';\nimport EmailIcon from '@material-ui/icons/Email';\nimport GroupIcon from '@material-ui/icons/Group';\nimport EditIcon from '@material-ui/icons/Edit';\nimport CachedIcon from '@material-ui/icons/Cached';\nimport Alert from '@material-ui/lab/Alert';\nimport PersonIcon from '@material-ui/icons/Person';\nimport pluralize from 'pluralize';\nimport limiterFactory from 'p-limit';\nimport qs from 'qs';\n\nconst catalogIndexRouteRef = createExternalRouteRef({\n  id: \"catalog-index\"\n});\n\nconst orgPlugin = createPlugin({\n  id: \"org\",\n  externalRoutes: {\n    catalogIndex: catalogIndexRouteRef\n  }\n});\nconst EntityGroupProfileCard = orgPlugin.provide(\n  createComponentExtension({\n    name: \"EntityGroupProfileCard\",\n    component: {\n      lazy: () => import('./esm/index-deae4b9f.esm.js').then((m) => m.GroupProfileCard)\n    }\n  })\n);\nconst EntityMembersListCard = orgPlugin.provide(\n  createComponentExtension({\n    name: \"EntityMembersListCard\",\n    component: {\n      lazy: () => import('./esm/index-deae4b9f.esm.js').then((m) => m.MembersListCard)\n    }\n  })\n);\nconst EntityOwnershipCard = orgPlugin.provide(\n  createComponentExtension({\n    name: \"EntityOwnershipCard\",\n    component: {\n      lazy: () => import('./esm/index-deae4b9f.esm.js').then((m) => m.OwnershipCard)\n    }\n  })\n);\nconst EntityUserProfileCard = orgPlugin.provide(\n  createComponentExtension({\n    name: \"EntityUserProfileCard\",\n    component: {\n      lazy: () => import('./esm/index-deae4b9f.esm.js').then((m) => m.UserProfileCard)\n    }\n  })\n);\n\nconst useStyles$2 = makeStyles(\n  (theme) => createStyles({\n    card: {\n      border: `1px solid ${theme.palette.divider}`,\n      boxShadow: theme.shadows[2],\n      borderRadius: \"4px\",\n      overflow: \"visible\",\n      position: \"relative\",\n      margin: theme.spacing(4, 1, 1),\n      flex: \"1\",\n      minWidth: \"0px\"\n    },\n    email: {\n      overflow: \"hidden\",\n      whiteSpace: \"nowrap\",\n      textOverflow: \"ellipsis\",\n      display: \"inline-block\",\n      maxWidth: \"100%\",\n      \"&:hover\": {\n        overflow: \"visible\",\n        whiteSpace: \"normal\"\n      }\n    }\n  })\n);\nconst MemberComponent = (props) => {\n  var _a;\n  const classes = useStyles$2();\n  const {\n    metadata: { name: metaName, description },\n    spec: { profile }\n  } = props.member;\n  const displayName = (_a = profile == null ? void 0 : profile.displayName) != null ? _a : metaName;\n  return /* @__PURE__ */ React.createElement(Grid, {\n    item: true,\n    container: true,\n    xs: 12,\n    sm: 6,\n    md: 4,\n    xl: 2\n  }, /* @__PURE__ */ React.createElement(Box, {\n    className: classes.card\n  }, /* @__PURE__ */ React.createElement(Box, {\n    display: \"flex\",\n    flexDirection: \"column\",\n    m: 3,\n    alignItems: \"center\",\n    justifyContent: \"center\"\n  }, /* @__PURE__ */ React.createElement(Avatar, {\n    displayName,\n    picture: profile == null ? void 0 : profile.picture,\n    customStyles: {\n      position: \"absolute\",\n      top: \"-2rem\"\n    }\n  }), /* @__PURE__ */ React.createElement(Box, {\n    pt: 2,\n    sx: {\n      maxWidth: \"100%\"\n    },\n    textAlign: \"center\"\n  }, /* @__PURE__ */ React.createElement(Typography, {\n    variant: \"h5\"\n  }, /* @__PURE__ */ React.createElement(Link, {\n    to: generatePath(\n      `/catalog/:namespace/user/${metaName}`,\n      entityRouteParams(props.member)\n    )\n  }, displayName)), (profile == null ? void 0 : profile.email) && /* @__PURE__ */ React.createElement(Link, {\n    className: classes.email,\n    to: `mailto:${profile.email}`\n  }, profile.email), description && /* @__PURE__ */ React.createElement(Typography, {\n    variant: \"subtitle2\"\n  }, description)))));\n};\nconst MembersListCard = (props) => {\n  var _a;\n  const { memberDisplayTitle = \"Members\", pageSize = 50 } = props;\n  const { entity: groupEntity } = useEntity();\n  const {\n    metadata: { name: groupName, namespace: grpNamespace },\n    spec: { profile }\n  } = groupEntity;\n  const catalogApi = useApi(catalogApiRef);\n  const displayName = (_a = profile == null ? void 0 : profile.displayName) != null ? _a : groupName;\n  const groupNamespace = grpNamespace || DEFAULT_NAMESPACE;\n  const [page, setPage] = React.useState(1);\n  const pageChange = (_, pageIndex) => {\n    setPage(pageIndex);\n  };\n  const {\n    loading,\n    error,\n    value: members\n  } = useAsync(async () => {\n    const membersList = await catalogApi.getEntities({\n      filter: {\n        kind: \"User\",\n        \"relations.memberof\": [\n          stringifyEntityRef({\n            kind: \"group\",\n            namespace: groupNamespace.toLocaleLowerCase(\"en-US\"),\n            name: groupName.toLocaleLowerCase(\"en-US\")\n          })\n        ]\n      }\n    });\n    return membersList.items;\n  }, [catalogApi, groupEntity]);\n  if (loading) {\n    return /* @__PURE__ */ React.createElement(Progress, null);\n  } else if (error) {\n    return /* @__PURE__ */ React.createElement(ResponseErrorPanel, {\n      error\n    });\n  }\n  const nbPages = Math.ceil(((members == null ? void 0 : members.length) || 0) / pageSize);\n  const paginationLabel = nbPages < 2 ? \"\" : `, page ${page} of ${nbPages}`;\n  const pagination = /* @__PURE__ */ React.createElement(Pagination, {\n    count: nbPages,\n    page,\n    onChange: pageChange,\n    showFirstButton: true,\n    showLastButton: true\n  });\n  return /* @__PURE__ */ React.createElement(Grid, {\n    item: true\n  }, /* @__PURE__ */ React.createElement(InfoCard, {\n    title: `${memberDisplayTitle} (${(members == null ? void 0 : members.length) || 0}${paginationLabel})`,\n    subheader: `of ${displayName}`,\n    ...nbPages <= 1 ? {} : { actions: pagination }\n  }, /* @__PURE__ */ React.createElement(Grid, {\n    container: true,\n    spacing: 3\n  }, members && members.length > 0 ? members.slice(pageSize * (page - 1), pageSize * page).map((member) => /* @__PURE__ */ React.createElement(MemberComponent, {\n    member,\n    key: member.metadata.uid\n  })) : /* @__PURE__ */ React.createElement(Box, {\n    p: 2\n  }, /* @__PURE__ */ React.createElement(Typography, null, \"This group has no \", memberDisplayTitle.toLocaleLowerCase(), \".\")))));\n};\n\nconst CardTitle$1 = (props) => /* @__PURE__ */ React.createElement(Box, {\n  display: \"flex\",\n  alignItems: \"center\"\n}, /* @__PURE__ */ React.createElement(GroupIcon, {\n  fontSize: \"inherit\"\n}), /* @__PURE__ */ React.createElement(Box, {\n  ml: 1\n}, props.title));\nconst GroupProfileCard = (props) => {\n  var _a, _b;\n  const catalogApi = useApi(catalogApiRef);\n  const alertApi = useApi(alertApiRef);\n  const { entity: group } = useEntity();\n  const refreshEntity = useCallback(async () => {\n    await catalogApi.refreshEntity(stringifyEntityRef(group));\n    alertApi.post({ message: \"Refresh scheduled\", severity: \"info\" });\n  }, [catalogApi, alertApi, group]);\n  if (!group) {\n    return /* @__PURE__ */ React.createElement(Alert, {\n      severity: \"error\"\n    }, \"Group not found\");\n  }\n  const {\n    metadata: { name, description, annotations },\n    spec: { profile }\n  } = group;\n  const childRelations = getEntityRelations(group, RELATION_PARENT_OF, {\n    kind: \"Group\"\n  });\n  const parentRelations = getEntityRelations(group, RELATION_CHILD_OF, {\n    kind: \"group\"\n  });\n  const entityLocation = annotations == null ? void 0 : annotations[ANNOTATION_LOCATION];\n  const allowRefresh = (entityLocation == null ? void 0 : entityLocation.startsWith(\"url:\")) || (entityLocation == null ? void 0 : entityLocation.startsWith(\"file:\"));\n  const entityMetadataEditUrl = (_a = group.metadata.annotations) == null ? void 0 : _a[ANNOTATION_EDIT_URL];\n  const displayName = (_b = profile == null ? void 0 : profile.displayName) != null ? _b : name;\n  const emailHref = (profile == null ? void 0 : profile.email) ? `mailto:${profile.email}` : \"#\";\n  const infoCardAction = entityMetadataEditUrl ? /* @__PURE__ */ React.createElement(IconButton, {\n    \"aria-label\": \"Edit\",\n    title: \"Edit Metadata\",\n    component: Link,\n    to: entityMetadataEditUrl\n  }, /* @__PURE__ */ React.createElement(EditIcon, null)) : /* @__PURE__ */ React.createElement(IconButton, {\n    \"aria-label\": \"Edit\",\n    disabled: true,\n    title: \"Edit Metadata\"\n  }, /* @__PURE__ */ React.createElement(EditIcon, null));\n  return /* @__PURE__ */ React.createElement(InfoCard, {\n    title: /* @__PURE__ */ React.createElement(CardTitle$1, {\n      title: displayName\n    }),\n    subheader: description,\n    variant: props.variant,\n    action: /* @__PURE__ */ React.createElement(React.Fragment, null, allowRefresh && /* @__PURE__ */ React.createElement(IconButton, {\n      \"aria-label\": \"Refresh\",\n      title: \"Schedule entity refresh\",\n      onClick: refreshEntity\n    }, /* @__PURE__ */ React.createElement(CachedIcon, null)), infoCardAction)\n  }, /* @__PURE__ */ React.createElement(Grid, {\n    container: true,\n    spacing: 3\n  }, /* @__PURE__ */ React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    sm: 2,\n    xl: 1\n  }, /* @__PURE__ */ React.createElement(Avatar, {\n    displayName,\n    picture: profile == null ? void 0 : profile.picture\n  })), /* @__PURE__ */ React.createElement(Grid, {\n    item: true,\n    md: 10,\n    xl: 11\n  }, /* @__PURE__ */ React.createElement(List, null, (profile == null ? void 0 : profile.email) && /* @__PURE__ */ React.createElement(ListItem, null, /* @__PURE__ */ React.createElement(ListItemIcon, null, /* @__PURE__ */ React.createElement(Tooltip, {\n    title: \"Email\"\n  }, /* @__PURE__ */ React.createElement(EmailIcon, null))), /* @__PURE__ */ React.createElement(ListItemText, {\n    primary: /* @__PURE__ */ React.createElement(Link, {\n      to: emailHref\n    }, profile.email),\n    secondary: \"Email\"\n  })), /* @__PURE__ */ React.createElement(ListItem, null, /* @__PURE__ */ React.createElement(ListItemIcon, null, /* @__PURE__ */ React.createElement(Tooltip, {\n    title: \"Parent Group\"\n  }, /* @__PURE__ */ React.createElement(AccountTreeIcon, null))), /* @__PURE__ */ React.createElement(ListItemText, {\n    primary: parentRelations.length ? /* @__PURE__ */ React.createElement(EntityRefLinks, {\n      entityRefs: parentRelations,\n      defaultKind: \"Group\"\n    }) : \"N/A\",\n    secondary: \"Parent Group\"\n  })), /* @__PURE__ */ React.createElement(ListItem, null, /* @__PURE__ */ React.createElement(ListItemIcon, null, /* @__PURE__ */ React.createElement(Tooltip, {\n    title: \"Child Groups\"\n  }, /* @__PURE__ */ React.createElement(GroupIcon, null))), /* @__PURE__ */ React.createElement(ListItemText, {\n    primary: childRelations.length ? /* @__PURE__ */ React.createElement(EntityRefLinks, {\n      entityRefs: childRelations,\n      defaultKind: \"Group\"\n    }) : \"N/A\",\n    secondary: \"Child Groups\"\n  }))))));\n};\n\nconst CardTitle = (props) => props.title ? /* @__PURE__ */ React.createElement(Box, {\n  display: \"flex\",\n  alignItems: \"center\"\n}, /* @__PURE__ */ React.createElement(PersonIcon, {\n  fontSize: \"inherit\"\n}), /* @__PURE__ */ React.createElement(Box, {\n  ml: 1\n}, props.title)) : null;\nconst UserProfileCard = (props) => {\n  var _a, _b;\n  const { entity: user } = useEntity();\n  if (!user) {\n    return /* @__PURE__ */ React.createElement(Alert, {\n      severity: \"error\"\n    }, \"User not found\");\n  }\n  const entityMetadataEditUrl = (_a = user.metadata.annotations) == null ? void 0 : _a[ANNOTATION_EDIT_URL];\n  const {\n    metadata: { name: metaName, description },\n    spec: { profile }\n  } = user;\n  const displayName = (_b = profile == null ? void 0 : profile.displayName) != null ? _b : metaName;\n  const emailHref = (profile == null ? void 0 : profile.email) ? `mailto:${profile.email}` : void 0;\n  const memberOfRelations = getEntityRelations(user, RELATION_MEMBER_OF, {\n    kind: \"Group\"\n  });\n  return /* @__PURE__ */ React.createElement(InfoCard, {\n    title: /* @__PURE__ */ React.createElement(CardTitle, {\n      title: displayName\n    }),\n    subheader: description,\n    variant: props.variant,\n    action: /* @__PURE__ */ React.createElement(React.Fragment, null, entityMetadataEditUrl && /* @__PURE__ */ React.createElement(IconButton, {\n      \"aria-label\": \"Edit\",\n      title: \"Edit Metadata\",\n      component: Link,\n      to: entityMetadataEditUrl\n    }, /* @__PURE__ */ React.createElement(EditIcon, null)))\n  }, /* @__PURE__ */ React.createElement(Grid, {\n    container: true,\n    spacing: 3,\n    alignItems: \"flex-start\"\n  }, /* @__PURE__ */ React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    sm: 2,\n    xl: 1\n  }, /* @__PURE__ */ React.createElement(Avatar, {\n    displayName,\n    picture: profile == null ? void 0 : profile.picture\n  })), /* @__PURE__ */ React.createElement(Grid, {\n    item: true,\n    md: 10,\n    xl: 11\n  }, /* @__PURE__ */ React.createElement(List, null, (profile == null ? void 0 : profile.email) && /* @__PURE__ */ React.createElement(ListItem, null, /* @__PURE__ */ React.createElement(ListItemIcon, null, /* @__PURE__ */ React.createElement(Tooltip, {\n    title: \"Email\"\n  }, /* @__PURE__ */ React.createElement(EmailIcon, null))), /* @__PURE__ */ React.createElement(ListItemText, null, /* @__PURE__ */ React.createElement(Link, {\n    to: emailHref != null ? emailHref : \"\"\n  }, profile.email))), /* @__PURE__ */ React.createElement(ListItem, null, /* @__PURE__ */ React.createElement(ListItemIcon, null, /* @__PURE__ */ React.createElement(Tooltip, {\n    title: \"Member of\"\n  }, /* @__PURE__ */ React.createElement(GroupIcon, null))), /* @__PURE__ */ React.createElement(ListItemText, null, /* @__PURE__ */ React.createElement(EntityRefLinks, {\n    entityRefs: memberOfRelations,\n    defaultKind: \"Group\"\n  })))))));\n};\n\nconst limiter = limiterFactory(10);\nconst getQueryParams = (ownersEntityRef, selectedEntity) => {\n  const { kind, type } = selectedEntity;\n  const owners = ownersEntityRef.map(\n    (owner) => humanizeEntityRef(parseEntityRef(owner), { defaultKind: \"group\" })\n  );\n  const filters = {\n    kind,\n    type,\n    owners,\n    user: \"all\"\n  };\n  return qs.stringify({ filters }, { arrayFormat: \"repeat\" });\n};\nconst getOwnersEntityRef = (owner) => {\n  let owners = [stringifyEntityRef(owner)];\n  if (owner.kind === \"User\") {\n    const ownerGroups = getEntityRelations(owner, RELATION_MEMBER_OF, {\n      kind: \"Group\"\n    });\n    const ownerGroupsName = ownerGroups.map(\n      (ownerGroup) => stringifyEntityRef({\n        kind: ownerGroup.kind,\n        namespace: ownerGroup.namespace,\n        name: ownerGroup.name\n      })\n    );\n    owners = [...owners, ...ownerGroupsName];\n  }\n  return owners;\n};\nconst getAggregatedOwnersEntityRef = async (parentGroup, catalogApi) => {\n  const requestedEntities = [];\n  const outstandingEntities = /* @__PURE__ */ new Map();\n  const processedEntities = /* @__PURE__ */ new Set();\n  requestedEntities.push(parentGroup);\n  let currentEntity = parentGroup;\n  while (requestedEntities.length > 0) {\n    const childRelations = getEntityRelations(\n      currentEntity,\n      RELATION_PARENT_OF,\n      {\n        kind: \"Group\"\n      }\n    );\n    await Promise.all(\n      childRelations.map(\n        (childGroup) => limiter(async () => {\n          const promise = catalogApi.getEntityByRef(childGroup);\n          outstandingEntities.set(childGroup.name, promise);\n          try {\n            const processedEntity = await promise;\n            if (processedEntity) {\n              requestedEntities.push(processedEntity);\n            }\n          } finally {\n            outstandingEntities.delete(childGroup.name);\n          }\n        })\n      )\n    );\n    requestedEntities.shift();\n    processedEntities.add(\n      stringifyEntityRef({\n        kind: currentEntity.kind,\n        namespace: currentEntity.metadata.namespace,\n        name: currentEntity.metadata.name\n      })\n    );\n    currentEntity = requestedEntities[0];\n  }\n  return Array.from(processedEntities);\n};\nfunction useGetEntities(entity, relationsType, isGroup, entityFilterKind) {\n  const catalogApi = useApi(catalogApiRef);\n  const kinds = entityFilterKind != null ? entityFilterKind : [\"Component\", \"API\", \"System\"];\n  const {\n    loading,\n    error,\n    value: componentsWithCounters\n  } = useAsync(async () => {\n    const owners = relationsType === \"aggregated\" && isGroup ? await getAggregatedOwnersEntityRef(entity, catalogApi) : getOwnersEntityRef(entity);\n    const ownedEntitiesList = await catalogApi.getEntities({\n      filter: [\n        {\n          kind: kinds,\n          \"relations.ownedBy\": owners\n        }\n      ],\n      fields: [\n        \"kind\",\n        \"metadata.name\",\n        \"metadata.namespace\",\n        \"spec.type\",\n        \"relations\"\n      ]\n    });\n    const counts = ownedEntitiesList.items.reduce(\n      (acc, ownedEntity) => {\n        var _a, _b, _c;\n        const match = acc.find(\n          (x) => {\n            var _a2, _b2;\n            return x.kind === ownedEntity.kind && x.type === ((_b2 = (_a2 = ownedEntity.spec) == null ? void 0 : _a2.type) != null ? _b2 : ownedEntity.kind);\n          }\n        );\n        if (match) {\n          match.count += 1;\n        } else {\n          acc.push({\n            kind: ownedEntity.kind,\n            type: (_c = (_b = (_a = ownedEntity.spec) == null ? void 0 : _a.type) == null ? void 0 : _b.toString()) != null ? _c : ownedEntity.kind,\n            count: 1\n          });\n        }\n        return acc;\n      },\n      []\n    );\n    const topN = counts.sort((a, b) => b.count - a.count).slice(0, 6);\n    return topN.map((topOwnedEntity) => ({\n      counter: topOwnedEntity.count,\n      type: topOwnedEntity.type,\n      name: topOwnedEntity.type.toLocaleUpperCase(\"en-US\"),\n      queryParams: getQueryParams(owners, topOwnedEntity)\n    }));\n  }, [catalogApi, entity, relationsType]);\n  return {\n    componentsWithCounters,\n    loading,\n    error\n  };\n}\n\nconst useStyles$1 = makeStyles(\n  (theme) => createStyles({\n    card: {\n      border: `1px solid ${theme.palette.divider}`,\n      boxShadow: theme.shadows[2],\n      borderRadius: \"4px\",\n      padding: theme.spacing(2),\n      color: \"#fff\",\n      transition: `${theme.transitions.duration.standard}ms`,\n      \"&:hover\": {\n        boxShadow: theme.shadows[4]\n      }\n    },\n    bold: {\n      fontWeight: theme.typography.fontWeightBold\n    },\n    entityTypeBox: {\n      background: (props) => theme.getPageTheme({ themeId: props.type }).backgroundImage\n    }\n  })\n);\nconst EntityCountTile = ({\n  counter,\n  type,\n  name,\n  url\n}) => {\n  const classes = useStyles$1({ type });\n  return /* @__PURE__ */ React.createElement(Link, {\n    to: url,\n    variant: \"body2\"\n  }, /* @__PURE__ */ React.createElement(Box, {\n    className: `${classes.card} ${classes.entityTypeBox}`,\n    display: \"flex\",\n    flexDirection: \"column\",\n    alignItems: \"center\"\n  }, /* @__PURE__ */ React.createElement(Typography, {\n    className: classes.bold,\n    variant: \"h6\"\n  }, counter), /* @__PURE__ */ React.createElement(Typography, {\n    className: classes.bold,\n    variant: \"h6\"\n  }, pluralize(name, counter))));\n};\nconst ComponentsGrid = ({\n  entity,\n  relationsType,\n  isGroup,\n  entityFilterKind\n}) => {\n  const catalogLink = useRouteRef(catalogIndexRouteRef);\n  const { componentsWithCounters, loading, error } = useGetEntities(\n    entity,\n    relationsType,\n    isGroup,\n    entityFilterKind\n  );\n  if (loading) {\n    return /* @__PURE__ */ React.createElement(Progress, null);\n  } else if (error) {\n    return /* @__PURE__ */ React.createElement(ResponseErrorPanel, {\n      error\n    });\n  }\n  return /* @__PURE__ */ React.createElement(Grid, {\n    container: true\n  }, componentsWithCounters == null ? void 0 : componentsWithCounters.map((c) => /* @__PURE__ */ React.createElement(Grid, {\n    item: true,\n    xs: 6,\n    md: 6,\n    lg: 4,\n    key: c.name\n  }, /* @__PURE__ */ React.createElement(EntityCountTile, {\n    counter: c.counter,\n    type: c.type,\n    name: c.name,\n    url: `${catalogLink()}/?${c.queryParams}`\n  }))));\n};\n\nconst useStyles = makeStyles((theme) => ({\n  list: {\n    [theme.breakpoints.down(\"xs\")]: {\n      padding: `0 0 12px`\n    }\n  },\n  listItemText: {\n    [theme.breakpoints.down(\"xs\")]: {\n      paddingRight: 0,\n      paddingLeft: 0\n    }\n  },\n  listItemSecondaryAction: {\n    [theme.breakpoints.down(\"xs\")]: {\n      width: \"100%\",\n      top: \"auto\",\n      right: \"auto\",\n      position: \"relative\",\n      transform: \"unset\"\n    }\n  }\n}));\nconst OwnershipCard = (props) => {\n  const { variant, entityFilterKind, hideRelationsToggle, relationsType } = props;\n  const relationsToggle = hideRelationsToggle === void 0 ? false : hideRelationsToggle;\n  const classes = useStyles();\n  const { entity } = useEntity();\n  const isGroup = entity.kind === \"Group\";\n  const [getRelationsType, setRelationsType] = useState(\n    relationsType || \"direct\"\n  );\n  return /* @__PURE__ */ React.createElement(InfoCard, {\n    title: \"Ownership\",\n    variant\n  }, !relationsToggle && /* @__PURE__ */ React.createElement(List, {\n    dense: true\n  }, /* @__PURE__ */ React.createElement(ListItem, {\n    className: classes.list\n  }, /* @__PURE__ */ React.createElement(ListItemText, {\n    className: classes.listItemText\n  }), /* @__PURE__ */ React.createElement(ListItemSecondaryAction, {\n    className: classes.listItemSecondaryAction\n  }, \"Direct Relations\", /* @__PURE__ */ React.createElement(Tooltip, {\n    placement: \"top\",\n    arrow: true,\n    title: `${getRelationsType === \"direct\" ? \"Direct\" : \"Aggregated\"} Relations`\n  }, /* @__PURE__ */ React.createElement(Switch, {\n    color: \"primary\",\n    checked: getRelationsType !== \"direct\",\n    onChange: () => getRelationsType === \"direct\" ? setRelationsType(\"aggregated\") : setRelationsType(\"direct\"),\n    name: \"pin\",\n    inputProps: { \"aria-label\": \"Ownership Type Switch\" },\n    disabled: !isGroup\n  })), \"Aggregated Relations\"))), /* @__PURE__ */ React.createElement(ComponentsGrid, {\n    entity,\n    relationsType: getRelationsType,\n    isGroup,\n    entityFilterKind\n  }));\n};\n\nconst MyGroupsSidebarItem = (props) => {\n  const { singularTitle, pluralTitle, icon, filter } = props;\n  const identityApi = useApi(identityApiRef);\n  const catalogApi = useApi(catalogApiRef);\n  const catalogEntityRoute = useRouteRef(entityRouteRef);\n  const { value: groups } = useAsync(async () => {\n    const profile = await identityApi.getBackstageIdentity();\n    const response = await catalogApi.getEntities({\n      filter: [\n        {\n          kind: \"group\",\n          \"relations.hasMember\": profile.userEntityRef,\n          ...filter != null ? filter : {}\n        }\n      ],\n      fields: [\"metadata\", \"kind\"]\n    });\n    return response.items;\n  }, []);\n  if (!(groups == null ? void 0 : groups.length)) {\n    return null;\n  }\n  if (groups.length === 1) {\n    const group = groups[0];\n    return /* @__PURE__ */ React.createElement(SidebarItem, {\n      text: singularTitle,\n      to: catalogEntityRoute(getCompoundEntityRef(group)),\n      icon\n    });\n  }\n  return /* @__PURE__ */ React.createElement(SidebarItem, {\n    icon,\n    text: pluralTitle\n  }, /* @__PURE__ */ React.createElement(SidebarSubmenu, {\n    title: pluralTitle\n  }, groups == null ? void 0 : groups.map(function groupsMap(group) {\n    return /* @__PURE__ */ React.createElement(SidebarSubmenuItem, {\n      title: group.metadata.title || group.metadata.name,\n      subtitle: group.metadata.namespace !== DEFAULT_NAMESPACE ? group.metadata.namespace : void 0,\n      to: catalogEntityRoute(getCompoundEntityRef(group)),\n      icon,\n      key: stringifyEntityRef(group)\n    });\n  })));\n};\n\nexport { EntityGroupProfileCard, EntityMembersListCard, EntityOwnershipCard, EntityUserProfileCard, GroupProfileCard, MembersListCard, MyGroupsSidebarItem, OwnershipCard, UserProfileCard, orgPlugin, orgPlugin as plugin };\n//# sourceMappingURL=index.esm.js.map\n","import { ResponseError } from '@backstage/errors';\nimport fetch from 'cross-fetch';\nimport * as uuid from 'uuid';\nimport { z } from 'zod';\n\nvar AuthorizeResult = /* @__PURE__ */ ((AuthorizeResult2) => {\n  AuthorizeResult2[\"DENY\"] = \"DENY\";\n  AuthorizeResult2[\"ALLOW\"] = \"ALLOW\";\n  AuthorizeResult2[\"CONDITIONAL\"] = \"CONDITIONAL\";\n  return AuthorizeResult2;\n})(AuthorizeResult || {});\n\nfunction isPermission(permission, comparedPermission) {\n  return permission.name === comparedPermission.name;\n}\nfunction isResourcePermission(permission, resourceType) {\n  if (!(\"resourceType\" in permission)) {\n    return false;\n  }\n  return !resourceType || permission.resourceType === resourceType;\n}\nfunction isCreatePermission(permission) {\n  return permission.attributes.action === \"create\";\n}\nfunction isReadPermission(permission) {\n  return permission.attributes.action === \"read\";\n}\nfunction isUpdatePermission(permission) {\n  return permission.attributes.action === \"update\";\n}\nfunction isDeletePermission(permission) {\n  return permission.attributes.action === \"delete\";\n}\nfunction toPermissionEvaluator(permissionAuthorizer) {\n  return {\n    authorize: async (requests, options) => {\n      const response = await permissionAuthorizer.authorize(requests, options);\n      return response;\n    },\n    authorizeConditional(requests, options) {\n      const parsedRequests = requests;\n      return permissionAuthorizer.authorize(parsedRequests, options);\n    }\n  };\n}\n\nfunction createPermission({\n  name,\n  attributes,\n  resourceType\n}) {\n  if (resourceType) {\n    return {\n      type: \"resource\",\n      name,\n      attributes,\n      resourceType\n    };\n  }\n  return {\n    type: \"basic\",\n    name,\n    attributes\n  };\n}\n\nconst permissionCriteriaSchema = z.lazy(\n  () => z.object({\n    rule: z.string(),\n    resourceType: z.string(),\n    params: z.record(z.any())\n  }).or(z.object({ anyOf: z.array(permissionCriteriaSchema).nonempty() })).or(z.object({ allOf: z.array(permissionCriteriaSchema).nonempty() })).or(z.object({ not: permissionCriteriaSchema }))\n);\nconst authorizePermissionResponseSchema = z.object({\n  result: z.literal(AuthorizeResult.ALLOW).or(z.literal(AuthorizeResult.DENY))\n});\nconst queryPermissionResponseSchema = z.union([\n  z.object({\n    result: z.literal(AuthorizeResult.ALLOW).or(z.literal(AuthorizeResult.DENY))\n  }),\n  z.object({\n    result: z.literal(AuthorizeResult.CONDITIONAL),\n    pluginId: z.string(),\n    resourceType: z.string(),\n    conditions: permissionCriteriaSchema\n  })\n]);\nconst responseSchema = (itemSchema, ids) => z.object({\n  items: z.array(\n    z.intersection(\n      z.object({\n        id: z.string()\n      }),\n      itemSchema\n    )\n  ).refine(\n    (items) => items.length === ids.size && items.every(({ id }) => ids.has(id)),\n    {\n      message: \"Items in response do not match request\"\n    }\n  )\n});\nclass PermissionClient {\n  constructor(options) {\n    var _a;\n    this.discovery = options.discovery;\n    this.enabled = (_a = options.config.getOptionalBoolean(\"permission.enabled\")) != null ? _a : false;\n  }\n  async authorize(requests, options) {\n    return this.makeRequest(\n      requests,\n      authorizePermissionResponseSchema,\n      options\n    );\n  }\n  async authorizeConditional(queries, options) {\n    return this.makeRequest(queries, queryPermissionResponseSchema, options);\n  }\n  async makeRequest(queries, itemSchema, options) {\n    if (!this.enabled) {\n      return queries.map((_) => ({ result: AuthorizeResult.ALLOW }));\n    }\n    const request = {\n      items: queries.map((query) => ({\n        id: uuid.v4(),\n        ...query\n      }))\n    };\n    const permissionApi = await this.discovery.getBaseUrl(\"permission\");\n    const response = await fetch(`${permissionApi}/authorize`, {\n      method: \"POST\",\n      body: JSON.stringify(request),\n      headers: {\n        ...this.getAuthorizationHeader(options == null ? void 0 : options.token),\n        \"content-type\": \"application/json\"\n      }\n    });\n    if (!response.ok) {\n      throw await ResponseError.fromResponse(response);\n    }\n    const responseBody = await response.json();\n    const parsedResponse = responseSchema(\n      itemSchema,\n      new Set(request.items.map(({ id }) => id))\n    ).parse(responseBody);\n    const responsesById = parsedResponse.items.reduce((acc, r) => {\n      acc[r.id] = r;\n      return acc;\n    }, {});\n    return request.items.map((query) => responsesById[query.id]);\n  }\n  getAuthorizationHeader(token) {\n    return token ? { Authorization: `Bearer ${token}` } : {};\n  }\n}\n\nexport { AuthorizeResult, PermissionClient, createPermission, isCreatePermission, isDeletePermission, isPermission, isReadPermission, isResourcePermission, isUpdatePermission, toPermissionEvaluator };\n//# sourceMappingURL=index.esm.js.map\n","import React from 'react';\nimport { Route } from 'react-router';\nimport { createApiRef, useApi, useApp } from '@backstage/core-plugin-api';\nimport { PermissionClient, isResourcePermission, AuthorizeResult } from '@backstage/plugin-permission-common';\nimport useSWR from 'swr';\n\nconst permissionApiRef = createApiRef({\n  id: \"plugin.permission.api\"\n});\n\nclass IdentityPermissionApi {\n  constructor(permissionClient, identityApi) {\n    this.permissionClient = permissionClient;\n    this.identityApi = identityApi;\n  }\n  static create(options) {\n    const { config, discovery, identity } = options;\n    const permissionClient = new PermissionClient({ discovery, config });\n    return new IdentityPermissionApi(permissionClient, identity);\n  }\n  async authorize(request) {\n    const response = await this.permissionClient.authorize(\n      [request],\n      await this.identityApi.getCredentials()\n    );\n    return response[0];\n  }\n}\n\nfunction usePermission(input) {\n  const permissionApi = useApi(permissionApiRef);\n  const { data, error } = useSWR(input, async (args) => {\n    if (isResourcePermission(args.permission) && !args.resourceRef) {\n      return AuthorizeResult.DENY;\n    }\n    const { result } = await permissionApi.authorize(args);\n    return result;\n  });\n  if (error) {\n    return { error, loading: false, allowed: false };\n  }\n  if (data === void 0) {\n    return { loading: true, allowed: false };\n  }\n  return { loading: false, allowed: data === AuthorizeResult.ALLOW };\n}\n\nconst PermissionedRoute = (props) => {\n  const { permission, resourceRef, errorComponent, ...otherProps } = props;\n  const permissionResult = usePermission(\n    isResourcePermission(permission) ? { permission, resourceRef } : { permission }\n  );\n  const app = useApp();\n  const { NotFoundErrorPage } = app.getComponents();\n  let shownElement = errorComponent === void 0 ? /* @__PURE__ */ React.createElement(NotFoundErrorPage, null) : errorComponent;\n  if (permissionResult.loading) {\n    shownElement = null;\n  } else if (permissionResult.allowed) {\n    shownElement = props.element;\n  }\n  return /* @__PURE__ */ React.createElement(Route, {\n    ...otherProps,\n    element: shownElement\n  });\n};\n\nfunction RequirePermission(props) {\n  const { permission, resourceRef } = props;\n  const permissionResult = usePermission(\n    isResourcePermission(permission) ? { permission, resourceRef } : { permission }\n  );\n  const app = useApp();\n  if (permissionResult.loading) {\n    return null;\n  } else if (permissionResult.allowed) {\n    return /* @__PURE__ */ React.createElement(React.Fragment, null, props.children);\n  }\n  if (props.errorPage) {\n    return /* @__PURE__ */ React.createElement(React.Fragment, null, props.errorPage);\n  }\n  const { NotFoundErrorPage } = app.getComponents();\n  return /* @__PURE__ */ React.createElement(NotFoundErrorPage, null);\n}\n\nexport { IdentityPermissionApi, PermissionedRoute, RequirePermission, permissionApiRef, usePermission };\n//# sourceMappingURL=index.esm.js.map\n","import { parseEntityRef, KubernetesValidatorFunctions, makeValidator, RELATION_OWNED_BY } from '@backstage/catalog-model';\nimport { createApiRef, useApi, identityApiRef, attachComponentData, createExternalRouteRef, createRouteRef, createSubRouteRef, createPlugin, createApiFactory, discoveryApiRef, fetchApiRef, createRoutableExtension, alertApiRef, useApp, useRouteRef, useRouteRefParams } from '@backstage/core-plugin-api';\nimport { ResponseError } from '@backstage/errors';\nimport qs from 'qs';\nimport ObservableImpl from 'zen-observable';\nimport { catalogApiRef, humanizeEntityRef, useEntityTypeFilter, entityRouteRef } from '@backstage/plugin-catalog-react';\nimport { TextField, FormControl as FormControl$1, Box, Typography, FormControlLabel, Checkbox, makeStyles, Grid, StepButton, Paper, Button, CircularProgress } from '@material-ui/core';\nimport FormControl from '@material-ui/core/FormControl';\nimport Autocomplete from '@material-ui/lab/Autocomplete';\nimport React, { useCallback, useEffect, useState, createContext, useContext, useMemo, useRef, memo } from 'react';\nimport useAsync from 'react-use/lib/useAsync';\nimport useEffectOnce from 'react-use/lib/useEffectOnce';\nimport { Autocomplete as Autocomplete$1 } from '@material-ui/lab';\nimport { scmIntegrationsApiRef, scmAuthApiRef } from '@backstage/integration-react';\nimport FormHelperText from '@material-ui/core/FormHelperText';\nimport Input from '@material-ui/core/Input';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport { Select, Progress, DismissableBanner, Link, Page, Header, Content, ErrorPage, LogViewer } from '@backstage/core-components';\nimport useDebounce from 'react-use/lib/useDebounce';\nimport capitalize from 'lodash/capitalize';\nimport CheckBoxIcon from '@material-ui/icons/CheckBox';\nimport CheckBoxOutlineBlankIcon from '@material-ui/icons/CheckBoxOutlineBlank';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport Grid$1 from '@material-ui/core/Grid';\nimport Step from '@material-ui/core/Step';\nimport StepLabel from '@material-ui/core/StepLabel';\nimport Stepper from '@material-ui/core/Stepper';\nimport { makeStyles as makeStyles$1, createStyles } from '@material-ui/core/styles';\nimport Typography$1 from '@material-ui/core/Typography';\nimport Cancel from '@material-ui/icons/Cancel';\nimport Check from '@material-ui/icons/Check';\nimport FiberManualRecordIcon from '@material-ui/icons/FiberManualRecord';\nimport classNames from 'classnames';\nimport { DateTime, Interval } from 'luxon';\nimport { useNavigate } from 'react-router';\nimport useInterval from 'react-use/lib/useInterval';\nimport { useImmerReducer } from 'use-immer';\nimport LanguageIcon from '@material-ui/icons/Language';\n\nconst scaffolderApiRef = createApiRef({\n  id: \"plugin.scaffolder.service\"\n});\nclass ScaffolderClient {\n  constructor(options) {\n    var _a, _b;\n    this.discoveryApi = options.discoveryApi;\n    this.fetchApi = (_a = options.fetchApi) != null ? _a : { fetch };\n    this.scmIntegrationsApi = options.scmIntegrationsApi;\n    this.useLongPollingLogs = (_b = options.useLongPollingLogs) != null ? _b : false;\n    this.identityApi = options.identityApi;\n  }\n  async listTasks(options) {\n    if (!this.identityApi) {\n      throw new Error(\n        \"IdentityApi is not available in the ScaffolderClient, please pass through the IdentityApi to the ScaffolderClient constructor in order to use the listTasks method\"\n      );\n    }\n    const baseUrl = await this.discoveryApi.getBaseUrl(\"scaffolder\");\n    const { userEntityRef } = await this.identityApi.getBackstageIdentity();\n    const query = qs.stringify(\n      options.filterByOwnership === \"owned\" ? { createdBy: userEntityRef } : {}\n    );\n    const response = await this.fetchApi.fetch(`${baseUrl}/v2/tasks?${query}`);\n    if (!response.ok) {\n      throw await ResponseError.fromResponse(response);\n    }\n    return await response.json();\n  }\n  async getIntegrationsList(options) {\n    const integrations = [\n      ...this.scmIntegrationsApi.azure.list(),\n      ...this.scmIntegrationsApi.bitbucket.list().filter(\n        (item) => !this.scmIntegrationsApi.bitbucketCloud.byHost(item.config.host) && !this.scmIntegrationsApi.bitbucketServer.byHost(item.config.host)\n      ),\n      ...this.scmIntegrationsApi.bitbucketCloud.list(),\n      ...this.scmIntegrationsApi.bitbucketServer.list(),\n      ...this.scmIntegrationsApi.gerrit.list(),\n      ...this.scmIntegrationsApi.github.list(),\n      ...this.scmIntegrationsApi.gitlab.list()\n    ].map((c) => ({ type: c.type, title: c.title, host: c.config.host })).filter((c) => options.allowedHosts.includes(c.host));\n    return {\n      integrations\n    };\n  }\n  async getTemplateParameterSchema(templateRef) {\n    const { namespace, kind, name } = parseEntityRef(templateRef, {\n      defaultKind: \"template\"\n    });\n    const baseUrl = await this.discoveryApi.getBaseUrl(\"scaffolder\");\n    const templatePath = [namespace, kind, name].map((s) => encodeURIComponent(s)).join(\"/\");\n    const url = `${baseUrl}/v2/templates/${templatePath}/parameter-schema`;\n    const response = await this.fetchApi.fetch(url);\n    if (!response.ok) {\n      throw await ResponseError.fromResponse(response);\n    }\n    const schema = await response.json();\n    return schema;\n  }\n  async scaffold(options) {\n    const { templateRef, values, secrets = {} } = options;\n    const url = `${await this.discoveryApi.getBaseUrl(\"scaffolder\")}/v2/tasks`;\n    const response = await this.fetchApi.fetch(url, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        templateRef,\n        values: { ...values },\n        secrets\n      })\n    });\n    if (response.status !== 201) {\n      const status = `${response.status} ${response.statusText}`;\n      const body = await response.text();\n      throw new Error(`Backend request failed, ${status} ${body.trim()}`);\n    }\n    const { id } = await response.json();\n    return { taskId: id };\n  }\n  async getTask(taskId) {\n    const baseUrl = await this.discoveryApi.getBaseUrl(\"scaffolder\");\n    const url = `${baseUrl}/v2/tasks/${encodeURIComponent(taskId)}`;\n    const response = await this.fetchApi.fetch(url);\n    if (!response.ok) {\n      throw await ResponseError.fromResponse(response);\n    }\n    return await response.json();\n  }\n  streamLogs(options) {\n    if (this.useLongPollingLogs) {\n      return this.streamLogsPolling(options);\n    }\n    return this.streamLogsEventStream(options);\n  }\n  async dryRun(options) {\n    const baseUrl = await this.discoveryApi.getBaseUrl(\"scaffolder\");\n    const response = await this.fetchApi.fetch(`${baseUrl}/v2/dry-run`, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        template: options.template,\n        values: options.values,\n        secrets: options.secrets,\n        directoryContents: options.directoryContents\n      })\n    });\n    if (!response.ok) {\n      throw await ResponseError.fromResponse(response);\n    }\n    return response.json();\n  }\n  streamLogsEventStream({\n    taskId,\n    after\n  }) {\n    return new ObservableImpl((subscriber) => {\n      const params = new URLSearchParams();\n      if (after !== void 0) {\n        params.set(\"after\", String(Number(after)));\n      }\n      this.discoveryApi.getBaseUrl(\"scaffolder\").then(\n        (baseUrl) => {\n          const url = `${baseUrl}/v2/tasks/${encodeURIComponent(\n            taskId\n          )}/eventstream`;\n          const eventSource = new EventSource(url, { withCredentials: true });\n          eventSource.addEventListener(\"log\", (event) => {\n            if (event.data) {\n              try {\n                subscriber.next(JSON.parse(event.data));\n              } catch (ex) {\n                subscriber.error(ex);\n              }\n            }\n          });\n          eventSource.addEventListener(\"completion\", (event) => {\n            if (event.data) {\n              try {\n                subscriber.next(JSON.parse(event.data));\n              } catch (ex) {\n                subscriber.error(ex);\n              }\n            }\n            eventSource.close();\n            subscriber.complete();\n          });\n          eventSource.addEventListener(\"error\", (event) => {\n            subscriber.error(event);\n          });\n        },\n        (error) => {\n          subscriber.error(error);\n        }\n      );\n    });\n  }\n  streamLogsPolling({\n    taskId,\n    after: inputAfter\n  }) {\n    let after = inputAfter;\n    return new ObservableImpl((subscriber) => {\n      this.discoveryApi.getBaseUrl(\"scaffolder\").then(async (baseUrl) => {\n        while (!subscriber.closed) {\n          const url = `${baseUrl}/v2/tasks/${encodeURIComponent(\n            taskId\n          )}/events?${qs.stringify({ after })}`;\n          const response = await this.fetchApi.fetch(url);\n          if (!response.ok) {\n            await new Promise((resolve) => setTimeout(resolve, 1e3));\n            continue;\n          }\n          const logs = await response.json();\n          for (const event of logs) {\n            after = Number(event.id);\n            subscriber.next(event);\n            if (event.type === \"completion\") {\n              subscriber.complete();\n              return;\n            }\n          }\n        }\n      });\n    });\n  }\n  async listActions() {\n    const baseUrl = await this.discoveryApi.getBaseUrl(\"scaffolder\");\n    const response = await this.fetchApi.fetch(`${baseUrl}/v2/actions`);\n    if (!response.ok) {\n      throw await ResponseError.fromResponse(response);\n    }\n    return await response.json();\n  }\n}\n\nconst EntityPicker = (props) => {\n  var _a, _b, _c, _d, _e;\n  const {\n    onChange,\n    schema: { title = \"Entity\", description = \"An entity from the catalog\" },\n    required,\n    uiSchema,\n    rawErrors,\n    formData,\n    idSchema\n  } = props;\n  const allowedKinds = (_a = uiSchema[\"ui:options\"]) == null ? void 0 : _a.allowedKinds;\n  const defaultKind = (_b = uiSchema[\"ui:options\"]) == null ? void 0 : _b.defaultKind;\n  const defaultNamespace = (_c = uiSchema[\"ui:options\"]) == null ? void 0 : _c.defaultNamespace;\n  const catalogApi = useApi(catalogApiRef);\n  const { value: entities, loading } = useAsync(\n    () => catalogApi.getEntities(\n      allowedKinds ? { filter: { kind: allowedKinds } } : void 0\n    )\n  );\n  const entityRefs = entities == null ? void 0 : entities.items.map(\n    (e) => humanizeEntityRef(e, { defaultKind, defaultNamespace })\n  );\n  const onSelect = useCallback(\n    (_, value) => {\n      onChange(value != null ? value : void 0);\n    },\n    [onChange]\n  );\n  useEffect(() => {\n    if ((entityRefs == null ? void 0 : entityRefs.length) === 1) {\n      onChange(entityRefs[0]);\n    }\n  }, [entityRefs, onChange]);\n  return /* @__PURE__ */ React.createElement(FormControl, {\n    margin: \"normal\",\n    required,\n    error: (rawErrors == null ? void 0 : rawErrors.length) > 0 && !formData\n  }, /* @__PURE__ */ React.createElement(Autocomplete, {\n    disabled: (entityRefs == null ? void 0 : entityRefs.length) === 1,\n    id: idSchema == null ? void 0 : idSchema.$id,\n    value: formData || \"\",\n    loading,\n    onChange: onSelect,\n    options: entityRefs || [],\n    autoSelect: true,\n    freeSolo: (_e = (_d = uiSchema[\"ui:options\"]) == null ? void 0 : _d.allowArbitraryValues) != null ? _e : true,\n    renderInput: (params) => /* @__PURE__ */ React.createElement(TextField, {\n      ...params,\n      label: title,\n      margin: \"dense\",\n      helperText: description,\n      FormHelperTextProps: { margin: \"dense\", style: { marginLeft: 0 } },\n      variant: \"outlined\",\n      required,\n      InputProps: params.InputProps\n    })\n  }));\n};\n\nconst EntityNamePicker = (props) => {\n  const {\n    onChange,\n    required,\n    schema: { title = \"Name\", description = \"Unique name of the component\" },\n    rawErrors,\n    formData,\n    uiSchema: { \"ui:autofocus\": autoFocus },\n    idSchema,\n    placeholder\n  } = props;\n  return /* @__PURE__ */ React.createElement(TextField, {\n    id: idSchema == null ? void 0 : idSchema.$id,\n    label: title,\n    placeholder,\n    helperText: description,\n    required,\n    value: formData != null ? formData : \"\",\n    onChange: ({ target: { value } }) => onChange(value),\n    margin: \"normal\",\n    error: (rawErrors == null ? void 0 : rawErrors.length) > 0 && !formData,\n    inputProps: { autoFocus }\n  });\n};\n\nconst entityNamePickerValidation = (value, validation) => {\n  if (!KubernetesValidatorFunctions.isValidObjectName(value)) {\n    validation.addError(\n      \"must start and end with an alphanumeric character, and contain only alphanumeric characters, hyphens, underscores, and periods. Maximum length is 63 characters.\"\n    );\n  }\n};\n\nconst EntityTagsPicker = (props) => {\n  var _a, _b, _c;\n  const { formData, onChange, uiSchema } = props;\n  const catalogApi = useApi(catalogApiRef);\n  const [tagOptions, setTagOptions] = useState([]);\n  const [inputValue, setInputValue] = useState(\"\");\n  const [inputError, setInputError] = useState(false);\n  const tagValidator = makeValidator().isValidTag;\n  const kinds = (_a = uiSchema[\"ui:options\"]) == null ? void 0 : _a.kinds;\n  const showCounts = (_b = uiSchema[\"ui:options\"]) == null ? void 0 : _b.showCounts;\n  const helperText = (_c = uiSchema[\"ui:options\"]) == null ? void 0 : _c.helperText;\n  const { loading, value: existingTags } = useAsync(async () => {\n    const facet = \"metadata.tags\";\n    const tagsRequest = { facets: [facet] };\n    if (kinds) {\n      tagsRequest.filter = { kind: kinds };\n    }\n    const { facets } = await catalogApi.getEntityFacets(tagsRequest);\n    const tagFacets = Object.fromEntries(\n      facets[facet].map(({ value, count }) => [value, count])\n    );\n    setTagOptions(\n      Object.keys(tagFacets).sort(\n        (a, b) => showCounts ? tagFacets[b] - tagFacets[a] : a.localeCompare(b)\n      )\n    );\n    return tagFacets;\n  });\n  const setTags = (_, values) => {\n    let hasError = false;\n    let addDuplicate = false;\n    const currentTags = formData || [];\n    if ((values == null ? void 0 : values.length) && currentTags.length < values.length) {\n      const newTag = values[values.length - 1] = values[values.length - 1].toLocaleLowerCase(\"en-US\").trim();\n      hasError = !tagValidator(newTag);\n      addDuplicate = currentTags.indexOf(newTag) !== -1;\n    }\n    setInputError(hasError);\n    setInputValue(!hasError ? \"\" : inputValue);\n    if (!hasError && !addDuplicate) {\n      onChange(values || []);\n    }\n  };\n  useEffectOnce(() => onChange(formData || []));\n  return /* @__PURE__ */ React.createElement(FormControl$1, {\n    margin: \"normal\"\n  }, /* @__PURE__ */ React.createElement(Autocomplete$1, {\n    multiple: true,\n    freeSolo: true,\n    filterSelectedOptions: true,\n    onChange: setTags,\n    value: formData || [],\n    inputValue,\n    loading,\n    options: tagOptions,\n    ChipProps: { size: \"small\" },\n    renderOption: (option) => showCounts ? `${option} (${existingTags == null ? void 0 : existingTags[option]})` : option,\n    renderInput: (params) => /* @__PURE__ */ React.createElement(TextField, {\n      ...params,\n      label: \"Tags\",\n      onChange: (e) => setInputValue(e.target.value),\n      error: inputError,\n      helperText: helperText != null ? helperText : \"Add any relevant tags, hit 'Enter' to add new tags. Valid format: [a-z0-9+#] separated by [-], at most 63 characters\"\n    })\n  }));\n};\n\nconst OwnerPicker = (props) => {\n  var _a, _b, _c, _d;\n  const {\n    schema: { title = \"Owner\", description = \"The owner of the component\" },\n    uiSchema,\n    ...restProps\n  } = props;\n  const defaultNamespace = (_a = uiSchema[\"ui:options\"]) == null ? void 0 : _a.defaultNamespace;\n  const ownerUiSchema = {\n    ...uiSchema,\n    \"ui:options\": {\n      allowedKinds: ((_b = uiSchema[\"ui:options\"]) == null ? void 0 : _b.allowedKinds) || [\n        \"Group\",\n        \"User\"\n      ],\n      defaultKind: \"Group\",\n      allowArbitraryValues: (_d = (_c = uiSchema[\"ui:options\"]) == null ? void 0 : _c.allowArbitraryValues) != null ? _d : true,\n      ...defaultNamespace !== void 0 ? { defaultNamespace } : {}\n    }\n  };\n  return /* @__PURE__ */ React.createElement(EntityPicker, {\n    ...restProps,\n    schema: { title, description },\n    uiSchema: ownerUiSchema\n  });\n};\n\nconst GithubRepoPicker = (props) => {\n  const { allowedOwners = [], rawErrors, state, onChange } = props;\n  const ownerItems = allowedOwners ? allowedOwners.map((i) => ({ label: i, value: i })) : [{ label: \"Loading...\", value: \"loading\" }];\n  const { owner } = state;\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(FormControl, {\n    margin: \"normal\",\n    required: true,\n    error: (rawErrors == null ? void 0 : rawErrors.length) > 0 && !owner\n  }, (allowedOwners == null ? void 0 : allowedOwners.length) ? /* @__PURE__ */ React.createElement(Select, {\n    native: true,\n    label: \"Owner Available\",\n    onChange: (s) => onChange({ owner: String(Array.isArray(s) ? s[0] : s) }),\n    disabled: allowedOwners.length === 1,\n    selected: owner,\n    items: ownerItems\n  }) : /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(InputLabel, {\n    htmlFor: \"ownerInput\"\n  }, \"Owner\"), /* @__PURE__ */ React.createElement(Input, {\n    id: \"ownerInput\",\n    onChange: (e) => onChange({ owner: e.target.value }),\n    value: owner\n  })), /* @__PURE__ */ React.createElement(FormHelperText, null, \"The organization, user or project that this repo will belong to\")));\n};\n\nconst GitlabRepoPicker = (props) => {\n  const { allowedOwners = [], state, onChange, rawErrors } = props;\n  const ownerItems = allowedOwners ? allowedOwners.map((i) => ({ label: i, value: i })) : [{ label: \"Loading...\", value: \"loading\" }];\n  const { owner } = state;\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(FormControl, {\n    margin: \"normal\",\n    required: true,\n    error: (rawErrors == null ? void 0 : rawErrors.length) > 0 && !owner\n  }, (allowedOwners == null ? void 0 : allowedOwners.length) ? /* @__PURE__ */ React.createElement(Select, {\n    native: true,\n    label: \"Owner Available\",\n    onChange: (selected) => onChange({\n      owner: String(Array.isArray(selected) ? selected[0] : selected)\n    }),\n    disabled: allowedOwners.length === 1,\n    selected: owner,\n    items: ownerItems\n  }) : /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(InputLabel, {\n    htmlFor: \"ownerInput\"\n  }, \"Owner\"), /* @__PURE__ */ React.createElement(Input, {\n    id: \"ownerInput\",\n    onChange: (e) => onChange({ owner: e.target.value }),\n    value: owner\n  })), /* @__PURE__ */ React.createElement(FormHelperText, null, \"GitLab namespace where this repository will belong to. It can be the name of organization, group, subgroup, user, or the project.\")));\n};\n\nconst AzureRepoPicker = (props) => {\n  const {\n    allowedOrganizations = [],\n    allowedOwners = [],\n    rawErrors,\n    state,\n    onChange\n  } = props;\n  const organizationItems = allowedOrganizations ? allowedOrganizations.map((i) => ({ label: i, value: i })) : [{ label: \"Loading...\", value: \"loading\" }];\n  const ownerItems = allowedOwners ? allowedOwners.map((i) => ({ label: i, value: i })) : [{ label: \"Loading...\", value: \"loading\" }];\n  const { organization, owner } = state;\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(FormControl, {\n    margin: \"normal\",\n    required: true,\n    error: (rawErrors == null ? void 0 : rawErrors.length) > 0 && !organization\n  }, (allowedOrganizations == null ? void 0 : allowedOrganizations.length) ? /* @__PURE__ */ React.createElement(Select, {\n    native: true,\n    label: \"Organization\",\n    onChange: (s) => onChange({ organization: String(Array.isArray(s) ? s[0] : s) }),\n    disabled: allowedOrganizations.length === 1,\n    selected: organization,\n    items: organizationItems\n  }) : /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(InputLabel, {\n    htmlFor: \"orgInput\"\n  }, \"Organization\"), /* @__PURE__ */ React.createElement(Input, {\n    id: \"orgInput\",\n    onChange: (e) => onChange({ organization: e.target.value }),\n    value: organization\n  })), /* @__PURE__ */ React.createElement(FormHelperText, null, \"The Organization that this repo will belong to\")), /* @__PURE__ */ React.createElement(FormControl, {\n    margin: \"normal\",\n    required: true,\n    error: (rawErrors == null ? void 0 : rawErrors.length) > 0 && !owner\n  }, (allowedOwners == null ? void 0 : allowedOwners.length) ? /* @__PURE__ */ React.createElement(Select, {\n    native: true,\n    label: \"Owner\",\n    onChange: (s) => onChange({ owner: String(Array.isArray(s) ? s[0] : s) }),\n    disabled: allowedOwners.length === 1,\n    selected: owner,\n    items: ownerItems\n  }) : /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(InputLabel, {\n    htmlFor: \"ownerInput\"\n  }, \"Project\"), /* @__PURE__ */ React.createElement(Input, {\n    id: \"ownerInput\",\n    onChange: (e) => onChange({ owner: e.target.value }),\n    value: owner\n  })), /* @__PURE__ */ React.createElement(FormHelperText, null, \"The Project that this repo will belong to\")));\n};\n\nconst BitbucketRepoPicker = (props) => {\n  const { allowedOwners = [], onChange, rawErrors, state } = props;\n  const { host, workspace, project } = state;\n  const ownerItems = allowedOwners ? allowedOwners == null ? void 0 : allowedOwners.map((i) => ({ label: i, value: i })) : [];\n  useEffect(() => {\n    if (host === \"bitbucket.org\" && allowedOwners.length) {\n      onChange({ workspace: allowedOwners[0] });\n    }\n  }, [allowedOwners, host, onChange]);\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, host === \"bitbucket.org\" && /* @__PURE__ */ React.createElement(FormControl, {\n    margin: \"normal\",\n    required: true,\n    error: (rawErrors == null ? void 0 : rawErrors.length) > 0 && !workspace\n  }, (allowedOwners == null ? void 0 : allowedOwners.length) ? /* @__PURE__ */ React.createElement(Select, {\n    native: true,\n    label: \"Allowed Workspaces\",\n    onChange: (s) => onChange({ workspace: String(Array.isArray(s) ? s[0] : s) }),\n    disabled: allowedOwners.length === 1,\n    selected: workspace,\n    items: ownerItems\n  }) : /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(InputLabel, {\n    htmlFor: \"workspaceInput\"\n  }, \"Workspace\"), /* @__PURE__ */ React.createElement(Input, {\n    id: \"workspaceInput\",\n    onChange: (e) => onChange({ workspace: e.target.value }),\n    value: workspace\n  })), /* @__PURE__ */ React.createElement(FormHelperText, null, \"The Organization that this repo will belong to\")), /* @__PURE__ */ React.createElement(FormControl, {\n    margin: \"normal\",\n    required: true,\n    error: (rawErrors == null ? void 0 : rawErrors.length) > 0 && !project\n  }, /* @__PURE__ */ React.createElement(InputLabel, {\n    htmlFor: \"projectInput\"\n  }, \"Project\"), /* @__PURE__ */ React.createElement(Input, {\n    id: \"projectInput\",\n    onChange: (e) => onChange({ project: e.target.value }),\n    value: project\n  }), /* @__PURE__ */ React.createElement(FormHelperText, null, \"The Project that this repo will belong to\")));\n};\n\nconst GerritRepoPicker = (props) => {\n  const { onChange, rawErrors, state } = props;\n  const { workspace, owner } = state;\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(FormControl, {\n    margin: \"normal\",\n    error: (rawErrors == null ? void 0 : rawErrors.length) > 0 && !workspace\n  }, /* @__PURE__ */ React.createElement(InputLabel, {\n    htmlFor: \"ownerInput\"\n  }, \"Owner\"), /* @__PURE__ */ React.createElement(Input, {\n    id: \"ownerInput\",\n    onChange: (e) => onChange({ owner: e.target.value }),\n    value: owner\n  }), /* @__PURE__ */ React.createElement(FormHelperText, null, \"The owner of the project (optional)\")), /* @__PURE__ */ React.createElement(FormControl, {\n    margin: \"normal\",\n    required: true,\n    error: (rawErrors == null ? void 0 : rawErrors.length) > 0 && !workspace\n  }, /* @__PURE__ */ React.createElement(InputLabel, {\n    htmlFor: \"parentInput\"\n  }, \"Parent\"), /* @__PURE__ */ React.createElement(Input, {\n    id: \"parentInput\",\n    onChange: (e) => onChange({ workspace: e.target.value }),\n    value: workspace\n  }), /* @__PURE__ */ React.createElement(FormHelperText, null, \"The project parent that the repo will belong to\")));\n};\n\nconst RepoUrlPickerHost = (props) => {\n  const { host, hosts, onChange, rawErrors } = props;\n  const scaffolderApi = useApi(scaffolderApiRef);\n  const { value: { integrations } = { integrations: [] }, loading } = useAsync(\n    async () => {\n      return await scaffolderApi.getIntegrationsList({\n        allowedHosts: hosts != null ? hosts : []\n      });\n    }\n  );\n  useEffect(() => {\n    if (!host) {\n      if (hosts == null ? void 0 : hosts.length) {\n        onChange(hosts[0]);\n      } else if (integrations == null ? void 0 : integrations.length) {\n        onChange(integrations[0].host);\n      }\n    }\n  }, [hosts, host, onChange, integrations]);\n  const hostsOptions = integrations ? integrations.filter((i) => (hosts == null ? void 0 : hosts.length) ? hosts == null ? void 0 : hosts.includes(i.host) : true).map((i) => ({ label: i.title, value: i.host })) : [{ label: \"Loading...\", value: \"loading\" }];\n  if (loading) {\n    return /* @__PURE__ */ React.createElement(Progress, null);\n  }\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(FormControl, {\n    margin: \"normal\",\n    required: true,\n    error: (rawErrors == null ? void 0 : rawErrors.length) > 0 && !host\n  }, /* @__PURE__ */ React.createElement(Select, {\n    native: true,\n    disabled: (hosts == null ? void 0 : hosts.length) === 1,\n    label: \"Host\",\n    onChange: (s) => onChange(String(Array.isArray(s) ? s[0] : s)),\n    selected: host,\n    items: hostsOptions,\n    \"data-testid\": \"host-select\"\n  }), /* @__PURE__ */ React.createElement(FormHelperText, null, \"The host where the repository will be created\")));\n};\n\nconst RepoUrlPickerRepoName = (props) => {\n  const { repoName, allowedRepos, onChange, rawErrors } = props;\n  useEffect(() => {\n    if (!repoName) {\n      if (allowedRepos == null ? void 0 : allowedRepos.length) {\n        onChange(allowedRepos[0]);\n      }\n    }\n  }, [allowedRepos, repoName, onChange]);\n  const repoItems = allowedRepos ? allowedRepos.map((i) => ({ label: i, value: i })) : [{ label: \"Loading...\", value: \"loading\" }];\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(FormControl, {\n    margin: \"normal\",\n    required: true,\n    error: (rawErrors == null ? void 0 : rawErrors.length) > 0 && !repoName\n  }, (allowedRepos == null ? void 0 : allowedRepos.length) ? /* @__PURE__ */ React.createElement(Select, {\n    native: true,\n    label: \"Repositories Available\",\n    onChange: (selected) => String(Array.isArray(selected) ? selected[0] : selected),\n    disabled: allowedRepos.length === 1,\n    selected: repoName,\n    items: repoItems\n  }) : /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(InputLabel, {\n    htmlFor: \"repoNameInput\"\n  }, \"Repository\"), /* @__PURE__ */ React.createElement(Input, {\n    id: \"repoNameInput\",\n    onChange: (e) => onChange(String(e.target.value)),\n    value: repoName\n  })), /* @__PURE__ */ React.createElement(FormHelperText, null, \"The name of the repository\")));\n};\n\nfunction serializeRepoPickerUrl(data) {\n  if (!data.host) {\n    return void 0;\n  }\n  const params = new URLSearchParams();\n  if (data.owner) {\n    params.set(\"owner\", data.owner);\n  }\n  if (data.repoName) {\n    params.set(\"repo\", data.repoName);\n  }\n  if (data.organization) {\n    params.set(\"organization\", data.organization);\n  }\n  if (data.workspace) {\n    params.set(\"workspace\", data.workspace);\n  }\n  if (data.project) {\n    params.set(\"project\", data.project);\n  }\n  return `${data.host}?${params.toString()}`;\n}\nfunction parseRepoPickerUrl(url) {\n  let host = \"\";\n  let owner = \"\";\n  let repoName = \"\";\n  let organization = \"\";\n  let workspace = \"\";\n  let project = \"\";\n  try {\n    if (url) {\n      const parsed = new URL(`https://${url}`);\n      host = parsed.host;\n      owner = parsed.searchParams.get(\"owner\") || \"\";\n      repoName = parsed.searchParams.get(\"repo\") || \"\";\n      organization = parsed.searchParams.get(\"organization\") || \"\";\n      workspace = parsed.searchParams.get(\"workspace\") || \"\";\n      project = parsed.searchParams.get(\"project\") || \"\";\n    }\n  } catch {\n  }\n  return { host, owner, repoName, organization, workspace, project };\n}\n\nconst SecretsContext = createContext(\n  void 0\n);\nconst SecretsContextProvider = ({ children }) => {\n  const [secrets, setSecrets] = useState({});\n  return /* @__PURE__ */ React.createElement(SecretsContext.Provider, {\n    value: { secrets, setSecrets }\n  }, children);\n};\nconst useTemplateSecrets = () => {\n  const value = useContext(SecretsContext);\n  if (!value) {\n    throw new Error(\n      \"useTemplateSecrets must be used within a SecretsContextProvider\"\n    );\n  }\n  const { setSecrets: updateSecrets } = value;\n  const setSecrets = useCallback(\n    (input) => {\n      updateSecrets((currentSecrets) => ({ ...currentSecrets, ...input }));\n    },\n    [updateSecrets]\n  );\n  return { setSecrets };\n};\n\nconst RepoUrlPicker = (props) => {\n  var _a, _b;\n  const { uiSchema, onChange, rawErrors, formData } = props;\n  const [state, setState] = useState(\n    parseRepoPickerUrl(formData)\n  );\n  const integrationApi = useApi(scmIntegrationsApiRef);\n  const scmAuthApi = useApi(scmAuthApiRef);\n  const { setSecrets } = useTemplateSecrets();\n  const allowedHosts = useMemo(\n    () => {\n      var _a2, _b2;\n      return (_b2 = (_a2 = uiSchema == null ? void 0 : uiSchema[\"ui:options\"]) == null ? void 0 : _a2.allowedHosts) != null ? _b2 : [];\n    },\n    [uiSchema]\n  );\n  const allowedOrganizations = useMemo(\n    () => {\n      var _a2, _b2;\n      return (_b2 = (_a2 = uiSchema == null ? void 0 : uiSchema[\"ui:options\"]) == null ? void 0 : _a2.allowedOrganizations) != null ? _b2 : [];\n    },\n    [uiSchema]\n  );\n  const allowedOwners = useMemo(\n    () => {\n      var _a2, _b2;\n      return (_b2 = (_a2 = uiSchema == null ? void 0 : uiSchema[\"ui:options\"]) == null ? void 0 : _a2.allowedOwners) != null ? _b2 : [];\n    },\n    [uiSchema]\n  );\n  const allowedRepos = useMemo(\n    () => {\n      var _a2, _b2;\n      return (_b2 = (_a2 = uiSchema == null ? void 0 : uiSchema[\"ui:options\"]) == null ? void 0 : _a2.allowedRepos) != null ? _b2 : [];\n    },\n    [uiSchema]\n  );\n  const { owner, organization, repoName } = state;\n  useEffect(() => {\n    onChange(serializeRepoPickerUrl(state));\n  }, [state, onChange]);\n  useEffect(() => {\n    if (allowedOrganizations.length > 0 && !organization) {\n      setState((prevState) => ({\n        ...prevState,\n        organization: allowedOrganizations[0]\n      }));\n    }\n  }, [setState, allowedOrganizations, organization]);\n  useEffect(() => {\n    if (allowedOwners.length > 0 && !owner) {\n      setState((prevState) => ({\n        ...prevState,\n        owner: allowedOwners[0]\n      }));\n    }\n  }, [setState, allowedOwners, owner]);\n  useEffect(() => {\n    if (allowedRepos.length > 0 && !repoName) {\n      setState((prevState) => ({ ...prevState, repoName: allowedRepos[0] }));\n    }\n  }, [setState, allowedRepos, repoName]);\n  const updateLocalState = useCallback(\n    (newState) => {\n      setState((prevState) => ({ ...prevState, ...newState }));\n    },\n    [setState]\n  );\n  useDebounce(\n    async () => {\n      var _a2;\n      const { requestUserCredentials } = (_a2 = uiSchema == null ? void 0 : uiSchema[\"ui:options\"]) != null ? _a2 : {};\n      if (!requestUserCredentials || !(state.host && state.owner && state.repoName)) {\n        return;\n      }\n      const [encodedHost, encodedOwner, encodedRepoName] = [\n        state.host,\n        state.owner,\n        state.repoName\n      ].map(encodeURIComponent);\n      const { token } = await scmAuthApi.getCredentials({\n        url: `https://${encodedHost}/${encodedOwner}/${encodedRepoName}`,\n        additionalScope: {\n          repoWrite: true,\n          customScopes: requestUserCredentials.additionalScopes\n        }\n      });\n      setSecrets({ [requestUserCredentials.secretsKey]: token });\n    },\n    500,\n    [state, uiSchema]\n  );\n  const hostType = (_b = state.host && ((_a = integrationApi.byHost(state.host)) == null ? void 0 : _a.type)) != null ? _b : null;\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(RepoUrlPickerHost, {\n    host: state.host,\n    hosts: allowedHosts,\n    onChange: (host) => setState((prevState) => ({ ...prevState, host })),\n    rawErrors\n  }), hostType === \"github\" && /* @__PURE__ */ React.createElement(GithubRepoPicker, {\n    allowedOwners,\n    onChange: updateLocalState,\n    rawErrors,\n    state\n  }), hostType === \"gitlab\" && /* @__PURE__ */ React.createElement(GitlabRepoPicker, {\n    allowedOwners,\n    rawErrors,\n    state,\n    onChange: updateLocalState\n  }), hostType === \"bitbucket\" && /* @__PURE__ */ React.createElement(BitbucketRepoPicker, {\n    allowedOwners,\n    rawErrors,\n    state,\n    onChange: updateLocalState\n  }), hostType === \"azure\" && /* @__PURE__ */ React.createElement(AzureRepoPicker, {\n    allowedOrganizations,\n    allowedOwners,\n    rawErrors,\n    state,\n    onChange: updateLocalState\n  }), hostType === \"gerrit\" && /* @__PURE__ */ React.createElement(GerritRepoPicker, {\n    rawErrors,\n    state,\n    onChange: updateLocalState\n  }), /* @__PURE__ */ React.createElement(RepoUrlPickerRepoName, {\n    repoName: state.repoName,\n    allowedRepos,\n    onChange: (repo) => setState((prevState) => ({ ...prevState, repoName: repo })),\n    rawErrors\n  }));\n};\n\nconst repoPickerValidation = (value, validation, context) => {\n  var _a, _b;\n  try {\n    const { host, searchParams } = new URL(`https://${value}`);\n    const integrationApi = context.apiHolder.get(scmIntegrationsApiRef);\n    if (!host) {\n      validation.addError(\n        \"Incomplete repository location provided, host not provided\"\n      );\n    } else {\n      if (((_a = integrationApi == null ? void 0 : integrationApi.byHost(host)) == null ? void 0 : _a.type) === \"bitbucket\") {\n        if (host === \"bitbucket.org\" && !searchParams.get(\"workspace\")) {\n          validation.addError(\n            \"Incomplete repository location provided, workspace not provided\"\n          );\n        }\n        if (!searchParams.get(\"project\")) {\n          validation.addError(\n            \"Incomplete repository location provided, project not provided\"\n          );\n        }\n      } else if (((_b = integrationApi == null ? void 0 : integrationApi.byHost(host)) == null ? void 0 : _b.type) !== \"gerrit\") {\n        if (!searchParams.get(\"owner\")) {\n          validation.addError(\n            \"Incomplete repository location provided, owner not provided\"\n          );\n        }\n      }\n      if (!searchParams.get(\"repo\")) {\n        validation.addError(\n          \"Incomplete repository location provided, repo not provided\"\n        );\n      }\n    }\n  } catch {\n    validation.addError(\"Unable to parse the Repository URL\");\n  }\n};\n\nconst OwnedEntityPicker = (props) => {\n  var _a, _b, _c, _d, _e;\n  const {\n    onChange,\n    schema: { title = \"Entity\", description = \"An entity from the catalog\" },\n    required,\n    uiSchema,\n    rawErrors,\n    formData,\n    idSchema\n  } = props;\n  const allowedKinds = (_a = uiSchema[\"ui:options\"]) == null ? void 0 : _a.allowedKinds;\n  const defaultKind = (_b = uiSchema[\"ui:options\"]) == null ? void 0 : _b.defaultKind;\n  const defaultNamespace = (_c = uiSchema[\"ui:options\"]) == null ? void 0 : _c.defaultNamespace;\n  const allowArbitraryValues = (_e = (_d = uiSchema[\"ui:options\"]) == null ? void 0 : _d.allowArbitraryValues) != null ? _e : true;\n  const { ownedEntities, loading } = useOwnedEntities(allowedKinds);\n  const entityRefs = ownedEntities == null ? void 0 : ownedEntities.items.map((e) => humanizeEntityRef(e, { defaultKind, defaultNamespace })).filter((n) => n);\n  const onSelect = (_, value) => {\n    onChange(value || \"\");\n  };\n  return /* @__PURE__ */ React.createElement(FormControl, {\n    margin: \"normal\",\n    required,\n    error: (rawErrors == null ? void 0 : rawErrors.length) > 0 && !formData\n  }, /* @__PURE__ */ React.createElement(Autocomplete, {\n    id: idSchema == null ? void 0 : idSchema.$id,\n    value: formData || \"\",\n    loading,\n    onChange: onSelect,\n    options: entityRefs || [],\n    autoSelect: true,\n    freeSolo: allowArbitraryValues,\n    renderInput: (params) => /* @__PURE__ */ React.createElement(TextField, {\n      ...params,\n      label: title,\n      margin: \"normal\",\n      helperText: description,\n      variant: \"outlined\",\n      required,\n      InputProps: params.InputProps\n    })\n  }));\n};\nfunction useOwnedEntities(allowedKinds) {\n  const identityApi = useApi(identityApiRef);\n  const catalogApi = useApi(catalogApiRef);\n  const { loading, value: refs } = useAsync(async () => {\n    const identity = await identityApi.getBackstageIdentity();\n    const identityRefs = identity.ownershipEntityRefs;\n    const catalogs = await catalogApi.getEntities(\n      allowedKinds ? {\n        filter: {\n          kind: allowedKinds,\n          [`relations.${RELATION_OWNED_BY}`]: identityRefs || []\n        }\n      } : {\n        filter: {\n          [`relations.${RELATION_OWNED_BY}`]: identityRefs || []\n        }\n      }\n    );\n    return catalogs;\n  }, []);\n  const ownedEntities = useMemo(() => {\n    return refs;\n  }, [refs]);\n  return useMemo(() => ({ loading, ownedEntities }), [loading, ownedEntities]);\n}\n\nconst FIELD_EXTENSION_WRAPPER_KEY = \"scaffolder.extensions.wrapper.v1\";\nconst FIELD_EXTENSION_KEY = \"scaffolder.extensions.field.v1\";\nfunction createScaffolderFieldExtension(options) {\n  return {\n    expose() {\n      const FieldExtensionDataHolder = () => null;\n      attachComponentData(\n        FieldExtensionDataHolder,\n        FIELD_EXTENSION_KEY,\n        options\n      );\n      return FieldExtensionDataHolder;\n    }\n  };\n}\nfunction createNextScaffolderFieldExtension(options) {\n  return {\n    expose() {\n      const FieldExtensionDataHolder = () => null;\n      attachComponentData(\n        FieldExtensionDataHolder,\n        FIELD_EXTENSION_KEY,\n        options\n      );\n      return FieldExtensionDataHolder;\n    }\n  };\n}\nconst ScaffolderFieldExtensions = () => null;\nattachComponentData(\n  ScaffolderFieldExtensions,\n  FIELD_EXTENSION_WRAPPER_KEY,\n  true\n);\n\nconst LAYOUTS_KEY = \"scaffolder.layout.v1\";\nconst LAYOUTS_WRAPPER_KEY = \"scaffolder.layouts.wrapper.v1\";\nfunction createScaffolderLayout(options) {\n  return {\n    expose() {\n      const LayoutDataHolder = () => null;\n      attachComponentData(LayoutDataHolder, LAYOUTS_KEY, options);\n      return LayoutDataHolder;\n    }\n  };\n}\nconst ScaffolderLayouts = () => null;\nattachComponentData(ScaffolderLayouts, LAYOUTS_WRAPPER_KEY, true);\n\nconst registerComponentRouteRef = createExternalRouteRef({\n  id: \"register-component\",\n  optional: true\n});\nconst viewTechDocRouteRef = createExternalRouteRef({\n  id: \"view-techdoc\",\n  optional: true,\n  params: [\"namespace\", \"kind\", \"name\"]\n});\nconst rootRouteRef = createRouteRef({\n  id: \"scaffolder\"\n});\nconst legacySelectedTemplateRouteRef = createSubRouteRef({\n  id: \"scaffolder/legacy/selected-template\",\n  parent: rootRouteRef,\n  path: \"/templates/:templateName\"\n});\nconst nextRouteRef = createRouteRef({\n  id: \"scaffolder/next\"\n});\nconst selectedTemplateRouteRef = createSubRouteRef({\n  id: \"scaffolder/selected-template\",\n  parent: rootRouteRef,\n  path: \"/templates/:namespace/:templateName\"\n});\nconst nextSelectedTemplateRouteRef = createSubRouteRef({\n  id: \"scaffolder/next/selected-template\",\n  parent: nextRouteRef,\n  path: \"/templates/:namespace/:templateName\"\n});\nconst scaffolderTaskRouteRef = createSubRouteRef({\n  id: \"scaffolder/task\",\n  parent: rootRouteRef,\n  path: \"/tasks/:taskId\"\n});\ncreateSubRouteRef({\n  id: \"scaffolder/next/task\",\n  parent: nextRouteRef,\n  path: \"/tasks/:taskId\"\n});\nconst scaffolderListTaskRouteRef = createSubRouteRef({\n  id: \"scaffolder/list-tasks\",\n  parent: rootRouteRef,\n  path: \"/tasks\"\n});\nconst actionsRouteRef = createSubRouteRef({\n  id: \"scaffolder/actions\",\n  parent: rootRouteRef,\n  path: \"/actions\"\n});\nconst editRouteRef = createSubRouteRef({\n  id: \"scaffolder/edit\",\n  parent: rootRouteRef,\n  path: \"/edit\"\n});\n\nconst scaffolderPlugin = createPlugin({\n  id: \"scaffolder\",\n  apis: [\n    createApiFactory({\n      api: scaffolderApiRef,\n      deps: {\n        discoveryApi: discoveryApiRef,\n        scmIntegrationsApi: scmIntegrationsApiRef,\n        fetchApi: fetchApiRef,\n        identityApi: identityApiRef\n      },\n      factory: ({ discoveryApi, scmIntegrationsApi, fetchApi, identityApi }) => new ScaffolderClient({\n        discoveryApi,\n        scmIntegrationsApi,\n        fetchApi,\n        identityApi\n      })\n    })\n  ],\n  routes: {\n    root: rootRouteRef\n  },\n  externalRoutes: {\n    registerComponent: registerComponentRouteRef,\n    viewTechDoc: viewTechDocRouteRef\n  }\n});\nconst EntityPickerFieldExtension = scaffolderPlugin.provide(\n  createScaffolderFieldExtension({\n    component: EntityPicker,\n    name: \"EntityPicker\"\n  })\n);\nconst EntityNamePickerFieldExtension = scaffolderPlugin.provide(\n  createScaffolderFieldExtension({\n    component: EntityNamePicker,\n    name: \"EntityNamePicker\",\n    validation: entityNamePickerValidation\n  })\n);\nconst RepoUrlPickerFieldExtension = scaffolderPlugin.provide(\n  createScaffolderFieldExtension({\n    component: RepoUrlPicker,\n    name: \"RepoUrlPicker\",\n    validation: repoPickerValidation\n  })\n);\nconst OwnerPickerFieldExtension = scaffolderPlugin.provide(\n  createScaffolderFieldExtension({\n    component: OwnerPicker,\n    name: \"OwnerPicker\"\n  })\n);\nconst ScaffolderPage = scaffolderPlugin.provide(\n  createRoutableExtension({\n    name: \"ScaffolderPage\",\n    component: () => import('./Router-4521e309.esm.js').then((m) => m.Router),\n    mountPoint: rootRouteRef\n  })\n);\nconst OwnedEntityPickerFieldExtension = scaffolderPlugin.provide(\n  createScaffolderFieldExtension({\n    component: OwnedEntityPicker,\n    name: \"OwnedEntityPicker\"\n  })\n);\nconst EntityTagsPickerFieldExtension = scaffolderPlugin.provide(\n  createScaffolderFieldExtension({\n    component: EntityTagsPicker,\n    name: \"EntityTagsPicker\"\n  })\n);\nconst NextScaffolderPage = scaffolderPlugin.provide(\n  createRoutableExtension({\n    name: \"NextScaffolderPage\",\n    component: () => import('./index-bac377e4.esm.js').then((m) => m.Router),\n    mountPoint: nextRouteRef\n  })\n);\n\nconst icon = /* @__PURE__ */ React.createElement(CheckBoxOutlineBlankIcon, {\n  fontSize: \"small\"\n});\nconst checkedIcon = /* @__PURE__ */ React.createElement(CheckBoxIcon, {\n  fontSize: \"small\"\n});\nconst TemplateTypePicker = () => {\n  const alertApi = useApi(alertApiRef);\n  const { error, loading, availableTypes, selectedTypes, setSelectedTypes } = useEntityTypeFilter();\n  if (loading)\n    return /* @__PURE__ */ React.createElement(Progress, null);\n  if (!availableTypes)\n    return null;\n  if (error) {\n    alertApi.post({\n      message: `Failed to load entity types`,\n      severity: \"error\"\n    });\n    return null;\n  }\n  return /* @__PURE__ */ React.createElement(Box, {\n    pb: 1,\n    pt: 1\n  }, /* @__PURE__ */ React.createElement(Typography, {\n    variant: \"button\"\n  }, \"Categories\"), /* @__PURE__ */ React.createElement(Autocomplete$1, {\n    multiple: true,\n    \"aria-label\": \"Categories\",\n    options: availableTypes,\n    value: selectedTypes,\n    onChange: (_, value) => setSelectedTypes(value),\n    renderOption: (option, { selected }) => /* @__PURE__ */ React.createElement(FormControlLabel, {\n      control: /* @__PURE__ */ React.createElement(Checkbox, {\n        icon,\n        checkedIcon,\n        checked: selected\n      }),\n      label: capitalize(option)\n    }),\n    size: \"small\",\n    popupIcon: /* @__PURE__ */ React.createElement(ExpandMoreIcon, {\n      \"data-testid\": \"categories-picker-expand\"\n    }),\n    renderInput: (params) => /* @__PURE__ */ React.createElement(TextField, {\n      ...params,\n      variant: \"outlined\"\n    })\n  }));\n};\n\nfunction reducer(draft, action) {\n  var _a, _b, _c;\n  switch (action.type) {\n    case \"INIT\": {\n      draft.steps = action.data.spec.steps.reduce((current, next) => {\n        current[next.id] = { status: \"open\", id: next.id };\n        return current;\n      }, {});\n      draft.stepLogs = action.data.spec.steps.reduce((current, next) => {\n        current[next.id] = [];\n        return current;\n      }, {});\n      draft.loading = false;\n      draft.error = void 0;\n      draft.completed = false;\n      draft.task = action.data;\n      return;\n    }\n    case \"LOGS\": {\n      const entries = action.data;\n      for (const entry of entries) {\n        const logLine = `${entry.createdAt} ${entry.body.message}`;\n        if (!entry.body.stepId || !((_a = draft.steps) == null ? void 0 : _a[entry.body.stepId])) {\n          continue;\n        }\n        const currentStepLog = (_b = draft.stepLogs) == null ? void 0 : _b[entry.body.stepId];\n        const currentStep = (_c = draft.steps) == null ? void 0 : _c[entry.body.stepId];\n        if (entry.body.status && entry.body.status !== currentStep.status) {\n          currentStep.status = entry.body.status;\n          if (currentStep.status === \"processing\") {\n            currentStep.startedAt = entry.createdAt;\n          }\n          if ([\"cancelled\", \"failed\", \"completed\"].includes(currentStep.status)) {\n            currentStep.endedAt = entry.createdAt;\n          }\n        }\n        currentStepLog == null ? void 0 : currentStepLog.push(logLine);\n      }\n      return;\n    }\n    case \"COMPLETED\": {\n      draft.completed = true;\n      draft.output = action.data.body.output;\n      draft.error = action.data.body.error;\n      return;\n    }\n    case \"ERROR\": {\n      draft.error = action.data;\n      draft.loading = false;\n      draft.completed = true;\n      return;\n    }\n    default:\n      return;\n  }\n}\nconst useTaskEventStream = (taskId) => {\n  const scaffolderApi = useApi(scaffolderApiRef);\n  const [state, dispatch] = useImmerReducer(reducer, {\n    loading: true,\n    completed: false,\n    stepLogs: {},\n    steps: {}\n  });\n  useEffect(() => {\n    let didCancel = false;\n    let subscription;\n    let logPusher;\n    scaffolderApi.getTask(taskId).then(\n      (task) => {\n        if (didCancel) {\n          return;\n        }\n        dispatch({ type: \"INIT\", data: task });\n        const observable = scaffolderApi.streamLogs({ taskId });\n        const collectedLogEvents = new Array();\n        function emitLogs() {\n          if (collectedLogEvents.length) {\n            const logs = collectedLogEvents.splice(\n              0,\n              collectedLogEvents.length\n            );\n            dispatch({ type: \"LOGS\", data: logs });\n          }\n        }\n        logPusher = setInterval(emitLogs, 500);\n        subscription = observable.subscribe({\n          next: (event) => {\n            switch (event.type) {\n              case \"log\":\n                return collectedLogEvents.push(event);\n              case \"completion\":\n                emitLogs();\n                dispatch({ type: \"COMPLETED\", data: event });\n                return void 0;\n              default:\n                throw new Error(\n                  `Unhandled event type ${event.type} in observer`\n                );\n            }\n          },\n          error: (error) => {\n            emitLogs();\n            dispatch({ type: \"ERROR\", data: error });\n          }\n        });\n      },\n      (error) => {\n        if (!didCancel) {\n          dispatch({ type: \"ERROR\", data: error });\n        }\n      }\n    );\n    return () => {\n      didCancel = true;\n      if (subscription) {\n        subscription.unsubscribe();\n      }\n      if (logPusher) {\n        clearInterval(logPusher);\n      }\n    };\n  }, [scaffolderApi, dispatch, taskId]);\n  return state;\n};\n\nconst TaskErrors = ({ error }) => {\n  const id = useRef(\"\");\n  useEffect(() => {\n    id.current = String(Math.random());\n  }, [error]);\n  return error ? /* @__PURE__ */ React.createElement(Box, null, /* @__PURE__ */ React.createElement(DismissableBanner, {\n    id: id.current,\n    variant: \"warning\",\n    message: error.message\n  })) : null;\n};\n\nconst useStyles$1 = makeStyles({\n  svgIcon: {\n    display: \"inline-block\",\n    \"& svg\": {\n      display: \"inline-block\",\n      fontSize: \"inherit\",\n      verticalAlign: \"baseline\"\n    }\n  }\n});\nconst IconLink = (props) => {\n  const { href, text, Icon, ...linkProps } = props;\n  const classes = useStyles$1();\n  return /* @__PURE__ */ React.createElement(Grid, {\n    container: true,\n    direction: \"row\",\n    spacing: 1\n  }, /* @__PURE__ */ React.createElement(Grid, {\n    item: true\n  }, /* @__PURE__ */ React.createElement(Typography, {\n    component: \"div\",\n    className: classes.svgIcon\n  }, Icon ? /* @__PURE__ */ React.createElement(Icon, null) : /* @__PURE__ */ React.createElement(LanguageIcon, null))), /* @__PURE__ */ React.createElement(Grid, {\n    item: true\n  }, /* @__PURE__ */ React.createElement(Link, {\n    to: href,\n    ...linkProps\n  }, text || href)));\n};\n\nconst TaskPageLinks = ({ output }) => {\n  const { links = [] } = output;\n  const app = useApp();\n  const entityRoute = useRouteRef(entityRouteRef);\n  const iconResolver = (key) => {\n    var _a;\n    return key ? (_a = app.getSystemIcon(key)) != null ? _a : LanguageIcon : LanguageIcon;\n  };\n  return /* @__PURE__ */ React.createElement(Box, {\n    px: 3,\n    pb: 3\n  }, links.filter(({ url, entityRef }) => url || entityRef).map(({ url, entityRef, title, icon }) => {\n    if (entityRef) {\n      const entityName = parseEntityRef(entityRef, {\n        defaultKind: \"<unknown>\",\n        defaultNamespace: \"<unknown>\"\n      });\n      const target = entityRoute(entityName);\n      return { title, icon, url: target };\n    }\n    return { title, icon, url };\n  }).map(({ url, title, icon }, i) => /* @__PURE__ */ React.createElement(IconLink, {\n    key: `output-link-${i}`,\n    href: url,\n    text: title != null ? title : url,\n    Icon: iconResolver(icon),\n    target: \"_blank\"\n  })));\n};\n\nconst humanizeDuration = require(\"humanize-duration\");\nconst useStyles = makeStyles$1(\n  (theme) => createStyles({\n    root: {\n      width: \"100%\"\n    },\n    button: {\n      marginBottom: theme.spacing(2),\n      marginLeft: theme.spacing(2)\n    },\n    actionsContainer: {\n      marginBottom: theme.spacing(2)\n    },\n    resetContainer: {\n      padding: theme.spacing(3)\n    },\n    labelWrapper: {\n      display: \"flex\",\n      flex: 1,\n      flexDirection: \"row\",\n      justifyContent: \"space-between\"\n    },\n    stepWrapper: {\n      width: \"100%\"\n    }\n  })\n);\nconst StepTimeTicker = ({ step }) => {\n  const [time, setTime] = useState(\"\");\n  useInterval(() => {\n    if (!step.startedAt) {\n      setTime(\"\");\n      return;\n    }\n    const end = step.endedAt ? DateTime.fromISO(step.endedAt) : DateTime.local();\n    const startedAt = DateTime.fromISO(step.startedAt);\n    const formatted = Interval.fromDateTimes(startedAt, end).toDuration().valueOf();\n    setTime(humanizeDuration(formatted, { round: true }));\n  }, 1e3);\n  return /* @__PURE__ */ React.createElement(Typography$1, {\n    variant: \"caption\"\n  }, time);\n};\nconst useStepIconStyles = makeStyles$1(\n  (theme) => createStyles({\n    root: {\n      color: theme.palette.text.disabled,\n      display: \"flex\",\n      height: 22,\n      alignItems: \"center\"\n    },\n    completed: {\n      color: theme.palette.status.ok\n    },\n    error: {\n      color: theme.palette.status.error\n    }\n  })\n);\nfunction TaskStepIconComponent(props) {\n  const classes = useStepIconStyles();\n  const { active, completed, error } = props;\n  const getMiddle = () => {\n    if (active) {\n      return /* @__PURE__ */ React.createElement(CircularProgress, {\n        size: \"24px\"\n      });\n    }\n    if (completed) {\n      return /* @__PURE__ */ React.createElement(Check, null);\n    }\n    if (error) {\n      return /* @__PURE__ */ React.createElement(Cancel, null);\n    }\n    return /* @__PURE__ */ React.createElement(FiberManualRecordIcon, null);\n  };\n  return /* @__PURE__ */ React.createElement(\"div\", {\n    className: classNames(classes.root, {\n      [classes.completed]: completed,\n      [classes.error]: error\n    })\n  }, getMiddle());\n}\nconst TaskStatusStepper = memo(\n  (props) => {\n    const { steps, currentStepId, onUserStepChange } = props;\n    const classes = useStyles(props);\n    return /* @__PURE__ */ React.createElement(\"div\", {\n      className: classes.root\n    }, /* @__PURE__ */ React.createElement(Stepper, {\n      activeStep: steps.findIndex((s) => s.id === currentStepId),\n      orientation: \"vertical\",\n      nonLinear: true\n    }, steps.map((step, index) => {\n      const isCompleted = step.status === \"completed\";\n      const isFailed = step.status === \"failed\";\n      const isActive = step.status === \"processing\";\n      const isSkipped = step.status === \"skipped\";\n      return /* @__PURE__ */ React.createElement(Step, {\n        key: String(index),\n        expanded: true\n      }, /* @__PURE__ */ React.createElement(StepButton, {\n        onClick: () => onUserStepChange(step.id)\n      }, /* @__PURE__ */ React.createElement(StepLabel, {\n        StepIconProps: {\n          completed: isCompleted,\n          error: isFailed,\n          active: isActive\n        },\n        StepIconComponent: TaskStepIconComponent,\n        className: classes.stepWrapper\n      }, /* @__PURE__ */ React.createElement(\"div\", {\n        className: classes.labelWrapper\n      }, /* @__PURE__ */ React.createElement(Typography$1, {\n        variant: \"subtitle2\"\n      }, step.name), isSkipped ? /* @__PURE__ */ React.createElement(Typography$1, {\n        variant: \"caption\"\n      }, \"Skipped\") : /* @__PURE__ */ React.createElement(StepTimeTicker, {\n        step\n      })))));\n    })));\n  }\n);\nconst hasLinks = ({ links = [] }) => links.length > 0;\nconst TaskPage = ({ loadingText }) => {\n  const classes = useStyles();\n  const navigate = useNavigate();\n  const rootPath = useRouteRef(rootRouteRef);\n  const templateRoute = useRouteRef(selectedTemplateRouteRef);\n  const [userSelectedStepId, setUserSelectedStepId] = useState(void 0);\n  const [lastActiveStepId, setLastActiveStepId] = useState(\n    void 0\n  );\n  const { taskId } = useRouteRefParams(scaffolderTaskRouteRef);\n  const taskStream = useTaskEventStream(taskId);\n  const completed = taskStream.completed;\n  const steps = useMemo(\n    () => {\n      var _a, _b;\n      return (_b = (_a = taskStream.task) == null ? void 0 : _a.spec.steps.map((step) => {\n        var _a2;\n        return {\n          ...step,\n          ...(_a2 = taskStream == null ? void 0 : taskStream.steps) == null ? void 0 : _a2[step.id]\n        };\n      })) != null ? _b : [];\n    },\n    [taskStream]\n  );\n  useEffect(() => {\n    var _a;\n    const mostRecentFailedOrActiveStep = steps.find(\n      (step) => [\"failed\", \"processing\"].includes(step.status)\n    );\n    if (completed && !mostRecentFailedOrActiveStep) {\n      setLastActiveStepId((_a = steps[steps.length - 1]) == null ? void 0 : _a.id);\n      return;\n    }\n    setLastActiveStepId(mostRecentFailedOrActiveStep == null ? void 0 : mostRecentFailedOrActiveStep.id);\n  }, [steps, completed]);\n  const currentStepId = userSelectedStepId != null ? userSelectedStepId : lastActiveStepId;\n  const logAsString = useMemo(() => {\n    if (!currentStepId) {\n      return loadingText ? loadingText : \"Loading...\";\n    }\n    const log = taskStream.stepLogs[currentStepId];\n    if (!(log == null ? void 0 : log.length)) {\n      return \"Waiting for logs...\";\n    }\n    return log.join(\"\\n\");\n  }, [taskStream.stepLogs, currentStepId, loadingText]);\n  const taskNotFound = taskStream.completed === true && taskStream.loading === false && !taskStream.task;\n  const { output } = taskStream;\n  const handleStartOver = () => {\n    var _a, _b, _c;\n    if (!taskStream.task || !((_b = (_a = taskStream.task) == null ? void 0 : _a.spec.templateInfo) == null ? void 0 : _b.entityRef)) {\n      navigate(rootPath());\n      return;\n    }\n    const formData = taskStream.task.spec.parameters;\n    const { name, namespace } = parseEntityRef(\n      (_c = taskStream.task.spec.templateInfo) == null ? void 0 : _c.entityRef\n    );\n    navigate(\n      `${templateRoute({ templateName: name, namespace })}?${qs.stringify({\n        formData: JSON.stringify(formData)\n      })}`\n    );\n  };\n  return /* @__PURE__ */ React.createElement(Page, {\n    themeId: \"home\"\n  }, /* @__PURE__ */ React.createElement(Header, {\n    pageTitleOverride: `Task ${taskId}`,\n    title: \"Task Activity\",\n    subtitle: `Activity for task: ${taskId}`\n  }), /* @__PURE__ */ React.createElement(Content, null, taskNotFound ? /* @__PURE__ */ React.createElement(ErrorPage, {\n    status: \"404\",\n    statusMessage: \"Task not found\",\n    additionalInfo: \"No task found with this ID\"\n  }) : /* @__PURE__ */ React.createElement(\"div\", null, /* @__PURE__ */ React.createElement(Grid$1, {\n    container: true\n  }, /* @__PURE__ */ React.createElement(Grid$1, {\n    item: true,\n    xs: 3\n  }, /* @__PURE__ */ React.createElement(Paper, null, /* @__PURE__ */ React.createElement(TaskStatusStepper, {\n    steps,\n    currentStepId,\n    onUserStepChange: setUserSelectedStepId\n  }), output && hasLinks(output) && /* @__PURE__ */ React.createElement(TaskPageLinks, {\n    output\n  }), /* @__PURE__ */ React.createElement(Button, {\n    className: classes.button,\n    onClick: handleStartOver,\n    disabled: !completed,\n    variant: \"contained\",\n    color: \"primary\"\n  }, \"Start Over\"))), /* @__PURE__ */ React.createElement(Grid$1, {\n    item: true,\n    xs: 9\n  }, !currentStepId && /* @__PURE__ */ React.createElement(Progress, null), /* @__PURE__ */ React.createElement(\"div\", {\n    style: { height: \"80vh\" }\n  }, /* @__PURE__ */ React.createElement(TaskErrors, {\n    error: taskStream.error\n  }), /* @__PURE__ */ React.createElement(LogViewer, {\n    text: logAsString\n  })))))));\n};\n\nexport { createScaffolderLayout as A, ScaffolderLayouts as B, EntityPickerFieldExtension as C, EntityNamePickerFieldExtension as D, EntityPicker as E, FIELD_EXTENSION_WRAPPER_KEY as F, EntityTagsPickerFieldExtension as G, OwnerPickerFieldExtension as H, OwnedEntityPickerFieldExtension as I, RepoUrlPickerFieldExtension as J, ScaffolderPage as K, LAYOUTS_WRAPPER_KEY as L, scaffolderPlugin as M, NextScaffolderPage as N, OwnerPicker as O, createNextScaffolderFieldExtension as P, useTemplateSecrets as Q, RepoUrlPicker as R, SecretsContext as S, TemplateTypePicker as T, actionsRouteRef as a, scaffolderListTaskRouteRef as b, scaffolderApiRef as c, scaffolderTaskRouteRef as d, editRouteRef as e, rootRouteRef as f, TaskStatusStepper as g, TaskPageLinks as h, FIELD_EXTENSION_KEY as i, LAYOUTS_KEY as j, SecretsContextProvider as k, legacySelectedTemplateRouteRef as l, TaskPage as m, EntityNamePicker as n, entityNamePickerValidation as o, EntityTagsPicker as p, repoPickerValidation as q, registerComponentRouteRef as r, selectedTemplateRouteRef as s, OwnedEntityPicker as t, nextSelectedTemplateRouteRef as u, viewTechDocRouteRef as v, nextRouteRef as w, ScaffolderClient as x, createScaffolderFieldExtension as y, ScaffolderFieldExtensions as z };\n//# sourceMappingURL=index-e49d2205.esm.js.map\n","import { createApiRef, AnalyticsContext, useApi, useAnalytics, configApiRef } from '@backstage/core-plugin-api';\nimport React, { useMemo, useContext, useState, useCallback, useEffect, forwardRef, useRef } from 'react';\nimport { makeStyles, InputBase, InputAdornment, IconButton, CircularProgress, ListItemIcon, ListItemText, TextField, Chip, FormControl, FormLabel, FormControlLabel, Checkbox, InputLabel, Select, MenuItem, Button, TablePagination, ListItem, Box, Divider, List, Typography, ListSubheader, Menu } from '@material-ui/core';\nimport useDebounce from 'react-use/lib/useDebounce';\nimport SearchIcon from '@material-ui/icons/Search';\nimport ClearButton from '@material-ui/icons/Clear';\nimport { isEqual } from 'lodash';\nimport useAsync from 'react-use/lib/useAsync';\nimport usePrevious from 'react-use/lib/usePrevious';\nimport { createVersionedContext, createVersionedValueMap } from '@backstage/version-bridge';\nimport { Autocomplete } from '@material-ui/lab';\nimport useAsyncFn from 'react-use/lib/useAsyncFn';\nimport { Progress, ResponseErrorPanel, EmptyState, Link } from '@backstage/core-components';\nimport ArrowBackIosIcon from '@material-ui/icons/ArrowBackIos';\nimport ArrowForwardIosIcon from '@material-ui/icons/ArrowForwardIos';\nimport qs from 'qs';\nimport AddIcon from '@material-ui/icons/Add';\n\nconst searchApiRef = createApiRef({\n  id: \"plugin.search.queryservice\"\n});\nclass MockSearchApi {\n  constructor(mockedResults) {\n    this.mockedResults = mockedResults;\n  }\n  query() {\n    return Promise.resolve(this.mockedResults || { results: [] });\n  }\n}\n\nconst useStyles$3 = makeStyles(\n  () => ({\n    highlight: {}\n  }),\n  { name: \"BackstageHighlightedSearchResultText\" }\n);\nconst HighlightedSearchResultText = ({\n  text,\n  preTag,\n  postTag\n}) => {\n  const classes = useStyles$3();\n  const terms = useMemo(\n    () => text.split(new RegExp(`(${preTag}.+?${postTag})`)),\n    [postTag, preTag, text]\n  );\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, terms.map(\n    (t, idx) => t.includes(preTag) ? /* @__PURE__ */ React.createElement(\"mark\", {\n      className: classes.highlight,\n      key: idx\n    }, t.replace(new RegExp(`${preTag}|${postTag}`, \"g\"), \"\")) : t\n  ));\n};\n\nconst SearchContext = createVersionedContext(\"search-context\");\nconst useSearch = () => {\n  const context = useContext(SearchContext);\n  if (!context) {\n    throw new Error(\"useSearch must be used within a SearchContextProvider\");\n  }\n  const value = context.atVersion(1);\n  if (!value) {\n    throw new Error(\"No SearchContext v1 found\");\n  }\n  return value;\n};\nconst useSearchContextCheck = () => {\n  const context = useContext(SearchContext);\n  return context !== void 0;\n};\nconst searchInitialState = {\n  term: \"\",\n  types: [],\n  filters: {},\n  pageLimit: void 0,\n  pageCursor: void 0\n};\nconst useSearchContextValue = (initialValue = searchInitialState) => {\n  var _a, _b, _c, _d;\n  const searchApi = useApi(searchApiRef);\n  const [term, setTerm] = useState(initialValue.term);\n  const [types, setTypes] = useState(initialValue.types);\n  const [filters, setFilters] = useState(initialValue.filters);\n  const [pageLimit, setPageLimit] = useState(\n    initialValue.pageLimit\n  );\n  const [pageCursor, setPageCursor] = useState(\n    initialValue.pageCursor\n  );\n  const prevTerm = usePrevious(term);\n  const prevFilters = usePrevious(filters);\n  const result = useAsync(\n    () => searchApi.query({\n      term,\n      types,\n      filters,\n      pageLimit,\n      pageCursor\n    }),\n    [term, types, filters, pageLimit, pageCursor]\n  );\n  const hasNextPage = !result.loading && !result.error && ((_a = result.value) == null ? void 0 : _a.nextPageCursor);\n  const hasPreviousPage = !result.loading && !result.error && ((_b = result.value) == null ? void 0 : _b.previousPageCursor);\n  const fetchNextPage = useCallback(() => {\n    var _a2;\n    setPageCursor((_a2 = result.value) == null ? void 0 : _a2.nextPageCursor);\n  }, [(_c = result.value) == null ? void 0 : _c.nextPageCursor]);\n  const fetchPreviousPage = useCallback(() => {\n    var _a2;\n    setPageCursor((_a2 = result.value) == null ? void 0 : _a2.previousPageCursor);\n  }, [(_d = result.value) == null ? void 0 : _d.previousPageCursor]);\n  useEffect(() => {\n    if (prevTerm !== void 0 && term !== prevTerm) {\n      setPageCursor(void 0);\n    }\n  }, [term, prevTerm, setPageCursor]);\n  useEffect(() => {\n    if (prevFilters !== void 0 && !isEqual(filters, prevFilters)) {\n      setPageCursor(void 0);\n    }\n  }, [filters, prevFilters, setPageCursor]);\n  const value = {\n    result,\n    term,\n    setTerm,\n    types,\n    setTypes,\n    filters,\n    setFilters,\n    pageLimit,\n    setPageLimit,\n    pageCursor,\n    setPageCursor,\n    fetchNextPage: hasNextPage ? fetchNextPage : void 0,\n    fetchPreviousPage: hasPreviousPage ? fetchPreviousPage : void 0\n  };\n  return value;\n};\nconst LocalSearchContext = (props) => {\n  const { initialState, children } = props;\n  const value = useSearchContextValue(initialState);\n  return /* @__PURE__ */ React.createElement(AnalyticsContext, {\n    attributes: { searchTypes: value.types.sort().join(\",\") }\n  }, /* @__PURE__ */ React.createElement(SearchContext.Provider, {\n    value: createVersionedValueMap({ 1: value })\n  }, children));\n};\nconst SearchContextProvider = (props) => {\n  const { initialState, inheritParentContextIfAvailable, children } = props;\n  const hasParentContext = useSearchContextCheck();\n  return hasParentContext && inheritParentContextIfAvailable ? /* @__PURE__ */ React.createElement(React.Fragment, null, children) : /* @__PURE__ */ React.createElement(LocalSearchContext, {\n    initialState\n  }, children);\n};\n\nconst TrackSearch = ({ children }) => {\n  const analytics = useAnalytics();\n  const { term } = useSearch();\n  useEffect(() => {\n    if (term) {\n      analytics.captureEvent(\"search\", term);\n    }\n  }, [analytics, term]);\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, children);\n};\n\nfunction withContext$1(Component) {\n  return forwardRef((props, ref) => /* @__PURE__ */ React.createElement(SearchContextProvider, {\n    inheritParentContextIfAvailable: true\n  }, /* @__PURE__ */ React.createElement(Component, {\n    ...props,\n    ref\n  })));\n}\nconst SearchBarBase = withContext$1(\n  forwardRef((props, ref) => {\n    const {\n      onChange,\n      onKeyDown = () => {\n      },\n      onClear = () => {\n      },\n      onSubmit = () => {\n      },\n      debounceTime = 200,\n      clearButton = true,\n      fullWidth = true,\n      value: defaultValue,\n      placeholder: defaultPlaceholder,\n      inputProps: defaultInputProps = {},\n      endAdornment: defaultEndAdornment,\n      ...rest\n    } = props;\n    const configApi = useApi(configApiRef);\n    const [value, setValue] = useState(\"\");\n    useEffect(() => {\n      setValue(\n        (prevValue) => prevValue !== defaultValue ? String(defaultValue) : prevValue\n      );\n    }, [defaultValue]);\n    useDebounce(() => onChange(value), debounceTime, [value]);\n    const handleChange = useCallback(\n      (e) => {\n        setValue(e.target.value);\n      },\n      [setValue]\n    );\n    const handleKeyDown = useCallback(\n      (e) => {\n        if (onKeyDown)\n          onKeyDown(e);\n        if (onSubmit && e.key === \"Enter\") {\n          onSubmit();\n        }\n      },\n      [onKeyDown, onSubmit]\n    );\n    const handleClear = useCallback(() => {\n      onChange(\"\");\n      if (onClear) {\n        onClear();\n      }\n    }, [onChange, onClear]);\n    const placeholder = defaultPlaceholder != null ? defaultPlaceholder : `Search in ${configApi.getOptionalString(\"app.title\") || \"Backstage\"}`;\n    const startAdornment = /* @__PURE__ */ React.createElement(InputAdornment, {\n      position: \"start\"\n    }, /* @__PURE__ */ React.createElement(IconButton, {\n      \"aria-label\": \"Query\",\n      size: \"small\",\n      disabled: true\n    }, /* @__PURE__ */ React.createElement(SearchIcon, null)));\n    const endAdornment = /* @__PURE__ */ React.createElement(InputAdornment, {\n      position: \"end\"\n    }, /* @__PURE__ */ React.createElement(IconButton, {\n      \"aria-label\": \"Clear\",\n      size: \"small\",\n      onClick: handleClear\n    }, /* @__PURE__ */ React.createElement(ClearButton, null)));\n    return /* @__PURE__ */ React.createElement(TrackSearch, null, /* @__PURE__ */ React.createElement(InputBase, {\n      \"data-testid\": \"search-bar-next\",\n      ref,\n      value,\n      placeholder,\n      startAdornment,\n      endAdornment: clearButton ? endAdornment : defaultEndAdornment,\n      inputProps: { \"aria-label\": \"Search\", ...defaultInputProps },\n      fullWidth,\n      onChange: handleChange,\n      onKeyDown: handleKeyDown,\n      ...rest\n    }));\n  })\n);\nconst SearchBar = withContext$1(\n  forwardRef((props, ref) => {\n    const { value: initialValue = \"\", onChange, ...rest } = props;\n    const { term, setTerm } = useSearch();\n    useEffect(() => {\n      if (initialValue) {\n        setTerm(String(initialValue));\n      }\n    }, [initialValue, setTerm]);\n    const handleChange = useCallback(\n      (newValue) => {\n        if (onChange) {\n          onChange(newValue);\n        } else {\n          setTerm(newValue);\n        }\n      },\n      [onChange, setTerm]\n    );\n    return /* @__PURE__ */ React.createElement(AnalyticsContext, {\n      attributes: { pluginId: \"search\", extension: \"SearchBar\" }\n    }, /* @__PURE__ */ React.createElement(SearchBarBase, {\n      ...rest,\n      ref,\n      value: term,\n      onChange: handleChange\n    }));\n  })\n);\n\nconst withContext = (Component) => {\n  return (props) => /* @__PURE__ */ React.createElement(SearchContextProvider, {\n    inheritParentContextIfAvailable: true\n  }, /* @__PURE__ */ React.createElement(Component, {\n    ...props\n  }));\n};\nconst SearchAutocomplete = withContext(\n  function SearchAutocompleteComponent(props) {\n    const {\n      loading,\n      value,\n      onChange = () => {\n      },\n      options = [],\n      getOptionLabel = (option) => String(option),\n      inputPlaceholder,\n      inputDebounceTime,\n      freeSolo = true,\n      fullWidth = true,\n      clearOnBlur = false,\n      \"data-testid\": dataTestId = \"search-autocomplete\",\n      ...rest\n    } = props;\n    const { setTerm } = useSearch();\n    const getInputValue = useCallback(\n      (option) => {\n        if (!option)\n          return \"\";\n        if (typeof option === \"string\")\n          return option;\n        return getOptionLabel(option);\n      },\n      [getOptionLabel]\n    );\n    const inputValue = useMemo(\n      () => getInputValue(value),\n      [value, getInputValue]\n    );\n    const handleChange = useCallback(\n      (event, option, reason, details) => {\n        setTerm(getInputValue(option));\n        onChange(event, option, reason, details);\n      },\n      [getInputValue, setTerm, onChange]\n    );\n    const renderInput = useCallback(\n      ({\n        InputProps: { ref, endAdornment },\n        InputLabelProps,\n        ...params\n      }) => /* @__PURE__ */ React.createElement(SearchBar, {\n        ...params,\n        ref,\n        clearButton: false,\n        value: inputValue,\n        placeholder: inputPlaceholder,\n        debounceTime: inputDebounceTime,\n        endAdornment: loading ? /* @__PURE__ */ React.createElement(CircularProgress, {\n          \"data-testid\": \"search-autocomplete-progressbar\",\n          color: \"inherit\",\n          size: 20\n        }) : endAdornment\n      }),\n      [loading, inputValue, inputPlaceholder, inputDebounceTime]\n    );\n    return /* @__PURE__ */ React.createElement(Autocomplete, {\n      ...rest,\n      \"data-testid\": dataTestId,\n      value,\n      onChange: handleChange,\n      options,\n      getOptionLabel,\n      renderInput,\n      freeSolo,\n      fullWidth,\n      clearOnBlur\n    });\n  }\n);\n\nconst SearchAutocompleteDefaultOption = ({\n  icon,\n  primaryText,\n  primaryTextTypographyProps,\n  secondaryText,\n  secondaryTextTypographyProps,\n  disableTextTypography\n}) => /* @__PURE__ */ React.createElement(React.Fragment, null, icon ? /* @__PURE__ */ React.createElement(ListItemIcon, null, icon) : null, /* @__PURE__ */ React.createElement(ListItemText, {\n  primary: primaryText,\n  primaryTypographyProps: primaryTextTypographyProps,\n  secondary: secondaryText,\n  secondaryTypographyProps: secondaryTextTypographyProps,\n  disableTypography: disableTextTypography\n}));\n\nconst useAsyncFilterValues = (fn, inputValue, defaultValues = [], debounce = 250) => {\n  const valuesMemo = useRef({});\n  const definiteFn = fn || (() => Promise.resolve([]));\n  const [state, callback] = useAsyncFn(definiteFn, [inputValue], {\n    loading: true\n  });\n  useDebounce(\n    () => {\n      if (valuesMemo.current[inputValue] === void 0) {\n        valuesMemo.current[inputValue] = callback(inputValue).then((values) => {\n          valuesMemo.current[inputValue] = values;\n          return values;\n        });\n      }\n    },\n    debounce,\n    [callback, inputValue]\n  );\n  if (defaultValues.length) {\n    return {\n      loading: false,\n      value: defaultValues\n    };\n  }\n  const possibleValue = valuesMemo.current[inputValue];\n  if (Array.isArray(possibleValue)) {\n    return {\n      loading: false,\n      value: possibleValue\n    };\n  }\n  return state;\n};\nconst useDefaultFilterValue = (name, defaultValue) => {\n  const { setFilters } = useSearch();\n  useEffect(() => {\n    if (defaultValue && [defaultValue].flat().length > 0) {\n      setFilters((prevFilters) => ({\n        ...prevFilters,\n        [name]: defaultValue\n      }));\n    }\n  }, []);\n};\n\nconst AutocompleteFilter = (props) => {\n  const {\n    className,\n    defaultValue,\n    name,\n    values: givenValues,\n    valuesDebounceMs,\n    label,\n    filterSelectedOptions,\n    limitTags,\n    multiple\n  } = props;\n  const [inputValue, setInputValue] = useState(\"\");\n  useDefaultFilterValue(name, defaultValue);\n  const asyncValues = typeof givenValues === \"function\" ? givenValues : void 0;\n  const defaultValues = typeof givenValues === \"function\" ? void 0 : givenValues;\n  const { value: values, loading } = useAsyncFilterValues(\n    asyncValues,\n    inputValue,\n    defaultValues,\n    valuesDebounceMs\n  );\n  const { filters, setFilters } = useSearch();\n  const filterValue = filters[name] || (multiple ? [] : null);\n  const handleChange = (_, newValue) => {\n    setFilters((prevState) => {\n      const { [name]: filter, ...others } = prevState;\n      if (newValue) {\n        return { ...others, [name]: newValue };\n      }\n      return { ...others };\n    });\n  };\n  const renderInput = (params) => /* @__PURE__ */ React.createElement(TextField, {\n    ...params,\n    name: \"search\",\n    variant: \"outlined\",\n    label,\n    fullWidth: true\n  });\n  const renderTags = (tagValue, getTagProps) => tagValue.map((option, index) => /* @__PURE__ */ React.createElement(Chip, {\n    label: option,\n    color: \"primary\",\n    ...getTagProps({ index })\n  }));\n  return /* @__PURE__ */ React.createElement(Autocomplete, {\n    filterSelectedOptions,\n    limitTags,\n    multiple,\n    className,\n    id: `${multiple ? \"multi-\" : \"\"}select-filter-${name}--select`,\n    options: values || [],\n    loading,\n    value: filterValue,\n    onChange: handleChange,\n    onInputChange: (_, newValue) => setInputValue(newValue),\n    renderInput,\n    renderTags\n  });\n};\n\nconst useStyles$2 = makeStyles({\n  label: {\n    textTransform: \"capitalize\"\n  }\n});\nconst CheckboxFilter = (props) => {\n  const {\n    className,\n    defaultValue,\n    label,\n    name,\n    values: givenValues = [],\n    valuesDebounceMs\n  } = props;\n  const classes = useStyles$2();\n  const { filters, setFilters } = useSearch();\n  useDefaultFilterValue(name, defaultValue);\n  const asyncValues = typeof givenValues === \"function\" ? givenValues : void 0;\n  const defaultValues = typeof givenValues === \"function\" ? void 0 : givenValues;\n  const { value: values = [], loading } = useAsyncFilterValues(\n    asyncValues,\n    \"\",\n    defaultValues,\n    valuesDebounceMs\n  );\n  const handleChange = (e) => {\n    const {\n      target: { value, checked }\n    } = e;\n    setFilters((prevFilters) => {\n      const { [name]: filter, ...others } = prevFilters;\n      const rest = (filter || []).filter((i) => i !== value);\n      const items = checked ? [...rest, value] : rest;\n      return items.length ? { ...others, [name]: items } : others;\n    });\n  };\n  return /* @__PURE__ */ React.createElement(FormControl, {\n    className,\n    disabled: loading,\n    fullWidth: true,\n    \"data-testid\": \"search-checkboxfilter-next\"\n  }, label ? /* @__PURE__ */ React.createElement(FormLabel, {\n    className: classes.label\n  }, label) : null, values.map((value) => {\n    var _a;\n    return /* @__PURE__ */ React.createElement(FormControlLabel, {\n      key: value,\n      control: /* @__PURE__ */ React.createElement(Checkbox, {\n        color: \"primary\",\n        tabIndex: -1,\n        inputProps: { \"aria-labelledby\": value },\n        value,\n        name: value,\n        onChange: handleChange,\n        checked: ((_a = filters[name]) != null ? _a : []).includes(value)\n      }),\n      label: value\n    });\n  }));\n};\nconst SelectFilter = (props) => {\n  const {\n    className,\n    defaultValue,\n    label,\n    name,\n    values: givenValues,\n    valuesDebounceMs\n  } = props;\n  const classes = useStyles$2();\n  useDefaultFilterValue(name, defaultValue);\n  const asyncValues = typeof givenValues === \"function\" ? givenValues : void 0;\n  const defaultValues = typeof givenValues === \"function\" ? void 0 : givenValues;\n  const { value: values = [], loading } = useAsyncFilterValues(\n    asyncValues,\n    \"\",\n    defaultValues,\n    valuesDebounceMs\n  );\n  const { filters, setFilters } = useSearch();\n  const handleChange = (e) => {\n    const {\n      target: { value }\n    } = e;\n    setFilters((prevFilters) => {\n      const { [name]: filter, ...others } = prevFilters;\n      return value ? { ...others, [name]: value } : others;\n    });\n  };\n  return /* @__PURE__ */ React.createElement(FormControl, {\n    disabled: loading,\n    className,\n    variant: \"filled\",\n    fullWidth: true,\n    \"data-testid\": \"search-selectfilter-next\"\n  }, label ? /* @__PURE__ */ React.createElement(InputLabel, {\n    className: classes.label,\n    margin: \"dense\"\n  }, label) : null, /* @__PURE__ */ React.createElement(Select, {\n    variant: \"outlined\",\n    value: filters[name] || \"\",\n    onChange: handleChange\n  }, /* @__PURE__ */ React.createElement(MenuItem, {\n    value: \"\"\n  }, /* @__PURE__ */ React.createElement(\"em\", null, \"All\")), values.map((value) => /* @__PURE__ */ React.createElement(MenuItem, {\n    key: value,\n    value\n  }, value))));\n};\nconst SearchFilter = ({\n  component: Element,\n  ...props\n}) => /* @__PURE__ */ React.createElement(Element, {\n  ...props\n});\nSearchFilter.Checkbox = (props) => /* @__PURE__ */ React.createElement(SearchFilter, {\n  ...props,\n  component: CheckboxFilter\n});\nSearchFilter.Select = (props) => /* @__PURE__ */ React.createElement(SearchFilter, {\n  ...props,\n  component: SelectFilter\n});\nSearchFilter.Autocomplete = (props) => /* @__PURE__ */ React.createElement(SearchFilter, {\n  ...props,\n  component: AutocompleteFilter\n});\n\nconst SearchResultContext = (props) => {\n  const { children } = props;\n  const context = useSearch();\n  const state = context.result;\n  return children(state);\n};\nconst SearchResultApi = (props) => {\n  const { query, children } = props;\n  const searchApi = useApi(searchApiRef);\n  const state = useAsync(() => {\n    const { term = \"\", types = [], filters = {}, ...rest } = query;\n    return searchApi.query({ ...rest, term, types, filters });\n  }, [query]);\n  return children(state);\n};\nconst SearchResultState = (props) => {\n  const { query, children } = props;\n  return query ? /* @__PURE__ */ React.createElement(SearchResultApi, {\n    query\n  }, children) : /* @__PURE__ */ React.createElement(SearchResultContext, null, children);\n};\nconst SearchResultComponent = (props) => {\n  const { query, children } = props;\n  return /* @__PURE__ */ React.createElement(SearchResultState, {\n    query\n  }, ({ loading, error, value }) => {\n    if (loading) {\n      return /* @__PURE__ */ React.createElement(Progress, null);\n    }\n    if (error) {\n      return /* @__PURE__ */ React.createElement(ResponseErrorPanel, {\n        title: \"Error encountered while fetching search results\",\n        error\n      });\n    }\n    if (!(value == null ? void 0 : value.results.length)) {\n      return /* @__PURE__ */ React.createElement(EmptyState, {\n        missing: \"data\",\n        title: \"Sorry, no results were found\"\n      });\n    }\n    return children(value);\n  });\n};\nconst SearchResult = (props) => /* @__PURE__ */ React.createElement(AnalyticsContext, {\n  attributes: {\n    pluginId: \"search\",\n    extension: \"SearchResult\"\n  }\n}, /* @__PURE__ */ React.createElement(SearchResultComponent, {\n  ...props\n}));\n\nconst useStyles$1 = makeStyles((theme) => ({\n  root: {\n    display: \"flex\",\n    justifyContent: \"space-between\",\n    gap: theme.spacing(2),\n    margin: theme.spacing(2, 0)\n  }\n}));\nconst SearchResultPager = () => {\n  const { fetchNextPage, fetchPreviousPage } = useSearch();\n  const classes = useStyles$1();\n  if (!fetchNextPage && !fetchPreviousPage) {\n    return /* @__PURE__ */ React.createElement(React.Fragment, null);\n  }\n  return /* @__PURE__ */ React.createElement(\"nav\", {\n    \"aria-label\": \"pagination navigation\",\n    className: classes.root\n  }, /* @__PURE__ */ React.createElement(Button, {\n    \"aria-label\": \"previous page\",\n    disabled: !fetchPreviousPage,\n    onClick: fetchPreviousPage,\n    startIcon: /* @__PURE__ */ React.createElement(ArrowBackIosIcon, null)\n  }, \"Previous\"), /* @__PURE__ */ React.createElement(Button, {\n    \"aria-label\": \"next page\",\n    disabled: !fetchNextPage,\n    onClick: fetchNextPage,\n    endIcon: /* @__PURE__ */ React.createElement(ArrowForwardIosIcon, null)\n  }, \"Next\"));\n};\n\nconst encodePageCursor = (pageCursor) => {\n  return Buffer.from(pageCursor.toString(), \"utf-8\").toString(\"base64\");\n};\nconst decodePageCursor = (pageCursor) => {\n  if (!pageCursor)\n    return 0;\n  return Number(Buffer.from(pageCursor, \"base64\").toString(\"utf-8\"));\n};\nconst SearchPaginationBase = (props) => {\n  const {\n    total: count = -1,\n    cursor: pageCursor,\n    onCursorChange: onPageCursorChange,\n    limit: rowsPerPage = 25,\n    limitLabel: labelRowsPerPage = \"Results per page:\",\n    limitText: labelDisplayedRows = ({ from, to }) => count > 0 ? `of ${count}` : `${from}-${to}`,\n    limitOptions: rowsPerPageOptions,\n    onLimitChange: onPageLimitChange,\n    ...rest\n  } = props;\n  const page = useMemo(() => decodePageCursor(pageCursor), [pageCursor]);\n  const handlePageChange = useCallback(\n    (_, newValue) => {\n      onPageCursorChange == null ? void 0 : onPageCursorChange(encodePageCursor(newValue));\n    },\n    [onPageCursorChange]\n  );\n  const handleRowsPerPageChange = useCallback(\n    (e) => {\n      const newValue = e.target.value;\n      onPageLimitChange == null ? void 0 : onPageLimitChange(parseInt(newValue, 10));\n    },\n    [onPageLimitChange]\n  );\n  return /* @__PURE__ */ React.createElement(TablePagination, {\n    ...rest,\n    component: \"div\",\n    count,\n    page,\n    onPageChange: handlePageChange,\n    rowsPerPage,\n    labelRowsPerPage,\n    labelDisplayedRows,\n    rowsPerPageOptions,\n    onRowsPerPageChange: handleRowsPerPageChange\n  });\n};\nconst SearchPagination = (props) => {\n  const { pageLimit, setPageLimit, pageCursor, setPageCursor } = useSearch();\n  return /* @__PURE__ */ React.createElement(SearchPaginationBase, {\n    ...props,\n    limit: pageLimit,\n    onLimitChange: setPageLimit,\n    cursor: pageCursor,\n    onCursorChange: setPageCursor\n  });\n};\n\nconst DefaultResultListItemComponent = ({\n  result,\n  highlight,\n  rank,\n  icon,\n  secondaryAction,\n  lineClamp = 5\n}) => {\n  const analytics = useAnalytics();\n  const handleClick = () => {\n    analytics.captureEvent(\"discover\", result.title, {\n      attributes: { to: result.location },\n      value: rank\n    });\n  };\n  return /* @__PURE__ */ React.createElement(Link, {\n    noTrack: true,\n    to: result.location,\n    onClick: handleClick\n  }, /* @__PURE__ */ React.createElement(ListItem, {\n    alignItems: \"center\"\n  }, icon && /* @__PURE__ */ React.createElement(ListItemIcon, null, icon), /* @__PURE__ */ React.createElement(ListItemText, {\n    primaryTypographyProps: { variant: \"h6\" },\n    primary: (highlight == null ? void 0 : highlight.fields.title) ? /* @__PURE__ */ React.createElement(HighlightedSearchResultText, {\n      text: highlight.fields.title,\n      preTag: highlight.preTag,\n      postTag: highlight.postTag\n    }) : result.title,\n    secondary: /* @__PURE__ */ React.createElement(\"span\", {\n      style: {\n        display: \"-webkit-box\",\n        WebkitBoxOrient: \"vertical\",\n        WebkitLineClamp: lineClamp,\n        overflow: \"hidden\"\n      }\n    }, (highlight == null ? void 0 : highlight.fields.text) ? /* @__PURE__ */ React.createElement(HighlightedSearchResultText, {\n      text: highlight.fields.text,\n      preTag: highlight.preTag,\n      postTag: highlight.postTag\n    }) : result.text)\n  }), secondaryAction && /* @__PURE__ */ React.createElement(Box, {\n    alignItems: \"flex-end\"\n  }, secondaryAction)), /* @__PURE__ */ React.createElement(Divider, null));\n};\nconst HigherOrderDefaultResultListItem = (props) => {\n  return /* @__PURE__ */ React.createElement(AnalyticsContext, {\n    attributes: {\n      pluginId: \"search\",\n      extension: \"DefaultResultListItem\"\n    }\n  }, /* @__PURE__ */ React.createElement(DefaultResultListItemComponent, {\n    ...props\n  }));\n};\n\nconst SearchResultListLayout = (props) => {\n  const {\n    loading,\n    error,\n    resultItems,\n    renderResultItem = (resultItem) => /* @__PURE__ */ React.createElement(HigherOrderDefaultResultListItem, {\n      key: resultItem.document.location,\n      result: resultItem.document\n    }),\n    noResultsComponent = /* @__PURE__ */ React.createElement(EmptyState, {\n      missing: \"data\",\n      title: \"Sorry, no results were found\"\n    }),\n    ...rest\n  } = props;\n  return /* @__PURE__ */ React.createElement(List, {\n    ...rest\n  }, loading ? /* @__PURE__ */ React.createElement(Progress, null) : null, !loading && error ? /* @__PURE__ */ React.createElement(ResponseErrorPanel, {\n    title: \"Error encountered while fetching search results\",\n    error\n  }) : null, !loading && !error && (resultItems == null ? void 0 : resultItems.length) ? resultItems.map(renderResultItem) : null, !loading && !error && !(resultItems == null ? void 0 : resultItems.length) ? /* @__PURE__ */ React.createElement(ListItem, null, noResultsComponent) : null);\n};\nconst SearchResultList = (props) => {\n  const { query, disableRenderingWithNoResults, ...rest } = props;\n  return /* @__PURE__ */ React.createElement(AnalyticsContext, {\n    attributes: {\n      pluginId: \"search\",\n      extension: \"SearchResultList\"\n    }\n  }, /* @__PURE__ */ React.createElement(SearchResultState, {\n    query\n  }, ({ loading, error, value }) => {\n    var _a;\n    if (!((_a = value == null ? void 0 : value.results) == null ? void 0 : _a.length) && disableRenderingWithNoResults) {\n      return null;\n    }\n    return /* @__PURE__ */ React.createElement(SearchResultListLayout, {\n      ...rest,\n      loading,\n      error,\n      resultItems: value == null ? void 0 : value.results\n    });\n  }));\n};\n\nconst useStyles = makeStyles((theme) => ({\n  listSubheader: {\n    display: \"flex\",\n    alignItems: \"center\"\n  },\n  listSubheaderName: {\n    marginLeft: theme.spacing(1),\n    textTransform: \"uppercase\"\n  },\n  listSubheaderChip: {\n    color: theme.palette.text.secondary,\n    margin: theme.spacing(0, 0, 0, 1.5)\n  },\n  listSubheaderFilter: {\n    display: \"flex\",\n    color: theme.palette.text.secondary,\n    margin: theme.spacing(0, 0, 0, 1.5)\n  },\n  listSubheaderLink: {\n    marginLeft: \"auto\",\n    display: \"flex\",\n    alignItems: \"center\"\n  },\n  listSubheaderLinkIcon: {\n    fontSize: \"inherit\",\n    marginLeft: theme.spacing(0.5)\n  }\n}));\nconst SearchResultGroupFilterFieldLayout = (props) => {\n  const classes = useStyles();\n  const { label, children, ...rest } = props;\n  return /* @__PURE__ */ React.createElement(Chip, {\n    ...rest,\n    className: classes.listSubheaderFilter,\n    variant: \"outlined\",\n    label: /* @__PURE__ */ React.createElement(React.Fragment, null, label, \": \", children)\n  });\n};\nconst NullIcon = () => null;\nconst useSearchResultGroupTextFilterStyles = makeStyles((theme) => ({\n  root: {\n    fontSize: \"inherit\",\n    \"&:focus\": {\n      outline: \"none\",\n      background: theme.palette.common.white\n    },\n    \"&:not(:focus)\": {\n      cursor: \"pointer\",\n      color: theme.palette.primary.main,\n      \"&:hover\": {\n        textDecoration: \"underline\"\n      }\n    }\n  }\n}));\nconst SearchResultGroupTextFilterField = (props) => {\n  const classes = useSearchResultGroupTextFilterStyles();\n  const { label, value = \"None\", onChange, onDelete } = props;\n  const handleChange = useCallback(\n    (e) => {\n      onChange(e.target.value);\n    },\n    [onChange]\n  );\n  return /* @__PURE__ */ React.createElement(SearchResultGroupFilterFieldLayout, {\n    label,\n    onDelete\n  }, /* @__PURE__ */ React.createElement(Typography, {\n    role: \"textbox\",\n    component: \"span\",\n    className: classes.root,\n    onChange: handleChange,\n    contentEditable: true,\n    suppressContentEditableWarning: true\n  }, value));\n};\nconst useSearchResultGroupSelectFilterStyles = makeStyles((theme) => ({\n  root: {\n    fontSize: \"inherit\",\n    \"&:not(:focus)\": {\n      cursor: \"pointer\",\n      color: theme.palette.primary.main,\n      \"&:hover\": {\n        textDecoration: \"underline\"\n      }\n    },\n    \"&:focus\": {\n      outline: \"none\"\n    },\n    \"&>div:first-child\": {\n      padding: 0\n    }\n  }\n}));\nconst SearchResultGroupSelectFilterField = (props) => {\n  const classes = useSearchResultGroupSelectFilterStyles();\n  const { label, value = \"none\", onChange, onDelete, children } = props;\n  const handleChange = useCallback(\n    (e) => {\n      onChange(e.target.value);\n    },\n    [onChange]\n  );\n  return /* @__PURE__ */ React.createElement(SearchResultGroupFilterFieldLayout, {\n    label,\n    onDelete\n  }, /* @__PURE__ */ React.createElement(Select, {\n    className: classes.root,\n    value,\n    onChange: handleChange,\n    input: /* @__PURE__ */ React.createElement(InputBase, null),\n    IconComponent: NullIcon\n  }, /* @__PURE__ */ React.createElement(MenuItem, {\n    value: \"none\"\n  }, \"None\"), children));\n};\nfunction SearchResultGroupLayout(props) {\n  const classes = useStyles();\n  const [anchorEl, setAnchorEl] = useState(null);\n  const {\n    loading,\n    error,\n    icon,\n    title,\n    titleProps = {},\n    link = /* @__PURE__ */ React.createElement(React.Fragment, null, \"See all\", /* @__PURE__ */ React.createElement(ArrowForwardIosIcon, {\n      className: classes.listSubheaderLinkIcon\n    })),\n    linkProps = {},\n    filterOptions,\n    renderFilterOption = (filterOption) => /* @__PURE__ */ React.createElement(MenuItem, {\n      key: String(filterOption),\n      value: String(filterOption)\n    }, filterOption),\n    filterFields,\n    renderFilterField,\n    resultItems,\n    renderResultItem = (resultItem) => /* @__PURE__ */ React.createElement(HigherOrderDefaultResultListItem, {\n      key: resultItem.document.location,\n      result: resultItem.document\n    }),\n    noResultsComponent = /* @__PURE__ */ React.createElement(EmptyState, {\n      missing: \"data\",\n      title: \"Sorry, no results were found\"\n    }),\n    ...rest\n  } = props;\n  const handleClick = useCallback((e) => {\n    setAnchorEl(e.currentTarget);\n  }, []);\n  const handleClose = useCallback(() => {\n    setAnchorEl(null);\n  }, []);\n  return /* @__PURE__ */ React.createElement(List, {\n    ...rest\n  }, /* @__PURE__ */ React.createElement(ListSubheader, {\n    className: classes.listSubheader\n  }, icon, /* @__PURE__ */ React.createElement(Typography, {\n    className: classes.listSubheaderName,\n    component: \"strong\",\n    ...titleProps\n  }, title), filterOptions ? /* @__PURE__ */ React.createElement(Chip, {\n    className: classes.listSubheaderChip,\n    component: \"button\",\n    icon: /* @__PURE__ */ React.createElement(AddIcon, null),\n    variant: \"outlined\",\n    label: \"Add filter\",\n    \"aria-controls\": \"filters-menu\",\n    \"aria-haspopup\": \"true\",\n    onClick: handleClick\n  }) : null, filterOptions ? /* @__PURE__ */ React.createElement(Menu, {\n    id: \"filters-menu\",\n    anchorEl,\n    open: Boolean(anchorEl),\n    onClose: handleClose,\n    onClick: handleClose,\n    keepMounted: true\n  }, filterOptions.map(renderFilterOption)) : null, filterFields == null ? void 0 : filterFields.map(\n    (filterField) => {\n      var _a;\n      return (_a = renderFilterField == null ? void 0 : renderFilterField(filterField)) != null ? _a : null;\n    }\n  ), /* @__PURE__ */ React.createElement(Link, {\n    className: classes.listSubheaderLink,\n    to: \"/search\",\n    ...linkProps\n  }, link)), loading ? /* @__PURE__ */ React.createElement(Progress, null) : null, !loading && error ? /* @__PURE__ */ React.createElement(ResponseErrorPanel, {\n    title: \"Error encountered while fetching search results\",\n    error\n  }) : null, !loading && !error && (resultItems == null ? void 0 : resultItems.length) ? resultItems.map(renderResultItem) : null, !loading && !error && !(resultItems == null ? void 0 : resultItems.length) ? /* @__PURE__ */ React.createElement(ListItem, null, noResultsComponent) : null);\n}\nfunction SearchResultGroup(props) {\n  const {\n    query,\n    linkProps = {},\n    disableRenderingWithNoResults,\n    ...rest\n  } = props;\n  const to = `/search?${qs.stringify(\n    {\n      query: query.term,\n      types: query.types,\n      filters: query.filters,\n      pageCursor: query.pageCursor\n    },\n    { arrayFormat: \"brackets\" }\n  )}`;\n  return /* @__PURE__ */ React.createElement(AnalyticsContext, {\n    attributes: {\n      pluginId: \"search\",\n      extension: \"SearchResultGroup\"\n    }\n  }, /* @__PURE__ */ React.createElement(SearchResultState, {\n    query\n  }, ({ loading, error, value }) => {\n    var _a, _b;\n    if (!((_a = value == null ? void 0 : value.results) == null ? void 0 : _a.length) && disableRenderingWithNoResults) {\n      return null;\n    }\n    return /* @__PURE__ */ React.createElement(SearchResultGroupLayout, {\n      ...rest,\n      loading,\n      error,\n      linkProps: { to, ...linkProps },\n      resultItems: value == null ? void 0 : value.results,\n      filterFields: Object.keys((_b = query.filters) != null ? _b : {})\n    });\n  }));\n}\n\nexport { AutocompleteFilter, CheckboxFilter, HigherOrderDefaultResultListItem as DefaultResultListItem, HighlightedSearchResultText, MockSearchApi, SearchAutocomplete, SearchAutocompleteDefaultOption, SearchBar, SearchBarBase, SearchContextProvider, SearchFilter, SearchPagination, SearchPaginationBase, SearchResult, SearchResultApi, SearchResultComponent, SearchResultContext, SearchResultGroup, SearchResultGroupFilterFieldLayout, SearchResultGroupLayout, SearchResultGroupSelectFilterField, SearchResultGroupTextFilterField, SearchResultList, SearchResultListLayout, SearchResultPager, SearchResultState, SelectFilter, searchApiRef, useSearch, useSearchContextCheck };\n//# sourceMappingURL=index.esm.js.map\n","import React, { useContext, useState, useCallback, useEffect, Fragment, cloneElement } from 'react';\nimport { Dialog, useTheme, DialogTitle, Paper, DialogContent, Grid, Divider, List, DialogActions, makeStyles as makeStyles$1, Card, CardHeader, CardContent, Accordion, AccordionSummary, AccordionDetails, ListItem, ListItemIcon, ListItemText, Tabs, Tab, FormControl, InputLabel, Select, Chip, MenuItem, Checkbox } from '@material-ui/core';\nimport LaunchIcon from '@material-ui/icons/Launch';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { searchApiRef, SearchContextProvider, useSearch, SearchBar, SearchResult, DefaultResultListItem, SearchResultPager } from '@backstage/plugin-search-react';\nimport { createRouteRef, createPlugin, createApiFactory, discoveryApiRef, identityApiRef, createRoutableExtension, createComponentExtension, useRouteRef } from '@backstage/core-plugin-api';\nimport { useContent, Link, SidebarSearchField } from '@backstage/core-components';\nimport { ResponseError } from '@backstage/errors';\nimport qs from 'qs';\nimport { createVersionedContext, createVersionedValueMap } from '@backstage/version-bridge';\nimport usePrevious from 'react-use/lib/usePrevious';\nimport { useOutlet, useLocation } from 'react-router';\nimport useEffectOnce from 'react-use/lib/useEffectOnce';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport AllIcon from '@material-ui/icons/FontDownload';\nimport { useNavigate } from 'react-router-dom';\n\nclass SearchClient {\n  constructor(options) {\n    this.discoveryApi = options.discoveryApi;\n    this.identityApi = options.identityApi;\n  }\n  async query(query) {\n    const { token } = await this.identityApi.getCredentials();\n    const queryString = qs.stringify(query);\n    const url = `${await this.discoveryApi.getBaseUrl(\n      \"search/query\"\n    )}?${queryString}`;\n    const response = await fetch(url, {\n      headers: token ? { Authorization: `Bearer ${token}` } : {}\n    });\n    if (!response.ok) {\n      throw await ResponseError.fromResponse(response);\n    }\n    return response.json();\n  }\n}\n\nconst rootRouteRef = createRouteRef({\n  id: \"search\"\n});\nconst searchPlugin = createPlugin({\n  id: \"search\",\n  apis: [\n    createApiFactory({\n      api: searchApiRef,\n      deps: { discoveryApi: discoveryApiRef, identityApi: identityApiRef },\n      factory: ({ discoveryApi, identityApi }) => {\n        return new SearchClient({ discoveryApi, identityApi });\n      }\n    })\n  ],\n  routes: {\n    root: rootRouteRef\n  }\n});\nconst SearchPage$1 = searchPlugin.provide(\n  createRoutableExtension({\n    name: \"SearchPage\",\n    component: () => import('./index-559e7a70.esm.js').then((m) => m.SearchPage),\n    mountPoint: rootRouteRef\n  })\n);\nconst SidebarSearchModal = searchPlugin.provide(\n  createComponentExtension({\n    name: \"SidebarSearchModal\",\n    component: {\n      lazy: () => import('./index-0a13cd80.esm.js').then(\n        (m) => m.SidebarSearchModal\n      )\n    }\n  })\n);\nconst HomePageSearchBar = searchPlugin.provide(\n  createComponentExtension({\n    name: \"HomePageSearchBar\",\n    component: {\n      lazy: () => import('./index-4003b03a.esm.js').then((m) => m.HomePageSearchBar)\n    }\n  })\n);\n\nconst useStyles$3 = makeStyles((theme) => ({\n  container: {\n    borderRadius: 30,\n    display: \"flex\",\n    height: \"2.4em\"\n  },\n  input: {\n    flex: 1\n  },\n  paperFullWidth: { height: \"calc(100% - 128px)\" },\n  dialogActionsContainer: { padding: theme.spacing(1, 3) },\n  viewResultsLink: { verticalAlign: \"0.5em\" }\n}));\nconst Modal = ({ toggleModal }) => {\n  const getSearchLink = useRouteRef(rootRouteRef);\n  const classes = useStyles$3();\n  const { term } = useSearch();\n  const { focusContent } = useContent();\n  const { transitions } = useTheme();\n  const handleResultClick = () => {\n    toggleModal();\n    setTimeout(focusContent, transitions.duration.leavingScreen);\n  };\n  const handleKeyPress = () => {\n    handleResultClick();\n  };\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(DialogTitle, null, /* @__PURE__ */ React.createElement(Paper, {\n    className: classes.container\n  }, /* @__PURE__ */ React.createElement(SearchBar, {\n    className: classes.input\n  }))), /* @__PURE__ */ React.createElement(DialogContent, null, /* @__PURE__ */ React.createElement(Grid, {\n    container: true,\n    direction: \"row-reverse\",\n    justifyContent: \"flex-start\",\n    alignItems: \"center\"\n  }, /* @__PURE__ */ React.createElement(Grid, {\n    item: true\n  }, /* @__PURE__ */ React.createElement(Link, {\n    onClick: () => {\n      toggleModal();\n      setTimeout(focusContent, transitions.duration.leavingScreen);\n    },\n    to: `${getSearchLink()}?query=${term}`\n  }, /* @__PURE__ */ React.createElement(\"span\", {\n    className: classes.viewResultsLink\n  }, \"View Full Results\"), /* @__PURE__ */ React.createElement(LaunchIcon, {\n    color: \"primary\"\n  })))), /* @__PURE__ */ React.createElement(Divider, null), /* @__PURE__ */ React.createElement(SearchResult, null, ({ results }) => /* @__PURE__ */ React.createElement(List, null, results.map(({ document, highlight }) => /* @__PURE__ */ React.createElement(\"div\", {\n    role: \"button\",\n    tabIndex: 0,\n    key: `${document.location}-btn`,\n    onClick: handleResultClick,\n    onKeyPress: handleKeyPress\n  }, /* @__PURE__ */ React.createElement(DefaultResultListItem, {\n    key: document.location,\n    result: document,\n    highlight\n  })))))), /* @__PURE__ */ React.createElement(DialogActions, {\n    className: classes.dialogActionsContainer\n  }, /* @__PURE__ */ React.createElement(Grid, {\n    container: true,\n    direction: \"row\"\n  }, /* @__PURE__ */ React.createElement(Grid, {\n    item: true,\n    xs: 12\n  }, /* @__PURE__ */ React.createElement(SearchResultPager, null)))));\n};\nconst SearchModal = ({\n  open = true,\n  hidden,\n  toggleModal,\n  children\n}) => {\n  var _a;\n  const classes = useStyles$3();\n  return /* @__PURE__ */ React.createElement(Dialog, {\n    classes: {\n      paperFullWidth: classes.paperFullWidth\n    },\n    onClose: toggleModal,\n    \"aria-labelledby\": \"search-modal-title\",\n    fullWidth: true,\n    maxWidth: \"lg\",\n    open,\n    hidden\n  }, open && /* @__PURE__ */ React.createElement(SearchContextProvider, {\n    inheritParentContextIfAvailable: true\n  }, (_a = children && children({ toggleModal })) != null ? _a : /* @__PURE__ */ React.createElement(Modal, {\n    toggleModal\n  })));\n};\n\nconst SearchModalContext = createVersionedContext(\"search-modal-context\");\nconst SearchModalProvider = ({\n  children,\n  showInitially\n}) => {\n  const value = useSearchModal(showInitially);\n  const versionedValue = createVersionedValueMap({ 1: value });\n  return /* @__PURE__ */ React.createElement(SearchModalContext.Provider, {\n    value: versionedValue\n  }, children);\n};\nfunction useSearchModal(initialState = false) {\n  const parentContext = useContext(SearchModalContext);\n  const parentContextValue = parentContext == null ? void 0 : parentContext.atVersion(1);\n  const [state, setState] = useState({\n    hidden: !initialState,\n    open: initialState\n  });\n  const toggleModal = useCallback(\n    () => setState((prevState) => ({\n      open: true,\n      hidden: !prevState.hidden\n    })),\n    []\n  );\n  const setOpen = useCallback(\n    (open) => setState((prevState) => ({\n      open: prevState.open || open,\n      hidden: !open\n    })),\n    []\n  );\n  return (parentContextValue == null ? void 0 : parentContextValue.state) ? parentContextValue : { state, toggleModal, setOpen };\n}\n\nconst UrlUpdater = () => {\n  const location = useLocation();\n  const {\n    term,\n    setTerm,\n    types,\n    setTypes,\n    pageCursor,\n    setPageCursor,\n    filters,\n    setFilters\n  } = useSearch();\n  const prevQueryParams = usePrevious(location.search);\n  useEffect(() => {\n    if (location.search === prevQueryParams) {\n      return;\n    }\n    const query = qs.parse(location.search.substring(1), { arrayLimit: 0 }) || {};\n    if (query.filters) {\n      setFilters(query.filters);\n    }\n    if (query.query) {\n      setTerm(query.query);\n    }\n    if (query.pageCursor) {\n      setPageCursor(query.pageCursor);\n    }\n    if (query.types) {\n      setTypes(query.types);\n    }\n  }, [prevQueryParams, location, setTerm, setTypes, setPageCursor, setFilters]);\n  useEffect(() => {\n    const newParams = qs.stringify(\n      {\n        query: term,\n        types,\n        pageCursor,\n        filters\n      },\n      { arrayFormat: \"brackets\" }\n    );\n    const newUrl = `${window.location.pathname}?${newParams}`;\n    window.history.replaceState(null, document.title, newUrl);\n  }, [term, types, pageCursor, filters]);\n  return null;\n};\nconst SearchPage = () => {\n  const outlet = useOutlet();\n  return /* @__PURE__ */ React.createElement(SearchContextProvider, null, /* @__PURE__ */ React.createElement(UrlUpdater, null), outlet);\n};\n\nconst useStyles$2 = makeStyles$1((theme) => ({\n  card: {\n    backgroundColor: \"rgba(0, 0, 0, .11)\"\n  },\n  cardContent: {\n    paddingTop: theme.spacing(1)\n  },\n  icon: {\n    color: theme.palette.common.black\n  },\n  list: {\n    width: \"100%\"\n  },\n  listItemIcon: {\n    width: \"24px\",\n    height: \"24px\"\n  },\n  accordion: {\n    backgroundColor: theme.palette.background.paper\n  },\n  accordionSummary: {\n    minHeight: \"auto\",\n    \"&.Mui-expanded\": {\n      minHeight: \"auto\"\n    }\n  },\n  accordionSummaryContent: {\n    margin: theme.spacing(2, 0),\n    \"&.Mui-expanded\": {\n      margin: theme.spacing(2, 0)\n    }\n  },\n  accordionDetails: {\n    padding: theme.spacing(0, 0, 1)\n  }\n}));\nconst SearchTypeAccordion = (props) => {\n  const classes = useStyles$2();\n  const { setPageCursor, setTypes, types } = useSearch();\n  const [expanded, setExpanded] = useState(true);\n  const { defaultValue, name, types: givenTypes } = props;\n  const toggleExpanded = () => setExpanded((prevState) => !prevState);\n  const handleClick = (type) => {\n    return () => {\n      setTypes(type !== \"\" ? [type] : []);\n      setPageCursor(void 0);\n      setExpanded(false);\n    };\n  };\n  useEffect(() => {\n    if (defaultValue) {\n      setTypes([defaultValue]);\n    }\n  }, []);\n  const definedTypes = [\n    {\n      value: \"\",\n      name: \"All\",\n      icon: /* @__PURE__ */ React.createElement(AllIcon, null)\n    },\n    ...givenTypes\n  ];\n  const selected = types[0] || \"\";\n  return /* @__PURE__ */ React.createElement(Card, {\n    className: classes.card\n  }, /* @__PURE__ */ React.createElement(CardHeader, {\n    title: name,\n    titleTypographyProps: { variant: \"overline\" }\n  }), /* @__PURE__ */ React.createElement(CardContent, {\n    className: classes.cardContent\n  }, /* @__PURE__ */ React.createElement(Accordion, {\n    className: classes.accordion,\n    expanded,\n    onChange: toggleExpanded\n  }, /* @__PURE__ */ React.createElement(AccordionSummary, {\n    classes: {\n      root: classes.accordionSummary,\n      content: classes.accordionSummaryContent\n    },\n    expandIcon: /* @__PURE__ */ React.createElement(ExpandMoreIcon, {\n      className: classes.icon\n    }),\n    IconButtonProps: { size: \"small\" }\n  }, expanded ? \"Collapse\" : definedTypes.filter((t) => t.value === selected)[0].name), /* @__PURE__ */ React.createElement(AccordionDetails, {\n    classes: { root: classes.accordionDetails }\n  }, /* @__PURE__ */ React.createElement(List, {\n    className: classes.list,\n    component: \"nav\",\n    \"aria-label\": \"filter by type\",\n    disablePadding: true,\n    dense: true\n  }, definedTypes.map((type) => /* @__PURE__ */ React.createElement(Fragment, {\n    key: type.value\n  }, /* @__PURE__ */ React.createElement(Divider, null), /* @__PURE__ */ React.createElement(ListItem, {\n    selected: types[0] === type.value || types.length === 0 && type.value === \"\",\n    onClick: handleClick(type.value),\n    button: true\n  }, /* @__PURE__ */ React.createElement(ListItemIcon, null, cloneElement(type.icon, {\n    className: classes.listItemIcon\n  })), /* @__PURE__ */ React.createElement(ListItemText, {\n    primary: type.name\n  })))))))));\n};\n\nconst useStyles$1 = makeStyles$1((theme) => ({\n  tabs: {\n    borderBottom: `1px solid ${theme.palette.textVerySubtle}`,\n    padding: theme.spacing(0, 4)\n  },\n  tab: {\n    height: \"50px\",\n    fontWeight: theme.typography.fontWeightBold,\n    fontSize: theme.typography.pxToRem(13),\n    color: theme.palette.textSubtle,\n    minWidth: \"130px\"\n  }\n}));\nconst SearchTypeTabs = (props) => {\n  const classes = useStyles$1();\n  const { setPageCursor, setTypes, types } = useSearch();\n  const { defaultValue, types: givenTypes } = props;\n  const changeTab = (_, newType) => {\n    setTypes(newType !== \"\" ? [newType] : []);\n    setPageCursor(void 0);\n  };\n  useEffect(() => {\n    if (defaultValue) {\n      setTypes([defaultValue]);\n    }\n  }, []);\n  const definedTypes = [\n    {\n      value: \"\",\n      name: \"All\"\n    },\n    ...givenTypes\n  ];\n  return /* @__PURE__ */ React.createElement(Tabs, {\n    className: classes.tabs,\n    indicatorColor: \"primary\",\n    value: types.length === 0 ? \"\" : types[0],\n    onChange: changeTab\n  }, definedTypes.map((type, idx) => /* @__PURE__ */ React.createElement(Tab, {\n    key: idx,\n    className: classes.tab,\n    disableRipple: true,\n    label: type.name,\n    value: type.value\n  })));\n};\n\nconst useStyles = makeStyles$1((theme) => ({\n  label: {\n    textTransform: \"capitalize\"\n  },\n  chips: {\n    display: \"flex\",\n    flexWrap: \"wrap\",\n    marginTop: theme.spacing(1)\n  },\n  chip: {\n    margin: 2\n  }\n}));\nconst SearchType = (props) => {\n  const { className, defaultValue, name, values = [] } = props;\n  const classes = useStyles();\n  const { types, setTypes } = useSearch();\n  useEffectOnce(() => {\n    if (!types.length) {\n      if (defaultValue && Array.isArray(defaultValue)) {\n        setTypes(defaultValue);\n      } else if (defaultValue) {\n        setTypes([defaultValue]);\n      }\n    }\n  });\n  const handleChange = (e) => {\n    const value = e.target.value;\n    setTypes(value);\n  };\n  return /* @__PURE__ */ React.createElement(FormControl, {\n    className,\n    variant: \"filled\",\n    fullWidth: true,\n    \"data-testid\": \"search-typefilter-next\"\n  }, /* @__PURE__ */ React.createElement(InputLabel, {\n    className: classes.label,\n    margin: \"dense\"\n  }, name), /* @__PURE__ */ React.createElement(Select, {\n    multiple: true,\n    variant: \"outlined\",\n    value: types,\n    onChange: handleChange,\n    placeholder: \"All Results\",\n    renderValue: (selected) => /* @__PURE__ */ React.createElement(\"div\", {\n      className: classes.chips\n    }, selected.map((value) => /* @__PURE__ */ React.createElement(Chip, {\n      key: value,\n      label: value,\n      className: classes.chip,\n      size: \"small\"\n    })))\n  }, values.map((value) => /* @__PURE__ */ React.createElement(MenuItem, {\n    key: value,\n    value\n  }, /* @__PURE__ */ React.createElement(Checkbox, {\n    checked: types.indexOf(value) > -1\n  }), /* @__PURE__ */ React.createElement(ListItemText, {\n    primary: value\n  })))));\n};\nSearchType.Accordion = (props) => {\n  return /* @__PURE__ */ React.createElement(SearchTypeAccordion, {\n    ...props\n  });\n};\nSearchType.Tabs = (props) => {\n  return /* @__PURE__ */ React.createElement(SearchTypeTabs, {\n    ...props\n  });\n};\n\nconst SidebarSearch = (props) => {\n  const searchRoute = useRouteRef(rootRouteRef);\n  const { focusContent } = useContent();\n  const navigate = useNavigate();\n  const handleSearch = useCallback(\n    (query) => {\n      const queryString = qs.stringify({ query }, { addQueryPrefix: true });\n      focusContent();\n      navigate(`${searchRoute()}${queryString}`);\n    },\n    [focusContent, navigate, searchRoute]\n  );\n  return /* @__PURE__ */ React.createElement(SidebarSearchField, {\n    icon: props.icon,\n    onSearch: handleSearch,\n    to: \"/search\"\n  });\n};\n\nexport { HomePageSearchBar as H, SearchPage as S, SearchModalProvider as a, SearchModal as b, SearchType as c, SidebarSearch as d, SearchPage$1 as e, SidebarSearchModal as f, rootRouteRef as r, searchPlugin as s, useSearchModal as u };\n//# sourceMappingURL=index-0387f230.esm.js.map\n","import { Link, MarkdownContent, Progress, Page, Header, Content, ContentHeader, SupportButton } from '@backstage/core-components';\nimport { createApiRef, useApi, errorApiRef, createRouteRef, createPlugin, createApiFactory, createRoutableExtension } from '@backstage/core-plugin-api';\nimport React, { useRef, useLayoutEffect, useState, useEffect } from 'react';\nimport useAsync from 'react-use/lib/useAsync';\nimport { makeStyles, DialogContent, DialogActions, Button, Input, Grid } from '@material-ui/core';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport LinkIcon from '@material-ui/icons/Link';\nimport color from 'color';\nimport { forceSimulation, forceCollide } from 'd3-force';\n\nconst techRadarApiRef = createApiRef(\n  {\n    id: \"plugin.techradar.service\"\n  }\n);\nvar MovedState = /* @__PURE__ */ ((MovedState2) => {\n  MovedState2[MovedState2[\"Down\"] = -1] = \"Down\";\n  MovedState2[MovedState2[\"NoChange\"] = 0] = \"NoChange\";\n  MovedState2[MovedState2[\"Up\"] = 1] = \"Up\";\n  return MovedState2;\n})(MovedState || {});\n\nconst useStyles$5 = makeStyles((theme) => ({\n  ring: {\n    fill: \"none\",\n    stroke: \"#bbb\",\n    strokeWidth: \"1px\"\n  },\n  axis: {\n    fill: \"none\",\n    stroke: \"#bbb\",\n    strokeWidth: \"1px\"\n  },\n  text: {\n    pointerEvents: \"none\",\n    userSelect: \"none\",\n    fill: theme.palette.text.primary,\n    fontSize: \"25px\",\n    fontWeight: 800\n  }\n}));\nconst RadarGrid = (props) => {\n  const { radius, rings } = props;\n  const classes = useStyles$5(props);\n  const makeRingNode = (ringIndex, ringRadius) => [\n    /* @__PURE__ */ React.createElement(\"circle\", {\n      key: `c${ringIndex}`,\n      cx: 0,\n      cy: 0,\n      r: ringRadius,\n      className: classes.ring\n    }),\n    /* @__PURE__ */ React.createElement(\"text\", {\n      key: `t${ringIndex}`,\n      y: ringRadius !== void 0 ? -ringRadius + 42 : void 0,\n      textAnchor: \"middle\",\n      className: classes.text\n    }, rings[ringIndex].name)\n  ];\n  const axisNodes = [\n    /* @__PURE__ */ React.createElement(\"line\", {\n      key: \"x\",\n      x1: 0,\n      y1: -radius,\n      x2: 0,\n      y2: radius,\n      className: classes.axis,\n      \"data-testid\": \"radar-grid-x-line\"\n    }),\n    /* @__PURE__ */ React.createElement(\"line\", {\n      key: \"y\",\n      x1: -radius,\n      y1: 0,\n      x2: radius,\n      y2: 0,\n      className: classes.axis,\n      \"data-testid\": \"radar-grid-y-line\"\n    })\n  ];\n  const ringNodes = rings.map((r) => r.outerRadius).map((ringRadius, ringIndex) => makeRingNode(ringIndex, ringRadius));\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, axisNodes.concat(...ringNodes));\n};\n\nfunction isValidUrl(url) {\n  return Boolean(url && url !== \"#\" && url.length > 0);\n}\nconst WithLink = ({\n  url,\n  className,\n  children\n}) => isValidUrl(url) ? /* @__PURE__ */ React.createElement(Link, {\n  className,\n  to: url\n}, children) : /* @__PURE__ */ React.createElement(React.Fragment, null, children);\n\nconst RadarDescription = (props) => {\n  const { open, onClose, title, description, url } = props;\n  return /* @__PURE__ */ React.createElement(Dialog, {\n    \"data-testid\": \"radar-description\",\n    open,\n    onClose\n  }, /* @__PURE__ */ React.createElement(DialogTitle, {\n    \"data-testid\": \"radar-description-dialog-title\"\n  }, title), /* @__PURE__ */ React.createElement(DialogContent, {\n    dividers: true\n  }, /* @__PURE__ */ React.createElement(MarkdownContent, {\n    content: description\n  })), isValidUrl(url) && /* @__PURE__ */ React.createElement(DialogActions, null, /* @__PURE__ */ React.createElement(Button, {\n    component: Link,\n    to: url,\n    onClick: onClose,\n    color: \"primary\",\n    startIcon: /* @__PURE__ */ React.createElement(LinkIcon, null)\n  }, \"LEARN MORE\")));\n};\n\nconst useStyles$4 = makeStyles(() => ({\n  text: {\n    pointerEvents: \"none\",\n    userSelect: \"none\",\n    fontSize: \"9px\",\n    fill: \"#fff\",\n    textAnchor: \"middle\"\n  },\n  link: {\n    cursor: \"pointer\"\n  }\n}));\nconst makeBlip = (color, moved) => {\n  const style = { fill: color };\n  let blip = /* @__PURE__ */ React.createElement(\"circle\", {\n    r: 9,\n    style\n  });\n  if (moved && moved > 0) {\n    blip = /* @__PURE__ */ React.createElement(\"path\", {\n      d: \"M -11,5 11,5 0,-13 z\",\n      style\n    });\n  } else if (moved && moved < 0) {\n    blip = /* @__PURE__ */ React.createElement(\"path\", {\n      d: \"M -11,-5 11,-5 0,13 z\",\n      style\n    });\n  }\n  return blip;\n};\nconst RadarEntry = (props) => {\n  const classes = useStyles$4(props);\n  const [open, setOpen] = React.useState(false);\n  const {\n    moved,\n    description,\n    title,\n    color,\n    url,\n    value,\n    x,\n    y,\n    onMouseEnter,\n    onMouseLeave,\n    onClick\n  } = props;\n  const blip = makeBlip(color, moved);\n  const handleClickOpen = () => {\n    setOpen(true);\n  };\n  const handleClose = () => {\n    setOpen(false);\n  };\n  const toggle = () => {\n    setOpen(!open);\n  };\n  return /* @__PURE__ */ React.createElement(\"g\", {\n    transform: `translate(${x}, ${y})`,\n    onMouseEnter,\n    onMouseLeave,\n    onClick,\n    \"data-testid\": \"radar-entry\"\n  }, \" \", open && /* @__PURE__ */ React.createElement(RadarDescription, {\n    open,\n    onClose: handleClose,\n    title: title ? title : \"no title\",\n    description: description ? description : \"no description\",\n    url\n  }), description ? /* @__PURE__ */ React.createElement(\"a\", {\n    className: classes.link,\n    onClick: handleClickOpen,\n    role: \"button\",\n    href: \"#\",\n    tabIndex: 0,\n    onKeyPress: toggle\n  }, blip) : /* @__PURE__ */ React.createElement(WithLink, {\n    url,\n    className: classes.link\n  }, blip), /* @__PURE__ */ React.createElement(\"text\", {\n    y: 3,\n    className: classes.text\n  }, value));\n};\n\nconst useStyles$3 = makeStyles(() => ({\n  bubble: {\n    pointerEvents: \"none\",\n    userSelect: \"none\",\n    opacity: 0\n  },\n  visibleBubble: {\n    pointerEvents: \"none\",\n    userSelect: \"none\",\n    opacity: 0.8\n  },\n  background: {\n    fill: \"#333\"\n  },\n  text: {\n    pointerEvents: \"none\",\n    userSelect: \"none\",\n    fontSize: \"10px\",\n    fill: \"#fff\"\n  }\n}));\nconst RadarBubble = (props) => {\n  const classes = useStyles$3(props);\n  const { visible, text } = props;\n  const textElem = useRef(null);\n  const svgElem = useRef(null);\n  const rectElem = useRef(null);\n  const pathElem = useRef(null);\n  const updatePosition = () => {\n    if (textElem.current) {\n      const { x, y } = props;\n      const bbox = textElem.current.getBBox();\n      const marginX = 5;\n      const marginY = 4;\n      if (svgElem.current) {\n        svgElem.current.setAttribute(\n          \"transform\",\n          `translate(${x - bbox.width / 2}, ${y - bbox.height - marginY})`\n        );\n      }\n      if (rectElem.current) {\n        rectElem.current.setAttribute(\"x\", String(-marginX));\n        rectElem.current.setAttribute(\"y\", String(-bbox.height));\n        rectElem.current.setAttribute(\n          \"width\",\n          String(bbox.width + 2 * marginX)\n        );\n        rectElem.current.setAttribute(\"height\", String(bbox.height + marginY));\n      }\n      if (pathElem.current) {\n        pathElem.current.setAttribute(\n          \"transform\",\n          `translate(${bbox.width / 2 - marginX}, ${marginY - 1})`\n        );\n      }\n    }\n  };\n  useLayoutEffect(() => {\n    updatePosition();\n  });\n  return /* @__PURE__ */ React.createElement(\"g\", {\n    ref: svgElem,\n    x: 0,\n    y: 0,\n    className: visible ? classes.visibleBubble : classes.bubble,\n    \"data-testid\": \"radar-bubble\"\n  }, /* @__PURE__ */ React.createElement(\"rect\", {\n    ref: rectElem,\n    rx: 4,\n    ry: 4,\n    className: classes.background\n  }), /* @__PURE__ */ React.createElement(\"text\", {\n    ref: textElem,\n    className: classes.text\n  }, text), /* @__PURE__ */ React.createElement(\"path\", {\n    ref: pathElem,\n    d: \"M 0,0 10,0 5,8 z\",\n    className: classes.background\n  }));\n};\n\nconst useStyles$2 = makeStyles((theme) => ({\n  text: {\n    pointerEvents: \"none\",\n    userSelect: \"none\",\n    fontSize: \"10px\",\n    fill: theme.palette.text.secondary\n  }\n}));\nconst RadarFooter = (props) => {\n  const { x, y } = props;\n  const classes = useStyles$2(props);\n  return /* @__PURE__ */ React.createElement(\"text\", {\n    \"data-testid\": \"radar-footer\",\n    transform: `translate(${x}, ${y})`,\n    className: classes.text\n  }, \"\\u25B2 moved up\\xA0\\xA0\\xA0\\xA0\\xA0\\u25BC moved down\");\n};\n\nconst useStyles$1 = makeStyles((theme) => ({\n  quadrant: {\n    height: \"100%\",\n    width: \"100%\",\n    overflowY: \"auto\",\n    scrollbarWidth: \"thin\"\n  },\n  quadrantHeading: {\n    pointerEvents: \"none\",\n    userSelect: \"none\",\n    marginTop: 0,\n    marginBottom: theme.spacing(2),\n    fontSize: \"18px\"\n  },\n  rings: {\n    columns: 3\n  },\n  ring: {\n    breakInside: \"avoid-column\",\n    pageBreakInside: \"avoid\",\n    \"-webkit-column-break-inside\": \"avoid\",\n    fontSize: \"12px\",\n    marginBottom: theme.spacing(2)\n  },\n  ringEmpty: {\n    color: theme.palette.text.secondary\n  },\n  ringHeading: {\n    pointerEvents: \"none\",\n    userSelect: \"none\",\n    marginTop: 0,\n    marginBottom: theme.spacing(1),\n    fontSize: \"12px\",\n    fontWeight: 800\n  },\n  ringList: {\n    listStylePosition: \"inside\",\n    marginTop: 0,\n    paddingLeft: 0,\n    fontVariantNumeric: \"proportional-nums\",\n    \"-moz-font-feature-settings\": \"pnum\",\n    \"-webkit-font-feature-settings\": \"pnum\",\n    \"font-feature-settings\": \"pnum\"\n  },\n  entry: {\n    pointerEvents: \"visiblePainted\",\n    userSelect: \"none\",\n    fontSize: \"11px\"\n  },\n  entryLink: {\n    pointerEvents: \"visiblePainted\"\n  }\n}));\nconst RadarLegend = (props) => {\n  const classes = useStyles$1(props);\n  const getSegment = (segmented, quadrant, ring, ringOffset = 0) => {\n    const quadrantIndex = quadrant.index;\n    const ringIndex = ring.index;\n    const segmentedData = quadrantIndex === void 0 ? {} : segmented[quadrantIndex] || {};\n    return ringIndex === void 0 ? [] : segmentedData[ringIndex + ringOffset] || [];\n  };\n  const RadarLegendLink = ({\n    url,\n    description,\n    title\n  }) => {\n    const [open, setOpen] = React.useState(false);\n    const handleClickOpen = () => {\n      setOpen(true);\n    };\n    const handleClose = () => {\n      setOpen(false);\n    };\n    const toggle = () => {\n      setOpen(!open);\n    };\n    if (description) {\n      return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(\"span\", {\n        className: classes.entryLink,\n        onClick: handleClickOpen,\n        role: \"button\",\n        tabIndex: 0,\n        onKeyPress: toggle\n      }, /* @__PURE__ */ React.createElement(\"span\", {\n        className: classes.entry\n      }, title)), open && /* @__PURE__ */ React.createElement(RadarDescription, {\n        open,\n        onClose: handleClose,\n        title: title ? title : \"no title\",\n        url,\n        description\n      }));\n    }\n    return /* @__PURE__ */ React.createElement(WithLink, {\n      url,\n      className: classes.entryLink\n    }, /* @__PURE__ */ React.createElement(\"span\", {\n      className: classes.entry\n    }, title));\n  };\n  const RadarLegendRing = ({\n    ring,\n    entries: entries2,\n    onEntryMouseEnter: onEntryMouseEnter2,\n    onEntryMouseLeave: onEntryMouseLeave2\n  }) => {\n    return /* @__PURE__ */ React.createElement(\"div\", {\n      \"data-testid\": \"radar-ring\",\n      key: ring.id,\n      className: classes.ring\n    }, /* @__PURE__ */ React.createElement(\"h3\", {\n      className: classes.ringHeading\n    }, ring.name), entries2.length === 0 ? /* @__PURE__ */ React.createElement(\"p\", {\n      className: classes.ringEmpty\n    }, \"(empty)\") : /* @__PURE__ */ React.createElement(\"ol\", {\n      className: classes.ringList\n    }, entries2.map((entry) => /* @__PURE__ */ React.createElement(\"li\", {\n      key: entry.id,\n      value: (entry.index || 0) + 1,\n      onMouseEnter: onEntryMouseEnter2 && (() => onEntryMouseEnter2(entry)),\n      onMouseLeave: onEntryMouseLeave2 && (() => onEntryMouseLeave2(entry))\n    }, /* @__PURE__ */ React.createElement(RadarLegendLink, {\n      url: entry.url,\n      title: entry.title,\n      description: entry.description\n    })))));\n  };\n  const RadarLegendQuadrant = ({\n    segments: segments2,\n    quadrant,\n    rings: rings2,\n    onEntryMouseEnter: onEntryMouseEnter2,\n    onEntryMouseLeave: onEntryMouseLeave2\n  }) => {\n    return /* @__PURE__ */ React.createElement(\"foreignObject\", {\n      key: quadrant.id,\n      x: quadrant.legendX,\n      y: quadrant.legendY,\n      width: quadrant.legendWidth,\n      height: quadrant.legendHeight,\n      \"data-testid\": \"radar-quadrant\"\n    }, /* @__PURE__ */ React.createElement(\"div\", {\n      className: classes.quadrant\n    }, /* @__PURE__ */ React.createElement(\"h2\", {\n      className: classes.quadrantHeading\n    }, quadrant.name), /* @__PURE__ */ React.createElement(\"div\", {\n      className: classes.rings\n    }, rings2.map((ring) => /* @__PURE__ */ React.createElement(RadarLegendRing, {\n      key: ring.id,\n      ring,\n      entries: getSegment(segments2, quadrant, ring),\n      onEntryMouseEnter: onEntryMouseEnter2,\n      onEntryMouseLeave: onEntryMouseLeave2\n    })))));\n  };\n  const setupSegments = (entries2) => {\n    const segments2 = {};\n    for (const entry of entries2) {\n      const quadrantIndex = entry.quadrant.index;\n      const ringIndex = entry.ring.index;\n      let quadrantData = {};\n      if (quadrantIndex !== void 0) {\n        if (segments2[quadrantIndex] === void 0) {\n          segments2[quadrantIndex] = {};\n        }\n        quadrantData = segments2[quadrantIndex];\n      }\n      let ringData = [];\n      if (ringIndex !== void 0) {\n        if (quadrantData[ringIndex] === void 0) {\n          quadrantData[ringIndex] = [];\n        }\n        ringData = quadrantData[ringIndex];\n      }\n      ringData.push(entry);\n    }\n    return segments2;\n  };\n  const { quadrants, rings, entries, onEntryMouseEnter, onEntryMouseLeave } = props;\n  const segments = setupSegments(entries);\n  return /* @__PURE__ */ React.createElement(\"g\", {\n    \"data-testid\": \"radar-legend\"\n  }, quadrants.map((quadrant) => /* @__PURE__ */ React.createElement(RadarLegendQuadrant, {\n    key: quadrant.id,\n    segments,\n    quadrant,\n    rings,\n    onEntryMouseEnter,\n    onEntryMouseLeave\n  })));\n};\n\nconst RadarPlot = (props) => {\n  const {\n    width,\n    height,\n    radius,\n    quadrants,\n    rings,\n    entries,\n    activeEntry,\n    onEntryMouseEnter,\n    onEntryMouseLeave\n  } = props;\n  return /* @__PURE__ */ React.createElement(\"g\", {\n    \"data-testid\": \"radar-plot\"\n  }, /* @__PURE__ */ React.createElement(RadarLegend, {\n    quadrants,\n    rings,\n    entries,\n    onEntryMouseEnter: onEntryMouseEnter && ((entry) => onEntryMouseEnter(entry)),\n    onEntryMouseLeave: onEntryMouseLeave && ((entry) => onEntryMouseLeave(entry))\n  }), /* @__PURE__ */ React.createElement(\"g\", {\n    transform: `translate(${width / 2}, ${height / 2})`\n  }, /* @__PURE__ */ React.createElement(RadarGrid, {\n    radius,\n    rings\n  }), /* @__PURE__ */ React.createElement(RadarFooter, {\n    x: -0.5 * width,\n    y: 0.5 * height\n  }), entries.map((entry) => /* @__PURE__ */ React.createElement(RadarEntry, {\n    key: entry.id,\n    x: entry.x || 0,\n    y: entry.y || 0,\n    color: entry.color || \"\",\n    value: ((entry == null ? void 0 : entry.index) || 0) + 1,\n    url: entry.url,\n    description: entry.description,\n    moved: entry.moved,\n    title: entry.title,\n    onMouseEnter: onEntryMouseEnter && (() => onEntryMouseEnter(entry)),\n    onMouseLeave: onEntryMouseLeave && (() => onEntryMouseLeave(entry))\n  })), /* @__PURE__ */ React.createElement(RadarBubble, {\n    visible: !!activeEntry,\n    text: (activeEntry == null ? void 0 : activeEntry.title) || \"\",\n    x: (activeEntry == null ? void 0 : activeEntry.x) || 0,\n    y: (activeEntry == null ? void 0 : activeEntry.y) || 0\n  })));\n};\n\nclass Segment {\n  constructor(quadrant, ring, radius, nextSeed) {\n    this.nextSeed = nextSeed;\n    this.polarMin = {\n      t: quadrant.radialMin,\n      r: ring.innerRadius\n    };\n    this.polarMax = {\n      t: quadrant.radialMax,\n      r: ring.outerRadius\n    };\n    this.cartesianMin = {\n      x: 15 * quadrant.offsetX,\n      y: 15 * quadrant.offsetY\n    };\n    this.cartesianMax = {\n      x: radius * quadrant.offsetX,\n      y: radius * quadrant.offsetY\n    };\n  }\n  clipx(d) {\n    const c = boundedBox(d, this.cartesianMin, this.cartesianMax);\n    const p = boundedRing(polar(c), this.polarMin.r + 15, this.polarMax.r - 15);\n    d.x = cartesian(p).x;\n    return d.x;\n  }\n  clipy(d) {\n    const c = boundedBox(d, this.cartesianMin, this.cartesianMax);\n    const p = boundedRing(polar(c), this.polarMin.r + 15, this.polarMax.r - 15);\n    d.y = cartesian(p).y;\n    return d.y;\n  }\n  random() {\n    return cartesian({\n      t: this._randomBetween(this.polarMin.t, this.polarMax.t),\n      r: this._normalBetween(this.polarMin.r, this.polarMax.r)\n    });\n  }\n  _random() {\n    const x = Math.sin(this.nextSeed()) * 1e4;\n    return x - Math.floor(x);\n  }\n  _randomBetween(min, max) {\n    return min + this._random() * (max - min);\n  }\n  _normalBetween(min, max) {\n    return min + (this._random() + this._random()) * 0.5 * (max - min);\n  }\n}\nfunction polar({ x, y }) {\n  return {\n    t: Math.atan2(y, x),\n    r: Math.sqrt(x * x + y * y)\n  };\n}\nfunction cartesian({ r, t }) {\n  return {\n    x: r * Math.cos(t),\n    y: r * Math.sin(t)\n  };\n}\nfunction boundedInterval(value, min, max) {\n  const low = Math.min(min, max);\n  const high = Math.max(min, max);\n  return Math.min(Math.max(value, low), high);\n}\nfunction boundedRing(polarValue, rMin, rMax) {\n  return {\n    t: polarValue.t,\n    r: boundedInterval(polarValue.r, rMin, rMax)\n  };\n}\nfunction boundedBox(point, min, max) {\n  return {\n    x: boundedInterval(point.x, min.x, max.x),\n    y: boundedInterval(point.y, min.y, max.y)\n  };\n}\n\nconst adjustQuadrants = (quadrants, radius, width, height) => {\n  const margin = 16;\n  const xStops = [\n    margin,\n    width / 2 - radius - margin,\n    width / 2 + radius + margin,\n    width - margin\n  ];\n  const yStops = [margin, height / 2 - margin, height / 2, height - margin];\n  const legendParams = [\n    {\n      x: xStops[2],\n      y: yStops[2],\n      width: xStops[3] - xStops[2],\n      height: yStops[3] - yStops[2]\n    },\n    {\n      x: xStops[0],\n      y: yStops[2],\n      width: xStops[1] - xStops[0],\n      height: yStops[3] - yStops[2]\n    },\n    {\n      x: xStops[0],\n      y: yStops[0],\n      width: xStops[1] - xStops[0],\n      height: yStops[1] - yStops[0]\n    },\n    {\n      x: xStops[2],\n      y: yStops[0],\n      width: xStops[3] - xStops[2],\n      height: yStops[1] - yStops[0]\n    }\n  ];\n  quadrants.forEach((quadrant, index) => {\n    const legendParam = legendParams[index % 4];\n    quadrant.index = index;\n    quadrant.radialMin = index * Math.PI / 2;\n    quadrant.radialMax = (index + 1) * Math.PI / 2;\n    quadrant.offsetX = index % 4 === 0 || index % 4 === 3 ? 1 : -1;\n    quadrant.offsetY = index % 4 === 0 || index % 4 === 1 ? 1 : -1;\n    quadrant.legendX = legendParam.x;\n    quadrant.legendY = legendParam.y;\n    quadrant.legendWidth = legendParam.width;\n    quadrant.legendHeight = legendParam.height;\n  });\n};\nconst adjustEntries = (entries, quadrants, rings, radius, activeEntry) => {\n  let seed = 42;\n  entries.forEach((entry, index) => {\n    const quadrant = quadrants.find((q) => {\n      const match = typeof entry.quadrant === \"object\" ? entry.quadrant.id : entry.quadrant;\n      return q.id === match;\n    });\n    const ring = rings.find((r) => {\n      const match = typeof entry.ring === \"object\" ? entry.ring.id : entry.ring;\n      return r.id === match;\n    });\n    if (!quadrant) {\n      throw new Error(\n        `Unknown quadrant ${entry.quadrant} for entry ${entry.id}!`\n      );\n    }\n    if (!ring) {\n      throw new Error(`Unknown ring ${entry.ring} for entry ${entry.id}!`);\n    }\n    entry.index = index;\n    entry.quadrant = quadrant;\n    entry.ring = ring;\n    entry.segment = new Segment(quadrant, ring, radius, () => seed++);\n    const point = entry.segment.random();\n    entry.x = point.x;\n    entry.y = point.y;\n    entry.active = activeEntry ? entry.id === activeEntry.id : false;\n    entry.color = entry.active ? entry.ring.color : color(entry.ring.color).desaturate(0.5).lighten(0.1).string();\n  });\n  const simulation = forceSimulation().nodes(entries).velocityDecay(0.19).force(\"collision\", forceCollide().radius(12).strength(0.85)).stop();\n  for (let i = 0, n = Math.ceil(\n    Math.log(simulation.alphaMin()) / Math.log(1 - simulation.alphaDecay())\n  ); i < n; ++i) {\n    simulation.tick();\n    for (const entry of entries) {\n      if (entry.segment) {\n        entry.x = entry.segment.clipx(entry);\n        entry.y = entry.segment.clipy(entry);\n      }\n    }\n  }\n};\nconst adjustRings = (rings, radius) => {\n  rings.forEach((ring, index) => {\n    ring.index = index;\n    ring.outerRadius = (index + 2) / (rings.length + 1) * radius;\n    ring.innerRadius = (index === 0 ? 0 : index + 1) / (rings.length + 1) * radius;\n  });\n};\n\nconst Radar = (props) => {\n  const { width, height, quadrants, rings, entries } = props;\n  const radius = Math.min(width, height) / 2;\n  const [activeEntry, setActiveEntry] = useState();\n  const node = useRef(null);\n  adjustQuadrants(quadrants, radius, width, height);\n  adjustRings(rings, radius);\n  adjustEntries(entries, quadrants, rings, radius, activeEntry);\n  return /* @__PURE__ */ React.createElement(\"svg\", {\n    ref: node,\n    width,\n    height,\n    ...props.svgProps\n  }, /* @__PURE__ */ React.createElement(RadarPlot, {\n    width,\n    height,\n    radius,\n    entries,\n    quadrants,\n    rings,\n    activeEntry,\n    onEntryMouseEnter: (entry) => setActiveEntry(entry),\n    onEntryMouseLeave: () => setActiveEntry(void 0)\n  }));\n};\n\nconst useTechRadarLoader = (id) => {\n  const errorApi = useApi(errorApiRef);\n  const techRadarApi = useApi(techRadarApiRef);\n  const { error, value, loading } = useAsync(\n    async () => techRadarApi.load(id),\n    [techRadarApi, id]\n  );\n  useEffect(() => {\n    if (error) {\n      errorApi.post(error);\n    }\n  }, [error, errorApi]);\n  return { loading, value, error };\n};\nfunction matchFilter(filter) {\n  const terms = filter == null ? void 0 : filter.toLocaleLowerCase(\"en-US\").split(/\\s/).map((e) => e.trim()).filter(Boolean);\n  if (!(terms == null ? void 0 : terms.length)) {\n    return () => true;\n  }\n  return (entry) => {\n    var _a;\n    const text = `${entry.title} ${((_a = entry.timeline[0]) == null ? void 0 : _a.description) || \"\"}`.toLocaleLowerCase(\"en-US\");\n    return terms.every((term) => text.includes(term));\n  };\n}\nfunction RadarComponent(props) {\n  const { loading, error, value: data } = useTechRadarLoader(props.id);\n  const mapToEntries = (loaderResponse) => {\n    return loaderResponse.entries.filter(matchFilter(props.searchText)).map((entry) => ({\n      id: entry.key,\n      quadrant: loaderResponse.quadrants.find((q) => q.id === entry.quadrant),\n      title: entry.title,\n      ring: loaderResponse.rings.find(\n        (r) => r.id === entry.timeline[0].ringId\n      ),\n      timeline: entry.timeline.map((e) => {\n        return {\n          date: e.date,\n          ring: loaderResponse.rings.find((a) => a.id === e.ringId),\n          description: e.description,\n          moved: e.moved\n        };\n      }),\n      moved: entry.timeline[0].moved,\n      description: entry.description || entry.timeline[0].description,\n      url: entry.url\n    }));\n  };\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, loading && /* @__PURE__ */ React.createElement(Progress, null), !loading && !error && data && /* @__PURE__ */ React.createElement(Radar, {\n    ...props,\n    rings: data.rings,\n    quadrants: data.quadrants,\n    entries: mapToEntries(data)\n  }));\n}\n\nconst useStyles = makeStyles(() => ({\n  overflowXScroll: {\n    overflowX: \"scroll\"\n  }\n}));\nfunction RadarPage(props) {\n  const {\n    title = \"Tech Radar\",\n    subtitle = \"Pick the recommended technologies for your projects\",\n    pageTitle = \"Company Radar\",\n    ...componentProps\n  } = props;\n  const classes = useStyles();\n  const [searchText, setSearchText] = React.useState(\"\");\n  return /* @__PURE__ */ React.createElement(Page, {\n    themeId: \"tool\"\n  }, /* @__PURE__ */ React.createElement(Header, {\n    title,\n    subtitle\n  }), /* @__PURE__ */ React.createElement(Content, {\n    className: classes.overflowXScroll\n  }, /* @__PURE__ */ React.createElement(ContentHeader, {\n    title: pageTitle\n  }, /* @__PURE__ */ React.createElement(Input, {\n    id: \"tech-radar-filter\",\n    type: \"search\",\n    placeholder: \"Filter\",\n    onChange: (e) => setSearchText(e.target.value)\n  }), /* @__PURE__ */ React.createElement(SupportButton, null, /* @__PURE__ */ React.createElement(\"p\", null, \"This is used for visualizing the official guidelines of different areas of software development such as languages, frameworks, infrastructure and processes. You can find an explanation for the radar at\", \" \", /* @__PURE__ */ React.createElement(Link, {\n    to: \"https://opensource.zalando.com/tech-radar/\"\n  }, \"Zalando Tech Radar\"), \".\"))), /* @__PURE__ */ React.createElement(Grid, {\n    container: true,\n    spacing: 3,\n    direction: \"row\"\n  }, /* @__PURE__ */ React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    sm: 6,\n    md: 4\n  }, /* @__PURE__ */ React.createElement(RadarComponent, {\n    searchText,\n    ...componentProps\n  })))));\n}\n\nvar RadarPage$1 = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  RadarPage: RadarPage\n});\n\nconst rings = new Array();\nrings.push({ id: \"adopt\", name: \"ADOPT\", color: \"#93c47d\" });\nrings.push({ id: \"trial\", name: \"TRIAL\", color: \"#93d2c2\" });\nrings.push({ id: \"assess\", name: \"ASSESS\", color: \"#fbdb84\" });\nrings.push({ id: \"hold\", name: \"HOLD\", color: \"#efafa9\" });\nconst quadrants = new Array();\nquadrants.push({ id: \"infrastructure\", name: \"Infrastructure\" });\nquadrants.push({ id: \"frameworks\", name: \"Frameworks\" });\nquadrants.push({ id: \"languages\", name: \"Languages\" });\nquadrants.push({ id: \"process\", name: \"Process\" });\nconst entries = new Array();\nentries.push({\n  timeline: [\n    {\n      moved: 0,\n      ringId: \"adopt\",\n      date: new Date(\"2020-08-06\"),\n      description: \"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua\"\n    }\n  ],\n  url: \"#\",\n  key: \"javascript\",\n  id: \"javascript\",\n  title: \"JavaScript\",\n  quadrant: \"languages\",\n  description: 'Excepteur **sint** occaecat *cupidatat* non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.\\n\\n```ts\\nconst x = \"3\";\\n```\\n'\n});\nentries.push({\n  timeline: [\n    {\n      moved: -1,\n      ringId: \"adopt\",\n      date: new Date(\"2020-08-06\"),\n      description: \"Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat\"\n    }\n  ],\n  url: \"#\",\n  key: \"typescript\",\n  id: \"typescript\",\n  title: \"TypeScript\",\n  quadrant: \"languages\",\n  description: \"Itaque earum rerum hic tenetur a sapiente delectus, ut aut reiciendis voluptatibus maiores alias consequatur aut perferendis doloribus asperiores repellat\"\n});\nentries.push({\n  timeline: [\n    {\n      moved: 1,\n      ringId: \"adopt\",\n      date: new Date(\"2020-08-06\"),\n      description: \"Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur\"\n    }\n  ],\n  url: \"https://webpack.js.org/\",\n  key: \"webpack\",\n  id: \"webpack\",\n  title: \"Webpack\",\n  quadrant: \"frameworks\"\n});\nentries.push({\n  timeline: [\n    {\n      moved: 0,\n      ringId: \"adopt\",\n      date: new Date(\"2020-08-06\")\n    }\n  ],\n  url: \"https://reactjs.org/\",\n  key: \"react\",\n  id: \"react\",\n  title: \"React\",\n  quadrant: \"frameworks\"\n});\nentries.push({\n  timeline: [\n    {\n      moved: 0,\n      ringId: \"adopt\",\n      date: new Date(\"2020-08-06\")\n    }\n  ],\n  url: \"#\",\n  key: \"code-reviews\",\n  id: \"code-reviews\",\n  title: \"Code Reviews\",\n  quadrant: \"process\"\n});\nentries.push({\n  timeline: [\n    {\n      moved: 0,\n      ringId: \"assess\",\n      date: new Date(\"2020-08-06\")\n    }\n  ],\n  url: \"#\",\n  key: \"mob-programming\",\n  id: \"mob-programming\",\n  title: \"Mob Programming\",\n  quadrant: \"process\"\n});\nentries.push({\n  timeline: [\n    {\n      moved: 0,\n      ringId: \"adopt\",\n      date: new Date(\"2020-08-06\")\n    }\n  ],\n  url: \"#\",\n  key: \"docs-like-code\",\n  id: \"docs-like-code\",\n  title: \"Docs-like-code\",\n  quadrant: \"process\"\n});\nentries.push({\n  timeline: [\n    {\n      ringId: \"hold\",\n      date: new Date(\"2020-08-06\")\n    }\n  ],\n  url: \"#\",\n  key: \"force-push\",\n  id: \"force-push\",\n  title: \"Force push to master\",\n  quadrant: \"process\"\n});\nentries.push({\n  timeline: [\n    {\n      ringId: \"adopt\",\n      date: new Date(\"2020-08-06\"),\n      description: \"long description\"\n    }\n  ],\n  url: \"https://github.com\",\n  key: \"github-actions\",\n  id: \"github-actions\",\n  title: \"GitHub Actions\",\n  quadrant: \"infrastructure\"\n});\nconst mock = {\n  entries,\n  quadrants,\n  rings\n};\nclass SampleTechRadarApi {\n  async load() {\n    return mock;\n  }\n}\n\nconst rootRouteRef = createRouteRef({\n  id: \"tech-radar\"\n});\nconst techRadarPlugin = createPlugin({\n  id: \"tech-radar\",\n  routes: {\n    root: rootRouteRef\n  },\n  apis: [createApiFactory(techRadarApiRef, new SampleTechRadarApi())]\n});\nconst TechRadarPage = techRadarPlugin.provide(\n  createRoutableExtension({\n    name: \"TechRadarPage\",\n    component: () => Promise.resolve().then(function () { return RadarPage$1; }).then((m) => m.RadarPage),\n    mountPoint: rootRouteRef\n  })\n);\n\nconst Router = RadarPage;\n\nexport { MovedState, RadarPage, Router, RadarComponent as TechRadarComponent, TechRadarPage, techRadarPlugin as plugin, techRadarApiRef, techRadarPlugin };\n//# sourceMappingURL=index.esm.js.map\n","import { useApi, createPlugin } from '@backstage/core-plugin-api';\nimport { useShadowRootElements, useShadowRootSelection, createTechDocsAddonExtension, TechDocsAddonLocations } from '@backstage/plugin-techdocs-react';\nimport React, { useState, useCallback, useEffect, useMemo } from 'react';\nimport { useLocalStorageValue } from '@react-hookz/web';\nimport { withStyles, Button, makeStyles, Portal, Paper, Slider, useTheme, MenuItem, ListItemText, Typography, Box, IconButton } from '@material-ui/core';\nimport ChevronRightIcon from '@material-ui/icons/ChevronRight';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport parseGitUrl from 'git-url-parse';\nimport { replaceGitHubUrlType, replaceGitLabUrlType } from '@backstage/integration';\nimport { scmIntegrationsApiRef } from '@backstage/integration-react';\nimport BugReportIcon from '@material-ui/icons/BugReport';\nimport { Link, GitHubIcon } from '@backstage/core-components';\nimport AddIcon from '@material-ui/icons/Add';\nimport RemoveIcon from '@material-ui/icons/Remove';\n\nconst NESTED_LIST_TOGGLE = \".md-nav__item--nested .md-toggle\";\nconst EXPANDABLE_NAVIGATION_LOCAL_STORAGE = \"@backstage/techdocs-addons/nav-expanded\";\nconst StyledButton = withStyles({\n  root: {\n    position: \"absolute\",\n    left: \"220px\",\n    top: \"19px\",\n    padding: 0,\n    minWidth: 0\n  }\n})(Button);\nconst CollapsedIcon = withStyles({\n  root: {\n    height: \"20px\",\n    width: \"20px\"\n  }\n})(ChevronRightIcon);\nconst ExpandedIcon = withStyles({\n  root: {\n    height: \"20px\",\n    width: \"20px\"\n  }\n})(ExpandMoreIcon);\nconst ExpandableNavigationAddon = () => {\n  const defaultValue = { expandAllNestedNavs: false };\n  const [expanded, setExpanded] = useLocalStorageValue(\n    EXPANDABLE_NAVIGATION_LOCAL_STORAGE,\n    defaultValue\n  );\n  const [hasNavSubLevels, setHasNavSubLevels] = useState(false);\n  const [...checkboxToggles] = useShadowRootElements([\n    NESTED_LIST_TOGGLE\n  ]);\n  const shouldToggle = useCallback(\n    (item) => {\n      const isExpanded = item.checked;\n      const shouldExpand = expanded == null ? void 0 : expanded.expandAllNestedNavs;\n      if (shouldExpand && !isExpanded) {\n        return true;\n      }\n      if (!shouldExpand && isExpanded) {\n        return true;\n      }\n      return false;\n    },\n    [expanded]\n  );\n  useEffect(() => {\n    if (!(checkboxToggles == null ? void 0 : checkboxToggles.length))\n      return;\n    setHasNavSubLevels(true);\n    checkboxToggles.forEach((item) => {\n      if (shouldToggle(item))\n        item.click();\n    });\n  }, [expanded, shouldToggle, checkboxToggles]);\n  const handleState = () => {\n    setExpanded((prevState) => ({\n      expandAllNestedNavs: !(prevState == null ? void 0 : prevState.expandAllNestedNavs)\n    }));\n  };\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, hasNavSubLevels ? /* @__PURE__ */ React.createElement(StyledButton, {\n    size: \"small\",\n    onClick: handleState,\n    \"aria-label\": (expanded == null ? void 0 : expanded.expandAllNestedNavs) ? \"collapse-nav\" : \"expand-nav\"\n  }, (expanded == null ? void 0 : expanded.expandAllNestedNavs) ? /* @__PURE__ */ React.createElement(ExpandedIcon, null) : /* @__PURE__ */ React.createElement(CollapsedIcon, null)) : null);\n};\n\nconst ADDON_FEEDBACK_CONTAINER_ID = \"techdocs-report-issue\";\nconst ADDON_FEEDBACK_CONTAINER_SELECTOR = `#${ADDON_FEEDBACK_CONTAINER_ID}`;\nconst PAGE_EDIT_LINK_SELECTOR = '[title^=\"Edit this page\"]';\nconst PAGE_FEEDBACK_LINK_SELECTOR = '[title^=\"Leave feedback for\"]';\nconst PAGE_MAIN_CONTENT_SELECTOR = '[data-md-component=\"main\"] .md-content';\n\nconst resolveBlobUrl = (url, type) => {\n  if (type === \"github\") {\n    return replaceGitHubUrlType(url, \"blob\");\n  } else if (type === \"gitlab\") {\n    return replaceGitLabUrlType(url, \"blob\");\n  }\n  console.error(\n    `Invalid SCM type ${type} found in ReportIssue addon for URL ${url}!`\n  );\n  return url;\n};\nconst getTitle = (selection) => {\n  const text = selection.toString().substring(0, 70);\n  const ellipsis = text.length === 70 ? \"...\" : \"\";\n  return `Documentation feedback: ${text}${ellipsis}`;\n};\nconst getBody = (selection, markdownUrl) => {\n  const title = \"## Documentation Feedback \\u{1F4DD}\";\n  const subheading = \"#### The highlighted text:\";\n  const commentHeading = \"#### The comment on the text:\";\n  const commentPlaceholder = \"_>replace this line with your comment<_\";\n  const highlightedTextAsQuote = selection.toString().trim().split(\"\\n\").map((line) => `> ${line.trim()}`).join(\"\\n\");\n  const facts = [\n    `Backstage URL: <${window.location.href}> \nMarkdown URL: <${markdownUrl}>`\n  ];\n  return `${title}\n\n ${subheading} \n\n ${highlightedTextAsQuote}\n\n ${commentHeading} \n ${commentPlaceholder}\n\n ___\n${facts}`;\n};\nconst useGitTemplate = (debounceTime) => {\n  var _a, _b;\n  const initialTemplate = { title: \"\", body: \"\" };\n  const selection = useShadowRootSelection(debounceTime);\n  const [editLink] = useShadowRootElements([PAGE_EDIT_LINK_SELECTOR]);\n  const url = (_a = editLink == null ? void 0 : editLink.href) != null ? _a : \"\";\n  const scmIntegrationsApi = useApi(scmIntegrationsApiRef);\n  if (!selection || !url)\n    return initialTemplate;\n  const type = (_b = scmIntegrationsApi.byUrl(url)) == null ? void 0 : _b.type;\n  if (!type)\n    return initialTemplate;\n  return {\n    title: getTitle(selection),\n    body: getBody(selection, resolveBlobUrl(url, type))\n  };\n};\nconst useGitRepository = () => {\n  var _a, _b;\n  const scmIntegrationsApi = useApi(scmIntegrationsApiRef);\n  const [editLink] = useShadowRootElements([PAGE_EDIT_LINK_SELECTOR]);\n  const url = (_a = editLink == null ? void 0 : editLink.href) != null ? _a : \"\";\n  if (!url)\n    return null;\n  const type = (_b = scmIntegrationsApi.byUrl(url)) == null ? void 0 : _b.type;\n  if (!type)\n    return null;\n  return { ...parseGitUrl(resolveBlobUrl(url, type)), type };\n};\n\nconst useStyles$2 = makeStyles((theme) => ({\n  root: {\n    display: \"grid\",\n    gridGap: theme.spacing(1),\n    gridAutoFlow: \"column\",\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    color: theme.palette.common.black,\n    fontSize: theme.typography.button.fontSize\n  }\n}));\nconst getIcon = ({ type }) => {\n  if (type === \"github\") {\n    return GitHubIcon;\n  }\n  return BugReportIcon;\n};\nconst getName = ({ type }) => {\n  if (type === \"github\") {\n    return \"Github\";\n  }\n  return \"Gitlab\";\n};\nconst getUrl = (repository, template) => {\n  const { title, body } = template;\n  const encodedTitle = encodeURIComponent(title);\n  const encodedBody = encodeURIComponent(body);\n  const { protocol, resource, owner, name, type } = repository;\n  const encodedOwner = encodeURIComponent(owner);\n  const encodedName = encodeURIComponent(name);\n  const url = `${protocol}://${resource}/${encodedOwner}/${encodedName}`;\n  if (type === \"github\") {\n    return `${url}/issues/new?title=${encodedTitle}&body=${encodedBody}`;\n  }\n  return `${url}/issues/new?issue[title]=${encodedTitle}&issue[description]=${encodedBody}`;\n};\nconst IssueLink = ({ template, repository }) => {\n  const classes = useStyles$2();\n  const Icon = getIcon(repository);\n  const url = getUrl(repository, template);\n  return /* @__PURE__ */ React.createElement(Link, {\n    className: classes.root,\n    to: url,\n    target: \"_blank\"\n  }, /* @__PURE__ */ React.createElement(Icon, null), \" Open new \", getName(repository), \" issue\");\n};\n\nconst useStyles$1 = makeStyles((theme) => ({\n  root: {\n    transform: \"translate(-100%, -100%)\",\n    position: \"absolute\",\n    padding: theme.spacing(1),\n    zIndex: theme.zIndex.tooltip,\n    background: theme.palette.common.white\n  }\n}));\nconst ReportIssueAddon = ({\n  debounceTime = 500,\n  templateBuilder: buildTemplate\n}) => {\n  const classes = useStyles$1();\n  const [style, setStyle] = useState();\n  const repository = useGitRepository();\n  const defaultTemplate = useGitTemplate(debounceTime);\n  const selection = useShadowRootSelection(debounceTime);\n  const [mainContent, feedbackLink] = useShadowRootElements([\n    PAGE_MAIN_CONTENT_SELECTOR,\n    PAGE_FEEDBACK_LINK_SELECTOR\n  ]);\n  let [feedbackContainer] = useShadowRootElements([\n    ADDON_FEEDBACK_CONTAINER_SELECTOR\n  ]);\n  if (feedbackLink) {\n    feedbackLink.style.display = \"none\";\n  }\n  useEffect(() => {\n    if (!repository || !selection || !selection.containsNode(mainContent, true) || (selection == null ? void 0 : selection.containsNode(feedbackContainer, true))) {\n      return;\n    }\n    const mainContentPosition = mainContent.getBoundingClientRect();\n    const selectionPosition = selection.getRangeAt(0).getBoundingClientRect();\n    setStyle({\n      top: `${selectionPosition.top - mainContentPosition.top - 16}px`,\n      left: `${selectionPosition.left + selectionPosition.width / 2}px`\n    });\n  }, [selection, mainContent, feedbackContainer]);\n  if (!selection || !repository || ![\"github\", \"gitlab\"].includes(repository.type))\n    return null;\n  if (!feedbackContainer) {\n    feedbackContainer = document.createElement(\"div\");\n    feedbackContainer.setAttribute(\"id\", ADDON_FEEDBACK_CONTAINER_ID);\n    mainContent.prepend(feedbackContainer);\n  }\n  return /* @__PURE__ */ React.createElement(Portal, {\n    container: feedbackContainer\n  }, /* @__PURE__ */ React.createElement(Paper, {\n    \"data-testid\": \"report-issue-addon\",\n    className: classes.root,\n    style\n  }, /* @__PURE__ */ React.createElement(IssueLink, {\n    repository,\n    template: buildTemplate ? buildTemplate({ selection }) : defaultTemplate\n  })));\n};\n\nconst boxShadow = \"0 3px 1px rgba(0,0,0,0.1),0 4px 8px rgba(0,0,0,0.13),0 0 0 1px rgba(0,0,0,0.02)\";\nconst StyledSlider = withStyles((theme) => ({\n  root: {\n    height: 2,\n    padding: \"15px 0\"\n  },\n  thumb: {\n    height: 18,\n    width: 18,\n    backgroundColor: theme.palette.common.white,\n    boxShadow,\n    marginTop: -9,\n    marginLeft: -9,\n    \"&:focus, &:hover, &$active\": {\n      boxShadow: \"0 3px 1px rgba(0,0,0,0.1),0 4px 8px rgba(0,0,0,0.3),0 0 0 1px rgba(0,0,0,0.02)\",\n      \"@media (hover: none)\": {\n        boxShadow\n      }\n    }\n  },\n  active: {},\n  valueLabel: {\n    top: \"100%\",\n    left: \"50%\",\n    transform: \"scale(1) translate(-50%, -5px) !important\",\n    \"& *\": {\n      color: theme.palette.common.black,\n      fontSize: theme.typography.caption.fontSize,\n      background: \"transparent\"\n    }\n  },\n  track: {\n    height: 2\n  },\n  rail: {\n    height: 2,\n    opacity: 0.5\n  },\n  mark: {\n    height: 10,\n    width: 1,\n    marginTop: -4\n  },\n  markActive: {\n    opacity: 1,\n    backgroundColor: \"currentColor\"\n  }\n}))(Slider);\nconst settings = {\n  key: \"techdocs.addons.settings.textsize\",\n  defaultValue: 100\n};\nconst marks = [\n  {\n    value: 90\n  },\n  {\n    value: 100\n  },\n  {\n    value: 115\n  },\n  {\n    value: 130\n  },\n  {\n    value: 150\n  }\n];\nconst useStyles = makeStyles((theme) => ({\n  container: {\n    color: theme.palette.textSubtle,\n    display: \"flex\",\n    alignItems: \"center\",\n    margin: 0,\n    minWidth: 200\n  },\n  menuItem: {\n    \"&:hover\": {\n      background: \"transparent\"\n    }\n  },\n  decreaseButton: {\n    marginRight: theme.spacing(1)\n  },\n  increaseButton: {\n    marginLeft: theme.spacing(1)\n  }\n}));\nconst TextSizeAddon = () => {\n  const classes = useStyles();\n  const theme = useTheme();\n  const [body] = useShadowRootElements([\"body\"]);\n  const [value, setValue] = useState(() => {\n    const initialValue = localStorage == null ? void 0 : localStorage.getItem(settings.key);\n    return initialValue ? parseInt(initialValue, 10) : settings.defaultValue;\n  });\n  const values = useMemo(() => marks.map((mark) => mark.value), []);\n  const index = useMemo(() => values.indexOf(value), [values, value]);\n  const min = useMemo(() => values[0], [values]);\n  const max = useMemo(() => values[values.length - 1], [values]);\n  const getValueText = useCallback(() => `${value}%`, [value]);\n  const handleChangeCommitted = useCallback(\n    (_event, newValue) => {\n      if (!Array.isArray(newValue)) {\n        setValue(newValue);\n        localStorage == null ? void 0 : localStorage.setItem(settings.key, String(newValue));\n      }\n    },\n    [setValue]\n  );\n  const handleDecreaseClick = useCallback(\n    (event) => {\n      handleChangeCommitted(event, values[index - 1]);\n    },\n    [index, values, handleChangeCommitted]\n  );\n  const handleIncreaseClick = useCallback(\n    (event) => {\n      handleChangeCommitted(event, values[index + 1]);\n    },\n    [index, values, handleChangeCommitted]\n  );\n  useEffect(() => {\n    var _a, _b;\n    if (!body)\n      return;\n    const htmlFontSize = (_b = (_a = theme.typography) == null ? void 0 : _a.htmlFontSize) != null ? _b : 16;\n    body.style.setProperty(\n      \"--md-typeset-font-size\",\n      `${htmlFontSize * (value / 100)}px`\n    );\n  }, [body, value, theme]);\n  return /* @__PURE__ */ React.createElement(MenuItem, {\n    className: classes.menuItem,\n    button: true,\n    disableRipple: true\n  }, /* @__PURE__ */ React.createElement(ListItemText, {\n    primary: /* @__PURE__ */ React.createElement(Typography, {\n      variant: \"subtitle2\",\n      color: \"textPrimary\"\n    }, \"Text size\"),\n    secondary: /* @__PURE__ */ React.createElement(Box, {\n      className: classes.container\n    }, /* @__PURE__ */ React.createElement(IconButton, {\n      className: classes.decreaseButton,\n      size: \"small\",\n      edge: \"start\",\n      disabled: value === min,\n      onClick: handleDecreaseClick,\n      \"aria-label\": \"Decrease text size\"\n    }, /* @__PURE__ */ React.createElement(RemoveIcon, null)), /* @__PURE__ */ React.createElement(StyledSlider, {\n      value,\n      \"aria-labelledby\": \"text-size-slider\",\n      getAriaValueText: getValueText,\n      valueLabelDisplay: \"on\",\n      valueLabelFormat: getValueText,\n      marks,\n      step: null,\n      min,\n      max,\n      onChangeCommitted: handleChangeCommitted\n    }), /* @__PURE__ */ React.createElement(IconButton, {\n      className: classes.increaseButton,\n      size: \"small\",\n      edge: \"end\",\n      disabled: value === max,\n      onClick: handleIncreaseClick,\n      \"aria-label\": \"Increase text size\"\n    }, /* @__PURE__ */ React.createElement(AddIcon, null))),\n    disableTypography: true\n  }));\n};\n\nconst techdocsModuleAddonsContribPlugin = createPlugin({\n  id: \"techdocsModuleAddonsContrib\"\n});\nconst ExpandableNavigation = techdocsModuleAddonsContribPlugin.provide(\n  createTechDocsAddonExtension({\n    name: \"ExpandableNavigation\",\n    location: TechDocsAddonLocations.PrimarySidebar,\n    component: ExpandableNavigationAddon\n  })\n);\nconst ReportIssue = techdocsModuleAddonsContribPlugin.provide(\n  createTechDocsAddonExtension({\n    name: \"ReportIssue\",\n    location: TechDocsAddonLocations.Content,\n    component: ReportIssueAddon\n  })\n);\nconst TextSize = techdocsModuleAddonsContribPlugin.provide(\n  createTechDocsAddonExtension({\n    name: \"TextSize\",\n    location: TechDocsAddonLocations.Settings,\n    component: TextSizeAddon\n  })\n);\n\nexport { ExpandableNavigation, ReportIssue, TextSize, techdocsModuleAddonsContribPlugin };\n//# sourceMappingURL=index.esm.js.map\n","import _extends from '@babel/runtime/helpers/esm/extends';\nimport isInBrowser from 'is-in-browser';\nimport warning from 'tiny-warning';\nimport _createClass from '@babel/runtime/helpers/esm/createClass';\nimport _inheritsLoose from '@babel/runtime/helpers/esm/inheritsLoose';\nimport _assertThisInitialized from '@babel/runtime/helpers/esm/assertThisInitialized';\nimport _objectWithoutPropertiesLoose from '@babel/runtime/helpers/esm/objectWithoutPropertiesLoose';\n\nvar plainObjectConstrurctor = {}.constructor;\nfunction cloneStyle(style) {\n  if (style == null || typeof style !== 'object') return style;\n  if (Array.isArray(style)) return style.map(cloneStyle);\n  if (style.constructor !== plainObjectConstrurctor) return style;\n  var newStyle = {};\n\n  for (var name in style) {\n    newStyle[name] = cloneStyle(style[name]);\n  }\n\n  return newStyle;\n}\n\n/**\n * Create a rule instance.\n */\n\nfunction createRule(name, decl, options) {\n  if (name === void 0) {\n    name = 'unnamed';\n  }\n\n  var jss = options.jss;\n  var declCopy = cloneStyle(decl);\n  var rule = jss.plugins.onCreateRule(name, declCopy, options);\n  if (rule) return rule; // It is an at-rule and it has no instance.\n\n  if (name[0] === '@') {\n    process.env.NODE_ENV !== \"production\" ? warning(false, \"[JSS] Unknown rule \" + name) : void 0;\n  }\n\n  return null;\n}\n\nvar join = function join(value, by) {\n  var result = '';\n\n  for (var i = 0; i < value.length; i++) {\n    // Remove !important from the value, it will be readded later.\n    if (value[i] === '!important') break;\n    if (result) result += by;\n    result += value[i];\n  }\n\n  return result;\n};\n/**\n * Converts JSS array value to a CSS string.\n *\n * `margin: [['5px', '10px']]` > `margin: 5px 10px;`\n * `border: ['1px', '2px']` > `border: 1px, 2px;`\n * `margin: [['5px', '10px'], '!important']` > `margin: 5px 10px !important;`\n * `color: ['red', !important]` > `color: red !important;`\n */\n\n\nvar toCssValue = function toCssValue(value, ignoreImportant) {\n  if (ignoreImportant === void 0) {\n    ignoreImportant = false;\n  }\n\n  if (!Array.isArray(value)) return value;\n  var cssValue = ''; // Support space separated values via `[['5px', '10px']]`.\n\n  if (Array.isArray(value[0])) {\n    for (var i = 0; i < value.length; i++) {\n      if (value[i] === '!important') break;\n      if (cssValue) cssValue += ', ';\n      cssValue += join(value[i], ' ');\n    }\n  } else cssValue = join(value, ', '); // Add !important, because it was ignored.\n\n\n  if (!ignoreImportant && value[value.length - 1] === '!important') {\n    cssValue += ' !important';\n  }\n\n  return cssValue;\n};\n\nfunction getWhitespaceSymbols(options) {\n  if (options && options.format === false) {\n    return {\n      linebreak: '',\n      space: ''\n    };\n  }\n\n  return {\n    linebreak: '\\n',\n    space: ' '\n  };\n}\n\n/**\n * Indent a string.\n * http://jsperf.com/array-join-vs-for\n */\n\nfunction indentStr(str, indent) {\n  var result = '';\n\n  for (var index = 0; index < indent; index++) {\n    result += '  ';\n  }\n\n  return result + str;\n}\n/**\n * Converts a Rule to CSS string.\n */\n\n\nfunction toCss(selector, style, options) {\n  if (options === void 0) {\n    options = {};\n  }\n\n  var result = '';\n  if (!style) return result;\n  var _options = options,\n      _options$indent = _options.indent,\n      indent = _options$indent === void 0 ? 0 : _options$indent;\n  var fallbacks = style.fallbacks;\n\n  if (options.format === false) {\n    indent = -Infinity;\n  }\n\n  var _getWhitespaceSymbols = getWhitespaceSymbols(options),\n      linebreak = _getWhitespaceSymbols.linebreak,\n      space = _getWhitespaceSymbols.space;\n\n  if (selector) indent++; // Apply fallbacks first.\n\n  if (fallbacks) {\n    // Array syntax {fallbacks: [{prop: value}]}\n    if (Array.isArray(fallbacks)) {\n      for (var index = 0; index < fallbacks.length; index++) {\n        var fallback = fallbacks[index];\n\n        for (var prop in fallback) {\n          var value = fallback[prop];\n\n          if (value != null) {\n            if (result) result += linebreak;\n            result += indentStr(prop + \":\" + space + toCssValue(value) + \";\", indent);\n          }\n        }\n      }\n    } else {\n      // Object syntax {fallbacks: {prop: value}}\n      for (var _prop in fallbacks) {\n        var _value = fallbacks[_prop];\n\n        if (_value != null) {\n          if (result) result += linebreak;\n          result += indentStr(_prop + \":\" + space + toCssValue(_value) + \";\", indent);\n        }\n      }\n    }\n  }\n\n  for (var _prop2 in style) {\n    var _value2 = style[_prop2];\n\n    if (_value2 != null && _prop2 !== 'fallbacks') {\n      if (result) result += linebreak;\n      result += indentStr(_prop2 + \":\" + space + toCssValue(_value2) + \";\", indent);\n    }\n  } // Allow empty style in this case, because properties will be added dynamically.\n\n\n  if (!result && !options.allowEmpty) return result; // When rule is being stringified before selector was defined.\n\n  if (!selector) return result;\n  indent--;\n  if (result) result = \"\" + linebreak + result + linebreak;\n  return indentStr(\"\" + selector + space + \"{\" + result, indent) + indentStr('}', indent);\n}\n\nvar escapeRegex = /([[\\].#*$><+~=|^:(),\"'`\\s])/g;\nvar nativeEscape = typeof CSS !== 'undefined' && CSS.escape;\nvar escape = (function (str) {\n  return nativeEscape ? nativeEscape(str) : str.replace(escapeRegex, '\\\\$1');\n});\n\nvar BaseStyleRule =\n/*#__PURE__*/\nfunction () {\n  function BaseStyleRule(key, style, options) {\n    this.type = 'style';\n    this.isProcessed = false;\n    var sheet = options.sheet,\n        Renderer = options.Renderer;\n    this.key = key;\n    this.options = options;\n    this.style = style;\n    if (sheet) this.renderer = sheet.renderer;else if (Renderer) this.renderer = new Renderer();\n  }\n  /**\n   * Get or set a style property.\n   */\n\n\n  var _proto = BaseStyleRule.prototype;\n\n  _proto.prop = function prop(name, value, options) {\n    // It's a getter.\n    if (value === undefined) return this.style[name]; // Don't do anything if the value has not changed.\n\n    var force = options ? options.force : false;\n    if (!force && this.style[name] === value) return this;\n    var newValue = value;\n\n    if (!options || options.process !== false) {\n      newValue = this.options.jss.plugins.onChangeValue(value, name, this);\n    }\n\n    var isEmpty = newValue == null || newValue === false;\n    var isDefined = name in this.style; // Value is empty and wasn't defined before.\n\n    if (isEmpty && !isDefined && !force) return this; // We are going to remove this value.\n\n    var remove = isEmpty && isDefined;\n    if (remove) delete this.style[name];else this.style[name] = newValue; // Renderable is defined if StyleSheet option `link` is true.\n\n    if (this.renderable && this.renderer) {\n      if (remove) this.renderer.removeProperty(this.renderable, name);else this.renderer.setProperty(this.renderable, name, newValue);\n      return this;\n    }\n\n    var sheet = this.options.sheet;\n\n    if (sheet && sheet.attached) {\n      process.env.NODE_ENV !== \"production\" ? warning(false, '[JSS] Rule is not linked. Missing sheet option \"link: true\".') : void 0;\n    }\n\n    return this;\n  };\n\n  return BaseStyleRule;\n}();\nvar StyleRule =\n/*#__PURE__*/\nfunction (_BaseStyleRule) {\n  _inheritsLoose(StyleRule, _BaseStyleRule);\n\n  function StyleRule(key, style, options) {\n    var _this;\n\n    _this = _BaseStyleRule.call(this, key, style, options) || this;\n    var selector = options.selector,\n        scoped = options.scoped,\n        sheet = options.sheet,\n        generateId = options.generateId;\n\n    if (selector) {\n      _this.selectorText = selector;\n    } else if (scoped !== false) {\n      _this.id = generateId(_assertThisInitialized(_assertThisInitialized(_this)), sheet);\n      _this.selectorText = \".\" + escape(_this.id);\n    }\n\n    return _this;\n  }\n  /**\n   * Set selector string.\n   * Attention: use this with caution. Most browsers didn't implement\n   * selectorText setter, so this may result in rerendering of entire Style Sheet.\n   */\n\n\n  var _proto2 = StyleRule.prototype;\n\n  /**\n   * Apply rule to an element inline.\n   */\n  _proto2.applyTo = function applyTo(renderable) {\n    var renderer = this.renderer;\n\n    if (renderer) {\n      var json = this.toJSON();\n\n      for (var prop in json) {\n        renderer.setProperty(renderable, prop, json[prop]);\n      }\n    }\n\n    return this;\n  }\n  /**\n   * Returns JSON representation of the rule.\n   * Fallbacks are not supported.\n   * Useful for inline styles.\n   */\n  ;\n\n  _proto2.toJSON = function toJSON() {\n    var json = {};\n\n    for (var prop in this.style) {\n      var value = this.style[prop];\n      if (typeof value !== 'object') json[prop] = value;else if (Array.isArray(value)) json[prop] = toCssValue(value);\n    }\n\n    return json;\n  }\n  /**\n   * Generates a CSS string.\n   */\n  ;\n\n  _proto2.toString = function toString(options) {\n    var sheet = this.options.sheet;\n    var link = sheet ? sheet.options.link : false;\n    var opts = link ? _extends({}, options, {\n      allowEmpty: true\n    }) : options;\n    return toCss(this.selectorText, this.style, opts);\n  };\n\n  _createClass(StyleRule, [{\n    key: \"selector\",\n    set: function set(selector) {\n      if (selector === this.selectorText) return;\n      this.selectorText = selector;\n      var renderer = this.renderer,\n          renderable = this.renderable;\n      if (!renderable || !renderer) return;\n      var hasChanged = renderer.setSelector(renderable, selector); // If selector setter is not implemented, rerender the rule.\n\n      if (!hasChanged) {\n        renderer.replaceRule(renderable, this);\n      }\n    }\n    /**\n     * Get selector string.\n     */\n    ,\n    get: function get() {\n      return this.selectorText;\n    }\n  }]);\n\n  return StyleRule;\n}(BaseStyleRule);\nvar pluginStyleRule = {\n  onCreateRule: function onCreateRule(key, style, options) {\n    if (key[0] === '@' || options.parent && options.parent.type === 'keyframes') {\n      return null;\n    }\n\n    return new StyleRule(key, style, options);\n  }\n};\n\nvar defaultToStringOptions = {\n  indent: 1,\n  children: true\n};\nvar atRegExp = /@([\\w-]+)/;\n/**\n * Conditional rule for @media, @supports\n */\n\nvar ConditionalRule =\n/*#__PURE__*/\nfunction () {\n  function ConditionalRule(key, styles, options) {\n    this.type = 'conditional';\n    this.isProcessed = false;\n    this.key = key;\n    var atMatch = key.match(atRegExp);\n    this.at = atMatch ? atMatch[1] : 'unknown'; // Key might contain a unique suffix in case the `name` passed by user was duplicate.\n\n    this.query = options.name || \"@\" + this.at;\n    this.options = options;\n    this.rules = new RuleList(_extends({}, options, {\n      parent: this\n    }));\n\n    for (var name in styles) {\n      this.rules.add(name, styles[name]);\n    }\n\n    this.rules.process();\n  }\n  /**\n   * Get a rule.\n   */\n\n\n  var _proto = ConditionalRule.prototype;\n\n  _proto.getRule = function getRule(name) {\n    return this.rules.get(name);\n  }\n  /**\n   * Get index of a rule.\n   */\n  ;\n\n  _proto.indexOf = function indexOf(rule) {\n    return this.rules.indexOf(rule);\n  }\n  /**\n   * Create and register rule, run plugins.\n   */\n  ;\n\n  _proto.addRule = function addRule(name, style, options) {\n    var rule = this.rules.add(name, style, options);\n    if (!rule) return null;\n    this.options.jss.plugins.onProcessRule(rule);\n    return rule;\n  }\n  /**\n   * Generates a CSS string.\n   */\n  ;\n\n  _proto.toString = function toString(options) {\n    if (options === void 0) {\n      options = defaultToStringOptions;\n    }\n\n    var _getWhitespaceSymbols = getWhitespaceSymbols(options),\n        linebreak = _getWhitespaceSymbols.linebreak;\n\n    if (options.indent == null) options.indent = defaultToStringOptions.indent;\n    if (options.children == null) options.children = defaultToStringOptions.children;\n\n    if (options.children === false) {\n      return this.query + \" {}\";\n    }\n\n    var children = this.rules.toString(options);\n    return children ? this.query + \" {\" + linebreak + children + linebreak + \"}\" : '';\n  };\n\n  return ConditionalRule;\n}();\nvar keyRegExp = /@media|@supports\\s+/;\nvar pluginConditionalRule = {\n  onCreateRule: function onCreateRule(key, styles, options) {\n    return keyRegExp.test(key) ? new ConditionalRule(key, styles, options) : null;\n  }\n};\n\nvar defaultToStringOptions$1 = {\n  indent: 1,\n  children: true\n};\nvar nameRegExp = /@keyframes\\s+([\\w-]+)/;\n/**\n * Rule for @keyframes\n */\n\nvar KeyframesRule =\n/*#__PURE__*/\nfunction () {\n  function KeyframesRule(key, frames, options) {\n    this.type = 'keyframes';\n    this.at = '@keyframes';\n    this.isProcessed = false;\n    var nameMatch = key.match(nameRegExp);\n\n    if (nameMatch && nameMatch[1]) {\n      this.name = nameMatch[1];\n    } else {\n      this.name = 'noname';\n      process.env.NODE_ENV !== \"production\" ? warning(false, \"[JSS] Bad keyframes name \" + key) : void 0;\n    }\n\n    this.key = this.type + \"-\" + this.name;\n    this.options = options;\n    var scoped = options.scoped,\n        sheet = options.sheet,\n        generateId = options.generateId;\n    this.id = scoped === false ? this.name : escape(generateId(this, sheet));\n    this.rules = new RuleList(_extends({}, options, {\n      parent: this\n    }));\n\n    for (var name in frames) {\n      this.rules.add(name, frames[name], _extends({}, options, {\n        parent: this\n      }));\n    }\n\n    this.rules.process();\n  }\n  /**\n   * Generates a CSS string.\n   */\n\n\n  var _proto = KeyframesRule.prototype;\n\n  _proto.toString = function toString(options) {\n    if (options === void 0) {\n      options = defaultToStringOptions$1;\n    }\n\n    var _getWhitespaceSymbols = getWhitespaceSymbols(options),\n        linebreak = _getWhitespaceSymbols.linebreak;\n\n    if (options.indent == null) options.indent = defaultToStringOptions$1.indent;\n    if (options.children == null) options.children = defaultToStringOptions$1.children;\n\n    if (options.children === false) {\n      return this.at + \" \" + this.id + \" {}\";\n    }\n\n    var children = this.rules.toString(options);\n    if (children) children = \"\" + linebreak + children + linebreak;\n    return this.at + \" \" + this.id + \" {\" + children + \"}\";\n  };\n\n  return KeyframesRule;\n}();\nvar keyRegExp$1 = /@keyframes\\s+/;\nvar refRegExp = /\\$([\\w-]+)/g;\n\nvar findReferencedKeyframe = function findReferencedKeyframe(val, keyframes) {\n  if (typeof val === 'string') {\n    return val.replace(refRegExp, function (match, name) {\n      if (name in keyframes) {\n        return keyframes[name];\n      }\n\n      process.env.NODE_ENV !== \"production\" ? warning(false, \"[JSS] Referenced keyframes rule \\\"\" + name + \"\\\" is not defined.\") : void 0;\n      return match;\n    });\n  }\n\n  return val;\n};\n/**\n * Replace the reference for a animation name.\n */\n\n\nvar replaceRef = function replaceRef(style, prop, keyframes) {\n  var value = style[prop];\n  var refKeyframe = findReferencedKeyframe(value, keyframes);\n\n  if (refKeyframe !== value) {\n    style[prop] = refKeyframe;\n  }\n};\n\nvar pluginKeyframesRule = {\n  onCreateRule: function onCreateRule(key, frames, options) {\n    return typeof key === 'string' && keyRegExp$1.test(key) ? new KeyframesRule(key, frames, options) : null;\n  },\n  // Animation name ref replacer.\n  onProcessStyle: function onProcessStyle(style, rule, sheet) {\n    if (rule.type !== 'style' || !sheet) return style;\n    if ('animation-name' in style) replaceRef(style, 'animation-name', sheet.keyframes);\n    if ('animation' in style) replaceRef(style, 'animation', sheet.keyframes);\n    return style;\n  },\n  onChangeValue: function onChangeValue(val, prop, rule) {\n    var sheet = rule.options.sheet;\n\n    if (!sheet) {\n      return val;\n    }\n\n    switch (prop) {\n      case 'animation':\n        return findReferencedKeyframe(val, sheet.keyframes);\n\n      case 'animation-name':\n        return findReferencedKeyframe(val, sheet.keyframes);\n\n      default:\n        return val;\n    }\n  }\n};\n\nvar KeyframeRule =\n/*#__PURE__*/\nfunction (_BaseStyleRule) {\n  _inheritsLoose(KeyframeRule, _BaseStyleRule);\n\n  function KeyframeRule() {\n    return _BaseStyleRule.apply(this, arguments) || this;\n  }\n\n  var _proto = KeyframeRule.prototype;\n\n  /**\n   * Generates a CSS string.\n   */\n  _proto.toString = function toString(options) {\n    var sheet = this.options.sheet;\n    var link = sheet ? sheet.options.link : false;\n    var opts = link ? _extends({}, options, {\n      allowEmpty: true\n    }) : options;\n    return toCss(this.key, this.style, opts);\n  };\n\n  return KeyframeRule;\n}(BaseStyleRule);\nvar pluginKeyframeRule = {\n  onCreateRule: function onCreateRule(key, style, options) {\n    if (options.parent && options.parent.type === 'keyframes') {\n      return new KeyframeRule(key, style, options);\n    }\n\n    return null;\n  }\n};\n\nvar FontFaceRule =\n/*#__PURE__*/\nfunction () {\n  function FontFaceRule(key, style, options) {\n    this.type = 'font-face';\n    this.at = '@font-face';\n    this.isProcessed = false;\n    this.key = key;\n    this.style = style;\n    this.options = options;\n  }\n  /**\n   * Generates a CSS string.\n   */\n\n\n  var _proto = FontFaceRule.prototype;\n\n  _proto.toString = function toString(options) {\n    var _getWhitespaceSymbols = getWhitespaceSymbols(options),\n        linebreak = _getWhitespaceSymbols.linebreak;\n\n    if (Array.isArray(this.style)) {\n      var str = '';\n\n      for (var index = 0; index < this.style.length; index++) {\n        str += toCss(this.at, this.style[index]);\n        if (this.style[index + 1]) str += linebreak;\n      }\n\n      return str;\n    }\n\n    return toCss(this.at, this.style, options);\n  };\n\n  return FontFaceRule;\n}();\nvar keyRegExp$2 = /@font-face/;\nvar pluginFontFaceRule = {\n  onCreateRule: function onCreateRule(key, style, options) {\n    return keyRegExp$2.test(key) ? new FontFaceRule(key, style, options) : null;\n  }\n};\n\nvar ViewportRule =\n/*#__PURE__*/\nfunction () {\n  function ViewportRule(key, style, options) {\n    this.type = 'viewport';\n    this.at = '@viewport';\n    this.isProcessed = false;\n    this.key = key;\n    this.style = style;\n    this.options = options;\n  }\n  /**\n   * Generates a CSS string.\n   */\n\n\n  var _proto = ViewportRule.prototype;\n\n  _proto.toString = function toString(options) {\n    return toCss(this.key, this.style, options);\n  };\n\n  return ViewportRule;\n}();\nvar pluginViewportRule = {\n  onCreateRule: function onCreateRule(key, style, options) {\n    return key === '@viewport' || key === '@-ms-viewport' ? new ViewportRule(key, style, options) : null;\n  }\n};\n\nvar SimpleRule =\n/*#__PURE__*/\nfunction () {\n  function SimpleRule(key, value, options) {\n    this.type = 'simple';\n    this.isProcessed = false;\n    this.key = key;\n    this.value = value;\n    this.options = options;\n  }\n  /**\n   * Generates a CSS string.\n   */\n  // eslint-disable-next-line no-unused-vars\n\n\n  var _proto = SimpleRule.prototype;\n\n  _proto.toString = function toString(options) {\n    if (Array.isArray(this.value)) {\n      var str = '';\n\n      for (var index = 0; index < this.value.length; index++) {\n        str += this.key + \" \" + this.value[index] + \";\";\n        if (this.value[index + 1]) str += '\\n';\n      }\n\n      return str;\n    }\n\n    return this.key + \" \" + this.value + \";\";\n  };\n\n  return SimpleRule;\n}();\nvar keysMap = {\n  '@charset': true,\n  '@import': true,\n  '@namespace': true\n};\nvar pluginSimpleRule = {\n  onCreateRule: function onCreateRule(key, value, options) {\n    return key in keysMap ? new SimpleRule(key, value, options) : null;\n  }\n};\n\nvar plugins = [pluginStyleRule, pluginConditionalRule, pluginKeyframesRule, pluginKeyframeRule, pluginFontFaceRule, pluginViewportRule, pluginSimpleRule];\n\nvar defaultUpdateOptions = {\n  process: true\n};\nvar forceUpdateOptions = {\n  force: true,\n  process: true\n  /**\n   * Contains rules objects and allows adding/removing etc.\n   * Is used for e.g. by `StyleSheet` or `ConditionalRule`.\n   */\n\n};\n\nvar RuleList =\n/*#__PURE__*/\nfunction () {\n  // Rules registry for access by .get() method.\n  // It contains the same rule registered by name and by selector.\n  // Original styles object.\n  // Used to ensure correct rules order.\n  function RuleList(options) {\n    this.map = {};\n    this.raw = {};\n    this.index = [];\n    this.counter = 0;\n    this.options = options;\n    this.classes = options.classes;\n    this.keyframes = options.keyframes;\n  }\n  /**\n   * Create and register rule.\n   *\n   * Will not render after Style Sheet was rendered the first time.\n   */\n\n\n  var _proto = RuleList.prototype;\n\n  _proto.add = function add(name, decl, ruleOptions) {\n    var _this$options = this.options,\n        parent = _this$options.parent,\n        sheet = _this$options.sheet,\n        jss = _this$options.jss,\n        Renderer = _this$options.Renderer,\n        generateId = _this$options.generateId,\n        scoped = _this$options.scoped;\n\n    var options = _extends({\n      classes: this.classes,\n      parent: parent,\n      sheet: sheet,\n      jss: jss,\n      Renderer: Renderer,\n      generateId: generateId,\n      scoped: scoped,\n      name: name,\n      keyframes: this.keyframes,\n      selector: undefined\n    }, ruleOptions); // When user uses .createStyleSheet(), duplicate names are not possible, but\n    // `sheet.addRule()` opens the door for any duplicate rule name. When this happens\n    // we need to make the key unique within this RuleList instance scope.\n\n\n    var key = name;\n\n    if (name in this.raw) {\n      key = name + \"-d\" + this.counter++;\n    } // We need to save the original decl before creating the rule\n    // because cache plugin needs to use it as a key to return a cached rule.\n\n\n    this.raw[key] = decl;\n\n    if (key in this.classes) {\n      // E.g. rules inside of @media container\n      options.selector = \".\" + escape(this.classes[key]);\n    }\n\n    var rule = createRule(key, decl, options);\n    if (!rule) return null;\n    this.register(rule);\n    var index = options.index === undefined ? this.index.length : options.index;\n    this.index.splice(index, 0, rule);\n    return rule;\n  }\n  /**\n   * Get a rule.\n   */\n  ;\n\n  _proto.get = function get(name) {\n    return this.map[name];\n  }\n  /**\n   * Delete a rule.\n   */\n  ;\n\n  _proto.remove = function remove(rule) {\n    this.unregister(rule);\n    delete this.raw[rule.key];\n    this.index.splice(this.index.indexOf(rule), 1);\n  }\n  /**\n   * Get index of a rule.\n   */\n  ;\n\n  _proto.indexOf = function indexOf(rule) {\n    return this.index.indexOf(rule);\n  }\n  /**\n   * Run `onProcessRule()` plugins on every rule.\n   */\n  ;\n\n  _proto.process = function process() {\n    var plugins = this.options.jss.plugins; // We need to clone array because if we modify the index somewhere else during a loop\n    // we end up with very hard-to-track-down side effects.\n\n    this.index.slice(0).forEach(plugins.onProcessRule, plugins);\n  }\n  /**\n   * Register a rule in `.map`, `.classes` and `.keyframes` maps.\n   */\n  ;\n\n  _proto.register = function register(rule) {\n    this.map[rule.key] = rule;\n\n    if (rule instanceof StyleRule) {\n      this.map[rule.selector] = rule;\n      if (rule.id) this.classes[rule.key] = rule.id;\n    } else if (rule instanceof KeyframesRule && this.keyframes) {\n      this.keyframes[rule.name] = rule.id;\n    }\n  }\n  /**\n   * Unregister a rule.\n   */\n  ;\n\n  _proto.unregister = function unregister(rule) {\n    delete this.map[rule.key];\n\n    if (rule instanceof StyleRule) {\n      delete this.map[rule.selector];\n      delete this.classes[rule.key];\n    } else if (rule instanceof KeyframesRule) {\n      delete this.keyframes[rule.name];\n    }\n  }\n  /**\n   * Update the function values with a new data.\n   */\n  ;\n\n  _proto.update = function update() {\n    var name;\n    var data;\n    var options;\n\n    if (typeof (arguments.length <= 0 ? undefined : arguments[0]) === 'string') {\n      name = arguments.length <= 0 ? undefined : arguments[0];\n      data = arguments.length <= 1 ? undefined : arguments[1];\n      options = arguments.length <= 2 ? undefined : arguments[2];\n    } else {\n      data = arguments.length <= 0 ? undefined : arguments[0];\n      options = arguments.length <= 1 ? undefined : arguments[1];\n      name = null;\n    }\n\n    if (name) {\n      this.updateOne(this.map[name], data, options);\n    } else {\n      for (var index = 0; index < this.index.length; index++) {\n        this.updateOne(this.index[index], data, options);\n      }\n    }\n  }\n  /**\n   * Execute plugins, update rule props.\n   */\n  ;\n\n  _proto.updateOne = function updateOne(rule, data, options) {\n    if (options === void 0) {\n      options = defaultUpdateOptions;\n    }\n\n    var _this$options2 = this.options,\n        plugins = _this$options2.jss.plugins,\n        sheet = _this$options2.sheet; // It is a rules container like for e.g. ConditionalRule.\n\n    if (rule.rules instanceof RuleList) {\n      rule.rules.update(data, options);\n      return;\n    }\n\n    var style = rule.style;\n    plugins.onUpdate(data, rule, sheet, options); // We rely on a new `style` ref in case it was mutated during onUpdate hook.\n\n    if (options.process && style && style !== rule.style) {\n      // We need to run the plugins in case new `style` relies on syntax plugins.\n      plugins.onProcessStyle(rule.style, rule, sheet); // Update and add props.\n\n      for (var prop in rule.style) {\n        var nextValue = rule.style[prop];\n        var prevValue = style[prop]; // We need to use `force: true` because `rule.style` has been updated during onUpdate hook, so `rule.prop()` will not update the CSSOM rule.\n        // We do this comparison to avoid unneeded `rule.prop()` calls, since we have the old `style` object here.\n\n        if (nextValue !== prevValue) {\n          rule.prop(prop, nextValue, forceUpdateOptions);\n        }\n      } // Remove props.\n\n\n      for (var _prop in style) {\n        var _nextValue = rule.style[_prop];\n        var _prevValue = style[_prop]; // We need to use `force: true` because `rule.style` has been updated during onUpdate hook, so `rule.prop()` will not update the CSSOM rule.\n        // We do this comparison to avoid unneeded `rule.prop()` calls, since we have the old `style` object here.\n\n        if (_nextValue == null && _nextValue !== _prevValue) {\n          rule.prop(_prop, null, forceUpdateOptions);\n        }\n      }\n    }\n  }\n  /**\n   * Convert rules to a CSS string.\n   */\n  ;\n\n  _proto.toString = function toString(options) {\n    var str = '';\n    var sheet = this.options.sheet;\n    var link = sheet ? sheet.options.link : false;\n\n    var _getWhitespaceSymbols = getWhitespaceSymbols(options),\n        linebreak = _getWhitespaceSymbols.linebreak;\n\n    for (var index = 0; index < this.index.length; index++) {\n      var rule = this.index[index];\n      var css = rule.toString(options); // No need to render an empty rule.\n\n      if (!css && !link) continue;\n      if (str) str += linebreak;\n      str += css;\n    }\n\n    return str;\n  };\n\n  return RuleList;\n}();\n\nvar StyleSheet =\n/*#__PURE__*/\nfunction () {\n  function StyleSheet(styles, options) {\n    this.attached = false;\n    this.deployed = false;\n    this.classes = {};\n    this.keyframes = {};\n    this.options = _extends({}, options, {\n      sheet: this,\n      parent: this,\n      classes: this.classes,\n      keyframes: this.keyframes\n    });\n\n    if (options.Renderer) {\n      this.renderer = new options.Renderer(this);\n    }\n\n    this.rules = new RuleList(this.options);\n\n    for (var name in styles) {\n      this.rules.add(name, styles[name]);\n    }\n\n    this.rules.process();\n  }\n  /**\n   * Attach renderable to the render tree.\n   */\n\n\n  var _proto = StyleSheet.prototype;\n\n  _proto.attach = function attach() {\n    if (this.attached) return this;\n    if (this.renderer) this.renderer.attach();\n    this.attached = true; // Order is important, because we can't use insertRule API if style element is not attached.\n\n    if (!this.deployed) this.deploy();\n    return this;\n  }\n  /**\n   * Remove renderable from render tree.\n   */\n  ;\n\n  _proto.detach = function detach() {\n    if (!this.attached) return this;\n    if (this.renderer) this.renderer.detach();\n    this.attached = false;\n    return this;\n  }\n  /**\n   * Add a rule to the current stylesheet.\n   * Will insert a rule also after the stylesheet has been rendered first time.\n   */\n  ;\n\n  _proto.addRule = function addRule(name, decl, options) {\n    var queue = this.queue; // Plugins can create rules.\n    // In order to preserve the right order, we need to queue all `.addRule` calls,\n    // which happen after the first `rules.add()` call.\n\n    if (this.attached && !queue) this.queue = [];\n    var rule = this.rules.add(name, decl, options);\n    if (!rule) return null;\n    this.options.jss.plugins.onProcessRule(rule);\n\n    if (this.attached) {\n      if (!this.deployed) return rule; // Don't insert rule directly if there is no stringified version yet.\n      // It will be inserted all together when .attach is called.\n\n      if (queue) queue.push(rule);else {\n        this.insertRule(rule);\n\n        if (this.queue) {\n          this.queue.forEach(this.insertRule, this);\n          this.queue = undefined;\n        }\n      }\n      return rule;\n    } // We can't add rules to a detached style node.\n    // We will redeploy the sheet once user will attach it.\n\n\n    this.deployed = false;\n    return rule;\n  }\n  /**\n   * Insert rule into the StyleSheet\n   */\n  ;\n\n  _proto.insertRule = function insertRule(rule) {\n    if (this.renderer) {\n      this.renderer.insertRule(rule);\n    }\n  }\n  /**\n   * Create and add rules.\n   * Will render also after Style Sheet was rendered the first time.\n   */\n  ;\n\n  _proto.addRules = function addRules(styles, options) {\n    var added = [];\n\n    for (var name in styles) {\n      var rule = this.addRule(name, styles[name], options);\n      if (rule) added.push(rule);\n    }\n\n    return added;\n  }\n  /**\n   * Get a rule by name.\n   */\n  ;\n\n  _proto.getRule = function getRule(name) {\n    return this.rules.get(name);\n  }\n  /**\n   * Delete a rule by name.\n   * Returns `true`: if rule has been deleted from the DOM.\n   */\n  ;\n\n  _proto.deleteRule = function deleteRule(name) {\n    var rule = typeof name === 'object' ? name : this.rules.get(name);\n\n    if (!rule || // Style sheet was created without link: true and attached, in this case we\n    // won't be able to remove the CSS rule from the DOM.\n    this.attached && !rule.renderable) {\n      return false;\n    }\n\n    this.rules.remove(rule);\n\n    if (this.attached && rule.renderable && this.renderer) {\n      return this.renderer.deleteRule(rule.renderable);\n    }\n\n    return true;\n  }\n  /**\n   * Get index of a rule.\n   */\n  ;\n\n  _proto.indexOf = function indexOf(rule) {\n    return this.rules.indexOf(rule);\n  }\n  /**\n   * Deploy pure CSS string to a renderable.\n   */\n  ;\n\n  _proto.deploy = function deploy() {\n    if (this.renderer) this.renderer.deploy();\n    this.deployed = true;\n    return this;\n  }\n  /**\n   * Update the function values with a new data.\n   */\n  ;\n\n  _proto.update = function update() {\n    var _this$rules;\n\n    (_this$rules = this.rules).update.apply(_this$rules, arguments);\n\n    return this;\n  }\n  /**\n   * Updates a single rule.\n   */\n  ;\n\n  _proto.updateOne = function updateOne(rule, data, options) {\n    this.rules.updateOne(rule, data, options);\n    return this;\n  }\n  /**\n   * Convert rules to a CSS string.\n   */\n  ;\n\n  _proto.toString = function toString(options) {\n    return this.rules.toString(options);\n  };\n\n  return StyleSheet;\n}();\n\nvar PluginsRegistry =\n/*#__PURE__*/\nfunction () {\n  function PluginsRegistry() {\n    this.plugins = {\n      internal: [],\n      external: []\n    };\n    this.registry = {};\n  }\n\n  var _proto = PluginsRegistry.prototype;\n\n  /**\n   * Call `onCreateRule` hooks and return an object if returned by a hook.\n   */\n  _proto.onCreateRule = function onCreateRule(name, decl, options) {\n    for (var i = 0; i < this.registry.onCreateRule.length; i++) {\n      var rule = this.registry.onCreateRule[i](name, decl, options);\n      if (rule) return rule;\n    }\n\n    return null;\n  }\n  /**\n   * Call `onProcessRule` hooks.\n   */\n  ;\n\n  _proto.onProcessRule = function onProcessRule(rule) {\n    if (rule.isProcessed) return;\n    var sheet = rule.options.sheet;\n\n    for (var i = 0; i < this.registry.onProcessRule.length; i++) {\n      this.registry.onProcessRule[i](rule, sheet);\n    }\n\n    if (rule.style) this.onProcessStyle(rule.style, rule, sheet);\n    rule.isProcessed = true;\n  }\n  /**\n   * Call `onProcessStyle` hooks.\n   */\n  ;\n\n  _proto.onProcessStyle = function onProcessStyle(style, rule, sheet) {\n    for (var i = 0; i < this.registry.onProcessStyle.length; i++) {\n      rule.style = this.registry.onProcessStyle[i](rule.style, rule, sheet);\n    }\n  }\n  /**\n   * Call `onProcessSheet` hooks.\n   */\n  ;\n\n  _proto.onProcessSheet = function onProcessSheet(sheet) {\n    for (var i = 0; i < this.registry.onProcessSheet.length; i++) {\n      this.registry.onProcessSheet[i](sheet);\n    }\n  }\n  /**\n   * Call `onUpdate` hooks.\n   */\n  ;\n\n  _proto.onUpdate = function onUpdate(data, rule, sheet, options) {\n    for (var i = 0; i < this.registry.onUpdate.length; i++) {\n      this.registry.onUpdate[i](data, rule, sheet, options);\n    }\n  }\n  /**\n   * Call `onChangeValue` hooks.\n   */\n  ;\n\n  _proto.onChangeValue = function onChangeValue(value, prop, rule) {\n    var processedValue = value;\n\n    for (var i = 0; i < this.registry.onChangeValue.length; i++) {\n      processedValue = this.registry.onChangeValue[i](processedValue, prop, rule);\n    }\n\n    return processedValue;\n  }\n  /**\n   * Register a plugin.\n   */\n  ;\n\n  _proto.use = function use(newPlugin, options) {\n    if (options === void 0) {\n      options = {\n        queue: 'external'\n      };\n    }\n\n    var plugins = this.plugins[options.queue]; // Avoids applying same plugin twice, at least based on ref.\n\n    if (plugins.indexOf(newPlugin) !== -1) {\n      return;\n    }\n\n    plugins.push(newPlugin);\n    this.registry = [].concat(this.plugins.external, this.plugins.internal).reduce(function (registry, plugin) {\n      for (var name in plugin) {\n        if (name in registry) {\n          registry[name].push(plugin[name]);\n        } else {\n          process.env.NODE_ENV !== \"production\" ? warning(false, \"[JSS] Unknown hook \\\"\" + name + \"\\\".\") : void 0;\n        }\n      }\n\n      return registry;\n    }, {\n      onCreateRule: [],\n      onProcessRule: [],\n      onProcessStyle: [],\n      onProcessSheet: [],\n      onChangeValue: [],\n      onUpdate: []\n    });\n  };\n\n  return PluginsRegistry;\n}();\n\n/**\n * Sheets registry to access all instances in one place.\n */\n\nvar SheetsRegistry =\n/*#__PURE__*/\nfunction () {\n  function SheetsRegistry() {\n    this.registry = [];\n  }\n\n  var _proto = SheetsRegistry.prototype;\n\n  /**\n   * Register a Style Sheet.\n   */\n  _proto.add = function add(sheet) {\n    var registry = this.registry;\n    var index = sheet.options.index;\n    if (registry.indexOf(sheet) !== -1) return;\n\n    if (registry.length === 0 || index >= this.index) {\n      registry.push(sheet);\n      return;\n    } // Find a position.\n\n\n    for (var i = 0; i < registry.length; i++) {\n      if (registry[i].options.index > index) {\n        registry.splice(i, 0, sheet);\n        return;\n      }\n    }\n  }\n  /**\n   * Reset the registry.\n   */\n  ;\n\n  _proto.reset = function reset() {\n    this.registry = [];\n  }\n  /**\n   * Remove a Style Sheet.\n   */\n  ;\n\n  _proto.remove = function remove(sheet) {\n    var index = this.registry.indexOf(sheet);\n    this.registry.splice(index, 1);\n  }\n  /**\n   * Convert all attached sheets to a CSS string.\n   */\n  ;\n\n  _proto.toString = function toString(_temp) {\n    var _ref = _temp === void 0 ? {} : _temp,\n        attached = _ref.attached,\n        options = _objectWithoutPropertiesLoose(_ref, [\"attached\"]);\n\n    var _getWhitespaceSymbols = getWhitespaceSymbols(options),\n        linebreak = _getWhitespaceSymbols.linebreak;\n\n    var css = '';\n\n    for (var i = 0; i < this.registry.length; i++) {\n      var sheet = this.registry[i];\n\n      if (attached != null && sheet.attached !== attached) {\n        continue;\n      }\n\n      if (css) css += linebreak;\n      css += sheet.toString(options);\n    }\n\n    return css;\n  };\n\n  _createClass(SheetsRegistry, [{\n    key: \"index\",\n\n    /**\n     * Current highest index number.\n     */\n    get: function get() {\n      return this.registry.length === 0 ? 0 : this.registry[this.registry.length - 1].options.index;\n    }\n  }]);\n\n  return SheetsRegistry;\n}();\n\n/**\n * This is a global sheets registry. Only DomRenderer will add sheets to it.\n * On the server one should use an own SheetsRegistry instance and add the\n * sheets to it, because you need to make sure to create a new registry for\n * each request in order to not leak sheets across requests.\n */\n\nvar sheets = new SheetsRegistry();\n\n/* eslint-disable */\n\n/**\n * Now that `globalThis` is available on most platforms\n * (https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/globalThis#browser_compatibility)\n * we check for `globalThis` first. `globalThis` is necessary for jss\n * to run in Agoric's secure version of JavaScript (SES). Under SES,\n * `globalThis` exists, but `window`, `self`, and `Function('return\n * this')()` are all undefined for security reasons.\n *\n * https://github.com/zloirock/core-js/issues/86#issuecomment-115759028\n */\nvar globalThis$1 = typeof globalThis !== 'undefined' ? globalThis : typeof window !== 'undefined' && window.Math === Math ? window : typeof self !== 'undefined' && self.Math === Math ? self : Function('return this')();\n\nvar ns = '2f1acc6c3a606b082e5eef5e54414ffb';\nif (globalThis$1[ns] == null) globalThis$1[ns] = 0; // Bundle may contain multiple JSS versions at the same time. In order to identify\n// the current version with just one short number and use it for classes generation\n// we use a counter. Also it is more accurate, because user can manually reevaluate\n// the module.\n\nvar moduleId = globalThis$1[ns]++;\n\nvar maxRules = 1e10;\n/**\n * Returns a function which generates unique class names based on counters.\n * When new generator function is created, rule counter is reseted.\n * We need to reset the rule counter for SSR for each request.\n */\n\nvar createGenerateId = function createGenerateId(options) {\n  if (options === void 0) {\n    options = {};\n  }\n\n  var ruleCounter = 0;\n\n  var generateId = function generateId(rule, sheet) {\n    ruleCounter += 1;\n\n    if (ruleCounter > maxRules) {\n      process.env.NODE_ENV !== \"production\" ? warning(false, \"[JSS] You might have a memory leak. Rule counter is at \" + ruleCounter + \".\") : void 0;\n    }\n\n    var jssId = '';\n    var prefix = '';\n\n    if (sheet) {\n      if (sheet.options.classNamePrefix) {\n        prefix = sheet.options.classNamePrefix;\n      }\n\n      if (sheet.options.jss.id != null) {\n        jssId = String(sheet.options.jss.id);\n      }\n    }\n\n    if (options.minify) {\n      // Using \"c\" because a number can't be the first char in a class name.\n      return \"\" + (prefix || 'c') + moduleId + jssId + ruleCounter;\n    }\n\n    return prefix + rule.key + \"-\" + moduleId + (jssId ? \"-\" + jssId : '') + \"-\" + ruleCounter;\n  };\n\n  return generateId;\n};\n\n/**\n * Cache the value from the first time a function is called.\n */\n\nvar memoize = function memoize(fn) {\n  var value;\n  return function () {\n    if (!value) value = fn();\n    return value;\n  };\n};\n/**\n * Get a style property value.\n */\n\n\nvar getPropertyValue = function getPropertyValue(cssRule, prop) {\n  try {\n    // Support CSSTOM.\n    if (cssRule.attributeStyleMap) {\n      return cssRule.attributeStyleMap.get(prop);\n    }\n\n    return cssRule.style.getPropertyValue(prop);\n  } catch (err) {\n    // IE may throw if property is unknown.\n    return '';\n  }\n};\n/**\n * Set a style property.\n */\n\n\nvar setProperty = function setProperty(cssRule, prop, value) {\n  try {\n    var cssValue = value;\n\n    if (Array.isArray(value)) {\n      cssValue = toCssValue(value, true);\n\n      if (value[value.length - 1] === '!important') {\n        cssRule.style.setProperty(prop, cssValue, 'important');\n        return true;\n      }\n    } // Support CSSTOM.\n\n\n    if (cssRule.attributeStyleMap) {\n      cssRule.attributeStyleMap.set(prop, cssValue);\n    } else {\n      cssRule.style.setProperty(prop, cssValue);\n    }\n  } catch (err) {\n    // IE may throw if property is unknown.\n    return false;\n  }\n\n  return true;\n};\n/**\n * Remove a style property.\n */\n\n\nvar removeProperty = function removeProperty(cssRule, prop) {\n  try {\n    // Support CSSTOM.\n    if (cssRule.attributeStyleMap) {\n      cssRule.attributeStyleMap.delete(prop);\n    } else {\n      cssRule.style.removeProperty(prop);\n    }\n  } catch (err) {\n    process.env.NODE_ENV !== \"production\" ? warning(false, \"[JSS] DOMException \\\"\" + err.message + \"\\\" was thrown. Tried to remove property \\\"\" + prop + \"\\\".\") : void 0;\n  }\n};\n/**\n * Set the selector.\n */\n\n\nvar setSelector = function setSelector(cssRule, selectorText) {\n  cssRule.selectorText = selectorText; // Return false if setter was not successful.\n  // Currently works in chrome only.\n\n  return cssRule.selectorText === selectorText;\n};\n/**\n * Gets the `head` element upon the first call and caches it.\n * We assume it can't be null.\n */\n\n\nvar getHead = memoize(function () {\n  return document.querySelector('head');\n});\n/**\n * Find attached sheet with an index higher than the passed one.\n */\n\nfunction findHigherSheet(registry, options) {\n  for (var i = 0; i < registry.length; i++) {\n    var sheet = registry[i];\n\n    if (sheet.attached && sheet.options.index > options.index && sheet.options.insertionPoint === options.insertionPoint) {\n      return sheet;\n    }\n  }\n\n  return null;\n}\n/**\n * Find attached sheet with the highest index.\n */\n\n\nfunction findHighestSheet(registry, options) {\n  for (var i = registry.length - 1; i >= 0; i--) {\n    var sheet = registry[i];\n\n    if (sheet.attached && sheet.options.insertionPoint === options.insertionPoint) {\n      return sheet;\n    }\n  }\n\n  return null;\n}\n/**\n * Find a comment with \"jss\" inside.\n */\n\n\nfunction findCommentNode(text) {\n  var head = getHead();\n\n  for (var i = 0; i < head.childNodes.length; i++) {\n    var node = head.childNodes[i];\n\n    if (node.nodeType === 8 && node.nodeValue.trim() === text) {\n      return node;\n    }\n  }\n\n  return null;\n}\n/**\n * Find a node before which we can insert the sheet.\n */\n\n\nfunction findPrevNode(options) {\n  var registry = sheets.registry;\n\n  if (registry.length > 0) {\n    // Try to insert before the next higher sheet.\n    var sheet = findHigherSheet(registry, options);\n\n    if (sheet && sheet.renderer) {\n      return {\n        parent: sheet.renderer.element.parentNode,\n        node: sheet.renderer.element\n      };\n    } // Otherwise insert after the last attached.\n\n\n    sheet = findHighestSheet(registry, options);\n\n    if (sheet && sheet.renderer) {\n      return {\n        parent: sheet.renderer.element.parentNode,\n        node: sheet.renderer.element.nextSibling\n      };\n    }\n  } // Try to find a comment placeholder if registry is empty.\n\n\n  var insertionPoint = options.insertionPoint;\n\n  if (insertionPoint && typeof insertionPoint === 'string') {\n    var comment = findCommentNode(insertionPoint);\n\n    if (comment) {\n      return {\n        parent: comment.parentNode,\n        node: comment.nextSibling\n      };\n    } // If user specifies an insertion point and it can't be found in the document -\n    // bad specificity issues may appear.\n\n\n    process.env.NODE_ENV !== \"production\" ? warning(false, \"[JSS] Insertion point \\\"\" + insertionPoint + \"\\\" not found.\") : void 0;\n  }\n\n  return false;\n}\n/**\n * Insert style element into the DOM.\n */\n\n\nfunction insertStyle(style, options) {\n  var insertionPoint = options.insertionPoint;\n  var nextNode = findPrevNode(options);\n\n  if (nextNode !== false && nextNode.parent) {\n    nextNode.parent.insertBefore(style, nextNode.node);\n    return;\n  } // Works with iframes and any node types.\n\n\n  if (insertionPoint && typeof insertionPoint.nodeType === 'number') {\n    var insertionPointElement = insertionPoint;\n    var parentNode = insertionPointElement.parentNode;\n    if (parentNode) parentNode.insertBefore(style, insertionPointElement.nextSibling);else process.env.NODE_ENV !== \"production\" ? warning(false, '[JSS] Insertion point is not in the DOM.') : void 0;\n    return;\n  }\n\n  getHead().appendChild(style);\n}\n/**\n * Read jss nonce setting from the page if the user has set it.\n */\n\n\nvar getNonce = memoize(function () {\n  var node = document.querySelector('meta[property=\"csp-nonce\"]');\n  return node ? node.getAttribute('content') : null;\n});\n\nvar _insertRule = function insertRule(container, rule, index) {\n  try {\n    if ('insertRule' in container) {\n      container.insertRule(rule, index);\n    } // Keyframes rule.\n    else if ('appendRule' in container) {\n        container.appendRule(rule);\n      }\n  } catch (err) {\n    process.env.NODE_ENV !== \"production\" ? warning(false, \"[JSS] \" + err.message) : void 0;\n    return false;\n  }\n\n  return container.cssRules[index];\n};\n\nvar getValidRuleInsertionIndex = function getValidRuleInsertionIndex(container, index) {\n  var maxIndex = container.cssRules.length; // In case previous insertion fails, passed index might be wrong\n\n  if (index === undefined || index > maxIndex) {\n    // eslint-disable-next-line no-param-reassign\n    return maxIndex;\n  }\n\n  return index;\n};\n\nvar createStyle = function createStyle() {\n  var el = document.createElement('style'); // Without it, IE will have a broken source order specificity if we\n  // insert rules after we insert the style tag.\n  // It seems to kick-off the source order specificity algorithm.\n\n  el.textContent = '\\n';\n  return el;\n};\n\nvar DomRenderer =\n/*#__PURE__*/\nfunction () {\n  // Will be empty if link: true option is not set, because\n  // it is only for use together with insertRule API.\n  function DomRenderer(sheet) {\n    this.getPropertyValue = getPropertyValue;\n    this.setProperty = setProperty;\n    this.removeProperty = removeProperty;\n    this.setSelector = setSelector;\n    this.hasInsertedRules = false;\n    this.cssRules = [];\n    // There is no sheet when the renderer is used from a standalone StyleRule.\n    if (sheet) sheets.add(sheet);\n    this.sheet = sheet;\n\n    var _ref = this.sheet ? this.sheet.options : {},\n        media = _ref.media,\n        meta = _ref.meta,\n        element = _ref.element;\n\n    this.element = element || createStyle();\n    this.element.setAttribute('data-jss', '');\n    if (media) this.element.setAttribute('media', media);\n    if (meta) this.element.setAttribute('data-meta', meta);\n    var nonce = getNonce();\n    if (nonce) this.element.setAttribute('nonce', nonce);\n  }\n  /**\n   * Insert style element into render tree.\n   */\n\n\n  var _proto = DomRenderer.prototype;\n\n  _proto.attach = function attach() {\n    // In the case the element node is external and it is already in the DOM.\n    if (this.element.parentNode || !this.sheet) return;\n    insertStyle(this.element, this.sheet.options); // When rules are inserted using `insertRule` API, after `sheet.detach().attach()`\n    // most browsers create a new CSSStyleSheet, except of all IEs.\n\n    var deployed = Boolean(this.sheet && this.sheet.deployed);\n\n    if (this.hasInsertedRules && deployed) {\n      this.hasInsertedRules = false;\n      this.deploy();\n    }\n  }\n  /**\n   * Remove style element from render tree.\n   */\n  ;\n\n  _proto.detach = function detach() {\n    if (!this.sheet) return;\n    var parentNode = this.element.parentNode;\n    if (parentNode) parentNode.removeChild(this.element); // In the most browsers, rules inserted using insertRule() API will be lost when style element is removed.\n    // Though IE will keep them and we need a consistent behavior.\n\n    if (this.sheet.options.link) {\n      this.cssRules = [];\n      this.element.textContent = '\\n';\n    }\n  }\n  /**\n   * Inject CSS string into element.\n   */\n  ;\n\n  _proto.deploy = function deploy() {\n    var sheet = this.sheet;\n    if (!sheet) return;\n\n    if (sheet.options.link) {\n      this.insertRules(sheet.rules);\n      return;\n    }\n\n    this.element.textContent = \"\\n\" + sheet.toString() + \"\\n\";\n  }\n  /**\n   * Insert RuleList into an element.\n   */\n  ;\n\n  _proto.insertRules = function insertRules(rules, nativeParent) {\n    for (var i = 0; i < rules.index.length; i++) {\n      this.insertRule(rules.index[i], i, nativeParent);\n    }\n  }\n  /**\n   * Insert a rule into element.\n   */\n  ;\n\n  _proto.insertRule = function insertRule(rule, index, nativeParent) {\n    if (nativeParent === void 0) {\n      nativeParent = this.element.sheet;\n    }\n\n    if (rule.rules) {\n      var parent = rule;\n      var latestNativeParent = nativeParent;\n\n      if (rule.type === 'conditional' || rule.type === 'keyframes') {\n        var _insertionIndex = getValidRuleInsertionIndex(nativeParent, index); // We need to render the container without children first.\n\n\n        latestNativeParent = _insertRule(nativeParent, parent.toString({\n          children: false\n        }), _insertionIndex);\n\n        if (latestNativeParent === false) {\n          return false;\n        }\n\n        this.refCssRule(rule, _insertionIndex, latestNativeParent);\n      }\n\n      this.insertRules(parent.rules, latestNativeParent);\n      return latestNativeParent;\n    }\n\n    var ruleStr = rule.toString();\n    if (!ruleStr) return false;\n    var insertionIndex = getValidRuleInsertionIndex(nativeParent, index);\n\n    var nativeRule = _insertRule(nativeParent, ruleStr, insertionIndex);\n\n    if (nativeRule === false) {\n      return false;\n    }\n\n    this.hasInsertedRules = true;\n    this.refCssRule(rule, insertionIndex, nativeRule);\n    return nativeRule;\n  };\n\n  _proto.refCssRule = function refCssRule(rule, index, cssRule) {\n    rule.renderable = cssRule; // We only want to reference the top level rules, deleteRule API doesn't support removing nested rules\n    // like rules inside media queries or keyframes\n\n    if (rule.options.parent instanceof StyleSheet) {\n      this.cssRules[index] = cssRule;\n    }\n  }\n  /**\n   * Delete a rule.\n   */\n  ;\n\n  _proto.deleteRule = function deleteRule(cssRule) {\n    var sheet = this.element.sheet;\n    var index = this.indexOf(cssRule);\n    if (index === -1) return false;\n    sheet.deleteRule(index);\n    this.cssRules.splice(index, 1);\n    return true;\n  }\n  /**\n   * Get index of a CSS Rule.\n   */\n  ;\n\n  _proto.indexOf = function indexOf(cssRule) {\n    return this.cssRules.indexOf(cssRule);\n  }\n  /**\n   * Generate a new CSS rule and replace the existing one.\n   *\n   * Only used for some old browsers because they can't set a selector.\n   */\n  ;\n\n  _proto.replaceRule = function replaceRule(cssRule, rule) {\n    var index = this.indexOf(cssRule);\n    if (index === -1) return false;\n    this.element.sheet.deleteRule(index);\n    this.cssRules.splice(index, 1);\n    return this.insertRule(rule, index);\n  }\n  /**\n   * Get all rules elements.\n   */\n  ;\n\n  _proto.getRules = function getRules() {\n    return this.element.sheet.cssRules;\n  };\n\n  return DomRenderer;\n}();\n\nvar instanceCounter = 0;\n\nvar Jss =\n/*#__PURE__*/\nfunction () {\n  function Jss(options) {\n    this.id = instanceCounter++;\n    this.version = \"10.8.2\";\n    this.plugins = new PluginsRegistry();\n    this.options = {\n      id: {\n        minify: false\n      },\n      createGenerateId: createGenerateId,\n      Renderer: isInBrowser ? DomRenderer : null,\n      plugins: []\n    };\n    this.generateId = createGenerateId({\n      minify: false\n    });\n\n    for (var i = 0; i < plugins.length; i++) {\n      this.plugins.use(plugins[i], {\n        queue: 'internal'\n      });\n    }\n\n    this.setup(options);\n  }\n  /**\n   * Prepares various options, applies plugins.\n   * Should not be used twice on the same instance, because there is no plugins\n   * deduplication logic.\n   */\n\n\n  var _proto = Jss.prototype;\n\n  _proto.setup = function setup(options) {\n    if (options === void 0) {\n      options = {};\n    }\n\n    if (options.createGenerateId) {\n      this.options.createGenerateId = options.createGenerateId;\n    }\n\n    if (options.id) {\n      this.options.id = _extends({}, this.options.id, options.id);\n    }\n\n    if (options.createGenerateId || options.id) {\n      this.generateId = this.options.createGenerateId(this.options.id);\n    }\n\n    if (options.insertionPoint != null) this.options.insertionPoint = options.insertionPoint;\n\n    if ('Renderer' in options) {\n      this.options.Renderer = options.Renderer;\n    } // eslint-disable-next-line prefer-spread\n\n\n    if (options.plugins) this.use.apply(this, options.plugins);\n    return this;\n  }\n  /**\n   * Create a Style Sheet.\n   */\n  ;\n\n  _proto.createStyleSheet = function createStyleSheet(styles, options) {\n    if (options === void 0) {\n      options = {};\n    }\n\n    var _options = options,\n        index = _options.index;\n\n    if (typeof index !== 'number') {\n      index = sheets.index === 0 ? 0 : sheets.index + 1;\n    }\n\n    var sheet = new StyleSheet(styles, _extends({}, options, {\n      jss: this,\n      generateId: options.generateId || this.generateId,\n      insertionPoint: this.options.insertionPoint,\n      Renderer: this.options.Renderer,\n      index: index\n    }));\n    this.plugins.onProcessSheet(sheet);\n    return sheet;\n  }\n  /**\n   * Detach the Style Sheet and remove it from the registry.\n   */\n  ;\n\n  _proto.removeStyleSheet = function removeStyleSheet(sheet) {\n    sheet.detach();\n    sheets.remove(sheet);\n    return this;\n  }\n  /**\n   * Create a rule without a Style Sheet.\n   * [Deprecated] will be removed in the next major version.\n   */\n  ;\n\n  _proto.createRule = function createRule$1(name, style, options) {\n    if (style === void 0) {\n      style = {};\n    }\n\n    if (options === void 0) {\n      options = {};\n    }\n\n    // Enable rule without name for inline styles.\n    if (typeof name === 'object') {\n      return this.createRule(undefined, name, style);\n    }\n\n    var ruleOptions = _extends({}, options, {\n      name: name,\n      jss: this,\n      Renderer: this.options.Renderer\n    });\n\n    if (!ruleOptions.generateId) ruleOptions.generateId = this.generateId;\n    if (!ruleOptions.classes) ruleOptions.classes = {};\n    if (!ruleOptions.keyframes) ruleOptions.keyframes = {};\n\n    var rule = createRule(name, style, ruleOptions);\n\n    if (rule) this.plugins.onProcessRule(rule);\n    return rule;\n  }\n  /**\n   * Register plugin. Passed function will be invoked with a rule instance.\n   */\n  ;\n\n  _proto.use = function use() {\n    var _this = this;\n\n    for (var _len = arguments.length, plugins = new Array(_len), _key = 0; _key < _len; _key++) {\n      plugins[_key] = arguments[_key];\n    }\n\n    plugins.forEach(function (plugin) {\n      _this.plugins.use(plugin);\n    });\n    return this;\n  };\n\n  return Jss;\n}();\n\nvar createJss = function createJss(options) {\n  return new Jss(options);\n};\n\n/**\n * SheetsManager is like a WeakMap which is designed to count StyleSheet\n * instances and attach/detach automatically.\n * Used in react-jss.\n */\n\nvar SheetsManager =\n/*#__PURE__*/\nfunction () {\n  function SheetsManager() {\n    this.length = 0;\n    this.sheets = new WeakMap();\n  }\n\n  var _proto = SheetsManager.prototype;\n\n  _proto.get = function get(key) {\n    var entry = this.sheets.get(key);\n    return entry && entry.sheet;\n  };\n\n  _proto.add = function add(key, sheet) {\n    if (this.sheets.has(key)) return;\n    this.length++;\n    this.sheets.set(key, {\n      sheet: sheet,\n      refs: 0\n    });\n  };\n\n  _proto.manage = function manage(key) {\n    var entry = this.sheets.get(key);\n\n    if (entry) {\n      if (entry.refs === 0) {\n        entry.sheet.attach();\n      }\n\n      entry.refs++;\n      return entry.sheet;\n    }\n\n    warning(false, \"[JSS] SheetsManager: can't find sheet to manage\");\n    return undefined;\n  };\n\n  _proto.unmanage = function unmanage(key) {\n    var entry = this.sheets.get(key);\n\n    if (entry) {\n      if (entry.refs > 0) {\n        entry.refs--;\n        if (entry.refs === 0) entry.sheet.detach();\n      }\n    } else {\n      warning(false, \"SheetsManager: can't find sheet to unmanage\");\n    }\n  };\n\n  _createClass(SheetsManager, [{\n    key: \"size\",\n    get: function get() {\n      return this.length;\n    }\n  }]);\n\n  return SheetsManager;\n}();\n\n/**\n* Export a constant indicating if this browser has CSSTOM support.\n* https://developers.google.com/web/updates/2018/03/cssom\n*/\nvar hasCSSTOMSupport = typeof CSS === 'object' && CSS != null && 'number' in CSS;\n\n/**\n * Extracts a styles object with only props that contain function values.\n */\nfunction getDynamicStyles(styles) {\n  var to = null;\n\n  for (var key in styles) {\n    var value = styles[key];\n    var type = typeof value;\n\n    if (type === 'function') {\n      if (!to) to = {};\n      to[key] = value;\n    } else if (type === 'object' && value !== null && !Array.isArray(value)) {\n      var extracted = getDynamicStyles(value);\n\n      if (extracted) {\n        if (!to) to = {};\n        to[key] = extracted;\n      }\n    }\n  }\n\n  return to;\n}\n\n/**\n * A better abstraction over CSS.\n *\n * @copyright Oleg Isonen (Slobodskoi) / Isonen 2014-present\n * @website https://github.com/cssinjs/jss\n * @license MIT\n */\nvar index = createJss();\n\nexport default index;\nexport { RuleList, SheetsManager, SheetsRegistry, createJss as create, createGenerateId, createRule, getDynamicStyles, hasCSSTOMSupport, sheets, toCssValue };\n","import React, { useCallback, memo, useState, useContext, useEffect, useMemo } from 'react';\nimport { useOutlet } from 'react-router-dom';\nimport { attachComponentData, createReactExtension, useElementFilter, createApiRef, useApi, configApiRef } from '@backstage/core-plugin-api';\nimport useAsync from 'react-use/lib/useAsync';\nimport { stringifyEntityRef } from '@backstage/catalog-model';\nimport { createVersionedContext, createVersionedValueMap } from '@backstage/version-bridge';\nimport { create } from 'jss';\nimport { jssPreset, StylesProvider } from '@material-ui/styles';\nimport { Progress } from '@backstage/core-components';\nimport debounce from 'lodash/debounce';\n\nconst TECHDOCS_ADDONS_KEY = \"techdocs.addons.addon.v1\";\nconst TECHDOCS_ADDONS_WRAPPER_KEY = \"techdocs.addons.wrapper.v1\";\nconst TechDocsAddons = () => null;\nattachComponentData(TechDocsAddons, TECHDOCS_ADDONS_WRAPPER_KEY, true);\nconst getDataKeyByName = (name) => {\n  return `${TECHDOCS_ADDONS_KEY}.${name.toLocaleLowerCase(\"en-US\")}`;\n};\nfunction createTechDocsAddonExtension(options) {\n  const { name, component: TechDocsAddon } = options;\n  return createReactExtension({\n    name,\n    component: {\n      sync: (props) => /* @__PURE__ */ React.createElement(TechDocsAddon, {\n        ...props\n      })\n    },\n    data: {\n      [TECHDOCS_ADDONS_KEY]: options,\n      [getDataKeyByName(name)]: true\n    }\n  });\n}\nconst getTechDocsAddonByName = (collection, key) => {\n  return collection.selectByComponentData({ key }).getElements()[0];\n};\nconst getAllTechDocsAddons = (collection) => {\n  return collection.selectByComponentData({\n    key: TECHDOCS_ADDONS_WRAPPER_KEY\n  }).selectByComponentData({\n    key: TECHDOCS_ADDONS_KEY\n  });\n};\nconst getAllTechDocsAddonsData = (collection) => {\n  return collection.selectByComponentData({\n    key: TECHDOCS_ADDONS_WRAPPER_KEY\n  }).findComponentData({\n    key: TECHDOCS_ADDONS_KEY\n  });\n};\nconst useTechDocsAddons = () => {\n  const node = useOutlet();\n  const collection = useElementFilter(node, getAllTechDocsAddons);\n  const options = useElementFilter(node, getAllTechDocsAddonsData);\n  const findAddonByData = useCallback(\n    (data) => {\n      var _a;\n      if (!collection || !data)\n        return null;\n      const nameKey = getDataKeyByName(data.name);\n      return (_a = getTechDocsAddonByName(collection, nameKey)) != null ? _a : null;\n    },\n    [collection]\n  );\n  const renderComponentByName = useCallback(\n    (name) => {\n      const data = options.find((option) => option.name === name);\n      return data ? findAddonByData(data) : null;\n    },\n    [options, findAddonByData]\n  );\n  const renderComponentsByLocation = useCallback(\n    (location) => {\n      const data = options.filter((option) => option.location === location);\n      return data.length ? data.map(findAddonByData) : null;\n    },\n    [options, findAddonByData]\n  );\n  return { renderComponentByName, renderComponentsByLocation };\n};\n\nconst techdocsApiRef = createApiRef({\n  id: \"plugin.techdocs.service\"\n});\nconst techdocsStorageApiRef = createApiRef({\n  id: \"plugin.techdocs.storageservice\"\n});\n\nfunction toLowercaseEntityRefMaybe(entityRef, config) {\n  if (config.getOptionalBoolean(\"techdocs.legacyUseCaseSensitiveTripletPaths\"))\n    return entityRef;\n  entityRef.kind = entityRef.kind.toLocaleLowerCase();\n  entityRef.name = entityRef.name.toLocaleLowerCase();\n  entityRef.namespace = entityRef.namespace.toLocaleLowerCase();\n  return entityRef;\n}\n\nconst areEntityRefsEqual = (prevEntityRef, nextEntityRef) => {\n  return stringifyEntityRef(prevEntityRef) === stringifyEntityRef(nextEntityRef);\n};\nconst defaultTechDocsReaderPageValue = {\n  title: \"\",\n  subtitle: \"\",\n  setTitle: () => {\n  },\n  setSubtitle: () => {\n  },\n  setShadowRoot: () => {\n  },\n  metadata: { loading: true },\n  entityMetadata: { loading: true },\n  entityRef: { kind: \"\", name: \"\", namespace: \"\" }\n};\nconst TechDocsReaderPageContext = createVersionedContext(\"techdocs-reader-page-context\");\nconst TechDocsReaderPageProvider = memo(\n  ({ entityRef, children }) => {\n    const techdocsApi = useApi(techdocsApiRef);\n    const config = useApi(configApiRef);\n    const metadata = useAsync(async () => {\n      return techdocsApi.getTechDocsMetadata(entityRef);\n    }, [entityRef]);\n    const entityMetadata = useAsync(async () => {\n      return techdocsApi.getEntityMetadata(entityRef);\n    }, [entityRef]);\n    const [title, setTitle] = useState(defaultTechDocsReaderPageValue.title);\n    const [subtitle, setSubtitle] = useState(\n      defaultTechDocsReaderPageValue.subtitle\n    );\n    const [shadowRoot, setShadowRoot] = useState(\n      defaultTechDocsReaderPageValue.shadowRoot\n    );\n    const value = {\n      metadata,\n      entityRef: toLowercaseEntityRefMaybe(entityRef, config),\n      entityMetadata,\n      shadowRoot,\n      setShadowRoot,\n      title,\n      setTitle,\n      subtitle,\n      setSubtitle\n    };\n    const versionedValue = createVersionedValueMap({ 1: value });\n    return /* @__PURE__ */ React.createElement(TechDocsReaderPageContext.Provider, {\n      value: versionedValue\n    }, children instanceof Function ? children(value) : children);\n  },\n  (prevProps, nextProps) => {\n    return areEntityRefsEqual(prevProps.entityRef, nextProps.entityRef);\n  }\n);\nconst useTechDocsReaderPage = () => {\n  const versionedContext = useContext(TechDocsReaderPageContext);\n  if (versionedContext === void 0) {\n    return defaultTechDocsReaderPageValue;\n  }\n  const context = versionedContext.atVersion(1);\n  if (context === void 0) {\n    throw new Error(\"No context found for version 1.\");\n  }\n  return context;\n};\n\nconst TechDocsAddonLocations = Object.freeze({\n  Header: \"Header\",\n  Subheader: \"Subheader\",\n  Settings: \"Settings\",\n  PrimarySidebar: \"PrimarySidebar\",\n  SecondarySidebar: \"SecondarySidebar\",\n  Content: \"Content\"\n});\n\nconst SHADOW_DOM_STYLE_LOAD_EVENT = \"TECH_DOCS_SHADOW_DOM_STYLE_LOAD\";\nconst useShadowDomStylesEvents = (element) => {\n  useEffect(() => {\n    var _a;\n    if (!element) {\n      return () => {\n      };\n    }\n    const styles = element.querySelectorAll(\n      'head > link[rel=\"stylesheet\"]'\n    );\n    let count = (_a = styles == null ? void 0 : styles.length) != null ? _a : 0;\n    const event = new CustomEvent(SHADOW_DOM_STYLE_LOAD_EVENT);\n    if (!count) {\n      element.dispatchEvent(event);\n      return () => {\n      };\n    }\n    const handleLoad = () => {\n      if (--count === 0) {\n        element.dispatchEvent(event);\n      }\n    };\n    styles == null ? void 0 : styles.forEach((style) => {\n      style.addEventListener(\"load\", handleLoad);\n    });\n    return () => {\n      styles == null ? void 0 : styles.forEach((style) => {\n        style.removeEventListener(\"load\", handleLoad);\n      });\n    };\n  }, [element]);\n};\nconst useShadowDomStylesLoading = (element) => {\n  const [loading, setLoading] = useState(false);\n  useEffect(() => {\n    if (!element)\n      return () => {\n      };\n    setLoading(true);\n    const style = element.style;\n    style.setProperty(\"opacity\", \"0\");\n    const handleLoad = () => {\n      setLoading(false);\n      style.setProperty(\"opacity\", \"1\");\n    };\n    element.addEventListener(SHADOW_DOM_STYLE_LOAD_EVENT, handleLoad);\n    return () => {\n      element.removeEventListener(SHADOW_DOM_STYLE_LOAD_EVENT, handleLoad);\n    };\n  }, [element]);\n  return loading;\n};\nconst TechDocsShadowDom = ({\n  element,\n  onAppend,\n  children\n}) => {\n  const [jss, setJss] = useState(\n    create({\n      ...jssPreset(),\n      insertionPoint: void 0\n    })\n  );\n  useShadowDomStylesEvents(element);\n  const loading = useShadowDomStylesLoading(element);\n  const ref = useCallback(\n    (shadowHost) => {\n      if (!element || !shadowHost)\n        return;\n      setJss(\n        create({\n          ...jssPreset(),\n          insertionPoint: element.querySelector(\"head\") || void 0\n        })\n      );\n      let shadowRoot = shadowHost.shadowRoot;\n      if (!shadowRoot) {\n        shadowRoot = shadowHost.attachShadow({ mode: \"open\" });\n      }\n      shadowRoot.replaceChildren(element);\n      if (typeof onAppend === \"function\") {\n        onAppend(shadowRoot);\n      }\n    },\n    [element, onAppend]\n  );\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, loading && /* @__PURE__ */ React.createElement(Progress, null), /* @__PURE__ */ React.createElement(StylesProvider, {\n    jss,\n    sheetsManager: /* @__PURE__ */ new Map()\n  }, /* @__PURE__ */ React.createElement(\"div\", {\n    ref,\n    \"data-testid\": \"techdocs-native-shadowroot\"\n  }), children));\n};\n\nconst useShadowRoot = () => {\n  const { shadowRoot } = useTechDocsReaderPage();\n  return shadowRoot;\n};\nconst useShadowRootElements = (selectors) => {\n  const shadowRoot = useShadowRoot();\n  if (!shadowRoot)\n    return [];\n  return selectors.map((selector) => shadowRoot == null ? void 0 : shadowRoot.querySelectorAll(selector)).filter((nodeList) => nodeList.length).map((nodeList) => Array.from(nodeList)).flat();\n};\nconst isValidSelection = (newSelection) => {\n  return newSelection.toString() && newSelection.rangeCount && newSelection.getRangeAt(0).getBoundingClientRect().top;\n};\nconst useShadowRootSelection = (wait = 0) => {\n  const shadowRoot = useShadowRoot();\n  const [selection, setSelection] = useState(null);\n  const handleSelectionChange = useMemo(\n    () => debounce(() => {\n      const shadowDocument = shadowRoot;\n      const newSelection = shadowDocument.getSelection ? shadowDocument.getSelection() : document.getSelection();\n      if (newSelection && isValidSelection(newSelection)) {\n        setSelection(newSelection);\n      } else {\n        setSelection(null);\n      }\n    }, wait),\n    [shadowRoot, setSelection, wait]\n  );\n  useEffect(() => {\n    window.document.addEventListener(\"selectionchange\", handleSelectionChange);\n    return () => window.document.removeEventListener(\n      \"selectionchange\",\n      handleSelectionChange\n    );\n  }, [handleSelectionChange]);\n  return selection;\n};\n\nexport { SHADOW_DOM_STYLE_LOAD_EVENT, TECHDOCS_ADDONS_WRAPPER_KEY, TechDocsAddonLocations, TechDocsAddons, TechDocsReaderPageProvider, TechDocsShadowDom, createTechDocsAddonExtension, techdocsApiRef, techdocsStorageApiRef, toLowercaseEntityRefMaybe, useShadowDomStylesLoading, useShadowRoot, useShadowRootElements, useShadowRootSelection, useTechDocsAddons, useTechDocsReaderPage };\n//# sourceMappingURL=index.esm.js.map\n","import { createApiRef, useApi, useAnalytics, configApiRef, createRouteRef, useRouteRef, useRouteRefParams, getComponentData, createPlugin, createApiFactory, discoveryApiRef, identityApiRef, fetchApiRef, createRoutableExtension } from '@backstage/core-plugin-api';\nimport { ResponseError, NotFoundError } from '@backstage/errors';\nimport { EventSourcePolyfill } from 'event-source-polyfill';\nimport React, { useReducer, useRef, useMemo, createContext, useContext, useState, useEffect, useCallback, Children } from 'react';\nimport { useParams, useNavigate as useNavigate$1, useOutlet, Routes, Route, useRoutes } from 'react-router-dom';\nimport { techdocsStorageApiRef as techdocsStorageApiRef$1, useTechDocsReaderPage, SHADOW_DOM_STYLE_LOAD_EVENT, useShadowDomStylesLoading, useTechDocsAddons, TechDocsAddonLocations, TechDocsShadowDom, TECHDOCS_ADDONS_WRAPPER_KEY, TechDocsReaderPageProvider, techdocsApiRef as techdocsApiRef$1 } from '@backstage/plugin-techdocs-react';\nimport useAsync from 'react-use/lib/useAsync';\nimport useAsyncRetry from 'react-use/lib/useAsyncRetry';\nimport { Link, LogViewer, ErrorPage, useSidebarPinState, Content, HeaderLabel, Header, Page, ItemCardGrid, ItemCardHeader, Button as Button$1, WarningPanel, CodeSnippet, Progress, SubvalueCell, Table, EmptyState, PageWithHeader, ContentHeader, SupportButton, MissingAnnotationEmptyState } from '@backstage/core-components';\nimport { makeStyles, ListItemText, ListItem, ListItemIcon, Divider, Paper, createStyles, Button, Drawer, Grid, Typography, IconButton, CircularProgress, lighten, alpha, useTheme, withStyles, Tooltip, ThemeProvider, SvgIcon, useMediaQuery, Portal, Toolbar, Box, Menu, Card, CardMedia, CardContent, CardActions } from '@material-ui/core';\nimport { HighlightedSearchResultText, SearchContextProvider, useSearch, SearchAutocomplete } from '@backstage/plugin-search-react';\nimport { useNavigate, useOutlet as useOutlet$1 } from 'react-router';\nimport { Alert, Skeleton } from '@material-ui/lab';\nimport Close from '@material-ui/icons/Close';\nimport { scmIntegrationsApiRef } from '@backstage/integration-react';\nimport DOMPurify from 'dompurify';\nimport { replaceGitHubUrlType } from '@backstage/integration';\nimport FeedbackOutlinedIcon from '@material-ui/icons/FeedbackOutlined';\nimport ReactDOM from 'react-dom';\nimport parseGitUrl from 'git-url-parse';\nimport MenuIcon from '@material-ui/icons/Menu';\nimport Helmet from 'react-helmet';\nimport CodeIcon from '@material-ui/icons/Code';\nimport { getEntityRelations, EntityRefLink, EntityRefLinks, useEntityList, humanizeEntityRef, useStarredEntities, CATALOG_FILTER_EXISTS, EntityListProvider, CatalogFilterLayout, UserListPicker, EntityOwnerPicker, EntityTagPicker, useEntity } from '@backstage/plugin-catalog-react';\nimport { RELATION_OWNED_BY, getCompoundEntityRef } from '@backstage/catalog-model';\nimport SettingsIcon from '@material-ui/icons/Settings';\nimport useCopyToClipboard from 'react-use/lib/useCopyToClipboard';\nimport { capitalize } from 'lodash';\nimport ShareIcon from '@material-ui/icons/Share';\nimport { withStyles as withStyles$1 } from '@material-ui/styles';\nimport Star from '@material-ui/icons/Star';\nimport StarBorder from '@material-ui/icons/StarBorder';\n\nconst techdocsStorageApiRef = createApiRef({\n  id: \"plugin.techdocs.storageservice\"\n});\nconst techdocsApiRef = createApiRef({\n  id: \"plugin.techdocs.service\"\n});\n\nclass TechDocsClient {\n  constructor(options) {\n    this.configApi = options.configApi;\n    this.discoveryApi = options.discoveryApi;\n    this.fetchApi = options.fetchApi;\n  }\n  async getApiOrigin() {\n    return await this.discoveryApi.getBaseUrl(\"techdocs\");\n  }\n  async getTechDocsMetadata(entityId) {\n    const { kind, namespace, name } = entityId;\n    const apiOrigin = await this.getApiOrigin();\n    const requestUrl = `${apiOrigin}/metadata/techdocs/${namespace}/${kind}/${name}`;\n    const request = await this.fetchApi.fetch(`${requestUrl}`);\n    if (!request.ok) {\n      throw await ResponseError.fromResponse(request);\n    }\n    return await request.json();\n  }\n  async getEntityMetadata(entityId) {\n    const { kind, namespace, name } = entityId;\n    const apiOrigin = await this.getApiOrigin();\n    const requestUrl = `${apiOrigin}/metadata/entity/${namespace}/${kind}/${name}`;\n    const request = await this.fetchApi.fetch(`${requestUrl}`);\n    if (!request.ok) {\n      throw await ResponseError.fromResponse(request);\n    }\n    return await request.json();\n  }\n}\nclass TechDocsStorageClient {\n  constructor(options) {\n    this.configApi = options.configApi;\n    this.discoveryApi = options.discoveryApi;\n    this.identityApi = options.identityApi;\n    this.fetchApi = options.fetchApi;\n  }\n  async getApiOrigin() {\n    return await this.discoveryApi.getBaseUrl(\"techdocs\");\n  }\n  async getStorageUrl() {\n    var _a;\n    return (_a = this.configApi.getOptionalString(\"techdocs.storageUrl\")) != null ? _a : `${await this.discoveryApi.getBaseUrl(\"techdocs\")}/static/docs`;\n  }\n  async getBuilder() {\n    return this.configApi.getString(\"techdocs.builder\");\n  }\n  async getEntityDocs(entityId, path) {\n    const { kind, namespace, name } = entityId;\n    const storageUrl = await this.getStorageUrl();\n    const url = `${storageUrl}/${namespace}/${kind}/${name}/${path}`;\n    const request = await this.fetchApi.fetch(\n      `${url.endsWith(\"/\") ? url : `${url}/`}index.html`\n    );\n    let errorMessage = \"\";\n    switch (request.status) {\n      case 404:\n        errorMessage = \"Page not found. \";\n        if (!path) {\n          errorMessage += \"This could be because there is no index.md file in the root of the docs directory of this repository.\";\n        }\n        throw new NotFoundError(errorMessage);\n      case 500:\n        errorMessage = \"Could not generate documentation or an error in the TechDocs backend. \";\n        throw new Error(errorMessage);\n    }\n    return request.text();\n  }\n  async syncEntityDocs(entityId, logHandler = () => {\n  }) {\n    const { kind, namespace, name } = entityId;\n    const apiOrigin = await this.getApiOrigin();\n    const url = `${apiOrigin}/sync/${namespace}/${kind}/${name}`;\n    const { token } = await this.identityApi.getCredentials();\n    return new Promise((resolve, reject) => {\n      const source = new EventSourcePolyfill(url, {\n        withCredentials: true,\n        headers: token ? { Authorization: `Bearer ${token}` } : {}\n      });\n      source.addEventListener(\"log\", (e) => {\n        if (e.data) {\n          logHandler(JSON.parse(e.data));\n        }\n      });\n      source.addEventListener(\"finish\", (e) => {\n        let updated = false;\n        if (e.data) {\n          ({ updated } = JSON.parse(e.data));\n        }\n        resolve(updated ? \"updated\" : \"cached\");\n      });\n      source.onerror = (e) => {\n        source.close();\n        switch (e.status) {\n          case 404:\n            reject(new NotFoundError(e.message));\n            return;\n          default:\n            reject(new Error(e.data));\n            return;\n        }\n      };\n    });\n  }\n  async getBaseUrl(oldBaseUrl, entityId, path) {\n    const { kind, namespace, name } = entityId;\n    const apiOrigin = await this.getApiOrigin();\n    const newBaseUrl = `${apiOrigin}/static/docs/${namespace}/${kind}/${name}/${path}`;\n    return new URL(\n      oldBaseUrl,\n      newBaseUrl.endsWith(\"/\") ? newBaseUrl : `${newBaseUrl}/`\n    ).toString();\n  }\n}\n\nfunction calculateDisplayState({\n  contentLoading,\n  content,\n  activeSyncState\n}) {\n  if (contentLoading) {\n    return \"CHECKING\";\n  }\n  if (activeSyncState === \"BUILD_READY_RELOAD\") {\n    return \"CHECKING\";\n  }\n  if (!content && activeSyncState === \"CHECKING\") {\n    return \"CHECKING\";\n  }\n  if (!content && activeSyncState === \"BUILDING\") {\n    return \"INITIAL_BUILD\";\n  }\n  if (!content) {\n    return \"CONTENT_NOT_FOUND\";\n  }\n  if (activeSyncState === \"BUILDING\") {\n    return \"CONTENT_STALE_REFRESHING\";\n  }\n  if (activeSyncState === \"BUILD_READY\") {\n    return \"CONTENT_STALE_READY\";\n  }\n  if (activeSyncState === \"ERROR\") {\n    return \"CONTENT_STALE_ERROR\";\n  }\n  return \"CONTENT_FRESH\";\n}\nfunction reducer(oldState, action) {\n  const newState = { ...oldState };\n  switch (action.type) {\n    case \"sync\":\n      if (action.state === \"CHECKING\") {\n        newState.buildLog = [];\n      }\n      newState.activeSyncState = action.state;\n      newState.syncError = action.syncError;\n      break;\n    case \"contentLoading\":\n      newState.contentLoading = true;\n      newState.contentError = void 0;\n      break;\n    case \"content\":\n      if (typeof action.path === \"string\") {\n        newState.path = action.path;\n      }\n      newState.contentLoading = false;\n      newState.content = action.content;\n      newState.contentError = action.contentError;\n      break;\n    case \"buildLog\":\n      newState.buildLog = newState.buildLog.concat(action.log);\n      break;\n    default:\n      throw new Error();\n  }\n  if ([\"BUILD_READY\", \"BUILD_READY_RELOAD\"].includes(newState.activeSyncState) && [\"contentLoading\", \"content\"].includes(action.type)) {\n    newState.activeSyncState = \"UP_TO_DATE\";\n    newState.buildLog = [];\n  }\n  return newState;\n}\nfunction useReaderState(kind, namespace, name, path) {\n  var _a, _b;\n  const [state, dispatch] = useReducer(reducer, {\n    activeSyncState: \"CHECKING\",\n    path,\n    contentLoading: true,\n    buildLog: []\n  });\n  const techdocsStorageApi = useApi(techdocsStorageApiRef$1);\n  const { retry: contentReload } = useAsyncRetry(async () => {\n    dispatch({ type: \"contentLoading\" });\n    try {\n      const entityDocs = await techdocsStorageApi.getEntityDocs(\n        { kind, namespace, name },\n        path\n      );\n      dispatch({ type: \"content\", content: entityDocs, path });\n      return entityDocs;\n    } catch (e) {\n      dispatch({ type: \"content\", contentError: e, path });\n    }\n    return void 0;\n  }, [techdocsStorageApi, kind, namespace, name, path]);\n  const contentRef = useRef({\n    content: void 0,\n    reload: () => {\n    }\n  });\n  contentRef.current = { content: state.content, reload: contentReload };\n  useAsync(async () => {\n    dispatch({ type: \"sync\", state: \"CHECKING\" });\n    const buildingTimeout = setTimeout(() => {\n      dispatch({ type: \"sync\", state: \"BUILDING\" });\n    }, 1e3);\n    try {\n      const result = await techdocsStorageApi.syncEntityDocs(\n        {\n          kind,\n          namespace,\n          name\n        },\n        (log) => {\n          dispatch({ type: \"buildLog\", log });\n        }\n      );\n      switch (result) {\n        case \"updated\":\n          if (!contentRef.current.content) {\n            contentRef.current.reload();\n            dispatch({ type: \"sync\", state: \"BUILD_READY_RELOAD\" });\n          } else {\n            dispatch({ type: \"sync\", state: \"BUILD_READY\" });\n          }\n          break;\n        case \"cached\":\n          dispatch({ type: \"sync\", state: \"UP_TO_DATE\" });\n          break;\n        default:\n          dispatch({\n            type: \"sync\",\n            state: \"ERROR\",\n            syncError: new Error(\"Unexpected return state\")\n          });\n          break;\n      }\n    } catch (e) {\n      dispatch({ type: \"sync\", state: \"ERROR\", syncError: e });\n    } finally {\n      clearTimeout(buildingTimeout);\n    }\n  }, [kind, name, namespace, techdocsStorageApi, dispatch, contentRef]);\n  const displayState = useMemo(\n    () => calculateDisplayState({\n      activeSyncState: state.activeSyncState,\n      contentLoading: state.contentLoading,\n      content: state.content\n    }),\n    [state.activeSyncState, state.content, state.contentLoading]\n  );\n  return {\n    state: displayState,\n    contentReload,\n    path: state.path,\n    content: state.content,\n    contentErrorMessage: (_a = state.contentError) == null ? void 0 : _a.toString(),\n    syncErrorMessage: (_b = state.syncError) == null ? void 0 : _b.toString(),\n    buildLog: state.buildLog\n  };\n}\n\nconst TechDocsReaderContext = createContext({});\nconst useTechDocsReader = () => useContext(TechDocsReaderContext);\nconst TechDocsReaderProvider = ({\n  children\n}) => {\n  const { \"*\": path = \"\" } = useParams();\n  const { entityRef } = useTechDocsReaderPage();\n  const { kind, namespace, name } = entityRef;\n  const value = useReaderState(kind, namespace, name, path);\n  return /* @__PURE__ */ React.createElement(TechDocsReaderContext.Provider, {\n    value\n  }, children instanceof Function ? children(value) : children);\n};\nconst withTechDocsReaderProvider = (Component) => (props) => /* @__PURE__ */ React.createElement(TechDocsReaderProvider, null, /* @__PURE__ */ React.createElement(Component, {\n  ...props\n}));\n\nconst useStyles$4 = makeStyles({\n  flexContainer: {\n    flexWrap: \"wrap\"\n  },\n  itemText: {\n    width: \"100%\",\n    marginBottom: \"1rem\"\n  }\n});\nconst TechDocsSearchResultListItem = (props) => {\n  const {\n    result,\n    highlight,\n    rank,\n    lineClamp = 5,\n    asListItem = true,\n    asLink = true,\n    title,\n    icon\n  } = props;\n  const classes = useStyles$4();\n  const analytics = useAnalytics();\n  const handleClick = () => {\n    analytics.captureEvent(\"discover\", result.title, {\n      attributes: { to: result.location },\n      value: rank\n    });\n  };\n  const TextItem = () => {\n    const resultTitle = (highlight == null ? void 0 : highlight.fields.title) ? /* @__PURE__ */ React.createElement(HighlightedSearchResultText, {\n      text: highlight.fields.title,\n      preTag: highlight.preTag,\n      postTag: highlight.postTag\n    }) : result.title;\n    const entityTitle = (highlight == null ? void 0 : highlight.fields.entityTitle) ? /* @__PURE__ */ React.createElement(HighlightedSearchResultText, {\n      text: highlight.fields.entityTitle,\n      preTag: highlight.preTag,\n      postTag: highlight.postTag\n    }) : result.entityTitle;\n    const resultName = (highlight == null ? void 0 : highlight.fields.name) ? /* @__PURE__ */ React.createElement(HighlightedSearchResultText, {\n      text: highlight.fields.name,\n      preTag: highlight.preTag,\n      postTag: highlight.postTag\n    }) : result.name;\n    return /* @__PURE__ */ React.createElement(ListItemText, {\n      className: classes.itemText,\n      primaryTypographyProps: { variant: \"h6\" },\n      primary: title ? title : /* @__PURE__ */ React.createElement(React.Fragment, null, resultTitle, \" | \", entityTitle != null ? entityTitle : resultName, \" docs\"),\n      secondary: /* @__PURE__ */ React.createElement(\"span\", {\n        style: {\n          display: \"-webkit-box\",\n          WebkitBoxOrient: \"vertical\",\n          WebkitLineClamp: lineClamp,\n          overflow: \"hidden\"\n        }\n      }, (highlight == null ? void 0 : highlight.fields.text) ? /* @__PURE__ */ React.createElement(HighlightedSearchResultText, {\n        text: highlight.fields.text,\n        preTag: highlight.preTag,\n        postTag: highlight.postTag\n      }) : result.text)\n    });\n  };\n  const LinkWrapper = ({ children }) => asLink ? /* @__PURE__ */ React.createElement(Link, {\n    noTrack: true,\n    to: result.location,\n    onClick: handleClick\n  }, children) : /* @__PURE__ */ React.createElement(React.Fragment, null, children);\n  const ListItemWrapper = ({ children }) => asListItem ? /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(ListItem, {\n    alignItems: \"flex-start\"\n  }, icon && /* @__PURE__ */ React.createElement(ListItemIcon, null, icon), /* @__PURE__ */ React.createElement(\"div\", {\n    className: classes.flexContainer\n  }, children)), /* @__PURE__ */ React.createElement(Divider, {\n    component: \"li\"\n  })) : /* @__PURE__ */ React.createElement(React.Fragment, null, children);\n  return /* @__PURE__ */ React.createElement(LinkWrapper, null, /* @__PURE__ */ React.createElement(ListItemWrapper, null, /* @__PURE__ */ React.createElement(TextItem, null)));\n};\n\nconst useStyles$3 = makeStyles((theme) => ({\n  root: {\n    width: \"100%\"\n  },\n  bar: {\n    padding: theme.spacing(1)\n  }\n}));\nconst isTechDocsSearchResult = (option) => {\n  return option == null ? void 0 : option.document;\n};\nconst TechDocsSearchBar = (props) => {\n  const { entityId, entityTitle, debounceTime = 150 } = props;\n  const [open, setOpen] = useState(false);\n  const navigate = useNavigate();\n  const {\n    setFilters,\n    result: { loading, value: searchVal }\n  } = useSearch();\n  const classes = useStyles$3();\n  const [options, setOptions] = useState([]);\n  useEffect(() => {\n    let mounted = true;\n    if (mounted && searchVal) {\n      const searchResults = searchVal.results.slice(0, 10);\n      setOptions(searchResults);\n    }\n    return () => {\n      mounted = false;\n    };\n  }, [loading, searchVal]);\n  const { kind, name, namespace } = entityId;\n  useEffect(() => {\n    setFilters((prevFilters) => {\n      return {\n        ...prevFilters,\n        kind,\n        namespace,\n        name\n      };\n    });\n  }, [kind, namespace, name, setFilters]);\n  const handleSelection = (_, selection) => {\n    if (isTechDocsSearchResult(selection)) {\n      const { location } = selection.document;\n      navigate(location);\n    }\n  };\n  return /* @__PURE__ */ React.createElement(Paper, {\n    className: classes.bar,\n    variant: \"outlined\"\n  }, /* @__PURE__ */ React.createElement(SearchAutocomplete, {\n    classes: { root: classes.root },\n    \"data-testid\": \"techdocs-search-bar\",\n    size: \"small\",\n    open,\n    getOptionLabel: () => \"\",\n    filterOptions: (x) => {\n      return x;\n    },\n    onClose: () => {\n      setOpen(false);\n    },\n    onFocus: () => {\n      setOpen(true);\n    },\n    onChange: handleSelection,\n    blurOnSelect: true,\n    noOptionsText: \"No results found\",\n    value: null,\n    options,\n    renderOption: ({ document, highlight }) => /* @__PURE__ */ React.createElement(TechDocsSearchResultListItem, {\n      result: document,\n      lineClamp: 3,\n      asListItem: false,\n      asLink: false,\n      title: document.title,\n      highlight\n    }),\n    loading,\n    inputDebounceTime: debounceTime,\n    inputPlaceholder: `Search ${entityTitle || entityId.name} docs`,\n    freeSolo: false\n  }));\n};\nconst TechDocsSearch = (props) => {\n  const initialState = {\n    term: \"\",\n    types: [\"techdocs\"],\n    pageCursor: \"\",\n    filters: props.entityId\n  };\n  return /* @__PURE__ */ React.createElement(SearchContextProvider, {\n    initialState\n  }, /* @__PURE__ */ React.createElement(TechDocsSearchBar, {\n    ...props\n  }));\n};\n\nconst useDrawerStyles = makeStyles(\n  (theme) => createStyles({\n    paper: {\n      width: \"100%\",\n      [theme.breakpoints.up(\"sm\")]: {\n        width: \"75%\"\n      },\n      [theme.breakpoints.up(\"md\")]: {\n        width: \"50%\"\n      },\n      padding: theme.spacing(2.5)\n    },\n    root: {\n      height: \"100%\",\n      overflow: \"hidden\"\n    },\n    logs: {\n      background: theme.palette.background.default\n    }\n  })\n);\nconst TechDocsBuildLogsDrawerContent = ({\n  buildLog,\n  onClose\n}) => {\n  const classes = useDrawerStyles();\n  const logText = buildLog.length === 0 ? \"Waiting for logs...\" : buildLog.join(\"\\n\");\n  return /* @__PURE__ */ React.createElement(Grid, {\n    container: true,\n    direction: \"column\",\n    className: classes.root,\n    spacing: 0,\n    wrap: \"nowrap\"\n  }, /* @__PURE__ */ React.createElement(Grid, {\n    item: true,\n    container: true,\n    justifyContent: \"space-between\",\n    alignItems: \"center\",\n    spacing: 0,\n    wrap: \"nowrap\"\n  }, /* @__PURE__ */ React.createElement(Typography, {\n    variant: \"h5\"\n  }, \"Build Details\"), /* @__PURE__ */ React.createElement(IconButton, {\n    key: \"dismiss\",\n    title: \"Close the drawer\",\n    onClick: onClose,\n    color: \"inherit\"\n  }, /* @__PURE__ */ React.createElement(Close, null))), /* @__PURE__ */ React.createElement(LogViewer, {\n    text: logText,\n    classes: { root: classes.logs }\n  }));\n};\nconst TechDocsBuildLogs = ({ buildLog }) => {\n  const classes = useDrawerStyles();\n  const [open, setOpen] = useState(false);\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(Button, {\n    color: \"inherit\",\n    onClick: () => setOpen(true)\n  }, \"Show Build Logs\"), /* @__PURE__ */ React.createElement(Drawer, {\n    classes: { paper: classes.paper },\n    anchor: \"right\",\n    open,\n    onClose: () => setOpen(false)\n  }, /* @__PURE__ */ React.createElement(TechDocsBuildLogsDrawerContent, {\n    buildLog,\n    onClose: () => setOpen(false)\n  })));\n};\n\nconst TechDocsNotFound = ({ errorMessage }) => {\n  const techdocsBuilder = useApi(configApiRef).getOptionalString(\"techdocs.builder\");\n  let additionalInfo = \"\";\n  if (techdocsBuilder !== \"local\") {\n    additionalInfo = \"Note that techdocs.builder is not set to 'local' in your config, which means this Backstage app will not generate docs if they are not found. Make sure the project's docs are generated and published by some external process (e.g. CI/CD pipeline). Or change techdocs.builder to 'local' to generate docs from this Backstage instance.\";\n  }\n  return /* @__PURE__ */ React.createElement(ErrorPage, {\n    status: \"404\",\n    statusMessage: errorMessage || \"Documentation not found\",\n    additionalInfo\n  });\n};\n\nconst useStyles$2 = makeStyles((theme) => ({\n  root: {\n    marginBottom: theme.spacing(2)\n  },\n  message: {\n    wordBreak: \"break-word\",\n    overflowWrap: \"anywhere\"\n  }\n}));\nconst TechDocsStateIndicator = () => {\n  let StateAlert = null;\n  const classes = useStyles$2();\n  const {\n    state,\n    contentReload,\n    contentErrorMessage,\n    syncErrorMessage,\n    buildLog\n  } = useTechDocsReader();\n  if (state === \"INITIAL_BUILD\") {\n    StateAlert = /* @__PURE__ */ React.createElement(Alert, {\n      classes: { root: classes.root },\n      variant: \"outlined\",\n      severity: \"info\",\n      icon: /* @__PURE__ */ React.createElement(CircularProgress, {\n        size: \"24px\"\n      }),\n      action: /* @__PURE__ */ React.createElement(TechDocsBuildLogs, {\n        buildLog\n      })\n    }, \"Documentation is accessed for the first time and is being prepared. The subsequent loads are much faster.\");\n  }\n  if (state === \"CONTENT_STALE_REFRESHING\") {\n    StateAlert = /* @__PURE__ */ React.createElement(Alert, {\n      variant: \"outlined\",\n      severity: \"info\",\n      icon: /* @__PURE__ */ React.createElement(CircularProgress, {\n        size: \"24px\"\n      }),\n      action: /* @__PURE__ */ React.createElement(TechDocsBuildLogs, {\n        buildLog\n      }),\n      classes: { root: classes.root }\n    }, \"A newer version of this documentation is being prepared and will be available shortly.\");\n  }\n  if (state === \"CONTENT_STALE_READY\") {\n    StateAlert = /* @__PURE__ */ React.createElement(Alert, {\n      variant: \"outlined\",\n      severity: \"success\",\n      action: /* @__PURE__ */ React.createElement(Button, {\n        color: \"inherit\",\n        onClick: () => contentReload()\n      }, \"Refresh\"),\n      classes: { root: classes.root }\n    }, \"A newer version of this documentation is now available, please refresh to view.\");\n  }\n  if (state === \"CONTENT_STALE_ERROR\") {\n    StateAlert = /* @__PURE__ */ React.createElement(Alert, {\n      variant: \"outlined\",\n      severity: \"error\",\n      action: /* @__PURE__ */ React.createElement(TechDocsBuildLogs, {\n        buildLog\n      }),\n      classes: { root: classes.root, message: classes.message }\n    }, \"Building a newer version of this documentation failed.\", \" \", syncErrorMessage);\n  }\n  if (state === \"CONTENT_NOT_FOUND\") {\n    StateAlert = /* @__PURE__ */ React.createElement(React.Fragment, null, syncErrorMessage && /* @__PURE__ */ React.createElement(Alert, {\n      variant: \"outlined\",\n      severity: \"error\",\n      action: /* @__PURE__ */ React.createElement(TechDocsBuildLogs, {\n        buildLog\n      }),\n      classes: { root: classes.root, message: classes.message }\n    }, \"Building a newer version of this documentation failed.\", \" \", syncErrorMessage), /* @__PURE__ */ React.createElement(TechDocsNotFound, {\n      errorMessage: contentErrorMessage\n    }));\n  }\n  return StateAlert;\n};\n\nconst MKDOCS_CSS = /main\\.[A-Fa-f0-9]{8}\\.min\\.css$/;\nconst GOOGLE_FONTS = /^https:\\/\\/fonts\\.googleapis\\.com/;\nconst GSTATIC_FONTS = /^https:\\/\\/fonts\\.gstatic\\.com/;\nconst isLink = (node) => node.nodeName === \"LINK\";\nconst isSafe$1 = (node) => {\n  const href = (node == null ? void 0 : node.getAttribute(\"href\")) || \"\";\n  const isMkdocsCss = href.match(MKDOCS_CSS);\n  const isGoogleFonts = href.match(GOOGLE_FONTS);\n  const isGstaticFonts = href.match(GSTATIC_FONTS);\n  return isMkdocsCss || isGoogleFonts || isGstaticFonts;\n};\nconst removeUnsafeLinks = (node) => {\n  if (isLink(node) && !isSafe$1(node)) {\n    node.remove();\n  }\n  return node;\n};\n\nconst isIframe = (node) => node.nodeName === \"IFRAME\";\nconst isSafe = (node, hosts) => {\n  const src = node.getAttribute(\"src\") || \"\";\n  try {\n    const { host } = new URL(src);\n    return hosts.includes(host);\n  } catch {\n    return false;\n  }\n};\nconst removeUnsafeIframes = (hosts) => (node) => {\n  if (isIframe(node) && !isSafe(node, hosts)) {\n    node.remove();\n  }\n  return node;\n};\n\nconst useSanitizerConfig = () => {\n  const configApi = useApi(configApiRef);\n  return useMemo(() => {\n    return configApi.getOptionalConfig(\"techdocs.sanitizer\");\n  }, [configApi]);\n};\nconst useSanitizerTransformer = () => {\n  const config = useSanitizerConfig();\n  return useCallback(\n    async (dom) => {\n      const hosts = config == null ? void 0 : config.getOptionalStringArray(\"allowedIframeHosts\");\n      DOMPurify.addHook(\"beforeSanitizeElements\", removeUnsafeLinks);\n      const tags = [\"link\"];\n      if (hosts) {\n        tags.push(\"iframe\");\n        DOMPurify.addHook(\"beforeSanitizeElements\", removeUnsafeIframes(hosts));\n      }\n      return DOMPurify.sanitize(dom.innerHTML, {\n        ADD_TAGS: tags,\n        FORBID_TAGS: [\"style\"],\n        WHOLE_DOCUMENT: true,\n        RETURN_DOM: true\n      });\n    },\n    [config]\n  );\n};\n\nvar variables = ({ theme }) => `\n/*==================  Variables  ==================*/\n/*\n  As the MkDocs output is rendered in shadow DOM, the CSS variable definitions on the root selector are not applied. Instead, they have to be applied on :host.\n  As there is no way to transform the served main*.css yet (for example in the backend), we have to copy from main*.css and modify them.\n*/\n\n:host {\n  /* FONT */\n  --md-default-fg-color: ${theme.palette.text.primary};\n  --md-default-fg-color--light: ${theme.palette.text.secondary};\n  --md-default-fg-color--lighter: ${lighten(theme.palette.text.secondary, 0.7)};\n  --md-default-fg-color--lightest: ${lighten(\n  theme.palette.text.secondary,\n  0.3\n)};\n\n  /* BACKGROUND */\n  --md-default-bg-color:${theme.palette.background.default};\n  --md-default-bg-color--light: ${theme.palette.background.paper};\n  --md-default-bg-color--lighter: ${lighten(\n  theme.palette.background.paper,\n  0.7\n)};\n  --md-default-bg-color--lightest: ${lighten(\n  theme.palette.background.paper,\n  0.3\n)};\n\n  /* PRIMARY */\n  --md-primary-fg-color: ${theme.palette.primary.main};\n  --md-primary-fg-color--light: ${theme.palette.primary.light};\n  --md-primary-fg-color--dark: ${theme.palette.primary.dark};\n  --md-primary-bg-color: ${theme.palette.primary.contrastText};\n  --md-primary-bg-color--light: ${lighten(\n  theme.palette.primary.contrastText,\n  0.7\n)};\n\n  /* ACCENT */\n  --md-accent-fg-color: var(--md-primary-fg-color);\n\n  /* SHADOW */\n  --md-shadow-z1: ${theme.shadows[1]};\n  --md-shadow-z2: ${theme.shadows[2]};\n  --md-shadow-z3: ${theme.shadows[3]};\n\n  /* EXTENSIONS */\n  --md-admonition-fg-color: var(--md-default-fg-color);\n  --md-admonition-bg-color: var(--md-default-bg-color);\n  /* Admonitions and others are using SVG masks to define icons. These masks are defined as CSS variables. */\n  --md-admonition-icon--note: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z\"/></svg>');\n  --md-admonition-icon--abstract: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M4 5h16v2H4V5m0 4h16v2H4V9m0 4h16v2H4v-2m0 4h10v2H4v-2z\"/></svg>');\n  --md-admonition-icon--info: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M13 9h-2V7h2m0 10h-2v-6h2m-1-9A10 10 0 002 12a10 10 0 0010 10 10 10 0 0010-10A10 10 0 0012 2z\"/></svg>');\n  --md-admonition-icon--tip: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M17.55 11.2c-.23-.3-.5-.56-.76-.82-.65-.6-1.4-1.03-2.03-1.66C13.3 7.26 13 4.85 13.91 3c-.91.23-1.75.75-2.45 1.32-2.54 2.08-3.54 5.75-2.34 8.9.04.1.08.2.08.33 0 .22-.15.42-.35.5-.22.1-.46.04-.64-.12a.83.83 0 01-.15-.17c-1.1-1.43-1.28-3.48-.53-5.12C5.89 10 5 12.3 5.14 14.47c.04.5.1 1 .27 1.5.14.6.4 1.2.72 1.73 1.04 1.73 2.87 2.97 4.84 3.22 2.1.27 4.35-.12 5.96-1.6 1.8-1.66 2.45-4.32 1.5-6.6l-.13-.26c-.2-.46-.47-.87-.8-1.25l.05-.01m-3.1 6.3c-.28.24-.73.5-1.08.6-1.1.4-2.2-.16-2.87-.82 1.19-.28 1.89-1.16 2.09-2.05.17-.8-.14-1.46-.27-2.23-.12-.74-.1-1.37.18-2.06.17.38.37.76.6 1.06.76 1 1.95 1.44 2.2 2.8.04.14.06.28.06.43.03.82-.32 1.72-.92 2.27h.01z\"/></svg>');\n  --md-admonition-icon--success: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10 10-4.5 10-10S17.5 2 12 2m-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z\"/></svg>');\n  --md-admonition-icon--question: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M15.07 11.25l-.9.92C13.45 12.89 13 13.5 13 15h-2v-.5c0-1.11.45-2.11 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41a2 2 0 00-2-2 2 2 0 00-2 2H8a4 4 0 014-4 4 4 0 014 4 3.2 3.2 0 01-.93 2.25M13 19h-2v-2h2M12 2A10 10 0 002 12a10 10 0 0010 10 10 10 0 0010-10c0-5.53-4.5-10-10-10z\"/></svg>');\n  --md-admonition-icon--warning: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M13 14h-2v-4h2m0 8h-2v-2h2M1 21h22L12 2 1 21z\"/></svg>');\n  --md-admonition-icon--failure: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M12 2c5.53 0 10 4.47 10 10s-4.47 10-10 10S2 17.53 2 12 6.47 2 12 2m3.59 5L12 10.59 8.41 7 7 8.41 10.59 12 7 15.59 8.41 17 12 13.41 15.59 17 17 15.59 13.41 12 17 8.41 15.59 7z\"/></svg>');\n  --md-admonition-icon--danger: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M11.5 20l4.86-9.73H13V4l-5 9.73h3.5V20M12 2c2.75 0 5.1 1 7.05 2.95C21 6.9 22 9.25 22 12s-1 5.1-2.95 7.05C17.1 21 14.75 22 12 22s-5.1-1-7.05-2.95C3 17.1 2 14.75 2 12s1-5.1 2.95-7.05C6.9 3 9.25 2 12 2z\"/></svg>');\n  --md-admonition-icon--bug: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M14 12h-4v-2h4m0 6h-4v-2h4m6-6h-2.81a5.985 5.985 0 00-1.82-1.96L17 4.41 15.59 3l-2.17 2.17a6.002 6.002 0 00-2.83 0L8.41 3 7 4.41l1.62 1.63C7.88 6.55 7.26 7.22 6.81 8H4v2h2.09c-.05.33-.09.66-.09 1v1H4v2h2v1c0 .34.04.67.09 1H4v2h2.81c1.04 1.79 2.97 3 5.19 3s4.15-1.21 5.19-3H20v-2h-2.09c.05-.33.09-.66.09-1v-1h2v-2h-2v-1c0-.34-.04-.67-.09-1H20V8z\"/></svg>');\n  --md-admonition-icon--example: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M7 13v-2h14v2H7m0 6v-2h14v2H7M7 7V5h14v2H7M3 8V5H2V4h2v4H3m-1 9v-1h3v4H2v-1h2v-.5H3v-1h1V17H2m2.25-7a.75.75 0 01.75.75c0 .2-.08.39-.21.52L3.12 13H5v1H2v-.92L4 11H2v-1h2.25z\"/></svg>');\n  --md-admonition-icon--quote: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M14 17h3l2-4V7h-6v6h3M6 17h3l2-4V7H5v6h3l-2 4z\"/></svg>');\n  --md-footnotes-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M19 7v4H5.83l3.58-3.59L8 6l-6 6 6 6 1.41-1.42L5.83 13H21V7h-2z\"/></svg>');\n  --md-details-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M8.59 16.58 13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z\"/></svg>');\n  --md-tasklist-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M0 0h24v24H0z\" fill=\"none\"/><path d=\"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z\"/></svg>');\n  --md-tasklist-icon--checked: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M0 0h24v24H0z\" fill=\"none\"/><path d=\"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z\"/></svg>');\n  --md-nav-icon--prev: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z\"/></svg>');\n  --md-nav-icon--next: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M8.59 16.58 13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z\"/></svg>');\n  --md-toc-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M3 9h14V7H3v2m0 4h14v-2H3v2m0 4h14v-2H3v2m16 0h2v-2h-2v2m0-10v2h2V7h-2m0 6h2v-2h-2v2z\"/></svg>');\n  --md-clipboard-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M19 21H8V7h11m0-2H8a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h11a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2m-3-4H4a2 2 0 0 0-2 2v14h2V3h12V1z\"/></svg>');\n  --md-search-result-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h7c-.41-.25-.8-.56-1.14-.9-.33-.33-.61-.7-.86-1.1H6V4h7v5h5v1.18c.71.16 1.39.43 2 .82V8l-6-6m6.31 16.9c1.33-2.11.69-4.9-1.4-6.22-2.11-1.33-4.91-.68-6.22 1.4-1.34 2.11-.69 4.89 1.4 6.22 1.46.93 3.32.93 4.79.02L22 23.39 23.39 22l-3.08-3.1m-3.81.1a2.5 2.5 0 0 1-2.5-2.5 2.5 2.5 0 0 1 2.5-2.5 2.5 2.5 0 0 1 2.5 2.5 2.5 2.5 0 0 1-2.5 2.5z\"/></svg>');\n  --md-source-forks-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\"><path fill-rule=\"evenodd\" d=\"M5 3.25a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0zm0 2.122a2.25 2.25 0 1 0-1.5 0v.878A2.25 2.25 0 0 0 5.75 8.5h1.5v2.128a2.251 2.251 0 1 0 1.5 0V8.5h1.5a2.25 2.25 0 0 0 2.25-2.25v-.878a2.25 2.25 0 1 0-1.5 0v.878a.75.75 0 0 1-.75.75h-4.5A.75.75 0 0 1 5 6.25v-.878zm3.75 7.378a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0zm3-8.75a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5z\"/></svg>');\n  --md-source-repositories-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\"><path fill-rule=\"evenodd\" d=\"M2 2.5A2.5 2.5 0 0 1 4.5 0h8.75a.75.75 0 0 1 .75.75v12.5a.75.75 0 0 1-.75.75h-2.5a.75.75 0 1 1 0-1.5h1.75v-2h-8a1 1 0 0 0-.714 1.7.75.75 0 0 1-1.072 1.05A2.495 2.495 0 0 1 2 11.5v-9zm10.5-1V9h-8c-.356 0-.694.074-1 .208V2.5a1 1 0 0 1 1-1h8zM5 12.25v3.25a.25.25 0 0 0 .4.2l1.45-1.087a.25.25 0 0 1 .3 0L8.6 15.7a.25.25 0 0 0 .4-.2v-3.25a.25.25 0 0 0-.25-.25h-3.5a.25.25 0 0 0-.25.25z\"/></svg>');\n  --md-source-stars-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\"><path fill-rule=\"evenodd\" d=\"M8 .25a.75.75 0 0 1 .673.418l1.882 3.815 4.21.612a.75.75 0 0 1 .416 1.279l-3.046 2.97.719 4.192a.75.75 0 0 1-1.088.791L8 12.347l-3.766 1.98a.75.75 0 0 1-1.088-.79l.72-4.194L.818 6.374a.75.75 0 0 1 .416-1.28l4.21-.611L7.327.668A.75.75 0 0 1 8 .25zm0 2.445L6.615 5.5a.75.75 0 0 1-.564.41l-3.097.45 2.24 2.184a.75.75 0 0 1 .216.664l-.528 3.084 2.769-1.456a.75.75 0 0 1 .698 0l2.77 1.456-.53-3.084a.75.75 0 0 1 .216-.664l2.24-2.183-3.096-.45a.75.75 0 0 1-.564-.41L8 2.694v.001z\"/></svg>');\n  --md-source-version-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\"><path fill-rule=\"evenodd\" d=\"M2.5 7.775V2.75a.25.25 0 0 1 .25-.25h5.025a.25.25 0 0 1 .177.073l6.25 6.25a.25.25 0 0 1 0 .354l-5.025 5.025a.25.25 0 0 1-.354 0l-6.25-6.25a.25.25 0 0 1-.073-.177zm-1.5 0V2.75C1 1.784 1.784 1 2.75 1h5.025c.464 0 .91.184 1.238.513l6.25 6.25a1.75 1.75 0 0 1 0 2.474l-5.026 5.026a1.75 1.75 0 0 1-2.474 0l-6.25-6.25A1.75 1.75 0 0 1 1 7.775zM6 5a1 1 0 1 0 0 2 1 1 0 0 0 0-2z\"/></svg>');\n  --md-version-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 320 512\"><!--! Font Awesome Free 6.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d=\"m310.6 246.6-127.1 128c-7.1 6.3-15.3 9.4-23.5 9.4s-16.38-3.125-22.63-9.375l-127.1-128C.224 237.5-2.516 223.7 2.438 211.8S19.07 192 32 192h255.1c12.94 0 24.62 7.781 29.58 19.75s3.12 25.75-6.08 34.85z\"/></svg>');\n}\n\n:host > * {\n  /* CODE */\n  --md-code-fg-color: ${theme.palette.text.primary};\n  --md-code-bg-color: ${theme.palette.background.paper};\n  --md-code-hl-color: ${alpha(theme.palette.warning.main, 0.5)};\n  --md-code-hl-keyword-color: ${theme.palette.type === \"dark\" ? theme.palette.primary.light : theme.palette.primary.dark};\n  --md-code-hl-function-color: ${theme.palette.type === \"dark\" ? theme.palette.secondary.light : theme.palette.secondary.dark};\n  --md-code-hl-string-color: ${theme.palette.type === \"dark\" ? theme.palette.success.light : theme.palette.success.dark};\n  --md-code-hl-number-color: ${theme.palette.type === \"dark\" ? theme.palette.error.light : theme.palette.error.dark};\n  --md-code-hl-constant-color: var(--md-code-hl-function-color);\n  --md-code-hl-special-color: var(--md-code-hl-function-color);\n  --md-code-hl-name-color: var(--md-code-fg-color);\n  --md-code-hl-comment-color: var(--md-default-fg-color--light);\n  --md-code-hl-generic-color: var(--md-default-fg-color--light);\n  --md-code-hl-variable-color: var(--md-default-fg-color--light);\n  --md-code-hl-operator-color: var(--md-default-fg-color--light);\n  --md-code-hl-punctuation-color: var(--md-default-fg-color--light);\n\n  /* TYPESET */\n  --md-typeset-font-size: 1rem;\n  --md-typeset-color: var(--md-default-fg-color);\n  --md-typeset-a-color: var(--md-accent-fg-color);\n  --md-typeset-table-color: ${theme.palette.text.primary};\n  --md-typeset-del-color: ${theme.palette.type === \"dark\" ? alpha(theme.palette.error.dark, 0.5) : alpha(theme.palette.error.light, 0.5)};\n  --md-typeset-ins-color: ${theme.palette.type === \"dark\" ? alpha(theme.palette.success.dark, 0.5) : alpha(theme.palette.success.light, 0.5)};\n  --md-typeset-mark-color: ${theme.palette.type === \"dark\" ? alpha(theme.palette.warning.dark, 0.5) : alpha(theme.palette.warning.light, 0.5)};\n}\n\n@media screen and (max-width: 76.1875em) {\n  :host > * {\n    /* TYPESET */\n    --md-typeset-font-size: .9rem;\n  }\n}\n\n@media screen and (max-width: 600px) {\n  :host > * {\n    /* TYPESET */\n    --md-typeset-font-size: .7rem;\n  }\n}\n`;\n\nvar reset = ({ theme }) => `\n/*==================  Reset  ==================*/\n\nbody {\n  --md-text-color: var(--md-default-fg-color);\n  --md-text-link-color: var(--md-accent-fg-color);\n  --md-text-font-family: ${theme.typography.fontFamily};\n  font-family: var(--md-text-font-family);\n  background-color: unset;\n}\n`;\n\nconst SIDEBAR_WIDTH = \"224px\";\nvar layout = ({ theme, sidebar }) => `\n/*==================  Layout  ==================*/\n\n.md-grid {\n  max-width: 100%;\n  margin: 0;\n}\n\n.md-nav {\n  font-size: calc(var(--md-typeset-font-size) * 0.9);\n}\n.md-nav__link {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n}\n.md-nav__icon {\n  height: 20px !important;\n  width: 20px !important;\n  margin-left:${theme.spacing(1)}px;\n}\n.md-nav__icon svg {\n  margin: 0;\n  width: 20px !important;\n  height: 20px !important;\n}\n.md-nav__icon:after {\n  width: 20px !important;\n  height: 20px !important;\n}\n\n.md-nav__item--active > .md-nav__link, a.md-nav__link--active {\n  text-decoration: underline;\n  color: var(--md-typeset-a-color);\n}\n\n.md-main__inner {\n  margin-top: 0;\n}\n\n.md-sidebar {\n  bottom: 75px;\n  position: fixed;\n  width: 16rem;\n  overflow-y: auto;\n  overflow-x: hidden;\n  scrollbar-color: rgb(193, 193, 193) #eee;\n  scrollbar-width: thin;\n}\n.md-sidebar .md-sidebar__scrollwrap {\n  width: calc(12.1rem);\n}\n.md-sidebar--secondary {\n  right: ${theme.spacing(3)}px;\n}\n.md-sidebar::-webkit-scrollbar {\n  width: 5px;\n}\n.md-sidebar::-webkit-scrollbar-button {\n  width: 5px;\n  height: 5px;\n}\n.md-sidebar::-webkit-scrollbar-track {\n  background: #eee;\n  border: 1 px solid rgb(250, 250, 250);\n  box-shadow: 0px 0px 3px #dfdfdf inset;\n  border-radius: 3px;\n}\n.md-sidebar::-webkit-scrollbar-thumb {\n  width: 5px;\n  background: rgb(193, 193, 193);\n  border: transparent;\n  border-radius: 3px;\n}\n.md-sidebar::-webkit-scrollbar-thumb:hover {\n  background: rgb(125, 125, 125);\n}\n\n.md-content {\n  max-width: calc(100% - 16rem * 2);\n  margin-left: 16rem;\n  margin-bottom: 50px;\n}\n\n.md-footer {\n  position: fixed;\n  bottom: 0px;\n}\n.md-footer__title {\n  background-color: unset;\n}\n.md-footer-nav__link {\n  width: 16rem;\n}\n\n.md-dialog {\n  background-color: unset;\n}\n\n@media screen and (min-width: 76.25em) {\n  .md-sidebar {\n    height: auto;\n  }\n}\n\n@media screen and (max-width: 76.1875em) {\n  .md-nav {\n    transition: none !important;\n    background-color: var(--md-default-bg-color)\n  }\n  .md-nav--primary .md-nav__title {\n    cursor: auto;\n    color: var(--md-default-fg-color);\n    font-weight: 700;\n    white-space: normal;\n    line-height: 1rem;\n    height: auto;\n    display: flex;\n    flex-flow: column;\n    row-gap: 1.6rem;\n    padding: 1.2rem .8rem .8rem;\n    background-color: var(--md-default-bg-color);\n  }\n  .md-nav--primary .md-nav__title~.md-nav__list {\n    box-shadow: none;\n  }\n  .md-nav--primary .md-nav__title ~ .md-nav__list > :first-child {\n    border-top: none;\n  }\n  .md-nav--primary .md-nav__title .md-nav__button {\n    display: none;\n  }\n  .md-nav--primary .md-nav__title .md-nav__icon {\n    color: var(--md-default-fg-color);\n    position: static;\n    height: auto;\n    margin: 0 0 0 -0.2rem;\n  }\n  .md-nav--primary > .md-nav__title [for=\"none\"] {\n    padding-top: 0;\n  }\n  .md-nav--primary .md-nav__item {\n    border-top: none;\n  }\n  .md-nav--primary :is(.md-nav__title,.md-nav__item) {\n    font-size : var(--md-typeset-font-size);\n  }\n  .md-nav .md-source {\n    display: none;\n  }\n\n  .md-sidebar {\n    height: 100%;\n  }\n  .md-sidebar--primary {\n    width: 12.1rem !important;\n    z-index: 200;\n    left: ${sidebar.isPinned ? `calc(-12.1rem + ${SIDEBAR_WIDTH})` : \"calc(-12.1rem + 72px)\"} !important;\n  }\n  .md-sidebar--secondary:not([hidden]) {\n    display: none;\n  }\n\n  .md-content {\n    max-width: 100%;\n    margin-left: 0;\n  }\n\n  .md-header__button {\n    margin: 0.4rem 0;\n    margin-left: 0.4rem;\n    padding: 0;\n  }\n\n  .md-overlay {\n    left: 0;\n  }\n\n  .md-footer {\n    position: static;\n    padding-left: 0;\n  }\n  .md-footer-nav__link {\n    /* footer links begin to overlap at small sizes without setting width */\n    width: 50%;\n  }\n}\n\n@media screen and (max-width: 600px) {\n  .md-sidebar--primary {\n    left: -12.1rem !important;\n    width: 12.1rem;\n  }\n}\n`;\n\nconst headings = [\"h1\", \"h2\", \"h3\", \"h4\", \"h5\", \"h6\"];\nvar typeset = ({ theme }) => `\n/*==================  Typeset  ==================*/\n\n.md-typeset {\n  font-size: var(--md-typeset-font-size);\n}\n\n${headings.reduce((style, heading) => {\n  var _a;\n  const htmlFontSize = (_a = theme.typography.htmlFontSize) != null ? _a : 16;\n  const styles = theme.typography[heading];\n  const { lineHeight, fontFamily, fontWeight, fontSize } = styles;\n  const calculate = (value) => {\n    let factor = 1;\n    if (typeof value === \"number\") {\n      factor = value / htmlFontSize * 0.6;\n    }\n    if (typeof value === \"string\") {\n      factor = value.replace(\"rem\", \"\");\n    }\n    return `calc(${factor} * var(--md-typeset-font-size))`;\n  };\n  return style.concat(`\n    .md-typeset ${heading} {\n      color: var(--md-default-fg-color);\n      line-height: ${lineHeight};\n      font-family: ${fontFamily};\n      font-weight: ${fontWeight};\n      font-size: ${calculate(fontSize)};\n    }\n  `);\n}, \"\")}\n\n.md-typeset .md-content__button {\n  color: var(--md-default-fg-color);\n}\n\n.md-typeset hr {\n  border-bottom: 0.05rem dotted ${theme.palette.divider};\n}\n\n.md-typeset details {\n  font-size: var(--md-typeset-font-size) !important;\n}\n.md-typeset details summary {\n  padding-left: 2.5rem !important;\n}\n.md-typeset details summary:before,\n.md-typeset details summary:after {\n  top: 50% !important;\n  width: 20px !important;\n  height: 20px !important;\n  transform: rotate(0deg) translateY(-50%) !important;\n}\n.md-typeset details[open] > summary:after {\n  transform: rotate(90deg) translateX(-50%) !important;\n}\n\n.md-typeset blockquote {\n  color: var(--md-default-fg-color--light);\n  border-left: 0.2rem solid var(--md-default-fg-color--light);\n}\n\n.md-typeset table:not([class]) {\n  font-size: var(--md-typeset-font-size);\n  border: 1px solid var(--md-default-fg-color);\n  border-bottom: none;\n  border-collapse: collapse;\n}\n.md-typeset table:not([class]) th {\n  font-weight: bold;\n}\n.md-typeset table:not([class]) td, .md-typeset table:not([class]) th {\n  border-bottom: 1px solid var(--md-default-fg-color);\n}\n\n.md-typeset pre > code::-webkit-scrollbar-thumb {\n  background-color: hsla(0, 0%, 0%, 0.32);\n}\n.md-typeset pre > code::-webkit-scrollbar-thumb:hover {\n  background-color: hsla(0, 0%, 0%, 0.87);\n}\n`;\n\nvar animations = () => `\n/*==================  Animations  ==================*/\n/*\n  Disable CSS animations on link colors as they lead to issues in dark mode.\n  The dark mode color theme is applied later and theirfore there is always an animation from light to dark mode when navigation between pages.\n*/\n.md-dialog, .md-nav__link, .md-footer__link, .md-typeset a, .md-typeset a::before, .md-typeset .headerlink {\n  transition: none;\n}\n`;\n\nvar extensions = ({ theme }) => `\n/*==================  Extensions  ==================*/\n\n/* HIGHLIGHT */\n.highlight .md-clipboard:after {\n  content: unset;\n}\n\n.highlight .nx {\n  color: ${theme.palette.type === \"dark\" ? \"#ff53a3\" : \"#ec407a\"};\n}\n\n/* CODE HILITE */\n.codehilite .gd {\n  background-color: ${theme.palette.type === \"dark\" ? \"rgba(248,81,73,0.65)\" : \"#fdd\"};\n}\n\n.codehilite .gi {\n  background-color: ${theme.palette.type === \"dark\" ? \"rgba(46,160,67,0.65)\" : \"#dfd\"};\n}\n\n/* TABBED */\n.tabbed-set>input:nth-child(1):checked~.tabbed-labels>:nth-child(1),\n.tabbed-set>input:nth-child(2):checked~.tabbed-labels>:nth-child(2),\n.tabbed-set>input:nth-child(3):checked~.tabbed-labels>:nth-child(3),\n.tabbed-set>input:nth-child(4):checked~.tabbed-labels>:nth-child(4),\n.tabbed-set>input:nth-child(5):checked~.tabbed-labels>:nth-child(5),\n.tabbed-set>input:nth-child(6):checked~.tabbed-labels>:nth-child(6),\n.tabbed-set>input:nth-child(7):checked~.tabbed-labels>:nth-child(7),\n.tabbed-set>input:nth-child(8):checked~.tabbed-labels>:nth-child(8),\n.tabbed-set>input:nth-child(9):checked~.tabbed-labels>:nth-child(9),\n.tabbed-set>input:nth-child(10):checked~.tabbed-labels>:nth-child(10),\n.tabbed-set>input:nth-child(11):checked~.tabbed-labels>:nth-child(11),\n.tabbed-set>input:nth-child(12):checked~.tabbed-labels>:nth-child(12),\n.tabbed-set>input:nth-child(13):checked~.tabbed-labels>:nth-child(13),\n.tabbed-set>input:nth-child(14):checked~.tabbed-labels>:nth-child(14),\n.tabbed-set>input:nth-child(15):checked~.tabbed-labels>:nth-child(15),\n.tabbed-set>input:nth-child(16):checked~.tabbed-labels>:nth-child(16),\n.tabbed-set>input:nth-child(17):checked~.tabbed-labels>:nth-child(17),\n.tabbed-set>input:nth-child(18):checked~.tabbed-labels>:nth-child(18),\n.tabbed-set>input:nth-child(19):checked~.tabbed-labels>:nth-child(19),\n.tabbed-set>input:nth-child(20):checked~.tabbed-labels>:nth-child(20) {\n  color: var(--md-accent-fg-color);\n  border-color: var(--md-accent-fg-color);\n}\n\n/* TASK-LIST */\n.task-list-control .task-list-indicator::before {\n  background-color: ${theme.palette.action.disabledBackground};\n}\n.task-list-control [type=\"checkbox\"]:checked + .task-list-indicator:before {\n background-color: ${theme.palette.success.main};\n}\n\n/* ADMONITION */\n.admonition {\n  font-size: var(--md-typeset-font-size) !important;\n}\n.admonition .admonition-title {\n  padding-left: 2.5rem !important;\n}\n\n.admonition .admonition-title:before {\n  top: 50% !important;\n  width: 20px !important;\n  height: 20px !important;\n  transform: translateY(-50%) !important;\n}\n`;\n\nconst rules = [\n  variables,\n  reset,\n  layout,\n  typeset,\n  animations,\n  extensions\n];\n\nconst useSidebar = () => useSidebarPinState();\nconst useRuleStyles = () => {\n  const sidebar = useSidebar();\n  const theme = useTheme();\n  return useMemo(() => {\n    const options = { theme, sidebar };\n    return rules.reduce((styles, rule) => styles + rule(options), \"\");\n  }, [theme, sidebar]);\n};\nconst useStylesTransformer = () => {\n  const styles = useRuleStyles();\n  return useCallback(\n    (dom) => {\n      dom.getElementsByTagName(\"head\")[0].insertAdjacentHTML(\"beforeend\", `<style>${styles}</style>`);\n      return dom;\n    },\n    [styles]\n  );\n};\n\nconst isSvgNeedingInlining = (attrName, attrVal, apiOrigin) => {\n  const isSrcToSvg = attrName === \"src\" && attrVal.endsWith(\".svg\");\n  const isRelativeUrl = !attrVal.match(/^([a-z]*:)?\\/\\//i);\n  const pointsToOurBackend = attrVal.startsWith(apiOrigin);\n  return isSrcToSvg && (isRelativeUrl || pointsToOurBackend);\n};\nconst addBaseUrl = ({\n  techdocsStorageApi,\n  entityId,\n  path\n}) => {\n  return async (dom) => {\n    const apiOrigin = await techdocsStorageApi.getApiOrigin();\n    const updateDom = async (list, attributeName) => {\n      for (const elem of list) {\n        if (elem.hasAttribute(attributeName)) {\n          const elemAttribute = elem.getAttribute(attributeName);\n          if (!elemAttribute)\n            return;\n          const newValue = await techdocsStorageApi.getBaseUrl(\n            elemAttribute,\n            entityId,\n            path\n          );\n          if (isSvgNeedingInlining(attributeName, elemAttribute, apiOrigin)) {\n            try {\n              const svg = await fetch(newValue, { credentials: \"include\" });\n              const svgContent = await svg.text();\n              elem.setAttribute(\n                attributeName,\n                `data:image/svg+xml;base64,${btoa(\n                  unescape(encodeURIComponent(svgContent))\n                )}`\n              );\n            } catch (e) {\n              elem.setAttribute(\"alt\", `Error: ${elemAttribute}`);\n            }\n          } else {\n            elem.setAttribute(attributeName, newValue);\n          }\n        }\n      }\n    };\n    await Promise.all([\n      updateDom(dom.querySelectorAll(\"img\"), \"src\"),\n      updateDom(dom.querySelectorAll(\"script\"), \"src\"),\n      updateDom(dom.querySelectorAll(\"source\"), \"src\"),\n      updateDom(dom.querySelectorAll(\"link\"), \"href\"),\n      updateDom(dom.querySelectorAll(\"a[download]\"), \"href\")\n    ]);\n    return dom;\n  };\n};\n\nconst addGitFeedbackLink = (scmIntegrationsApi) => {\n  return (dom) => {\n    var _a;\n    const sourceAnchor = dom.querySelector(\n      '[title=\"Edit this page\"]'\n    );\n    if (!sourceAnchor || !sourceAnchor.href) {\n      return dom;\n    }\n    const sourceURL = new URL(sourceAnchor.href);\n    const integration = scmIntegrationsApi.byUrl(sourceURL);\n    if ((integration == null ? void 0 : integration.type) !== \"github\" && (integration == null ? void 0 : integration.type) !== \"gitlab\") {\n      return dom;\n    }\n    const title = ((_a = dom.querySelector(\"article>h1\")) == null ? void 0 : _a.childNodes[0].textContent) || \"\";\n    const issueTitle = encodeURIComponent(`Documentation Feedback: ${title}`);\n    const issueDesc = encodeURIComponent(\n      `Page source:\n${sourceAnchor.href}\n\nFeedback:`\n    );\n    const gitUrl = (integration == null ? void 0 : integration.type) === \"github\" ? replaceGitHubUrlType(sourceURL.href, \"blob\") : sourceURL.href;\n    const gitInfo = parseGitUrl(gitUrl);\n    const repoPath = `/${gitInfo.organization}/${gitInfo.name}`;\n    const feedbackLink = sourceAnchor.cloneNode();\n    switch (integration == null ? void 0 : integration.type) {\n      case \"gitlab\":\n        feedbackLink.href = `${sourceURL.origin}${repoPath}/issues/new?issue[title]=${issueTitle}&issue[description]=${issueDesc}`;\n        break;\n      case \"github\":\n        feedbackLink.href = `${sourceURL.origin}${repoPath}/issues/new?title=${issueTitle}&body=${issueDesc}`;\n        break;\n      default:\n        return dom;\n    }\n    ReactDOM.render(React.createElement(FeedbackOutlinedIcon), feedbackLink);\n    feedbackLink.style.paddingLeft = \"5px\";\n    feedbackLink.title = \"Leave feedback for this page\";\n    feedbackLink.id = \"git-feedback-link\";\n    sourceAnchor == null ? void 0 : sourceAnchor.insertAdjacentElement(\"beforebegin\", feedbackLink);\n    return dom;\n  };\n};\n\nconst addSidebarToggle = () => {\n  return (dom) => {\n    const mkdocsToggleSidebar = dom.querySelector(\n      '.md-header label[for=\"__drawer\"]'\n    );\n    const article = dom.querySelector(\"article\");\n    if (!mkdocsToggleSidebar || !article) {\n      return dom;\n    }\n    const toggleSidebar = mkdocsToggleSidebar.cloneNode();\n    ReactDOM.render(React.createElement(MenuIcon), toggleSidebar);\n    toggleSidebar.id = \"toggle-sidebar\";\n    toggleSidebar.title = \"Toggle Sidebar\";\n    toggleSidebar.classList.add(\"md-content__button\");\n    toggleSidebar.style.setProperty(\"padding\", \"0 0 0 5px\");\n    toggleSidebar.style.setProperty(\"margin\", \"0.4rem 0 0.4rem 0.4rem\");\n    article == null ? void 0 : article.prepend(toggleSidebar);\n    return dom;\n  };\n};\n\nconst rewriteDocLinks = () => {\n  return (dom) => {\n    const updateDom = (list, attributeName) => {\n      Array.from(list).filter((elem) => elem.hasAttribute(attributeName)).forEach((elem) => {\n        const elemAttribute = elem.getAttribute(attributeName);\n        if (elemAttribute) {\n          if (elemAttribute.match(/^https?:\\/\\//i)) {\n            elem.setAttribute(\"target\", \"_blank\");\n          }\n          try {\n            const normalizedWindowLocation = normalizeUrl(\n              window.location.href\n            );\n            elem.setAttribute(\n              attributeName,\n              new URL(elemAttribute, normalizedWindowLocation).toString()\n            );\n          } catch (_e) {\n            elem.replaceWith(elem.textContent || elemAttribute);\n          }\n        }\n      });\n    };\n    updateDom(Array.from(dom.getElementsByTagName(\"a\")), \"href\");\n    return dom;\n  };\n};\nfunction normalizeUrl(input) {\n  const url = new URL(input);\n  if (!url.pathname.endsWith(\"/\") && !url.pathname.endsWith(\".html\")) {\n    url.pathname += \"/\";\n  }\n  return url.toString();\n}\n\nconst addLinkClickListener = ({\n  baseUrl,\n  onClick\n}) => {\n  return (dom) => {\n    Array.from(dom.getElementsByTagName(\"a\")).forEach((elem) => {\n      elem.addEventListener(\"click\", (e) => {\n        const target = elem;\n        const href = target.getAttribute(\"href\");\n        if (!href)\n          return;\n        if (href.startsWith(baseUrl) && !elem.hasAttribute(\"download\")) {\n          e.preventDefault();\n          onClick(e, href);\n        }\n      });\n    });\n    return dom;\n  };\n};\n\nconst CopyToClipboardTooltip = withStyles((theme) => ({\n  tooltip: {\n    fontSize: \"inherit\",\n    color: theme.palette.text.primary,\n    margin: 0,\n    padding: theme.spacing(0.5),\n    backgroundColor: \"transparent\",\n    boxShadow: \"none\"\n  }\n}))(Tooltip);\nconst CopyToClipboardIcon = () => /* @__PURE__ */ React.createElement(SvgIcon, null, /* @__PURE__ */ React.createElement(\"path\", {\n  d: \"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z\"\n}));\nconst CopyToClipboardButton = ({ text }) => {\n  const [open, setOpen] = useState(false);\n  const handleClick = useCallback(() => {\n    navigator.clipboard.writeText(text);\n    setOpen(true);\n  }, [text]);\n  const handleClose = useCallback(() => {\n    setOpen(false);\n  }, [setOpen]);\n  return /* @__PURE__ */ React.createElement(CopyToClipboardTooltip, {\n    title: \"Copied to clipboard\",\n    placement: \"left\",\n    open,\n    onClose: handleClose,\n    leaveDelay: 1e3\n  }, /* @__PURE__ */ React.createElement(\"button\", {\n    className: \"md-clipboard md-icon\",\n    onClick: handleClick\n  }, /* @__PURE__ */ React.createElement(CopyToClipboardIcon, null)));\n};\nconst copyToClipboard = (theme) => {\n  return (dom) => {\n    var _a;\n    const codes = dom.querySelectorAll(\"pre > code\");\n    for (const code of codes) {\n      const text = code.textContent || \"\";\n      const container = document.createElement(\"div\");\n      (_a = code == null ? void 0 : code.parentElement) == null ? void 0 : _a.prepend(container);\n      ReactDOM.render(\n        /* @__PURE__ */ React.createElement(ThemeProvider, {\n          theme\n        }, /* @__PURE__ */ React.createElement(CopyToClipboardButton, {\n          text\n        })),\n        container\n      );\n    }\n    return dom;\n  };\n};\n\nconst removeMkdocsHeader = () => {\n  return (dom) => {\n    var _a;\n    (_a = dom.querySelector(\".md-header\")) == null ? void 0 : _a.remove();\n    return dom;\n  };\n};\n\nconst simplifyMkdocsFooter = () => {\n  return (dom) => {\n    var _a, _b;\n    (_a = dom.querySelector(\".md-footer .md-copyright\")) == null ? void 0 : _a.remove();\n    (_b = dom.querySelector(\".md-footer-copyright\")) == null ? void 0 : _b.remove();\n    return dom;\n  };\n};\n\nconst onCssReady = ({\n  onLoading,\n  onLoaded\n}) => {\n  return (dom) => {\n    onLoading();\n    dom.addEventListener(\n      SHADOW_DOM_STYLE_LOAD_EVENT,\n      function handleShadowDomStyleLoad() {\n        onLoaded();\n        dom.removeEventListener(\n          SHADOW_DOM_STYLE_LOAD_EVENT,\n          handleShadowDomStyleLoad\n        );\n      }\n    );\n    return dom;\n  };\n};\n\nconst scrollIntoAnchor = () => {\n  return (dom) => {\n    setTimeout(() => {\n      var _a;\n      if (window.location.hash) {\n        const hash = window.location.hash.slice(1);\n        (_a = dom == null ? void 0 : dom.querySelector(`[id=\"${hash}\"]`)) == null ? void 0 : _a.scrollIntoView();\n      }\n    }, 200);\n    return dom;\n  };\n};\n\nconst scrollIntoNavigation = () => {\n  return (dom) => {\n    setTimeout(() => {\n      const activeNavItems = dom == null ? void 0 : dom.querySelectorAll(`li.md-nav__item--active`);\n      if (activeNavItems.length !== 0) {\n        activeNavItems.forEach((activeNavItem) => {\n          const checkbox = activeNavItem == null ? void 0 : activeNavItem.querySelector(\"input\");\n          if (!(checkbox == null ? void 0 : checkbox.checked)) {\n            checkbox == null ? void 0 : checkbox.click();\n          }\n        });\n        const lastItem = activeNavItems[activeNavItems.length - 1];\n        lastItem.scrollIntoView();\n      }\n    }, 200);\n    return dom;\n  };\n};\n\nconst transform = async (html, transformers) => {\n  let dom;\n  if (typeof html === \"string\") {\n    dom = new DOMParser().parseFromString(html, \"text/html\").documentElement;\n  } else if (html instanceof Element) {\n    dom = html;\n  } else {\n    throw new Error(\"dom is not a recognized type\");\n  }\n  for (const transformer of transformers) {\n    dom = await transformer(dom);\n  }\n  return dom;\n};\n\nconst MOBILE_MEDIA_QUERY = \"screen and (max-width: 76.1875em)\";\nconst useTechDocsReaderDom = (entityRef) => {\n  const navigate = useNavigate$1();\n  const theme = useTheme();\n  const isMobileMedia = useMediaQuery(MOBILE_MEDIA_QUERY);\n  const sanitizerTransformer = useSanitizerTransformer();\n  const stylesTransformer = useStylesTransformer();\n  const techdocsStorageApi = useApi(techdocsStorageApiRef$1);\n  const scmIntegrationsApi = useApi(scmIntegrationsApiRef);\n  const { state, path, content: rawPage } = useTechDocsReader();\n  const [dom, setDom] = useState(null);\n  const isStyleLoading = useShadowDomStylesLoading(dom);\n  const updateSidebarPosition = useCallback(() => {\n    if (!dom)\n      return;\n    const sidebars = dom.querySelectorAll(\".md-sidebar\");\n    sidebars.forEach((element) => {\n      var _a, _b, _c;\n      if (isMobileMedia) {\n        element.style.top = \"0px\";\n      } else {\n        const page = document == null ? void 0 : document.querySelector(\".techdocs-reader-page\");\n        const pageTop = (_a = page == null ? void 0 : page.getBoundingClientRect().top) != null ? _a : 0;\n        let domTop = (_b = dom.getBoundingClientRect().top) != null ? _b : 0;\n        const tabs = dom.querySelector(\".md-container > .md-tabs\");\n        const tabsHeight = (_c = tabs == null ? void 0 : tabs.getBoundingClientRect().height) != null ? _c : 0;\n        if (domTop < pageTop) {\n          domTop = pageTop;\n        }\n        element.style.top = `${Math.max(domTop, 0) + tabsHeight}px`;\n      }\n      element.style.setProperty(\"opacity\", \"1\");\n    });\n  }, [dom, isMobileMedia]);\n  useEffect(() => {\n    window.addEventListener(\"resize\", updateSidebarPosition);\n    window.addEventListener(\"scroll\", updateSidebarPosition, true);\n    return () => {\n      window.removeEventListener(\"resize\", updateSidebarPosition);\n      window.removeEventListener(\"scroll\", updateSidebarPosition, true);\n    };\n  }, [dom, updateSidebarPosition]);\n  const updateFooterWidth = useCallback(() => {\n    if (!dom)\n      return;\n    const footer = dom.querySelector(\".md-footer\");\n    if (footer) {\n      footer.style.width = `${dom.getBoundingClientRect().width}px`;\n    }\n  }, [dom]);\n  useEffect(() => {\n    window.addEventListener(\"resize\", updateFooterWidth);\n    return () => {\n      window.removeEventListener(\"resize\", updateFooterWidth);\n    };\n  }, [dom, updateFooterWidth]);\n  useEffect(() => {\n    if (!isStyleLoading) {\n      updateFooterWidth();\n      updateSidebarPosition();\n    }\n  }, [state, isStyleLoading, updateFooterWidth, updateSidebarPosition]);\n  const preRender = useCallback(\n    (rawContent, contentPath) => transform(rawContent, [\n      sanitizerTransformer,\n      addBaseUrl({\n        techdocsStorageApi,\n        entityId: entityRef,\n        path: contentPath\n      }),\n      rewriteDocLinks(),\n      addSidebarToggle(),\n      removeMkdocsHeader(),\n      simplifyMkdocsFooter(),\n      addGitFeedbackLink(scmIntegrationsApi),\n      stylesTransformer\n    ]),\n    [\n      entityRef,\n      scmIntegrationsApi,\n      techdocsStorageApi,\n      sanitizerTransformer,\n      stylesTransformer\n    ]\n  );\n  const postRender = useCallback(\n    async (transformedElement) => transform(transformedElement, [\n      scrollIntoAnchor(),\n      scrollIntoNavigation(),\n      copyToClipboard(theme),\n      addLinkClickListener({\n        baseUrl: window.location.origin,\n        onClick: (event, url) => {\n          var _a;\n          const modifierActive = event.ctrlKey || event.metaKey;\n          const parsedUrl = new URL(url);\n          if (parsedUrl.hash) {\n            if (modifierActive) {\n              window.open(`${parsedUrl.pathname}${parsedUrl.hash}`, \"_blank\");\n            } else {\n              navigate(`${parsedUrl.pathname}${parsedUrl.hash}`);\n              (_a = transformedElement == null ? void 0 : transformedElement.querySelector(`[id=\"${parsedUrl.hash.slice(1)}\"]`)) == null ? void 0 : _a.scrollIntoView();\n            }\n          } else {\n            if (modifierActive) {\n              window.open(parsedUrl.pathname, \"_blank\");\n            } else {\n              navigate(parsedUrl.pathname);\n            }\n          }\n        }\n      }),\n      onCssReady({\n        onLoading: () => {\n        },\n        onLoaded: () => {\n          var _a;\n          (_a = transformedElement.querySelector(\".md-nav__title\")) == null ? void 0 : _a.removeAttribute(\"for\");\n        }\n      }),\n      onCssReady({\n        onLoading: () => {\n          const sidebars = Array.from(\n            transformedElement.querySelectorAll(\".md-sidebar\")\n          );\n          sidebars.forEach((element) => {\n            element.style.setProperty(\"opacity\", \"0\");\n          });\n        },\n        onLoaded: () => {\n        }\n      })\n    ]),\n    [theme, navigate]\n  );\n  useEffect(() => {\n    if (!rawPage)\n      return () => {\n      };\n    let shouldReplaceContent = true;\n    preRender(rawPage, path).then(async (preTransformedDomElement) => {\n      if (!(preTransformedDomElement == null ? void 0 : preTransformedDomElement.innerHTML)) {\n        return;\n      }\n      if (!shouldReplaceContent) {\n        return;\n      }\n      window.scroll({ top: 0 });\n      const postTransformedDomElement = await postRender(\n        preTransformedDomElement\n      );\n      setDom(postTransformedDomElement);\n    });\n    return () => {\n      shouldReplaceContent = false;\n    };\n  }, [rawPage, path, preRender, postRender]);\n  return dom;\n};\n\nconst TechDocsReaderPageContentAddons = () => {\n  const addons = useTechDocsAddons();\n  const { shadowRoot } = useTechDocsReaderPage();\n  const contentElement = shadowRoot == null ? void 0 : shadowRoot.querySelector(\n    '[data-md-component=\"content\"]'\n  );\n  const primarySidebarElement = shadowRoot == null ? void 0 : shadowRoot.querySelector(\n    'div[data-md-component=\"sidebar\"][data-md-type=\"navigation\"], div[data-md-component=\"navigation\"]'\n  );\n  let primarySidebarAddonLocation = primarySidebarElement == null ? void 0 : primarySidebarElement.querySelector(\n    '[data-techdocs-addons-location=\"primary sidebar\"]'\n  );\n  if (!primarySidebarAddonLocation) {\n    primarySidebarAddonLocation = document.createElement(\"div\");\n    primarySidebarAddonLocation.setAttribute(\n      \"data-techdocs-addons-location\",\n      \"primary sidebar\"\n    );\n    primarySidebarElement == null ? void 0 : primarySidebarElement.prepend(primarySidebarAddonLocation);\n  }\n  const secondarySidebarElement = shadowRoot == null ? void 0 : shadowRoot.querySelector(\n    'div[data-md-component=\"sidebar\"][data-md-type=\"toc\"], div[data-md-component=\"toc\"]'\n  );\n  let secondarySidebarAddonLocation = secondarySidebarElement == null ? void 0 : secondarySidebarElement.querySelector(\n    '[data-techdocs-addons-location=\"secondary sidebar\"]'\n  );\n  if (!secondarySidebarAddonLocation) {\n    secondarySidebarAddonLocation = document.createElement(\"div\");\n    secondarySidebarAddonLocation.setAttribute(\n      \"data-techdocs-addons-location\",\n      \"secondary sidebar\"\n    );\n    secondarySidebarElement == null ? void 0 : secondarySidebarElement.prepend(secondarySidebarAddonLocation);\n  }\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(Portal, {\n    container: primarySidebarAddonLocation\n  }, addons.renderComponentsByLocation(TechDocsAddonLocations.PrimarySidebar)), /* @__PURE__ */ React.createElement(Portal, {\n    container: contentElement\n  }, addons.renderComponentsByLocation(TechDocsAddonLocations.Content)), /* @__PURE__ */ React.createElement(Portal, {\n    container: secondarySidebarAddonLocation\n  }, addons.renderComponentsByLocation(TechDocsAddonLocations.SecondarySidebar)));\n};\n\nconst useStyles$1 = makeStyles({\n  search: {\n    width: \"100%\",\n    \"@media (min-width: 76.1875em)\": {\n      width: \"calc(100% - 34.4rem)\",\n      margin: \"0 auto\"\n    }\n  }\n});\nconst TechDocsReaderPageContent = withTechDocsReaderProvider(\n  (props) => {\n    var _a;\n    const { withSearch = true, onReady } = props;\n    const classes = useStyles$1();\n    const {\n      entityMetadata: { value: entityMetadata, loading: entityMetadataLoading },\n      entityRef,\n      setShadowRoot\n    } = useTechDocsReaderPage();\n    const dom = useTechDocsReaderDom(entityRef);\n    const handleAppend = useCallback(\n      (newShadowRoot) => {\n        setShadowRoot(newShadowRoot);\n        if (onReady instanceof Function) {\n          onReady();\n        }\n      },\n      [setShadowRoot, onReady]\n    );\n    if (entityMetadataLoading === false && !entityMetadata)\n      return /* @__PURE__ */ React.createElement(ErrorPage, {\n        status: \"404\",\n        statusMessage: \"PAGE NOT FOUND\"\n      });\n    if (!dom) {\n      return /* @__PURE__ */ React.createElement(Content, null, /* @__PURE__ */ React.createElement(Grid, {\n        container: true\n      }, /* @__PURE__ */ React.createElement(Grid, {\n        xs: 12,\n        item: true\n      }, /* @__PURE__ */ React.createElement(TechDocsStateIndicator, null))));\n    }\n    return /* @__PURE__ */ React.createElement(Content, null, /* @__PURE__ */ React.createElement(Grid, {\n      container: true\n    }, /* @__PURE__ */ React.createElement(Grid, {\n      xs: 12,\n      item: true\n    }, /* @__PURE__ */ React.createElement(TechDocsStateIndicator, null)), withSearch && /* @__PURE__ */ React.createElement(Grid, {\n      className: classes.search,\n      xs: \"auto\",\n      item: true\n    }, /* @__PURE__ */ React.createElement(TechDocsSearch, {\n      entityId: entityRef,\n      entityTitle: (_a = entityMetadata == null ? void 0 : entityMetadata.metadata) == null ? void 0 : _a.title\n    })), /* @__PURE__ */ React.createElement(Grid, {\n      xs: 12,\n      item: true\n    }, /* @__PURE__ */ React.createElement(TechDocsShadowDom, {\n      element: dom,\n      onAppend: handleAppend\n    }, /* @__PURE__ */ React.createElement(TechDocsReaderPageContentAddons, null)))));\n  }\n);\nconst Reader = TechDocsReaderPageContent;\n\nconst rootRouteRef = createRouteRef({\n  id: \"techdocs:index-page\"\n});\nconst rootDocsRouteRef = createRouteRef({\n  id: \"techdocs:reader-page\",\n  params: [\"namespace\", \"kind\", \"name\"]\n});\nconst rootCatalogDocsRouteRef = createRouteRef({\n  id: \"techdocs:catalog-reader-view\"\n});\n\nconst skeleton = /* @__PURE__ */ React.createElement(Skeleton, {\n  animation: \"wave\",\n  variant: \"text\",\n  height: 40\n});\nconst TechDocsReaderPageHeader = (props) => {\n  const { children } = props;\n  const addons = useTechDocsAddons();\n  const configApi = useApi(configApiRef);\n  const {\n    title,\n    setTitle,\n    subtitle,\n    setSubtitle,\n    entityRef,\n    metadata: { value: metadata, loading: metadataLoading },\n    entityMetadata: { value: entityMetadata, loading: entityMetadataLoading }\n  } = useTechDocsReaderPage();\n  useEffect(() => {\n    if (!metadata)\n      return;\n    setTitle(metadata.site_name);\n    setSubtitle(() => {\n      let { site_description } = metadata;\n      if (!site_description || site_description === \"None\") {\n        site_description = \"Home\";\n      }\n      return site_description;\n    });\n  }, [metadata, setTitle, setSubtitle]);\n  const appTitle = configApi.getOptional(\"app.title\") || \"Backstage\";\n  const tabTitle = [title, subtitle, appTitle].filter(Boolean).join(\" | \");\n  const { locationMetadata, spec } = entityMetadata || {};\n  const lifecycle = spec == null ? void 0 : spec.lifecycle;\n  const ownedByRelations = entityMetadata ? getEntityRelations(entityMetadata, RELATION_OWNED_BY) : [];\n  const docsRootLink = useRouteRef(rootRouteRef)();\n  const labels = /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(HeaderLabel, {\n    label: \"Component\",\n    value: /* @__PURE__ */ React.createElement(EntityRefLink, {\n      color: \"inherit\",\n      entityRef,\n      title: entityMetadata == null ? void 0 : entityMetadata.metadata.title,\n      defaultKind: \"Component\"\n    })\n  }), ownedByRelations.length > 0 && /* @__PURE__ */ React.createElement(HeaderLabel, {\n    label: \"Owner\",\n    value: /* @__PURE__ */ React.createElement(EntityRefLinks, {\n      color: \"inherit\",\n      entityRefs: ownedByRelations,\n      defaultKind: \"group\"\n    })\n  }), lifecycle ? /* @__PURE__ */ React.createElement(HeaderLabel, {\n    label: \"Lifecycle\",\n    value: lifecycle\n  }) : null, locationMetadata && locationMetadata.type !== \"dir\" && locationMetadata.type !== \"file\" ? /* @__PURE__ */ React.createElement(HeaderLabel, {\n    label: \"\",\n    value: /* @__PURE__ */ React.createElement(\"a\", {\n      href: locationMetadata.target,\n      target: \"_blank\",\n      rel: \"noopener noreferrer\"\n    }, /* @__PURE__ */ React.createElement(CodeIcon, {\n      style: { marginTop: \"-25px\", fill: \"#fff\" }\n    }))\n  }) : null);\n  const noEntMetadata = !entityMetadataLoading && entityMetadata === void 0;\n  const noTdMetadata = !metadataLoading && metadata === void 0;\n  if (noEntMetadata || noTdMetadata)\n    return null;\n  return /* @__PURE__ */ React.createElement(Header, {\n    type: \"Documentation\",\n    typeLink: docsRootLink,\n    title: title || skeleton,\n    subtitle: subtitle || skeleton\n  }, /* @__PURE__ */ React.createElement(Helmet, {\n    titleTemplate: \"%s\"\n  }, /* @__PURE__ */ React.createElement(\"title\", null, tabTitle)), labels, children, addons.renderComponentsByLocation(TechDocsAddonLocations.Header));\n};\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    gridArea: \"pageSubheader\",\n    flexDirection: \"column\",\n    minHeight: \"auto\",\n    padding: theme.spacing(3, 3, 0)\n  }\n}));\nconst TechDocsReaderPageSubheader = (props) => {\n  const classes = useStyles();\n  const [anchorEl, setAnchorEl] = useState(null);\n  const handleClick = useCallback((event) => {\n    setAnchorEl(event.currentTarget);\n  }, []);\n  const handleClose = useCallback(() => {\n    setAnchorEl(null);\n  }, []);\n  const {\n    entityMetadata: { value: entityMetadata, loading: entityMetadataLoading }\n  } = useTechDocsReaderPage();\n  const addons = useTechDocsAddons();\n  const subheaderAddons = addons.renderComponentsByLocation(\n    TechDocsAddonLocations.Subheader\n  );\n  const settingsAddons = addons.renderComponentsByLocation(TechDocsAddonLocations.Settings);\n  if (!subheaderAddons && !settingsAddons)\n    return null;\n  if (entityMetadataLoading === false && !entityMetadata)\n    return null;\n  return /* @__PURE__ */ React.createElement(Toolbar, {\n    classes,\n    ...props.toolbarProps\n  }, /* @__PURE__ */ React.createElement(Box, {\n    display: \"flex\",\n    justifyContent: \"flex-end\",\n    width: \"100%\",\n    flexWrap: \"wrap\"\n  }, subheaderAddons, settingsAddons ? /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(Tooltip, {\n    title: \"Settings\"\n  }, /* @__PURE__ */ React.createElement(IconButton, {\n    \"aria-controls\": \"tech-docs-reader-page-settings\",\n    \"aria-haspopup\": \"true\",\n    onClick: handleClick\n  }, /* @__PURE__ */ React.createElement(SettingsIcon, null))), /* @__PURE__ */ React.createElement(Menu, {\n    id: \"tech-docs-reader-page-settings\",\n    getContentAnchorEl: null,\n    anchorEl,\n    anchorOrigin: { vertical: \"bottom\", horizontal: \"right\" },\n    open: Boolean(anchorEl),\n    onClose: handleClose,\n    keepMounted: true\n  }, settingsAddons)) : null));\n};\n\nconst TechDocsReaderLayout = ({\n  withSearch,\n  withHeader = true\n}) => {\n  return /* @__PURE__ */ React.createElement(Page, {\n    themeId: \"documentation\"\n  }, withHeader && /* @__PURE__ */ React.createElement(TechDocsReaderPageHeader, null), /* @__PURE__ */ React.createElement(TechDocsReaderPageSubheader, null), /* @__PURE__ */ React.createElement(TechDocsReaderPageContent, {\n    withSearch\n  }));\n};\nconst TechDocsReaderPage$1 = (props) => {\n  const { kind, name, namespace } = useRouteRefParams(rootDocsRouteRef);\n  const { children, entityRef = { kind, name, namespace } } = props;\n  const outlet = useOutlet();\n  if (!children) {\n    const childrenList = outlet ? Children.toArray(outlet.props.children) : [];\n    const page = childrenList.find((child) => {\n      var _a;\n      if (getComponentData(child, TECHDOCS_ADDONS_WRAPPER_KEY)) {\n        return false;\n      }\n      const nestedChildren = (_a = child == null ? void 0 : child.props) == null ? void 0 : _a.children;\n      if (nestedChildren) {\n        return !Children.toArray(nestedChildren).some(\n          (nested) => getComponentData(nested, TECHDOCS_ADDONS_WRAPPER_KEY)\n        );\n      }\n      return true;\n    });\n    return /* @__PURE__ */ React.createElement(TechDocsReaderPageProvider, {\n      entityRef\n    }, page || /* @__PURE__ */ React.createElement(TechDocsReaderLayout, null));\n  }\n  return /* @__PURE__ */ React.createElement(TechDocsReaderPageProvider, {\n    entityRef\n  }, ({ metadata, entityMetadata, onReady }) => /* @__PURE__ */ React.createElement(\"div\", {\n    className: \"techdocs-reader-page\"\n  }, /* @__PURE__ */ React.createElement(Page, {\n    themeId: \"documentation\"\n  }, children instanceof Function ? children({\n    entityRef,\n    techdocsMetadataValue: metadata.value,\n    entityMetadataValue: entityMetadata.value,\n    onReady\n  }) : children)));\n};\n\nfunction toLowerMaybe(str, config) {\n  return config.getOptionalBoolean(\n    \"techdocs.legacyUseCaseSensitiveTripletPaths\"\n  ) ? str : str.toLocaleLowerCase(\"en-US\");\n}\n\nconst DocsCardGrid = (props) => {\n  const { entities } = props;\n  const getRouteToReaderPageFor = useRouteRef(rootDocsRouteRef);\n  const config = useApi(configApiRef);\n  if (!entities)\n    return null;\n  return /* @__PURE__ */ React.createElement(ItemCardGrid, {\n    \"data-testid\": \"docs-explore\"\n  }, !(entities == null ? void 0 : entities.length) ? null : entities.map((entity, index) => {\n    var _a, _b;\n    return /* @__PURE__ */ React.createElement(Card, {\n      key: index\n    }, /* @__PURE__ */ React.createElement(CardMedia, null, /* @__PURE__ */ React.createElement(ItemCardHeader, {\n      title: (_a = entity.metadata.title) != null ? _a : entity.metadata.name\n    })), /* @__PURE__ */ React.createElement(CardContent, null, entity.metadata.description), /* @__PURE__ */ React.createElement(CardActions, null, /* @__PURE__ */ React.createElement(Button$1, {\n      to: getRouteToReaderPageFor({\n        namespace: toLowerMaybe(\n          (_b = entity.metadata.namespace) != null ? _b : \"default\",\n          config\n        ),\n        kind: toLowerMaybe(entity.kind, config),\n        name: toLowerMaybe(entity.metadata.name, config)\n      }),\n      color: \"primary\",\n      \"data-testid\": \"read_docs\"\n    }, \"Read Docs\")));\n  }));\n};\n\nconst EntityListDocsGrid = () => {\n  const { loading, error, entities } = useEntityList();\n  if (error) {\n    return /* @__PURE__ */ React.createElement(WarningPanel, {\n      severity: \"error\",\n      title: \"Could not load available documentation.\"\n    }, /* @__PURE__ */ React.createElement(CodeSnippet, {\n      language: \"text\",\n      text: error.toString()\n    }));\n  }\n  if (loading || !entities) {\n    return /* @__PURE__ */ React.createElement(Progress, null);\n  }\n  entities.sort(\n    (a, b) => {\n      var _a, _b;\n      return ((_a = a.metadata.title) != null ? _a : a.metadata.name).localeCompare(\n        (_b = b.metadata.title) != null ? _b : b.metadata.name\n      );\n    }\n  );\n  return /* @__PURE__ */ React.createElement(DocsCardGrid, {\n    entities\n  });\n};\n\nconst YellowStar = withStyles$1({\n  root: {\n    color: \"#f3ba37\"\n  }\n})(Star);\nconst actionFactories = {\n  createCopyDocsUrlAction(copyToClipboard) {\n    return (row) => {\n      return {\n        icon: () => /* @__PURE__ */ React.createElement(ShareIcon, {\n          fontSize: \"small\"\n        }),\n        tooltip: \"Click to copy documentation link to clipboard\",\n        onClick: () => copyToClipboard(`${window.location.origin}${row.resolved.docsUrl}`)\n      };\n    };\n  },\n  createStarEntityAction(isStarredEntity, toggleStarredEntity) {\n    return ({ entity }) => {\n      const isStarred = isStarredEntity(entity);\n      return {\n        cellStyle: { paddingLeft: \"1em\" },\n        icon: () => isStarred ? /* @__PURE__ */ React.createElement(YellowStar, null) : /* @__PURE__ */ React.createElement(StarBorder, null),\n        tooltip: isStarred ? \"Remove from favorites\" : \"Add to favorites\",\n        onClick: () => toggleStarredEntity(entity)\n      };\n    };\n  }\n};\n\nfunction customTitle(entity) {\n  return entity.metadata.title || entity.metadata.name;\n}\nconst columnFactories = {\n  createNameColumn() {\n    return {\n      title: \"Document\",\n      field: \"entity.metadata.name\",\n      highlight: true,\n      render: (row) => /* @__PURE__ */ React.createElement(SubvalueCell, {\n        value: /* @__PURE__ */ React.createElement(Link, {\n          to: row.resolved.docsUrl\n        }, customTitle(row.entity)),\n        subvalue: row.entity.metadata.description\n      })\n    };\n  },\n  createOwnerColumn() {\n    return {\n      title: \"Owner\",\n      field: \"resolved.ownedByRelationsTitle\",\n      render: ({ resolved }) => /* @__PURE__ */ React.createElement(EntityRefLinks, {\n        entityRefs: resolved.ownedByRelations,\n        defaultKind: \"group\"\n      })\n    };\n  },\n  createTypeColumn() {\n    return {\n      title: \"Type\",\n      field: \"entity.spec.type\"\n    };\n  }\n};\n\nconst DocsTable = (props) => {\n  const { entities, title, loading, columns, actions } = props;\n  const [, copyToClipboard] = useCopyToClipboard();\n  const getRouteToReaderPageFor = useRouteRef(rootDocsRouteRef);\n  const config = useApi(configApiRef);\n  if (!entities)\n    return null;\n  const documents = entities.map((entity) => {\n    var _a;\n    const ownedByRelations = getEntityRelations(entity, RELATION_OWNED_BY);\n    return {\n      entity,\n      resolved: {\n        docsUrl: getRouteToReaderPageFor({\n          namespace: toLowerMaybe(\n            (_a = entity.metadata.namespace) != null ? _a : \"default\",\n            config\n          ),\n          kind: toLowerMaybe(entity.kind, config),\n          name: toLowerMaybe(entity.metadata.name, config)\n        }),\n        ownedByRelations,\n        ownedByRelationsTitle: ownedByRelations.map((r) => humanizeEntityRef(r, { defaultKind: \"group\" })).join(\", \")\n      }\n    };\n  });\n  const defaultColumns = [\n    columnFactories.createNameColumn(),\n    columnFactories.createOwnerColumn(),\n    columnFactories.createTypeColumn()\n  ];\n  const defaultActions = [\n    actionFactories.createCopyDocsUrlAction(copyToClipboard)\n  ];\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, loading || documents && documents.length > 0 ? /* @__PURE__ */ React.createElement(Table, {\n    isLoading: loading,\n    options: {\n      paging: true,\n      pageSize: 20,\n      search: true,\n      actionsColumnIndex: -1\n    },\n    data: documents,\n    columns: columns || defaultColumns,\n    actions: actions || defaultActions,\n    title: title ? `${title} (${documents.length})` : `All (${documents.length})`\n  }) : /* @__PURE__ */ React.createElement(EmptyState, {\n    missing: \"data\",\n    title: \"No documents to show\",\n    description: \"Create your own document. Check out our Getting Started Information\",\n    action: /* @__PURE__ */ React.createElement(Button$1, {\n      color: \"primary\",\n      to: \"https://backstage.io/docs/features/techdocs/getting-started\",\n      variant: \"contained\"\n    }, \"DOCS\")\n  }));\n};\nDocsTable.columns = columnFactories;\nDocsTable.actions = actionFactories;\n\nconst EntityListDocsTable = (props) => {\n  var _a, _b;\n  const { columns, actions } = props;\n  const { loading, error, entities, filters } = useEntityList();\n  const { isStarredEntity, toggleStarredEntity } = useStarredEntities();\n  const [, copyToClipboard] = useCopyToClipboard();\n  const title = capitalize((_b = (_a = filters.user) == null ? void 0 : _a.value) != null ? _b : \"all\");\n  const defaultActions = [\n    actionFactories.createCopyDocsUrlAction(copyToClipboard),\n    actionFactories.createStarEntityAction(\n      isStarredEntity,\n      toggleStarredEntity\n    )\n  ];\n  if (error) {\n    return /* @__PURE__ */ React.createElement(WarningPanel, {\n      severity: \"error\",\n      title: \"Could not load available documentation.\"\n    }, /* @__PURE__ */ React.createElement(CodeSnippet, {\n      language: \"text\",\n      text: error.toString()\n    }));\n  }\n  return /* @__PURE__ */ React.createElement(DocsTable, {\n    title,\n    entities,\n    loading,\n    actions: actions || defaultActions,\n    columns\n  });\n};\nEntityListDocsTable.columns = columnFactories;\nEntityListDocsTable.actions = actionFactories;\n\nconst TechDocsPageWrapper = (props) => {\n  var _a;\n  const { children } = props;\n  const configApi = useApi(configApiRef);\n  const generatedSubtitle = `Documentation available in ${(_a = configApi.getOptionalString(\"organization.name\")) != null ? _a : \"Backstage\"}`;\n  return /* @__PURE__ */ React.createElement(PageWithHeader, {\n    title: \"Documentation\",\n    subtitle: generatedSubtitle,\n    themeId: \"documentation\"\n  }, children);\n};\n\nclass TechDocsFilter {\n  getCatalogFilters() {\n    return {\n      \"metadata.annotations.backstage.io/techdocs-ref\": CATALOG_FILTER_EXISTS\n    };\n  }\n}\nconst TechDocsPicker = () => {\n  const { updateFilters } = useEntityList();\n  useEffect(() => {\n    updateFilters({\n      techdocs: new TechDocsFilter()\n    });\n  }, [updateFilters]);\n  return null;\n};\n\nconst DefaultTechDocsHome = (props) => {\n  const { initialFilter = \"owned\", columns, actions } = props;\n  return /* @__PURE__ */ React.createElement(TechDocsPageWrapper, null, /* @__PURE__ */ React.createElement(Content, null, /* @__PURE__ */ React.createElement(ContentHeader, {\n    title: \"\"\n  }, /* @__PURE__ */ React.createElement(SupportButton, null, \"Discover documentation in your ecosystem.\")), /* @__PURE__ */ React.createElement(EntityListProvider, null, /* @__PURE__ */ React.createElement(CatalogFilterLayout, null, /* @__PURE__ */ React.createElement(CatalogFilterLayout.Filters, null, /* @__PURE__ */ React.createElement(TechDocsPicker, null), /* @__PURE__ */ React.createElement(UserListPicker, {\n    initialFilter\n  }), /* @__PURE__ */ React.createElement(EntityOwnerPicker, null), /* @__PURE__ */ React.createElement(EntityTagPicker, null)), /* @__PURE__ */ React.createElement(CatalogFilterLayout.Content, null, /* @__PURE__ */ React.createElement(EntityListDocsTable, {\n    actions,\n    columns\n  }))))));\n};\n\nconst techdocsPlugin = createPlugin({\n  id: \"techdocs\",\n  apis: [\n    createApiFactory({\n      api: techdocsStorageApiRef$1,\n      deps: {\n        configApi: configApiRef,\n        discoveryApi: discoveryApiRef,\n        identityApi: identityApiRef,\n        fetchApi: fetchApiRef\n      },\n      factory: ({ configApi, discoveryApi, identityApi, fetchApi }) => new TechDocsStorageClient({\n        configApi,\n        discoveryApi,\n        identityApi,\n        fetchApi\n      })\n    }),\n    createApiFactory({\n      api: techdocsApiRef$1,\n      deps: {\n        configApi: configApiRef,\n        discoveryApi: discoveryApiRef,\n        fetchApi: fetchApiRef\n      },\n      factory: ({ configApi, discoveryApi, fetchApi }) => new TechDocsClient({\n        configApi,\n        discoveryApi,\n        fetchApi\n      })\n    })\n  ],\n  routes: {\n    root: rootRouteRef,\n    docRoot: rootDocsRouteRef,\n    entityContent: rootCatalogDocsRouteRef\n  }\n});\nconst TechdocsPage = techdocsPlugin.provide(\n  createRoutableExtension({\n    name: \"TechdocsPage\",\n    component: () => Promise.resolve().then(function () { return Router$1; }).then((m) => m.Router),\n    mountPoint: rootRouteRef\n  })\n);\nconst EntityTechdocsContent = techdocsPlugin.provide(\n  createRoutableExtension({\n    name: \"EntityTechdocsContent\",\n    component: () => Promise.resolve().then(function () { return Router$1; }).then((m) => m.EmbeddedDocsRouter),\n    mountPoint: rootCatalogDocsRouteRef\n  })\n);\nconst TechDocsCustomHome = techdocsPlugin.provide(\n  createRoutableExtension({\n    name: \"TechDocsCustomHome\",\n    component: () => import('./TechDocsCustomHome-eccef158.esm.js').then(\n      (m) => m.TechDocsCustomHome\n    ),\n    mountPoint: rootRouteRef\n  })\n);\nconst TechDocsIndexPage$2 = techdocsPlugin.provide(\n  createRoutableExtension({\n    name: \"TechDocsIndexPage\",\n    component: () => Promise.resolve().then(function () { return TechDocsIndexPage$1; }).then(\n      (m) => m.TechDocsIndexPage\n    ),\n    mountPoint: rootRouteRef\n  })\n);\nconst TechDocsReaderPage = techdocsPlugin.provide(\n  createRoutableExtension({\n    name: \"TechDocsReaderPage\",\n    component: () => import('./index-b7cba14e.esm.js').then(\n      (m) => m.TechDocsReaderPage\n    ),\n    mountPoint: rootDocsRouteRef\n  })\n);\n\nconst EntityPageDocs = ({ entity }) => {\n  const entityRef = getCompoundEntityRef(entity);\n  return /* @__PURE__ */ React.createElement(TechDocsReaderPage, {\n    entityRef\n  }, /* @__PURE__ */ React.createElement(TechDocsReaderPageSubheader, null), /* @__PURE__ */ React.createElement(TechDocsReaderPageContent, {\n    withSearch: false\n  }));\n};\n\nconst TechDocsIndexPage = (props) => {\n  const outlet = useOutlet$1();\n  return outlet || /* @__PURE__ */ React.createElement(DefaultTechDocsHome, {\n    ...props\n  });\n};\n\nvar TechDocsIndexPage$1 = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  TechDocsIndexPage: TechDocsIndexPage\n});\n\nconst TECHDOCS_ANNOTATION = \"backstage.io/techdocs-ref\";\nconst isTechDocsAvailable = (entity) => {\n  var _a, _b;\n  return Boolean((_b = (_a = entity == null ? void 0 : entity.metadata) == null ? void 0 : _a.annotations) == null ? void 0 : _b[TECHDOCS_ANNOTATION]);\n};\nconst Router = () => {\n  return /* @__PURE__ */ React.createElement(Routes, null, /* @__PURE__ */ React.createElement(Route, {\n    path: \"/\",\n    element: /* @__PURE__ */ React.createElement(TechDocsIndexPage, null)\n  }), /* @__PURE__ */ React.createElement(Route, {\n    path: \"/:namespace/:kind/:name/*\",\n    element: /* @__PURE__ */ React.createElement(TechDocsReaderPage$1, null)\n  }));\n};\nconst EmbeddedDocsRouter = (props) => {\n  var _a;\n  const { children } = props;\n  const { entity } = useEntity();\n  const element = useRoutes([\n    {\n      path: \"/*\",\n      element: /* @__PURE__ */ React.createElement(EntityPageDocs, {\n        entity\n      }),\n      children: [\n        {\n          path: \"*\",\n          element: children\n        }\n      ]\n    }\n  ]);\n  const projectId = (_a = entity.metadata.annotations) == null ? void 0 : _a[TECHDOCS_ANNOTATION];\n  if (!projectId) {\n    return /* @__PURE__ */ React.createElement(MissingAnnotationEmptyState, {\n      annotation: TECHDOCS_ANNOTATION\n    });\n  }\n  return element;\n};\n\nvar Router$1 = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  isTechDocsAvailable: isTechDocsAvailable,\n  Router: Router,\n  EmbeddedDocsRouter: EmbeddedDocsRouter\n});\n\nexport { DocsTable as D, EntityTechdocsContent as E, Reader as R, TechDocsPageWrapper as T, DocsCardGrid as a, TechDocsReaderPage$1 as b, TechDocsReaderLayout as c, TechDocsCustomHome as d, TechDocsIndexPage$2 as e, TechdocsPage as f, TechDocsReaderPage as g, techdocsStorageApiRef as h, techdocsApiRef as i, TechDocsClient as j, TechDocsStorageClient as k, TechDocsReaderProvider as l, TechDocsReaderPageHeader as m, TechDocsReaderPageContent as n, TechDocsReaderPageSubheader as o, TechDocsSearchResultListItem as p, TechDocsSearch as q, EntityListDocsGrid as r, EntityListDocsTable as s, techdocsPlugin as t, DefaultTechDocsHome as u, TechDocsPicker as v, isTechDocsAvailable as w, Router as x, EmbeddedDocsRouter as y };\n//# sourceMappingURL=index-b9f615fb.esm.js.map\n","import { WebStorage } from '@backstage/core-app-api';\nimport { ResponseError } from '@backstage/errors';\nimport ObservableImpl from 'zen-observable';\nimport { createRouteRef, createPlugin, createRoutableExtension, useRouteRef, useApi, errorApiRef, SessionState, googleAuthApiRef, microsoftAuthApiRef, githubAuthApiRef, gitlabAuthApiRef, oktaAuthApiRef, bitbucketAuthApiRef, oneloginAuthApiRef, atlassianAuthApiRef, configApiRef, featureFlagsApiRef, FeatureFlagState, identityApiRef, alertApiRef, appThemeApiRef, attachComponentData, useElementFilter } from '@backstage/core-plugin-api';\nimport React, { useState, useEffect, useCallback, cloneElement } from 'react';\nimport SettingsIcon from '@material-ui/icons/Settings';\nimport { SidebarItem, EmptyState, CodeSnippet, sidebarConfig, InfoCard, useSidebarPinState, Page, Header, TabbedLayout } from '@backstage/core-components';\nimport { useOutlet } from 'react-router';\nimport { Typography, Button, makeStyles, Avatar, ListItem, ListItemIcon, ListItemText, Tooltip, Grid, ListItemSecondaryAction, List, Switch, TextField, IconButton, Menu, MenuItem } from '@material-ui/core';\nimport Star from '@material-ui/icons/Star';\nimport ClearIcon from '@material-ui/icons/Clear';\nimport useAsync from 'react-use/lib/useAsync';\nimport SignOutIcon from '@material-ui/icons/MeetingRoom';\nimport MoreVertIcon from '@material-ui/icons/MoreVert';\nimport useObservable from 'react-use/lib/useObservable';\nimport AutoIcon from '@material-ui/icons/BrightnessAuto';\nimport ToggleButton from '@material-ui/lab/ToggleButton';\nimport ToggleButtonGroup from '@material-ui/lab/ToggleButtonGroup';\nimport Chip from '@material-ui/core/Chip';\nimport Grid$1 from '@material-ui/core/Grid';\nimport Typography$1 from '@material-ui/core/Typography';\n\nconst JSON_HEADERS = {\n  \"Content-Type\": \"application/json; charset=utf-8\",\n  Accept: \"application/json\"\n};\nconst buckets = /* @__PURE__ */ new Map();\nclass UserSettingsStorage {\n  constructor(namespace, fetchApi, discoveryApi, errorApi, identityApi, fallback) {\n    this.namespace = namespace;\n    this.fetchApi = fetchApi;\n    this.discoveryApi = discoveryApi;\n    this.errorApi = errorApi;\n    this.identityApi = identityApi;\n    this.fallback = fallback;\n    this.subscribers = /* @__PURE__ */ new Set();\n    this.observables = /* @__PURE__ */ new Map();\n  }\n  static create(options) {\n    var _a;\n    return new UserSettingsStorage(\n      (_a = options.namespace) != null ? _a : \"default\",\n      options.fetchApi,\n      options.discoveryApi,\n      options.errorApi,\n      options.identityApi,\n      WebStorage.create({\n        namespace: options.namespace,\n        errorApi: options.errorApi\n      })\n    );\n  }\n  forBucket(name) {\n    const bucketPath = `${this.namespace}.${name}`;\n    if (!buckets.has(bucketPath)) {\n      buckets.set(\n        bucketPath,\n        new UserSettingsStorage(\n          bucketPath,\n          this.fetchApi,\n          this.discoveryApi,\n          this.errorApi,\n          this.identityApi,\n          this.fallback\n        )\n      );\n    }\n    return buckets.get(bucketPath);\n  }\n  async remove(key) {\n    const fetchUrl = await this.getFetchUrl(key);\n    const response = await this.fetchApi.fetch(fetchUrl, {\n      method: \"DELETE\"\n    });\n    if (!response.ok && response.status !== 404) {\n      throw await ResponseError.fromResponse(response);\n    }\n    this.notifyChanges({ key, presence: \"absent\" });\n  }\n  async set(key, data) {\n    if (!await this.isSignedIn()) {\n      await this.fallback.set(key, data);\n      this.notifyChanges({ key, presence: \"present\", value: data });\n      return;\n    }\n    const fetchUrl = await this.getFetchUrl(key);\n    const response = await this.fetchApi.fetch(fetchUrl, {\n      method: \"PUT\",\n      headers: JSON_HEADERS,\n      body: JSON.stringify({ value: data })\n    });\n    if (!response.ok) {\n      throw await ResponseError.fromResponse(response);\n    }\n    const { value } = await response.json();\n    this.notifyChanges({ key, value, presence: \"present\" });\n  }\n  observe$(key) {\n    if (!this.observables.has(key)) {\n      this.observables.set(\n        key,\n        new ObservableImpl((subscriber) => {\n          this.subscribers.add(subscriber);\n          Promise.resolve().then(() => this.get(key)).then((snapshot) => subscriber.next(snapshot)).catch((error) => this.errorApi.post(error));\n          return () => {\n            this.subscribers.delete(subscriber);\n          };\n        }).filter(({ key: messageKey }) => messageKey === key)\n      );\n    }\n    return this.observables.get(key);\n  }\n  snapshot(key) {\n    return { key, presence: \"unknown\" };\n  }\n  async get(key) {\n    if (!await this.isSignedIn()) {\n      return this.fallback.snapshot(key);\n    }\n    const fetchUrl = await this.getFetchUrl(key);\n    const response = await this.fetchApi.fetch(fetchUrl);\n    if (response.status === 404) {\n      return { key, presence: \"absent\" };\n    }\n    if (!response.ok) {\n      throw await ResponseError.fromResponse(response);\n    }\n    try {\n      const { value: rawValue } = await response.json();\n      const value = JSON.parse(JSON.stringify(rawValue), (_key, val) => {\n        if (typeof val === \"object\" && val !== null) {\n          Object.freeze(val);\n        }\n        return val;\n      });\n      return { key, presence: \"present\", value };\n    } catch {\n      return { key, presence: \"absent\" };\n    }\n  }\n  async getFetchUrl(key) {\n    const baseUrl = await this.discoveryApi.getBaseUrl(\"user-settings\");\n    const encodedNamespace = encodeURIComponent(this.namespace);\n    const encodedKey = encodeURIComponent(key);\n    return `${baseUrl}/buckets/${encodedNamespace}/keys/${encodedKey}`;\n  }\n  async notifyChanges(snapshot) {\n    for (const subscription of this.subscribers) {\n      try {\n        subscription.next(snapshot);\n      } catch {\n      }\n    }\n  }\n  async isSignedIn() {\n    try {\n      const credentials = await this.identityApi.getCredentials();\n      return (credentials == null ? void 0 : credentials.token) ? true : false;\n    } catch {\n      return false;\n    }\n  }\n}\n\nconst settingsRouteRef = createRouteRef({\n  id: \"user-settings\"\n});\nconst userSettingsPlugin = createPlugin({\n  id: \"user-settings\",\n  routes: {\n    settingsPage: settingsRouteRef\n  }\n});\nconst UserSettingsPage = userSettingsPlugin.provide(\n  createRoutableExtension({\n    name: \"UserSettingsPage\",\n    component: () => Promise.resolve().then(function () { return SettingsPage$1; }).then((m) => m.SettingsPage),\n    mountPoint: settingsRouteRef\n  })\n);\n\nconst Settings = (props) => {\n  const routePath = useRouteRef(settingsRouteRef);\n  const Icon = props.icon ? props.icon : SettingsIcon;\n  return /* @__PURE__ */ React.createElement(SidebarItem, {\n    text: \"Settings\",\n    to: routePath(),\n    icon: Icon\n  });\n};\n\nconst EXAMPLE$1 = `auth:\n  providers:\n    google:\n      development:\n        clientId: \\${AUTH_GOOGLE_CLIENT_ID}\n        clientSecret: \\${AUTH_GOOGLE_CLIENT_SECRET}\n`;\nconst EmptyProviders = () => /* @__PURE__ */ React.createElement(EmptyState, {\n  missing: \"content\",\n  title: \"No Authentication Providers\",\n  description: \"You can add Authentication Providers to Backstage which allows you to use these providers to authenticate yourself.\",\n  action: /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(Typography, {\n    variant: \"body1\"\n  }, \"Open \", /* @__PURE__ */ React.createElement(\"code\", null, \"app-config.yaml\"), \" and make the changes as highlighted below:\"), /* @__PURE__ */ React.createElement(CodeSnippet, {\n    text: EXAMPLE$1,\n    language: \"yaml\",\n    showLineNumbers: true,\n    highlightedNumbers: [3, 4, 5, 6, 7, 8],\n    customStyle: { background: \"inherit\", fontSize: \"115%\" }\n  }), /* @__PURE__ */ React.createElement(Button, {\n    variant: \"contained\",\n    color: \"primary\",\n    href: \"https://backstage.io/docs/auth/add-auth-provider\"\n  }, \"Read More\"))\n});\n\nconst useStyles$2 = makeStyles((theme) => ({\n  avatar: {\n    width: ({ size }) => size,\n    height: ({ size }) => size,\n    fontSize: ({ size }) => size * 0.7,\n    border: `1px solid ${theme.palette.textSubtle}`\n  }\n}));\nconst ProviderSettingsAvatar = ({ size, picture }) => {\n  const { iconSize } = sidebarConfig;\n  const classes = useStyles$2(size ? { size } : { size: iconSize });\n  return /* @__PURE__ */ React.createElement(Avatar, {\n    src: picture,\n    className: classes.avatar\n  });\n};\n\nconst ProviderSettingsItem = (props) => {\n  const { title, description, icon: Icon, apiRef } = props;\n  const api = useApi(apiRef);\n  const errorApi = useApi(errorApiRef);\n  const [signedIn, setSignedIn] = useState(false);\n  const emptyProfile = {};\n  const [profile, setProfile] = useState(emptyProfile);\n  useEffect(() => {\n    let didCancel = false;\n    const subscription = api.sessionState$().subscribe((sessionState) => {\n      if (!didCancel) {\n        api.getProfile({ optional: true }).then((profileResponse) => {\n          if (!didCancel) {\n            if (sessionState === SessionState.SignedIn) {\n              setSignedIn(true);\n            }\n            if (profileResponse) {\n              setProfile(profileResponse);\n            }\n          }\n        });\n      }\n    });\n    return () => {\n      didCancel = true;\n      subscription.unsubscribe();\n    };\n  }, [api]);\n  return /* @__PURE__ */ React.createElement(ListItem, null, /* @__PURE__ */ React.createElement(ListItemIcon, null, /* @__PURE__ */ React.createElement(Icon, null)), /* @__PURE__ */ React.createElement(ListItemText, {\n    primary: title,\n    secondary: /* @__PURE__ */ React.createElement(Tooltip, {\n      placement: \"top\",\n      arrow: true,\n      title: description\n    }, /* @__PURE__ */ React.createElement(\"span\", null, /* @__PURE__ */ React.createElement(Grid, {\n      container: true,\n      spacing: 6\n    }, /* @__PURE__ */ React.createElement(Grid, {\n      item: true\n    }, /* @__PURE__ */ React.createElement(ProviderSettingsAvatar, {\n      size: 48,\n      picture: profile.picture\n    })), /* @__PURE__ */ React.createElement(Grid, {\n      item: true,\n      xs: 12,\n      sm: true,\n      container: true\n    }, /* @__PURE__ */ React.createElement(Grid, {\n      item: true,\n      xs: true,\n      container: true,\n      direction: \"column\",\n      spacing: 2\n    }, /* @__PURE__ */ React.createElement(Grid, {\n      item: true,\n      xs: true\n    }, /* @__PURE__ */ React.createElement(Typography, {\n      variant: \"subtitle1\",\n      color: \"textPrimary\",\n      gutterBottom: true\n    }, profile.displayName), /* @__PURE__ */ React.createElement(Typography, {\n      variant: \"body2\",\n      color: \"textSecondary\"\n    }, profile.email), /* @__PURE__ */ React.createElement(Typography, {\n      variant: \"body2\",\n      color: \"textSecondary\"\n    }, description))))))),\n    secondaryTypographyProps: { noWrap: true, style: { width: \"80%\" } }\n  }), /* @__PURE__ */ React.createElement(ListItemSecondaryAction, null, /* @__PURE__ */ React.createElement(Tooltip, {\n    placement: \"top\",\n    arrow: true,\n    title: signedIn ? `Sign out from ${title}` : `Sign in to ${title}`\n  }, /* @__PURE__ */ React.createElement(Button, {\n    variant: \"outlined\",\n    color: \"primary\",\n    onClick: () => {\n      const action = signedIn ? api.signOut() : api.signIn();\n      action.catch((error) => errorApi.post(error));\n    }\n  }, signedIn ? `Sign out` : `Sign in`))));\n};\n\nconst DefaultProviderSettings = (props) => {\n  const { configuredProviders } = props;\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, configuredProviders.includes(\"google\") && /* @__PURE__ */ React.createElement(ProviderSettingsItem, {\n    title: \"Google\",\n    description: \"Provides authentication towards Google APIs and identities\",\n    apiRef: googleAuthApiRef,\n    icon: Star\n  }), configuredProviders.includes(\"microsoft\") && /* @__PURE__ */ React.createElement(ProviderSettingsItem, {\n    title: \"Microsoft\",\n    description: \"Provides authentication towards Microsoft APIs and identities\",\n    apiRef: microsoftAuthApiRef,\n    icon: Star\n  }), configuredProviders.includes(\"github\") && /* @__PURE__ */ React.createElement(ProviderSettingsItem, {\n    title: \"GitHub\",\n    description: \"Provides authentication towards GitHub APIs\",\n    apiRef: githubAuthApiRef,\n    icon: Star\n  }), configuredProviders.includes(\"gitlab\") && /* @__PURE__ */ React.createElement(ProviderSettingsItem, {\n    title: \"GitLab\",\n    description: \"Provides authentication towards GitLab APIs\",\n    apiRef: gitlabAuthApiRef,\n    icon: Star\n  }), configuredProviders.includes(\"okta\") && /* @__PURE__ */ React.createElement(ProviderSettingsItem, {\n    title: \"Okta\",\n    description: \"Provides authentication towards Okta APIs\",\n    apiRef: oktaAuthApiRef,\n    icon: Star\n  }), configuredProviders.includes(\"bitbucket\") && /* @__PURE__ */ React.createElement(ProviderSettingsItem, {\n    title: \"Bitbucket\",\n    description: \"Provides authentication towards Bitbucket APIs\",\n    apiRef: bitbucketAuthApiRef,\n    icon: Star\n  }), configuredProviders.includes(\"onelogin\") && /* @__PURE__ */ React.createElement(ProviderSettingsItem, {\n    title: \"OneLogin\",\n    description: \"Provides authentication towards OneLogin APIs\",\n    apiRef: oneloginAuthApiRef,\n    icon: Star\n  }), configuredProviders.includes(\"atlassian\") && /* @__PURE__ */ React.createElement(ProviderSettingsItem, {\n    title: \"Atlassian\",\n    description: \"Provides authentication towards Atlassian APIs\",\n    apiRef: atlassianAuthApiRef,\n    icon: Star\n  }));\n};\n\nconst UserSettingsAuthProviders = (props) => {\n  const { providerSettings } = props;\n  const configApi = useApi(configApiRef);\n  const providersConfig = configApi.getOptionalConfig(\"auth.providers\");\n  const configuredProviders = (providersConfig == null ? void 0 : providersConfig.keys()) || [];\n  const providers = providerSettings != null ? providerSettings : /* @__PURE__ */ React.createElement(DefaultProviderSettings, {\n    configuredProviders\n  });\n  if (!providerSettings && !(configuredProviders == null ? void 0 : configuredProviders.length)) {\n    return /* @__PURE__ */ React.createElement(EmptyProviders, null);\n  }\n  return /* @__PURE__ */ React.createElement(InfoCard, {\n    title: \"Available Providers\"\n  }, /* @__PURE__ */ React.createElement(List, {\n    dense: true\n  }, providers));\n};\n\nconst EXAMPLE = `import { createPlugin } from '@backstage/core-plugin-api';\n\nexport default createPlugin({\n  id: 'plugin-name',\n  featureFlags: [{ name: 'enable-example-feature' }],\n});\n`;\nconst EmptyFlags = () => /* @__PURE__ */ React.createElement(EmptyState, {\n  missing: \"content\",\n  title: \"No Feature Flags\",\n  description: \"Feature Flags make it possible for plugins to register features in Backstage for users to opt into. You can use this to split out logic in your code for manual A/B testing, etc.\",\n  action: /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(Typography, {\n    variant: \"body1\"\n  }, \"An example for how to add a feature flag is highlighted below:\"), /* @__PURE__ */ React.createElement(CodeSnippet, {\n    text: EXAMPLE,\n    language: \"typescript\",\n    showLineNumbers: true,\n    highlightedNumbers: [6],\n    customStyle: { background: \"inherit\", fontSize: \"115%\" }\n  }), /* @__PURE__ */ React.createElement(Button, {\n    variant: \"contained\",\n    color: \"primary\",\n    href: \"https://backstage.io/docs/api/utility-apis\"\n  }, \"Read More\"))\n});\n\nconst FlagItem = ({ flag, enabled, toggleHandler }) => /* @__PURE__ */ React.createElement(ListItem, {\n  divider: true,\n  button: true,\n  onClick: () => toggleHandler(flag.name)\n}, /* @__PURE__ */ React.createElement(ListItemIcon, null, /* @__PURE__ */ React.createElement(Tooltip, {\n  placement: \"top\",\n  arrow: true,\n  title: enabled ? \"Disable\" : \"Enable\"\n}, /* @__PURE__ */ React.createElement(Switch, {\n  color: \"primary\",\n  checked: enabled,\n  name: flag.name\n}))), /* @__PURE__ */ React.createElement(ListItemText, {\n  primary: flag.name,\n  secondary: `Registered in ${flag.pluginId} plugin`\n}));\n\nconst UserSettingsFeatureFlags = () => {\n  const featureFlagsApi = useApi(featureFlagsApiRef);\n  const featureFlags = featureFlagsApi.getRegisteredFlags();\n  const initialFlagState = Object.fromEntries(\n    featureFlags.map(({ name }) => [name, featureFlagsApi.isActive(name)])\n  );\n  const [state, setState] = useState(initialFlagState);\n  const [filterInput, setFilterInput] = useState(\"\");\n  const inputRef = React.useRef();\n  const toggleFlag = useCallback(\n    (flagName) => {\n      const newState = featureFlagsApi.isActive(flagName) ? FeatureFlagState.None : FeatureFlagState.Active;\n      featureFlagsApi.save({\n        states: { [flagName]: newState },\n        merge: true\n      });\n      setState((prevState) => ({\n        ...prevState,\n        [flagName]: newState === FeatureFlagState.Active\n      }));\n    },\n    [featureFlagsApi]\n  );\n  if (!featureFlags.length) {\n    return /* @__PURE__ */ React.createElement(EmptyFlags, null);\n  }\n  const clearFilterInput = () => {\n    var _a;\n    setFilterInput(\"\");\n    (_a = inputRef == null ? void 0 : inputRef.current) == null ? void 0 : _a.focus();\n  };\n  let filteredFeatureFlags = Array.from(featureFlags);\n  const filterInputParts = filterInput.split(/\\s/).map((part) => part.trim().toLocaleLowerCase(\"en-US\"));\n  filterInputParts.forEach(\n    (part) => filteredFeatureFlags = filteredFeatureFlags.filter(\n      (featureFlag) => featureFlag.name.toLocaleLowerCase(\"en-US\").includes(part)\n    )\n  );\n  const Header = () => /* @__PURE__ */ React.createElement(Grid, {\n    container: true,\n    style: { justifyContent: \"space-between\" }\n  }, /* @__PURE__ */ React.createElement(Grid, {\n    item: true,\n    xs: 6,\n    md: 8\n  }, /* @__PURE__ */ React.createElement(Typography, {\n    variant: \"h5\"\n  }, \"Feature Flags\")), featureFlags.length >= 10 && /* @__PURE__ */ React.createElement(Grid, {\n    item: true,\n    xs: 6,\n    md: 4\n  }, /* @__PURE__ */ React.createElement(TextField, {\n    label: \"Filter\",\n    style: { display: \"flex\", justifyContent: \"flex-end\" },\n    inputRef: (ref) => ref && ref.focus(),\n    InputProps: {\n      ...filterInput.length && {\n        endAdornment: /* @__PURE__ */ React.createElement(IconButton, {\n          \"aria-label\": \"Clear filter\",\n          onClick: clearFilterInput,\n          edge: \"end\"\n        }, /* @__PURE__ */ React.createElement(ClearIcon, null))\n      }\n    },\n    onChange: (e) => setFilterInput(e.target.value),\n    value: filterInput\n  })));\n  return /* @__PURE__ */ React.createElement(InfoCard, {\n    title: /* @__PURE__ */ React.createElement(Header, null)\n  }, /* @__PURE__ */ React.createElement(List, {\n    dense: true\n  }, filteredFeatureFlags.map((featureFlag) => {\n    const enabled = Boolean(state[featureFlag.name]);\n    return /* @__PURE__ */ React.createElement(FlagItem, {\n      key: featureFlag.name,\n      flag: featureFlag,\n      enabled,\n      toggleHandler: toggleFlag\n    });\n  })));\n};\n\nconst useUserProfile = () => {\n  var _a;\n  const identityApi = useApi(identityApiRef);\n  const alertApi = useApi(alertApiRef);\n  const { value, loading, error } = useAsync(async () => {\n    return {\n      profile: await identityApi.getProfileInfo(),\n      identity: await identityApi.getBackstageIdentity()\n    };\n  }, []);\n  useEffect(() => {\n    if (error) {\n      alertApi.post({\n        message: `Failed to load user identity: ${error}`,\n        severity: \"error\"\n      });\n    }\n  }, [error, alertApi]);\n  if (loading || error) {\n    return {\n      profile: {},\n      displayName: \"\",\n      loading\n    };\n  }\n  return {\n    profile: value.profile,\n    backstageIdentity: value.identity,\n    displayName: (_a = value.profile.displayName) != null ? _a : value.identity.userEntityRef,\n    loading\n  };\n};\n\nconst useStyles$1 = makeStyles((theme) => ({\n  avatar: {\n    width: ({ size }) => size,\n    height: ({ size }) => size,\n    fontSize: ({ size }) => size * 0.7,\n    border: `1px solid ${theme.palette.textSubtle}`\n  }\n}));\nconst UserSettingsSignInAvatar = (props) => {\n  const { size } = props;\n  const { iconSize } = sidebarConfig;\n  const classes = useStyles$1(size ? { size } : { size: iconSize });\n  const { profile } = useUserProfile();\n  return /* @__PURE__ */ React.createElement(Avatar, {\n    src: profile.picture,\n    className: classes.avatar,\n    alt: \"Profile picture\"\n  });\n};\n\nconst UserSettingsMenu = () => {\n  const errorApi = useApi(errorApiRef);\n  const identityApi = useApi(identityApiRef);\n  const [open, setOpen] = React.useState(false);\n  const [anchorEl, setAnchorEl] = React.useState(\n    void 0\n  );\n  const handleOpen = (event) => {\n    setAnchorEl(event.currentTarget);\n    setOpen(true);\n  };\n  const handleClose = () => {\n    setAnchorEl(void 0);\n    setOpen(false);\n  };\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(IconButton, {\n    \"data-testid\": \"user-settings-menu\",\n    \"aria-label\": \"more\",\n    onClick: handleOpen\n  }, /* @__PURE__ */ React.createElement(MoreVertIcon, null)), /* @__PURE__ */ React.createElement(Menu, {\n    anchorEl,\n    open,\n    onClose: handleClose\n  }, /* @__PURE__ */ React.createElement(MenuItem, {\n    \"data-testid\": \"sign-out\",\n    onClick: () => identityApi.signOut().catch((error) => errorApi.post(error))\n  }, /* @__PURE__ */ React.createElement(ListItemIcon, null, /* @__PURE__ */ React.createElement(SignOutIcon, null)), \"Sign Out\")));\n};\n\nconst UserSettingsProfileCard = () => {\n  const { profile, displayName } = useUserProfile();\n  return /* @__PURE__ */ React.createElement(InfoCard, {\n    title: \"Profile\",\n    variant: \"gridItem\"\n  }, /* @__PURE__ */ React.createElement(Grid, {\n    container: true,\n    spacing: 6\n  }, /* @__PURE__ */ React.createElement(Grid, {\n    item: true\n  }, /* @__PURE__ */ React.createElement(UserSettingsSignInAvatar, {\n    size: 96\n  })), /* @__PURE__ */ React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    sm: true,\n    container: true\n  }, /* @__PURE__ */ React.createElement(Grid, {\n    item: true,\n    xs: true,\n    container: true,\n    direction: \"column\",\n    spacing: 2\n  }, /* @__PURE__ */ React.createElement(Grid, {\n    item: true,\n    xs: true\n  }, /* @__PURE__ */ React.createElement(Typography, {\n    variant: \"subtitle1\",\n    gutterBottom: true\n  }, displayName), /* @__PURE__ */ React.createElement(Typography, {\n    variant: \"body2\",\n    color: \"textSecondary\"\n  }, profile.email))), /* @__PURE__ */ React.createElement(Grid, {\n    item: true\n  }, /* @__PURE__ */ React.createElement(UserSettingsMenu, null)))));\n};\n\nconst UserSettingsPinToggle = () => {\n  const { isPinned, toggleSidebarPinState } = useSidebarPinState();\n  return /* @__PURE__ */ React.createElement(ListItem, null, /* @__PURE__ */ React.createElement(ListItemText, {\n    primary: \"Pin Sidebar\",\n    secondary: \"Prevent the sidebar from collapsing\"\n  }), /* @__PURE__ */ React.createElement(ListItemSecondaryAction, null, /* @__PURE__ */ React.createElement(Tooltip, {\n    placement: \"top\",\n    arrow: true,\n    title: `${isPinned ? \"Unpin\" : \"Pin\"} Sidebar`\n  }, /* @__PURE__ */ React.createElement(Switch, {\n    color: \"primary\",\n    checked: isPinned,\n    onChange: () => toggleSidebarPinState(),\n    name: \"pin\",\n    inputProps: { \"aria-label\": \"Pin Sidebar Switch\" }\n  }))));\n};\n\nconst ThemeIcon = ({ id, activeId, icon }) => icon ? cloneElement(icon, {\n  color: activeId === id ? \"primary\" : void 0\n}) : /* @__PURE__ */ React.createElement(AutoIcon, {\n  color: activeId === id ? \"primary\" : void 0\n});\nconst useStyles = makeStyles((theme) => ({\n  container: {\n    display: \"flex\",\n    flexWrap: \"wrap\",\n    width: \"100%\",\n    justifyContent: \"space-between\",\n    alignItems: \"center\",\n    paddingBottom: 8,\n    paddingRight: 16\n  },\n  list: {\n    width: \"initial\",\n    [theme.breakpoints.down(\"xs\")]: {\n      width: \"100%\",\n      padding: `0 0 12px`\n    }\n  },\n  listItemText: {\n    paddingRight: 0,\n    paddingLeft: 0\n  },\n  listItemSecondaryAction: {\n    position: \"relative\",\n    transform: \"unset\",\n    top: \"auto\",\n    right: \"auto\",\n    paddingLeft: 16,\n    [theme.breakpoints.down(\"xs\")]: {\n      paddingLeft: 0\n    }\n  }\n}));\nconst TooltipToggleButton = ({\n  children,\n  title,\n  value,\n  ...props\n}) => /* @__PURE__ */ React.createElement(Tooltip, {\n  placement: \"top\",\n  arrow: true,\n  title\n}, /* @__PURE__ */ React.createElement(ToggleButton, {\n  value,\n  ...props\n}, children));\nconst UserSettingsThemeToggle = () => {\n  const classes = useStyles();\n  const appThemeApi = useApi(appThemeApiRef);\n  const themeId = useObservable(\n    appThemeApi.activeThemeId$(),\n    appThemeApi.getActiveThemeId()\n  );\n  const themeIds = appThemeApi.getInstalledThemes();\n  const handleSetTheme = (_event, newThemeId) => {\n    if (themeIds.some((t) => t.id === newThemeId)) {\n      appThemeApi.setActiveThemeId(newThemeId);\n    } else {\n      appThemeApi.setActiveThemeId(void 0);\n    }\n  };\n  return /* @__PURE__ */ React.createElement(ListItem, {\n    className: classes.list,\n    classes: { container: classes.container }\n  }, /* @__PURE__ */ React.createElement(ListItemText, {\n    className: classes.listItemText,\n    primary: \"Theme\",\n    secondary: \"Change the theme mode\"\n  }), /* @__PURE__ */ React.createElement(ListItemSecondaryAction, {\n    className: classes.listItemSecondaryAction\n  }, /* @__PURE__ */ React.createElement(ToggleButtonGroup, {\n    exclusive: true,\n    size: \"small\",\n    value: themeId != null ? themeId : \"auto\",\n    onChange: handleSetTheme\n  }, themeIds.map((theme) => {\n    var _a;\n    const themeIcon = (_a = themeIds.find((t) => t.id === theme.id)) == null ? void 0 : _a.icon;\n    return /* @__PURE__ */ React.createElement(TooltipToggleButton, {\n      key: theme.id,\n      title: `Select ${theme.title}`,\n      value: theme.id\n    }, /* @__PURE__ */ React.createElement(React.Fragment, null, theme.title, \"\\xA0\", /* @__PURE__ */ React.createElement(ThemeIcon, {\n      id: theme.id,\n      icon: themeIcon,\n      activeId: themeId\n    })));\n  }), /* @__PURE__ */ React.createElement(Tooltip, {\n    placement: \"top\",\n    arrow: true,\n    title: \"Select auto theme\"\n  }, /* @__PURE__ */ React.createElement(ToggleButton, {\n    value: \"auto\",\n    selected: themeId === void 0\n  }, \"Auto\\xA0\", /* @__PURE__ */ React.createElement(AutoIcon, {\n    color: themeId === void 0 ? \"primary\" : void 0\n  }))))));\n};\n\nconst UserSettingsAppearanceCard = () => {\n  const { isMobile } = useSidebarPinState();\n  return /* @__PURE__ */ React.createElement(InfoCard, {\n    title: \"Appearance\",\n    variant: \"gridItem\"\n  }, /* @__PURE__ */ React.createElement(List, {\n    dense: true\n  }, /* @__PURE__ */ React.createElement(UserSettingsThemeToggle, null), !isMobile && /* @__PURE__ */ React.createElement(UserSettingsPinToggle, null)));\n};\n\nconst UserSettingsIdentityCard = () => {\n  const { backstageIdentity } = useUserProfile();\n  return /* @__PURE__ */ React.createElement(InfoCard, {\n    title: \"Backstage Identity\"\n  }, /* @__PURE__ */ React.createElement(Grid$1, {\n    container: true,\n    spacing: 6\n  }, /* @__PURE__ */ React.createElement(Grid$1, {\n    item: true,\n    xs: 12,\n    sm: true,\n    container: true\n  }, /* @__PURE__ */ React.createElement(Grid$1, {\n    item: true,\n    xs: true,\n    container: true,\n    direction: \"column\",\n    spacing: 2\n  }, /* @__PURE__ */ React.createElement(Grid$1, {\n    item: true,\n    xs: true\n  }, /* @__PURE__ */ React.createElement(Typography$1, {\n    variant: \"subtitle1\",\n    gutterBottom: true\n  }, \"User Entity:\", \" \", /* @__PURE__ */ React.createElement(Chip, {\n    label: backstageIdentity == null ? void 0 : backstageIdentity.userEntityRef,\n    variant: \"outlined\",\n    size: \"small\"\n  })), /* @__PURE__ */ React.createElement(Typography$1, {\n    variant: \"subtitle1\"\n  }, \"Ownership Entities:\", \" \", backstageIdentity == null ? void 0 : backstageIdentity.ownershipEntityRefs.map((it) => /* @__PURE__ */ React.createElement(Chip, {\n    label: it,\n    variant: \"outlined\",\n    size: \"small\"\n  }))))))));\n};\n\nconst UserSettingsGeneral = () => {\n  return /* @__PURE__ */ React.createElement(Grid, {\n    container: true,\n    direction: \"row\",\n    spacing: 3\n  }, /* @__PURE__ */ React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    md: 6\n  }, /* @__PURE__ */ React.createElement(UserSettingsProfileCard, null)), /* @__PURE__ */ React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    md: 6\n  }, /* @__PURE__ */ React.createElement(UserSettingsAppearanceCard, null)), /* @__PURE__ */ React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    md: 6\n  }, /* @__PURE__ */ React.createElement(UserSettingsIdentityCard, null)));\n};\n\nconst USER_SETTINGS_TAB_KEY = \"user-settings.tab\";\nconst UserSettingsTab = (props) => {\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, props.children);\n};\nattachComponentData(UserSettingsTab, USER_SETTINGS_TAB_KEY, \"UserSettingsTab\");\n\nconst SettingsPage = (props) => {\n  const { providerSettings } = props;\n  const { isMobile } = useSidebarPinState();\n  const outlet = useOutlet();\n  const tabs = useElementFilter(\n    outlet,\n    (elements) => elements.selectByComponentData({\n      key: USER_SETTINGS_TAB_KEY\n    }).getElements()\n  );\n  return /* @__PURE__ */ React.createElement(Page, {\n    themeId: \"home\"\n  }, !isMobile && /* @__PURE__ */ React.createElement(Header, {\n    title: \"Settings\"\n  }), /* @__PURE__ */ React.createElement(TabbedLayout, null, /* @__PURE__ */ React.createElement(TabbedLayout.Route, {\n    path: \"general\",\n    title: \"General\"\n  }, /* @__PURE__ */ React.createElement(UserSettingsGeneral, null)), /* @__PURE__ */ React.createElement(TabbedLayout.Route, {\n    path: \"auth-providers\",\n    title: \"Authentication Providers\"\n  }, /* @__PURE__ */ React.createElement(UserSettingsAuthProviders, {\n    providerSettings\n  })), /* @__PURE__ */ React.createElement(TabbedLayout.Route, {\n    path: \"feature-flags\",\n    title: \"Feature Flags\"\n  }, /* @__PURE__ */ React.createElement(UserSettingsFeatureFlags, null)), tabs.map((child, i) => /* @__PURE__ */ React.createElement(TabbedLayout.Route, {\n    key: i,\n    ...child.props\n  }, child))));\n};\n\nvar SettingsPage$1 = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  SettingsPage: SettingsPage\n});\n\nexport { DefaultProviderSettings, ProviderSettingsItem, SettingsPage as Router, Settings, USER_SETTINGS_TAB_KEY, UserSettingsAppearanceCard, UserSettingsAuthProviders, UserSettingsFeatureFlags, UserSettingsGeneral, UserSettingsIdentityCard, UserSettingsMenu, UserSettingsPage, UserSettingsPinToggle, UserSettingsProfileCard, UserSettingsSignInAvatar, UserSettingsStorage, UserSettingsTab, UserSettingsThemeToggle, userSettingsPlugin as plugin, useUserProfile, userSettingsPlugin };\n//# sourceMappingURL=index.esm.js.map\n","import { createContext, useContext } from 'react';\n\nfunction getGlobalObject() {\n  if (typeof window !== \"undefined\" && window.Math === Math) {\n    return window;\n  }\n  if (typeof self !== \"undefined\" && self.Math === Math) {\n    return self;\n  }\n  return Function(\"return this\")();\n}\nconst globalObject = getGlobalObject();\nconst makeKey = (id) => `__@backstage/${id}__`;\nfunction getOrCreateGlobalSingleton(id, supplier) {\n  const key = makeKey(id);\n  let value = globalObject[key];\n  if (value) {\n    return value;\n  }\n  value = supplier();\n  globalObject[key] = value;\n  return value;\n}\n\nfunction createVersionedValueMap(versions) {\n  Object.freeze(versions);\n  return {\n    atVersion(version) {\n      return versions[version];\n    }\n  };\n}\n\nfunction createVersionedContext(key) {\n  return getOrCreateGlobalSingleton(key, () => createContext(void 0));\n}\nfunction useVersionedContext(key) {\n  return useContext(createVersionedContext(key));\n}\nfunction createVersionedContextForTesting(key) {\n  return {\n    set(versions) {\n      globalThis[`__@backstage/${key}__`] = createContext(createVersionedValueMap(versions));\n    },\n    reset() {\n      delete globalThis[`__@backstage/${key}__`];\n    }\n  };\n}\n\nexport { createVersionedContext, createVersionedContextForTesting, createVersionedValueMap, getOrCreateGlobalSingleton, useVersionedContext };\n//# sourceMappingURL=index.esm.js.map\n"],"sourceRoot":""}