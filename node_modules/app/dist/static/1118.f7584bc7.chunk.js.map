{"version":3,"sources":["webpack://app/../node_modules/@backstage/plugin-techdocs/dist/esm/TechDocsCustomHome-eccef158.esm.js"],"names":["panels","CustomPanel","config","entities","index","classes","loadingOwnership","isOwnedEntity","Panel","shownEntities","entity","TechDocsCustomHome","props","tabsConfig","selectedTab","setSelectedTab","catalogApi","loading","error","_a","currentTabConfig","label"],"mappings":"sZAkCA,MAAMA,EAAS,CACb,UAAS,IACT,aAAY,GACd,EACMC,EAAc,CAAC,CACnB,OAAAC,EACA,SAAAC,EACA,MAAAC,CACF,IAAM,CAOJ,MAAMC,G,EANY,KAAW,CAC3B,eAAgB,CACd,aAAc,OACd,GAAGH,EAAO,SAAWA,EAAO,SAAW,CAAC,CAC1C,CACF,CAAC,EACyB,EACpB,CAAE,QAASI,EAAkB,cAAAC,CAAc,G,EAAI,MAAmB,EAClEC,EAAQR,EAAOE,EAAO,WACtBO,EAAgBN,EAAS,OAAQO,GACjCR,EAAO,kBAAoB,cACzBI,EACK,GAEFC,EAAcG,CAAM,EAEtB,OAAOR,EAAO,iBAAoB,YAAcA,EAAO,gBAAgBQ,CAAM,CACrF,EACD,OAAuB,gBAAoB,WAAgB,KAAsB,gBAAoB,KAAe,CAClH,MAAOR,EAAO,MACd,YAAaA,EAAO,WACtB,EAAGE,IAAU,EAAoB,gBAAoB,KAAe,KAAM,2CAA2C,EAAI,IAAI,EAAmB,gBAAoB,MAAO,CACzK,UAAWC,EAAQ,cACrB,EAAmB,gBAAoBG,EAAO,CAC5C,cAAe,wBACf,SAAUC,CACZ,CAAC,CAAC,CAAC,CACL,EACME,EAAsBC,GAAU,CACpC,KAAM,CAAE,WAAAC,CAAW,EAAID,EACjB,CAACE,EAAaC,CAAc,G,EAAI,YAAS,CAAC,EAC1CC,G,EAAa,MAAO,IAAa,EACjC,CACJ,MAAOb,EACP,QAAAc,EACA,MAAAC,CACF,G,EAAI,WAAS,UACM,MAAMF,EAAW,YAAY,CAC5C,OAAQ,CACN,iDAAkD,IACpD,EACA,OAAQ,CACN,aACA,OACA,WACA,YACA,aACA,WACF,CACF,CAAC,GACe,MAAM,OAAQN,GAAW,CACvC,IAAIS,EACJ,MAAO,CAAC,GAAGA,EAAKT,EAAO,SAAS,cAAgB,MAAgBS,EAAG,6BACrE,CAAC,CACF,EACKC,EAAmBP,EAAWC,GACpC,OAAIG,EACqB,gBAAoB,IAAqB,KAAsB,gBAAoB,KAAS,KAAsB,gBAAoB,KAAU,IAAI,CAAC,CAAC,EAE3KC,EACqB,gBAAoB,IAAqB,KAAsB,gBAAoB,KAAS,KAAsB,gBAAoB,KAAc,CACzK,SAAU,QACV,MAAO,yCACT,EAAmB,gBAAoB,KAAa,CAClD,SAAU,OACV,KAAMA,EAAM,SAAS,CACvB,CAAC,CAAC,CAAC,CAAC,EAEiB,gBAAoB,IAAqB,KAAsB,gBAAoB,KAAY,CACpH,cAAeJ,EACf,SAAWV,GAAUW,EAAeX,CAAK,EACzC,KAAMS,EAAW,IAAI,CAAC,CAAE,MAAAQ,CAAM,EAAGjB,KAAW,CAC1C,GAAIA,EAAM,SAAS,EACnB,MAAAiB,CACF,EAAE,CACJ,CAAC,EAAmB,gBAAoB,KAAS,CAC/C,cAAe,kBACjB,EAAGD,EAAiB,OAAO,IAAI,CAAClB,EAAQE,IAA0B,gBAAoBH,EAAa,CACjG,IAAKG,EACL,OAAAF,EACA,SAAYC,GAAsB,CAAC,EACnC,MAAAC,CACF,CAAC,CAAC,CAAC,CAAC,CACN,C","file":"static/1118.f7584bc7.chunk.js","sourcesContent":["import React, { useState } from 'react';\nimport useAsync from 'react-use/lib/useAsync';\nimport { makeStyles } from '@material-ui/core';\nimport { catalogApiRef, CATALOG_FILTER_EXISTS, useEntityOwnership } from '@backstage/plugin-catalog-react';\nimport { T as TechDocsPageWrapper, D as DocsTable, a as DocsCardGrid } from './index-b9f615fb.esm.js';\nimport { Content, Progress, WarningPanel, CodeSnippet, HeaderTabs, ContentHeader, SupportButton } from '@backstage/core-components';\nimport { useApi } from '@backstage/core-plugin-api';\nimport '@backstage/errors';\nimport 'event-source-polyfill';\nimport 'react-router-dom';\nimport '@backstage/plugin-techdocs-react';\nimport 'react-use/lib/useAsyncRetry';\nimport '@backstage/plugin-search-react';\nimport 'react-router';\nimport '@material-ui/lab';\nimport '@material-ui/icons/Close';\nimport '@backstage/integration-react';\nimport 'dompurify';\nimport '@backstage/integration';\nimport '@material-ui/icons/FeedbackOutlined';\nimport 'react-dom';\nimport 'git-url-parse';\nimport '@material-ui/icons/Menu';\nimport 'react-helmet';\nimport '@material-ui/icons/Code';\nimport '@backstage/catalog-model';\nimport '@material-ui/icons/Settings';\nimport 'react-use/lib/useCopyToClipboard';\nimport 'lodash';\nimport '@material-ui/icons/Share';\nimport '@material-ui/styles';\nimport '@material-ui/icons/Star';\nimport '@material-ui/icons/StarBorder';\n\nconst panels = {\n  DocsTable,\n  DocsCardGrid\n};\nconst CustomPanel = ({\n  config,\n  entities,\n  index\n}) => {\n  const useStyles = makeStyles({\n    panelContainer: {\n      marginBottom: \"2rem\",\n      ...config.panelCSS ? config.panelCSS : {}\n    }\n  });\n  const classes = useStyles();\n  const { loading: loadingOwnership, isOwnedEntity } = useEntityOwnership();\n  const Panel = panels[config.panelType];\n  const shownEntities = entities.filter((entity) => {\n    if (config.filterPredicate === \"ownedByUser\") {\n      if (loadingOwnership) {\n        return false;\n      }\n      return isOwnedEntity(entity);\n    }\n    return typeof config.filterPredicate === \"function\" && config.filterPredicate(entity);\n  });\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(ContentHeader, {\n    title: config.title,\n    description: config.description\n  }, index === 0 ? /* @__PURE__ */ React.createElement(SupportButton, null, \"Discover documentation in your ecosystem.\") : null), /* @__PURE__ */ React.createElement(\"div\", {\n    className: classes.panelContainer\n  }, /* @__PURE__ */ React.createElement(Panel, {\n    \"data-testid\": \"techdocs-custom-panel\",\n    entities: shownEntities\n  })));\n};\nconst TechDocsCustomHome = (props) => {\n  const { tabsConfig } = props;\n  const [selectedTab, setSelectedTab] = useState(0);\n  const catalogApi = useApi(catalogApiRef);\n  const {\n    value: entities,\n    loading,\n    error\n  } = useAsync(async () => {\n    const response = await catalogApi.getEntities({\n      filter: {\n        \"metadata.annotations.backstage.io/techdocs-ref\": CATALOG_FILTER_EXISTS\n      },\n      fields: [\n        \"apiVersion\",\n        \"kind\",\n        \"metadata\",\n        \"relations\",\n        \"spec.owner\",\n        \"spec.type\"\n      ]\n    });\n    return response.items.filter((entity) => {\n      var _a;\n      return !!((_a = entity.metadata.annotations) == null ? void 0 : _a[\"backstage.io/techdocs-ref\"]);\n    });\n  });\n  const currentTabConfig = tabsConfig[selectedTab];\n  if (loading) {\n    return /* @__PURE__ */ React.createElement(TechDocsPageWrapper, null, /* @__PURE__ */ React.createElement(Content, null, /* @__PURE__ */ React.createElement(Progress, null)));\n  }\n  if (error) {\n    return /* @__PURE__ */ React.createElement(TechDocsPageWrapper, null, /* @__PURE__ */ React.createElement(Content, null, /* @__PURE__ */ React.createElement(WarningPanel, {\n      severity: \"error\",\n      title: \"Could not load available documentation.\"\n    }, /* @__PURE__ */ React.createElement(CodeSnippet, {\n      language: \"text\",\n      text: error.toString()\n    }))));\n  }\n  return /* @__PURE__ */ React.createElement(TechDocsPageWrapper, null, /* @__PURE__ */ React.createElement(HeaderTabs, {\n    selectedIndex: selectedTab,\n    onChange: (index) => setSelectedTab(index),\n    tabs: tabsConfig.map(({ label }, index) => ({\n      id: index.toString(),\n      label\n    }))\n  }), /* @__PURE__ */ React.createElement(Content, {\n    \"data-testid\": \"techdocs-content\"\n  }, currentTabConfig.panels.map((config, index) => /* @__PURE__ */ React.createElement(CustomPanel, {\n    key: index,\n    config,\n    entities: !!entities ? entities : [],\n    index\n  }))));\n};\n\nexport { TechDocsCustomHome };\n//# sourceMappingURL=TechDocsCustomHome-eccef158.esm.js.map\n"],"sourceRoot":""}