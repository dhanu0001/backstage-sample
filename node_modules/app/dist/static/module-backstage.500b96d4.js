"use strict";(()=>{(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1850],{86456:function(Mt,g,t){t.d(g,{r:function(){return Lt}});var e=t(53907),d=t(30705),E=t(56563),f=t(2784),r=t(77277),c=t(49558),S=t(73557),O=t(39857),h=t(43642),R=t(80079),M=t(90941),z=t(32915),K=t(40562),j=t(21853),ie=t(60744),w=t(66569),D=t(30254),P=t(13384),$=t(15933),U=t(58838),I=t(86737),m=t(4989),x=t(44407),W=t(18628),Ee=t(84219),Be=t(98685),Ve=t(39781),qe=t(73689),Et=t(48032),at=t(34505);const Pt={wave:`url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='1368' height='400' fill='none'%3e%3cmask id='a' width='1368' height='401' x='0' y='0' maskUnits='userSpaceOnUse'%3e%3cpath fill='url(%23paint0_linear)' d='M437 116C223 116 112 0 112 0h1256v400c-82 0-225-21-282-109-112-175-436-175-649-175z'/%3e%3cpath fill='url(%23paint1_linear)' d='M1368 400V282C891-29 788 40 711 161 608 324 121 372 0 361v39h1368z'/%3e%3cpath fill='url(%23paint2_linear)' d='M1368 244v156H0V94c92-24 198-46 375 0l135 41c176 51 195 109 858 109z'/%3e%3cpath fill='url(%23paint3_linear)' d='M1252 400h116c-14-7-35-14-116-16-663-14-837-128-1013-258l-85-61C98 28 46 8 0 0v400h1252z'/%3e%3c/mask%3e%3cg mask='url(%23a)'%3e%3cpath fill='white' d='M-172-98h1671v601H-172z'/%3e%3c/g%3e%3cdefs%3e%3clinearGradient id='paint0_linear' x1='602' x2='1093.5' y1='-960.5' y2='272' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint1_linear' x1='482' x2='480' y1='1058.5' y2='70.5' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint2_linear' x1='424' x2='446.1' y1='-587.5' y2='274.6' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint3_linear' x1='587' x2='349' y1='-1120.5' y2='341' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3c/defs%3e%3c/svg%3e")`,wave2:`url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='1368' height='400' fill='none'%3e%3cmask id='a' width='1764' height='479' x='-229' y='-6' maskUnits='userSpaceOnUse'%3e%3cpath fill='url(%23paint0_linear)' d='M0 400h1350C1321 336 525 33 179-2c-345-34-395 236-408 402H0z'/%3e%3cpath fill='url(%23paint1_linear)' d='M1378 177v223H0V217s219 75 327 52C436 246 717-35 965 45s254 144 413 132z'/%3e%3cpath fill='url(%23paint2_linear)' d='M26 400l-78-16c-170 205-44-6-137-30l-4-1 4 1 137 30c37-45 89-110 159-201 399-514-45 238 1176-50 275-65 354-39 91 267H26z'/%3e%3c/mask%3e%3cg mask='url(%23a)'%3e%3cpath fill='white' d='M0 0h1368v400H0z'/%3e%3c/g%3e%3cdefs%3e%3clinearGradient id='paint0_linear' x1='431' x2='397.3' y1='-599' y2='372.8' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint1_linear' x1='236.5' x2='446.6' y1='-586' y2='381.5' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint2_linear' x1='851.8' x2='640.4' y1='-867.2' y2='363.7' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3c/defs%3e%3c/svg%3e")`,round:`url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='1368' height='400' fill='none'%3e%3cmask id='a' width='2269' height='1408' x='-610' y='-509' maskUnits='userSpaceOnUse'%3e%3ccircle cx='1212.8' cy='74.8' r='317.5' fill='url(%23paint0_linear)' transform='rotate(-52 1213 75)'/%3e%3ccircle cx='737.8' cy='445.8' r='317.5' fill='url(%23paint1_linear)' transform='rotate(-116 738 446)'/%3e%3ccircle cx='601.8' cy='52.8' r='418.6' fill='url(%23paint2_linear)' transform='rotate(-117 602 53)'/%3e%3ccircle cx='999.8' cy='364' r='389.1' fill='url(%23paint3_linear)' transform='rotate(31 1000 364)'/%3e%3cellipse cx='-109.2' cy='263.5' fill='url(%23paint4_linear)' rx='429.2' ry='465.8' transform='rotate(-85 -109 264)'/%3e%3c/mask%3e%3cg mask='url(%23a)'%3e%3cpath fill='white' d='M0 0h1368v400H0z'/%3e%3c/g%3e%3cdefs%3e%3clinearGradient id='paint0_linear' x1='1301.2' x2='161.4' y1='-1879.7' y2='-969.6' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint1_linear' x1='826.2' x2='-313.6' y1='-1508.7' y2='-598.6' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint2_linear' x1='718.4' x2='-784.3' y1='-2524' y2='-1324.2' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint3_linear' x1='1108.2' x2='-288.6' y1='-2031.1' y2='-915.9' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint4_linear' x1='10.4' x2='-1626.5' y1='-2603.8' y2='-1399.5' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3c/defs%3e%3c/svg%3e")`},At={darkGrey:["#171717","#383838"],marineBlue:["#006D8F","#0049A1"],veryBlue:["#0027AF","#270094"],rubyRed:["#98002B","#8D1134"],toastyOrange:["#BE2200","#A41D00"],purpleSky:["#8912CA","#3E00EA"],eveningSea:["#00FFF2","#035355"],teal:["#005B4B"],pinkSea:["#C8077A","#C2297D"],greens:["#4BB8A5","#187656"]};function q(Re){var _t;const{colors:Ct,shape:Qt,options:st}=Re,ce=`linear-gradient(90deg, ${(Ct.length===1?[Ct[0],Ct[0]]:Ct).join(", ")})`,we=`${Qt},  ${ce}`,se=(_t=st==null?void 0:st.fontColor)!=null?_t:"#FFFFFF";return{colors:Ct,shape:Qt,backgroundImage:we,fontColor:se}}const rn={home:q({colors:At.teal,shape:Pt.wave}),documentation:q({colors:At.pinkSea,shape:Pt.wave2}),tool:q({colors:At.purpleSky,shape:Pt.round}),service:q({colors:At.marineBlue,shape:Pt.wave}),website:q({colors:At.veryBlue,shape:Pt.wave}),library:q({colors:At.rubyRed,shape:Pt.wave}),other:q({colors:At.darkGrey,shape:Pt.wave}),app:q({colors:At.toastyOrange,shape:Pt.wave}),apis:q({colors:At.teal,shape:Pt.wave2}),card:q({colors:At.greens,shape:Pt.wave})},ct=16,xe='"Helvetica Neue", Helvetica, Roboto, Arial, sans-serif';function oe(Re){const{palette:_t,htmlFontSize:Ct=ct,fontFamily:Qt=xe,defaultPageTheme:st,pageTheme:me=rn}=Re;if(!me[st])throw new Error(`${st} is not defined in pageTheme.`);return{palette:_t,props:{MuiGrid:{spacing:2},MuiSwitch:{color:"primary"}},typography:{htmlFontSize:Ct,fontFamily:Qt,h6:{fontWeight:700,fontSize:20,marginBottom:2},h5:{fontWeight:700,fontSize:24,marginBottom:4},h4:{fontWeight:700,fontSize:28,marginBottom:6},h3:{fontSize:32,fontWeight:700,marginBottom:6},h2:{fontSize:40,fontWeight:700,marginBottom:8},h1:{fontSize:54,fontWeight:700,marginBottom:10}},page:me[st],getPageTheme:({themeId:ce})=>{var we;return(we=me[ce])!=null?we:me[st]}}}function Ue(Re){return{MuiCssBaseline:{"@global":{html:{height:"100%",fontFamily:Re.typography.fontFamily},body:{height:"100%",fontFamily:Re.typography.fontFamily,"overscroll-behavior-y":"none"},a:{color:"inherit",textDecoration:"none"}}},MuiTableRow:{root:{"&:nth-of-type(odd)":{backgroundColor:Re.palette.background.default}},hover:{"&:hover":{cursor:"pointer"}},head:{"&:nth-of-type(odd)":{backgroundColor:Re.palette.background.paper}}},MuiTableCell:{root:{wordBreak:"break-word",overflow:"hidden",verticalAlign:"middle",lineHeight:"1",margin:0,padding:Re.spacing(3,2,3,2.5),borderBottom:0},sizeSmall:{padding:Re.spacing(1.5,2,1.5,2.5)},head:{wordBreak:"break-word",overflow:"hidden",color:"rgb(179, 179, 179)",fontWeight:"normal",lineHeight:"1"}},MuiTabs:{root:{minHeight:24}},MuiTab:{root:{color:Re.palette.link,minHeight:24,textTransform:"initial",letterSpacing:"0.07em","&:hover":{color:(0,Et.darken)(Re.palette.link,.3),background:(0,Et.lighten)(Re.palette.link,.95)},[Re.breakpoints.up("md")]:{minWidth:120,fontSize:Re.typography.pxToRem(14),fontWeight:500}},textColorPrimary:{color:Re.palette.link}},MuiTableSortLabel:{root:{color:"inherit","&:hover":{color:"inherit"},"&:focus":{color:"inherit"}},active:{fontWeight:"bold",color:"inherit"}},MuiListItemText:{dense:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}},MuiButton:{text:{padding:void 0}},MuiChip:{root:{backgroundColor:"#D9D9D9",marginRight:Re.spacing(1),marginBottom:Re.spacing(1),color:Re.palette.grey[900]},outlined:{color:Re.palette.text.primary},label:{lineHeight:`${Re.spacing(2.5)}px`,fontWeight:Re.typography.fontWeightMedium,fontSize:`${Re.spacing(1.75)}px`},labelSmall:{fontSize:`${Re.spacing(1.5)}px`},deleteIcon:{color:Re.palette.grey[500],width:`${Re.spacing(3)}px`,height:`${Re.spacing(3)}px`,margin:`0 ${Re.spacing(.75)}px 0 -${Re.spacing(.75)}px`},deleteIconSmall:{width:`${Re.spacing(2)}px`,height:`${Re.spacing(2)}px`,margin:`0 ${Re.spacing(.5)}px 0 -${Re.spacing(.5)}px`}},MuiCard:{root:{display:"flex",flexDirection:"column"}},MuiCardHeader:{root:{paddingBottom:0}},MuiCardContent:{root:{flexGrow:1,"&:last-child":{paddingBottom:void 0}}},MuiCardActions:{root:{justifyContent:"flex-end"}}}}function de(Re){const _t=oe(Re),Ct=(0,qe.Z)(_t),Qt=Ue(Ct);return{...Ct,overrides:Qt}}const p=de({palette:{type:"light",background:{default:"#F8F8F8"},status:{ok:"#1DB954",warning:"#FF9800",error:"#E22134",running:"#2E77D0",pending:"#FFED51",aborted:"#757575"},bursts:{fontColor:"#FEFEFE",slackChannelText:"#ddd",backgroundColor:{default:"#7C3699"},gradient:{linear:"linear-gradient(-137deg, #4BB8A5 0%, #187656 100%)"}},primary:{main:"#2E77D0"},banner:{info:"#2E77D0",error:"#E22134",text:"#FFFFFF",link:"#000000",warning:"#FF9800"},border:"#E6E6E6",textContrast:"#000000",textVerySubtle:"#DDD",textSubtle:"#6E6E6E",highlight:"#FFFBCC",errorBackground:"#FFEBEE",warningBackground:"#F59B23",infoBackground:"#ebf5ff",errorText:"#CA001B",infoText:"#004e8a",warningText:"#000000",linkHover:"#2196F3",link:"#0A6EBE",gold:at.Z.A700,navigation:{background:"#171717",indicator:"#9BF0E1",color:"#b5b5b5",selectedColor:"#FFF",navItem:{hoverBackground:"#404040"},submenu:{background:"#404040"}},pinSidebarButton:{icon:"#181818",background:"#BDBDBD"},tabbar:{indicator:"#9BF0E1"}},defaultPageTheme:"home",pageTheme:rn}),G=de({palette:{type:"dark",background:{default:"#333333"},status:{ok:"#71CF88",warning:"#FFB84D",error:"#F84C55",running:"#3488E3",pending:"#FEF071",aborted:"#9E9E9E"},bursts:{fontColor:"#FEFEFE",slackChannelText:"#ddd",backgroundColor:{default:"#7C3699"},gradient:{linear:"linear-gradient(-137deg, #4BB8A5 0%, #187656 100%)"}},primary:{main:"#9CC9FF",dark:"#82BAFD"},secondary:{main:"#FF88B2"},banner:{info:"#2E77D0",error:"#E22134",text:"#FFFFFF",link:"#000000",warning:"#FF9800"},border:"#E6E6E6",textContrast:"#FFFFFF",textVerySubtle:"#727272",textSubtle:"#CCCCCC",highlight:"#FFFBCC",errorBackground:"#FFEBEE",warningBackground:"#F59B23",infoBackground:"#ebf5ff",errorText:"#CA001B",infoText:"#004e8a",warningText:"#000000",linkHover:"#82BAFD",link:"#9CC9FF",gold:at.Z.A700,navigation:{background:"#424242",indicator:"#9BF0E1",color:"#b5b5b5",selectedColor:"#FFF",navItem:{hoverBackground:"#404040"},submenu:{background:"#404040"}},pinSidebarButton:{icon:"#404040",background:"#BDBDBD"},tabbar:{indicator:"#9BF0E1"}},defaultPageTheme:"home",pageTheme:rn});var ye=t(98192),nt=t(15222),be=t(41547),je=t(87561);const ft=[(0,d.ni)({api:d.NW,deps:{configApi:d.Ds},factory:({configApi:Re})=>e.pM.compile(`${Re.getString("backend.baseUrl")}/api/{{ pluginId }}`)}),(0,d.ni)({api:d.$v,deps:{},factory:()=>new e.CX}),(0,d.ni)({api:d.v_,deps:{},factory:()=>new e.gN}),(0,d.ni)({api:d.VE,deps:{alertApi:d.$v},factory:({alertApi:Re})=>{const _t=new e.KN(Re,new e.gr);return e.Jv.forward(_t,{hidden:!1}),_t}}),(0,d.ni)({api:d.E6,deps:{errorApi:d.VE},factory:({errorApi:Re})=>e.CJ.create({errorApi:Re})}),(0,d.ni)({api:d.gP,deps:{configApi:d.Ds,identityApi:d.$4,discoveryApi:d.NW},factory:({configApi:Re,identityApi:_t,discoveryApi:Ct})=>(0,e.jJ)({middleware:[e.II.resolvePluginProtocol({discoveryApi:Ct}),e.II.injectIdentityAuth({identityApi:_t,config:Re})]})}),(0,d.ni)({api:d.ZM,deps:{},factory:()=>new e.YM}),(0,d.ni)({api:d.Kp,deps:{discoveryApi:d.NW,oauthRequestApi:d.ZM,configApi:d.Ds},factory:({discoveryApi:Re,oauthRequestApi:_t,configApi:Ct})=>e.eE.create({discoveryApi:Re,oauthRequestApi:_t,environment:Ct.getOptionalString("auth.environment")})}),(0,d.ni)({api:d.p_,deps:{discoveryApi:d.NW,oauthRequestApi:d.ZM,configApi:d.Ds},factory:({discoveryApi:Re,oauthRequestApi:_t,configApi:Ct})=>e._i.create({discoveryApi:Re,oauthRequestApi:_t,environment:Ct.getOptionalString("auth.environment")})}),(0,d.ni)({api:d.F4,deps:{discoveryApi:d.NW,oauthRequestApi:d.ZM,configApi:d.Ds},factory:({discoveryApi:Re,oauthRequestApi:_t,configApi:Ct})=>e.Td.create({discoveryApi:Re,oauthRequestApi:_t,defaultScopes:["read:user"],environment:Ct.getOptionalString("auth.environment")})}),(0,d.ni)({api:d.D,deps:{discoveryApi:d.NW,oauthRequestApi:d.ZM,configApi:d.Ds},factory:({discoveryApi:Re,oauthRequestApi:_t,configApi:Ct})=>e.sn.create({discoveryApi:Re,oauthRequestApi:_t,environment:Ct.getOptionalString("auth.environment")})}),(0,d.ni)({api:d.ux,deps:{discoveryApi:d.NW,oauthRequestApi:d.ZM,configApi:d.Ds},factory:({discoveryApi:Re,oauthRequestApi:_t,configApi:Ct})=>e.aq.create({discoveryApi:Re,oauthRequestApi:_t,environment:Ct.getOptionalString("auth.environment")})}),(0,d.ni)({api:d.gW,deps:{discoveryApi:d.NW,oauthRequestApi:d.ZM,configApi:d.Ds},factory:({discoveryApi:Re,oauthRequestApi:_t,configApi:Ct})=>e.$_.create({discoveryApi:Re,oauthRequestApi:_t,environment:Ct.getOptionalString("auth.environment")})}),(0,d.ni)({api:d.bq,deps:{discoveryApi:d.NW,oauthRequestApi:d.ZM,configApi:d.Ds},factory:({discoveryApi:Re,oauthRequestApi:_t,configApi:Ct})=>e.xP.create({discoveryApi:Re,oauthRequestApi:_t,defaultScopes:["team"],environment:Ct.getOptionalString("auth.environment")})}),(0,d.ni)({api:d.uB,deps:{discoveryApi:d.NW,oauthRequestApi:d.ZM,configApi:d.Ds},factory:({discoveryApi:Re,oauthRequestApi:_t,configApi:Ct})=>e.uC.create({discoveryApi:Re,oauthRequestApi:_t,environment:Ct.getOptionalString("auth.environment")})}),(0,d.ni)({api:E.RV,deps:{discovery:d.NW,identity:d.$4,config:d.Ds},factory:({config:Re,discovery:_t,identity:Ct})=>E.iM.create({config:Re,discovery:_t,identity:Ct})})];function F({children:Re}){return(0,S.GV)()?f.createElement(f.Fragment,null,Re):f.createElement(S.VA,null,Re)}const N=()=>f.createElement(c.mf,{status:"404",statusMessage:"PAGE NOT FOUND"}),_e=({step:Re,error:_t})=>{let Ct="";return Re==="load-config"?Ct=`The configuration failed to load, someone should have a look at this error: ${_t.message}`:Re==="load-chunk"&&(Ct=`Lazy loaded chunk failed to load, try to reload the page: ${_t.message}`),f.createElement(F,null,f.createElement(c.mf,{status:"501",statusMessage:Ct}))},ze=({error:Re,resetError:_t,plugin:Ct})=>f.createElement(c.yu,{title:`Error in ${Ct==null?void 0:Ct.getId()}`,defaultExpanded:!0,error:Re},f.createElement(r.Z,{variant:"outlined",onClick:_t},"Retry")),dt={Progress:c.Ex,Router:O.VK,NotFoundErrorPage:N,BootErrorPage:_e,ErrorBoundaryFallback:ze},St={brokenImage:R.Z,catalog:W.Z,scaffolder:z.Z,techdocs:K.Z,search:j.Z,chat:ie.Z,dashboard:w.Z,docs:D.Z,email:P.Z,github:U.Z,group:Ee.Z,help:I.Z,"kind:api":$.Z,"kind:component":x.Z,"kind:domain":h.Z,"kind:group":Ee.Z,"kind:location":m.Z,"kind:system":M.Z,"kind:user":Be.Z,user:Be.Z,warning:Ve.Z},Bt=[{id:"light",title:"Light Theme",variant:"light",icon:f.createElement(nt.Z,null),Provider:({children:Re})=>f.createElement(be.Z,{theme:p},f.createElement(je.ZP,null,Re))},{id:"dark",title:"Dark Theme",variant:"dark",icon:f.createElement(ye.Z,null),Provider:({children:Re})=>f.createElement(be.Z,{theme:G},f.createElement(je.ZP,null,Re))}];function Lt(Re){var _t,Ct,Qt;return(0,e.bg)({...Re,apis:(_t=Re==null?void 0:Re.apis)!=null?_t:[],bindRoutes:Re==null?void 0:Re.bindRoutes,components:{...dt,...Re==null?void 0:Re.components},configLoader:Re==null?void 0:Re.configLoader,defaultApis:ft,icons:{...St,...Re==null?void 0:Re.icons},plugins:(Ct=Re==null?void 0:Re.plugins)!=null?Ct:[],themes:(Qt=Re==null?void 0:Re.themes)!=null?Qt:Bt})}},88285:function(Mt,g,t){t.d(g,{MS:function(){return c},mk:function(){return S},n3:function(){return r}});var e=t(34520),d=t(32272),E=t(96279),f=t.n(E);const r=Symbol.for("CATALOG_FILTER_EXISTS_0e15b590c0b343a2bae3e787e84c2111");class c{constructor(h){this.discoveryApi=h.discoveryApi,this.fetchApi=h.fetchApi||{fetch:f()}}async getEntityAncestors(h,R){const{kind:M,namespace:z,name:K}=(0,e.of)(h.entityRef);return await this.requestRequired("GET",`/entities/by-name/${encodeURIComponent(M)}/${encodeURIComponent(z)}/${encodeURIComponent(K)}/ancestry`,R)}async getLocationById(h,R){return await this.requestOptional("GET",`/locations/${encodeURIComponent(h)}`,R)}async getEntities(h,R){const{filter:M=[],fields:z=[],offset:K,limit:j,after:ie}=h!=null?h:{},w=[];for(const U of[M].flat()){const I=[];for(const[m,x]of Object.entries(U))for(const W of[x].flat())W===r?I.push(encodeURIComponent(m)):typeof W=="string"&&I.push(`${encodeURIComponent(m)}=${encodeURIComponent(W)}`);I.length&&w.push(`filter=${I.join(",")}`)}z.length&&w.push(`fields=${z.map(encodeURIComponent).join(",")}`),K!==void 0&&w.push(`offset=${K}`),j!==void 0&&w.push(`limit=${j}`),ie!==void 0&&w.push(`after=${encodeURIComponent(ie)}`);const D=w.length?`?${w.join("&")}`:"",P=await this.requestRequired("GET",`/entities${D}`,R),$=(U,I)=>{var m,x;if(((m=U.metadata)==null?void 0:m.name)===void 0||U.kind===void 0||((x=I.metadata)==null?void 0:x.name)===void 0||I.kind===void 0)return 0;const W=(0,e.eE)(U),Ee=(0,e.eE)(I);return W<Ee?-1:W>Ee?1:0};return{items:P.sort($)}}async getEntityByRef(h,R){const{kind:M,namespace:z,name:K}=(0,e.of)(h);return this.requestOptional("GET",`/entities/by-name/${encodeURIComponent(M)}/${encodeURIComponent(z)}/${encodeURIComponent(K)}`,R)}async getEntityByName(h,R){const{kind:M,namespace:z="default",name:K}=h;return this.requestOptional("GET",`/entities/by-name/${encodeURIComponent(M)}/${encodeURIComponent(z)}/${encodeURIComponent(K)}`,R)}async refreshEntity(h,R){const M=await this.fetchApi.fetch(`${await this.discoveryApi.getBaseUrl("catalog")}/refresh`,{headers:{"Content-Type":"application/json",...(R==null?void 0:R.token)&&{Authorization:`Bearer ${R==null?void 0:R.token}`}},method:"POST",body:JSON.stringify({entityRef:h})});if(M.status!==200)throw new Error(await M.text())}async getEntityFacets(h,R){const{filter:M=[],facets:z}=h,K=[];for(const ie of[M].flat()){const w=[];for(const[D,P]of Object.entries(ie))for(const $ of[P].flat())$===r?w.push(encodeURIComponent(D)):typeof $=="string"&&w.push(`${encodeURIComponent(D)}=${encodeURIComponent($)}`);w.length&&K.push(`filter=${w.join(",")}`)}for(const ie of z)K.push(`facet=${encodeURIComponent(ie)}`);const j=K.length?`?${K.join("&")}`:"";return await this.requestOptional("GET",`/entity-facets${j}`,R)}async addLocation(h,R){const{type:M="url",target:z,dryRun:K}=h,j=await this.fetchApi.fetch(`${await this.discoveryApi.getBaseUrl("catalog")}/locations${K?"?dryRun=true":""}`,{headers:{"Content-Type":"application/json",...(R==null?void 0:R.token)&&{Authorization:`Bearer ${R==null?void 0:R.token}`}},method:"POST",body:JSON.stringify({type:M,target:z})});if(j.status!==201)throw new Error(await j.text());const{location:ie,entities:w,exists:D}=await j.json();if(!ie)throw new Error(`Location wasn't added: ${z}`);return{location:ie,entities:w,exists:D}}async getLocationByRef(h,R){return(await this.requestRequired("GET","/locations",R)).map(z=>z.data).find(z=>h===(0,e.NZ)(z))}async removeLocationById(h,R){await this.requestIgnored("DELETE",`/locations/${encodeURIComponent(h)}`,R)}async removeEntityByUid(h,R){await this.requestIgnored("DELETE",`/entities/by-uid/${encodeURIComponent(h)}`,R)}async validateEntity(h,R,M){const z=await this.fetchApi.fetch(`${await this.discoveryApi.getBaseUrl("catalog")}/validate-entity`,{headers:{"Content-Type":"application/json",...(M==null?void 0:M.token)&&{Authorization:`Bearer ${M==null?void 0:M.token}`}},method:"POST",body:JSON.stringify({entity:h,location:R})});if(z.ok)return{valid:!0};if(z.status!==400)throw await d.VL.fromResponse(z);const{errors:K=[]}=await z.json();return{valid:!1,errors:K}}async requestIgnored(h,R,M){const z=`${await this.discoveryApi.getBaseUrl("catalog")}${R}`,K=M!=null&&M.token?{Authorization:`Bearer ${M.token}`}:{},j=await this.fetchApi.fetch(z,{method:h,headers:K});if(!j.ok)throw await d.VL.fromResponse(j)}async requestRequired(h,R,M){const z=`${await this.discoveryApi.getBaseUrl("catalog")}${R}`,K=M!=null&&M.token?{Authorization:`Bearer ${M.token}`}:{},j=await this.fetchApi.fetch(z,{method:h,headers:K});if(!j.ok)throw await d.VL.fromResponse(j);return await j.json()}async requestOptional(h,R,M){const z=`${await this.discoveryApi.getBaseUrl("catalog")}${R}`,K=M!=null&&M.token?{Authorization:`Bearer ${M.token}`}:{},j=await this.fetchApi.fetch(z,{method:h,headers:K});if(!j.ok){if(j.status===404)return;throw await d.VL.fromResponse(j)}return await j.json()}}const S="backstage.io/catalog-processing"},34520:function(Mt,g,t){t.d(g,{$1:function(){return cr},CV:function(){return Gn},Dg:function(){return ur},In:function(){return ne},KS:function(){return L},M6:function(){return Bn},M_:function(){return v},NZ:function(){return Nn},Ou:function(){return An},P1:function(){return on},S4:function(){return Vn},Tf:function(){return ie},X9:function(){return Z},Zj:function(){return i},_b:function(){return l},aS:function(){return Oe},cz:function(){return re},eE:function(){return x},hr:function(){return b},iB:function(){return I},l2:function(){return j},nP:function(){return u},of:function(){return m},q1:function(){return un},w$:function(){return o},wP:function(){return _},y$:function(){return T},zG:function(){return K}});var e=t(76635),d=t.n(e),E=t(53911),f=t.n(E);function r(rt){return rt.kind.toLocaleUpperCase("en-US")==="API"}function c(rt){return rt.kind.toLocaleUpperCase("en-US")==="COMPONENT"}function S(rt){return rt.kind.toLocaleUpperCase("en-US")==="DOMAIN"}function O(rt){return rt.kind.toLocaleUpperCase("en-US")==="GROUP"}function h(rt){return rt.kind.toLocaleUpperCase("en-US")==="LOCATION"}function R(rt){return rt.kind.toLocaleUpperCase("en-US")==="RESOURCE"}function M(rt){return rt.kind.toLocaleUpperCase("en-US")==="SYSTEM"}function z(rt){return rt.kind.toLocaleUpperCase("en-US")==="USER"}const K="default",j="backstage.io/view-url",ie="backstage.io/edit-url",w="kubernetes.io/api-server",D="kubernetes.io/api-server-certificate-authority",P="kubernetes.io/auth-provider";class ${constructor(We=K){this.namespace=We}async enforce(We){return We.metadata.namespace?We:lodash.merge({metadata:{namespace:this.namespace}},We)}}function U(rt){let We=rt.indexOf(":");const bt=rt.indexOf("/");bt!==-1&&bt<We&&(We=-1);const dn=We===-1?void 0:rt.slice(0,We),Pn=bt===-1?void 0:rt.slice(We+1,bt),Wn=rt.slice(Math.max(We+1,bt+1));if(dn===""||Pn===""||Wn==="")throw new TypeError(`Entity reference "${rt}" was not on the form [<kind>:][<namespace>/]<name>`);return{kind:dn,namespace:Pn,name:Wn}}function I(rt){return{kind:rt.kind,namespace:rt.metadata.namespace||K,name:rt.metadata.name}}function m(rt,We){var bt,dn,Pn,Wn;if(!rt)throw new Error("Entity reference must not be empty");const Yn=We==null?void 0:We.defaultKind,hr=(We==null?void 0:We.defaultNamespace)||K;let Er,ir,_r;if(typeof rt=="string"){const gr=U(rt);Er=(bt=gr.kind)!=null?bt:Yn,ir=(dn=gr.namespace)!=null?dn:hr,_r=gr.name}else Er=(Pn=rt.kind)!=null?Pn:Yn,ir=(Wn=rt.namespace)!=null?Wn:hr,_r=rt.name;if(Er)if(ir){if(!_r){const gr=JSON.stringify(rt);throw new Error(`Entity reference ${gr} had missing or empty name`)}}else{const gr=JSON.stringify(rt);throw new Error(`Entity reference ${gr} had missing or empty namespace`)}else{const gr=JSON.stringify(rt);throw new Error(`Entity reference ${gr} had missing or empty kind (e.g. did not start with "component:" or similar)`)}return{kind:Er,namespace:ir,name:_r}}function x(rt){var We,bt;let dn,Pn,Wn;return"metadata"in rt?(dn=rt.kind,Pn=(We=rt.metadata.namespace)!=null?We:K,Wn=rt.metadata.name):(dn=rt.kind,Pn=(bt=rt.namespace)!=null?bt:K,Wn=rt.name),`${dn.toLocaleLowerCase("en-US")}:${Pn.toLocaleLowerCase("en-US")}/${Wn.toLocaleLowerCase("en-US")}`}class W{constructor(We){const{kind:bt,namespace:dn,name:Pn}=m(We,{defaultKind:"Group",defaultNamespace:K});if(bt.toLocaleUpperCase("en-US")!=="GROUP")throw new TypeError("group parent must be a group");this.parentRef=x({kind:bt,namespace:dn,name:Pn})}async enforce(We){if(We.kind!=="Group")return We;const bt=We;return bt.spec.parent||x(bt)!==this.parentRef&&(bt.spec.parent=this.parentRef),bt}}class Ee{static isValidPrefixAndOrSuffix(We,bt,dn,Pn){if(typeof We!="string")return!1;const Wn=We.split(bt);return Wn.length===1?Pn(Wn[0]):Wn.length===2?dn(Wn[0])&&Pn(Wn[1]):!1}static isJsonSafe(We){try{return d().isEqual(We,JSON.parse(JSON.stringify(We)))}catch{return!1}}static isValidDnsSubdomain(We){return typeof We=="string"&&We.length>=1&&We.length<=253&&We.split(".").every(Ee.isValidDnsLabel)}static isValidDnsLabel(We){return typeof We=="string"&&We.length>=1&&We.length<=63&&/^[a-z0-9]+(\-[a-z0-9]+)*$/.test(We)}static isValidTag(We){return typeof We=="string"&&We.length>=1&&We.length<=63&&/^[a-z0-9+#]+(\-[a-z0-9+#]+)*$/.test(We)}static isValidUrl(We){if(typeof We!="string")return!1;try{return new URL(We),!0}catch{return!1}}static isValidString(We){var bt;return typeof We=="string"&&((bt=We==null?void 0:We.trim())==null?void 0:bt.length)>=1}static isNonEmptyString(We){var bt;return typeof We=="string"&&((bt=We==null?void 0:We.trim())==null?void 0:bt.length)>=1}}var Be="http://json-schema.org/draft-07/schema",Ve="EntityEnvelope",qe="The envelope skeleton parts of an entity - whatever is necessary to be able to give it a ref and pass to further validation / policy checking.",Et=[{apiVersion:"backstage.io/v1alpha1",kind:"Component",metadata:{name:"LoremService"}}],at="object",Pt=["apiVersion","kind","metadata"],At=!0,q={apiVersion:{type:"string",description:"The version of specification format for this particular entity that this is written against.",minLength:1,examples:["backstage.io/v1alpha1","my-company.net/v1","1.0"]},kind:{type:"string",description:"The high level entity type being described.",minLength:1,examples:["API","Component","Domain","Group","Location","Resource","System","Template","User"]},metadata:{type:"object",required:["name"],additionalProperties:!0,properties:{name:{type:"string",description:"The name of the entity. Must be unique within the catalog at any given point in time, for any given namespace + kind pair.",examples:["metadata-proxy"],minLength:1},namespace:{type:"string",description:"The namespace that the entity belongs to.",default:"default",examples:["default","admin"],minLength:1}}}},rn={$schema:Be,$id:Ve,description:qe,examples:Et,type:at,required:Pt,additionalProperties:At,properties:q},ct="http://json-schema.org/draft-07/schema",xe="Entity",oe="The parts of the format that's common to all versions/kinds of entity.",Ue=[{apiVersion:"backstage.io/v1alpha1",kind:"Component",metadata:{name:"LoremService",description:"Creates Lorems like a pro.",labels:{product_name:"Random value Generator"},annotations:{docs:"https://github.com/..../tree/develop/doc"}},spec:{type:"service",lifecycle:"production",owner:"tools"}}],de="object",p=["apiVersion","kind","metadata"],G=!1,ye={apiVersion:{type:"string",description:"The version of specification format for this particular entity that this is written against.",minLength:1,examples:["backstage.io/v1alpha1","my-company.net/v1","1.0"]},kind:{type:"string",description:"The high level entity type being described.",minLength:1,examples:["API","Component","Domain","Group","Location","Resource","System","Template","User"]},metadata:{$ref:"EntityMeta"},spec:{type:"object",description:"The specification data describing the entity itself."},relations:{type:"array",description:"The relations that this entity has with other entities.",items:{$ref:"common#relation"}},status:{$ref:"common#status"}},nt={$schema:ct,$id:xe,description:oe,examples:Ue,type:de,required:p,additionalProperties:G,properties:ye},be="http://json-schema.org/draft-07/schema",je="EntityMeta",ft="Metadata fields common to all versions/kinds of entity.",F=[{uid:"e01199ab-08cc-44c2-8e19-5c29ded82521",etag:"lsndfkjsndfkjnsdfkjnsd==",name:"my-component-yay",namespace:"the-namespace",labels:{"backstage.io/custom":"ValueStuff"},annotations:{"example.com/bindings":"are-secret"},tags:["java","data"]}],N="object",_e=["name"],ze=!0,dt={uid:{type:"string",description:"A globally unique ID for the entity. This field can not be set by the user at creation time, and the server will reject an attempt to do so. The field will be populated in read operations. The field can (optionally) be specified when performing update or delete operations, but the server is free to reject requests that do so in such a way that it breaks semantics.",examples:["e01199ab-08cc-44c2-8e19-5c29ded82521"],minLength:1},etag:{type:"string",description:"An opaque string that changes for each update operation to any part of the entity, including metadata. This field can not be set by the user at creation time, and the server will reject an attempt to do so. The field will be populated in read operations. The field can (optionally) be specified when performing update or delete operations, and the server will then reject the operation if it does not match the current stored value.",examples:["lsndfkjsndfkjnsdfkjnsd=="],minLength:1},name:{type:"string",description:"The name of the entity. Must be unique within the catalog at any given point in time, for any given namespace + kind pair.",examples:["metadata-proxy"],minLength:1},namespace:{type:"string",description:"The namespace that the entity belongs to.",default:"default",examples:["default","admin"],minLength:1},title:{type:"string",description:"A display name of the entity, to be presented in user interfaces instead of the name property, when available.",examples:["React SSR Template"],minLength:1},description:{type:"string",description:"A short (typically relatively few words, on one line) description of the entity."},labels:{type:"object",description:"Key/value pairs of identifying information attached to the entity.",additionalProperties:!0,patternProperties:{"^.+$":{type:"string"}}},annotations:{type:"object",description:"Key/value pairs of non-identifying auxiliary information attached to the entity.",additionalProperties:!0,patternProperties:{"^.+$":{type:"string"}}},tags:{type:"array",description:"A list of single-valued strings, to for example classify catalog entities in various ways.",items:{type:"string",minLength:1}},links:{type:"array",description:"A list of external hyperlinks related to the entity. Links can provide additional contextual information that may be located outside of Backstage itself. For example, an admin dashboard or external CMS page.",items:{type:"object",required:["url"],properties:{url:{type:"string",description:"A url in a standard uri format.",examples:["https://admin.example-org.com"],minLength:1},title:{type:"string",description:"A user friendly display name for the link.",examples:["Admin Dashboard"],minLength:1},icon:{type:"string",description:"A key representing a visual icon to be displayed in the UI.",examples:["dashboard"],minLength:1},type:{type:"string",description:"An optional value to categorize links into specific groups.",examples:["runbook","documentation","logs","dashboard"],minLength:1}}}}},St={$schema:be,$id:je,description:ft,examples:F,type:N,required:_e,additionalProperties:ze,properties:dt},Bt="http://json-schema.org/draft-07/schema",Lt="common",Re="object",_t="Common definitions to import from other schemas",Ct={reference:{$id:"#reference",type:"object",description:"A reference by name to another entity.",required:["kind","namespace","name"],additionalProperties:!1,properties:{kind:{type:"string",description:"The kind field of the entity.",minLength:1},namespace:{type:"string",description:"The metadata.namespace field of the entity.",minLength:1},name:{type:"string",description:"The metadata.name field of the entity.",minLength:1}}},relation:{$id:"#relation",type:"object",description:"A directed relation from one entity to another.",required:["type","target"],additionalProperties:!1,properties:{type:{type:"string",minLength:1,pattern:"^\\w+$",description:"The type of relation."},target:{$ref:"#reference"},targetRef:{type:"string",minLength:1,description:"The entity ref of the target of this relation."}}},status:{$id:"#status",type:"object",description:"The current status of the entity, as claimed by various sources.",required:[],additionalProperties:!0,properties:{items:{type:"array",items:{$ref:"#statusItem"}}}},statusItem:{$id:"#statusItem",type:"object",description:"A specific status item on a well known format.",required:["type","level","message"],additionalProperties:!0,properties:{type:{type:"string",minLength:1},level:{$ref:"#statusLevel",description:"The status level / severity of the status item."},message:{type:"string",description:"A brief message describing the status, intended for human consumption."},error:{$ref:"#error",description:"An optional serialized error object related to the status."}}},statusLevel:{$id:"#statusLevel",type:"string",description:"A status level / severity.",enum:["info","warning","error"]},error:{$id:"#error",type:"object",description:"A serialized error object.",required:["name","message"],additionalProperties:!0,properties:{name:{type:"string",examples:["Error","InputError"],description:"The type name of the error",minLength:1},message:{type:"string",description:"The message of the error"},code:{type:"string",description:"An error code associated with the error"},stack:{type:"string",description:"An error stack trace"}}}},Qt={$schema:Bt,$id:Lt,type:Re,description:_t,definitions:Ct};const st=new Map,me=[rn,nt,St,Qt];function ce(rt){if(!(rt!=null&&rt.length))throw new TypeError("Unknown error");const We=rt[0];throw new TypeError(`${We.instancePath||"<root>"} ${We.message}${We.params?` - ${Object.entries(We.params).map(([bt,dn])=>`${bt}: ${dn}`).join(", ")}`:""}`)}function we(rt,We={}){var bt;const dn=(bt=We==null?void 0:We.disableCache)!=null?bt:!1,Pn=dn?"":JSON.stringify(rt);if(!dn){const Er=st.get(Pn);if(Er)return Er}const Wn=se(rt),Yn=new(f())({allowUnionTypes:!0,allErrors:!0,validateSchema:!0});Wn.length&&Yn.addSchema(Wn,void 0,void 0,!0);const hr=Yn.compile(rt);return dn||st.set(Pn,hr),hr}function se(rt){if(typeof rt!="object")return[];const We=new Set;rt.$id&&We.add(rt.$id);const bt=new Array,dn=[rt];for(;dn.length;){const Pn=dn.pop();for(const Wn of Te(Pn))if(!We.has(Wn)){We.add(Wn);const Yn=me.find(hr=>hr.$id===Wn);Yn&&(bt.push(Yn),dn.push(Yn))}}return bt}function*Te(rt){const We=[rt];for(;We.length;){const bt=We.pop();if(typeof bt=="object"&&bt)for(const[dn,Pn]of Object.entries(bt))dn==="$ref"&&typeof Pn=="string"?yield Pn.split("#")[0]:We.push(Pn)}}function Ae(rt){const We=we(rt||rn);return bt=>{if(We(bt)===!0)return bt;throw ce(We.errors)}}function Ne(rt){const We=we(rt);return bt=>{var dn;if(We(bt)===!0)return bt;const Wn=(dn=We.errors)==null?void 0:dn.filter(Yn=>["/kind","/apiVersion"].includes(Yn.instancePath));if((Wn==null?void 0:Wn.length)&&Wn.every(Yn=>Yn.keyword==="enum"))return!1;throw ce(We.errors)}}function Q(rt){const We=we(rt||nt);return bt=>{if(We(bt)===!0)return bt;throw ce(We.errors)}}class T{static isValidApiVersion(We){return Ee.isValidPrefixAndOrSuffix(We,"/",Ee.isValidDnsSubdomain,bt=>bt.length>=1&&bt.length<=63&&/^[a-z0-9A-Z]+$/.test(bt))}static isValidKind(We){return typeof We=="string"&&We.length>=1&&We.length<=63&&/^[a-zA-Z][a-z0-9A-Z]*$/.test(We)}static isValidObjectName(We){return typeof We=="string"&&We.length>=1&&We.length<=63&&/^([A-Za-z0-9][-A-Za-z0-9_.]*)?[A-Za-z0-9]$/.test(We)}static isValidNamespace(We){return Ee.isValidDnsLabel(We)}static isValidLabelKey(We){return Ee.isValidPrefixAndOrSuffix(We,"/",Ee.isValidDnsSubdomain,T.isValidObjectName)}static isValidLabelValue(We){return We===""||T.isValidObjectName(We)}static isValidAnnotationKey(We){return Ee.isValidPrefixAndOrSuffix(We,"/",Ee.isValidDnsSubdomain,T.isValidObjectName)}static isValidAnnotationValue(We){return typeof We=="string"}}const X={isValidApiVersion:T.isValidApiVersion,isValidKind:T.isValidKind,isValidEntityName:T.isValidObjectName,isValidNamespace:T.isValidNamespace,isValidLabelKey:T.isValidLabelKey,isValidLabelValue:T.isValidLabelValue,isValidAnnotationKey:T.isValidAnnotationKey,isValidAnnotationValue:T.isValidAnnotationValue,isValidTag:rt=>typeof rt=="string"&&rt.length>=1&&rt.length<=63&&/^[a-z0-9:+#]+(\-[a-z0-9:+#]+)*$/.test(rt)};function ne(rt={}){return{...X,...rt}}class fe{constructor(We=ne()){this.validators=We}async enforce(We){var bt,dn,Pn,Wn,Yn,hr,Er;function ir(jn,J,he){if(J==null)throw new Error(`${jn} must have a value`);let Ie;try{Ie=he(J)}catch(Qe){throw new Error(`${jn} could not be validated, ${Qe}`)}if(!Ie){let Qe;switch(he.name){case"isValidLabelValue":case"isValidObjectName":Qe="a string that is sequences of [a-zA-Z0-9] separated by any of [-_.], at most 63 characters in total";break;case"isValidLabelKey":case"isValidApiVersion":case"isValidAnnotationKey":Qe="a valid prefix and/or suffix";break;case"isValidNamespace":case"isValidDnsLabel":Qe="a string that is sequences of [a-z0-9] separated by [-], at most 63 characters in total";break;case"isValidTag":Qe="a string that is sequences of [a-z0-9+#] separated by [-], at most 63 characters in total";break;case"isValidAnnotationValue":Qe="a string";break;case"isValidKind":Qe="a string that is a sequence of [a-zA-Z][a-z0-9A-Z], at most 63 characters in total";break;case"isValidUrl":Qe="a string that is a valid url";break;case"isValidString":case"isNonEmptyString":Qe="a non empty string";break;default:Qe=void 0;break}const Rt=Qe?` expected ${Qe} but found "${J}".`:"";throw new Error(`"${jn}" is not valid;${Rt} To learn more about catalog file format, visit: https://github.com/backstage/backstage/blob/master/docs/architecture-decisions/adr002-default-catalog-file-format.md`)}}function _r(jn,J,he){return J===void 0||ir(jn,J,he)}ir("apiVersion",We.apiVersion,this.validators.isValidApiVersion),ir("kind",We.kind,this.validators.isValidKind),ir("metadata.name",We.metadata.name,this.validators.isValidEntityName),_r("metadata.namespace",We.metadata.namespace,this.validators.isValidNamespace);for(const[jn,J]of Object.entries((bt=We.metadata.labels)!=null?bt:[]))ir(`labels.${jn}`,jn,this.validators.isValidLabelKey),ir(`labels.${jn}`,J,this.validators.isValidLabelValue);for(const[jn,J]of Object.entries((dn=We.metadata.annotations)!=null?dn:[]))ir(`annotations.${jn}`,jn,this.validators.isValidAnnotationKey),ir(`annotations.${jn}`,J,this.validators.isValidAnnotationValue);const gr=(Pn=We.metadata.tags)!=null?Pn:[];for(let jn=0;jn<gr.length;++jn)ir(`tags.${jn}`,gr[jn],this.validators.isValidTag);const Br=(Wn=We.metadata.links)!=null?Wn:[];for(let jn=0;jn<Br.length;++jn)ir(`links.${jn}.url`,(Yn=Br[jn])==null?void 0:Yn.url,Ee.isValidUrl),_r(`links.${jn}.title`,(hr=Br[jn])==null?void 0:hr.title,Ee.isNonEmptyString),_r(`links.${jn}.icon`,(Er=Br[jn])==null?void 0:Er.icon,T.isValidObjectName);return We}}const te=null;class ge{constructor(We=te){this.knownFields=We}async enforce(We){for(const bt of Object.keys(We))if(!this.knownFields.includes(bt))throw new Error(`Unknown field ${bt}`);return We}}class He{async enforce(We){if(!this.validate){const Pn=new Ajv({allowUnionTypes:!0});this.validate=Pn.addSchema([Qt,St],void 0,void 0,!0).compile(nt)}if(this.validate(We)===!0)return We;const[dn]=this.validate.errors||[];throw dn?new Error(`Malformed envelope, ${dn.instancePath||"<root>"} ${dn.message}`):new Error("Malformed envelope, Unknown error")}}class it{constructor(We){this.policies=We}async enforce(We){let bt=We;for(const dn of this.policies){const Pn=await dn.enforce(bt);if(!Pn)throw new Error(`Policy ${dn.constructor.name} did not return a result`);bt=Pn}return bt}}class ht{constructor(We){this.policies=We}async enforce(We){for(const bt of this.policies){const dn=await bt.enforce(We);if(dn)return dn}throw new Error("The entity did not match any known policy")}}const ve={allOf(rt){return new it(rt)},oneOf(rt){return new ht(rt)}};var Fe="http://json-schema.org/draft-07/schema",mt="ApiV1alpha1",$t="An API describes an interface that can be exposed by a component. The API can be defined in different formats, like OpenAPI, AsyncAPI, GraphQL, gRPC, or other formats.",Zt=[{apiVersion:"backstage.io/v1alpha1",kind:"API",metadata:{name:"artist-api",description:"Retrieve artist details",labels:{product_name:"Random value Generator"},annotations:{docs:"https://github.com/..../tree/develop/doc"}},spec:{type:"openapi",lifecycle:"production",owner:"artist-relations-team",system:"artist-engagement-portal",definition:`openapi: "3.0.0"
info:...`}}],Gt=[{$ref:"Entity"},{type:"object",required:["spec"],properties:{apiVersion:{enum:["backstage.io/v1alpha1","backstage.io/v1beta1"]},kind:{enum:["API"]},spec:{type:"object",required:["type","lifecycle","owner","definition"],properties:{type:{type:"string",description:"The type of the API definition.",examples:["openapi","asyncapi","graphql","grpc"],minLength:1},lifecycle:{type:"string",description:"The lifecycle state of the API.",examples:["experimental","production","deprecated"],minLength:1},owner:{type:"string",description:"An entity reference to the owner of the API.",examples:["artist-relations-team","user:john.johnson"],minLength:1},system:{type:"string",description:"An entity reference to the system that the API belongs to.",minLength:1},definition:{type:"string",description:"The definition of the API, based on the format defined by the type.",minLength:1}}}}}],Jt={$schema:Fe,$id:mt,description:$t,examples:Zt,allOf:Gt};function xt(rt){let We;return{async check(bt){return We||(We=Ne(rt)),We(bt)===bt}}}const sn=xt(Jt);var De="http://json-schema.org/draft-07/schema",Je="ComponentV1alpha1",et='A Component describes a software component. It is typically intimately linked to the source code that constitutes the component, and should be what a developer may regard a "unit of software", usually with a distinct deployable or linkable artifact.',ae=[{apiVersion:"backstage.io/v1alpha1",kind:"Component",metadata:{name:"LoremService",description:"Creates Lorems like a pro.",labels:{product_name:"Random value Generator"},annotations:{docs:"https://github.com/..../tree/develop/doc"}},spec:{type:"service",lifecycle:"production",owner:"tools"}}],pe=[{$ref:"Entity"},{type:"object",required:["spec"],properties:{apiVersion:{enum:["backstage.io/v1alpha1","backstage.io/v1beta1"]},kind:{enum:["Component"]},spec:{type:"object",required:["type","lifecycle","owner"],properties:{type:{type:"string",description:"The type of component.",examples:["service","website","library"],minLength:1},lifecycle:{type:"string",description:"The lifecycle state of the component.",examples:["experimental","production","deprecated"],minLength:1},owner:{type:"string",description:"An entity reference to the owner of the component.",examples:["artist-relations-team","user:john.johnson"],minLength:1},system:{type:"string",description:"An entity reference to the system that the component belongs to.",minLength:1},subcomponentOf:{type:"string",description:"An entity reference to another component of which the component is a part.",minLength:1},providesApis:{type:"array",description:"An array of entity references to the APIs that are provided by the component.",items:{type:"string",minLength:1}},consumesApis:{type:"array",description:"An array of entity references to the APIs that are consumed by the component.",items:{type:"string",minLength:1}},dependsOn:{type:"array",description:"An array of references to other entities that the component depends on to function.",items:{type:"string",minLength:1}}}}}}],ke={$schema:De,$id:Je,description:et,examples:ae,allOf:pe};const Ze=xt(ke);var Se="http://json-schema.org/draft-07/schema",pt="DomainV1alpha1",vt="A Domain groups a collection of systems that share terminology, domain models, business purpose, or documentation, i.e. form a bounded context.",zt=[{apiVersion:"backstage.io/v1alpha1",kind:"Domain",metadata:{name:"artists",description:"Everything about artists"},spec:{owner:"artist-relations-team"}}],Tt=[{$ref:"Entity"},{type:"object",required:["spec"],properties:{apiVersion:{enum:["backstage.io/v1alpha1","backstage.io/v1beta1"]},kind:{enum:["Domain"]},spec:{type:"object",required:["owner"],properties:{owner:{type:"string",description:"An entity reference to the owner of the component.",examples:["artist-relations-team","user:john.johnson"],minLength:1}}}}}],It={$schema:Se,$id:pt,description:vt,examples:zt,allOf:Tt};const Ut=xt(It);var ln="http://json-schema.org/draft-07/schema",mn="GroupV1alpha1",cn="A group describes an organizational entity, such as for example a team, a business unit, or a loose collection of people in an interest group. Members of these groups are modeled in the catalog as kind User.",En=[{apiVersion:"backstage.io/v1alpha1",kind:"Group",metadata:{name:"infrastructure",description:"The infra business unit"},spec:{type:"business-unit",profile:{displayName:"Infrastructure",email:"infrastructure@example.com",picture:"https://example.com/groups/bu-infrastructure.jpeg"},parent:"ops",children:["backstage","other"]}}],en=[{$ref:"Entity"},{type:"object",required:["spec"],properties:{apiVersion:{enum:["backstage.io/v1alpha1","backstage.io/v1beta1"]},kind:{enum:["Group"]},spec:{type:"object",required:["type","children"],properties:{type:{type:"string",description:"The type of group. There is currently no enforced set of values for this field, so it is left up to the adopting organization to choose a nomenclature that matches their org hierarchy.",examples:["team","business-unit","product-area","root"],minLength:1},profile:{type:"object",description:"Optional profile information about the group, mainly for display purposes. All fields of this structure are also optional. The email would be a group email of some form, that the group may wish to be used for contacting them. The picture is expected to be a URL pointing to an image that's representative of the group, and that a browser could fetch and render on a group page or similar.",properties:{displayName:{type:"string",description:"A simple display name to present to users.",examples:["Infrastructure"],minLength:1},email:{type:"string",description:"An email where this entity can be reached.",examples:["infrastructure@example.com"],minLength:1},picture:{type:"string",description:"The URL of an image that represents this entity.",examples:["https://example.com/groups/bu-infrastructure.jpeg"],minLength:1}}},parent:{type:"string",description:"The immediate parent group in the hierarchy, if any. Not all groups must have a parent; the catalog supports multi-root hierarchies. Groups may however not have more than one parent. This field is an entity reference.",examples:["ops"],minLength:1},children:{type:"array",description:"The immediate child groups of this group in the hierarchy (whose parent field points to this group). The list must be present, but may be empty if there are no child groups. The items are not guaranteed to be ordered in any particular way. The entries of this array are entity references.",items:{type:"string",examples:["backstage","other"],minLength:1}},members:{type:"array",description:"The users that are members of this group. The entries of this array are entity references.",items:{type:"string",examples:["jdoe"],minLength:1}}}}}}],Sn={$schema:ln,$id:mn,description:cn,examples:En,allOf:en};const On=xt(Sn);var In="http://json-schema.org/draft-07/schema",Ln="LocationV1alpha1",Dn="A location is a marker that references other places to look for catalog data.",Mn=[{apiVersion:"backstage.io/v1alpha1",kind:"Location",metadata:{name:"org-data"},spec:{type:"url",targets:["http://github.com/myorg/myproject/org-data-dump/catalog-info-staff.yaml","http://github.com/myorg/myproject/org-data-dump/catalog-info-consultants.yaml"]}}],Zn=[{$ref:"Entity"},{type:"object",required:["spec"],properties:{apiVersion:{enum:["backstage.io/v1alpha1","backstage.io/v1beta1"]},kind:{enum:["Location"]},spec:{type:"object",required:[],properties:{type:{type:"string",description:"The single location type, that's common to the targets specified in the spec. If it is left out, it is inherited from the location type that originally read the entity data.",examples:["url"],minLength:1},target:{type:"string",description:"A single target as a string. Can be either an absolute path/URL (depending on the type), or a relative path such as ./details/catalog-info.yaml which is resolved relative to the location of this Location entity itself.",examples:["./details/catalog-info.yaml"],minLength:1},targets:{type:"array",description:"A list of targets as strings. They can all be either absolute paths/URLs (depending on the type), or relative paths such as ./details/catalog-info.yaml which are resolved relative to the location of this Location entity itself.",items:{type:"string",examples:["./details/catalog-info.yaml","http://github.com/myorg/myproject/org-data-dump/catalog-info-staff.yaml"],minLength:1}},presence:{type:"string",description:"Whether the presence of the location target is required and it should be considered an error if it can not be found",default:"required",examples:["required"],enum:["required","optional"]}}}}}],Rn={$schema:In,$id:Ln,description:Dn,examples:Mn,allOf:Zn};const $n=xt(Rn),Vn="ownedBy",cr="ownerOf",ur="consumesApi",Z="apiConsumedBy",v="providesApi",i="apiProvidedBy",u="dependsOn",o="dependencyOf",l="parentOf",_="childOf",b="memberOf",L="hasMember",re="partOf",Oe="hasPart";var Le="http://json-schema.org/draft-07/schema",tt="ResourceV1alpha1",Ht="A resource describes the infrastructure a system needs to operate, like BigTable databases, Pub/Sub topics, S3 buckets or CDNs. Modelling them together with components and systems allows to visualize resource footprint, and create tooling around them.",Dt=[{apiVersion:"backstage.io/v1alpha1",kind:"Resource",metadata:{name:"artists-db",description:"Stores artist details"},spec:{type:"database",owner:"artist-relations-team",system:"artist-engagement-portal"}}],tn=[{$ref:"Entity"},{type:"object",required:["spec"],properties:{apiVersion:{enum:["backstage.io/v1alpha1","backstage.io/v1beta1"]},kind:{enum:["Resource"]},spec:{type:"object",required:["type","owner"],properties:{type:{type:"string",description:"The type of resource.",examples:["database","s3-bucket","cluster"],minLength:1},owner:{type:"string",description:"An entity reference to the owner of the resource.",examples:["artist-relations-team","user:john.johnson"],minLength:1},dependsOn:{type:"array",description:"An array of references to other entities that the resource depends on to function.",items:{type:"string",minLength:1}},system:{type:"string",description:"An entity reference to the system that the resource belongs to.",minLength:1}}}}}],Vt={$schema:Le,$id:tt,description:Ht,examples:Dt,allOf:tn};const qt=xt(Vt);var xn="http://json-schema.org/draft-07/schema",_n="SystemV1alpha1",nn="A system is a collection of resources and components. The system may expose or consume one or several APIs. It is viewed as abstraction level that provides potential consumers insights into exposed features without needing a too detailed view into the details of all components. This also gives the owning team the possibility to decide about published artifacts and APIs.",vn=[{apiVersion:"backstage.io/v1alpha1",kind:"System",metadata:{name:"artist-engagement-portal",description:"Handy tools to keep artists in the loop"},spec:{owner:"artist-relations-team",domain:"artists"}}],Tn=[{$ref:"Entity"},{type:"object",required:["spec"],properties:{apiVersion:{enum:["backstage.io/v1alpha1","backstage.io/v1beta1"]},kind:{enum:["System"]},spec:{type:"object",required:["owner"],properties:{owner:{type:"string",description:"An entity reference to the owner of the component.",examples:["artist-relations-team","user:john.johnson"],minLength:1},domain:{type:"string",description:"An entity reference to the domain that the system belongs to.",examples:["artists"],minLength:1}}}}}],H={$schema:xn,$id:_n,description:nn,examples:vn,allOf:Tn};const s=xt(H);var y="http://json-schema.org/draft-07/schema",B="UserV1alpha1",Y="A user describes a person, such as an employee, a contractor, or similar. Users belong to Group entities in the catalog. These catalog user entries are connected to the way that authentication within the Backstage ecosystem works. See the auth section of the docs for a discussion of these concepts.",Pe=[{apiVersion:"backstage.io/v1alpha1",kind:"User",metadata:{name:"jdoe"},spec:{profile:{displayName:"Jenny Doe",email:"jenny-doe@example.com",picture:"https://example.com/staff/jenny-with-party-hat.jpeg"},memberOf:["team-b","employees"]}}],Xe=[{$ref:"Entity"},{type:"object",required:["spec"],properties:{apiVersion:{enum:["backstage.io/v1alpha1","backstage.io/v1beta1"]},kind:{enum:["User"]},spec:{type:"object",required:["memberOf"],properties:{profile:{type:"object",description:"Optional profile information about the user, mainly for display purposes. All fields of this structure are also optional. The email would be a primary email of some form, that the user may wish to be used for contacting them. The picture is expected to be a URL pointing to an image that's representative of the user, and that a browser could fetch and render on a profile page or similar.",properties:{displayName:{type:"string",description:"A simple display name to present to users.",examples:["Jenny Doe"],minLength:1},email:{type:"string",description:"An email where this user can be reached.",examples:["jenny-doe@example.com"],minLength:1},picture:{type:"string",description:"The URL of an image that represents this user.",examples:["https://example.com/staff/jenny-with-party-hat.jpeg"],minLength:1}}},memberOf:{type:"array",description:"The list of groups that the user is a direct member of (i.e., no transitive memberships are listed here). The list must be present, but may be empty if the user is not member of any groups. The items are not guaranteed to be ordered in any particular way. The entries of this array are entity references.",items:{type:"string",examples:["team-b","employees"],minLength:1}}}}}}],ot={$schema:y,$id:B,description:Y,examples:Pe,allOf:Xe};const kt=xt(ot),on="backstage.io/managed-by-location",un="backstage.io/managed-by-origin-location",Bn="backstage.io/source-location";function An(rt){if(typeof rt!="string")throw new TypeError(`Unable to parse location ref '${rt}', unexpected argument ${typeof rt}`);const We=rt.indexOf(":");if(We<0)throw new TypeError(`Unable to parse location ref '${rt}', expected '<type>:<target>', e.g. 'url:https://host/path'`);const bt=rt.substring(0,We).trim(),dn=rt.substring(We+1).trim();if(!bt||!dn)throw new TypeError(`Unable to parse location ref '${rt}', expected '<type>:<target>', e.g. 'url:https://host/path'`);if(bt==="http"||bt==="https")throw new TypeError(`Invalid location ref '${rt}', please prefix it with 'url:', e.g. 'url:${rt}'`);return{type:bt,target:dn}}function Nn(rt){const{type:We,target:bt}=rt;if(We){if(!bt)throw new TypeError("Unable to stringify location ref, empty target")}else throw new TypeError("Unable to stringify location ref, empty type");return`${We}:${bt}`}function Gn(rt){var We,bt,dn,Pn,Wn;const Yn=(Wn=(bt=(We=rt.metadata)==null?void 0:We.annotations)==null?void 0:bt[Bn])!=null?Wn:(Pn=(dn=rt.metadata)==null?void 0:dn.annotations)==null?void 0:Pn[on];if(!Yn)throw new Error(`Entity '${x(rt)}' is missing location`);return An(Yn)}},53911:function(Mt,g,t){Object.defineProperty(g,"__esModule",{value:!0}),g.CodeGen=g.Name=g.nil=g.stringify=g.str=g._=g.KeywordCxt=void 0;const e=t(61889),d=t(57993),E=t(99908),f=t(51020),r=["/properties"],c="http://json-schema.org/draft-07/schema";class S extends e.default{_addVocabularies(){super._addVocabularies(),d.default.forEach(M=>this.addVocabulary(M)),this.opts.discriminator&&this.addKeyword(E.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const M=this.opts.$data?this.$dataMetaSchema(f,r):f;this.addMetaSchema(M,c,!1),this.refs["http://json-schema.org/schema"]=c}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(c)?c:void 0)}}Mt.exports=g=S,Object.defineProperty(g,"__esModule",{value:!0}),g.default=S;var O=t(4371);Object.defineProperty(g,"KeywordCxt",{enumerable:!0,get:function(){return O.KeywordCxt}});var h=t(82481);Object.defineProperty(g,"_",{enumerable:!0,get:function(){return h._}}),Object.defineProperty(g,"str",{enumerable:!0,get:function(){return h.str}}),Object.defineProperty(g,"stringify",{enumerable:!0,get:function(){return h.stringify}}),Object.defineProperty(g,"nil",{enumerable:!0,get:function(){return h.nil}}),Object.defineProperty(g,"Name",{enumerable:!0,get:function(){return h.Name}}),Object.defineProperty(g,"CodeGen",{enumerable:!0,get:function(){return h.CodeGen}})},91475:function(Mt,g){Object.defineProperty(g,"__esModule",{value:!0}),g.regexpCode=g.getEsmExportName=g.getProperty=g.safeStringify=g.stringify=g.strConcat=g.addCodeArg=g.str=g._=g.nil=g._Code=g.Name=g.IDENTIFIER=g._CodeOrName=void 0;class t{}g._CodeOrName=t,g.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class e extends t{constructor(D){if(super(),!g.IDENTIFIER.test(D))throw new Error("CodeGen: name must be a valid identifier");this.str=D}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}g.Name=e;class d extends t{constructor(D){super(),this._items=typeof D=="string"?[D]:D}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const D=this._items[0];return D===""||D==='""'}get str(){var D;return(D=this._str)!==null&&D!==void 0?D:this._str=this._items.reduce((P,$)=>`${P}${$}`,"")}get names(){var D;return(D=this._names)!==null&&D!==void 0?D:this._names=this._items.reduce((P,$)=>($ instanceof e&&(P[$.str]=(P[$.str]||0)+1),P),{})}}g._Code=d,g.nil=new d("");function E(w,...D){const P=[w[0]];let $=0;for(;$<D.length;)c(P,D[$]),P.push(w[++$]);return new d(P)}g._=E;const f=new d("+");function r(w,...D){const P=[z(w[0])];let $=0;for(;$<D.length;)P.push(f),c(P,D[$]),P.push(f,z(w[++$]));return S(P),new d(P)}g.str=r;function c(w,D){D instanceof d?w.push(...D._items):D instanceof e?w.push(D):w.push(R(D))}g.addCodeArg=c;function S(w){let D=1;for(;D<w.length-1;){if(w[D]===f){const P=O(w[D-1],w[D+1]);if(P!==void 0){w.splice(D-1,3,P);continue}w[D++]="+"}D++}}function O(w,D){if(D==='""')return w;if(w==='""')return D;if(typeof w=="string")return D instanceof e||w[w.length-1]!=='"'?void 0:typeof D!="string"?`${w.slice(0,-1)}${D}"`:D[0]==='"'?w.slice(0,-1)+D.slice(1):void 0;if(typeof D=="string"&&D[0]==='"'&&!(w instanceof e))return`"${w}${D.slice(1)}`}function h(w,D){return D.emptyStr()?w:w.emptyStr()?D:r`${w}${D}`}g.strConcat=h;function R(w){return typeof w=="number"||typeof w=="boolean"||w===null?w:z(Array.isArray(w)?w.join(","):w)}function M(w){return new d(z(w))}g.stringify=M;function z(w){return JSON.stringify(w).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}g.safeStringify=z;function K(w){return typeof w=="string"&&g.IDENTIFIER.test(w)?new d(`.${w}`):E`[${w}]`}g.getProperty=K;function j(w){if(typeof w=="string"&&g.IDENTIFIER.test(w))return new d(`${w}`);throw new Error(`CodeGen: invalid export name: ${w}, use explicit $id name mapping`)}g.getEsmExportName=j;function ie(w){return new d(w.toString())}g.regexpCode=ie},82481:function(Mt,g,t){Object.defineProperty(g,"__esModule",{value:!0}),g.or=g.and=g.not=g.CodeGen=g.operators=g.varKinds=g.ValueScopeName=g.ValueScope=g.Scope=g.Name=g.regexpCode=g.stringify=g.getProperty=g.nil=g.strConcat=g.str=g._=void 0;const e=t(91475),d=t(66162);var E=t(91475);Object.defineProperty(g,"_",{enumerable:!0,get:function(){return E._}}),Object.defineProperty(g,"str",{enumerable:!0,get:function(){return E.str}}),Object.defineProperty(g,"strConcat",{enumerable:!0,get:function(){return E.strConcat}}),Object.defineProperty(g,"nil",{enumerable:!0,get:function(){return E.nil}}),Object.defineProperty(g,"getProperty",{enumerable:!0,get:function(){return E.getProperty}}),Object.defineProperty(g,"stringify",{enumerable:!0,get:function(){return E.stringify}}),Object.defineProperty(g,"regexpCode",{enumerable:!0,get:function(){return E.regexpCode}}),Object.defineProperty(g,"Name",{enumerable:!0,get:function(){return E.Name}});var f=t(66162);Object.defineProperty(g,"Scope",{enumerable:!0,get:function(){return f.Scope}}),Object.defineProperty(g,"ValueScope",{enumerable:!0,get:function(){return f.ValueScope}}),Object.defineProperty(g,"ValueScopeName",{enumerable:!0,get:function(){return f.ValueScopeName}}),Object.defineProperty(g,"varKinds",{enumerable:!0,get:function(){return f.varKinds}}),g.operators={GT:new e._Code(">"),GTE:new e._Code(">="),LT:new e._Code("<"),LTE:new e._Code("<="),EQ:new e._Code("==="),NEQ:new e._Code("!=="),NOT:new e._Code("!"),OR:new e._Code("||"),AND:new e._Code("&&"),ADD:new e._Code("+")};class r{optimizeNodes(){return this}optimizeNames(p,G){return this}}class c extends r{constructor(p,G,ye){super(),this.varKind=p,this.name=G,this.rhs=ye}render({es5:p,_n:G}){const ye=p?d.varKinds.var:this.varKind,nt=this.rhs===void 0?"":` = ${this.rhs}`;return`${ye} ${this.name}${nt};`+G}optimizeNames(p,G){if(!!p[this.name.str])return this.rhs&&(this.rhs=at(this.rhs,p,G)),this}get names(){return this.rhs instanceof e._CodeOrName?this.rhs.names:{}}}class S extends r{constructor(p,G,ye){super(),this.lhs=p,this.rhs=G,this.sideEffects=ye}render({_n:p}){return`${this.lhs} = ${this.rhs};`+p}optimizeNames(p,G){if(!(this.lhs instanceof e.Name&&!p[this.lhs.str]&&!this.sideEffects))return this.rhs=at(this.rhs,p,G),this}get names(){const p=this.lhs instanceof e.Name?{}:{...this.lhs.names};return Et(p,this.rhs)}}class O extends S{constructor(p,G,ye,nt){super(p,ye,nt),this.op=G}render({_n:p}){return`${this.lhs} ${this.op}= ${this.rhs};`+p}}class h extends r{constructor(p){super(),this.label=p,this.names={}}render({_n:p}){return`${this.label}:`+p}}class R extends r{constructor(p){super(),this.label=p,this.names={}}render({_n:p}){return`break${this.label?` ${this.label}`:""};`+p}}class M extends r{constructor(p){super(),this.error=p}render({_n:p}){return`throw ${this.error};`+p}get names(){return this.error.names}}class z extends r{constructor(p){super(),this.code=p}render({_n:p}){return`${this.code};`+p}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(p,G){return this.code=at(this.code,p,G),this}get names(){return this.code instanceof e._CodeOrName?this.code.names:{}}}class K extends r{constructor(p=[]){super(),this.nodes=p}render(p){return this.nodes.reduce((G,ye)=>G+ye.render(p),"")}optimizeNodes(){const{nodes:p}=this;let G=p.length;for(;G--;){const ye=p[G].optimizeNodes();Array.isArray(ye)?p.splice(G,1,...ye):ye?p[G]=ye:p.splice(G,1)}return p.length>0?this:void 0}optimizeNames(p,G){const{nodes:ye}=this;let nt=ye.length;for(;nt--;){const be=ye[nt];be.optimizeNames(p,G)||(Pt(p,be.names),ye.splice(nt,1))}return ye.length>0?this:void 0}get names(){return this.nodes.reduce((p,G)=>qe(p,G.names),{})}}class j extends K{render(p){return"{"+p._n+super.render(p)+"}"+p._n}}class ie extends K{}class w extends j{}w.kind="else";class D extends j{constructor(p,G){super(G),this.condition=p}render(p){let G=`if(${this.condition})`+super.render(p);return this.else&&(G+="else "+this.else.render(p)),G}optimizeNodes(){super.optimizeNodes();const p=this.condition;if(p===!0)return this.nodes;let G=this.else;if(G){const ye=G.optimizeNodes();G=this.else=Array.isArray(ye)?new w(ye):ye}if(G)return p===!1?G instanceof D?G:G.nodes:this.nodes.length?this:new D(At(p),G instanceof D?[G]:G.nodes);if(!(p===!1||!this.nodes.length))return this}optimizeNames(p,G){var ye;if(this.else=(ye=this.else)===null||ye===void 0?void 0:ye.optimizeNames(p,G),!!(super.optimizeNames(p,G)||this.else))return this.condition=at(this.condition,p,G),this}get names(){const p=super.names;return Et(p,this.condition),this.else&&qe(p,this.else.names),p}}D.kind="if";class P extends j{}P.kind="for";class $ extends P{constructor(p){super(),this.iteration=p}render(p){return`for(${this.iteration})`+super.render(p)}optimizeNames(p,G){if(!!super.optimizeNames(p,G))return this.iteration=at(this.iteration,p,G),this}get names(){return qe(super.names,this.iteration.names)}}class U extends P{constructor(p,G,ye,nt){super(),this.varKind=p,this.name=G,this.from=ye,this.to=nt}render(p){const G=p.es5?d.varKinds.var:this.varKind,{name:ye,from:nt,to:be}=this;return`for(${G} ${ye}=${nt}; ${ye}<${be}; ${ye}++)`+super.render(p)}get names(){const p=Et(super.names,this.from);return Et(p,this.to)}}class I extends P{constructor(p,G,ye,nt){super(),this.loop=p,this.varKind=G,this.name=ye,this.iterable=nt}render(p){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(p)}optimizeNames(p,G){if(!!super.optimizeNames(p,G))return this.iterable=at(this.iterable,p,G),this}get names(){return qe(super.names,this.iterable.names)}}class m extends j{constructor(p,G,ye){super(),this.name=p,this.args=G,this.async=ye}render(p){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(p)}}m.kind="func";class x extends K{render(p){return"return "+super.render(p)}}x.kind="return";class W extends j{render(p){let G="try"+super.render(p);return this.catch&&(G+=this.catch.render(p)),this.finally&&(G+=this.finally.render(p)),G}optimizeNodes(){var p,G;return super.optimizeNodes(),(p=this.catch)===null||p===void 0||p.optimizeNodes(),(G=this.finally)===null||G===void 0||G.optimizeNodes(),this}optimizeNames(p,G){var ye,nt;return super.optimizeNames(p,G),(ye=this.catch)===null||ye===void 0||ye.optimizeNames(p,G),(nt=this.finally)===null||nt===void 0||nt.optimizeNames(p,G),this}get names(){const p=super.names;return this.catch&&qe(p,this.catch.names),this.finally&&qe(p,this.finally.names),p}}class Ee extends j{constructor(p){super(),this.error=p}render(p){return`catch(${this.error})`+super.render(p)}}Ee.kind="catch";class Be extends j{render(p){return"finally"+super.render(p)}}Be.kind="finally";class Ve{constructor(p,G={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...G,_n:G.lines?`
`:""},this._extScope=p,this._scope=new d.Scope({parent:p}),this._nodes=[new ie]}toString(){return this._root.render(this.opts)}name(p){return this._scope.name(p)}scopeName(p){return this._extScope.name(p)}scopeValue(p,G){const ye=this._extScope.value(p,G);return(this._values[ye.prefix]||(this._values[ye.prefix]=new Set)).add(ye),ye}getScopeValue(p,G){return this._extScope.getValue(p,G)}scopeRefs(p){return this._extScope.scopeRefs(p,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(p,G,ye,nt){const be=this._scope.toName(G);return ye!==void 0&&nt&&(this._constants[be.str]=ye),this._leafNode(new c(p,be,ye)),be}const(p,G,ye){return this._def(d.varKinds.const,p,G,ye)}let(p,G,ye){return this._def(d.varKinds.let,p,G,ye)}var(p,G,ye){return this._def(d.varKinds.var,p,G,ye)}assign(p,G,ye){return this._leafNode(new S(p,G,ye))}add(p,G){return this._leafNode(new O(p,g.operators.ADD,G))}code(p){return typeof p=="function"?p():p!==e.nil&&this._leafNode(new z(p)),this}object(...p){const G=["{"];for(const[ye,nt]of p)G.length>1&&G.push(","),G.push(ye),(ye!==nt||this.opts.es5)&&(G.push(":"),(0,e.addCodeArg)(G,nt));return G.push("}"),new e._Code(G)}if(p,G,ye){if(this._blockNode(new D(p)),G&&ye)this.code(G).else().code(ye).endIf();else if(G)this.code(G).endIf();else if(ye)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(p){return this._elseNode(new D(p))}else(){return this._elseNode(new w)}endIf(){return this._endBlockNode(D,w)}_for(p,G){return this._blockNode(p),G&&this.code(G).endFor(),this}for(p,G){return this._for(new $(p),G)}forRange(p,G,ye,nt,be=this.opts.es5?d.varKinds.var:d.varKinds.let){const je=this._scope.toName(p);return this._for(new U(be,je,G,ye),()=>nt(je))}forOf(p,G,ye,nt=d.varKinds.const){const be=this._scope.toName(p);if(this.opts.es5){const je=G instanceof e.Name?G:this.var("_arr",G);return this.forRange("_i",0,(0,e._)`${je}.length`,ft=>{this.var(be,(0,e._)`${je}[${ft}]`),ye(be)})}return this._for(new I("of",nt,be,G),()=>ye(be))}forIn(p,G,ye,nt=this.opts.es5?d.varKinds.var:d.varKinds.const){if(this.opts.ownProperties)return this.forOf(p,(0,e._)`Object.keys(${G})`,ye);const be=this._scope.toName(p);return this._for(new I("in",nt,be,G),()=>ye(be))}endFor(){return this._endBlockNode(P)}label(p){return this._leafNode(new h(p))}break(p){return this._leafNode(new R(p))}return(p){const G=new x;if(this._blockNode(G),this.code(p),G.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(x)}try(p,G,ye){if(!G&&!ye)throw new Error('CodeGen: "try" without "catch" and "finally"');const nt=new W;if(this._blockNode(nt),this.code(p),G){const be=this.name("e");this._currNode=nt.catch=new Ee(be),G(be)}return ye&&(this._currNode=nt.finally=new Be,this.code(ye)),this._endBlockNode(Ee,Be)}throw(p){return this._leafNode(new M(p))}block(p,G){return this._blockStarts.push(this._nodes.length),p&&this.code(p).endBlock(G),this}endBlock(p){const G=this._blockStarts.pop();if(G===void 0)throw new Error("CodeGen: not in self-balancing block");const ye=this._nodes.length-G;if(ye<0||p!==void 0&&ye!==p)throw new Error(`CodeGen: wrong number of nodes: ${ye} vs ${p} expected`);return this._nodes.length=G,this}func(p,G=e.nil,ye,nt){return this._blockNode(new m(p,G,ye)),nt&&this.code(nt).endFunc(),this}endFunc(){return this._endBlockNode(m)}optimize(p=1){for(;p-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(p){return this._currNode.nodes.push(p),this}_blockNode(p){this._currNode.nodes.push(p),this._nodes.push(p)}_endBlockNode(p,G){const ye=this._currNode;if(ye instanceof p||G&&ye instanceof G)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${G?`${p.kind}/${G.kind}`:p.kind}"`)}_elseNode(p){const G=this._currNode;if(!(G instanceof D))throw new Error('CodeGen: "else" without "if"');return this._currNode=G.else=p,this}get _root(){return this._nodes[0]}get _currNode(){const p=this._nodes;return p[p.length-1]}set _currNode(p){const G=this._nodes;G[G.length-1]=p}}g.CodeGen=Ve;function qe(de,p){for(const G in p)de[G]=(de[G]||0)+(p[G]||0);return de}function Et(de,p){return p instanceof e._CodeOrName?qe(de,p.names):de}function at(de,p,G){if(de instanceof e.Name)return ye(de);if(!nt(de))return de;return new e._Code(de._items.reduce((be,je)=>(je instanceof e.Name&&(je=ye(je)),je instanceof e._Code?be.push(...je._items):be.push(je),be),[]));function ye(be){const je=G[be.str];return je===void 0||p[be.str]!==1?be:(delete p[be.str],je)}function nt(be){return be instanceof e._Code&&be._items.some(je=>je instanceof e.Name&&p[je.str]===1&&G[je.str]!==void 0)}}function Pt(de,p){for(const G in p)de[G]=(de[G]||0)-(p[G]||0)}function At(de){return typeof de=="boolean"||typeof de=="number"||de===null?!de:(0,e._)`!${Ue(de)}`}g.not=At;const q=oe(g.operators.AND);function rn(...de){return de.reduce(q)}g.and=rn;const ct=oe(g.operators.OR);function xe(...de){return de.reduce(ct)}g.or=xe;function oe(de){return(p,G)=>p===e.nil?G:G===e.nil?p:(0,e._)`${Ue(p)} ${de} ${Ue(G)}`}function Ue(de){return de instanceof e.Name?de:(0,e._)`(${de})`}},66162:function(Mt,g,t){Object.defineProperty(g,"__esModule",{value:!0}),g.ValueScope=g.ValueScopeName=g.Scope=g.varKinds=g.UsedValueState=void 0;const e=t(91475);class d extends Error{constructor(h){super(`CodeGen: "code" for ${h} not defined`),this.value=h.value}}var E;(function(O){O[O.Started=0]="Started",O[O.Completed=1]="Completed"})(E=g.UsedValueState||(g.UsedValueState={})),g.varKinds={const:new e.Name("const"),let:new e.Name("let"),var:new e.Name("var")};class f{constructor({prefixes:h,parent:R}={}){this._names={},this._prefixes=h,this._parent=R}toName(h){return h instanceof e.Name?h:this.name(h)}name(h){return new e.Name(this._newName(h))}_newName(h){const R=this._names[h]||this._nameGroup(h);return`${h}${R.index++}`}_nameGroup(h){var R,M;if(((M=(R=this._parent)===null||R===void 0?void 0:R._prefixes)===null||M===void 0?void 0:M.has(h))||this._prefixes&&!this._prefixes.has(h))throw new Error(`CodeGen: prefix "${h}" is not allowed in this scope`);return this._names[h]={prefix:h,index:0}}}g.Scope=f;class r extends e.Name{constructor(h,R){super(R),this.prefix=h}setValue(h,{property:R,itemIndex:M}){this.value=h,this.scopePath=(0,e._)`.${new e.Name(R)}[${M}]`}}g.ValueScopeName=r;const c=(0,e._)`\n`;class S extends f{constructor(h){super(h),this._values={},this._scope=h.scope,this.opts={...h,_n:h.lines?c:e.nil}}get(){return this._scope}name(h){return new r(h,this._newName(h))}value(h,R){var M;if(R.ref===void 0)throw new Error("CodeGen: ref must be passed in value");const z=this.toName(h),{prefix:K}=z,j=(M=R.key)!==null&&M!==void 0?M:R.ref;let ie=this._values[K];if(ie){const P=ie.get(j);if(P)return P}else ie=this._values[K]=new Map;ie.set(j,z);const w=this._scope[K]||(this._scope[K]=[]),D=w.length;return w[D]=R.ref,z.setValue(R,{property:K,itemIndex:D}),z}getValue(h,R){const M=this._values[h];if(!!M)return M.get(R)}scopeRefs(h,R=this._values){return this._reduceValues(R,M=>{if(M.scopePath===void 0)throw new Error(`CodeGen: name "${M}" has no value`);return(0,e._)`${h}${M.scopePath}`})}scopeCode(h=this._values,R,M){return this._reduceValues(h,z=>{if(z.value===void 0)throw new Error(`CodeGen: name "${z}" has no value`);return z.value.code},R,M)}_reduceValues(h,R,M={},z){let K=e.nil;for(const j in h){const ie=h[j];if(!ie)continue;const w=M[j]=M[j]||new Map;ie.forEach(D=>{if(w.has(D))return;w.set(D,E.Started);let P=R(D);if(P){const $=this.opts.es5?g.varKinds.var:g.varKinds.const;K=(0,e._)`${K}${$} ${D} = ${P};${this.opts._n}`}else if(P=z==null?void 0:z(D))K=(0,e._)`${K}${P}${this.opts._n}`;else throw new d(D);w.set(D,E.Completed)})}return K}}g.ValueScope=S},59428:function(Mt,g,t){Object.defineProperty(g,"__esModule",{value:!0}),g.extendErrors=g.resetErrorsCount=g.reportExtraError=g.reportError=g.keyword$DataError=g.keywordError=void 0;const e=t(82481),d=t(1849),E=t(99583);g.keywordError={message:({keyword:w})=>(0,e.str)`must pass "${w}" keyword validation`},g.keyword$DataError={message:({keyword:w,schemaType:D})=>D?(0,e.str)`"${w}" keyword must be ${D} ($data)`:(0,e.str)`"${w}" keyword is invalid ($data)`};function f(w,D=g.keywordError,P,$){const{it:U}=w,{gen:I,compositeRule:m,allErrors:x}=U,W=M(w,D,P);($!=null?$:m||x)?O(I,W):h(U,(0,e._)`[${W}]`)}g.reportError=f;function r(w,D=g.keywordError,P){const{it:$}=w,{gen:U,compositeRule:I,allErrors:m}=$,x=M(w,D,P);O(U,x),I||m||h($,E.default.vErrors)}g.reportExtraError=r;function c(w,D){w.assign(E.default.errors,D),w.if((0,e._)`${E.default.vErrors} !== null`,()=>w.if(D,()=>w.assign((0,e._)`${E.default.vErrors}.length`,D),()=>w.assign(E.default.vErrors,null)))}g.resetErrorsCount=c;function S({gen:w,keyword:D,schemaValue:P,data:$,errsCount:U,it:I}){if(U===void 0)throw new Error("ajv implementation error");const m=w.name("err");w.forRange("i",U,E.default.errors,x=>{w.const(m,(0,e._)`${E.default.vErrors}[${x}]`),w.if((0,e._)`${m}.instancePath === undefined`,()=>w.assign((0,e._)`${m}.instancePath`,(0,e.strConcat)(E.default.instancePath,I.errorPath))),w.assign((0,e._)`${m}.schemaPath`,(0,e.str)`${I.errSchemaPath}/${D}`),I.opts.verbose&&(w.assign((0,e._)`${m}.schema`,P),w.assign((0,e._)`${m}.data`,$))})}g.extendErrors=S;function O(w,D){const P=w.const("err",D);w.if((0,e._)`${E.default.vErrors} === null`,()=>w.assign(E.default.vErrors,(0,e._)`[${P}]`),(0,e._)`${E.default.vErrors}.push(${P})`),w.code((0,e._)`${E.default.errors}++`)}function h(w,D){const{gen:P,validateName:$,schemaEnv:U}=w;U.$async?P.throw((0,e._)`new ${w.ValidationError}(${D})`):(P.assign((0,e._)`${$}.errors`,D),P.return(!1))}const R={keyword:new e.Name("keyword"),schemaPath:new e.Name("schemaPath"),params:new e.Name("params"),propertyName:new e.Name("propertyName"),message:new e.Name("message"),schema:new e.Name("schema"),parentSchema:new e.Name("parentSchema")};function M(w,D,P){const{createErrors:$}=w.it;return $===!1?(0,e._)`{}`:z(w,D,P)}function z(w,D,P={}){const{gen:$,it:U}=w,I=[K(U,P),j(w,P)];return ie(w,D,I),$.object(...I)}function K({errorPath:w},{instancePath:D}){const P=D?(0,e.str)`${w}${(0,d.getErrorPath)(D,d.Type.Str)}`:w;return[E.default.instancePath,(0,e.strConcat)(E.default.instancePath,P)]}function j({keyword:w,it:{errSchemaPath:D}},{schemaPath:P,parentSchema:$}){let U=$?D:(0,e.str)`${D}/${w}`;return P&&(U=(0,e.str)`${U}${(0,d.getErrorPath)(P,d.Type.Str)}`),[R.schemaPath,U]}function ie(w,{params:D,message:P},$){const{keyword:U,data:I,schemaValue:m,it:x}=w,{opts:W,propertyName:Ee,topSchemaRef:Be,schemaPath:Ve}=x;$.push([R.keyword,U],[R.params,typeof D=="function"?D(w):D||(0,e._)`{}`]),W.messages&&$.push([R.message,typeof P=="function"?P(w):P]),W.verbose&&$.push([R.schema,m],[R.parentSchema,(0,e._)`${Be}${Ve}`],[E.default.data,I]),Ee&&$.push([R.propertyName,Ee])}},62902:function(Mt,g,t){Object.defineProperty(g,"__esModule",{value:!0}),g.resolveSchema=g.getCompilingSchema=g.resolveRef=g.compileSchema=g.SchemaEnv=void 0;const e=t(82481),d=t(14319),E=t(99583),f=t(2710),r=t(1849),c=t(4371);class S{constructor(P){var $;this.refs={},this.dynamicAnchors={};let U;typeof P.schema=="object"&&(U=P.schema),this.schema=P.schema,this.schemaId=P.schemaId,this.root=P.root||this,this.baseId=($=P.baseId)!==null&&$!==void 0?$:(0,f.normalizeId)(U==null?void 0:U[P.schemaId||"$id"]),this.schemaPath=P.schemaPath,this.localRefs=P.localRefs,this.meta=P.meta,this.$async=U==null?void 0:U.$async,this.refs={}}}g.SchemaEnv=S;function O(D){const P=M.call(this,D);if(P)return P;const $=(0,f.getFullPath)(this.opts.uriResolver,D.root.baseId),{es5:U,lines:I}=this.opts.code,{ownProperties:m}=this.opts,x=new e.CodeGen(this.scope,{es5:U,lines:I,ownProperties:m});let W;D.$async&&(W=x.scopeValue("Error",{ref:d.default,code:(0,e._)`require("ajv/dist/runtime/validation_error").default`}));const Ee=x.scopeName("validate");D.validateName=Ee;const Be={gen:x,allErrors:this.opts.allErrors,data:E.default.data,parentData:E.default.parentData,parentDataProperty:E.default.parentDataProperty,dataNames:[E.default.data],dataPathArr:[e.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:x.scopeValue("schema",this.opts.code.source===!0?{ref:D.schema,code:(0,e.stringify)(D.schema)}:{ref:D.schema}),validateName:Ee,ValidationError:W,schema:D.schema,schemaEnv:D,rootId:$,baseId:D.baseId||$,schemaPath:e.nil,errSchemaPath:D.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,e._)`""`,opts:this.opts,self:this};let Ve;try{this._compilations.add(D),(0,c.validateFunctionCode)(Be),x.optimize(this.opts.code.optimize);const qe=x.toString();Ve=`${x.scopeRefs(E.default.scope)}return ${qe}`,this.opts.code.process&&(Ve=this.opts.code.process(Ve,D));const at=new Function(`${E.default.self}`,`${E.default.scope}`,Ve)(this,this.scope.get());if(this.scope.value(Ee,{ref:at}),at.errors=null,at.schema=D.schema,at.schemaEnv=D,D.$async&&(at.$async=!0),this.opts.code.source===!0&&(at.source={validateName:Ee,validateCode:qe,scopeValues:x._values}),this.opts.unevaluated){const{props:Pt,items:At}=Be;at.evaluated={props:Pt instanceof e.Name?void 0:Pt,items:At instanceof e.Name?void 0:At,dynamicProps:Pt instanceof e.Name,dynamicItems:At instanceof e.Name},at.source&&(at.source.evaluated=(0,e.stringify)(at.evaluated))}return D.validate=at,D}catch(qe){throw delete D.validate,delete D.validateName,Ve&&this.logger.error("Error compiling schema, function code:",Ve),qe}finally{this._compilations.delete(D)}}g.compileSchema=O;function h(D,P,$){var U;$=(0,f.resolveUrl)(this.opts.uriResolver,P,$);const I=D.refs[$];if(I)return I;let m=K.call(this,D,$);if(m===void 0){const x=(U=D.localRefs)===null||U===void 0?void 0:U[$],{schemaId:W}=this.opts;x&&(m=new S({schema:x,schemaId:W,root:D,baseId:P}))}if(m!==void 0)return D.refs[$]=R.call(this,m)}g.resolveRef=h;function R(D){return(0,f.inlineRef)(D.schema,this.opts.inlineRefs)?D.schema:D.validate?D:O.call(this,D)}function M(D){for(const P of this._compilations)if(z(P,D))return P}g.getCompilingSchema=M;function z(D,P){return D.schema===P.schema&&D.root===P.root&&D.baseId===P.baseId}function K(D,P){let $;for(;typeof($=this.refs[P])=="string";)P=$;return $||this.schemas[P]||j.call(this,D,P)}function j(D,P){const $=this.opts.uriResolver.parse(P),U=(0,f._getFullPath)(this.opts.uriResolver,$);let I=(0,f.getFullPath)(this.opts.uriResolver,D.baseId,void 0);if(Object.keys(D.schema).length>0&&U===I)return w.call(this,$,D);const m=(0,f.normalizeId)(U),x=this.refs[m]||this.schemas[m];if(typeof x=="string"){const W=j.call(this,D,x);return typeof(W==null?void 0:W.schema)!="object"?void 0:w.call(this,$,W)}if(typeof(x==null?void 0:x.schema)=="object"){if(x.validate||O.call(this,x),m===(0,f.normalizeId)(P)){const{schema:W}=x,{schemaId:Ee}=this.opts,Be=W[Ee];return Be&&(I=(0,f.resolveUrl)(this.opts.uriResolver,I,Be)),new S({schema:W,schemaId:Ee,root:D,baseId:I})}return w.call(this,$,x)}}g.resolveSchema=j;const ie=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function w(D,{baseId:P,schema:$,root:U}){var I;if(((I=D.fragment)===null||I===void 0?void 0:I[0])!=="/")return;for(const W of D.fragment.slice(1).split("/")){if(typeof $=="boolean")return;const Ee=$[(0,r.unescapeFragment)(W)];if(Ee===void 0)return;$=Ee;const Be=typeof $=="object"&&$[this.opts.schemaId];!ie.has(W)&&Be&&(P=(0,f.resolveUrl)(this.opts.uriResolver,P,Be))}let m;if(typeof $!="boolean"&&$.$ref&&!(0,r.schemaHasRulesButRef)($,this.RULES)){const W=(0,f.resolveUrl)(this.opts.uriResolver,P,$.$ref);m=j.call(this,U,W)}const{schemaId:x}=this.opts;if(m=m||new S({schema:$,schemaId:x,root:U,baseId:P}),m.schema!==m.root.schema)return m}},99583:function(Mt,g,t){Object.defineProperty(g,"__esModule",{value:!0});const e=t(82481),d={data:new e.Name("data"),valCxt:new e.Name("valCxt"),instancePath:new e.Name("instancePath"),parentData:new e.Name("parentData"),parentDataProperty:new e.Name("parentDataProperty"),rootData:new e.Name("rootData"),dynamicAnchors:new e.Name("dynamicAnchors"),vErrors:new e.Name("vErrors"),errors:new e.Name("errors"),this:new e.Name("this"),self:new e.Name("self"),scope:new e.Name("scope"),json:new e.Name("json"),jsonPos:new e.Name("jsonPos"),jsonLen:new e.Name("jsonLen"),jsonPart:new e.Name("jsonPart")};g.default=d},30283:function(Mt,g,t){Object.defineProperty(g,"__esModule",{value:!0});const e=t(2710);class d extends Error{constructor(f,r,c,S){super(S||`can't resolve reference ${c} from id ${r}`),this.missingRef=(0,e.resolveUrl)(f,r,c),this.missingSchema=(0,e.normalizeId)((0,e.getFullPath)(f,this.missingRef))}}g.default=d},2710:function(Mt,g,t){Object.defineProperty(g,"__esModule",{value:!0}),g.getSchemaRefs=g.resolveUrl=g.normalizeId=g._getFullPath=g.getFullPath=g.inlineRef=void 0;const e=t(1849),d=t(69378),E=t(19522),f=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function r(w,D=!0){return typeof w=="boolean"?!0:D===!0?!S(w):D?O(w)<=D:!1}g.inlineRef=r;const c=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function S(w){for(const D in w){if(c.has(D))return!0;const P=w[D];if(Array.isArray(P)&&P.some(S)||typeof P=="object"&&S(P))return!0}return!1}function O(w){let D=0;for(const P in w){if(P==="$ref")return 1/0;if(D++,!f.has(P)&&(typeof w[P]=="object"&&(0,e.eachItem)(w[P],$=>D+=O($)),D===1/0))return 1/0}return D}function h(w,D="",P){P!==!1&&(D=z(D));const $=w.parse(D);return R(w,$)}g.getFullPath=h;function R(w,D){return w.serialize(D).split("#")[0]+"#"}g._getFullPath=R;const M=/#\/?$/;function z(w){return w?w.replace(M,""):""}g.normalizeId=z;function K(w,D,P){return P=z(P),w.resolve(D,P)}g.resolveUrl=K;const j=/^[a-z_][-a-z0-9._]*$/i;function ie(w,D){if(typeof w=="boolean")return{};const{schemaId:P,uriResolver:$}=this.opts,U=z(w[P]||D),I={"":U},m=h($,U,!1),x={},W=new Set;return E(w,{allKeys:!0},(Ve,qe,Et,at)=>{if(at===void 0)return;const Pt=m+qe;let At=I[at];typeof Ve[P]=="string"&&(At=q.call(this,Ve[P])),rn.call(this,Ve.$anchor),rn.call(this,Ve.$dynamicAnchor),I[qe]=At;function q(ct){const xe=this.opts.uriResolver.resolve;if(ct=z(At?xe(At,ct):ct),W.has(ct))throw Be(ct);W.add(ct);let oe=this.refs[ct];return typeof oe=="string"&&(oe=this.refs[oe]),typeof oe=="object"?Ee(Ve,oe.schema,ct):ct!==z(Pt)&&(ct[0]==="#"?(Ee(Ve,x[ct],ct),x[ct]=Ve):this.refs[ct]=Pt),ct}function rn(ct){if(typeof ct=="string"){if(!j.test(ct))throw new Error(`invalid anchor "${ct}"`);q.call(this,`#${ct}`)}}}),x;function Ee(Ve,qe,Et){if(qe!==void 0&&!d(Ve,qe))throw Be(Et)}function Be(Ve){return new Error(`reference "${Ve}" resolves to more than one schema`)}}g.getSchemaRefs=ie},18288:function(Mt,g){Object.defineProperty(g,"__esModule",{value:!0}),g.getRules=g.isJSONType=void 0;const t=["string","number","integer","boolean","null","object","array"],e=new Set(t);function d(f){return typeof f=="string"&&e.has(f)}g.isJSONType=d;function E(){const f={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...f,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},f.number,f.string,f.array,f.object],post:{rules:[]},all:{},keywords:{}}}g.getRules=E},1849:function(Mt,g,t){Object.defineProperty(g,"__esModule",{value:!0}),g.checkStrictMode=g.getErrorPath=g.Type=g.useFunc=g.setEvaluated=g.evaluatedPropsToName=g.mergeEvaluated=g.eachItem=g.unescapeJsonPointer=g.escapeJsonPointer=g.escapeFragment=g.unescapeFragment=g.schemaRefOrVal=g.schemaHasRulesButRef=g.schemaHasRules=g.checkUnknownRules=g.alwaysValidSchema=g.toHash=void 0;const e=t(82481),d=t(91475);function E(m){const x={};for(const W of m)x[W]=!0;return x}g.toHash=E;function f(m,x){return typeof x=="boolean"?x:Object.keys(x).length===0?!0:(r(m,x),!c(x,m.self.RULES.all))}g.alwaysValidSchema=f;function r(m,x=m.schema){const{opts:W,self:Ee}=m;if(!W.strictSchema||typeof x=="boolean")return;const Be=Ee.RULES.keywords;for(const Ve in x)Be[Ve]||I(m,`unknown keyword: "${Ve}"`)}g.checkUnknownRules=r;function c(m,x){if(typeof m=="boolean")return!m;for(const W in m)if(x[W])return!0;return!1}g.schemaHasRules=c;function S(m,x){if(typeof m=="boolean")return!m;for(const W in m)if(W!=="$ref"&&x.all[W])return!0;return!1}g.schemaHasRulesButRef=S;function O({topSchemaRef:m,schemaPath:x},W,Ee,Be){if(!Be){if(typeof W=="number"||typeof W=="boolean")return W;if(typeof W=="string")return(0,e._)`${W}`}return(0,e._)`${m}${x}${(0,e.getProperty)(Ee)}`}g.schemaRefOrVal=O;function h(m){return z(decodeURIComponent(m))}g.unescapeFragment=h;function R(m){return encodeURIComponent(M(m))}g.escapeFragment=R;function M(m){return typeof m=="number"?`${m}`:m.replace(/~/g,"~0").replace(/\//g,"~1")}g.escapeJsonPointer=M;function z(m){return m.replace(/~1/g,"/").replace(/~0/g,"~")}g.unescapeJsonPointer=z;function K(m,x){if(Array.isArray(m))for(const W of m)x(W);else x(m)}g.eachItem=K;function j({mergeNames:m,mergeToName:x,mergeValues:W,resultToName:Ee}){return(Be,Ve,qe,Et)=>{const at=qe===void 0?Ve:qe instanceof e.Name?(Ve instanceof e.Name?m(Be,Ve,qe):x(Be,Ve,qe),qe):Ve instanceof e.Name?(x(Be,qe,Ve),Ve):W(Ve,qe);return Et===e.Name&&!(at instanceof e.Name)?Ee(Be,at):at}}g.mergeEvaluated={props:j({mergeNames:(m,x,W)=>m.if((0,e._)`${W} !== true && ${x} !== undefined`,()=>{m.if((0,e._)`${x} === true`,()=>m.assign(W,!0),()=>m.assign(W,(0,e._)`${W} || {}`).code((0,e._)`Object.assign(${W}, ${x})`))}),mergeToName:(m,x,W)=>m.if((0,e._)`${W} !== true`,()=>{x===!0?m.assign(W,!0):(m.assign(W,(0,e._)`${W} || {}`),w(m,W,x))}),mergeValues:(m,x)=>m===!0?!0:{...m,...x},resultToName:ie}),items:j({mergeNames:(m,x,W)=>m.if((0,e._)`${W} !== true && ${x} !== undefined`,()=>m.assign(W,(0,e._)`${x} === true ? true : ${W} > ${x} ? ${W} : ${x}`)),mergeToName:(m,x,W)=>m.if((0,e._)`${W} !== true`,()=>m.assign(W,x===!0?!0:(0,e._)`${W} > ${x} ? ${W} : ${x}`)),mergeValues:(m,x)=>m===!0?!0:Math.max(m,x),resultToName:(m,x)=>m.var("items",x)})};function ie(m,x){if(x===!0)return m.var("props",!0);const W=m.var("props",(0,e._)`{}`);return x!==void 0&&w(m,W,x),W}g.evaluatedPropsToName=ie;function w(m,x,W){Object.keys(W).forEach(Ee=>m.assign((0,e._)`${x}${(0,e.getProperty)(Ee)}`,!0))}g.setEvaluated=w;const D={};function P(m,x){return m.scopeValue("func",{ref:x,code:D[x.code]||(D[x.code]=new d._Code(x.code))})}g.useFunc=P;var $;(function(m){m[m.Num=0]="Num",m[m.Str=1]="Str"})($=g.Type||(g.Type={}));function U(m,x,W){if(m instanceof e.Name){const Ee=x===$.Num;return W?Ee?(0,e._)`"[" + ${m} + "]"`:(0,e._)`"['" + ${m} + "']"`:Ee?(0,e._)`"/" + ${m}`:(0,e._)`"/" + ${m}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return W?(0,e.getProperty)(m).toString():"/"+M(m)}g.getErrorPath=U;function I(m,x,W=m.opts.strictSchema){if(!!W){if(x=`strict mode: ${x}`,W===!0)throw new Error(x);m.self.logger.warn(x)}}g.checkStrictMode=I},66557:function(Mt,g){Object.defineProperty(g,"__esModule",{value:!0}),g.shouldUseRule=g.shouldUseGroup=g.schemaHasRulesForType=void 0;function t({schema:E,self:f},r){const c=f.RULES.types[r];return c&&c!==!0&&e(E,c)}g.schemaHasRulesForType=t;function e(E,f){return f.rules.some(r=>d(E,r))}g.shouldUseGroup=e;function d(E,f){var r;return E[f.keyword]!==void 0||((r=f.definition.implements)===null||r===void 0?void 0:r.some(c=>E[c]!==void 0))}g.shouldUseRule=d},74616:function(Mt,g,t){Object.defineProperty(g,"__esModule",{value:!0}),g.boolOrEmptySchema=g.topBoolOrEmptySchema=void 0;const e=t(59428),d=t(82481),E=t(99583),f={message:"boolean schema is false"};function r(O){const{gen:h,schema:R,validateName:M}=O;R===!1?S(O,!1):typeof R=="object"&&R.$async===!0?h.return(E.default.data):(h.assign((0,d._)`${M}.errors`,null),h.return(!0))}g.topBoolOrEmptySchema=r;function c(O,h){const{gen:R,schema:M}=O;M===!1?(R.var(h,!1),S(O)):R.var(h,!0)}g.boolOrEmptySchema=c;function S(O,h){const{gen:R,data:M}=O,z={gen:R,keyword:"false schema",data:M,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:O};(0,e.reportError)(z,f,void 0,h)}},93277:function(Mt,g,t){Object.defineProperty(g,"__esModule",{value:!0}),g.reportTypeError=g.checkDataTypes=g.checkDataType=g.coerceAndCheckDataType=g.getJSONTypes=g.getSchemaTypes=g.DataType=void 0;const e=t(18288),d=t(66557),E=t(59428),f=t(82481),r=t(1849);var c;(function($){$[$.Correct=0]="Correct",$[$.Wrong=1]="Wrong"})(c=g.DataType||(g.DataType={}));function S($){const U=O($.type);if(U.includes("null")){if($.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!U.length&&$.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');$.nullable===!0&&U.push("null")}return U}g.getSchemaTypes=S;function O($){const U=Array.isArray($)?$:$?[$]:[];if(U.every(e.isJSONType))return U;throw new Error("type must be JSONType or JSONType[]: "+U.join(","))}g.getJSONTypes=O;function h($,U){const{gen:I,data:m,opts:x}=$,W=M(U,x.coerceTypes),Ee=U.length>0&&!(W.length===0&&U.length===1&&(0,d.schemaHasRulesForType)($,U[0]));if(Ee){const Be=ie(U,m,x.strictNumbers,c.Wrong);I.if(Be,()=>{W.length?z($,U,W):D($)})}return Ee}g.coerceAndCheckDataType=h;const R=new Set(["string","number","integer","boolean","null"]);function M($,U){return U?$.filter(I=>R.has(I)||U==="array"&&I==="array"):[]}function z($,U,I){const{gen:m,data:x,opts:W}=$,Ee=m.let("dataType",(0,f._)`typeof ${x}`),Be=m.let("coerced",(0,f._)`undefined`);W.coerceTypes==="array"&&m.if((0,f._)`${Ee} == 'object' && Array.isArray(${x}) && ${x}.length == 1`,()=>m.assign(x,(0,f._)`${x}[0]`).assign(Ee,(0,f._)`typeof ${x}`).if(ie(U,x,W.strictNumbers),()=>m.assign(Be,x))),m.if((0,f._)`${Be} !== undefined`);for(const qe of I)(R.has(qe)||qe==="array"&&W.coerceTypes==="array")&&Ve(qe);m.else(),D($),m.endIf(),m.if((0,f._)`${Be} !== undefined`,()=>{m.assign(x,Be),K($,Be)});function Ve(qe){switch(qe){case"string":m.elseIf((0,f._)`${Ee} == "number" || ${Ee} == "boolean"`).assign(Be,(0,f._)`"" + ${x}`).elseIf((0,f._)`${x} === null`).assign(Be,(0,f._)`""`);return;case"number":m.elseIf((0,f._)`${Ee} == "boolean" || ${x} === null
              || (${Ee} == "string" && ${x} && ${x} == +${x})`).assign(Be,(0,f._)`+${x}`);return;case"integer":m.elseIf((0,f._)`${Ee} === "boolean" || ${x} === null
              || (${Ee} === "string" && ${x} && ${x} == +${x} && !(${x} % 1))`).assign(Be,(0,f._)`+${x}`);return;case"boolean":m.elseIf((0,f._)`${x} === "false" || ${x} === 0 || ${x} === null`).assign(Be,!1).elseIf((0,f._)`${x} === "true" || ${x} === 1`).assign(Be,!0);return;case"null":m.elseIf((0,f._)`${x} === "" || ${x} === 0 || ${x} === false`),m.assign(Be,null);return;case"array":m.elseIf((0,f._)`${Ee} === "string" || ${Ee} === "number"
              || ${Ee} === "boolean" || ${x} === null`).assign(Be,(0,f._)`[${x}]`)}}}function K({gen:$,parentData:U,parentDataProperty:I},m){$.if((0,f._)`${U} !== undefined`,()=>$.assign((0,f._)`${U}[${I}]`,m))}function j($,U,I,m=c.Correct){const x=m===c.Correct?f.operators.EQ:f.operators.NEQ;let W;switch($){case"null":return(0,f._)`${U} ${x} null`;case"array":W=(0,f._)`Array.isArray(${U})`;break;case"object":W=(0,f._)`${U} && typeof ${U} == "object" && !Array.isArray(${U})`;break;case"integer":W=Ee((0,f._)`!(${U} % 1) && !isNaN(${U})`);break;case"number":W=Ee();break;default:return(0,f._)`typeof ${U} ${x} ${$}`}return m===c.Correct?W:(0,f.not)(W);function Ee(Be=f.nil){return(0,f.and)((0,f._)`typeof ${U} == "number"`,Be,I?(0,f._)`isFinite(${U})`:f.nil)}}g.checkDataType=j;function ie($,U,I,m){if($.length===1)return j($[0],U,I,m);let x;const W=(0,r.toHash)($);if(W.array&&W.object){const Ee=(0,f._)`typeof ${U} != "object"`;x=W.null?Ee:(0,f._)`!${U} || ${Ee}`,delete W.null,delete W.array,delete W.object}else x=f.nil;W.number&&delete W.integer;for(const Ee in W)x=(0,f.and)(x,j(Ee,U,I,m));return x}g.checkDataTypes=ie;const w={message:({schema:$})=>`must be ${$}`,params:({schema:$,schemaValue:U})=>typeof $=="string"?(0,f._)`{type: ${$}}`:(0,f._)`{type: ${U}}`};function D($){const U=P($);(0,E.reportError)(U,w)}g.reportTypeError=D;function P($){const{gen:U,data:I,schema:m}=$,x=(0,r.schemaRefOrVal)($,m,"type");return{gen:U,keyword:"type",data:I,schema:m.type,schemaCode:x,schemaValue:x,parentSchema:m,params:{},it:$}}},35192:function(Mt,g,t){Object.defineProperty(g,"__esModule",{value:!0}),g.assignDefaults=void 0;const e=t(82481),d=t(1849);function E(r,c){const{properties:S,items:O}=r.schema;if(c==="object"&&S)for(const h in S)f(r,h,S[h].default);else c==="array"&&Array.isArray(O)&&O.forEach((h,R)=>f(r,R,h.default))}g.assignDefaults=E;function f(r,c,S){const{gen:O,compositeRule:h,data:R,opts:M}=r;if(S===void 0)return;const z=(0,e._)`${R}${(0,e.getProperty)(c)}`;if(h){(0,d.checkStrictMode)(r,`default is ignored for: ${z}`);return}let K=(0,e._)`${z} === undefined`;M.useDefaults==="empty"&&(K=(0,e._)`${K} || ${z} === null || ${z} === ""`),O.if(K,(0,e._)`${z} = ${(0,e.stringify)(S)}`)}},4371:function(Mt,g,t){Object.defineProperty(g,"__esModule",{value:!0}),g.getData=g.KeywordCxt=g.validateFunctionCode=void 0;const e=t(74616),d=t(93277),E=t(66557),f=t(93277),r=t(35192),c=t(83558),S=t(20521),O=t(82481),h=t(99583),R=t(2710),M=t(1849),z=t(59428);function K(F){if(m(F)&&(W(F),I(F))){D(F);return}j(F,()=>(0,e.topBoolOrEmptySchema)(F))}g.validateFunctionCode=K;function j({gen:F,validateName:N,schema:_e,schemaEnv:ze,opts:dt},St){dt.code.es5?F.func(N,(0,O._)`${h.default.data}, ${h.default.valCxt}`,ze.$async,()=>{F.code((0,O._)`"use strict"; ${$(_e,dt)}`),w(F,dt),F.code(St)}):F.func(N,(0,O._)`${h.default.data}, ${ie(dt)}`,ze.$async,()=>F.code($(_e,dt)).code(St))}function ie(F){return(0,O._)`{${h.default.instancePath}="", ${h.default.parentData}, ${h.default.parentDataProperty}, ${h.default.rootData}=${h.default.data}${F.dynamicRef?(0,O._)`, ${h.default.dynamicAnchors}={}`:O.nil}}={}`}function w(F,N){F.if(h.default.valCxt,()=>{F.var(h.default.instancePath,(0,O._)`${h.default.valCxt}.${h.default.instancePath}`),F.var(h.default.parentData,(0,O._)`${h.default.valCxt}.${h.default.parentData}`),F.var(h.default.parentDataProperty,(0,O._)`${h.default.valCxt}.${h.default.parentDataProperty}`),F.var(h.default.rootData,(0,O._)`${h.default.valCxt}.${h.default.rootData}`),N.dynamicRef&&F.var(h.default.dynamicAnchors,(0,O._)`${h.default.valCxt}.${h.default.dynamicAnchors}`)},()=>{F.var(h.default.instancePath,(0,O._)`""`),F.var(h.default.parentData,(0,O._)`undefined`),F.var(h.default.parentDataProperty,(0,O._)`undefined`),F.var(h.default.rootData,h.default.data),N.dynamicRef&&F.var(h.default.dynamicAnchors,(0,O._)`{}`)})}function D(F){const{schema:N,opts:_e,gen:ze}=F;j(F,()=>{_e.$comment&&N.$comment&&at(F),Ve(F),ze.let(h.default.vErrors,null),ze.let(h.default.errors,0),_e.unevaluated&&P(F),Ee(F),Pt(F)})}function P(F){const{gen:N,validateName:_e}=F;F.evaluated=N.const("evaluated",(0,O._)`${_e}.evaluated`),N.if((0,O._)`${F.evaluated}.dynamicProps`,()=>N.assign((0,O._)`${F.evaluated}.props`,(0,O._)`undefined`)),N.if((0,O._)`${F.evaluated}.dynamicItems`,()=>N.assign((0,O._)`${F.evaluated}.items`,(0,O._)`undefined`))}function $(F,N){const _e=typeof F=="object"&&F[N.schemaId];return _e&&(N.code.source||N.code.process)?(0,O._)`/*# sourceURL=${_e} */`:O.nil}function U(F,N){if(m(F)&&(W(F),I(F))){x(F,N);return}(0,e.boolOrEmptySchema)(F,N)}function I({schema:F,self:N}){if(typeof F=="boolean")return!F;for(const _e in F)if(N.RULES.all[_e])return!0;return!1}function m(F){return typeof F.schema!="boolean"}function x(F,N){const{schema:_e,gen:ze,opts:dt}=F;dt.$comment&&_e.$comment&&at(F),qe(F),Et(F);const St=ze.const("_errs",h.default.errors);Ee(F,St),ze.var(N,(0,O._)`${St} === ${h.default.errors}`)}function W(F){(0,M.checkUnknownRules)(F),Be(F)}function Ee(F,N){if(F.opts.jtd)return q(F,[],!1,N);const _e=(0,d.getSchemaTypes)(F.schema),ze=(0,d.coerceAndCheckDataType)(F,_e);q(F,_e,!ze,N)}function Be(F){const{schema:N,errSchemaPath:_e,opts:ze,self:dt}=F;N.$ref&&ze.ignoreKeywordsWithRef&&(0,M.schemaHasRulesButRef)(N,dt.RULES)&&dt.logger.warn(`$ref: keywords ignored in schema at path "${_e}"`)}function Ve(F){const{schema:N,opts:_e}=F;N.default!==void 0&&_e.useDefaults&&_e.strictSchema&&(0,M.checkStrictMode)(F,"default is ignored in the schema root")}function qe(F){const N=F.schema[F.opts.schemaId];N&&(F.baseId=(0,R.resolveUrl)(F.opts.uriResolver,F.baseId,N))}function Et(F){if(F.schema.$async&&!F.schemaEnv.$async)throw new Error("async schema in sync schema")}function at({gen:F,schemaEnv:N,schema:_e,errSchemaPath:ze,opts:dt}){const St=_e.$comment;if(dt.$comment===!0)F.code((0,O._)`${h.default.self}.logger.log(${St})`);else if(typeof dt.$comment=="function"){const Bt=(0,O.str)`${ze}/$comment`,Lt=F.scopeValue("root",{ref:N.root});F.code((0,O._)`${h.default.self}.opts.$comment(${St}, ${Bt}, ${Lt}.schema)`)}}function Pt(F){const{gen:N,schemaEnv:_e,validateName:ze,ValidationError:dt,opts:St}=F;_e.$async?N.if((0,O._)`${h.default.errors} === 0`,()=>N.return(h.default.data),()=>N.throw((0,O._)`new ${dt}(${h.default.vErrors})`)):(N.assign((0,O._)`${ze}.errors`,h.default.vErrors),St.unevaluated&&At(F),N.return((0,O._)`${h.default.errors} === 0`))}function At({gen:F,evaluated:N,props:_e,items:ze}){_e instanceof O.Name&&F.assign((0,O._)`${N}.props`,_e),ze instanceof O.Name&&F.assign((0,O._)`${N}.items`,ze)}function q(F,N,_e,ze){const{gen:dt,schema:St,data:Bt,allErrors:Lt,opts:Re,self:_t}=F,{RULES:Ct}=_t;if(St.$ref&&(Re.ignoreKeywordsWithRef||!(0,M.schemaHasRulesButRef)(St,Ct))){dt.block(()=>nt(F,"$ref",Ct.all.$ref.definition));return}Re.jtd||ct(F,N),dt.block(()=>{for(const st of Ct.rules)Qt(st);Qt(Ct.post)});function Qt(st){!(0,E.shouldUseGroup)(St,st)||(st.type?(dt.if((0,f.checkDataType)(st.type,Bt,Re.strictNumbers)),rn(F,st),N.length===1&&N[0]===st.type&&_e&&(dt.else(),(0,f.reportTypeError)(F)),dt.endIf()):rn(F,st),Lt||dt.if((0,O._)`${h.default.errors} === ${ze||0}`))}}function rn(F,N){const{gen:_e,schema:ze,opts:{useDefaults:dt}}=F;dt&&(0,r.assignDefaults)(F,N.type),_e.block(()=>{for(const St of N.rules)(0,E.shouldUseRule)(ze,St)&&nt(F,St.keyword,St.definition,N.type)})}function ct(F,N){F.schemaEnv.meta||!F.opts.strictTypes||(xe(F,N),F.opts.allowUnionTypes||oe(F,N),Ue(F,F.dataTypes))}function xe(F,N){if(!!N.length){if(!F.dataTypes.length){F.dataTypes=N;return}N.forEach(_e=>{p(F.dataTypes,_e)||G(F,`type "${_e}" not allowed by context "${F.dataTypes.join(",")}"`)}),F.dataTypes=F.dataTypes.filter(_e=>p(N,_e))}}function oe(F,N){N.length>1&&!(N.length===2&&N.includes("null"))&&G(F,"use allowUnionTypes to allow union type keyword")}function Ue(F,N){const _e=F.self.RULES.all;for(const ze in _e){const dt=_e[ze];if(typeof dt=="object"&&(0,E.shouldUseRule)(F.schema,dt)){const{type:St}=dt.definition;St.length&&!St.some(Bt=>de(N,Bt))&&G(F,`missing type "${St.join(",")}" for keyword "${ze}"`)}}}function de(F,N){return F.includes(N)||N==="number"&&F.includes("integer")}function p(F,N){return F.includes(N)||N==="integer"&&F.includes("number")}function G(F,N){const _e=F.schemaEnv.baseId+F.errSchemaPath;N+=` at "${_e}" (strictTypes)`,(0,M.checkStrictMode)(F,N,F.opts.strictTypes)}class ye{constructor(N,_e,ze){if((0,c.validateKeywordUsage)(N,_e,ze),this.gen=N.gen,this.allErrors=N.allErrors,this.keyword=ze,this.data=N.data,this.schema=N.schema[ze],this.$data=_e.$data&&N.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,M.schemaRefOrVal)(N,this.schema,ze,this.$data),this.schemaType=_e.schemaType,this.parentSchema=N.schema,this.params={},this.it=N,this.def=_e,this.$data)this.schemaCode=N.gen.const("vSchema",ft(this.$data,N));else if(this.schemaCode=this.schemaValue,!(0,c.validSchemaType)(this.schema,_e.schemaType,_e.allowUndefined))throw new Error(`${ze} value must be ${JSON.stringify(_e.schemaType)}`);("code"in _e?_e.trackErrors:_e.errors!==!1)&&(this.errsCount=N.gen.const("_errs",h.default.errors))}result(N,_e,ze){this.failResult((0,O.not)(N),_e,ze)}failResult(N,_e,ze){this.gen.if(N),ze?ze():this.error(),_e?(this.gen.else(),_e(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(N,_e){this.failResult((0,O.not)(N),void 0,_e)}fail(N){if(N===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(N),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(N){if(!this.$data)return this.fail(N);const{schemaCode:_e}=this;this.fail((0,O._)`${_e} !== undefined && (${(0,O.or)(this.invalid$data(),N)})`)}error(N,_e,ze){if(_e){this.setParams(_e),this._error(N,ze),this.setParams({});return}this._error(N,ze)}_error(N,_e){(N?z.reportExtraError:z.reportError)(this,this.def.error,_e)}$dataError(){(0,z.reportError)(this,this.def.$dataError||z.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,z.resetErrorsCount)(this.gen,this.errsCount)}ok(N){this.allErrors||this.gen.if(N)}setParams(N,_e){_e?Object.assign(this.params,N):this.params=N}block$data(N,_e,ze=O.nil){this.gen.block(()=>{this.check$data(N,ze),_e()})}check$data(N=O.nil,_e=O.nil){if(!this.$data)return;const{gen:ze,schemaCode:dt,schemaType:St,def:Bt}=this;ze.if((0,O.or)((0,O._)`${dt} === undefined`,_e)),N!==O.nil&&ze.assign(N,!0),(St.length||Bt.validateSchema)&&(ze.elseIf(this.invalid$data()),this.$dataError(),N!==O.nil&&ze.assign(N,!1)),ze.else()}invalid$data(){const{gen:N,schemaCode:_e,schemaType:ze,def:dt,it:St}=this;return(0,O.or)(Bt(),Lt());function Bt(){if(ze.length){if(!(_e instanceof O.Name))throw new Error("ajv implementation error");const Re=Array.isArray(ze)?ze:[ze];return(0,O._)`${(0,f.checkDataTypes)(Re,_e,St.opts.strictNumbers,f.DataType.Wrong)}`}return O.nil}function Lt(){if(dt.validateSchema){const Re=N.scopeValue("validate$data",{ref:dt.validateSchema});return(0,O._)`!${Re}(${_e})`}return O.nil}}subschema(N,_e){const ze=(0,S.getSubschema)(this.it,N);(0,S.extendSubschemaData)(ze,this.it,N),(0,S.extendSubschemaMode)(ze,N);const dt={...this.it,...ze,items:void 0,props:void 0};return U(dt,_e),dt}mergeEvaluated(N,_e){const{it:ze,gen:dt}=this;!ze.opts.unevaluated||(ze.props!==!0&&N.props!==void 0&&(ze.props=M.mergeEvaluated.props(dt,N.props,ze.props,_e)),ze.items!==!0&&N.items!==void 0&&(ze.items=M.mergeEvaluated.items(dt,N.items,ze.items,_e)))}mergeValidEvaluated(N,_e){const{it:ze,gen:dt}=this;if(ze.opts.unevaluated&&(ze.props!==!0||ze.items!==!0))return dt.if(_e,()=>this.mergeEvaluated(N,O.Name)),!0}}g.KeywordCxt=ye;function nt(F,N,_e,ze){const dt=new ye(F,_e,N);"code"in _e?_e.code(dt,ze):dt.$data&&_e.validate?(0,c.funcKeywordCode)(dt,_e):"macro"in _e?(0,c.macroKeywordCode)(dt,_e):(_e.compile||_e.validate)&&(0,c.funcKeywordCode)(dt,_e)}const be=/^\/(?:[^~]|~0|~1)*$/,je=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function ft(F,{dataLevel:N,dataNames:_e,dataPathArr:ze}){let dt,St;if(F==="")return h.default.rootData;if(F[0]==="/"){if(!be.test(F))throw new Error(`Invalid JSON-pointer: ${F}`);dt=F,St=h.default.rootData}else{const _t=je.exec(F);if(!_t)throw new Error(`Invalid JSON-pointer: ${F}`);const Ct=+_t[1];if(dt=_t[2],dt==="#"){if(Ct>=N)throw new Error(Re("property/index",Ct));return ze[N-Ct]}if(Ct>N)throw new Error(Re("data",Ct));if(St=_e[N-Ct],!dt)return St}let Bt=St;const Lt=dt.split("/");for(const _t of Lt)_t&&(St=(0,O._)`${St}${(0,O.getProperty)((0,M.unescapeJsonPointer)(_t))}`,Bt=(0,O._)`${Bt} && ${St}`);return Bt;function Re(_t,Ct){return`Cannot access ${_t} ${Ct} levels up, current level is ${N}`}}g.getData=ft},83558:function(Mt,g,t){Object.defineProperty(g,"__esModule",{value:!0}),g.validateKeywordUsage=g.validSchemaType=g.funcKeywordCode=g.macroKeywordCode=void 0;const e=t(82481),d=t(99583),E=t(9280),f=t(59428);function r(K,j){const{gen:ie,keyword:w,schema:D,parentSchema:P,it:$}=K,U=j.macro.call($.self,D,P,$),I=R(ie,w,U);$.opts.validateSchema!==!1&&$.self.validateSchema(U,!0);const m=ie.name("valid");K.subschema({schema:U,schemaPath:e.nil,errSchemaPath:`${$.errSchemaPath}/${w}`,topSchemaRef:I,compositeRule:!0},m),K.pass(m,()=>K.error(!0))}g.macroKeywordCode=r;function c(K,j){var ie;const{gen:w,keyword:D,schema:P,parentSchema:$,$data:U,it:I}=K;h(I,j);const m=!U&&j.compile?j.compile.call(I.self,P,$,I):j.validate,x=R(w,D,m),W=w.let("valid");K.block$data(W,Ee),K.ok((ie=j.valid)!==null&&ie!==void 0?ie:W);function Ee(){if(j.errors===!1)qe(),j.modifying&&S(K),Et(()=>K.error());else{const at=j.async?Be():Ve();j.modifying&&S(K),Et(()=>O(K,at))}}function Be(){const at=w.let("ruleErrs",null);return w.try(()=>qe((0,e._)`await `),Pt=>w.assign(W,!1).if((0,e._)`${Pt} instanceof ${I.ValidationError}`,()=>w.assign(at,(0,e._)`${Pt}.errors`),()=>w.throw(Pt))),at}function Ve(){const at=(0,e._)`${x}.errors`;return w.assign(at,null),qe(e.nil),at}function qe(at=j.async?(0,e._)`await `:e.nil){const Pt=I.opts.passContext?d.default.this:d.default.self,At=!("compile"in j&&!U||j.schema===!1);w.assign(W,(0,e._)`${at}${(0,E.callValidateCode)(K,x,Pt,At)}`,j.modifying)}function Et(at){var Pt;w.if((0,e.not)((Pt=j.valid)!==null&&Pt!==void 0?Pt:W),at)}}g.funcKeywordCode=c;function S(K){const{gen:j,data:ie,it:w}=K;j.if(w.parentData,()=>j.assign(ie,(0,e._)`${w.parentData}[${w.parentDataProperty}]`))}function O(K,j){const{gen:ie}=K;ie.if((0,e._)`Array.isArray(${j})`,()=>{ie.assign(d.default.vErrors,(0,e._)`${d.default.vErrors} === null ? ${j} : ${d.default.vErrors}.concat(${j})`).assign(d.default.errors,(0,e._)`${d.default.vErrors}.length`),(0,f.extendErrors)(K)},()=>K.error())}function h({schemaEnv:K},j){if(j.async&&!K.$async)throw new Error("async keyword in sync schema")}function R(K,j,ie){if(ie===void 0)throw new Error(`keyword "${j}" failed to compile`);return K.scopeValue("keyword",typeof ie=="function"?{ref:ie}:{ref:ie,code:(0,e.stringify)(ie)})}function M(K,j,ie=!1){return!j.length||j.some(w=>w==="array"?Array.isArray(K):w==="object"?K&&typeof K=="object"&&!Array.isArray(K):typeof K==w||ie&&typeof K=="undefined")}g.validSchemaType=M;function z({schema:K,opts:j,self:ie,errSchemaPath:w},D,P){if(Array.isArray(D.keyword)?!D.keyword.includes(P):D.keyword!==P)throw new Error("ajv implementation error");const $=D.dependencies;if($!=null&&$.some(U=>!Object.prototype.hasOwnProperty.call(K,U)))throw new Error(`parent schema must have dependencies of ${P}: ${$.join(",")}`);if(D.validateSchema&&!D.validateSchema(K[P])){const I=`keyword "${P}" value is invalid at path "${w}": `+ie.errorsText(D.validateSchema.errors);if(j.validateSchema==="log")ie.logger.error(I);else throw new Error(I)}}g.validateKeywordUsage=z},20521:function(Mt,g,t){Object.defineProperty(g,"__esModule",{value:!0}),g.extendSubschemaMode=g.extendSubschemaData=g.getSubschema=void 0;const e=t(82481),d=t(1849);function E(c,{keyword:S,schemaProp:O,schema:h,schemaPath:R,errSchemaPath:M,topSchemaRef:z}){if(S!==void 0&&h!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(S!==void 0){const K=c.schema[S];return O===void 0?{schema:K,schemaPath:(0,e._)`${c.schemaPath}${(0,e.getProperty)(S)}`,errSchemaPath:`${c.errSchemaPath}/${S}`}:{schema:K[O],schemaPath:(0,e._)`${c.schemaPath}${(0,e.getProperty)(S)}${(0,e.getProperty)(O)}`,errSchemaPath:`${c.errSchemaPath}/${S}/${(0,d.escapeFragment)(O)}`}}if(h!==void 0){if(R===void 0||M===void 0||z===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:h,schemaPath:R,topSchemaRef:z,errSchemaPath:M}}throw new Error('either "keyword" or "schema" must be passed')}g.getSubschema=E;function f(c,S,{dataProp:O,dataPropType:h,data:R,dataTypes:M,propertyName:z}){if(R!==void 0&&O!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:K}=S;if(O!==void 0){const{errorPath:ie,dataPathArr:w,opts:D}=S,P=K.let("data",(0,e._)`${S.data}${(0,e.getProperty)(O)}`,!0);j(P),c.errorPath=(0,e.str)`${ie}${(0,d.getErrorPath)(O,h,D.jsPropertySyntax)}`,c.parentDataProperty=(0,e._)`${O}`,c.dataPathArr=[...w,c.parentDataProperty]}if(R!==void 0){const ie=R instanceof e.Name?R:K.let("data",R,!0);j(ie),z!==void 0&&(c.propertyName=z)}M&&(c.dataTypes=M);function j(ie){c.data=ie,c.dataLevel=S.dataLevel+1,c.dataTypes=[],S.definedProperties=new Set,c.parentData=S.data,c.dataNames=[...S.dataNames,ie]}}g.extendSubschemaData=f;function r(c,{jtdDiscriminator:S,jtdMetadata:O,compositeRule:h,createErrors:R,allErrors:M}){h!==void 0&&(c.compositeRule=h),R!==void 0&&(c.createErrors=R),M!==void 0&&(c.allErrors=M),c.jtdDiscriminator=S,c.jtdMetadata=O}g.extendSubschemaMode=r},61889:function(Mt,g,t){Object.defineProperty(g,"__esModule",{value:!0}),g.CodeGen=g.Name=g.nil=g.stringify=g.str=g._=g.KeywordCxt=void 0;var e=t(4371);Object.defineProperty(g,"KeywordCxt",{enumerable:!0,get:function(){return e.KeywordCxt}});var d=t(82481);Object.defineProperty(g,"_",{enumerable:!0,get:function(){return d._}}),Object.defineProperty(g,"str",{enumerable:!0,get:function(){return d.str}}),Object.defineProperty(g,"stringify",{enumerable:!0,get:function(){return d.stringify}}),Object.defineProperty(g,"nil",{enumerable:!0,get:function(){return d.nil}}),Object.defineProperty(g,"Name",{enumerable:!0,get:function(){return d.Name}}),Object.defineProperty(g,"CodeGen",{enumerable:!0,get:function(){return d.CodeGen}});const E=t(14319),f=t(30283),r=t(18288),c=t(62902),S=t(82481),O=t(2710),h=t(93277),R=t(1849),M=t(85310),z=t(3075),K=(xe,oe)=>new RegExp(xe,oe);K.code="new RegExp";const j=["removeAdditional","useDefaults","coerceTypes"],ie=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),w={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},D={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},P=200;function $(xe){var oe,Ue,de,p,G,ye,nt,be,je,ft,F,N,_e,ze,dt,St,Bt,Lt,Re,_t,Ct,Qt,st,me,ce;const we=xe.strict,se=(oe=xe.code)===null||oe===void 0?void 0:oe.optimize,Te=se===!0||se===void 0?1:se||0,Ae=(de=(Ue=xe.code)===null||Ue===void 0?void 0:Ue.regExp)!==null&&de!==void 0?de:K,Ne=(p=xe.uriResolver)!==null&&p!==void 0?p:z.default;return{strictSchema:(ye=(G=xe.strictSchema)!==null&&G!==void 0?G:we)!==null&&ye!==void 0?ye:!0,strictNumbers:(be=(nt=xe.strictNumbers)!==null&&nt!==void 0?nt:we)!==null&&be!==void 0?be:!0,strictTypes:(ft=(je=xe.strictTypes)!==null&&je!==void 0?je:we)!==null&&ft!==void 0?ft:"log",strictTuples:(N=(F=xe.strictTuples)!==null&&F!==void 0?F:we)!==null&&N!==void 0?N:"log",strictRequired:(ze=(_e=xe.strictRequired)!==null&&_e!==void 0?_e:we)!==null&&ze!==void 0?ze:!1,code:xe.code?{...xe.code,optimize:Te,regExp:Ae}:{optimize:Te,regExp:Ae},loopRequired:(dt=xe.loopRequired)!==null&&dt!==void 0?dt:P,loopEnum:(St=xe.loopEnum)!==null&&St!==void 0?St:P,meta:(Bt=xe.meta)!==null&&Bt!==void 0?Bt:!0,messages:(Lt=xe.messages)!==null&&Lt!==void 0?Lt:!0,inlineRefs:(Re=xe.inlineRefs)!==null&&Re!==void 0?Re:!0,schemaId:(_t=xe.schemaId)!==null&&_t!==void 0?_t:"$id",addUsedSchema:(Ct=xe.addUsedSchema)!==null&&Ct!==void 0?Ct:!0,validateSchema:(Qt=xe.validateSchema)!==null&&Qt!==void 0?Qt:!0,validateFormats:(st=xe.validateFormats)!==null&&st!==void 0?st:!0,unicodeRegExp:(me=xe.unicodeRegExp)!==null&&me!==void 0?me:!0,int32range:(ce=xe.int32range)!==null&&ce!==void 0?ce:!0,uriResolver:Ne}}class U{constructor(oe={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,oe=this.opts={...oe,...$(oe)};const{es5:Ue,lines:de}=this.opts.code;this.scope=new S.ValueScope({scope:{},prefixes:ie,es5:Ue,lines:de}),this.logger=qe(oe.logger);const p=oe.validateFormats;oe.validateFormats=!1,this.RULES=(0,r.getRules)(),I.call(this,w,oe,"NOT SUPPORTED"),I.call(this,D,oe,"DEPRECATED","warn"),this._metaOpts=Be.call(this),oe.formats&&W.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),oe.keywords&&Ee.call(this,oe.keywords),typeof oe.meta=="object"&&this.addMetaSchema(oe.meta),x.call(this),oe.validateFormats=p}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:oe,meta:Ue,schemaId:de}=this.opts;let p=M;de==="id"&&(p={...M},p.id=p.$id,delete p.$id),Ue&&oe&&this.addMetaSchema(p,p[de],!1)}defaultMeta(){const{meta:oe,schemaId:Ue}=this.opts;return this.opts.defaultMeta=typeof oe=="object"?oe[Ue]||oe:void 0}validate(oe,Ue){let de;if(typeof oe=="string"){if(de=this.getSchema(oe),!de)throw new Error(`no schema with key or ref "${oe}"`)}else de=this.compile(oe);const p=de(Ue);return"$async"in de||(this.errors=de.errors),p}compile(oe,Ue){const de=this._addSchema(oe,Ue);return de.validate||this._compileSchemaEnv(de)}compileAsync(oe,Ue){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");const{loadSchema:de}=this.opts;return p.call(this,oe,Ue);async function p(ft,F){await G.call(this,ft.$schema);const N=this._addSchema(ft,F);return N.validate||ye.call(this,N)}async function G(ft){ft&&!this.getSchema(ft)&&await p.call(this,{$ref:ft},!0)}async function ye(ft){try{return this._compileSchemaEnv(ft)}catch(F){if(!(F instanceof f.default))throw F;return nt.call(this,F),await be.call(this,F.missingSchema),ye.call(this,ft)}}function nt({missingSchema:ft,missingRef:F}){if(this.refs[ft])throw new Error(`AnySchema ${ft} is loaded but ${F} cannot be resolved`)}async function be(ft){const F=await je.call(this,ft);this.refs[ft]||await G.call(this,F.$schema),this.refs[ft]||this.addSchema(F,ft,Ue)}async function je(ft){const F=this._loading[ft];if(F)return F;try{return await(this._loading[ft]=de(ft))}finally{delete this._loading[ft]}}}addSchema(oe,Ue,de,p=this.opts.validateSchema){if(Array.isArray(oe)){for(const ye of oe)this.addSchema(ye,void 0,de,p);return this}let G;if(typeof oe=="object"){const{schemaId:ye}=this.opts;if(G=oe[ye],G!==void 0&&typeof G!="string")throw new Error(`schema ${ye} must be string`)}return Ue=(0,O.normalizeId)(Ue||G),this._checkUnique(Ue),this.schemas[Ue]=this._addSchema(oe,de,Ue,p,!0),this}addMetaSchema(oe,Ue,de=this.opts.validateSchema){return this.addSchema(oe,Ue,!0,de),this}validateSchema(oe,Ue){if(typeof oe=="boolean")return!0;let de;if(de=oe.$schema,de!==void 0&&typeof de!="string")throw new Error("$schema must be a string");if(de=de||this.opts.defaultMeta||this.defaultMeta(),!de)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const p=this.validate(de,oe);if(!p&&Ue){const G="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(G);else throw new Error(G)}return p}getSchema(oe){let Ue;for(;typeof(Ue=m.call(this,oe))=="string";)oe=Ue;if(Ue===void 0){const{schemaId:de}=this.opts,p=new c.SchemaEnv({schema:{},schemaId:de});if(Ue=c.resolveSchema.call(this,p,oe),!Ue)return;this.refs[oe]=Ue}return Ue.validate||this._compileSchemaEnv(Ue)}removeSchema(oe){if(oe instanceof RegExp)return this._removeAllSchemas(this.schemas,oe),this._removeAllSchemas(this.refs,oe),this;switch(typeof oe){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const Ue=m.call(this,oe);return typeof Ue=="object"&&this._cache.delete(Ue.schema),delete this.schemas[oe],delete this.refs[oe],this}case"object":{const Ue=oe;this._cache.delete(Ue);let de=oe[this.opts.schemaId];return de&&(de=(0,O.normalizeId)(de),delete this.schemas[de],delete this.refs[de]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(oe){for(const Ue of oe)this.addKeyword(Ue);return this}addKeyword(oe,Ue){let de;if(typeof oe=="string")de=oe,typeof Ue=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),Ue.keyword=de);else if(typeof oe=="object"&&Ue===void 0){if(Ue=oe,de=Ue.keyword,Array.isArray(de)&&!de.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(at.call(this,de,Ue),!Ue)return(0,R.eachItem)(de,G=>Pt.call(this,G)),this;q.call(this,Ue);const p={...Ue,type:(0,h.getJSONTypes)(Ue.type),schemaType:(0,h.getJSONTypes)(Ue.schemaType)};return(0,R.eachItem)(de,p.type.length===0?G=>Pt.call(this,G,p):G=>p.type.forEach(ye=>Pt.call(this,G,p,ye))),this}getKeyword(oe){const Ue=this.RULES.all[oe];return typeof Ue=="object"?Ue.definition:!!Ue}removeKeyword(oe){const{RULES:Ue}=this;delete Ue.keywords[oe],delete Ue.all[oe];for(const de of Ue.rules){const p=de.rules.findIndex(G=>G.keyword===oe);p>=0&&de.rules.splice(p,1)}return this}addFormat(oe,Ue){return typeof Ue=="string"&&(Ue=new RegExp(Ue)),this.formats[oe]=Ue,this}errorsText(oe=this.errors,{separator:Ue=", ",dataVar:de="data"}={}){return!oe||oe.length===0?"No errors":oe.map(p=>`${de}${p.instancePath} ${p.message}`).reduce((p,G)=>p+Ue+G)}$dataMetaSchema(oe,Ue){const de=this.RULES.all;oe=JSON.parse(JSON.stringify(oe));for(const p of Ue){const G=p.split("/").slice(1);let ye=oe;for(const nt of G)ye=ye[nt];for(const nt in de){const be=de[nt];if(typeof be!="object")continue;const{$data:je}=be.definition,ft=ye[nt];je&&ft&&(ye[nt]=ct(ft))}}return oe}_removeAllSchemas(oe,Ue){for(const de in oe){const p=oe[de];(!Ue||Ue.test(de))&&(typeof p=="string"?delete oe[de]:p&&!p.meta&&(this._cache.delete(p.schema),delete oe[de]))}}_addSchema(oe,Ue,de,p=this.opts.validateSchema,G=this.opts.addUsedSchema){let ye;const{schemaId:nt}=this.opts;if(typeof oe=="object")ye=oe[nt];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof oe!="boolean")throw new Error("schema must be object or boolean")}let be=this._cache.get(oe);if(be!==void 0)return be;de=(0,O.normalizeId)(ye||de);const je=O.getSchemaRefs.call(this,oe,de);return be=new c.SchemaEnv({schema:oe,schemaId:nt,meta:Ue,baseId:de,localRefs:je}),this._cache.set(be.schema,be),G&&!de.startsWith("#")&&(de&&this._checkUnique(de),this.refs[de]=be),p&&this.validateSchema(oe,!0),be}_checkUnique(oe){if(this.schemas[oe]||this.refs[oe])throw new Error(`schema with key or id "${oe}" already exists`)}_compileSchemaEnv(oe){if(oe.meta?this._compileMetaSchema(oe):c.compileSchema.call(this,oe),!oe.validate)throw new Error("ajv implementation error");return oe.validate}_compileMetaSchema(oe){const Ue=this.opts;this.opts=this._metaOpts;try{c.compileSchema.call(this,oe)}finally{this.opts=Ue}}}g.default=U,U.ValidationError=E.default,U.MissingRefError=f.default;function I(xe,oe,Ue,de="error"){for(const p in xe){const G=p;G in oe&&this.logger[de](`${Ue}: option ${p}. ${xe[G]}`)}}function m(xe){return xe=(0,O.normalizeId)(xe),this.schemas[xe]||this.refs[xe]}function x(){const xe=this.opts.schemas;if(!!xe)if(Array.isArray(xe))this.addSchema(xe);else for(const oe in xe)this.addSchema(xe[oe],oe)}function W(){for(const xe in this.opts.formats){const oe=this.opts.formats[xe];oe&&this.addFormat(xe,oe)}}function Ee(xe){if(Array.isArray(xe)){this.addVocabulary(xe);return}this.logger.warn("keywords option as map is deprecated, pass array");for(const oe in xe){const Ue=xe[oe];Ue.keyword||(Ue.keyword=oe),this.addKeyword(Ue)}}function Be(){const xe={...this.opts};for(const oe of j)delete xe[oe];return xe}const Ve={log(){},warn(){},error(){}};function qe(xe){if(xe===!1)return Ve;if(xe===void 0)return console;if(xe.log&&xe.warn&&xe.error)return xe;throw new Error("logger must implement log, warn and error methods")}const Et=/^[a-z_$][a-z0-9_$:-]*$/i;function at(xe,oe){const{RULES:Ue}=this;if((0,R.eachItem)(xe,de=>{if(Ue.keywords[de])throw new Error(`Keyword ${de} is already defined`);if(!Et.test(de))throw new Error(`Keyword ${de} has invalid name`)}),!!oe&&oe.$data&&!("code"in oe||"validate"in oe))throw new Error('$data keyword must have "code" or "validate" function')}function Pt(xe,oe,Ue){var de;const p=oe==null?void 0:oe.post;if(Ue&&p)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:G}=this;let ye=p?G.post:G.rules.find(({type:be})=>be===Ue);if(ye||(ye={type:Ue,rules:[]},G.rules.push(ye)),G.keywords[xe]=!0,!oe)return;const nt={keyword:xe,definition:{...oe,type:(0,h.getJSONTypes)(oe.type),schemaType:(0,h.getJSONTypes)(oe.schemaType)}};oe.before?At.call(this,ye,nt,oe.before):ye.rules.push(nt),G.all[xe]=nt,(de=oe.implements)===null||de===void 0||de.forEach(be=>this.addKeyword(be))}function At(xe,oe,Ue){const de=xe.rules.findIndex(p=>p.keyword===Ue);de>=0?xe.rules.splice(de,0,oe):(xe.rules.push(oe),this.logger.warn(`rule ${Ue} is not defined`))}function q(xe){let{metaSchema:oe}=xe;oe!==void 0&&(xe.$data&&this.opts.$data&&(oe=ct(oe)),xe.validateSchema=this.compile(oe,!0))}const rn={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function ct(xe){return{anyOf:[xe,rn]}}},55947:function(Mt,g,t){Object.defineProperty(g,"__esModule",{value:!0});const e=t(69378);e.code='require("ajv/dist/runtime/equal").default',g.default=e},7836:function(Mt,g){Object.defineProperty(g,"__esModule",{value:!0});function t(e){const d=e.length;let E=0,f=0,r;for(;f<d;)E++,r=e.charCodeAt(f++),r>=55296&&r<=56319&&f<d&&(r=e.charCodeAt(f),(r&64512)===56320&&f++);return E}g.default=t,t.code='require("ajv/dist/runtime/ucs2length").default'},3075:function(Mt,g,t){Object.defineProperty(g,"__esModule",{value:!0});const e=t(12854);e.code='require("ajv/dist/runtime/uri").default',g.default=e},14319:function(Mt,g){Object.defineProperty(g,"__esModule",{value:!0});class t extends Error{constructor(d){super("validation failed"),this.errors=d,this.ajv=this.validation=!0}}g.default=t},52251:function(Mt,g,t){Object.defineProperty(g,"__esModule",{value:!0}),g.validateAdditionalItems=void 0;const e=t(82481),d=t(1849),f={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:{message:({params:{len:c}})=>(0,e.str)`must NOT have more than ${c} items`,params:({params:{len:c}})=>(0,e._)`{limit: ${c}}`},code(c){const{parentSchema:S,it:O}=c,{items:h}=S;if(!Array.isArray(h)){(0,d.checkStrictMode)(O,'"additionalItems" is ignored when "items" is not an array of schemas');return}r(c,h)}};function r(c,S){const{gen:O,schema:h,data:R,keyword:M,it:z}=c;z.items=!0;const K=O.const("len",(0,e._)`${R}.length`);if(h===!1)c.setParams({len:S.length}),c.pass((0,e._)`${K} <= ${S.length}`);else if(typeof h=="object"&&!(0,d.alwaysValidSchema)(z,h)){const ie=O.var("valid",(0,e._)`${K} <= ${S.length}`);O.if((0,e.not)(ie),()=>j(ie)),c.ok(ie)}function j(ie){O.forRange("i",S.length,K,w=>{c.subschema({keyword:M,dataProp:w,dataPropType:d.Type.Num},ie),z.allErrors||O.if((0,e.not)(ie),()=>O.break())})}}g.validateAdditionalItems=r,g.default=f},17831:function(Mt,g,t){Object.defineProperty(g,"__esModule",{value:!0});const e=t(9280),d=t(82481),E=t(99583),f=t(1849),c={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:{message:"must NOT have additional properties",params:({params:S})=>(0,d._)`{additionalProperty: ${S.additionalProperty}}`},code(S){const{gen:O,schema:h,parentSchema:R,data:M,errsCount:z,it:K}=S;if(!z)throw new Error("ajv implementation error");const{allErrors:j,opts:ie}=K;if(K.props=!0,ie.removeAdditional!=="all"&&(0,f.alwaysValidSchema)(K,h))return;const w=(0,e.allSchemaProperties)(R.properties),D=(0,e.allSchemaProperties)(R.patternProperties);P(),S.ok((0,d._)`${z} === ${E.default.errors}`);function P(){O.forIn("key",M,x=>{!w.length&&!D.length?I(x):O.if($(x),()=>I(x))})}function $(x){let W;if(w.length>8){const Ee=(0,f.schemaRefOrVal)(K,R.properties,"properties");W=(0,e.isOwnProperty)(O,Ee,x)}else w.length?W=(0,d.or)(...w.map(Ee=>(0,d._)`${x} === ${Ee}`)):W=d.nil;return D.length&&(W=(0,d.or)(W,...D.map(Ee=>(0,d._)`${(0,e.usePattern)(S,Ee)}.test(${x})`))),(0,d.not)(W)}function U(x){O.code((0,d._)`delete ${M}[${x}]`)}function I(x){if(ie.removeAdditional==="all"||ie.removeAdditional&&h===!1){U(x);return}if(h===!1){S.setParams({additionalProperty:x}),S.error(),j||O.break();return}if(typeof h=="object"&&!(0,f.alwaysValidSchema)(K,h)){const W=O.name("valid");ie.removeAdditional==="failing"?(m(x,W,!1),O.if((0,d.not)(W),()=>{S.reset(),U(x)})):(m(x,W),j||O.if((0,d.not)(W),()=>O.break()))}}function m(x,W,Ee){const Be={keyword:"additionalProperties",dataProp:x,dataPropType:f.Type.Str};Ee===!1&&Object.assign(Be,{compositeRule:!0,createErrors:!1,allErrors:!1}),S.subschema(Be,W)}}};g.default=c},15319:function(Mt,g,t){Object.defineProperty(g,"__esModule",{value:!0});const e=t(1849),d={keyword:"allOf",schemaType:"array",code(E){const{gen:f,schema:r,it:c}=E;if(!Array.isArray(r))throw new Error("ajv implementation error");const S=f.name("valid");r.forEach((O,h)=>{if((0,e.alwaysValidSchema)(c,O))return;const R=E.subschema({keyword:"allOf",schemaProp:h},S);E.ok(S),E.mergeEvaluated(R)})}};g.default=d},60513:function(Mt,g,t){Object.defineProperty(g,"__esModule",{value:!0});const d={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:t(9280).validateUnion,error:{message:"must match a schema in anyOf"}};g.default=d},51622:function(Mt,g,t){Object.defineProperty(g,"__esModule",{value:!0});const e=t(82481),d=t(1849),f={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:{message:({params:{min:r,max:c}})=>c===void 0?(0,e.str)`must contain at least ${r} valid item(s)`:(0,e.str)`must contain at least ${r} and no more than ${c} valid item(s)`,params:({params:{min:r,max:c}})=>c===void 0?(0,e._)`{minContains: ${r}}`:(0,e._)`{minContains: ${r}, maxContains: ${c}}`},code(r){const{gen:c,schema:S,parentSchema:O,data:h,it:R}=r;let M,z;const{minContains:K,maxContains:j}=O;R.opts.next?(M=K===void 0?1:K,z=j):M=1;const ie=c.const("len",(0,e._)`${h}.length`);if(r.setParams({min:M,max:z}),z===void 0&&M===0){(0,d.checkStrictMode)(R,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(z!==void 0&&M>z){(0,d.checkStrictMode)(R,'"minContains" > "maxContains" is always invalid'),r.fail();return}if((0,d.alwaysValidSchema)(R,S)){let U=(0,e._)`${ie} >= ${M}`;z!==void 0&&(U=(0,e._)`${U} && ${ie} <= ${z}`),r.pass(U);return}R.items=!0;const w=c.name("valid");z===void 0&&M===1?P(w,()=>c.if(w,()=>c.break())):M===0?(c.let(w,!0),z!==void 0&&c.if((0,e._)`${h}.length > 0`,D)):(c.let(w,!1),D()),r.result(w,()=>r.reset());function D(){const U=c.name("_valid"),I=c.let("count",0);P(U,()=>c.if(U,()=>$(I)))}function P(U,I){c.forRange("i",0,ie,m=>{r.subschema({keyword:"contains",dataProp:m,dataPropType:d.Type.Num,compositeRule:!0},U),I()})}function $(U){c.code((0,e._)`${U}++`),z===void 0?c.if((0,e._)`${U} >= ${M}`,()=>c.assign(w,!0).break()):(c.if((0,e._)`${U} > ${z}`,()=>c.assign(w,!1).break()),M===1?c.assign(w,!0):c.if((0,e._)`${U} >= ${M}`,()=>c.assign(w,!0)))}}};g.default=f},8524:function(Mt,g,t){Object.defineProperty(g,"__esModule",{value:!0}),g.validateSchemaDeps=g.validatePropertyDeps=g.error=void 0;const e=t(82481),d=t(1849),E=t(9280);g.error={message:({params:{property:O,depsCount:h,deps:R}})=>{const M=h===1?"property":"properties";return(0,e.str)`must have ${M} ${R} when property ${O} is present`},params:({params:{property:O,depsCount:h,deps:R,missingProperty:M}})=>(0,e._)`{property: ${O},
    missingProperty: ${M},
    depsCount: ${h},
    deps: ${R}}`};const f={keyword:"dependencies",type:"object",schemaType:"object",error:g.error,code(O){const[h,R]=r(O);c(O,h),S(O,R)}};function r({schema:O}){const h={},R={};for(const M in O){if(M==="__proto__")continue;const z=Array.isArray(O[M])?h:R;z[M]=O[M]}return[h,R]}function c(O,h=O.schema){const{gen:R,data:M,it:z}=O;if(Object.keys(h).length===0)return;const K=R.let("missing");for(const j in h){const ie=h[j];if(ie.length===0)continue;const w=(0,E.propertyInData)(R,M,j,z.opts.ownProperties);O.setParams({property:j,depsCount:ie.length,deps:ie.join(", ")}),z.allErrors?R.if(w,()=>{for(const D of ie)(0,E.checkReportMissingProp)(O,D)}):(R.if((0,e._)`${w} && (${(0,E.checkMissingProp)(O,ie,K)})`),(0,E.reportMissingProp)(O,K),R.else())}}g.validatePropertyDeps=c;function S(O,h=O.schema){const{gen:R,data:M,keyword:z,it:K}=O,j=R.name("valid");for(const ie in h)(0,d.alwaysValidSchema)(K,h[ie])||(R.if((0,E.propertyInData)(R,M,ie,K.opts.ownProperties),()=>{const w=O.subschema({keyword:z,schemaProp:ie},j);O.mergeValidEvaluated(w,j)},()=>R.var(j,!0)),O.ok(j))}g.validateSchemaDeps=S,g.default=f},74413:function(Mt,g,t){Object.defineProperty(g,"__esModule",{value:!0});const e=t(82481),d=t(1849),f={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:{message:({params:c})=>(0,e.str)`must match "${c.ifClause}" schema`,params:({params:c})=>(0,e._)`{failingKeyword: ${c.ifClause}}`},code(c){const{gen:S,parentSchema:O,it:h}=c;O.then===void 0&&O.else===void 0&&(0,d.checkStrictMode)(h,'"if" without "then" and "else" is ignored');const R=r(h,"then"),M=r(h,"else");if(!R&&!M)return;const z=S.let("valid",!0),K=S.name("_valid");if(j(),c.reset(),R&&M){const w=S.let("ifClause");c.setParams({ifClause:w}),S.if(K,ie("then",w),ie("else",w))}else R?S.if(K,ie("then")):S.if((0,e.not)(K),ie("else"));c.pass(z,()=>c.error(!0));function j(){const w=c.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},K);c.mergeEvaluated(w)}function ie(w,D){return()=>{const P=c.subschema({keyword:w},K);S.assign(z,K),c.mergeValidEvaluated(P,z),D?S.assign(D,(0,e._)`${w}`):c.setParams({ifClause:w})}}}};function r(c,S){const O=c.schema[S];return O!==void 0&&!(0,d.alwaysValidSchema)(c,O)}g.default=f},14226:function(Mt,g,t){Object.defineProperty(g,"__esModule",{value:!0});const e=t(52251),d=t(38968),E=t(3042),f=t(69719),r=t(51622),c=t(8524),S=t(53261),O=t(17831),h=t(81734),R=t(47673),M=t(73270),z=t(60513),K=t(84959),j=t(15319),ie=t(74413),w=t(5095);function D(P=!1){const $=[M.default,z.default,K.default,j.default,ie.default,w.default,S.default,O.default,c.default,h.default,R.default];return P?$.push(d.default,f.default):$.push(e.default,E.default),$.push(r.default),$}g.default=D},3042:function(Mt,g,t){Object.defineProperty(g,"__esModule",{value:!0}),g.validateTuple=void 0;const e=t(82481),d=t(1849),E=t(9280),f={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(c){const{schema:S,it:O}=c;if(Array.isArray(S))return r(c,"additionalItems",S);O.items=!0,!(0,d.alwaysValidSchema)(O,S)&&c.ok((0,E.validateArray)(c))}};function r(c,S,O=c.schema){const{gen:h,parentSchema:R,data:M,keyword:z,it:K}=c;w(R),K.opts.unevaluated&&O.length&&K.items!==!0&&(K.items=d.mergeEvaluated.items(h,O.length,K.items));const j=h.name("valid"),ie=h.const("len",(0,e._)`${M}.length`);O.forEach((D,P)=>{(0,d.alwaysValidSchema)(K,D)||(h.if((0,e._)`${ie} > ${P}`,()=>c.subschema({keyword:z,schemaProp:P,dataProp:P},j)),c.ok(j))});function w(D){const{opts:P,errSchemaPath:$}=K,U=O.length,I=U===D.minItems&&(U===D.maxItems||D[S]===!1);if(P.strictTuples&&!I){const m=`"${z}" is ${U}-tuple, but minItems or maxItems/${S} are not specified or different at path "${$}"`;(0,d.checkStrictMode)(K,m,P.strictTuples)}}}g.validateTuple=r,g.default=f},69719:function(Mt,g,t){Object.defineProperty(g,"__esModule",{value:!0});const e=t(82481),d=t(1849),E=t(9280),f=t(52251),c={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:{message:({params:{len:S}})=>(0,e.str)`must NOT have more than ${S} items`,params:({params:{len:S}})=>(0,e._)`{limit: ${S}}`},code(S){const{schema:O,parentSchema:h,it:R}=S,{prefixItems:M}=h;R.items=!0,!(0,d.alwaysValidSchema)(R,O)&&(M?(0,f.validateAdditionalItems)(S,M):S.ok((0,E.validateArray)(S)))}};g.default=c},73270:function(Mt,g,t){Object.defineProperty(g,"__esModule",{value:!0});const e=t(1849),d={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(E){const{gen:f,schema:r,it:c}=E;if((0,e.alwaysValidSchema)(c,r)){E.fail();return}const S=f.name("valid");E.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},S),E.failResult(S,()=>E.reset(),()=>E.error())},error:{message:"must NOT be valid"}};g.default=d},84959:function(Mt,g,t){Object.defineProperty(g,"__esModule",{value:!0});const e=t(82481),d=t(1849),f={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:{message:"must match exactly one schema in oneOf",params:({params:r})=>(0,e._)`{passingSchemas: ${r.passing}}`},code(r){const{gen:c,schema:S,parentSchema:O,it:h}=r;if(!Array.isArray(S))throw new Error("ajv implementation error");if(h.opts.discriminator&&O.discriminator)return;const R=S,M=c.let("valid",!1),z=c.let("passing",null),K=c.name("_valid");r.setParams({passing:z}),c.block(j),r.result(M,()=>r.reset(),()=>r.error(!0));function j(){R.forEach((ie,w)=>{let D;(0,d.alwaysValidSchema)(h,ie)?c.var(K,!0):D=r.subschema({keyword:"oneOf",schemaProp:w,compositeRule:!0},K),w>0&&c.if((0,e._)`${K} && ${M}`).assign(M,!1).assign(z,(0,e._)`[${z}, ${w}]`).else(),c.if(K,()=>{c.assign(M,!0),c.assign(z,w),D&&r.mergeEvaluated(D,e.Name)})})}}};g.default=f},47673:function(Mt,g,t){Object.defineProperty(g,"__esModule",{value:!0});const e=t(9280),d=t(82481),E=t(1849),f=t(1849),r={keyword:"patternProperties",type:"object",schemaType:"object",code(c){const{gen:S,schema:O,data:h,parentSchema:R,it:M}=c,{opts:z}=M,K=(0,e.allSchemaProperties)(O),j=K.filter(I=>(0,E.alwaysValidSchema)(M,O[I]));if(K.length===0||j.length===K.length&&(!M.opts.unevaluated||M.props===!0))return;const ie=z.strictSchema&&!z.allowMatchingProperties&&R.properties,w=S.name("valid");M.props!==!0&&!(M.props instanceof d.Name)&&(M.props=(0,f.evaluatedPropsToName)(S,M.props));const{props:D}=M;P();function P(){for(const I of K)ie&&$(I),M.allErrors?U(I):(S.var(w,!0),U(I),S.if(w))}function $(I){for(const m in ie)new RegExp(I).test(m)&&(0,E.checkStrictMode)(M,`property ${m} matches pattern ${I} (use allowMatchingProperties)`)}function U(I){S.forIn("key",h,m=>{S.if((0,d._)`${(0,e.usePattern)(c,I)}.test(${m})`,()=>{const x=j.includes(I);x||c.subschema({keyword:"patternProperties",schemaProp:I,dataProp:m,dataPropType:f.Type.Str},w),M.opts.unevaluated&&D!==!0?S.assign((0,d._)`${D}[${m}]`,!0):!x&&!M.allErrors&&S.if((0,d.not)(w),()=>S.break())})})}}};g.default=r},38968:function(Mt,g,t){Object.defineProperty(g,"__esModule",{value:!0});const e=t(3042),d={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:E=>(0,e.validateTuple)(E,"items")};g.default=d},81734:function(Mt,g,t){Object.defineProperty(g,"__esModule",{value:!0});const e=t(4371),d=t(9280),E=t(1849),f=t(17831),r={keyword:"properties",type:"object",schemaType:"object",code(c){const{gen:S,schema:O,parentSchema:h,data:R,it:M}=c;M.opts.removeAdditional==="all"&&h.additionalProperties===void 0&&f.default.code(new e.KeywordCxt(M,f.default,"additionalProperties"));const z=(0,d.allSchemaProperties)(O);for(const D of z)M.definedProperties.add(D);M.opts.unevaluated&&z.length&&M.props!==!0&&(M.props=E.mergeEvaluated.props(S,(0,E.toHash)(z),M.props));const K=z.filter(D=>!(0,E.alwaysValidSchema)(M,O[D]));if(K.length===0)return;const j=S.name("valid");for(const D of K)ie(D)?w(D):(S.if((0,d.propertyInData)(S,R,D,M.opts.ownProperties)),w(D),M.allErrors||S.else().var(j,!0),S.endIf()),c.it.definedProperties.add(D),c.ok(j);function ie(D){return M.opts.useDefaults&&!M.compositeRule&&O[D].default!==void 0}function w(D){c.subschema({keyword:"properties",schemaProp:D,dataProp:D},j)}}};g.default=r},53261:function(Mt,g,t){Object.defineProperty(g,"__esModule",{value:!0});const e=t(82481),d=t(1849),f={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:{message:"property name must be valid",params:({params:r})=>(0,e._)`{propertyName: ${r.propertyName}}`},code(r){const{gen:c,schema:S,data:O,it:h}=r;if((0,d.alwaysValidSchema)(h,S))return;const R=c.name("valid");c.forIn("key",O,M=>{r.setParams({propertyName:M}),r.subschema({keyword:"propertyNames",data:M,dataTypes:["string"],propertyName:M,compositeRule:!0},R),c.if((0,e.not)(R),()=>{r.error(!0),h.allErrors||c.break()})}),r.ok(R)}};g.default=f},5095:function(Mt,g,t){Object.defineProperty(g,"__esModule",{value:!0});const e=t(1849),d={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:E,parentSchema:f,it:r}){f.if===void 0&&(0,e.checkStrictMode)(r,`"${E}" without "if" is ignored`)}};g.default=d},9280:function(Mt,g,t){Object.defineProperty(g,"__esModule",{value:!0}),g.validateUnion=g.validateArray=g.usePattern=g.callValidateCode=g.schemaProperties=g.allSchemaProperties=g.noPropertyInData=g.propertyInData=g.isOwnProperty=g.hasPropFunc=g.reportMissingProp=g.checkMissingProp=g.checkReportMissingProp=void 0;const e=t(82481),d=t(1849),E=t(99583),f=t(1849);function r($,U){const{gen:I,data:m,it:x}=$;I.if(M(I,m,U,x.opts.ownProperties),()=>{$.setParams({missingProperty:(0,e._)`${U}`},!0),$.error()})}g.checkReportMissingProp=r;function c({gen:$,data:U,it:{opts:I}},m,x){return(0,e.or)(...m.map(W=>(0,e.and)(M($,U,W,I.ownProperties),(0,e._)`${x} = ${W}`)))}g.checkMissingProp=c;function S($,U){$.setParams({missingProperty:U},!0),$.error()}g.reportMissingProp=S;function O($){return $.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,e._)`Object.prototype.hasOwnProperty`})}g.hasPropFunc=O;function h($,U,I){return(0,e._)`${O($)}.call(${U}, ${I})`}g.isOwnProperty=h;function R($,U,I,m){const x=(0,e._)`${U}${(0,e.getProperty)(I)} !== undefined`;return m?(0,e._)`${x} && ${h($,U,I)}`:x}g.propertyInData=R;function M($,U,I,m){const x=(0,e._)`${U}${(0,e.getProperty)(I)} === undefined`;return m?(0,e.or)(x,(0,e.not)(h($,U,I))):x}g.noPropertyInData=M;function z($){return $?Object.keys($).filter(U=>U!=="__proto__"):[]}g.allSchemaProperties=z;function K($,U){return z(U).filter(I=>!(0,d.alwaysValidSchema)($,U[I]))}g.schemaProperties=K;function j({schemaCode:$,data:U,it:{gen:I,topSchemaRef:m,schemaPath:x,errorPath:W},it:Ee},Be,Ve,qe){const Et=qe?(0,e._)`${$}, ${U}, ${m}${x}`:U,at=[[E.default.instancePath,(0,e.strConcat)(E.default.instancePath,W)],[E.default.parentData,Ee.parentData],[E.default.parentDataProperty,Ee.parentDataProperty],[E.default.rootData,E.default.rootData]];Ee.opts.dynamicRef&&at.push([E.default.dynamicAnchors,E.default.dynamicAnchors]);const Pt=(0,e._)`${Et}, ${I.object(...at)}`;return Ve!==e.nil?(0,e._)`${Be}.call(${Ve}, ${Pt})`:(0,e._)`${Be}(${Pt})`}g.callValidateCode=j;const ie=(0,e._)`new RegExp`;function w({gen:$,it:{opts:U}},I){const m=U.unicodeRegExp?"u":"",{regExp:x}=U.code,W=x(I,m);return $.scopeValue("pattern",{key:W.toString(),ref:W,code:(0,e._)`${x.code==="new RegExp"?ie:(0,f.useFunc)($,x)}(${I}, ${m})`})}g.usePattern=w;function D($){const{gen:U,data:I,keyword:m,it:x}=$,W=U.name("valid");if(x.allErrors){const Be=U.let("valid",!0);return Ee(()=>U.assign(Be,!1)),Be}return U.var(W,!0),Ee(()=>U.break()),W;function Ee(Be){const Ve=U.const("len",(0,e._)`${I}.length`);U.forRange("i",0,Ve,qe=>{$.subschema({keyword:m,dataProp:qe,dataPropType:d.Type.Num},W),U.if((0,e.not)(W),Be)})}}g.validateArray=D;function P($){const{gen:U,schema:I,keyword:m,it:x}=$;if(!Array.isArray(I))throw new Error("ajv implementation error");if(I.some(Ve=>(0,d.alwaysValidSchema)(x,Ve))&&!x.opts.unevaluated)return;const Ee=U.let("valid",!1),Be=U.name("_valid");U.block(()=>I.forEach((Ve,qe)=>{const Et=$.subschema({keyword:m,schemaProp:qe,compositeRule:!0},Be);U.assign(Ee,(0,e._)`${Ee} || ${Be}`),$.mergeValidEvaluated(Et,Be)||U.if((0,e.not)(Ee))})),$.result(Ee,()=>$.reset(),()=>$.error(!0))}g.validateUnion=P},5671:function(Mt,g){Object.defineProperty(g,"__esModule",{value:!0});const t={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};g.default=t},10356:function(Mt,g,t){Object.defineProperty(g,"__esModule",{value:!0});const e=t(5671),d=t(24302),E=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",e.default,d.default];g.default=E},24302:function(Mt,g,t){Object.defineProperty(g,"__esModule",{value:!0}),g.callRef=g.getValidate=void 0;const e=t(30283),d=t(9280),E=t(82481),f=t(99583),r=t(62902),c=t(1849),S={keyword:"$ref",schemaType:"string",code(R){const{gen:M,schema:z,it:K}=R,{baseId:j,schemaEnv:ie,validateName:w,opts:D,self:P}=K,{root:$}=ie;if((z==="#"||z==="#/")&&j===$.baseId)return I();const U=r.resolveRef.call(P,$,j,z);if(U===void 0)throw new e.default(K.opts.uriResolver,j,z);if(U instanceof r.SchemaEnv)return m(U);return x(U);function I(){if(ie===$)return h(R,w,ie,ie.$async);const W=M.scopeValue("root",{ref:$});return h(R,(0,E._)`${W}.validate`,$,$.$async)}function m(W){const Ee=O(R,W);h(R,Ee,W,W.$async)}function x(W){const Ee=M.scopeValue("schema",D.code.source===!0?{ref:W,code:(0,E.stringify)(W)}:{ref:W}),Be=M.name("valid"),Ve=R.subschema({schema:W,dataTypes:[],schemaPath:E.nil,topSchemaRef:Ee,errSchemaPath:z},Be);R.mergeEvaluated(Ve),R.ok(Be)}}};function O(R,M){const{gen:z}=R;return M.validate?z.scopeValue("validate",{ref:M.validate}):(0,E._)`${z.scopeValue("wrapper",{ref:M})}.validate`}g.getValidate=O;function h(R,M,z,K){const{gen:j,it:ie}=R,{allErrors:w,schemaEnv:D,opts:P}=ie,$=P.passContext?f.default.this:E.nil;K?U():I();function U(){if(!D.$async)throw new Error("async schema referenced by sync schema");const W=j.let("valid");j.try(()=>{j.code((0,E._)`await ${(0,d.callValidateCode)(R,M,$)}`),x(M),w||j.assign(W,!0)},Ee=>{j.if((0,E._)`!(${Ee} instanceof ${ie.ValidationError})`,()=>j.throw(Ee)),m(Ee),w||j.assign(W,!1)}),R.ok(W)}function I(){R.result((0,d.callValidateCode)(R,M,$),()=>x(M),()=>m(M))}function m(W){const Ee=(0,E._)`${W}.errors`;j.assign(f.default.vErrors,(0,E._)`${f.default.vErrors} === null ? ${Ee} : ${f.default.vErrors}.concat(${Ee})`),j.assign(f.default.errors,(0,E._)`${f.default.vErrors}.length`)}function x(W){var Ee;if(!ie.opts.unevaluated)return;const Be=(Ee=z==null?void 0:z.validate)===null||Ee===void 0?void 0:Ee.evaluated;if(ie.props!==!0)if(Be&&!Be.dynamicProps)Be.props!==void 0&&(ie.props=c.mergeEvaluated.props(j,Be.props,ie.props));else{const Ve=j.var("props",(0,E._)`${W}.evaluated.props`);ie.props=c.mergeEvaluated.props(j,Ve,ie.props,E.Name)}if(ie.items!==!0)if(Be&&!Be.dynamicItems)Be.items!==void 0&&(ie.items=c.mergeEvaluated.items(j,Be.items,ie.items));else{const Ve=j.var("items",(0,E._)`${W}.evaluated.items`);ie.items=c.mergeEvaluated.items(j,Ve,ie.items,E.Name)}}}g.callRef=h,g.default=S},99908:function(Mt,g,t){Object.defineProperty(g,"__esModule",{value:!0});const e=t(82481),d=t(521),E=t(62902),f=t(1849),c={keyword:"discriminator",type:"object",schemaType:"object",error:{message:({params:{discrError:S,tagName:O}})=>S===d.DiscrError.Tag?`tag "${O}" must be string`:`value of tag "${O}" must be in oneOf`,params:({params:{discrError:S,tag:O,tagName:h}})=>(0,e._)`{error: ${S}, tag: ${h}, tagValue: ${O}}`},code(S){const{gen:O,data:h,schema:R,parentSchema:M,it:z}=S,{oneOf:K}=M;if(!z.opts.discriminator)throw new Error("discriminator: requires discriminator option");const j=R.propertyName;if(typeof j!="string")throw new Error("discriminator: requires propertyName");if(R.mapping)throw new Error("discriminator: mapping is not supported");if(!K)throw new Error("discriminator: requires oneOf keyword");const ie=O.let("valid",!1),w=O.const("tag",(0,e._)`${h}${(0,e.getProperty)(j)}`);O.if((0,e._)`typeof ${w} == "string"`,()=>D(),()=>S.error(!1,{discrError:d.DiscrError.Tag,tag:w,tagName:j})),S.ok(ie);function D(){const U=$();O.if(!1);for(const I in U)O.elseIf((0,e._)`${w} === ${I}`),O.assign(ie,P(U[I]));O.else(),S.error(!1,{discrError:d.DiscrError.Mapping,tag:w,tagName:j}),O.endIf()}function P(U){const I=O.name("valid"),m=S.subschema({keyword:"oneOf",schemaProp:U},I);return S.mergeEvaluated(m,e.Name),I}function $(){var U;const I={},m=W(M);let x=!0;for(let Ve=0;Ve<K.length;Ve++){let qe=K[Ve];(qe==null?void 0:qe.$ref)&&!(0,f.schemaHasRulesButRef)(qe,z.self.RULES)&&(qe=E.resolveRef.call(z.self,z.schemaEnv.root,z.baseId,qe==null?void 0:qe.$ref),qe instanceof E.SchemaEnv&&(qe=qe.schema));const Et=(U=qe==null?void 0:qe.properties)===null||U===void 0?void 0:U[j];if(typeof Et!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${j}"`);x=x&&(m||W(qe)),Ee(Et,Ve)}if(!x)throw new Error(`discriminator: "${j}" must be required`);return I;function W({required:Ve}){return Array.isArray(Ve)&&Ve.includes(j)}function Ee(Ve,qe){if(Ve.const)Be(Ve.const,qe);else if(Ve.enum)for(const Et of Ve.enum)Be(Et,qe);else throw new Error(`discriminator: "properties/${j}" must have "const" or "enum"`)}function Be(Ve,qe){if(typeof Ve!="string"||Ve in I)throw new Error(`discriminator: "${j}" values must be unique strings`);I[Ve]=qe}}}};g.default=c},521:function(Mt,g){Object.defineProperty(g,"__esModule",{value:!0}),g.DiscrError=void 0;var t;(function(e){e.Tag="tag",e.Mapping="mapping"})(t=g.DiscrError||(g.DiscrError={}))},57993:function(Mt,g,t){Object.defineProperty(g,"__esModule",{value:!0});const e=t(10356),d=t(16282),E=t(14226),f=t(6989),r=t(68373),c=[e.default,d.default,(0,E.default)(),f.default,r.metadataVocabulary,r.contentVocabulary];g.default=c},43202:function(Mt,g,t){Object.defineProperty(g,"__esModule",{value:!0});const e=t(82481),E={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:{message:({schemaCode:f})=>(0,e.str)`must match format "${f}"`,params:({schemaCode:f})=>(0,e._)`{format: ${f}}`},code(f,r){const{gen:c,data:S,$data:O,schema:h,schemaCode:R,it:M}=f,{opts:z,errSchemaPath:K,schemaEnv:j,self:ie}=M;if(!z.validateFormats)return;O?w():D();function w(){const P=c.scopeValue("formats",{ref:ie.formats,code:z.code.formats}),$=c.const("fDef",(0,e._)`${P}[${R}]`),U=c.let("fType"),I=c.let("format");c.if((0,e._)`typeof ${$} == "object" && !(${$} instanceof RegExp)`,()=>c.assign(U,(0,e._)`${$}.type || "string"`).assign(I,(0,e._)`${$}.validate`),()=>c.assign(U,(0,e._)`"string"`).assign(I,$)),f.fail$data((0,e.or)(m(),x()));function m(){return z.strictSchema===!1?e.nil:(0,e._)`${R} && !${I}`}function x(){const W=j.$async?(0,e._)`(${$}.async ? await ${I}(${S}) : ${I}(${S}))`:(0,e._)`${I}(${S})`,Ee=(0,e._)`(typeof ${I} == "function" ? ${W} : ${I}.test(${S}))`;return(0,e._)`${I} && ${I} !== true && ${U} === ${r} && !${Ee}`}}function D(){const P=ie.formats[h];if(!P){m();return}if(P===!0)return;const[$,U,I]=x(P);$===r&&f.pass(W());function m(){if(z.strictSchema===!1){ie.logger.warn(Ee());return}throw new Error(Ee());function Ee(){return`unknown format "${h}" ignored in schema at path "${K}"`}}function x(Ee){const Be=Ee instanceof RegExp?(0,e.regexpCode)(Ee):z.code.formats?(0,e._)`${z.code.formats}${(0,e.getProperty)(h)}`:void 0,Ve=c.scopeValue("formats",{key:h,ref:Ee,code:Be});return typeof Ee=="object"&&!(Ee instanceof RegExp)?[Ee.type||"string",Ee.validate,(0,e._)`${Ve}.validate`]:["string",Ee,Ve]}function W(){if(typeof P=="object"&&!(P instanceof RegExp)&&P.async){if(!j.$async)throw new Error("async format in sync schema");return(0,e._)`await ${I}(${S})`}return typeof U=="function"?(0,e._)`${I}(${S})`:(0,e._)`${I}.test(${S})`}}}};g.default=E},6989:function(Mt,g,t){Object.defineProperty(g,"__esModule",{value:!0});const d=[t(43202).default];g.default=d},68373:function(Mt,g){Object.defineProperty(g,"__esModule",{value:!0}),g.contentVocabulary=g.metadataVocabulary=void 0,g.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"],g.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"]},80750:function(Mt,g,t){Object.defineProperty(g,"__esModule",{value:!0});const e=t(82481),d=t(1849),E=t(55947),r={keyword:"const",$data:!0,error:{message:"must be equal to constant",params:({schemaCode:c})=>(0,e._)`{allowedValue: ${c}}`},code(c){const{gen:S,data:O,$data:h,schemaCode:R,schema:M}=c;h||M&&typeof M=="object"?c.fail$data((0,e._)`!${(0,d.useFunc)(S,E.default)}(${O}, ${R})`):c.fail((0,e._)`${M} !== ${O}`)}};g.default=r},28109:function(Mt,g,t){Object.defineProperty(g,"__esModule",{value:!0});const e=t(82481),d=t(1849),E=t(55947),r={keyword:"enum",schemaType:"array",$data:!0,error:{message:"must be equal to one of the allowed values",params:({schemaCode:c})=>(0,e._)`{allowedValues: ${c}}`},code(c){const{gen:S,data:O,$data:h,schema:R,schemaCode:M,it:z}=c;if(!h&&R.length===0)throw new Error("enum must have non-empty array");const K=R.length>=z.opts.loopEnum;let j;const ie=()=>j!=null?j:j=(0,d.useFunc)(S,E.default);let w;if(K||h)w=S.let("valid"),c.block$data(w,D);else{if(!Array.isArray(R))throw new Error("ajv implementation error");const $=S.const("vSchema",M);w=(0,e.or)(...R.map((U,I)=>P($,I)))}c.pass(w);function D(){S.assign(w,!1),S.forOf("v",M,$=>S.if((0,e._)`${ie()}(${O}, ${$})`,()=>S.assign(w,!0).break()))}function P($,U){const I=R[U];return typeof I=="object"&&I!==null?(0,e._)`${ie()}(${O}, ${$}[${U}])`:(0,e._)`${O} === ${I}`}}};g.default=r},16282:function(Mt,g,t){Object.defineProperty(g,"__esModule",{value:!0});const e=t(41619),d=t(36701),E=t(34660),f=t(72326),r=t(69354),c=t(60881),S=t(42632),O=t(41985),h=t(80750),R=t(28109),M=[e.default,d.default,E.default,f.default,r.default,c.default,S.default,O.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},h.default,R.default];g.default=M},42632:function(Mt,g,t){Object.defineProperty(g,"__esModule",{value:!0});const e=t(82481),E={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:{message({keyword:f,schemaCode:r}){const c=f==="maxItems"?"more":"fewer";return(0,e.str)`must NOT have ${c} than ${r} items`},params:({schemaCode:f})=>(0,e._)`{limit: ${f}}`},code(f){const{keyword:r,data:c,schemaCode:S}=f,O=r==="maxItems"?e.operators.GT:e.operators.LT;f.fail$data((0,e._)`${c}.length ${O} ${S}`)}};g.default=E},34660:function(Mt,g,t){Object.defineProperty(g,"__esModule",{value:!0});const e=t(82481),d=t(1849),E=t(7836),r={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:{message({keyword:c,schemaCode:S}){const O=c==="maxLength"?"more":"fewer";return(0,e.str)`must NOT have ${O} than ${S} characters`},params:({schemaCode:c})=>(0,e._)`{limit: ${c}}`},code(c){const{keyword:S,data:O,schemaCode:h,it:R}=c,M=S==="maxLength"?e.operators.GT:e.operators.LT,z=R.opts.unicode===!1?(0,e._)`${O}.length`:(0,e._)`${(0,d.useFunc)(c.gen,E.default)}(${O})`;c.fail$data((0,e._)`${z} ${M} ${h}`)}};g.default=r},41619:function(Mt,g,t){Object.defineProperty(g,"__esModule",{value:!0});const e=t(82481),d=e.operators,E={maximum:{okStr:"<=",ok:d.LTE,fail:d.GT},minimum:{okStr:">=",ok:d.GTE,fail:d.LT},exclusiveMaximum:{okStr:"<",ok:d.LT,fail:d.GTE},exclusiveMinimum:{okStr:">",ok:d.GT,fail:d.LTE}},f={message:({keyword:c,schemaCode:S})=>(0,e.str)`must be ${E[c].okStr} ${S}`,params:({keyword:c,schemaCode:S})=>(0,e._)`{comparison: ${E[c].okStr}, limit: ${S}}`},r={keyword:Object.keys(E),type:"number",schemaType:"number",$data:!0,error:f,code(c){const{keyword:S,data:O,schemaCode:h}=c;c.fail$data((0,e._)`${O} ${E[S].fail} ${h} || isNaN(${O})`)}};g.default=r},69354:function(Mt,g,t){Object.defineProperty(g,"__esModule",{value:!0});const e=t(82481),E={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:{message({keyword:f,schemaCode:r}){const c=f==="maxProperties"?"more":"fewer";return(0,e.str)`must NOT have ${c} than ${r} properties`},params:({schemaCode:f})=>(0,e._)`{limit: ${f}}`},code(f){const{keyword:r,data:c,schemaCode:S}=f,O=r==="maxProperties"?e.operators.GT:e.operators.LT;f.fail$data((0,e._)`Object.keys(${c}).length ${O} ${S}`)}};g.default=E},36701:function(Mt,g,t){Object.defineProperty(g,"__esModule",{value:!0});const e=t(82481),E={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:{message:({schemaCode:f})=>(0,e.str)`must be multiple of ${f}`,params:({schemaCode:f})=>(0,e._)`{multipleOf: ${f}}`},code(f){const{gen:r,data:c,schemaCode:S,it:O}=f,h=O.opts.multipleOfPrecision,R=r.let("res"),M=h?(0,e._)`Math.abs(Math.round(${R}) - ${R}) > 1e-${h}`:(0,e._)`${R} !== parseInt(${R})`;f.fail$data((0,e._)`(${S} === 0 || (${R} = ${c}/${S}, ${M}))`)}};g.default=E},72326:function(Mt,g,t){Object.defineProperty(g,"__esModule",{value:!0});const e=t(9280),d=t(82481),f={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:{message:({schemaCode:r})=>(0,d.str)`must match pattern "${r}"`,params:({schemaCode:r})=>(0,d._)`{pattern: ${r}}`},code(r){const{data:c,$data:S,schema:O,schemaCode:h,it:R}=r,M=R.opts.unicodeRegExp?"u":"",z=S?(0,d._)`(new RegExp(${h}, ${M}))`:(0,e.usePattern)(r,O);r.fail$data((0,d._)`!${z}.test(${c})`)}};g.default=f},60881:function(Mt,g,t){Object.defineProperty(g,"__esModule",{value:!0});const e=t(9280),d=t(82481),E=t(1849),r={keyword:"required",type:"object",schemaType:"array",$data:!0,error:{message:({params:{missingProperty:c}})=>(0,d.str)`must have required property '${c}'`,params:({params:{missingProperty:c}})=>(0,d._)`{missingProperty: ${c}}`},code(c){const{gen:S,schema:O,schemaCode:h,data:R,$data:M,it:z}=c,{opts:K}=z;if(!M&&O.length===0)return;const j=O.length>=K.loopRequired;if(z.allErrors?ie():w(),K.strictRequired){const $=c.parentSchema.properties,{definedProperties:U}=c.it;for(const I of O)if(($==null?void 0:$[I])===void 0&&!U.has(I)){const m=z.schemaEnv.baseId+z.errSchemaPath,x=`required property "${I}" is not defined at "${m}" (strictRequired)`;(0,E.checkStrictMode)(z,x,z.opts.strictRequired)}}function ie(){if(j||M)c.block$data(d.nil,D);else for(const $ of O)(0,e.checkReportMissingProp)(c,$)}function w(){const $=S.let("missing");if(j||M){const U=S.let("valid",!0);c.block$data(U,()=>P($,U)),c.ok(U)}else S.if((0,e.checkMissingProp)(c,O,$)),(0,e.reportMissingProp)(c,$),S.else()}function D(){S.forOf("prop",h,$=>{c.setParams({missingProperty:$}),S.if((0,e.noPropertyInData)(S,R,$,K.ownProperties),()=>c.error())})}function P($,U){c.setParams({missingProperty:$}),S.forOf($,h,()=>{S.assign(U,(0,e.propertyInData)(S,R,$,K.ownProperties)),S.if((0,d.not)(U),()=>{c.error(),S.break()})},d.nil)}}};g.default=r},41985:function(Mt,g,t){Object.defineProperty(g,"__esModule",{value:!0});const e=t(93277),d=t(82481),E=t(1849),f=t(55947),c={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:{message:({params:{i:S,j:O}})=>(0,d.str)`must NOT have duplicate items (items ## ${O} and ${S} are identical)`,params:({params:{i:S,j:O}})=>(0,d._)`{i: ${S}, j: ${O}}`},code(S){const{gen:O,data:h,$data:R,schema:M,parentSchema:z,schemaCode:K,it:j}=S;if(!R&&!M)return;const ie=O.let("valid"),w=z.items?(0,e.getSchemaTypes)(z.items):[];S.block$data(ie,D,(0,d._)`${K} === false`),S.ok(ie);function D(){const I=O.let("i",(0,d._)`${h}.length`),m=O.let("j");S.setParams({i:I,j:m}),O.assign(ie,!0),O.if((0,d._)`${I} > 1`,()=>(P()?$:U)(I,m))}function P(){return w.length>0&&!w.some(I=>I==="object"||I==="array")}function $(I,m){const x=O.name("item"),W=(0,e.checkDataTypes)(w,x,j.opts.strictNumbers,e.DataType.Wrong),Ee=O.const("indices",(0,d._)`{}`);O.for((0,d._)`;${I}--;`,()=>{O.let(x,(0,d._)`${h}[${I}]`),O.if(W,(0,d._)`continue`),w.length>1&&O.if((0,d._)`typeof ${x} == "string"`,(0,d._)`${x} += "_"`),O.if((0,d._)`typeof ${Ee}[${x}] == "number"`,()=>{O.assign(m,(0,d._)`${Ee}[${x}]`),S.error(),O.assign(ie,!1).break()}).code((0,d._)`${Ee}[${x}] = ${I}`)})}function U(I,m){const x=(0,E.useFunc)(O,f.default),W=O.name("outer");O.label(W).for((0,d._)`;${I}--;`,()=>O.for((0,d._)`${m} = ${I}; ${m}--;`,()=>O.if((0,d._)`${x}(${h}[${I}], ${h}[${m}])`,()=>{S.error(),O.assign(ie,!1).break(W)})))}}};g.default=c},53907:function(Mt,g,t){t.d(g,{CX:function(){return Ne},uC:function(){return Ae},xP:function(){return se},KN:function(){return ge},gr:function(){return He},II:function(){return sn},wQ:function(){return Tn},Td:function(){return nt},aq:function(){return je},eE:function(){return N},_i:function(){return Ct},gN:function(){return T},YM:function(){return ae},sn:function(){return St},$_:function(){return ce},Jv:function(){return it},pM:function(){return te},CJ:function(){return ke},jJ:function(){return Fe},bg:function(){return nn}});var e=t(2784),d=t(13980),E=t.n(d),f=t(18473),r=t(82394),c=t.n(r),S=t(30705),O=t(30195),h=t(9850),R=t.n(h),M=t(12782),z=t.n(M);const K=/^[a-z][a-z0-9]*(?:[-_][a-z][a-z0-9]*)*$/i;function j(H){return typeof H=="object"&&H!==null&&!Array.isArray(H)}function ie(H){if(H===null)return"null";if(Array.isArray(H))return"array";const s=typeof H;return s==="number"&&isNaN(H)?"nan":s==="string"&&H===""?"empty-string":s}const w={type(H,s,y,B){return`Invalid type in config for key '${H}' in '${s}', got ${y}, wanted ${B}`},missing(H){return`Missing required config value at '${H}'`},convert(H,s,y){return`Unable to convert config value for key '${H}' in '${s}' to a ${y}`}};class D{constructor(s,y="mock-config",B,Y=""){this.data=s,this.context=y,this.fallback=B,this.prefix=Y,this.notifiedFilteredKeys=new Set}static fromConfigs(s){return s.length===0?new D(void 0):s.reduce((y,{data:B,context:Y,filteredKeys:Pe,deprecatedKeys:Xe})=>{const ot=new D(B,Y,y);if(ot.filteredKeys=Pe,Xe)for(const{key:kt,description:on}of Xe)console.warn(`The configuration key '${kt}' of ${Y} is deprecated and may be removed soon. ${on||""}`);return ot},void 0)}has(s){var y,B;return this.readValue(s)!==void 0?!0:(B=(y=this.fallback)==null?void 0:y.has(s))!=null?B:!1}keys(){var s,y;const B=this.data?Object.keys(this.data):[],Y=(y=(s=this.fallback)==null?void 0:s.keys())!=null?y:[];return[...new Set([...B,...Y])]}get(s){const y=this.getOptional(s);if(y===void 0)throw new Error(w.missing(this.fullKey(s!=null?s:"")));return y}getOptional(s){var y,B;const Y=R()(this.readValue(s)),Pe=(y=this.fallback)==null?void 0:y.getOptional(s);return Y===void 0?Pe:Pe===void 0?Y:z()({},{value:Pe},{value:Y},(Xe,ot)=>!j(ot)||!j(Xe)?ot:void 0).value}getConfig(s){const y=this.getOptionalConfig(s);if(y===void 0)throw new Error(w.missing(this.fullKey(s)));return y}getOptionalConfig(s){var y;const B=this.readValue(s),Y=(y=this.fallback)==null?void 0:y.getOptionalConfig(s);if(j(B))return this.copy(B,s,Y);if(B!==void 0)throw new TypeError(w.type(this.fullKey(s),this.context,ie(B),"object"));return Y}getConfigArray(s){const y=this.getOptionalConfigArray(s);if(y===void 0)throw new Error(w.missing(this.fullKey(s)));return y}getOptionalConfigArray(s){var y;const B=this.readConfigValue(s,Y=>{if(!Array.isArray(Y))return{expected:"object-array"};for(const[Pe,Xe]of Y.entries())if(!j(Xe))return{expected:"object-array",value:Xe,key:`${s}[${Pe}]`};return!0});if(!!B)return B.map((Y,Pe)=>this.copy(Y,`${s}[${Pe}]`))}getNumber(s){const y=this.getOptionalNumber(s);if(y===void 0)throw new Error(w.missing(this.fullKey(s)));return y}getOptionalNumber(s){const y=this.readConfigValue(s,Y=>typeof Y=="number"||typeof Y=="string"||{expected:"number"});if(typeof y=="number"||y===void 0)return y;const B=Number(y);if(!Number.isFinite(B))throw new Error(w.convert(this.fullKey(s),this.context,"number"));return B}getBoolean(s){const y=this.getOptionalBoolean(s);if(y===void 0)throw new Error(w.missing(this.fullKey(s)));return y}getOptionalBoolean(s){return this.readConfigValue(s,y=>typeof y=="boolean"||{expected:"boolean"})}getString(s){const y=this.getOptionalString(s);if(y===void 0)throw new Error(w.missing(this.fullKey(s)));return y}getOptionalString(s){return this.readConfigValue(s,y=>typeof y=="string"&&y!==""||{expected:"string"})}getStringArray(s){const y=this.getOptionalStringArray(s);if(y===void 0)throw new Error(w.missing(this.fullKey(s)));return y}getOptionalStringArray(s){return this.readConfigValue(s,y=>{if(!Array.isArray(y))return{expected:"string-array"};for(const[B,Y]of y.entries())if(typeof Y!="string"||Y==="")return{expected:"string-array",value:Y,key:`${s}[${B}]`};return!0})}fullKey(s){return`${this.prefix}${this.prefix?".":""}${s}`}copy(s,y,B){const Y=new D(s,this.context,B,this.fullKey(y));return Y.filteredKeys=this.filteredKeys,Y}readConfigValue(s,y){var B,Y;const Pe=this.readValue(s);if(Pe===void 0)return(Y=this.fallback)==null?void 0:Y.readConfigValue(s,y);const Xe=y(Pe);if(Xe!==!0){const{key:ot=s,value:kt=Pe,expected:on}=Xe;throw new TypeError(w.type(this.fullKey(ot),this.context,ie(kt),on))}return Pe}readValue(s){const y=s?s.split("."):[];for(const Y of y)if(!K.test(Y))throw new TypeError(`Invalid config key '${s}'`);if(this.data===void 0)return;let B=this.data;for(const[Y,Pe]of y.entries())if(j(B))B=B[Pe];else if(B!==void 0){const Xe=this.fullKey(y.slice(0,Y).join("."));throw new TypeError(w.type(Xe,this.context,ie(B),"object"))}return B}}var P=t(16060),$=t(73557),U=t(64279),I=t(72164);class m{constructor(...s){this.holders=s}get(s){for(const y of this.holders){const B=y.get(s);if(B)return B}}}const x=(0,f.CT)("api-context"),W=H=>{var s;const{apis:y,children:B}=H,Y=(s=(0,e.useContext)(x))==null?void 0:s.atVersion(1),Pe=Y?new m(y,Y):y;return e.createElement(x.Provider,{value:(0,f.EI)({1:Pe}),children:B})};W.propTypes={apis:E().shape({get:E().func.isRequired}).isRequired,children:E().node};class Ee{constructor(s){this.factories=s,this.apis=new Map}static validateFactories(s,y){for(const B of y){const Y=[B],Pe=new Set;for(;Y.length;){const Xe=Y.shift(),ot=s.get(Xe);if(!!ot)for(const kt of Object.values(ot.deps)){if(kt.id===B.id)throw new Error(`Circular dependency of api factory for ${B}`);Pe.has(kt)||(Pe.add(kt),Y.push(kt))}}}}get(s){return this.load(s)}load(s,y=[]){const B=this.apis.get(s.id);if(B)return B;const Y=this.factories.get(s);if(!Y)return;if(y.includes(Y.api))throw new Error(`Circular dependency of api factory for ${Y.api}`);const Pe=this.loadDeps(s,Y.deps,[...y,Y.api]),Xe=Y.factory(Pe);return this.apis.set(s.id,Xe),Xe}loadDeps(s,y,B){const Y={};for(const Pe in y)if(y.hasOwnProperty(Pe)){const Xe=y[Pe],ot=this.load(Xe,B);if(!ot)throw new Error(`No API factory available for dependency ${Xe} of dependent ${s}`);Y[Pe]=ot}return Y}}var Be=(H=>(H[H.default=10]="default",H[H.app=50]="app",H[H.static=100]="static",H))(Be||{});class Ve{constructor(){this.factories=new Map}register(s,y){const B=Be[s],Y=this.factories.get(y.api.id);return Y&&Y.priority>=B?!1:(this.factories.set(y.api.id,{priority:B,factory:y}),!0)}get(s){const y=this.factories.get(s.id);if(!!y)return y.factory}getAllApis(){const s=new Set;for(const{factory:y}of this.factories.values())s.add(y.api);return s}}function qe(H){return new Promise((s,y)=>{const B=H.width||500,Y=H.height||700,Pe=window.screen.width/2-B/2,Xe=window.screen.height/2-Y/2,ot=window.open(H.url,H.name,`menubar=no,location=no,resizable=no,scrollbars=no,status=no,width=${B},height=${Y},top=${Xe},left=${Pe}`);let kt="";if(!ot||typeof ot.closed=="undefined"||ot.closed){const An=new Error("Failed to open auth popup.");An.name="PopupRejectedError",y(An);return}const on=An=>{if(An.source!==ot||An.origin!==H.origin)return;const{data:Nn}=An;if(Nn.type==="config_info"){kt=Nn.targetOrigin;return}if(Nn.type!=="authorization_response")return;const Gn=Nn;if("error"in Gn){const rt=new Error(Gn.error.message);rt.name=Gn.error.name,y(rt)}else s(Gn.response);Bn()},un=setInterval(()=>{if(ot.closed){const An=`Login failed, ${kt&&kt!==window.location.origin?`Incorrect app origin, expected ${kt}`:"popup was closed"}`,Nn=new Error(An);Nn.name="PopupClosedError",y(Nn),Bn()}},100);function Bn(){window.removeEventListener("message",on),clearInterval(un)}window.addEventListener("message",on)})}function Et(H){return[...H].join(" ")}class at{constructor(s){const{discoveryApi:y,environment:B,provider:Y,joinScopes:Pe=Et,oauthRequestApi:Xe,sessionTransform:ot=kt=>kt}=s;this.authRequester=Xe.createAuthRequester({provider:Y,onAuthRequest:kt=>this.showPopup(kt)}),this.discoveryApi=y,this.environment=B,this.provider=Y,this.joinScopesFunc=Pe,this.sessionTransform=ot}async createSession(s){return s.instantPopup?this.showPopup(s.scopes):this.authRequester(s.scopes)}async refreshSession(){const s=await fetch(await this.buildUrl("/refresh",{optional:!0}),{headers:{"x-requested-with":"XMLHttpRequest"},credentials:"include"}).catch(B=>{throw new Error(`Auth refresh request failed, ${B}`)});if(!s.ok){const B=new Error(`Auth refresh request failed, ${s.statusText}`);throw B.status=s.status,B}const y=await s.json();if(y.error){const B=new Error(y.error.message);throw y.error.name&&(B.name=y.error.name),B}return await this.sessionTransform(y)}async removeSession(){const s=await fetch(await this.buildUrl("/logout"),{method:"POST",headers:{"x-requested-with":"XMLHttpRequest"},credentials:"include"}).catch(y=>{throw new Error(`Logout request failed, ${y}`)});if(!s.ok){const y=new Error(`Logout request failed, ${s.statusText}`);throw y.status=s.status,y}}async showPopup(s){const y=this.joinScopesFunc(s),B=await this.buildUrl("/start",{scope:y,origin:location.origin}),Y=await qe({url:B,name:`${this.provider.title} Login`,origin:new URL(B).origin,width:450,height:730});return await this.sessionTransform(Y)}async buildUrl(s,y){const B=await this.discoveryApi.getBaseUrl("auth"),Y=this.buildQueryString({...y,env:this.environment});return`${B}/${this.provider.id}${s}${Y}`}buildQueryString(s){if(!s)return"";const y=Object.entries(s).map(([B,Y])=>{if(typeof Y=="string")return`${encodeURIComponent(B)}=${encodeURIComponent(Y)}`;if(Y)return encodeURIComponent(B)}).filter(Boolean).join("&");return y?`?${y}`:""}}class Pt{constructor(s){const{discoveryApi:y,environment:B,provider:Y}=s;this.discoveryApi=y,this.environment=B,this.provider=Y}async createSession(){const s=await this.buildUrl("/start"),y=await qe({url:s,name:`${this.provider.title} Login`,origin:new URL(s).origin,width:450,height:730});return{...y,id:y.profile.email}}async refreshSession(){}async removeSession(){const s=await fetch(await this.buildUrl("/logout"),{method:"POST",headers:{"x-requested-with":"XMLHttpRequest"},credentials:"include"}).catch(y=>{throw new Error(`Logout request failed, ${y}`)});if(!s.ok){const y=new Error(`Logout request failed, ${s.statusText}`);throw y.status=s.status,y}}async buildUrl(s){return`${await this.discoveryApi.getBaseUrl("auth")}/${this.provider.id}${s}?env=${this.environment}`}}function At(H,s){for(const y of s)if(!H.has(y))return!1;return!0}class q{constructor(s){this.options=s}sessionExistsAndHasScope(s,y){if(!s)return!1;if(!y||this.options.sessionScopes===void 0)return!0;const B=this.options.sessionScopes(s);return At(B,y)}getExtendedScope(s,y){const B=new Set(this.options.defaultScopes);if(s&&this.options.sessionScopes!==void 0){const Y=this.options.sessionScopes(s);for(const Pe of Y)B.add(Pe)}if(y)for(const Y of y)B.add(Y);return B}}class rn{constructor(){this.isClosed=!1,this.observable=new(c())(s=>this.isClosed?(this.terminatingError?s.error(this.terminatingError):s.complete(),()=>{}):(this.subscribers.add(s),()=>{this.subscribers.delete(s)})),this.subscribers=new Set}[Symbol.observable](){return this}get closed(){return this.isClosed}next(s){if(this.isClosed)throw new Error("PublishSubject is closed");this.subscribers.forEach(y=>y.next(s))}error(s){if(this.isClosed)throw new Error("PublishSubject is closed");this.isClosed=!0,this.terminatingError=s,this.subscribers.forEach(y=>y.error(s))}complete(){if(this.isClosed)throw new Error("PublishSubject is closed");this.isClosed=!0,this.subscribers.forEach(s=>s.complete())}subscribe(s,y,B){const Y=typeof s=="function"?{next:s,error:y,complete:B}:s;return this.observable.subscribe(Y)}}class ct{constructor(s){this.subscribers=new Set,this.isClosed=!1,this.currentValue=s,this.terminatingError=void 0,this.observable=new(c())(y=>this.isClosed?(this.terminatingError?y.error(this.terminatingError):y.complete(),()=>{}):(y.next(this.currentValue),this.subscribers.add(y),()=>{this.subscribers.delete(y)}))}[Symbol.observable](){return this}get closed(){return this.isClosed}next(s){if(this.isClosed)throw new Error("BehaviorSubject is closed");this.currentValue=s,this.subscribers.forEach(y=>y.next(s))}error(s){if(this.isClosed)throw new Error("BehaviorSubject is closed");this.isClosed=!0,this.terminatingError=s,this.subscribers.forEach(y=>y.error(s))}complete(){if(this.isClosed)throw new Error("BehaviorSubject is closed");this.isClosed=!0,this.subscribers.forEach(s=>s.complete())}subscribe(s,y,B){const Y=typeof s=="function"?{next:s,error:y,complete:B}:s;return this.observable.subscribe(Y)}}class xe{constructor(){this.subject=new ct(S.sM.SignedOut),this.signedIn=!1}setIsSignedIn(s){this.signedIn!==s&&(this.signedIn=s,this.subject.next(this.signedIn?S.sM.SignedIn:S.sM.SignedOut))}sessionState$(){return this.subject}}class oe{constructor(s){this.stateTracker=new xe;const{connector:y,defaultScopes:B=new Set,sessionScopes:Y,sessionShouldRefresh:Pe}=s;this.connector=y,this.sessionScopesFunc=Y,this.sessionShouldRefreshFunc=Pe,this.helper=new q({sessionScopes:Y,defaultScopes:B})}async getSession(s){if(this.helper.sessionExistsAndHasScope(this.currentSession,s.scopes)){if(!this.sessionShouldRefreshFunc(this.currentSession))return this.currentSession;try{const B=await this.collapsedSessionRefresh(),Y=this.sessionScopesFunc(this.currentSession),Pe=this.sessionScopesFunc(B);return At(Pe,Y)&&(this.currentSession=B),B}catch(B){if(s.optional)return;throw B}}if(!this.currentSession&&!s.instantPopup)try{const y=await this.collapsedSessionRefresh();return this.currentSession=y,this.getSession(s)}catch{}if(!s.optional)return this.currentSession=await this.connector.createSession({...s,scopes:this.helper.getExtendedScope(this.currentSession,s.scopes)}),this.stateTracker.setIsSignedIn(!0),this.currentSession}async removeSession(){this.currentSession=void 0,await this.connector.removeSession(),this.stateTracker.setIsSignedIn(!1)}sessionState$(){return this.stateTracker.sessionState$()}async collapsedSessionRefresh(){if(this.refreshPromise)return this.refreshPromise;this.refreshPromise=this.connector.refreshSession();try{const s=await this.refreshPromise;return this.stateTracker.setIsSignedIn(!0),s}finally{delete this.refreshPromise}}}class Ue{constructor(s){this.stateTracker=new xe;const{connector:y,defaultScopes:B=new Set,sessionScopes:Y}=s;this.connector=y,this.helper=new q({sessionScopes:Y,defaultScopes:B})}setSession(s){this.currentSession=s,this.stateTracker.setIsSignedIn(Boolean(s))}async getSession(s){if(this.helper.sessionExistsAndHasScope(this.currentSession,s.scopes))return this.currentSession;if(!s.optional)return this.currentSession=await this.connector.createSession({...s,scopes:this.helper.getExtendedScope(this.currentSession,s.scopes)}),this.stateTracker.setIsSignedIn(!0),this.currentSession}async removeSession(){this.currentSession=void 0,this.stateTracker.setIsSignedIn(!1)}sessionState$(){return this.stateTracker.sessionState$()}}class de{constructor(s){const{manager:y,storageKey:B,schema:Y,sessionScopes:Pe,sessionShouldRefresh:Xe=()=>!1}=s;this.manager=y,this.storageKey=B,this.schema=Y,this.sessionShouldRefreshFunc=Xe,this.helper=new q({sessionScopes:Pe,defaultScopes:new Set})}setSession(s){this.manager.setSession(s),this.saveSession(s)}async getSession(s){const{scopes:y}=s,B=this.loadSession();if(this.helper.sessionExistsAndHasScope(B,y)&&!this.sessionShouldRefreshFunc(B))return this.manager.setSession(B),B;const Y=await this.manager.getSession(s);return this.saveSession(Y),Y}async removeSession(){localStorage.removeItem(this.storageKey),await this.manager.removeSession()}sessionState$(){return this.manager.sessionState$()}loadSession(){try{const s=localStorage.getItem(this.storageKey);if(s){const y=JSON.parse(s,(B,Y)=>(Y==null?void 0:Y.__type)==="Set"?new Set(Y.__value):Y);try{return this.schema.parse(y)}catch(B){throw console.log(`Failed to load session from local storage because it did not conform to the expected schema, ${B}`),B}}return}catch{localStorage.removeItem(this.storageKey);return}}saveSession(s){if(s===void 0){localStorage.removeItem(this.storageKey);return}try{this.schema.parse(s)}catch(y){console.warn(`Failed to save session to local storage because it did not conform to the expected schema, ${y}`);return}localStorage.setItem(this.storageKey,JSON.stringify(s,(y,B)=>B instanceof Set?{__type:"Set",__value:Array.from(B)}:B))}}const p={id:"oauth2",title:"Your Identity Provider",icon:()=>null};class G{static create(s){const{discoveryApi:y,environment:B="development",provider:Y=p,oauthRequestApi:Pe,defaultScopes:Xe=[],scopeTransform:ot=un=>un}=s,kt=new at({discoveryApi:y,environment:B,provider:Y,oauthRequestApi:Pe,sessionTransform(un){return{...un,providerInfo:{idToken:un.providerInfo.idToken,accessToken:un.providerInfo.accessToken,scopes:G.normalizeScopes(ot,un.providerInfo.scope),expiresAt:new Date(Date.now()+un.providerInfo.expiresInSeconds*1e3)}}}}),on=new oe({connector:kt,defaultScopes:new Set(Xe),sessionScopes:un=>un.providerInfo.scopes,sessionShouldRefresh:un=>(un.providerInfo.expiresAt.getTime()-Date.now())/1e3<60*5});return new G({sessionManager:on,scopeTransform:ot})}constructor(s){this.sessionManager=s.sessionManager,this.scopeTransform=s.scopeTransform}async signIn(){await this.getAccessToken()}async signOut(){await this.sessionManager.removeSession()}sessionState$(){return this.sessionManager.sessionState$()}async getAccessToken(s,y){var B;const Y=G.normalizeScopes(this.scopeTransform,s),Pe=await this.sessionManager.getSession({...y,scopes:Y});return(B=Pe==null?void 0:Pe.providerInfo.accessToken)!=null?B:""}async getIdToken(s={}){var y;const B=await this.sessionManager.getSession(s);return(y=B==null?void 0:B.providerInfo.idToken)!=null?y:""}async getBackstageIdentity(s={}){const y=await this.sessionManager.getSession(s);return y==null?void 0:y.backstageIdentity}async getProfile(s={}){const y=await this.sessionManager.getSession(s);return y==null?void 0:y.profile}static normalizeScopes(s,y){if(!y)return new Set;const B=Array.isArray(y)?y:y.split(/[\s|,]/).filter(Boolean);return new Set(s(B))}}const ye={id:"github",title:"GitHub",icon:()=>null};class nt{static create(s){const{discoveryApi:y,environment:B="development",provider:Y=ye,oauthRequestApi:Pe,defaultScopes:Xe=["read:user"]}=s;return G.create({discoveryApi:y,oauthRequestApi:Pe,provider:Y,environment:B,defaultScopes:Xe})}}const be={id:"gitlab",title:"GitLab",icon:()=>null};class je{static create(s){const{discoveryApi:y,environment:B="development",provider:Y=be,oauthRequestApi:Pe,defaultScopes:Xe=["read_user"]}=s;return G.create({discoveryApi:y,oauthRequestApi:Pe,provider:Y,environment:B,defaultScopes:Xe})}}const ft={id:"google",title:"Google",icon:()=>null},F="https://www.googleapis.com/auth/";class N{static create(s){const{discoveryApi:y,oauthRequestApi:B,environment:Y="development",provider:Pe=ft,defaultScopes:Xe=["openid",`${F}userinfo.email`,`${F}userinfo.profile`]}=s;return G.create({discoveryApi:y,oauthRequestApi:B,provider:Pe,environment:Y,defaultScopes:Xe,scopeTransform(ot){return ot.map(kt=>kt==="openid"?kt:kt==="profile"||kt==="email"?`${F}userinfo.${kt}`:kt.startsWith(F)?kt:`${F}${kt}`)}})}}const _e={id:"okta",title:"Okta",icon:()=>null},ze=new Set(["openid","profile","email","phone","address","groups","offline_access"]),dt="okta.";class St{static create(s){const{discoveryApi:y,environment:B="development",provider:Y=_e,oauthRequestApi:Pe,defaultScopes:Xe=["openid","email","profile","offline_access"]}=s;return G.create({discoveryApi:y,oauthRequestApi:Pe,provider:Y,environment:B,defaultScopes:Xe,scopeTransform(ot){return ot.map(kt=>ze.has(kt)||kt.startsWith(dt)?kt:`${dt}${kt}`)}})}}const Bt=O.z.object({profile:O.z.object({email:O.z.string().optional(),displayName:O.z.string().optional(),picture:O.z.string().optional()}),backstageIdentity:O.z.object({token:O.z.string(),identity:O.z.object({type:O.z.literal("user"),userEntityRef:O.z.string(),ownershipEntityRefs:O.z.array(O.z.string())})})}),Lt={id:"saml",title:"SAML",icon:()=>null};class Re{constructor(s){this.sessionManager=s}static create(s){const{discoveryApi:y,environment:B="development",provider:Y=Lt}=s,Pe=new Pt({discoveryApi:y,environment:B,provider:Y}),Xe=new Ue({connector:Pe}),ot=new de({manager:Xe,storageKey:`${Y.id}Session`,schema:Bt});return new Re(ot)}sessionState$(){return this.sessionManager.sessionState$()}async signIn(){await this.getBackstageIdentity({})}async signOut(){await this.sessionManager.removeSession()}async getBackstageIdentity(s={}){const y=await this.sessionManager.getSession(s);return y==null?void 0:y.backstageIdentity}async getProfile(s={}){const y=await this.sessionManager.getSession(s);return y==null?void 0:y.profile}}const _t={id:"microsoft",title:"Microsoft",icon:()=>null};class Ct{static create(s){const{environment:y="development",provider:B=_t,oauthRequestApi:Y,discoveryApi:Pe,defaultScopes:Xe=["openid","offline_access","profile","email","User.Read"]}=s;return G.create({discoveryApi:Pe,oauthRequestApi:Y,provider:B,environment:y,defaultScopes:Xe})}}const Qt={id:"onelogin",title:"onelogin",icon:()=>null},st=new Set(["openid","profile","email","phone","address","groups","offline_access"]),me="onelogin.";class ce{static create(s){const{discoveryApi:y,environment:B="development",provider:Y=Qt,oauthRequestApi:Pe}=s;return G.create({discoveryApi:y,oauthRequestApi:Pe,provider:Y,environment:B,defaultScopes:["openid","email","profile","offline_access"],scopeTransform(Xe){return Xe.map(ot=>st.has(ot)||ot.startsWith(me)?ot:`${me}${ot}`)}})}}const we={id:"bitbucket",title:"Bitbucket",icon:()=>null};class se{static create(s){const{discoveryApi:y,environment:B="development",provider:Y=we,oauthRequestApi:Pe,defaultScopes:Xe=["team"]}=s;return G.create({discoveryApi:y,oauthRequestApi:Pe,provider:Y,environment:B,defaultScopes:Xe})}}const Te={id:"atlassian",title:"Atlassian",icon:()=>null};class Ae{static create(s){const{discoveryApi:y,environment:B="development",provider:Y=Te,oauthRequestApi:Pe}=s;return G.create({discoveryApi:y,oauthRequestApi:Pe,provider:Y,environment:B})}}class Ne{constructor(){this.subject=new rn}post(s){this.subject.next(s)}alert$(){return this.subject}}class Q{constructor(s){this.actualApis=s}static fromApis(s){return new Q(s)}captureEvent(s){this.actualApis.forEach(y=>{try{y.captureEvent(s)}catch{}})}}class T{captureEvent(s){}}const X="theme";class ne{constructor(s){this.themes=s,this.subject=new ct(void 0)}static createWithStorage(s){var y;const B=new ne(s);if(!window.localStorage)return B;const Y=(y=window.localStorage.getItem(X))!=null?y:void 0;return B.setActiveThemeId(Y),B.activeThemeId$().subscribe(Pe=>{Pe?window.localStorage.setItem(X,Pe):window.localStorage.removeItem(X)}),window.addEventListener("storage",Pe=>{var Xe;if(Pe.key===X){const ot=(Xe=localStorage.getItem(X))!=null?Xe:void 0;B.setActiveThemeId(ot)}}),B}getInstalledThemes(){return this.themes.slice()}activeThemeId$(){return this.subject}getActiveThemeId(){return this.activeThemeId}setActiveThemeId(s){this.activeThemeId=s,this.subject.next(s)}}const fe="Invalid discovery URL pattern,";class te{constructor(s){this.parts=s}static compile(s){const y=s.split(/\{\{\s*pluginId\s*\}\}/),B=y.join("pluginId");let Y;try{Y=new URL(B)}catch{throw new Error(`${fe} URL '${B}' is invalid`)}if(Y.hash)throw new Error(`${fe} URL must not have a hash`);if(Y.search)throw new Error(`${fe} URL must not have a query`);if(B.endsWith("/"))throw new Error(`${fe} URL must not end with a slash`);return new te(y)}async getBaseUrl(s){return this.parts.join(s)}}class ge{constructor(s,y){this.alertApi=s,this.errorApi=y}post(s,y){return y!=null&&y.hidden||this.alertApi.post({message:s.message,severity:"error"}),this.errorApi.post(s,y)}error$(){return this.errorApi.error$()}}class He{constructor(){this.subject=new rn}post(s,y){this.subject.next({error:s,context:y})}error$(){return this.subject}}class it{static forward(s,y){window.addEventListener("unhandledrejection",B=>{s.post(B.reason,y)})}}function ht(H){if(H.length<3)throw new Error(`The '${H}' feature flag must have a minimum length of three characters.`);if(H.length>150)throw new Error(`The '${H}' feature flag must not exceed 150 characters.`);if(!H.match(/^[a-z]+[a-z0-9-]+$/))throw new Error(`The '${H}' feature flag must start with a lowercase letter and only contain lowercase letters, numbers and hyphens. Examples: feature-flag-one, alpha, release-2020`)}class ve{constructor(){this.registeredFeatureFlags=[]}registerFlag(s){ht(s.name),this.registeredFeatureFlags.push(s)}getRegisteredFlags(){return this.registeredFeatureFlags.slice()}isActive(s){return this.flags||(this.flags=this.load()),this.flags.get(s)===S.CL.Active}save(s){this.flags||(this.flags=this.load()),s.merge||this.flags.clear();for(const[B,Y]of Object.entries(s.states))this.flags.set(B,Y);const y=Array.from(this.flags.entries()).filter(([,B])=>B===S.CL.Active);window.localStorage.setItem("featureFlags",JSON.stringify(Object.fromEntries(y)))}load(){try{const s=window.localStorage.getItem("featureFlags");if(!s)return new Map;const y=JSON.parse(s);if(typeof y!="object"||y===null||Array.isArray(y))return new Map;const B=Object.entries(y).filter(([Y,Pe])=>(ht(Y),Pe===S.CL.Active));return new Map(B)}catch{return new Map}}}function Fe(H){var s;let y=H.baseImplementation||t.g.fetch;const B=[(s=H.middleware)!=null?s:[]].flat().reverse();for(const Y of B)y=Y.apply(y);return{fetch:y}}class mt{constructor(s,y,B,Y){this.identityApi=s,this.allowUrl=y,this.headerName=B,this.headerValue=Y}static create(s){var y,B;const Y=$t(s),Pe=((y=s.header)==null?void 0:y.name)||"authorization",Xe=((B=s.header)==null?void 0:B.value)||(ot=>`Bearer ${ot}`);return new mt(s.identityApi,Y,Pe,Xe)}apply(s){return async(y,B)=>{const Y=new Request(y,B),{token:Pe}=await this.identityApi.getCredentials();return Y.headers.get(this.headerName)||typeof Pe!="string"||!Pe||!this.allowUrl(Y.url)?s(y,B):(Y.headers.set(this.headerName,this.headerValue(Pe)),s(Y))}}}function $t(H){return H.allowUrl?H.allowUrl:H.urlPrefixAllowlist?Zt(H.urlPrefixAllowlist):H.config?Zt([H.config.getString("backend.baseUrl")]):()=>!1}function Zt(H){const s=H.map(y=>y.replace(/\/$/,""));return y=>s.some(B=>y===B||y.startsWith(`${B}/`))}function Gt(H,s){return!s||s==="/"?H:`${H.replace(/\/$/,"")}/${s.replace(/^\//,"")}`}class Jt{constructor(s){this.discoveryApi=s}apply(s){return async(y,B)=>{const Y=new Request(y,B),Pe="plugin://";if(!Y.url.startsWith(Pe))return s(y,B);const{hostname:Xe,pathname:ot,search:kt,hash:on,username:un,password:Bn}=new URL(`http://${Y.url.substring(Pe.length)}`);let An=await this.discoveryApi.getBaseUrl(Xe);if(un||Bn){const Gn=new URL(An),rt=`${un}${Bn?`:${Bn}`:""}@`;An=`${Gn.protocol}//${rt}${Gn.host}${Gn.pathname}`}const Nn=`${Gt(An,ot)}${kt}${on}`;return s(Nn,typeof y=="string"||xt(y)?B:y)}}}function xt(H){return typeof H=="object"&&(H==null?void 0:H.constructor)===URL}class sn{static resolvePluginProtocol(s){return new Jt(s.discoveryApi)}static injectIdentityAuth(s){return mt.create(s)}constructor(){}}function De(H,s){for(const y of s)if(!H.has(y))return!1;return!0}function Je(H,...s){const y=new Set(H);for(const B of s)for(const Y of B)y.add(Y);return y}class et{constructor(){this.requests=[],this.subject=new ct(this.getCurrentPending())}request(s){return new Promise((y,B)=>{this.requests.push({scopes:s,resolve:y,reject:B}),this.subject.next(this.getCurrentPending())})}resolve(s,y){this.requests=this.requests.filter(B=>De(s,B.scopes)?(B.resolve(y),!1):!0),this.subject.next(this.getCurrentPending())}reject(s){this.requests.forEach(y=>y.reject(s)),this.requests=[],this.subject.next(this.getCurrentPending())}pending(){return this.subject}getCurrentPending(){const s=this.requests.length===0?void 0:this.requests.slice(1).reduce((y,B)=>Je(y,B.scopes),this.requests[0].scopes);return{scopes:s,resolve:y=>{s&&this.resolve(s,y)},reject:y=>{s&&this.reject(y)}}}}class ae{constructor(){this.subject=new ct([]),this.currentRequests=[],this.handlerCount=0}createAuthRequester(s){const y=new et,B=this.handlerCount;return this.handlerCount++,y.pending().subscribe({next:Y=>{const Pe=this.currentRequests.slice(),Xe=this.makeAuthRequest(Y,s);Xe?Pe[B]=Xe:delete Pe[B],this.currentRequests=Pe,this.subject.next(Pe.filter(Boolean))}}),Y=>y.request(Y)}makeAuthRequest(s,y){const{scopes:B}=s;if(!!B)return{provider:y.provider,trigger:async()=>{const Y=await y.onAuthRequest(B);s.resolve(Y)},reject:()=>{const Y=new Error("Login failed, rejected by user");Y.name="RejectedError",s.reject(Y)}}}authRequest$(){return this.subject}}const pe=new Map;class ke{constructor(s,y){this.namespace=s,this.errorApi=y,this.subscribers=new Set,this.observable=new(c())(B=>(this.subscribers.add(B),()=>{this.subscribers.delete(B)}))}static create(s){var y;return new ke((y=s.namespace)!=null?y:"",s.errorApi)}get(s){return this.snapshot(s).value}snapshot(s){let y,B="absent";try{const Y=localStorage.getItem(this.getKeyName(s));Y&&(y=JSON.parse(Y,(Pe,Xe)=>(typeof Xe=="object"&&Xe!==null&&Object.freeze(Xe),Xe)),B="present")}catch{this.errorApi.post(new Error(`Error when parsing JSON config from storage for: ${s}`))}return{key:s,value:y,presence:B}}forBucket(s){const y=`${this.namespace}/${s}`;return pe.has(y)||pe.set(y,new ke(y,this.errorApi)),pe.get(y)}async set(s,y){localStorage.setItem(this.getKeyName(s),JSON.stringify(y)),this.notifyChanges(s)}async remove(s){localStorage.removeItem(this.getKeyName(s)),this.notifyChanges(s)}observe$(s){return this.observable.filter(({key:y})=>y===s)}getKeyName(s){return`${this.namespace}/${encodeURIComponent(s)}`}notifyChanges(s){const y=this.snapshot(s);for(const B of this.subscribers)B.next(y)}}function Ze(H){const s={};for(const B in H.collectors)H.collectors.hasOwnProperty(B)&&(s[B]=H.collectors[B]());const y=[{node:e.Children.toArray(H.root),parent:void 0,contexts:{}}];for(;y.length!==0;){const{node:B,parent:Y,contexts:Pe}=y.shift();e.Children.forEach(B,Xe=>{if(!(0,e.isValidElement)(Xe))return;const ot={};for(const kt in s)if(s.hasOwnProperty(kt)){const on=s[kt];ot[kt]=on.visit(on.accumulator,Xe,Y,Pe[kt])}for(const kt of H.discoverers){const on=kt(Xe);on&&y.push({node:on,parent:Xe,contexts:ot})}})}return Object.fromEntries(Object.entries(s).map(([B,Y])=>[B,Y.accumulator]))}function Se(H,s){return()=>({accumulator:H(),visit:s})}function pt(H){var s;return(s=H.props)==null?void 0:s.children}function vt(H){var s,y,B;if(((s=H.props)==null?void 0:s.path)&&((y=H.props)==null?void 0:y.element))return(B=H.props)==null?void 0:B.element}const zt=Se(()=>new Set,(H,s)=>{const y=(0,S.IY)(s,"core.plugin");y&&H.add(y)}),Tt=H=>{const{children:s}=H,y=(0,S.h_)(S.W0),B="with"in H?y.isActive(H.with):!y.isActive(H.without);return e.createElement(e.Fragment,null,B?s:null)};(0,S.R5)(Tt,"core.featureFlagged",!0);const It={caseSensitive:!1,path:"*",element:"match-all",routeRefs:new Set};function Ut(H){var s,y;const B=H;return B!=null&&B.type?(y=(s=B.type.displayName)!=null?s:B.type.name)!=null?y:String(B.type):String(B)}function ln(H,s=new Array){return e.Children.forEach(H,y=>{if(!(0,e.isValidElement)(y))return;const B=(0,S.IY)(y,"core.mountPoint");if(B){const Y=(0,S.IY)(y,"core.plugin");s.push({routeRef:B,plugin:Y})}ln(y.props.children,s)}),s}const mn=Se(()=>({paths:new Map,parents:new Map,objects:new Array}),(H,s,y,B)=>{var Y,Pe,Xe,ot,kt,on;if(B!=null&&B.isElementAncestor)return B;if((y==null?void 0:y.props.element)===s)return{...B,isElementAncestor:!0};const un=(Y=s.props)==null?void 0:Y.path,Bn=(0,S.IY)(s,"core.mountPoint");if(Bn&&un)throw new Error(`Path property may not be set directly on a routable extension "${Ut(s)}"`);const An=(Xe=(Pe=B==null?void 0:B.obj)==null?void 0:Pe.children)!=null?Xe:H.objects;if(un!==void 0){if(typeof un!="string")throw new Error(`Element path must be a string at "${Ut(s)}"`);const Nn=un.startsWith("/")?un.slice(1):un,Gn=s.props.element;if((0,S.IY)(s,"core.gatherMountPoints")){if(Gn)throw new Error(`Mount point gatherers may not have an element prop "${Ut(s)}"`);const rt={path:Nn,element:"gathered",routeRefs:new Set,caseSensitive:Boolean((ot=s.props)==null?void 0:ot.caseSensitive),children:[It],plugin:void 0};return An.push(rt),{obj:rt,gatherPath:Nn,routeRef:B==null?void 0:B.routeRef,gatherRouteRef:B==null?void 0:B.routeRef}}if(Gn){const[rt,...We]=ln(Gn);if(We.length>0)throw new Error(`Route element with path "${un}" may not contain multiple routable extensions`);if(!rt)return B;const{routeRef:bt,plugin:dn}=rt,Pn={path:Nn,element:"mounted",routeRefs:new Set([bt]),caseSensitive:Boolean((kt=s.props)==null?void 0:kt.caseSensitive),children:[It],plugin:dn};return An.push(Pn),H.paths.set(bt,Nn),H.parents.set(bt,B==null?void 0:B.routeRef),{obj:Pn,routeRef:bt!=null?bt:B==null?void 0:B.routeRef,gatherPath:Nn,gatherRouteRef:B==null?void 0:B.gatherRouteRef}}}if(Bn){if((B==null?void 0:B.gatherPath)===void 0)throw new Error(`Routable extension "${Ut(s)}" with mount point "${Bn}" must be assigned a path`);return(on=B==null?void 0:B.obj)==null||on.routeRefs.add(Bn),H.paths.set(Bn,B.gatherPath),H.parents.set(Bn,B==null?void 0:B.gatherRouteRef),{...B,routeRef:Bn}}return B}),cn=Se(()=>({paths:new Map,parents:new Map,objects:new Array}),(H,s,y,B)=>{var Y,Pe,Xe,ot,kt;if((y==null?void 0:y.props.element)===s)return B;let on=B==null?void 0:B.obj,un=B==null?void 0:B.routeRef,Bn=B==null?void 0:B.sticky;const An=(Y=s.props)==null?void 0:Y.path,Nn=(Pe=on==null?void 0:on.children)!=null?Pe:H.objects,Gn=Boolean((Xe=s.props)==null?void 0:Xe.caseSensitive);let rt=B==null?void 0:B.path;if((0,S.IY)(s,"core.gatherMountPoints")){if(!An)throw new Error("Mount point gatherer must have a path");rt=An}const We=(ot=s.props)==null?void 0:ot.element;let bt=(0,S.IY)(s,"core.mountPoint");if(!bt&&(0,e.isValidElement)(We)&&(bt=(0,S.IY)(We,"core.mountPoint")),bt){let Pn=An;if(rt&&(Pn?rt=void 0:Pn=rt),!Pn)throw new Error("Mounted routable extension must have a path");H.paths.set(bt,Pn),un&&Bn?(H.parents.set(bt,un),An&&(un=bt,Bn=!1)):(H.parents.set(bt,un),un=bt),An?(on={caseSensitive:Gn,path:An,element:"mounted",routeRefs:new Set([bt]),children:[It],plugin:(0,S.IY)(s.props.element,"core.plugin")},Nn.push(on)):on==null||on.routeRefs.add(bt)}if((0,S.IY)(s,"core.gatherMountPoints")&&(Bn=!0),(0,S.IY)(s,"core.gatherMountPoints")){if(!An)throw new Error("Mount point gatherer must have a path");bt||(on={caseSensitive:Gn,path:An,element:"gathered",routeRefs:new Set,children:[It],plugin:(kt=B==null?void 0:B.obj)==null?void 0:kt.plugin},Nn.push(on))}return{obj:on,path:rt,routeRef:un,sticky:Bn}}),En=Se(()=>new Set,(H,s)=>{if(s.type===Tt){const y=s.props;H.add("with"in y?y.with:y.without)}}),en=(0,f.uW)("route-ref-type",()=>Symbol("route-ref-type"));function Sn(H){return H[en]==="absolute"}function On(H){return H[en]==="sub"}function In(H){return H[en]==="external"}function Ln(...H){const s=H.join("/").replace(/\/\/+/g,"/");return s!=="/"&&s.endsWith("/")?s.slice(0,-1):s}function Dn(H,s,y){let B,Y="";if(Sn(H))B=H;else if(On(H))B=H.parent,Y=H.path;else if(In(H)){const ot=y.get(H);if(!ot)return[void 0,""];if(Sn(ot))B=ot;else if(On(ot))B=ot.parent,Y=ot.path;else throw new Error(`ExternalRouteRef was bound to invalid target, ${ot}`)}else throw H[en]?new Error(`Unknown or invalid route ref type, ${H[en]}`):new Error(`Unknown object passed to useRouteRef, got ${H}`);if(!B)return[void 0,""];const Pe=s.get(B);if(Pe===void 0)return[void 0,""];const Xe=Ln(Pe,Y);return[B,Xe]}function Mn(H,s,y,B,Y){var Pe;const Xe=(Pe=(0,P.fp)(Y,s))!=null?Pe:[],ot=Array();let kt=-1;for(let Bn=H;Bn&&(kt=Xe.findIndex(An=>An.route.routeRefs.has(Bn)),kt===-1);Bn=B.get(Bn))ot.unshift(Bn);ot.length===0&&(kt-=1);const on=kt===-1?"":Xe[kt].pathname,un=ot.slice(0,-1).map(Bn=>{const An=y.get(Bn);if(An===void 0)throw new Error(`No path for ${Bn}`);if(An.includes(":"))throw new Error(`Cannot route to ${H} with parent ${Bn} as it has parameters`);return An});return`${Ln(on,...un)}/`}class Zn{constructor(s,y,B,Y,Pe){this.routePaths=s,this.routeParents=y,this.routeObjects=B,this.routeBindings=Y,this.appBasePath=Pe}resolve(s,y){const[B,Y]=Dn(s,this.routePaths,this.routeBindings);if(!B)return;let Pe;typeof y=="string"?Pe=this.trimPath(y):y.pathname?Pe={...y,pathname:this.trimPath(y.pathname)}:Pe=y;const Xe=this.appBasePath+Mn(B,Pe,this.routePaths,this.routeParents,this.routeObjects);return(...[kt])=>Ln(Xe,(0,P.Gn)(Y,kt))}trimPath(s){return s&&(s.startsWith(this.appBasePath)?s.slice(this.appBasePath.length):s)}}const Rn=(0,f.CT)("routing-context"),$n=({routePaths:H,routeParents:s,routeObjects:y,routeBindings:B,basePath:Y="",children:Pe})=>{const Xe=new Zn(H,s,y,B,Y),ot=(0,f.EI)({1:Xe});return e.createElement(Rn.Provider,{value:ot},Pe)},Vn=(H,s)=>{var y,B;try{const Y=(0,P.fp)(s,{pathname:H}),Pe=(y=Y==null?void 0:Y.filter(ot=>{var kt;return((kt=ot==null?void 0:ot.route.routeRefs)==null?void 0:kt.size)>0}).pop())==null?void 0:y.route;if(!Pe)return{};let Xe;return Pe.routeRefs.size===1&&(Xe=Pe.routeRefs.values().next().value),{extension:"App",pluginId:((B=Pe.plugin)==null?void 0:B.getId())||"root",...Xe?{routeRef:Xe.id}:{}}}catch{return{}}},cr=({pathname:H,search:s,hash:y})=>{const B=(0,S.z$)();return(0,e.useEffect)(()=>{B.captureEvent("navigate",`${H}${s}${y}`)},[B,H,s,y]),null},ur=({routeObjects:H})=>{const{pathname:s,search:y,hash:B}=(0,$.TH)();return e.createElement(S.fC,{attributes:Vn(s,H)},e.createElement(cr,{pathname:s,search:y,hash:B}))};function Z(H,s){const y=new Set(s.values());y.delete(void 0);for(const B of s.keys()){if(y.has(B))continue;let Y=B,Pe="";for(;Y;){const ot=H.get(Y);if(ot===void 0)throw new Error(`No path for ${Y}`);Pe=Ln(ot,Pe),Y=s.get(Y)}const Xe=Pe.match(/:(\w+)/g);if(Xe){for(let ot=0;ot<Xe.length;ot++)for(let kt=ot+1;kt<Xe.length;kt++)if(Xe[kt]===Xe[ot])throw new Error(`Parameter ${Xe[kt]} is duplicated in path ${Pe}`)}}}function v(H,s){for(const y of s)if(!!y.externalRoutes){for(const[B,Y]of Object.entries(y.externalRoutes))if(!Y.optional&&!H.has(Y))throw new Error(`External route '${B}' of the '${y.getId()}' plugin must be bound to a target route. See https://backstage.io/link?bind-routes for details.`)}}const i=(0,f.CT)("app-context"),u=({appContext:H,children:s})=>{const y=(0,f.EI)({1:H});return e.createElement(i.Provider,{value:y,children:s})};function o(H){return new Error(`Tried to access IdentityApi ${H} before app was loaded`)}function l(H){console.warn(`WARNING: Call to ${H} is deprecated and will break in the future`)}class _{constructor(){this.resolveTarget=()=>{},this.signOutTargetUrl="/",this.waitForTarget=new Promise(s=>{this.resolveTarget=s})}setTarget(s,y){this.target=s,this.signOutTargetUrl=y.signOutTargetUrl,this.resolveTarget(s)}getUserId(){if(!this.target)throw o("getUserId");if(!this.target.getUserId)throw new Error("IdentityApi does not implement getUserId");return l("getUserId"),this.target.getUserId()}getProfile(){if(!this.target)throw o("getProfile");if(!this.target.getProfile)throw new Error("IdentityApi does not implement getProfile");return l("getProfile"),this.target.getProfile()}async getProfileInfo(){return this.waitForTarget.then(s=>s.getProfileInfo())}async getBackstageIdentity(){const s=await this.waitForTarget.then(y=>y.getBackstageIdentity());return s.userEntityRef.match(/^.*:.*\/.*$/)||console.warn(`WARNING: The App IdentityApi provided an invalid userEntityRef, '${s.userEntityRef}'. It must be a full Entity Reference of the form '<kind>:<namespace>/<name>'.`),s}async getCredentials(){return this.waitForTarget.then(s=>s.getCredentials())}async getIdToken(){return this.waitForTarget.then(s=>{if(!s.getIdToken)throw new Error("IdentityApi does not implement getIdToken");return l("getIdToken"),s.getIdToken()})}async signOut(){await this.waitForTarget.then(s=>s.signOut()),location.href=this.signOutTargetUrl}}function b(H,s,y){if(H!==void 0){const Y=y.find(Pe=>Pe.id===H);if(Y)return Y}if(s){const Y=y.find(Pe=>Pe.variant==="dark");if(Y)return Y}const B=y.find(Y=>Y.variant==="light");return B||y[0]}const L=()=>{const H=(0,e.useMemo)(()=>window.matchMedia("(prefers-color-scheme: dark)"),[]),[s,y]=(0,e.useState)(H.matches);return(0,e.useEffect)(()=>{const B=Y=>{y(Y.matches)};return H.addListener(B),()=>{H.removeListener(B)}},[H]),s};function re({children:H}){const s=(0,S.h_)(S.hg),y=(0,I.Z)(s.activeThemeId$(),s.getActiveThemeId()),B=Boolean(window.matchMedia)?L():!1,Y=b(y,B,s.getInstalledThemes());if(!Y)throw new Error("App has no themes");return e.createElement(Y.Provider,{children:H})}const Oe=async(H=/*__APP_INJECTED_CONFIG_MARKER__*/"[{\"context\":\"app\",\"deprecatedKeys\":[],\"data\":{\"app\":{\"title\":\"Scaffolded Backstage App\",\"baseUrl\":\"http://localhost:3000\"},\"organization\":{\"name\":\"My Company\"},\"backend\":{\"baseUrl\":\"http://localhost:7007\"},\"integrations\":{\"github\":[{\"host\":\"github.com\"}]},\"techdocs\":{\"builder\":\"local\"},\"auth\":{\"environment\":\"development\",\"providers\":{\"github\":{}}},\"catalog\":{\"import\":{\"entityFilename\":\"catalog-info.yaml\",\"pullRequestBranchName\":\"backstage-integration\"}}}}]"/*__INJECTED_END__*/)=>{const s=[{context:"app-config.yaml",data:{app:{title:"Scaffolded Backstage App",baseUrl:"http://localhost:3000"},organization:{name:"My Company"},backend:{baseUrl:"http://localhost:7007"},integrations:{github:[{host:"github.com"}]},techdocs:{builder:"local"},auth:{environment:"development",providers:{github:{}}},catalog:{import:{entityFilename:"catalog-info.yaml",pullRequestBranchName:"backstage-integration"}}}}];if(!s)throw new Error("No static configuration provided");if(!Array.isArray(s))throw new Error("Static configuration has invalid format");const y=s.slice();if(H!=="__app_injected_runtime_config__".toLocaleUpperCase("en-US"))try{const Y=JSON.parse(H);Array.isArray(Y)?y.push(...Y):y.push({data:Y,context:"env"})}catch(Y){throw new Error(`Failed to load runtime configuration, ${Y}`)}const B=window.__APP_CONFIG__;return B&&y.push({context:"window",data:B}),y};class Le{constructor(){this.apis=[]}add(s,y){return this.apis.push([s.id,y]),y}build(){return new tt(new Map(this.apis))}}class tt{constructor(s){this.apis=s}static builder(){return new Le}static from(s){return new tt(new Map(s.map(([y,B])=>[y.id,B])))}static with(s,y){return new tt(new Map([[s.id,y]]))}with(s,y){return new tt(new Map([...this.apis,[s.id,y]]))}get(s){return this.apis.get(s.id)}}function Ht(H){const s=new Map;return H&&H({bind:(B,Y)=>{for(const[Pe,Xe]of Object.entries(Y)){const ot=B[Pe];if(!ot)throw new Error(`Key ${Pe} is not an existing external route`);if(!Xe&&!ot.optional)throw new Error(`External route ${Pe} is required but was undefined`);Xe&&s.set(ot,Xe)}}}),s}function Dt(){const[H]=(0,$.is)(e.createElement($.AW,{index:!0,element:e.createElement("div",null)}));return!H.index}const tn=(0,e.createContext)({routeObjects:[]});function Vt(H){var s;let{pathname:y}=new URL((s=H.getOptionalString("app.baseUrl"))!=null?s:"/","http://dummy.dev");return y=y.replace(/\/*$/,""),y}function qt(H,s,y){var B;const Y=Boolean(H),Pe=(0,U.default)(H||(()=>Promise.resolve([])));let Xe;if(Y&&Pe.loading){const{Progress:on}=s;Xe=e.createElement(on,null)}else if(Pe.error){const{BootErrorPage:on}=s;Xe=e.createElement(on,{step:"load-config",error:Pe.error})}const{ThemeProvider:ot=re}=s;return Xe?{node:e.createElement(W,{apis:tt.with(S.hg,y)},e.createElement(ot,null,Xe))}:{api:D.fromConfigs((B=Pe.value)!=null?B:[])}}class xn{constructor(s){this.app=s}getPlugins(){return this.app.getPlugins()}getSystemIcon(s){return this.app.getSystemIcon(s)}getSystemIcons(){return this.app.getSystemIcons()}getComponents(){return this.app.getComponents()}}class _n{constructor(s){this.appIdentityProxy=new _;var y,B,Y,Pe;this.apis=(y=s.apis)!=null?y:[],this.icons=s.icons,this.plugins=new Set((B=s.plugins)!=null?B:[]),this.components=s.components,this.themes=s.themes,this.configLoader=(Y=s.configLoader)!=null?Y:Oe,this.defaultApis=(Pe=s.defaultApis)!=null?Pe:[],this.bindRoutes=s.bindRoutes,this.apiFactoryRegistry=new Ve}getPlugins(){return Array.from(this.plugins)}getSystemIcon(s){return this.icons[s]}getSystemIcons(){return this.icons}getComponents(){return this.components}getProvider(){const s=new xn(this);let y=!1;return({children:Y})=>{const Pe=(0,e.useMemo)(()=>ne.createWithStorage(this.themes),[]),{routing:Xe,featureFlags:ot,routeBindings:kt}=(0,e.useMemo)(()=>{const An=Ze({root:Y,discoverers:[pt,vt],collectors:{routing:Dt()?cn:mn,collectedPlugins:zt,featureFlags:En}});return An.collectedPlugins.forEach(Nn=>this.plugins.add(Nn)),this.verifyPlugins(this.plugins),this.getApiHolder(),{...An,routeBindings:Ht(this.bindRoutes)}},[Y]);y||(y=!0,Z(Xe.paths,Xe.parents),v(kt,this.plugins));const on=qt(this.configLoader,this.components,Pe),un="api"in on;if(un){const{api:An}=on;this.configApi=An}if((0,e.useEffect)(()=>{if(un){const An=this.getApiHolder().get(S.W0);for(const Nn of this.plugins.values())if("getFeatureFlags"in Nn)for(const Gn of Nn.getFeatureFlags())An.registerFlag({name:Gn.name,pluginId:Nn.getId()});else for(const Gn of Nn.output())Gn.type==="feature-flag"&&An.registerFlag({name:Gn.name,pluginId:Nn.getId()});for(const Nn of ot)An.registerFlag({name:Nn,pluginId:""})}},[un,on,ot]),"node"in on)return on.node;const{ThemeProvider:Bn=re}=this.components;return e.createElement(W,{apis:this.getApiHolder()},e.createElement(u,{appContext:s},e.createElement(Bn,null,e.createElement($n,{routePaths:Xe.paths,routeParents:Xe.parents,routeObjects:Xe.objects,routeBindings:kt,basePath:Vt(on.api)},e.createElement(tn.Provider,{value:{routeObjects:Xe.objects}},Y)))))}}getRouter(){const{Router:s,SignInPage:y}=this.components,B=({component:Pe,children:Xe})=>{const[ot,kt]=(0,e.useState)(),on=(0,S.h_)(S.Ds),un=Vt(on);return ot?(this.appIdentityProxy.setTarget(ot,{signOutTargetUrl:un||"/"}),Xe):e.createElement(Pe,{onSignInSuccess:kt})};return({children:Pe})=>{const Xe=(0,S.h_)(S.Ds),ot=Vt(Xe),kt=`${ot}/*`,{routeObjects:on}=(0,e.useContext)(tn);return y?e.createElement(s,null,e.createElement(ur,{routeObjects:on}),e.createElement(B,{component:y},e.createElement($.Z5,null,e.createElement($.AW,{path:kt,element:e.createElement(e.Fragment,null,Pe)})))):(this.appIdentityProxy.setTarget({getUserId:()=>"guest",getIdToken:async()=>{},getProfile:()=>({email:"guest@example.com",displayName:"Guest"}),getProfileInfo:async()=>({email:"guest@example.com",displayName:"Guest"}),getBackstageIdentity:async()=>({type:"user",userEntityRef:"user:default/guest",ownershipEntityRefs:["user:default/guest"]}),getCredentials:async()=>({}),signOut:async()=>{}},{signOutTargetUrl:ot||"/"}),e.createElement(s,null,e.createElement(ur,{routeObjects:on}),e.createElement($.Z5,null,e.createElement($.AW,{path:kt,element:e.createElement(e.Fragment,null,Pe)}))))}}getApiHolder(){if(this.apiHolder){for(const s of this.plugins)for(const y of s.getApis())this.apiFactoryRegistry.get(y.api)||this.apiFactoryRegistry.register("default",y);return Ee.validateFactories(this.apiFactoryRegistry,this.apiFactoryRegistry.getAllApis()),this.apiHolder}this.apiFactoryRegistry.register("static",{api:S.hg,deps:{},factory:()=>ne.createWithStorage(this.themes)}),this.apiFactoryRegistry.register("static",{api:S.Ds,deps:{},factory:()=>{if(!this.configApi)throw new Error("Tried to access config API before config was loaded");return this.configApi}}),this.apiFactoryRegistry.register("static",{api:S.$4,deps:{},factory:()=>this.appIdentityProxy}),this.apiFactoryRegistry.register("default",{api:S.W0,deps:{},factory:()=>new ve});for(const s of this.defaultApis)this.apiFactoryRegistry.register("default",s);for(const s of this.plugins)for(const y of s.getApis())if(!this.apiFactoryRegistry.register("default",y))throw new Error(`Plugin ${s.getId()} tried to register duplicate or forbidden API factory for ${y.api}`);for(const s of this.apis)if(!this.apiFactoryRegistry.register("app",s))throw new Error(`Duplicate or forbidden API factory for ${s.api} in app`);return Ee.validateFactories(this.apiFactoryRegistry,this.apiFactoryRegistry.getAllApis()),this.apiHolder=new Ee(this.apiFactoryRegistry),this.apiHolder}verifyPlugins(s){const y=new Set;for(const B of s){const Y=B.getId();if(y.has(Y))throw new Error(`Duplicate plugin found '${Y}'`);y.add(Y)}}}function nn(H){return new _n(H)}let vn=!1;const Tn=H=>{const s=(0,S.qD)(),{NotFoundErrorPage:y}=s.getComponents(),B=(0,e.useMemo)(()=>Dt(),[]),Pe=[...(0,S.vJ)(H.children,Xe=>Xe.getElements().flatMap(ot=>{var kt;let on=ot.props.path;if(on==="")return[];on=(kt=on==null?void 0:on.replace(/\/\*$/,""))!=null?kt:"/";let un=B?ot:ot.props.element;return!B&&!un&&(un=ot,vn||(console.warn("DEPRECATION WARNING: All elements within <FlatRoutes> must be of type <Route> with an element prop. Existing usages of <Navigate key=[path] to=[to] /> should be replaced with <Route path=[path] element={<Navigate to=[to] />} />."),vn=!0)),[{path:on,element:un,children:ot.props.children?[{path:on==="/"?"/":"*",element:ot.props.children}]:void 0}]}).sort((ot,kt)=>kt.path.localeCompare(ot.path)).map(ot=>({...ot,path:ot.path==="/"?"/":`${ot.path}/*`}))),{path:"*",element:e.createElement(y,null)}];return(0,$.V$)(Pe)}},49558:function(Mt,g,t){t.d(g,{in:function(){return Tn},qE:function(){return B},Oo:function(){return To},zx:function(){return An},hB:function(){return Bl},db:function(){return Zs},Oi:function(){return Gn},VY:function(){return ma},yW:function(){return Io},XF:function(){return rt},mn:function(){return an},NX:function(){return Wn},SX:function(){return pn},zG:function(){return Ns},ub:function(){return er},mf:function(){return nl},yu:function(){return yt},fy:function(){return Ws},h4:function(){return fa},M6:function(){return br},i9:function(){return Do},aR:function(){return vo},rJ:function(){return qr},Oh:function(){return gl},hu:function(){return $o},Fw:function(){return Zo},rU:function(){return un},nU:function(){return Wo},SA:function(){return zo},sk:function(){return Pr},J3:function(){return Ho},Or:function(){return Yo},T3:function(){return pa},g9:function(){return vl},Ex:function(){return ia},Gk:function(){return Ft},tn:function(){return yo},Ph:function(){return Za},YE:function(){return li},v7:function(){return go},Hz:function(){return Sa},R6:function(){return ho},tR:function(){return ei},oz:function(){return Si},BV:function(){return Ci},k2:function(){return mo},BT:function(){return di},dh:function(){return _s},vK:function(){return Es},Kq:function(){return hs},wA:function(){return vs},VC:function(){return ys},Pd:function(){return gs},xT:function(){return xs},uw:function(){return $i},qt:function(){return Gs},oZ:function(){return Ll},WD:function(){return bo},iA:function(){return Oo},tB:function(){return Ks},GB:function(){return Ye},po:function(){return Ur},r0:function(){return Pa},mZ:function(){return ra},Pf:function(){return na}});var e=t(2784),d=t(37265),E=t(61837),f=t(87685),r=t(99688),c=t(30705),S=t(19928),O=t.n(S),h=t(79692),R=t(12420),M=t(60364),z=t(41128),K=t(15459),j=t(76600),ie=t(41547),w=t(43434),D=t(77277),P=t(72779),$=t.n(P),U=t(86689),I=t(39857),m=t(73557),x=t(16060),W=t(76635),Ee=t(80030),Be=t(19353),Ve=t(95074),qe=t(56553),Et=t(26639),at=t(39595),Pt=t(41156),At=t(88188),q=t(13725),rn=t(11105),ct=t(97963),xe=t(46506),oe=t.n(xe),Ue=t(54073),de=t.n(Ue),p=t(10368),G=t(76985),ye=t(27916),nt=t(19574),be=t.n(nt),je=t(72164),ft=t(93657),F=t(60905),N=t(90436),_e=t.p+"static/missingAnnotation.67f79e98..svg",ze=t.p+"static/noInformation.4b426325..svg",dt=t.p+"static/createComponent.975d1e1e..svg",St=t.p+"static/noBuild.1715fa71..svg",Bt=t(11776),Lt=t(38402),Re=t(49378),_t=t(27616),Ct=t(8284),Qt=t(70660),st=t(91750),me=t(38016),ce=t(85256),we=t(1292),se=t(28316),Te=t(35292),Ae=t(48049),Ne=t(51209),Q=t(21353),T=t(71215),X=t(8629),ne=t(49429),fe=t(38724),te=t(79249),ge=t(3806),He=t(32272),it=t(15277),ht=t.n(it),ve=t(29862),Fe=t(67358),mt=t(94339),$t=t(14503),Zt=t(24579),Gt=t(32552),Jt=t(95544),xt=t(27597),sn=t(39307),De=t(21324),Je=t(7089),et=t(42494),ae=t(74603),pe=t(56939),ke=t(12231),Ze=t(73698),Se=t(72379),pt=t(74600),vt=t.n(pt),zt=t(37390),Tt=t(97485),It=t(15584),Ut=t(89571),ln=t(86136),mn=t(79784),cn=t(19126),En=t.n(cn),en=t(80079),Sn=t(18671),On=t(18473),In=t(50023),Ln=t(4190),Dn=t(44882),Mn=t(57998),Zn=t(83543),Rn=t(59797),$n=t(26739),Vn=t(86619),cr=t(98989),ur=t(6487),Z=t(99152),v=t(21070),i=t(90324),u=t(98281),o=t(33375),l=t(44233),_=t(27604),b=t(36444),L=t(37971),re=t(59709),Oe=t(17373),Le=t(3702),tt=t(93111),Ht=t(67222),Dt=t(44311),tn=t.p+"static/mic-drop.fe3ef4d0..svg",Vt=t(16173),qt=t(30195),xn=t(63955),_n=t(74828),nn=t(45455),vn=t.n(nn);function Tn(n){const[a,C]=(0,e.useState)([]),A=(0,c.h_)(c.$v),{anchorOrigin:k={vertical:"top",horizontal:"center"}}=n;if((0,e.useEffect)(()=>{const $e=A.alert$().subscribe(Ge=>C(Ke=>Ke.concat(Ge)));return()=>{$e.unsubscribe()}},[A]),a.length===0)return null;const[V]=a,ue=()=>{C($e=>$e.filter(Ge=>Ge!==V))};return e.createElement(d.Z,{open:!0,anchorOrigin:k},e.createElement(r.Z,{action:e.createElement(E.Z,{color:"inherit",size:"small",onClick:ue,"data-testid":"error-button-close"},e.createElement(f.Z,null)),severity:V.severity},e.createElement("span",null,V.message.toString(),a.length>1&&e.createElement("em",null,` (${a.length-1} older ${O()("message",a.length-1)})`))))}function H(n){let a=0;for(let A=0;A<n.length;A++)a=n.charCodeAt(A)+((a<<5)-a);let C="#";for(let A=0;A<3;A++){const k=a>>A*8&255;C+=`00${k.toString(16)}`.substr(-2)}return C}function s(n){var a;return(a=n.match(/\b\w/g))==null?void 0:a.join("").substring(0,2)}const y=(0,h.Z)(n=>(0,R.Z)({avatar:{width:"4rem",height:"4rem",color:"#fff",fontWeight:n.typography.fontWeightBold,letterSpacing:"1px",textTransform:"uppercase"}}),{name:"BackstageAvatar"});function B(n){const{displayName:a,picture:C,customStyles:A}=n,k=y();let V={...A};return C||(V={backgroundColor:H(a||""),...A}),e.createElement(w.Z,{alt:a,src:C,className:k.avatar,style:V},a&&s(a))}const Y=(0,h.Z)({visuallyHidden:{clip:"rect(0 0 0 0)",clipPath:"inset(50%)",overflow:"hidden",position:"absolute",whiteSpace:"nowrap",height:1,width:1},externalLink:{position:"relative"}},{name:"Link"}),Pe=n=>/^([a-z+.-]+):/.test(n),Xe=()=>{try{return(0,c.h_)(c.Ds).getOptionalString("app.baseUrl")}catch{return}},ot=()=>{var n;const a="http://dummy.dev",C=(n=Xe())!=null?n:"/",{pathname:A}=new URL(C,a);return(0,W.trimEnd)(A,"/")},kt=n=>{let a=String(n);const C=ot(),A=Pe(a),k=a.startsWith(C);return!A&&!k&&(a=C.concat(a)),a},on=n=>{var a;return n instanceof Array?n.map(on).join(" ").trim():typeof n=="object"&&n?on((a=n==null?void 0:n.props)==null?void 0:a.children):["string","number"].includes(typeof n)?String(n):""},un=e.forwardRef(({onClick:n,noTrack:a,...C},A)=>{const k=Y(),V=(0,c.z$)(),ue=kt(C.to),$e=on(C.children)||ue,Ge=Pe(ue),Ke=Ge&&!!/^https?:/.exec(ue),wt=gt=>{n==null||n(gt),a||V.captureEvent("click",$e,{attributes:{to:ue}})};return Ge?e.createElement(U.Z,{...Ke?{target:"_blank",rel:"noopener"}:{},...C,ref:A,href:ue,onClick:wt,className:$()(k.externalLink,C.className)},C.children,e.createElement("span",{className:k.visuallyHidden},", Opens in a new window")):e.createElement(U.Z,{...C,ref:A,component:I.rU,to:ue,onClick:wt})}),Bn=e.forwardRef((n,a)=>e.createElement(un,{ref:a,...n,color:"initial"})),An=e.forwardRef((n,a)=>e.createElement(D.Z,{ref:a,component:Bn,...n}));function Nn(n){const{text:a,tooltipDelay:C=1e3,tooltipText:A="Text copied to clipboard","aria-label":k="Copy text"}=n,V=(0,c.h_)(c.VE),[ue,$e]=(0,e.useState)(!1),[{error:Ge},Ke]=(0,Ve.Z)();(0,e.useEffect)(()=>{Ge&&V.post(Ge)},[Ge,V]);const wt=gt=>{gt.stopPropagation(),$e(!0),Ke(a)};return e.createElement(e.Fragment,null,e.createElement(Ee.ZP,{id:"copy-test-tooltip",title:A,placement:"top",leaveDelay:C,onClose:()=>$e(!1),open:ue},e.createElement(E.Z,{onClick:wt,"aria-label":k},e.createElement(Be.Z,null))))}function Gn(n){const{text:a,language:C,showLineNumbers:A=!1,highlightedNumbers:k,customStyle:V,showCopyCodeButton:ue=!1}=n,$e=(0,M.Z)(),Ge=$e.palette.type==="dark"?Et.Z:at.Z,Ke=$e.palette.type==="dark"?"#256bf3":"#e6ffed";return e.createElement("div",{style:{position:"relative"}},e.createElement(qe.Z,{customStyle:V,language:C,style:Ge,showLineNumbers:A,wrapLines:!0,lineNumberStyle:{color:$e.palette.textVerySubtle},lineProps:wt=>k!=null&&k.includes(wt)?{style:{backgroundColor:Ke}}:{}},a),ue&&e.createElement("div",{style:{position:"absolute",top:0,right:0}},e.createElement(Nn,{text:a})))}function rt(n){const{title:a,to:C}=n,A=(0,Pt.Z)(k=>k.breakpoints.down("xs"));return C?A?e.createElement(E.Z,{component:I.rU,color:"primary",title:a,size:"small",to:C},e.createElement(At.Z,null)):e.createElement(D.Z,{component:I.rU,variant:"contained",color:"primary",to:C},a):null}var We=(n=>(n.TOP_BOTTOM="TB",n.BOTTOM_TOP="BT",n.LEFT_RIGHT="LR",n.RIGHT_LEFT="RL",n))(We||{}),bt=(n=>(n.UP_LEFT="UL",n.UP_RIGHT="UR",n.DOWN_LEFT="DL",n.DOWN_RIGHT="DR",n))(bt||{}),dn=(n=>(n.NETWORK_SIMPLEX="network-simplex",n.TIGHT_TREE="tight-tree",n.LONGEST_PATH="longest-path",n))(dn||{}),Pn=(n=>(n.LEFT="l",n.RIGHT="r",n.CENTER="c",n))(Pn||{}),Wn=Object.freeze({__proto__:null,Direction:We,Alignment:bt,Ranker:dn,LabelPosition:Pn});const Yn=(0,h.Z)(n=>({node:{fill:n.palette.primary.light,stroke:n.palette.primary.light},text:{fill:n.palette.primary.contrastText}}),{name:"BackstageDependencyGraphDefaultNode"});function hr({node:{id:n}}){const a=Yn(),[C,A]=e.useState(0),[k,V]=e.useState(0),ue=e.useRef(null);e.useLayoutEffect(()=>{if(ue.current){let{height:wt,width:gt}=ue.current.getBBox();wt=Math.round(wt),gt=Math.round(gt),(wt!==k||gt!==C)&&(A(gt),V(wt))}},[C,k]);const $e=10,Ge=C+$e*2,Ke=k+$e*2;return e.createElement("g",null,e.createElement("rect",{className:a.node,width:Ge,height:Ke,rx:10}),e.createElement("text",{ref:ue,className:a.text,y:Ke/2,x:Ge/2,textAnchor:"middle",alignmentBaseline:"middle"},n))}const Er="arrow-marker",ir="node",_r="edge",gr="label",Br=(0,p.Z)(n=>({node:{transition:`${n.transitions.duration.shortest}ms`}}),{name:"BackstageDependencyGraphNode"}),jn=n=>e.createElement(hr,{...n});function J({render:n=jn,setNode:a,node:C}){const{width:A,height:k,x:V=0,y:ue=0}=C,$e=C,Ge=Br(),Ke=e.useRef(null);return e.useLayoutEffect(()=>{if(Ke.current){let{height:wt,width:gt}=Ke.current.getBBox();wt=Math.round(wt),gt=Math.round(gt),(wt!==k||gt!==A)&&a(C.id,{...C,height:wt,width:gt})}},[C,A,k,a]),e.createElement("g",{ref:Ke,"data-testid":ir,className:Ge.node,transform:`translate(${V-A/2},${ue-k/2})`},n({node:$e}))}const he=(0,p.Z)(n=>({text:{fill:n.palette.textContrast}}),{name:"BackstageDependencyGraphDefaultLabel"});function Ie({edge:{label:n}}){const a=he();return e.createElement("text",{className:a.text,textAnchor:"middle"},n)}const Qe=(0,p.Z)(n=>({path:{strokeWidth:1,stroke:n.palette.textSubtle,fill:"none",transition:`${n.transitions.duration.shortest}ms`},label:{transition:`${n.transitions.duration.shortest}ms`}}),{name:"BackstageDependencyGraphEdge"}),Rt=n=>e.createElement(Ie,{...n});function Wt({render:n=Rt,setEdge:a,id:C,edge:A,curve:k}){const{x:V=0,y:ue=0,width:$e,height:Ge,points:Ke}=A,wt=A,gt=Qe(),Ot=e.useRef(null);e.useLayoutEffect(()=>{if(Ot.current){let{height:gn,width:Fn}=Ot.current.getBBox();gn=Math.round(gn),Fn=Math.round(Fn),(gn!==Ge||Fn!==$e)&&a(C,{...A,height:gn,width:Fn})}},[A,Ge,$e,a,C]);let jt="";const fn=e.useMemo(()=>G.Z().x(gn=>gn.x).y(gn=>gn.y).curve(ye[k]),[k]);if(Ke){const gn=Ke.filter(Fn=>be()(Fn.x)&&be()(Fn.y));jt=fn(gn)||""}return e.createElement(e.Fragment,null,jt&&e.createElement("path",{"data-testid":_r,className:gt.path,d:jt}),wt.label?e.createElement("g",{ref:Ot,"data-testid":gr,className:gt.label,transform:`translate(${V},${ue})`},n({edge:wt})):null)}const Kt="workspace";function an(n){var a,C;const{edges:A,nodes:k,renderNode:V,direction:ue=We.TOP_BOTTOM,align:$e,nodeMargin:Ge=50,edgeMargin:Ke=10,rankMargin:wt=50,paddingX:gt=0,paddingY:Ot=0,acyclicer:jt,ranker:fn=dn.NETWORK_SIMPLEX,labelPosition:gn=Pn.RIGHT,labelOffset:Fn=10,edgeRanks:Qn=1,edgeWeight:ar=1,renderLabel:or,defs:zn,zoom:sr="enabled",curve:qn="curveMonotoneX",...Kr}=n,Fr=(0,ct.Z)(),[Dr,jr]=e.useState(100),[aa,oa]=e.useState(100),nr=e.useRef(new(oe()).graphlib.Graph),[Vr,Da]=e.useState(((a=nr.current.graph())==null?void 0:a.width)||0),[Gr,Ea]=e.useState(((C=nr.current.graph())==null?void 0:C.height)||0),[Ma,vr]=e.useState([]),[kr,Hr]=e.useState([]),Mr=Math.max(Vr,Dr),dr=Math.max(Gr,aa),Rr=e.useMemo(()=>de()(pr=>{if(!pr)return;const yr=rn.Z(pr),mr=rn.Z(pr.getElementById(Kt));function Lr(){yr.call(q.sP().scaleExtent([1,10]).on("zoom",Zr=>{Zr.transform.x=Math.min(0,Math.max(Zr.transform.x,Mr-Mr*Zr.transform.k)),Zr.transform.y=Math.min(0,Math.max(Zr.transform.y,dr-dr*Zr.transform.k)),mr.attr("transform",Zr.transform)}))}sr==="enabled"?Lr():sr==="enable-on-click"&&yr.on("click",()=>Lr());const{width:xr,height:va}=pr.getBoundingClientRect();Dr!==xr&&jr(xr),aa!==va&&oa(va)},100),[aa,Dr,Mr,dr,sr]),Jr=e.useCallback(()=>{const pr=nr.current.nodes(),yr=nr.current.edges();pr.forEach(mr=>{k.some(xr=>xr.id===mr)||nr.current.removeNode(mr)}),yr.forEach(mr=>{A.some(xr=>xr.from===mr.v&&xr.to===mr.w)||nr.current.removeEdge(mr.v,mr.w)}),k.forEach(mr=>{const Lr=nr.current.nodes().find(xr=>mr.id===xr);if(Lr&&nr.current.node(Lr)){const{width:xr,height:va,x:Zr,y:kl}=nr.current.node(Lr);nr.current.setNode(Lr,{...mr,width:xr,height:va,x:Zr,y:kl})}else nr.current.setNode(mr.id,{...mr,width:0,height:0})}),A.forEach(mr=>{nr.current.setEdge(mr.from,mr.to,{...mr,label:mr.label,width:0,height:0,labelpos:gn,labeloffset:Fn,weight:ar,minlen:Qn})})},[A,k,gn,Fn,ar,Qn]),$r=e.useMemo(()=>de()(()=>{oe().layout(nr.current);const{height:pr,width:yr}=nr.current.graph(),mr=Math.max(0,pr||0),Lr=Math.max(0,yr||0);Da(Lr),Ea(mr),vr(nr.current.nodes()),Hr(nr.current.edges())},250,{leading:!0}),[]);e.useEffect(()=>(nr.current.setGraph({rankdir:ue,align:$e,nodesep:Ge,edgesep:Ke,ranksep:wt,marginx:gt,marginy:Ot,acyclicer:jt,ranker:fn}),Jr(),$r(),$r.cancel),[jt,$e,ue,Ke,gt,Ot,Ge,wt,fn,Jr,$r]);function sa(pr,yr){return nr.current.setNode(pr,yr),$r(),nr.current}function Ul(pr,yr){return nr.current.setEdge(pr,yr),$r(),nr.current}return e.createElement("svg",{ref:Rr,...Kr,width:"100%",height:dr,viewBox:`0 0 ${Mr} ${dr}`},e.createElement("defs",null,e.createElement("marker",{id:Er,viewBox:"0 0 24 24",markerWidth:"14",markerHeight:"14",refX:"16",refY:"12",orient:"auto",markerUnits:"strokeWidth"},e.createElement("path",{fill:Fr.palette.textSubtle,d:"M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"})),zn),e.createElement("g",{id:Kt},e.createElement("svg",{width:Vr,height:Gr,y:dr/2-Gr/2,x:Mr/2-Vr/2,viewBox:`0 0 ${Vr} ${Gr}`},kr.map(pr=>{const yr=nr.current.edge(pr);return yr?e.createElement(Wt,{key:`${pr.v}-${pr.w}`,id:pr,setEdge:Ul,render:or,edge:yr,curve:qn}):null}),Ma.map(pr=>{const yr=nr.current.node(pr);return yr?e.createElement(J,{key:pr,setNode:sa,render:V,node:yr}):null}))))}const bn=(0,h.Z)(n=>{var a;return{root:{padding:n.spacing(0),marginBottom:n.spacing(0),marginTop:n.spacing(0),display:"flex",flexFlow:"row nowrap"},topPosition:{position:"relative",marginBottom:n.spacing(6),marginTop:-n.spacing(3),zIndex:"unset"},icon:{fontSize:20},content:{width:"100%",maxWidth:"inherit",flexWrap:"nowrap"},message:{display:"flex",alignItems:"center",color:n.palette.banner.text,"& a":{color:n.palette.banner.link}},info:{backgroundColor:n.palette.banner.info},error:{backgroundColor:n.palette.banner.error},warning:{backgroundColor:(a=n.palette.banner.warning)!=null?a:n.palette.banner.error}}},{name:"BackstageDismissableBanner"}),pn=n=>{var a;const{variant:C,message:A,id:k,fixed:V=!1}=n,ue=bn(),Ge=(0,c.h_)(c.E6).forBucket("notifications"),Ke=(a=Ge.snapshot("dismissedBanners").value)!=null?a:[],[wt,gt]=(0,e.useState)(new Set(Ke)),Ot=(0,je.Z)(Ge.observe$("dismissedBanners"));(0,e.useEffect)(()=>{var fn;if(Ot!=null&&Ot.value){const gn=(fn=Ot==null?void 0:Ot.value)!=null?fn:[];gt(new Set(gn))}},[Ot==null?void 0:Ot.value]);const jt=()=>{Ge.set("dismissedBanners",[...wt,k])};return e.createElement(d.Z,{anchorOrigin:V?{vertical:"bottom",horizontal:"center"}:{vertical:"top",horizontal:"center"},open:!wt.has(k),classes:{root:$()(ue.root,!V&&ue.topPosition)}},e.createElement(ft.Z,{classes:{root:$()(ue.content,ue[C]),message:ue.message},message:A,action:[e.createElement(E.Z,{key:"dismiss",title:"Permanently dismiss this message",color:"inherit",onClick:jt},e.createElement(f.Z,{className:ue.icon}))]}))},Un=(0,h.Z)({generalImg:{width:"95%",zIndex:2,position:"relative",left:"50%",top:"50%",transform:"translate(-50%, 15%)"}},{name:"BackstageEmptyStateImage"}),Cn=({missing:n})=>{const a=Un();switch(n){case"field":return e.createElement("img",{src:_e,className:a.generalImg,alt:"annotation is missing"});case"info":return e.createElement("img",{src:ze,alt:"no Information",className:a.generalImg});case"content":return e.createElement("img",{src:dt,alt:"create Component",className:a.generalImg});case"data":return e.createElement("img",{src:St,alt:"no Build",className:a.generalImg});default:return null}},wn=(0,h.Z)(n=>({root:{backgroundColor:n.palette.background.default,padding:n.spacing(2,0,0,0)},action:{marginTop:n.spacing(2)},imageContainer:{position:"relative"}}),{name:"BackstageEmptyState"});function er(n){const{title:a,description:C,missing:A,action:k}=n,V=wn();return e.createElement(F.Z,{container:!0,direction:"row",justifyContent:"space-around",alignItems:"flex-start",className:V.root,spacing:2},e.createElement(F.Z,{item:!0,xs:12,md:6},e.createElement(F.Z,{container:!0,direction:"column"},e.createElement(F.Z,{item:!0,xs:!0},e.createElement(N.Z,{variant:"h5"},a)),e.createElement(F.Z,{item:!0,xs:!0},e.createElement(N.Z,{variant:"body1"},C)),e.createElement(F.Z,{item:!0,xs:!0,className:V.action},k))),e.createElement(F.Z,{item:!0,xs:12,md:6,className:V.imageContainer},typeof A=="string"?e.createElement(Cn,{missing:A}):A.customImage))}const lr=`apiVersion: backstage.io/v1alpha1
kind: Component
metadata:
  name: example
  description: example.com
  annotations:
    ANNOTATION: value
spec:
  type: website
  lifecycle: production
  owner: user:guest`,Xn=(0,h.Z)(n=>({code:{borderRadius:6,margin:`${n.spacing(2)}px 0px`,background:n.palette.type==="dark"?"#444":"#fff"}}),{name:"BackstageMissingAnnotationEmptyState"});function Pr(n){const{annotation:a,readMoreUrl:C}=n,A=C||"https://backstage.io/docs/features/software-catalog/well-known-annotations",k=Xn(),V=e.createElement(e.Fragment,null,"The ",e.createElement("code",null,a)," annotation is missing. You need to add the annotation to your component if you want to enable this tool.");return e.createElement(er,{missing:"field",title:"Missing Annotation",description:V,action:e.createElement(e.Fragment,null,e.createElement(N.Z,{variant:"body1"},"Add the annotation to your component YAML as shown in the highlighted example below:"),e.createElement("div",{className:k.code},e.createElement(Gn,{text:lr.replace("ANNOTATION",a),language:"yaml",showLineNumbers:!0,highlightedNumbers:[6,7],customStyle:{background:"inherit",fontSize:"115%"}})),e.createElement(D.Z,{color:"primary",component:un,to:A},"Read more"))})}const tr=(n,a)=>(a.palette.type==="light"?z._j:z.$n)(a.palette[n].light,.6),Jn=(n,a)=>(a.palette.type==="light"?z.$n:z._j)(a.palette[n].light,.9),rr=(0,h.Z)(n=>({root:{marginRight:n.spacing(1),fill:({severity:a})=>tr(a,n)}})),ee=({severity:n})=>{const a=rr({severity:n});return e.createElement(st.Z,{classes:a})},le=({severity:n})=>{const a=rr({severity:n});return e.createElement(me.Z,{classes:a})},Me=(0,h.Z)(n=>({panel:{backgroundColor:({severity:a})=>Jn(a,n),color:({severity:a})=>tr(a,n),verticalAlign:"middle"},summary:{display:"flex",flexDirection:"row"},summaryText:{color:({severity:a})=>tr(a,n),fontWeight:"bold"},message:{width:"100%",display:"block",color:({severity:a})=>tr(a,n),backgroundColor:({severity:a})=>Jn(a,n)},details:{width:"100%",display:"block",color:n.palette.textContrast,backgroundColor:n.palette.background.default,border:`1px solid ${n.palette.border}`,padding:n.spacing(2),fontFamily:"sans-serif"}}),{name:"BackstageWarningPanel"}),Ce=n=>n.charAt(0).toLocaleUpperCase("en-US")+n.slice(1);function Ye(n){const{severity:a="warning",title:C,message:A,children:k,defaultExpanded:V}=n,ue=Me({severity:a}),$e=Ce(a)+(C?`: ${C}`:"");return e.createElement(_t.Z,{defaultExpanded:V!=null?V:!1,className:ue.panel,role:"alert"},e.createElement(Ct.Z,{expandIcon:e.createElement(le,{severity:a}),className:ue.summary},e.createElement(ee,{severity:a}),e.createElement(N.Z,{className:ue.summaryText,variant:"subtitle1"},$e)),(A||k)&&e.createElement(Qt.Z,null,e.createElement(F.Z,{container:!0},A&&e.createElement(F.Z,{item:!0,xs:12},e.createElement(N.Z,{className:ue.message,variant:"body1"},A)),k&&e.createElement(F.Z,{item:!0,xs:12,className:ue.details},k))))}const ut=(0,h.Z)(n=>({text:{fontFamily:"monospace",whiteSpace:"pre",overflowX:"auto",marginRight:n.spacing(2)},divider:{margin:n.spacing(2)}}),{name:"BackstageErrorPanel"}),lt=({error:n,message:a,stack:C,children:A})=>{const k=ut();return e.createElement(Bt.Z,{dense:!0},e.createElement(Lt.Z,{alignItems:"flex-start"},e.createElement(Re.Z,{classes:{secondary:k.text},primary:"Error",secondary:n}),e.createElement(Nn,{text:n})),e.createElement(Lt.Z,{alignItems:"flex-start"},e.createElement(Re.Z,{classes:{secondary:k.text},primary:"Message",secondary:a}),e.createElement(Nn,{text:a})),C&&e.createElement(Lt.Z,{alignItems:"flex-start"},e.createElement(Re.Z,{classes:{secondary:k.text},primary:"Stack Trace",secondary:C}),e.createElement(Nn,{text:C})),A)};function yt(n){const{title:a,error:C,defaultExpanded:A,children:k}=n;return e.createElement(Ye,{severity:"error",title:a!=null?a:C.message,defaultExpanded:A},e.createElement(lt,{error:C.name,message:C.message,stack:C.stack,children:k}))}const Nt=(0,h.Z)(n=>({text:{fontFamily:"monospace",whiteSpace:"pre",overflowX:"auto",marginRight:n.spacing(2)},divider:{margin:n.spacing(2)}}),{name:"BackstageResponseErrorPanel"});function Ft(n){var a;const{title:C,error:A,defaultExpanded:k}=n,V=Nt();if(A.name!=="ResponseError")return e.createElement(yt,{title:C!=null?C:A.message,defaultExpanded:k,error:A});const{body:ue,cause:$e}=A,{request:Ge,response:Ke}=ue,wt=`${Ke.statusCode}: ${$e.name}`,gt=Ge&&`${Ge.method} ${Ge.url}`,Ot=$e.message.replace(/\\n/g,`
`),jt=(a=$e.stack)==null?void 0:a.replace(/\\n/g,`
`),fn=JSON.stringify(ue,void 0,2);return e.createElement(yt,{title:C!=null?C:A.message,defaultExpanded:k,error:{name:wt,message:Ot,stack:jt}},gt&&e.createElement(Lt.Z,{alignItems:"flex-start"},e.createElement(Re.Z,{classes:{secondary:V.text},primary:"Request",secondary:Ge?`${gt}`:void 0}),e.createElement(Nn,{text:gt})),e.createElement(e.Fragment,null,e.createElement(ce.Z,{component:"li",className:V.divider}),e.createElement(Lt.Z,{alignItems:"flex-start"},e.createElement(Re.Z,{classes:{secondary:V.text},primary:"Full Error as JSON"})),e.createElement(Gn,{language:"json",text:fn,showCopyCodeButton:!0})))}function Xt(n){const a=document.createElement("div");return a.setAttribute("id",n),a}function Yt(n){document.body.insertBefore(n,document.body.lastElementChild.nextElementSibling)}function hn(n){const a=useRef(null);useEffect(function(){const k=document.querySelector(`#${n}`),V=k||Xt(n);return k||Yt(V),V.appendChild(a.current),function(){a.current.remove(),V.childNodes.length===-1&&V.remove()}},[n]);function C(){return a.current||(a.current=document.createElement("div")),a.current}return C()}const Kn="core.calloutSeen";function kn(){const[n,a]=useState(()=>{const A=localStorage.getItem(Kn);return A?JSON.parse(A):{}}),C=useCallback((A,k)=>{const V=localStorage.getItem(Kn),$e={...V?JSON.parse(V):{},[A]:k};a($e),localStorage.setItem(Kn,JSON.stringify($e))},[]);return{states:n,setState:C}}function yn(n){const{states:a,setState:C}=kn(),A=useCallback(()=>{C(n,!0)},[C,n]);return{seen:a[n]===!0,markSeen:A}}function Hn(n){const{seen:a,markSeen:C}=yn(n);return{show:a===!1,hide:C}}const fr=(0,h.Z)({"@keyframes pulsateSlightly":{"0%":{transform:"scale(1.0)"},"100%":{transform:"scale(1.1)"}},"@keyframes pulsateAndFade":{"0%":{transform:"scale(1.0)",opacity:.9},"100%":{transform:"scale(1.5)",opacity:0}},featureWrapper:{position:"relative"},backdrop:{zIndex:2e3,position:"fixed",overflow:"hidden",left:0,right:0,top:0,bottom:0},dot:{position:"absolute",backgroundColor:"transparent",borderRadius:"100%",border:"1px solid rgba(103, 146, 180, 0.98)",boxShadow:"0px 0px 0px 20000px rgba(0, 0, 0, 0.5)",zIndex:2001,transformOrigin:"center center",animation:"$pulsateSlightly 1744ms 1.2s cubic-bezier(0.4, 0, 0.2, 1) alternate infinite"},pulseCircle:{width:"100%",height:"100%",backgroundColor:"transparent",borderRadius:"100%",border:"2px solid white",zIndex:2001,transformOrigin:"center center",animation:"$pulsateAndFade 872ms 1.2s cubic-bezier(0.4, 0, 0.2, 1) infinite"},text:{position:"absolute",color:"white",zIndex:2003}},{name:"BackstageFeatureCalloutCircular"});function Nr(n){const{featureId:a,title:C,description:A,children:k}=n,{show:V,hide:ue}=Hn(a),$e=hn("core.callout"),Ge=useRef(null),[Ke,wt]=useState(),gt=fr(),Ot=useCallback(()=>{if(Ge.current){const jt=Ge.current.getBoundingClientRect(),fn=Math.max(jt.width,jt.height),gn=800,Fn=jt.x-(fn-jt.width)/2-gn,Qn=jt.y-(fn-jt.height)/2-gn,ar=fn+2*gn,or=450,zn=jt.x+jt.width/2-or,sr=jt.y-(fn-jt.height)/2+fn+20;wt({dotLeft:Fn,dotTop:Qn,dotSize:ar,borderWidth:gn,textTop:sr,textLeft:zn,textWidth:or})}},[]);return useEffect(()=>(window.addEventListener("resize",Ot),window.addEventListener("scroll",Ot),()=>{window.removeEventListener("resize",Ot),window.removeEventListener("scroll",Ot)}),[Ot]),useLayoutEffect(Ot,[Ge.current,Ot]),V?React.createElement(React.Fragment,null,React.createElement("div",{className:gt.featureWrapper,ref:Ge},k),createPortal(React.createElement("div",{className:gt.backdrop},React.createElement(ClickAwayListener,{onClickAway:ue},React.createElement(React.Fragment,null,React.createElement("div",{className:gt.dot,"data-testid":"dot",style:{left:Ke==null?void 0:Ke.dotLeft,top:Ke==null?void 0:Ke.dotTop,width:Ke==null?void 0:Ke.dotSize,height:Ke==null?void 0:Ke.dotSize,borderWidth:Ke==null?void 0:Ke.borderWidth},onClick:ue,onKeyDown:ue,role:"button",tabIndex:0},React.createElement("div",{className:gt.pulseCircle})),React.createElement("div",{className:gt.text,"data-testid":"text",style:{left:Ke==null?void 0:Ke.textLeft,top:Ke==null?void 0:Ke.textTop,width:Ke==null?void 0:Ke.textWidth}},React.createElement(Typography,{variant:"h2",paragraph:!0},C),React.createElement(Typography,null,A))))),$e)):React.createElement(React.Fragment,null,k)}const wr=(0,h.Z)(n=>({link:{display:"grid",justifyItems:"center",gridGap:4,textAlign:"center"},disabled:{color:n.palette.text.secondary,cursor:"default"},primary:{color:n.palette.primary.main},secondary:{color:n.palette.secondary.main},label:{fontSize:"0.7rem",textTransform:"uppercase",fontWeight:600,letterSpacing:1.2}}),{name:"BackstageIconLinkVertical"});function Ar({color:n="primary",disabled:a=!1,href:C="#",icon:A=e.createElement(Te.Z,null),label:k,onClick:V,title:ue}){const $e=wr();return a?e.createElement(U.Z,{title:ue,className:$()($e.link,$e.disabled),underline:"none"},A,e.createElement("span",{className:$e.label},k)):e.createElement(U.Z,{title:ue,className:$()($e.link,$e[n]),to:C,component:un,onClick:V},A,e.createElement("span",{className:$e.label},k))}const Ir=(0,h.Z)(n=>({links:{margin:n.spacing(2,0),display:"grid",gridAutoFlow:"column",gridAutoColumns:"min-content",gridGap:n.spacing(3)}}),{name:"BackstageHeaderIconLinkRow"});function br(n){const{links:a}=n,C=Ir();return e.createElement("nav",{className:C.links},a.map((A,k)=>e.createElement(Ar,{key:k+1,...A})))}const zr=n=>{const a=n==="dark"?"16%":"97%";return`
    hsl(0, 0%, ${a}) 0%,
    hsla(0, 0%, ${a}, 0.987) 8.1%,
    hsla(0, 0%, ${a}, 0.951) 15.5%,
    hsla(0, 0%, ${a}, 0.896) 22.5%,
    hsla(0, 0%, ${a}, 0.825) 29%,
    hsla(0, 0%, ${a}, 0.741) 35.3%,
    hsla(0, 0%, ${a}, 0.648) 41.2%,
    hsla(0, 0%, ${a}, 0.55) 47.1%,
    hsla(0, 0%, ${a}, 0.45) 52.9%,
    hsla(0, 0%, ${a}, 0.352) 58.8%,
    hsla(0, 0%, ${a}, 0.259) 64.7%,
    hsla(0, 0%, ${a}, 0.175) 71%,
    hsla(0, 0%, ${a}, 0.104) 77.5%,
    hsla(0, 0%, ${a}, 0.049) 84.5%,
    hsla(0, 0%, ${a}, 0.013) 91.9%,
    hsla(0, 0%, ${a}, 0) 100%
  `},Yr=100,Wr=10,Cr=(0,h.Z)(n=>({root:{position:"relative",display:"flex",flexFlow:"row nowrap",alignItems:"center"},container:{overflow:"auto",scrollbarWidth:0,"&::-webkit-scrollbar":{display:"none"}},fade:{position:"absolute",width:Yr,height:`calc(100% + ${Wr}px)`,transition:"opacity 300ms",pointerEvents:"none"},fadeLeft:{left:-Wr,background:`linear-gradient(90deg, ${zr(n.palette.type)})`},fadeRight:{right:-Wr,background:`linear-gradient(270deg, ${zr(n.palette.type)})`},fadeHidden:{opacity:0},button:{position:"absolute"},buttonLeft:{left:-n.spacing(2)},buttonRight:{right:-n.spacing(2)}}),{name:"BackstageHorizontalScrollGrid"});function Sr(n){const[[a,C],A]=React.useState([0,0]);return React.useLayoutEffect(()=>{const k=n.current;if(!k){A([0,0]);return}const V=()=>{const ue=k.scrollLeft,$e=k.scrollWidth-k.offsetWidth-k.scrollLeft;A([ue,$e])};return V(),k.addEventListener("scroll",V),window.addEventListener("resize",V),()=>{k.removeEventListener("scroll",V),window.removeEventListener("resize",V)}},[n]),[a,C]}function Xr(n,a,C){const[A,k]=React.useState(0);return React.useLayoutEffect(()=>{if(A===0)return;const V=performance.now(),ue=requestAnimationFrame($e=>{if(!n.current)return;const Ge=$e-V,Ke=Math.abs(A)*Ge/a,gt=Math.max(C,Ke)*Math.sign(A);n.current.scrollBy({left:gt});const Ot=A-gt;Math.sign(A)!==Math.sign(Ot)?k(0):k(Ot)});return()=>cancelAnimationFrame(ue)},[n,A,a,C]),k}function ya(n){const{scrollStep:a=100,scrollSpeed:C=50,minScrollDistance:A=5,children:k,...V}=n,ue=Cr(n),$e=React.useRef(),[Ge,Ke]=Sr($e),wt=Xr($e,C,A),gt=Ot=>{!$e.current||wt(Ot?a:-a)};return React.createElement("div",{...V,className:ue.root},React.createElement(Grid,{container:!0,direction:"row",wrap:"nowrap",className:ue.container,ref:$e},k),React.createElement("div",{className:classNames(ue.fade,ue.fadeLeft,{[ue.fadeHidden]:Ge===0})}),React.createElement("div",{className:classNames(ue.fade,ue.fadeRight,{[ue.fadeHidden]:Ke===0})}),Ge>0&&React.createElement(IconButton,{title:"Scroll Left",onClick:()=>gt(!1),className:classNames(ue.button,ue.buttonLeft,{})},React.createElement(ChevronLeftIcon,null)),Ke>0&&React.createElement(IconButton,{title:"Scroll Right",onClick:()=>gt(!0),className:classNames(ue.button,ue.buttonRight,{})},React.createElement(ChevronRight,null)))}const ko=(0,h.Z)({alpha:{color:"#ffffff",fontFamily:"serif",fontWeight:"normal",fontStyle:"italic"},beta:{color:"#4d65cc",fontFamily:"serif",fontWeight:"normal",fontStyle:"italic"}},{name:"BackstageLifecycle"});function Zo(n){const a=ko(n),{shorthand:C,alpha:A}=n;return C?e.createElement("span",{className:a[A?"alpha":"beta"],style:{fontSize:"120%"}},A?e.createElement(e.Fragment,null,"\u03B1"):e.createElement(e.Fragment,null,"\u03B2")):e.createElement("span",{className:a[A?"alpha":"beta"]},A?"Alpha":"Beta")}const No=(0,e.lazy)(()=>t.e(2846).then(t.bind(t,12846)).then(n=>({default:n.RealLogViewer})));function Wo(n){const{Progress:a}=(0,c.qD)().getComponents();return e.createElement(e.Suspense,{fallback:e.createElement(a,null)},e.createElement(No,{...n}))}const Ko=(0,h.Z)(n=>({markdown:{"& table":{borderCollapse:"collapse",border:`1px solid ${n.palette.border}`},"& th, & td":{border:`1px solid ${n.palette.border}`,padding:n.spacing(1)},"& td":{wordBreak:"break-word",overflow:"hidden",verticalAlign:"middle",lineHeight:"1",margin:0,padding:n.spacing(3,2,3,2.5),borderBottom:0},"& th":{backgroundColor:n.palette.background.paper},"& tr":{backgroundColor:n.palette.background.paper},"& tr:nth-child(odd)":{backgroundColor:n.palette.background.default},"& a":{color:n.palette.link},"& img":{maxWidth:"100%"}}}),{name:"BackstageMarkdownContent"}),$a=(n,a)=>a?typeof a=="string"?n+a:e.Children.toArray(a.props.children).reduce($a,n):n,Qr=({level:n,children:a})=>{const k=e.Children.toArray(a).reduce($a,"").toLocaleLowerCase("en-US").replace(/\W/g,"-");return e.createElement(`h${n}`,{id:k},a)},Fo={code:({inline:n,className:a,children:C,...A})=>{const k=String(C).replace(/\n+$/,""),V=/language-(\w+)/.exec(a||"");return!n&&V?e.createElement(Gn,{language:V[1],text:k}):e.createElement("code",{className:a,...A},C)},h1:Qr,h2:Qr,h3:Qr,h4:Qr,h5:Qr,h6:Qr};function zo(n){const{content:a,dialect:C="gfm",linkTarget:A,transformLinkUri:k,transformImageUri:V,className:ue}=n,$e=Ko();return e.createElement(Q.D,{remarkPlugins:C==="gfm"?[T.Z]:[],className:`${$e.markdown} ${ue}`,children:a,components:Fo,linkTarget:A,transformLinkUri:k,transformImageUri:V})}const jo=(0,h.Z)(n=>({root:{paddingLeft:n.spacing(3)}}),{name:"BackstageLoginRequestListItem"}),Vo=({request:n,busy:a,setBusy:C})=>{const A=jo(),[k,V]=(0,e.useState)(),ue=async()=>{C(!0);try{await n.trigger()}catch(Ge){V((0,He.VZ)(Ge)?Ge.message:"An unspecified error occurred")}finally{C(!1)}},$e=n.provider.icon;return e.createElement(Lt.Z,{disabled:a,classes:{root:A.root}},e.createElement(ge.Z,null,e.createElement($e,{fontSize:"large"})),e.createElement(Re.Z,{primary:n.provider.title,secondary:k&&e.createElement(N.Z,{color:"error"},k)}),e.createElement(D.Z,{color:"primary",variant:"contained",onClick:ue},"Log in"))},Go=(0,h.Z)(n=>({dialog:{paddingTop:n.spacing(1)},title:{minWidth:0},titleHeading:{fontSize:n.typography.h6.fontSize},contentList:{padding:0},actionButtons:{padding:n.spacing(2,0)}}),{name:"OAuthRequestDialog"});function Ho(n){const a=Go(),[C,A]=(0,e.useState)(!1),k=(0,c.h_)(c.ZM),V=(0,je.Z)((0,e.useMemo)(()=>k.authRequest$(),[k]),[]),ue=()=>{V.forEach($e=>$e.reject())};return e.createElement(X.Z,{open:Boolean(V.length),fullWidth:!0,maxWidth:"xs",classes:{paper:a.dialog},"aria-labelledby":"oauth-req-dialog-title"},e.createElement("main",null,e.createElement(te.Z,{classes:{root:a.title},id:"oauth-req-dialog-title"},e.createElement(N.Z,{className:a.titleHeading,variant:"h1"},"Login Required")),e.createElement(fe.Z,{dividers:!0,classes:{root:a.contentList}},e.createElement(Bt.Z,null,V.map($e=>e.createElement(Vo,{key:$e.provider.title,request:$e,busy:C,setBusy:A}))))),e.createElement(ne.Z,{classes:{root:a.actionButtons}},e.createElement(D.Z,{onClick:ue},"Reject All")))}const Jo=(0,h.Z)({container:{overflow:"visible !important"}},{name:"BackstageOverflowTooltip"});function Yo(n){var a;const[C,A]=(0,e.useState)(!1),k=(0,ve.t)(),V=Jo(),ue=$e=>{k()&&A($e)};return e.createElement(Ee.ZP,{title:(a=n.title)!=null?a:n.text||"",placement:n.placement,disableHoverListener:!C},e.createElement(ht(),{text:n.text,line:n.line,onToggled:ue,containerClassName:V.container}))}function ia(n){const[a,C]=(0,e.useState)(!1);return(0,e.useEffect)(()=>{const A=setTimeout(()=>C(!0),250);return()=>clearTimeout(A)},[]),a?e.createElement(Fe.Z,{...n,"data-testid":"progress"}):e.createElement("div",{style:{display:"none"}})}const Xo=(0,h.Z)(n=>({root:{maxWidth:"fit-content",padding:n.spacing(2,2,2,2.5)},boxTitle:{margin:0,color:n.palette.textSubtle},arrow:{color:n.palette.textSubtle}}),{name:"BackstageBottomLink"});function La(n){const{link:a,title:C,onClick:A}=n,k=Xo();return e.createElement("div",null,e.createElement(ce.Z,null),e.createElement(un,{to:a,onClick:A,underline:"none"},e.createElement(Jt.Z,{display:"flex",alignItems:"center",className:k.root},e.createElement(Jt.Z,{className:k.boxTitle,fontWeight:"fontWeightBold",m:1},e.createElement(N.Z,null,e.createElement("strong",null,C))),e.createElement(xt.Z,{className:k.arrow}))))}const Qo=n=>{const{slackChannel:a}=n;if(a){if(typeof a=="string")return e.createElement(e.Fragment,null,"Please contact ",a," for help.");if(!a.href)return e.createElement(e.Fragment,null,"Please contact ",a.name," for help.")}else return null;return e.createElement(An,{to:a.href,variant:"contained"},a.name)},xa=class extends e.Component{constructor(a){super(a),this.state={error:void 0,errorInfo:void 0}}componentDidCatch(a,C){console.error(`ErrorBoundary, error: ${a}, info: ${C}`),this.setState({error:a,errorInfo:C})}render(){const{slackChannel:a,children:C}=this.props,{error:A}=this.state;return A?e.createElement(yt,{title:"Something Went Wrong",error:A},e.createElement(Qo,{slackChannel:a})):C}},qo=(0,h.Z)(n=>({noPadding:{padding:0,"&:last-child":{paddingBottom:0}},header:{padding:n.spacing(2,2,2,2.5)},headerTitle:{fontWeight:700},headerSubheader:{paddingTop:n.spacing(1)},headerAvatar:{},headerAction:{},headerContent:{},subheader:{display:"flex"}}),{name:"BackstageInfoCard"}),es=(0,K.Z)(n=>({root:{display:"inline-block",padding:n.spacing(8,8,0,0),float:"right"}}),{name:"BackstageInfoCardCardActionsTopRight"})($t.Z),Ba={card:{flex:{display:"flex",flexDirection:"column"},fullHeight:{display:"flex",flexDirection:"column",height:"100%"},gridItem:{display:"flex",flexDirection:"column",height:"calc(100% - 10px)",marginBottom:"10px"}},cardContent:{fullHeight:{flex:1},gridItem:{flex:1}}};function qr(n){const{title:a,subheader:C,divider:A=!0,deepLink:k,slackChannel:V,errorBoundaryProps:ue,variant:$e,children:Ge,headerStyle:Ke,headerProps:wt,icon:gt,action:Ot,actionsClassName:jt,actions:fn,cardClassName:gn,actionsTopRight:Fn,className:Qn,noPadding:ar,titleTypographyProps:or}=n,zn=qo();let sr={},qn={};$e&&$e.split(/[\s]+/g).forEach(jr=>{sr={...sr,...Ba.card[jr]},qn={...qn,...Ba.cardContent[jr]}});const Kr=()=>e.createElement("div",{className:zn.headerSubheader},C&&e.createElement("div",{className:zn.subheader},C),gt),Fr=ue||(V?{slackChannel:V}:{});return e.createElement(mt.Z,{style:sr,className:Qn},e.createElement(xa,{...Fr},a&&e.createElement(Gt.Z,{classes:{root:zn.header,title:zn.headerTitle,subheader:zn.headerSubheader,avatar:zn.headerAvatar,action:zn.headerAction,content:zn.headerContent},title:a,subheader:Kr(),action:Ot,style:{...Ke},titleTypographyProps:or,...wt}),Fn&&e.createElement(es,null,Fn),A&&e.createElement(ce.Z,null),e.createElement(Zt.Z,{className:$()(gn,{[zn.noPadding]:ar}),style:qn},Ge),fn&&e.createElement($t.Z,{className:jt},fn),k&&e.createElement(La,{...k})))}const ts=(0,h.Z)(n=>({root:{position:"relative",lineHeight:0},overlay:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -60%)",fontSize:45,fontWeight:"bold",color:n.palette.textContrast},description:{fontSize:"100%",top:"50%",left:"50%",transform:"translate(-50%, -50%)",position:"absolute",wordBreak:"break-all",display:"inline-block"},circle:{width:"80%",transform:"translate(10%, 0)"},colorUnknown:{}}),{name:"BackstageGauge"}),Ua={fractional:!0,inverse:!1,unit:"%",max:100},ka=({palette:n,value:a,inverse:C,max:A})=>{if(isNaN(a))return"#ddd";const k=A||Ua.max,V=C?k-a:a;return V<k/3?n.status.error:V<k*(2/3)?n.status.warning:n.status.ok};function ns(n){const[a,C]=useState(null),{getColor:A=ka}=n,k=ts(n),{palette:V}=useTheme(),{value:ue,fractional:$e,inverse:Ge,unit:Ke,max:wt,description:gt}={...Ua,...n},Ot=$e?Math.round(ue*wt):ue,jt=wt!==100?Math.round(ue):Ot,[fn,gn]=useState(!1);return useEffect(()=>{const Fn=a,Qn=()=>gn(!0),ar=()=>gn(!1);return Fn&&gt?(Fn.addEventListener("mouseenter",Qn),Fn.addEventListener("mouseleave",ar),()=>{Fn.removeEventListener("mouseenter",Qn),Fn.removeEventListener("mouseleave",ar)}):()=>{gn(!1)}},[gt,a]),React.createElement("div",{ref:C,className:k.root},React.createElement(Circle,{strokeLinecap:"butt",percent:Ot,strokeWidth:12,trailWidth:12,strokeColor:A({palette:V,value:jt,inverse:Ge,max:wt}),className:k.circle}),gt&&fn?React.createElement("div",{className:k.description},gt):React.createElement("div",{className:k.overlay},isNaN(ue)?"N/A":`${jt}${Ke}`))}const rs=(0,h.Z)({root:{height:"100%",width:250}},{name:"BackstageGaugeCard"});function Zl(n){const a=rs(n),{title:C,subheader:A,progress:k,inverse:V,deepLink:ue,description:$e,icon:Ge,variant:Ke,getColor:wt}=n,gt={inverse:V,description:$e,getColor:wt,value:k};return React.createElement("div",{className:a.root},React.createElement(qr,{title:C,subheader:A,deepLink:ue,variant:Ke,icon:Ge},React.createElement(ns,{...gt})))}function Nl(n){const{value:a,getColor:C=ka}=n,{palette:A}=useTheme();if(isNaN(a))return null;let k=Math.round(a*100*100)/100;k>100&&(k=100);const V=C({palette:A,value:k,inverse:!1,max:100});return React.createElement(Tooltip,{title:`${k}%`},React.createElement("span",null,React.createElement(Line,{percent:k,strokeWidth:4,trailWidth:4,strokeColor:V})))}const as=(0,h.Z)(()=>(0,R.Z)({icon:{position:"absolute",right:"4px",pointerEvents:"none"}}),{name:"BackstageClosedDropdown"}),os=()=>{const n=as();return e.createElement(Se.Z,{className:n.icon,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e.createElement("path",{d:"M7.5 8L6 9.5L12.0703 15.5703L18.1406 9.5L16.6406 8L12.0703 12.5703L7.5 8Z",fill:"#616161"}))},ss=(0,h.Z)(()=>(0,R.Z)({icon:{position:"absolute",right:"4px",pointerEvents:"none"}}),{name:"BackstageOpenedDropdown"}),is=()=>{const n=ss();return e.createElement(Se.Z,{className:n.icon,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e.createElement("path",{d:"M16.5 16L18 14.5L11.9297 8.42969L5.85938 14.5L7.35938 16L11.9297 11.4297L16.5 16Z",fill:"#616161"}))},ls=(0,K.Z)(n=>(0,R.Z)({root:{"label + &":{marginTop:n.spacing(3)}},input:{borderRadius:4,position:"relative",backgroundColor:n.palette.background.paper,border:"1px solid #ced4da",fontSize:16,padding:"10px 26px 10px 12px",transition:n.transitions.create(["border-color","box-shadow"]),fontFamily:"Helvetica Neue","&:focus":{background:n.palette.background.paper,borderRadius:4}}}),{name:"BackstageSelectInputBase"})(ae.Z),cs=(0,h.Z)(n=>(0,R.Z)({formControl:{margin:`${n.spacing(1)} 0px`,maxWidth:300},label:{transform:"initial",fontWeight:"bold",fontSize:14,fontFamily:n.typography.fontFamily,color:n.palette.text.primary,"&.Mui-focused":{color:n.palette.text.primary}},formLabel:{transform:"initial",fontWeight:"bold",fontSize:14,fontFamily:n.typography.fontFamily,color:n.palette.text.primary,"&.Mui-focused":{color:n.palette.text.primary}},chips:{display:"flex",flexWrap:"wrap"},chip:{margin:2},checkbox:{},root:{display:"flex",flexDirection:"column"}}),{name:"BackstageSelect"});function Za(n){const{multiple:a,items:C,label:A,placeholder:k,selected:V,onChange:ue,triggerReset:$e,native:Ge=!1,disabled:Ke=!1,margin:wt}=n,gt=cs(),[Ot,jt]=(0,e.useState)(V||(a?[]:"")),[fn,gn]=(0,e.useState)(!1);(0,e.useEffect)(()=>{jt(a?[]:"")},[$e,a]),(0,e.useEffect)(()=>{V!==void 0&&jt(V)},[V]);const Fn=zn=>{jt(zn.target.value),ue(zn.target.value)},Qn=zn=>{if(Ke){zn.preventDefault();return}gn(sr=>a&&!(zn.target instanceof HTMLElement)?!0:!sr)},ar=()=>{gn(!1)},or=zn=>()=>{const sr=Ot.filter(qn=>qn!==zn);jt(sr),ue(sr)};return e.createElement("div",{className:gt.root},e.createElement(we.Z,{onClickAway:ar},e.createElement(et.Z,{className:gt.formControl},e.createElement(pe.Z,{className:gt.formLabel},A),e.createElement(Ze.Z,{"aria-label":A,value:Ot,native:Ge,disabled:Ke,"data-testid":"select",displayEmpty:!0,multiple:a,margin:wt,onChange:Fn,onClick:Qn,open:fn,input:e.createElement(ls,null),label:A,tabIndex:0,renderValue:zn=>{var sr;return a&&Ot.length!==0?e.createElement("div",{className:gt.chips},zn.map(qn=>{var Kr,Fr;return e.createElement(Je.Z,{key:(Kr=C.find(Dr=>Dr.value===qn))==null?void 0:Kr.value,label:(Fr=C.find(Dr=>Dr.value===qn))==null?void 0:Fr.label,clickable:!0,onDelete:or(qn),className:gt.chip})})):e.createElement(N.Z,null,Ot.length===0?k||"":(sr=C.find(qn=>qn.value===zn))==null?void 0:sr.label)},IconComponent:()=>fn?e.createElement(is,null):e.createElement(os,null),MenuProps:{anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},getContentAnchorEl:null}},k&&!a&&e.createElement(ke.Z,{value:[]},k),Ge?C&&C.map(zn=>e.createElement("option",{value:zn.value,key:zn.value},zn.label)):C&&C.map(zn=>e.createElement(ke.Z,{key:zn.value,value:zn.value},a&&e.createElement(De.Z,{color:"primary",checked:Ot.includes(zn.value)||!1,className:gt.checkbox}),zn.label))))))}const _a=()=>{},Na=e.createContext({stepperLength:0,stepIndex:0,setStepIndex:_a,stepHistory:[],setStepHistory:_a,onStepChange:_a});function Wl(n){const{children:a,elevated:C,onStepChange:A,activeStep:k=0}=n,[V,ue]=useState(k),[$e,Ge]=useState([0]);useEffect(()=>{ue(k)},[k]);const Ke=[];let wt;return Children.forEach(a,gt=>{isValidElement(gt)&&(gt.props.end?wt=gt:Ke.push(gt))}),React.createElement(React.Fragment,null,React.createElement(Na.Provider,{value:{stepIndex:V,setStepIndex:ue,stepHistory:$e,setStepHistory:Ge,onStepChange:A,stepperLength:Children.count(a)}},React.createElement(MuiStepper,{activeStep:V,orientation:"vertical",elevation:C?2:0},Ke)),V>=Children.count(a)-1&&wt)}const us=(0,h.Z)(n=>({root:{marginTop:n.spacing(3),"& button":{marginRight:n.spacing(1)}}}),{name:"BackstageSimpleStepperFooter"}),ds=({text:n,handleClick:a})=>React.createElement(Button$1,{onClick:a},n||"Reset"),ms=({text:n,handleClick:a,disabled:C,last:A,stepIndex:k})=>React.createElement(Button$1,{variant:"contained",color:"primary",disabled:C,"data-testid":`nextButton-${k}`,onClick:a},n||(A?"Finish":"Next")),fs=({text:n,handleClick:a,disabled:C,stepIndex:A})=>React.createElement(Button$1,{onClick:a,"data-testid":`backButton-${A}`,disabled:C},n||"Back"),Wa=({actions:n={},children:a})=>{const C=us(),{stepperLength:A,stepIndex:k,setStepIndex:V,stepHistory:ue,setStepHistory:$e,onStepChange:Ge}=useContext(Na),Ke=(jt,fn)=>{fn&&fn(),Ge&&Ge(k,jt),V(jt)},wt=()=>{const jt=n.nextStep?n.nextStep(k,A-1):k+1;Ke(jt,n.onNext),$e([...ue,jt])},gt=()=>{ue.pop(),Ke(ue[ue.length-1],n.onBack),$e([...ue])},Ot=()=>{Ke(0,n.onRestart),$e([0])};return React.createElement("div",{className:C.root},[void 0,!0].includes(n.showBack)&&k!==0&&React.createElement(fs,{text:n.backText,handleClick:gt,disabled:k===0,stepIndex:k}),[void 0,!0].includes(n.showNext)&&React.createElement(ms,{text:n.nextText,handleClick:wt,disabled:!!A&&k>=A||!!n.canNext&&!n.canNext(),stepIndex:k}),n.showRestart&&k!==0&&React.createElement(ds,{text:n.restartText,handleClick:Ot,stepIndex:k}),a)},ps=(0,h.Z)(n=>({end:{padding:n.spacing(3)}}),{name:"SimpleStepperStep"});function Kl(n){const{title:a,children:C,end:A,actions:k,...V}=n,ue=ps();return A?React.createElement("div",{className:ue.end},React.createElement(Typography,{variant:"h6"},a),C,React.createElement(Wa,{actions:{...k||{},showNext:!1}})):React.createElement(MuiStep,{...V},React.createElement(StepLabel,null,React.createElement(Typography,{variant:"h6"},a)),React.createElement(StepContent,null,C,React.createElement(Wa,{actions:k})))}const ea=(0,h.Z)(n=>({status:{fontWeight:500,"&::before":{width:"0.7em",height:"0.7em",display:"inline-block",marginRight:8,borderRadius:"50%",content:'""'}},ok:{"&::before":{backgroundColor:n.palette.status.ok}},warning:{"&::before":{backgroundColor:n.palette.status.warning}},error:{"&::before":{backgroundColor:n.palette.status.error}},pending:{"&::before":{backgroundColor:n.palette.status.pending}},running:{"&::before":{backgroundColor:n.palette.status.running}},aborted:{"&::before":{backgroundColor:n.palette.status.aborted}}}),{name:"BackstageStatus"});function hs(n){const a=ea(n);return e.createElement("span",{className:$()(a.status,a.ok),"aria-label":"Status ok","aria-hidden":"true",...n})}function gs(n){const a=ea(n);return e.createElement("span",{className:$()(a.status,a.warning),"aria-label":"Status warning","aria-hidden":"true",...n})}function Es(n){const a=ea(n);return e.createElement("span",{className:$()(a.status,a.error),"aria-label":"Status error","aria-hidden":"true",...n})}function vs(n){const a=ea(n);return e.createElement("span",{className:$()(a.status,a.pending),"aria-label":"Status pending","aria-hidden":"true",...n})}function ys(n){const a=ea(n);return e.createElement("span",{className:$()(a.status,a.running),"aria-label":"Status running","aria-hidden":"true",...n})}function _s(n){const a=ea(n);return e.createElement("span",{className:$()(a.status,a.aborted),"aria-label":"Status aborted","aria-hidden":"true",...n})}const bs=n=>(0,R.Z)({root:{fontWeight:"bolder",whiteSpace:"nowrap",paddingRight:n.spacing(4),border:"0",verticalAlign:"top"}}),Cs={root:{border:"0",verticalAlign:"top"}},Ps=n=>(0,R.Z)({root:{listStyle:"none",margin:n.spacing(0,0,-1,0),padding:"0"}}),Ss=n=>(0,R.Z)({root:{padding:n.spacing(0,0,1,0)},random:{}}),Rs=(0,K.Z)(bs,{name:"BackstageMetadataTableTitleCell"})(It.Z),Os=(0,K.Z)(Cs,{name:"BackstageMetadataTableCell"})(It.Z),ws=({dense:n,children:a})=>e.createElement(zt.Z,{size:n?"small":"medium"},e.createElement(Tt.Z,null,a)),As=({title:n,children:a,...C})=>e.createElement(Ut.Z,null,n&&e.createElement(Rs,null,n),e.createElement(Os,{colSpan:n?1:2,...C},a)),Ka=(0,K.Z)(Ps,{name:"BackstageMetadataTableList"})(({classes:n,children:a})=>e.createElement("ul",{className:n.root},a)),Fa=(0,K.Z)(Ss,{name:"BackstageMetadataTableListItem"})(({classes:n,children:a})=>e.createElement("li",{className:n.root},a)),za=(0,R.Z)({root:{margin:"0 0",listStyleType:"none"}}),Is=n=>(0,R.Z)({root:{...za.root,paddingLeft:n.spacing(1)}}),ja=(0,K.Z)(za,{name:"BackstageStructuredMetadataTableList"})(({classes:n,children:a})=>e.createElement(Ka,{classes:n},a)),Va=(0,K.Z)(Is,{name:"BackstageStructuredMetadataTableNestedList"})(({classes:n,children:a})=>e.createElement(Ka,{classes:n},a));function Ts(n,a){const C=n.map((A,k)=>e.createElement(Fa,{key:k},ba(A)));return a?e.createElement(Va,null,C):e.createElement(ja,null,C)}function Ds(n,a,C){const A=Object.keys(n).map(k=>{const V=ba(n[k],!0),ue=C&&C.titleFormat?C.titleFormat(k):vt()(k);return e.createElement(Fa,{key:k},`${ue}: `,V)});return a?e.createElement(Va,null,A):e.createElement(ja,null,A)}function ba(n,a,C){return e.isValidElement(n)?e.createElement(e.Fragment,null,n):typeof n=="object"&&!Array.isArray(n)?Ds(n,a,C):Array.isArray(n)?Ts(n,C):typeof n=="boolean"?e.createElement(e.Fragment,null,n?"\u2705":"\u274C"):e.createElement(e.Fragment,null,n)}const Ms=({value:n,options:a})=>e.createElement(e.Fragment,null,ba(n,a)),$s=({title:n,value:a,options:C})=>e.createElement(As,{title:C&&C.titleFormat?C.titleFormat(n):vt()(n)},e.createElement(Ms,{value:a,options:C}));function Ls(n,a){return Object.keys(n).map(C=>e.createElement($s,{key:C,title:C,value:n[C],options:a}))}function xs(n){const{metadata:a,dense:C=!0,options:A}=n,k=Ls(a,A||{});return e.createElement(ws,{dense:C},k)}function Bs(n){return qs.stringify(n,{strictNullHandling:!0})}function Ga(n){return qs.parse(n,{ignoreQueryPrefix:!0,strictNullHandling:!0})}function Ha(n,a){return Ga(n)[a]}function Us(n,a,C){const A={...Ga(n),[a]:C};return Bs(A)}function Fl(n,a=250){const[C,A]=useSearchParams(),k=C.toString(),[V,ue]=useState(Ha(k,n));return useEffect(()=>{const $e=Ha(k,n);ue(Ge=>isEqual($e,Ge)?Ge:$e)},[k,ue,n]),useDebouncedEffect(()=>{const $e=Us(k,n,V);k!==$e&&A($e,{replace:!0})},[A,V,k,n],a),[V,ue]}const ks={url:"https://github.com/backstage/backstage/issues",items:[{title:"Support Not Configured",icon:"warning",links:[{title:"Add `app.support` config key",url:"https://github.com/backstage/backstage/blob/master/app-config.yaml"}]}]};function Ja(){const a=(0,c.I_)().get(c.Ds),C=a==null?void 0:a.getOptionalConfig("app.support");return C?{url:C.getString("url"),items:C.getConfigArray("items").flatMap(A=>{var k;return{title:A.getString("title"),icon:A.getOptionalString("icon"),links:((k=A.getOptionalConfigArray("links"))!=null?k:[]).flatMap(V=>({url:V.getString("url"),title:V.getString("title")}))}})}:ks}function Tr(n,a){const A=(0,c.qD)().getSystemIcon(n);return A?e.createElement(A,{...a}):e.createElement(en.Z,{...a})}function zl(n){return Tr("brokenImage",n)}function Zs(n){return Tr("catalog",n)}function jl(n){return Tr("chat",n)}function Vl(n){return Tr("dashboard",n)}function Ns(n){return Tr("docs",n)}function Gl(n){return Tr("email",n)}function Ws(n){return Tr("github",n)}function Hl(n){return Tr("group",n)}function la(n){return Tr("help",n)}function Ks(n){return Tr("user",n)}function Jl(n){return Tr("warning",n)}const Fs=(0,h.Z)({popoverList:{minWidth:260,maxWidth:400}},{name:"BackstageSupportButton"}),zs=({icon:n})=>{var a;const C=(0,c.qD)(),A=n&&(a=C.getSystemIcon(n))!=null?a:la;return e.createElement(A,null)},js=({link:n})=>{var a;return e.createElement(un,{to:n.url},(a=n.title)!=null?a:n.url)},Vs=({item:n})=>{var a;return e.createElement(Lt.Z,null,e.createElement(ln.Z,null,e.createElement(zs,{icon:n.icon})),e.createElement(Re.Z,{primary:n.title,secondary:(a=n.links)==null?void 0:a.reduce((C,A,k)=>[...C,k>0&&e.createElement("br",{key:k}),e.createElement(js,{link:A,key:A.url})],[])}))};function Gs(n){const{title:a,children:C}=n,{items:A}=Ja(),[k,V]=(0,e.useState)(!1),[ue,$e]=(0,e.useState)(null),Ge=Fs(),Ke=(0,Pt.Z)(Ot=>Ot.breakpoints.down("sm")),wt=Ot=>{$e(Ot.currentTarget),V(!0)},gt=()=>{V(!1)};return e.createElement(e.Fragment,null,e.createElement(Jt.Z,{display:"flex",ml:1},Ke?e.createElement(E.Z,{color:"primary",size:"small",onClick:wt,"data-testid":"support-button"},e.createElement(la,null)):e.createElement(D.Z,{"data-testid":"support-button","aria-label":"support",color:"primary",onClick:wt,startIcon:e.createElement(la,null)},"Support")),e.createElement(mn.ZP,{"data-testid":"support-button-popover",open:k,anchorEl:ue,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},onClose:gt},e.createElement(Bt.Z,{className:Ge.popoverList},a&&e.createElement(Lt.Z,{alignItems:"flex-start"},e.createElement(N.Z,{variant:"subtitle1"},a)),e.Children.map(C,(Ot,jt)=>e.createElement(Lt.Z,{alignItems:"flex-start",key:`child-${jt}`},Ot)),A&&A.map((Ot,jt)=>e.createElement(Vs,{item:Ot,key:`item-${jt}`}))),e.createElement(ne.Z,null,e.createElement(D.Z,{color:"primary",onClick:gt},"Close"))))}const ca=72,Ya=24,Xa=18,Ur={drawerWidthClosed:ca,drawerWidthOpen:224,defaultOpenDelayMs:100,defaultCloseDelayMs:0,defaultFadeDuration:200,logoHeight:32,iconContainerWidth:ca,iconSize:ca-Ya*2,iconPadding:Ya,selectedIndicatorWidth:3,userBadgePadding:Xa,userBadgeDiameter:ca-Xa*2,mobileSidebarHeight:56},Hs=n=>({...Ur,...n,iconContainerWidth:Ur.drawerWidthClosed,iconSize:Ur.drawerWidthClosed-Ur.iconPadding*2,userBadgeDiameter:Ur.drawerWidthClosed-Ur.userBadgePadding*2}),Qa={drawerWidthClosed:0,drawerWidthOpen:202,defaultOpenDelayMs:Ur.defaultOpenDelayMs+200},Js=n=>({...Qa,...n}),Ys="@backstage/core/sidebar-intro-dismissed",Or=(0,e.createContext)({sidebarConfig:Ur,submenuConfig:Qa}),Ca=(0,e.createContext)({isHoveredOn:!1,setIsHoveredOn:()=>{}}),qa={getSidebarPinState(){let n;try{n=JSON.parse(window.localStorage.getItem("sidebarPinState")||"true")}catch{return!0}return!!n},setSidebarPinState(n){return window.localStorage.setItem("sidebarPinState",JSON.stringify(n))}},eo={isPinned:!0,toggleSidebarPinState:()=>{},isMobile:!1},to=(0,e.createContext)(eo),no=(0,On.CT)("sidebar-pin-state-context");function Xs(n){const{children:a,value:C}=n;return e.createElement(to.Provider,{value:C},e.createElement(no.Provider,{value:(0,On.EI)({1:C})},a))}const na=()=>{const n=(0,e.useContext)(no),a=(0,e.useContext)(to);if(n===void 0)return a||eo;const C=n.atVersion(1);if(C===void 0)throw new Error("No context found for version 1.");return C},Qs=(0,h.Z)(n=>({root:{width:"100%",transition:"padding-left 0.1s ease-out",isolation:"isolate",[n.breakpoints.up("sm")]:{paddingLeft:a=>a.isPinned?a.sidebarConfig.drawerWidthOpen:a.sidebarConfig.drawerWidthClosed},[n.breakpoints.down("xs")]:{paddingBottom:a=>a.sidebarConfig.mobileSidebarHeight}},content:{zIndex:0,isolation:"isolate","&:focus":{outline:0}}}),{name:"BackstageSidebarPage"}),ro=(0,e.createContext)({content:{contentRef:void 0}});function ei(n){const[a,C]=(0,e.useState)(()=>qa.getSidebarPinState()),{sidebarConfig:A}=(0,e.useContext)(Or),k=(0,e.useRef)(null),V=(0,e.useMemo)(()=>({content:{contentRef:k}}),[k]);(0,e.useEffect)(()=>{qa.setSidebarPinState(a)},[a]);const ue=(0,Pt.Z)(Ke=>Ke.breakpoints.down("xs"),{noSsr:!0}),$e=()=>C(!a),Ge=Qs({isPinned:a,sidebarConfig:A});return e.createElement(Xs,{value:{isPinned:a,toggleSidebarPinState:$e,isMobile:ue}},e.createElement(ro.Provider,{value:V},e.createElement("div",{className:Ge.root},n.children)))}function Pa(){const{content:n}=(0,e.useContext)(ro);return{focusContent:(0,e.useCallback)(()=>{var C,A;(A=(C=n==null?void 0:n.contentRef)==null?void 0:C.current)==null||A.focus()},[n]),contentRef:n==null?void 0:n.contentRef}}const ao={isOpen:!1,setOpen:()=>{}},oo=(0,e.createContext)(ao),so=(0,On.CT)("sidebar-open-state-context");function io(n){const{children:a,value:C}=n;return e.createElement(oo.Provider,{value:C},e.createElement(so.Provider,{value:(0,On.EI)({1:C})},a))}const ra=()=>{const n=(0,e.useContext)(so),a=(0,e.useContext)(oo);if(n===void 0)return a||ao;const C=n.atVersion(1);if(C===void 0)throw new Error("No context found for version 1.");return C},ti=(0,h.Z)(n=>({root:{flexGrow:0,margin:n.spacing(0,2),color:n.palette.navigation.color},selected:a=>({color:`${n.palette.navigation.selectedColor}!important`,borderTop:`solid ${a.sidebarConfig.selectedIndicatorWidth}px ${n.palette.navigation.indicator}`,marginTop:"-1px"}),label:{display:"none"}})),ni=n=>{const{to:a,label:C,icon:A,value:k}=n,{sidebarConfig:V}=(0,e.useContext)(Or),ue=ti({sidebarConfig:V}),$e=(0,m.TH)(),{selectedMenuItemIndex:Ge,setSelectedMenuItemIndex:Ke}=(0,e.useContext)(co),wt=(Ot,jt)=>{Ke(jt===Ge?-1:jt)},gt=k===Ge&&Ge>=0||k!==Ge&&!(Ge>=0)&&a===$e.pathname;return e.createElement(Mn.Z,{label:C,icon:A,component:un,to:a||$e.pathname,onChange:wt,value:k,selected:gt,classes:ue})},Sa=n=>{const{children:a,to:C,label:A,icon:k,value:V}=n,{isMobile:ue}=na();return ue?e.createElement(ni,{to:C,label:A,icon:k,value:V}):e.createElement(e.Fragment,null,a)},lo=(0,h.Z)(n=>({root:{position:"fixed",backgroundColor:n.palette.navigation.background,color:n.palette.navigation.color,bottom:0,left:0,right:0,zIndex:n.zIndex.snackbar,borderTop:"1px solid #383838"},overlay:a=>({background:n.palette.navigation.background,width:"100%",bottom:`${a.sidebarConfig.mobileSidebarHeight}px`,height:`calc(100% - ${a.sidebarConfig.mobileSidebarHeight}px)`,flex:"0 1 auto",overflow:"auto"}),overlayHeader:{display:"flex",color:n.palette.text.primary,alignItems:"center",justifyContent:"space-between",padding:n.spacing(2,3)},overlayHeaderClose:{color:n.palette.text.primary},marginMobileSidebar:a=>({marginBottom:`${a.sidebarConfig.mobileSidebarHeight}px`})})),ri=n=>(0,W.orderBy)(n,({props:{priority:a}})=>Number.isInteger(a)?a:-1,"desc"),ai=e.createElement(Sa).type,oi=({children:n,label:a="Menu",open:C,onClose:A})=>{const{sidebarConfig:k}=(0,e.useContext)(Or),V=lo({sidebarConfig:k});return e.createElement(Ln.ZP,{anchor:"bottom",open:C,onClose:A,ModalProps:{BackdropProps:{classes:{root:V.marginMobileSidebar}}},classes:{root:V.marginMobileSidebar,paperAnchorBottom:V.overlay}},e.createElement(Jt.Z,{className:V.overlayHeader},e.createElement(N.Z,{variant:"h3"},a),e.createElement(E.Z,{onClick:A,classes:{root:V.overlayHeaderClose}},e.createElement(f.Z,null))),e.createElement(Jt.Z,{component:"nav"},n))},co=(0,e.createContext)({selectedMenuItemIndex:-1,setSelectedMenuItemIndex:()=>{}}),si=n=>{const{sidebarConfig:a}=(0,e.useContext)(Or),{children:C}=n,A=lo({sidebarConfig:a}),k=(0,m.TH)(),[V,ue]=(0,e.useState)(-1);(0,e.useEffect)(()=>{ue(-1)},[k.pathname]);let $e=(0,c.vJ)(C,Ke=>Ke.getElements().filter(wt=>wt.type===ai));if(C)$e.length?$e=ri($e):$e.push(e.createElement(Sa,{key:"default_menu",icon:e.createElement(Dn.Z,null)},C));else return null;const Ge=V>=0&&!$e[V].props.to;return e.createElement(io,{value:{isOpen:!0,setOpen:()=>{}}},e.createElement(co.Provider,{value:{selectedMenuItemIndex:V,setSelectedMenuItemIndex:ue}},e.createElement(oi,{label:$e[V]&&$e[V].props.label,open:Ge,onClose:()=>ue(-1)},$e[V]&&$e[V].props.children),e.createElement(In.Z,{className:A.root,"data-testid":"mobile-sidebar-root",component:"nav"},$e)))},uo=(0,h.Z)(n=>({drawer:a=>({display:"flex",flexFlow:"column nowrap",alignItems:"flex-start",position:"fixed",left:0,top:0,bottom:0,zIndex:n.zIndex.appBar,background:n.palette.navigation.background,overflowX:"hidden",msOverflowStyle:"none",scrollbarWidth:"none",width:a.sidebarConfig.drawerWidthClosed,transition:n.transitions.create("width",{easing:n.transitions.easing.sharp,duration:n.transitions.duration.shortest}),"& > *":{flexShrink:0},"&::-webkit-scrollbar":{display:"none"}}),drawerOpen:a=>({width:a.sidebarConfig.drawerWidthOpen,transition:n.transitions.create("width",{easing:n.transitions.easing.sharp,duration:n.transitions.duration.shorter})}),visuallyHidden:{top:0,position:"absolute",zIndex:1e3,transform:"translateY(-200%)","&:focus":{transform:"translateY(5px)"}}}),{name:"BackstageSidebar"}),ii=n=>{const{sidebarConfig:a}=(0,e.useContext)(Or),{openDelayMs:C=a.defaultOpenDelayMs,closeDelayMs:A=a.defaultCloseDelayMs,disableExpandOnHover:k,children:V}=n,ue=uo({sidebarConfig:a}),$e=(0,Pt.Z)(Qn=>Qn.breakpoints.down("md"),{noSsr:!0}),[Ge,Ke]=(0,e.useState)(0),wt=(0,e.useRef)(),{isPinned:gt,toggleSidebarPinState:Ot}=na(),jt=()=>{gt||k||(wt.current&&(clearTimeout(wt.current),wt.current=void 0),Ge!==2&&!$e&&(wt.current=window.setTimeout(()=>{wt.current=void 0,Ke(2)},C),Ke(1)))},fn=()=>{gt||k||(wt.current&&(clearTimeout(wt.current),wt.current=void 0),Ge===1?Ke(0):Ge===2&&(wt.current=window.setTimeout(()=>{wt.current=void 0,Ke(0)},A)))},gn=Ge===2&&!$e||gt,Fn=Qn=>{Qn?(Ke(2),Ot()):(Ke(0),Ot())};return e.createElement("nav",{style:{},"aria-label":"sidebar nav"},e.createElement(ci,null),e.createElement(io,{value:{isOpen:gn,setOpen:Fn}},e.createElement("div",{className:ue.root,"data-testid":"sidebar-root",onMouseEnter:k?()=>{}:jt,onFocus:k?()=>{}:jt,onMouseLeave:k?()=>{}:fn,onBlur:k?()=>{}:fn},e.createElement("div",{className:$()(ue.drawer,{[ue.drawerOpen]:gn})},V))))},li=n=>{var a,C;const A=Hs((a=n.sidebarOptions)!=null?a:{}),k=Js((C=n.submenuOptions)!=null?C:{}),{children:V,disableExpandOnHover:ue,openDelayMs:$e,closeDelayMs:Ge}=n,{isMobile:Ke}=na();return Ke?e.createElement(si,null,V):e.createElement(Or.Provider,{value:{sidebarConfig:A,submenuConfig:k}},e.createElement(ii,{openDelayMs:$e,closeDelayMs:Ge,disableExpandOnHover:ue},V))};function ci(){const{sidebarConfig:n}=(0,e.useContext)(Or),{focusContent:a,contentRef:C}=Pa(),A=uo({sidebarConfig:n});return C!=null&&C.current?e.createElement(D.Z,{onClick:a,variant:"contained",className:$()(A.visuallyHidden)},"Skip to content"):null}function ua(n,a){const C=new URLSearchParams(a.search).toString(),A=En().parse(C),k=new URLSearchParams(n.search).toString(),V=En().parse(k);return(0,W.isEqual)(a.pathname,n.pathname)&&(0,W.isMatch)(V,A)}const ui=(0,h.Z)(n=>({item:{height:48,width:"100%","&:hover":{background:"#6f6f6f",color:n.palette.navigation.selectedColor},display:"flex",alignItems:"center",color:n.palette.navigation.color,padding:20,cursor:"pointer",position:"relative",background:"none",border:"none"},itemContainer:{width:"100%"},selected:{background:"#6f6f6f",color:"#FFF"},label:{margin:14,marginLeft:7,fontSize:14,whiteSpace:"nowrap",overflow:"hidden","text-overflow":"ellipsis",lineHeight:1},subtitle:{fontSize:10,whiteSpace:"nowrap",overflow:"hidden","text-overflow":"ellipsis"},dropdownArrow:{position:"absolute",right:21},dropdown:{display:"flex",flexDirection:"column",alignItems:"end"},dropdownItem:{width:"100%",padding:"10px 0 10px 0","&:hover":{background:"#6f6f6f",color:n.palette.navigation.selectedColor}},textContent:{color:n.palette.navigation.color,paddingLeft:n.spacing(4),paddingRight:n.spacing(1),fontSize:"14px",whiteSpace:"nowrap",overflow:"hidden","text-overflow":"ellipsis"}}),{name:"BackstageSidebarSubmenuItem"}),di=n=>{const{title:a,subtitle:C,to:A,icon:k,dropdownItems:V}=n,ue=ui(),{setIsHoveredOn:$e}=(0,e.useContext)(Ca),Ge=()=>{$e(!1)},Ke=(0,m.WU)(A!=null?A:""),wt=(0,m.TH)();let gt=ua(wt,Ke);const[Ot,jt]=(0,e.useState)(!1),fn=()=>{jt(!Ot)};return V!==void 0?(V.some(gn=>{const Fn=(0,x.i3)(gn.to);return gt=ua(wt,Fn),gt}),e.createElement("div",{className:ue.itemContainer},e.createElement(Ee.ZP,{title:a,enterDelay:500,enterNextDelay:500},e.createElement("button",{onClick:fn,onTouchStart:gn=>gn.stopPropagation(),className:$()(ue.item,gt?ue.selected:void 0)},k&&e.createElement(k,{fontSize:"small"}),e.createElement(N.Z,{variant:"subtitle1",className:ue.label},a,e.createElement("br",null),C&&e.createElement(N.Z,{variant:"caption",className:ue.subtitle},C)),Ot?e.createElement(Rn.Z,{className:ue.dropdownArrow}):e.createElement(Zn.Z,{className:ue.dropdownArrow}))),V&&Ot&&e.createElement("div",{className:ue.dropdown},V.map((gn,Fn)=>e.createElement(Ee.ZP,{key:Fn,title:gn.title,enterDelay:500,enterNextDelay:500},e.createElement(un,{to:gn.to,underline:"none",className:ue.dropdownItem,onClick:Ge,onTouchStart:Qn=>Qn.stopPropagation()},e.createElement(N.Z,{className:ue.textContent},gn.title))))))):e.createElement("div",{className:ue.itemContainer},e.createElement(Ee.ZP,{title:a,enterDelay:500,enterNextDelay:500},e.createElement(un,{to:A,underline:"none",className:$()(ue.item,gt?ue.selected:void 0),onClick:Ge,onTouchStart:gn=>gn.stopPropagation()},k&&e.createElement(k,{fontSize:"small"}),e.createElement(N.Z,{variant:"subtitle1",className:ue.label},a,e.createElement("br",null),C&&e.createElement(N.Z,{variant:"caption",className:ue.subtitle},C)))))},mi=(0,h.Z)(n=>({root:{zIndex:1e3,position:"relative",overflow:"visible",width:n.spacing(7)+1},drawer:a=>{var C,A;return{display:"flex",flexFlow:"column nowrap",alignItems:"flex-start",position:"fixed",[n.breakpoints.up("sm")]:{marginLeft:a.left,transition:n.transitions.create("margin-left",{easing:n.transitions.easing.sharp,duration:n.transitions.duration.shortest})},top:0,bottom:0,padding:0,background:(A=(C=n.palette.navigation.submenu)==null?void 0:C.background)!=null?A:"#404040",overflowX:"hidden",msOverflowStyle:"none",scrollbarWidth:"none",cursor:"default",width:a.submenuConfig.drawerWidthClosed,transitionDelay:`${a.submenuConfig.defaultOpenDelayMs}ms`,"& > *":{flexShrink:0},"&::-webkit-scrollbar":{display:"none"}}},drawerOpen:a=>({width:a.submenuConfig.drawerWidthOpen,[n.breakpoints.down("xs")]:{width:"100%",position:"relative",paddingLeft:n.spacing(3),left:0,top:0}}),title:{fontSize:24,fontWeight:500,color:"#FFF",padding:20,[n.breakpoints.down("xs")]:{display:"none"}}}),{name:"BackstageSidebarSubmenu"}),mo=n=>{const{isOpen:a}=ra(),{sidebarConfig:C,submenuConfig:A}=(0,e.useContext)(Or),k=a?C.drawerWidthOpen:C.drawerWidthClosed,V=mi({left:k,submenuConfig:A}),{isHoveredOn:ue}=(0,e.useContext)(Ca),[$e,Ge]=(0,e.useState)(!1);return(0,e.useEffect)(()=>{Ge(ue)},[ue]),e.createElement("div",{className:$()(V.drawer,{[V.drawerOpen]:$e})},e.createElement(N.Z,{variant:"h5",className:V.title},n.title),n.children)},fi=(0,h.Z)({iconContainer:{display:"flex",position:"relative",width:"100%"},arrow1:{right:"6px",position:"absolute"}}),pi=()=>{const n=fi();return React.createElement("div",{className:n.iconContainer},React.createElement("div",{className:n.arrow1},React.createElement(ArrowBackIosIcon,{style:{fontSize:"12px"}})),React.createElement("div",null,React.createElement(ArrowBackIosIcon,{style:{fontSize:"12px"}})))},hi=(0,h.Z)({iconContainer:{display:"flex",position:"relative",width:"100%"},arrow1:{right:"6px",position:"absolute"}}),gi=()=>{const n=hi();return React.createElement("div",{className:n.iconContainer},React.createElement("div",{className:n.arrow1},React.createElement(ArrowForwardIosIcon,{style:{fontSize:"12px"}})),React.createElement("div",null,React.createElement(ArrowForwardIosIcon,{style:{fontSize:"12px"}})))},Ei=n=>(0,h.Z)(a=>{var C,A,k,V;return{root:{color:a.palette.navigation.color,display:"flex",flexFlow:"row nowrap",alignItems:"center",height:48,cursor:"pointer"},buttonItem:{background:"none",border:"none",width:"100%",margin:0,padding:0,textAlign:"inherit",font:"inherit"},closed:{width:n.drawerWidthClosed,justifyContent:"center"},open:{[a.breakpoints.up("sm")]:{width:n.drawerWidthOpen}},highlightable:{"&:hover":{background:(A=(C=a.palette.navigation.navItem)==null?void 0:C.hoverBackground)!=null?A:"#404040"}},highlighted:{background:(V=(k=a.palette.navigation.navItem)==null?void 0:k.hoverBackground)!=null?V:"#404040"},label:{fontWeight:"bold",whiteSpace:"nowrap",lineHeight:"auto",flex:"3 1 auto",width:"110px",overflow:"hidden","text-overflow":"ellipsis"},iconContainer:{boxSizing:"border-box",height:"100%",width:n.iconContainerWidth,marginRight:-a.spacing(2),display:"flex",alignItems:"center",justifyContent:"center"},searchRoot:{marginBottom:12},searchField:{color:"#b5b5b5",fontWeight:"bold",fontSize:a.typography.fontSize},searchFieldHTMLInput:{padding:a.spacing(2,0,2)},searchContainer:{width:n.drawerWidthOpen-n.iconContainerWidth},secondaryAction:{width:a.spacing(6),textAlign:"center",marginRight:a.spacing(1)},closedItemIcon:{width:"100%",justifyContent:"center"},submenuArrow:{display:"flex"},expandButton:{background:"none",border:"none",color:a.palette.navigation.color,width:"100%",cursor:"pointer",position:"relative",height:48},arrows:{position:"absolute",right:10},selected:{"&$root":{borderLeft:`solid ${n.selectedIndicatorWidth}px ${a.palette.navigation.indicator}`,color:a.palette.navigation.selectedColor},"&$closed":{width:n.drawerWidthClosed},"& $closedItemIcon":{paddingRight:n.selectedIndicatorWidth},"& $iconContainer":{marginLeft:-n.selectedIndicatorWidth}}}},{name:"BackstageSidebarItem"});function da(n){return(0,e.useMemo)(()=>Ei(n),[n])()}const vi=(n,a)=>(0,c.vJ)(n.props.children,C=>{let A=!1;return C.getElements().forEach(({props:{to:k,dropdownItems:V}})=>{if(!A){if(V!=null&&V.length){V.forEach(({to:ue})=>A=A||ua(a,(0,x.i3)(ue)));return}k&&(A=ua(a,(0,x.i3)(k)))}}),A},[a.pathname]);function fo(n){return n.to===void 0}const yi=e.createElement(mo).type,_i=e.forwardRef(function({to:a,end:C,style:A,className:k,activeStyle:V,caseSensitive:ue,activeClassName:$e="active","aria-current":Ge="page",...Ke},wt){let{pathname:gt}=(0,m.TH)(),{pathname:Ot}=(0,m.WU)(a);ue||(gt=gt.toLocaleLowerCase("en-US"),Ot=Ot.toLocaleLowerCase("en-US"));let jt=gt===Ot;!jt&&!C&&(jt=gt.startsWith(`${Ot}/`));const fn=jt?Ge:void 0;return e.createElement(I.rU,{...Ke,to:a,ref:wt,"aria-current":fn,style:{...A,...jt?V:void 0},className:$()([k,jt?$e:void 0])})}),po=(0,e.forwardRef)((n,a)=>{const{icon:C,text:A,hasNotifications:k=!1,hasSubmenu:V=!1,disableHighlight:ue=!1,onClick:$e,children:Ge,className:Ke,...wt}=n,{sidebarConfig:gt}=(0,e.useContext)(Or),Ot=da(gt),{isOpen:jt}=ra(),fn=!jt&&V?{display:"flex",marginLeft:"24px"}:{},gn=e.createElement("div",{style:fn},e.createElement(C,{fontSize:"small"}),!jt&&V?e.createElement(cr.Z,null):e.createElement(e.Fragment,null)),Fn=e.createElement($n.Z,{color:"secondary",variant:"dot",overlap:"circular",invisible:!k,className:$()({[Ot.closedItemIcon]:!jt})},gn),Qn=e.createElement(e.Fragment,null,e.createElement("div",{"data-testid":"login-button",className:Ot.iconContainer},Fn),A&&e.createElement(N.Z,{variant:"subtitle2",className:Ot.label},A),e.createElement("div",{className:Ot.secondaryAction},Ge)),ar=jt?Qn:Fn,or={onClick:$e,className:$()(Ke,Ot.root,jt?Ot.open:Ot.closed,fo(n)&&Ot.buttonItem,{[Ot.highlightable]:!ue})};return fo(n)?e.createElement("button",{"aria-label":A,...or,ref:a},ar):e.createElement(_i,{...or,activeClassName:Ot.selected,to:n.to?n.to:"",ref:a,"aria-label":A||n.to,...wt},ar)}),bi=({children:n,...a})=>{const{sidebarConfig:C}=(0,e.useContext)(Or),A=da(C),[k,V]=(0,e.useState)(!1),ue=(0,m.TH)(),$e=vi(n,ue),Ge=(0,Pt.Z)(Ot=>Ot.breakpoints.down("sm")),Ke=()=>{V(!0)},wt=()=>{V(!1)},gt=()=>Ge?k?e.createElement(Rn.Z,{fontSize:"small",className:A.submenuArrow}):e.createElement(Zn.Z,{fontSize:"small",className:A.submenuArrow}):!k&&e.createElement(cr.Z,{fontSize:"small",className:A.submenuArrow});return e.createElement(Ca.Provider,{value:{isHoveredOn:k,setIsHoveredOn:V}},e.createElement("div",{"data-testid":"item-with-submenu",onMouseLeave:wt,onTouchStart:k?wt:Ke,onMouseEnter:Ke,className:$()(k&&A.highlighted)},e.createElement(po,{hasSubmenu:!0,className:$e?A.selected:"",...a},gt()),k&&n))},ho=(0,e.forwardRef)((n,a)=>{const[C]=(0,c.vJ)(n.children,A=>A.getElements().filter(k=>k.type===yi));return C?e.createElement(bi,{...n},C):e.createElement(po,{...n,ref:a})});function Yl(n){const{sidebarConfig:a}=useContext(Or),[C,A]=useState(""),k=da(a),V=n.icon?n.icon:SearchIcon,ue=()=>{n.onSearch(C),A("")},$e=gt=>{gt.key==="Enter"&&(gt.preventDefault(),ue())},Ge=gt=>{A(gt.target.value)},Ke=gt=>{gt.preventDefault(),gt.stopPropagation()},wt=gt=>{ue(),gt.preventDefault()};return React.createElement("div",{className:k.searchRoot},React.createElement(ho,{icon:V,to:n.to,onClick:wt,disableHighlight:!0},React.createElement(TextField,{placeholder:"Search",value:C,onClick:Ke,onChange:Ge,onKeyDown:$e,className:k.searchContainer,InputProps:{disableUnderline:!0,className:k.searchField},inputProps:{className:k.searchFieldHTMLInput}})))}const Ci=(0,j.Z)("div")({flex:1},{name:"BackstageSidebarSpace"}),Xl=(0,j.Z)("div")({height:8},{name:"BackstageSidebarSpacer"}),go=(0,j.Z)("hr")({height:1,width:"100%",background:"#383838",border:"none",margin:"12px 0px"},{name:"BackstageSidebarDivider"}),Pi=n=>({overflowY:"auto","&::-webkit-scrollbar":{backgroundColor:n.palette.background.default,width:"5px",borderRadius:"5px"},"&::-webkit-scrollbar-thumb":{backgroundColor:n.palette.text.hint,borderRadius:"5px"}}),Si=(0,j.Z)("div")(({theme:n})=>{const a=Pi(n);return{flex:"0 1 auto",overflowX:"hidden",width:"calc(100% - 5px)",minHeight:"48px",overflowY:"hidden","@media (hover: none)":a,"&:hover":a}}),Ql=()=>{const{sidebarConfig:n}=useContext(Or),a=da(n),{isOpen:C,setOpen:A}=ra();if(useMediaQuery(ue=>ue.breakpoints.down("md"),{noSsr:!0}))return null;const V=()=>{A(!C)};return React.createElement("button",{onClick:V,className:a.expandButton,"aria-label":"Expand Sidebar","data-testid":"sidebar-expand-button"},React.createElement("div",{className:a.arrows},C?React.createElement(pi,null):React.createElement(gi,null)))},Ri=(0,h.Z)(n=>({introCard:a=>({color:"#b5b5b5",fontSize:12,width:a.sidebarConfig.drawerWidthOpen,marginTop:18,marginBottom:12,paddingLeft:a.sidebarConfig.iconPadding,paddingRight:a.sidebarConfig.iconPadding}),introDismiss:{display:"flex",justifyContent:"flex-end",alignItems:"center",marginTop:12},introDismissLink:{color:"#dddddd",display:"flex",alignItems:"center",marginBottom:4,"&:hover":{color:n.palette.linkHover,transition:n.transitions.create("color",{easing:n.transitions.easing.sharp,duration:n.transitions.duration.shortest})}},introDismissText:{fontSize:"0.7rem",fontWeight:"bold",textTransform:"uppercase",letterSpacing:1},introDismissIcon:{width:18,height:18,marginRight:12}}),{name:"BackstageSidebarIntro"});function Oi(n){const{sidebarConfig:a}=useContext(Or),C=Ri({sidebarConfig:a}),{text:A,onClose:k}=n,V=()=>k();return React.createElement("div",{className:C.introCard},React.createElement(Typography,{variant:"subtitle2"},A),React.createElement("div",{className:C.introDismiss},React.createElement(Link$1,{component:"button",onClick:V,underline:"none",className:C.introDismissLink},React.createElement(CloseIcon,{className:C.introDismissIcon}),React.createElement(Typography,{component:"span",className:C.introDismissText},"Dismiss"))))}const Eo=n=>{const{text:a,onDismiss:C}=n,[A,k]=useState(!1),V=()=>{k(!0)};return React.createElement(Collapse,{in:!A,onExited:C},React.createElement(Oi,{text:a,onClose:V}))},wi=null,Ai="And your recently viewed plugins will pop up here!";function ql(n){const{isOpen:a}=ra(),C={starredItemsDismissed:!1,recentlyViewedItemsDismissed:!1},[A,k]=useLocalStorageValue(Ys),{starredItemsDismissed:V,recentlyViewedItemsDismissed:ue}=A!=null?A:{},$e=()=>{k(Ke=>({...C,...Ke,starredItemsDismissed:!0}))},Ge=()=>{k(Ke=>({...C,...Ke,recentlyViewedItemsDismissed:!0}))};return a?React.createElement(React.Fragment,null,!V&&React.createElement(React.Fragment,null,React.createElement(Eo,{text:wi,onDismiss:$e}),React.createElement(go,null)),!ue&&React.createElement(Eo,{text:Ai,onDismiss:Ge})):null}const Ii=(0,h.Z)(n=>({root:{gridArea:"pageContent",minWidth:0,paddingTop:n.spacing(3),paddingBottom:n.spacing(3),paddingLeft:n.spacing(2),paddingRight:n.spacing(2),[n.breakpoints.up("sm")]:{paddingLeft:n.spacing(3),paddingRight:n.spacing(3)}},stretch:{display:"flex",flexDirection:"column",flexGrow:1},noPadding:{padding:0}}),{name:"BackstageContent"});function ma(n){const{className:a,stretch:C,noPadding:A,children:k,...V}=n,{contentRef:ue}=Pa(),$e=Ii();return e.createElement("article",{ref:ue,tabIndex:-1,...V,className:$()($e.root,a,{[$e.stretch]:C,[$e.noPadding]:A})},k)}const Ti=(0,h.Z)(n=>({tabsWrapper:{gridArea:"pageSubheader",backgroundColor:n.palette.background.paper,paddingLeft:n.spacing(3),minWidth:0},defaultTab:{padding:n.spacing(3,3),...n.typography.caption,textTransform:"uppercase",fontWeight:"bold",color:n.palette.text.secondary},selected:{color:n.palette.text.primary},tabRoot:{"&:hover":{backgroundColor:n.palette.background.default,color:n.palette.text.primary}}}),{name:"BackstageHeaderTabs"});function vo(n){const{tabs:a,onChange:C,selectedIndex:A}=n,[k,V]=(0,e.useState)(A!=null?A:0),ue=Ti(),$e=(0,e.useCallback)((Ge,Ke)=>{A===void 0&&V(Ke),C&&A!==Ke&&C(Ke)},[A,C]);return(0,e.useEffect)(()=>{A!==void 0&&V(A)},[A]),e.createElement("div",{className:ue.tabsWrapper},e.createElement(Z.Z,{selectionFollowsFocus:!0,indicatorColor:"primary",textColor:"inherit",variant:"scrollable",scrollButtons:"auto","aria-label":"scrollable auto tabs example",onChange:$e,value:k},a.map((Ge,Ke)=>e.createElement(ur.Z,{...Ge.tabProps,"data-testid":`header-tab-${Ke}`,label:Ge.label,key:Ge.id,value:Ke,className:ue.defaultTab,classes:{selected:ue.selected,root:ue.tabRoot}}))))}function Di(n){var a,C,A,k;const V=(0,m.UO)(),$e=n.map(({path:Ot,children:jt})=>({caseSensitive:!1,path:`${Ot}/*`,element:jt})).sort((Ot,jt)=>jt.path.replace(/\/\*$/,"").localeCompare(Ot.path.replace(/\/\*$/,""))),Ge=(a=(0,m.V$)($e))!=null?a:n[0].children;let Ke=(C=V["*"])!=null?C:"";Ke.startsWith("/")||(Ke=`/${Ke}`);const[wt]=(A=(0,x.fp)($e,Ke))!=null?A:[],gt=wt?n.findIndex(Ot=>`${Ot.path}/*`===wt.route.path):0;return{index:gt===-1?0:gt,element:Ge,route:(k=n[gt])!=null?k:n[0]}}function yo(n){const{routes:a}=n,C=(0,m.s0)(),{index:A,route:k,element:V}=Di(a),ue=(0,e.useMemo)(()=>a.map(Ge=>({id:Ge.path,label:Ge.title,tabProps:Ge.tabProps})),[a]),$e=Ge=>{let{path:Ke}=a[Ge];Ke=Ke.replace(/\/\*$/,""),Ke=Ke.replace(/^\//,""),C(Ke)};return e.createElement(e.Fragment,null,e.createElement(vo,{tabs:ue,selectedIndex:A,onChange:$e}),e.createElement(ma,null,e.createElement(Sn.q,{title:k.title}),V))}const Ra=()=>null;(0,c.R5)(Ra,"core.gatherMountPoints",!0);function _o(n){const a=e.createElement(Ra,{path:"",title:""},e.createElement("div",null)).type;return e.Children.toArray(n).flatMap(C=>{if(!(0,e.isValidElement)(C))return[];if(C.type===e.Fragment)return _o(C.props.children);if(C.type!==a)throw new Error("Child of TabbedLayout must be an TabbedLayout.Route");const{path:A,title:k,children:V,tabProps:ue}=C.props;return[{path:A,title:k,children:V,tabProps:ue}]})}function bo(n){const a=_o(n.children);return e.createElement(yo,{routes:a})}bo.Route=Ra;const Mi=(0,h.Z)(n=>({value:{marginBottom:"6px"},subvalue:{color:n.palette.textSubtle,fontWeight:"normal"}}),{name:"BackstageSubvalueCell"});function $i(n){const{value:a,subvalue:C}=n,A=Mi();return e.createElement(e.Fragment,null,e.createElement("div",{className:A.value},a),e.createElement("div",{className:A.subvalue},C))}const Li=(0,h.Z)(n=>({root:{height:"100%",width:"315px",display:"flex",flexDirection:"column",marginRight:n.spacing(3)},value:{fontWeight:"bold",fontSize:18},header:{display:"flex",alignItems:"center",height:"60px",justifyContent:"space-between",borderBottom:`1px solid ${n.palette.grey[500]}`},filters:{display:"flex",flexDirection:"column","& > *":{marginTop:n.spacing(2)}}}),{name:"BackstageTableFilters"}),xi=n=>{var a;const C=Li(),{onChangeFilters:A}=n,[k,V]=(0,e.useState)({...n.selectedFilters}),[ue,$e]=(0,e.useState)(!1),Ge=()=>{V({}),$e(Ke=>!Ke)};return(0,e.useEffect)(()=>{A(k)},[k,A]),e.createElement("div",{className:C.root},e.createElement("div",{className:C.header},e.createElement("div",{className:C.value},"Filters"),e.createElement(D.Z,{color:"primary",onClick:Ge},"Clear all")),e.createElement("div",{className:C.filters},((a=n.filters)==null?void 0:a.length)&&n.filters.map(Ke=>e.createElement(Za,{triggerReset:ue,key:Ke.element.label,...Ke.element,selected:k[Ke.element.label],onChange:wt=>V({...k,[Ke.element.label]:wt})}))))},Co={Add:(0,e.forwardRef)((n,a)=>e.createElement(v.Z,{...n,ref:a})),Check:(0,e.forwardRef)((n,a)=>e.createElement(u.Z,{...n,ref:a})),Clear:(0,e.forwardRef)((n,a)=>e.createElement(o.Z,{...n,ref:a})),Delete:(0,e.forwardRef)((n,a)=>e.createElement(l.Z,{...n,ref:a})),DetailPanel:(0,e.forwardRef)((n,a)=>e.createElement(Ne.Z,{...n,ref:a})),Edit:(0,e.forwardRef)((n,a)=>e.createElement(_.Z,{...n,ref:a})),Export:(0,e.forwardRef)((n,a)=>e.createElement(Le.Z,{...n,ref:a})),Filter:(0,e.forwardRef)((n,a)=>e.createElement(b.Z,{...n,ref:a})),FirstPage:(0,e.forwardRef)((n,a)=>e.createElement(L.Z,{...n,ref:a})),LastPage:(0,e.forwardRef)((n,a)=>e.createElement(re.Z,{...n,ref:a})),NextPage:(0,e.forwardRef)((n,a)=>e.createElement(Ne.Z,{...n,ref:a})),PreviousPage:(0,e.forwardRef)((n,a)=>e.createElement(Ae.Z,{...n,ref:a})),ResetSearch:(0,e.forwardRef)((n,a)=>e.createElement(o.Z,{...n,ref:a})),Search:(0,e.forwardRef)((n,a)=>e.createElement(b.Z,{...n,ref:a})),SortArrow:(0,e.forwardRef)((n,a)=>e.createElement(i.Z,{...n,ref:a})),ThirdStateCheck:(0,e.forwardRef)((n,a)=>e.createElement(Oe.Z,{...n,ref:a})),ViewColumn:(0,e.forwardRef)((n,a)=>e.createElement(tt.Z,{...n,ref:a}))};function Po(n,a){const C=a.split(".");let A=n[C[0]];for(let k=1;k<C.length;++k){if(A===void 0)return A;const V=C[k];A=A[V]}return A}const Bi=(0,K.Z)(n=>({header:{padding:n.spacing(1,2,1,2.5),borderTop:`1px solid ${n.palette.grey.A100}`,borderBottom:`1px solid ${n.palette.grey.A100}`,color:n.palette.textSubtle,fontWeight:n.typography.fontWeightBold,position:"static",wordBreak:"normal"}}),{name:"BackstageTableHeader"})(Ht.W$),So=(0,K.Z)(n=>({root:{padding:n.spacing(3,0,2.5,2.5)},title:{"& > h6":{fontWeight:"bold"}},searchField:{paddingRight:n.spacing(2)}}),{name:"BackstageTableToolbar"})(Ht.UW),Ui=(0,h.Z)(()=>({root:{display:"flex",alignItems:"center",justifyContent:"space-between"},title:{fontWeight:"bold",fontSize:18,whiteSpace:"nowrap"}}),{name:"BackstageTableFiltersContainer"}),ki=(0,h.Z)(()=>({root:{display:"flex",alignItems:"start"}}),{name:"BackstageTable"});function Zi(n,a){return n.map(C=>{const A={};let k=C.cellStyle||{};if(C.highlight)if(A.color=a.palette.textContrast,typeof k=="object")k.fontWeight=a.typography.fontWeightBold;else{const V=k;k=(ue,$e,Ge)=>({...V(ue,$e,Ge),fontWeight:a.typography.fontWeightBold})}return{...C,headerStyle:A,cellStyle:k}})}function Ni(n,a){return(0,W.transform)(n,(C,A,k)=>{(0,W.isEqual)(A,a[k])||(C[k]=A)})}const Ro={search:"",filtersOpen:!1,filters:{}};function Wi(n){const{toolbarRef:a,setSearch:C,hasFilters:A,selectedFiltersLength:k,toggleFilters:V}=n,ue=Ui(),$e=(0,e.useCallback)(Ge=>{n.onSearchChanged(Ge),C(Ge)},[n,C]);return A?e.createElement("div",{className:ue.root},e.createElement("div",{className:ue.root},e.createElement(E.Z,{onClick:V,"aria-label":"filter list"},e.createElement(b.Z,null)),e.createElement(N.Z,{className:ue.title},"Filters (",k,")")),e.createElement(So,{...n,ref:a,onSearchChanged:$e})):e.createElement(So,{...n,ref:a,onSearchChanged:$e})}function Oo(n){const{data:a,columns:C,options:A,title:k,subtitle:V,filters:ue,initialState:$e,emptyContent:Ge,onStateChange:Ke,components:wt,...gt}=n,Ot=ki(),jt=(0,M.Z)(),fn={...Ro,...$e},[gn,Fn]=(0,e.useState)(fn.filtersOpen),Qn=(0,e.useCallback)(()=>Fn(vr=>!vr),[Fn]),[ar,or]=(0,e.useState)(0),[zn,sr]=(0,e.useState)(a),[qn,Kr]=(0,e.useState)(fn.filters),Fr=Zi(C,jt),[Dr,jr]=(0,e.useState)(fn.search);(0,e.useEffect)(()=>{if(Ke){const vr=Ni({search:Dr,filtersOpen:gn,filters:qn},Ro);Ke(vr)}},[Dr,gn,qn,Ke]);const aa={headerStyle:{textTransform:"uppercase"}},oa=(0,e.useCallback)(vr=>{var kr;return(kr=C.find(Hr=>Hr.title===vr))==null?void 0:kr.field},[C]);(0,e.useEffect)(()=>{if(typeof a=="function")return;if(!qn){sr(a);return}const vr=Object.values(qn);if(a&&vr.flat().length){const kr=a.filter(Hr=>!!Object.entries(qn).filter(([,Mr])=>!!Mr.length).every(([Mr,dr])=>{const Rr=Po(Hr,oa(Mr));return Array.isArray(Rr)&&Array.isArray(dr)?Rr.some(Jr=>dr.includes(Jr)):Array.isArray(Rr)?Rr.includes(dr):Array.isArray(dr)?dr.includes(Rr):Rr===dr}));sr(kr)}else sr(a);or(vr.flat().length)},[a,qn,oa]);const nr=(vr,kr)=>{const Hr=dr=>{const Rr=new Set,Jr=$r=>{$r!=null&&Rr.add($r)};return kr&&kr.forEach($r=>{const sa=Po($r,oa(dr));Array.isArray(sa)?sa.forEach(Jr):Jr(sa)}),Rr},Mr=dr=>({placeholder:"All results",label:dr.column,multiple:dr.type==="multiple-select",items:[...Hr(dr.column)].sort().map(Rr=>({label:Rr,value:Rr}))});return vr.map(dr=>({type:dr.type,element:Mr(dr)}))},Vr=!!(ue!=null&&ue.length),Da=(0,e.useCallback)(vr=>e.createElement(Wi,{setSearch:jr,hasFilters:Vr,selectedFiltersLength:ar,toggleFilters:Qn,...vr}),[Qn,Vr,ar,jr]),Gr=typeof a!="function"&&a.length===0,Ea=C.length,Ma=(0,e.useCallback)(vr=>Ge&&Gr?e.createElement("tbody",null,e.createElement("tr",null,e.createElement("td",{colSpan:Ea},Ge))):e.createElement(Ht.os,{...vr}),[Gr,Ge,Ea]);return e.createElement("div",{className:Ot.root},gn&&a&&typeof a!="function"&&(ue==null?void 0:ue.length)&&e.createElement(xi,{filters:nr(ue,a),selectedFilters:qn,onChangeFilters:Kr}),e.createElement(Ht.ZP,{components:{Header:Bi,Toolbar:Da,Body:Ma,...wt},options:{...aa,...A},columns:Fr,icons:Co,title:e.createElement(e.Fragment,null,e.createElement(N.Z,{variant:"h5",component:"h2"},k),V&&e.createElement(N.Z,{color:"textSecondary",variant:"body1"},V)),data:typeof a=="function"?a:zn,style:{width:"100%"},localization:{toolbar:{searchPlaceholder:"Filter"}},...gt}))}Oo.icons=Object.freeze(Co);function Ki(n,a){if(a<=0)return[n];const C=[];for(let A=0;A<n.length;A+=a)C.push(n.slice(A,A+a));return C}const wo=n=>{const{children:a,value:C,index:A,...k}=n;return React.createElement("div",{role:"tabpanel",hidden:C!==A,"aria-labelledby":`scrollable-auto-tab-${A}`,...k},C===A&&React.createElement(Box,{p:3},a))},Fi=(0,h.Z)(()=>({root:{color:"#6E6E6E",overflow:"visible",fontSize:"1.5rem",textAlign:"center",borderRadius:"50%",backgroundColor:"#E6E6E6",marginLeft:n=>n.isNext?"auto":"0",marginRight:n=>n.isNext?"0":"10px","&:hover":{backgroundColor:"#E6E6E6",opacity:"1"}}}),{name:"BackstageTabIcon"}),Ao=n=>{const a=Fi(n),{ariaLabel:C,onClick:A}=n;return React.createElement(IconButton,{onClick:A,className:a.root,size:"small",disableRipple:!0,disableFocusRipple:!0,"aria-label":C},n.children)},zi=(n,a)=>a?n?"20px":"0":"40px",ji=(0,h.Z)(n=>({root:{textTransform:"none",height:"64px",fontWeight:n.typography.fontWeightBold,fontSize:n.typography.pxToRem(13),color:n.palette.textSubtle,marginLeft:a=>zi(a.isFirstNav,a.isFirstIndex),width:"130px",minWidth:"130px","&:hover":{outline:"none",backgroundColor:"transparent",color:n.palette.textSubtle}}}),{name:"BackstageTab"}),Vi=n=>{const a=ji(n),{isFirstNav:C,isFirstIndex:A,...k}=n;return React.createElement(Tab,{classes:a,disableRipple:!0,...k})},Gi=(0,h.Z)(n=>({indicator:{display:"flex",justifyContent:"center",backgroundColor:n.palette.tabbar.indicator,height:"4px"},flexContainer:{alignItems:"center"},root:{"&:last-child":{marginLeft:"auto"}}}),{name:"BackstageTabBar"}),Hi=n=>{const a=Gi(n);return React.createElement(Tabs$1,{classes:a,...n,TabIndicatorProps:{children:React.createElement("span",null)}})},Ji=(0,h.Z)(n=>({root:{flexGrow:1,width:"100%"},styledTabs:{backgroundColor:n.palette.background.paper},appbar:{boxShadow:"none",backgroundColor:n.palette.background.paper,paddingLeft:"10px",paddingRight:"10px"}}),{name:"BackstageTabs"});function ec(n){const{tabs:a}=n,C=Ji(),[A,k]=useState([0,0]),[V,ue]=useState(0),[$e,Ge]=useState(0),[Ke,wt]=useState([[]]),gt=useRef(),{width:Ot}=useWindowSize(),jt=(ar,or)=>{k([V,or])},fn=()=>{ue(V-1)},gn=()=>{ue(V+1)},Fn=()=>V+1<Ke.length;useEffect(()=>{const or=V===0?1:2,zn=gt.current.offsetWidth-20-or*30,sr=A[0]*$e+A[1],qn=Math.floor(zn/170);Ge(qn),wt(Ki(a,qn)),k([Math.floor(sr/qn),sr%qn])},[Ot,a]);const Qn=V===A[0]?A[1]:!1;return React.createElement("div",{className:C.root},React.createElement(AppBar,{ref:gt,className:C.appbar,position:"static"},React.createElement("div",null,React.createElement(Hi,{value:Qn,onChange:jt,selectionFollowsFocus:!0},V!==0&&React.createElement(Ao,{onClick:fn,ariaLabel:"navigate-before"},React.createElement(NavigateBeforeIcon,null)),Ke[V].map((ar,or)=>React.createElement(Vi,{value:or,isFirstIndex:or===0,isFirstNav:V===0,key:or,icon:ar.icon||void 0,label:ar.label||void 0})),Fn()&&React.createElement(Ao,{isNext:!0,onClick:gn,ariaLabel:"navigate-next"},React.createElement(NavigateNextIcon,null))))),Qn!==!1?Ke[V].map((ar,or)=>React.createElement(wo,{key:or,value:or,index:Qn},ar.content)):React.createElement(wo,{key:"panel_outside_chunked_array",value:A[1],index:A[1]},Ke[A[0]][A[1]].content))}function Yi(n,a){const C=n[n.length-1];if(!!C)return C>=.9?a.palette.status.ok:C>=.5?a.palette.status.warning:a.palette.status.error}function tc(n){var a;const C=useTheme();return n.data?React.createElement(Sparklines,{width:120,height:30,min:0,max:1,...n},n.title&&React.createElement("title",null,n.title),React.createElement(SparklinesLine,{color:(a=n.color)!=null?a:Yi(n.data,C)})):null}const Xi=n=>(0,h.Z)(a=>({container:{width:"100%",display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"flex-end",alignItems:"center",marginBottom:a.spacing(2),textAlign:n.textAlign},leftItemsBox:{flex:"1 1 auto",minWidth:0,overflow:"visible"},rightItemsBox:{flex:"0 1 auto",display:"flex",flexDirection:"row",flexWrap:"wrap",alignItems:"center",marginLeft:a.spacing(1),minWidth:0,overflow:"visible"},description:{},title:{display:"inline-flex",marginBottom:0}}),{name:"BackstageContentHeader"}),Qi=({title:n="Unknown page",className:a})=>e.createElement(N.Z,{variant:"h4",component:"h2",className:a,"data-testid":"header-title"},n);function Io(n){const{description:a,title:C,titleComponent:A=void 0,children:k,textAlign:V="left"}=n,ue=Xi({textAlign:V})(),$e=A||e.createElement(Qi,{title:C,className:ue.title});return e.createElement(e.Fragment,null,e.createElement(Sn.q,{title:C}),e.createElement("div",{className:ue.container},e.createElement("div",{className:ue.leftItemsBox},$e,a&&e.createElement(N.Z,{className:ue.description,variant:"body2"},a)),e.createElement("div",{className:ue.rightItemsBox},k)))}const qi=(0,h.Z)(n=>({micDrop:{maxWidth:"60%",bottom:n.spacing(2),right:n.spacing(2),[n.breakpoints.down("xs")]:{maxWidth:"96%",bottom:"unset",right:"unset",margin:`${n.spacing(10)}px auto ${n.spacing(4)}px`}}}),{name:"BackstageErrorPageMicDrop"}),el=()=>{const n=qi();return e.createElement("img",{src:tn,className:n.micDrop,alt:"Girl dropping mic from her hands"})},tl=(0,h.Z)(n=>({container:{padding:n.spacing(8),[n.breakpoints.down("xs")]:{padding:n.spacing(2)}},title:{paddingBottom:n.spacing(5),[n.breakpoints.down("xs")]:{paddingBottom:n.spacing(4),fontSize:32}},subtitle:{color:n.palette.textSubtle}}),{name:"BackstageErrorPage"});function nl(n){const{status:a,statusMessage:C,additionalInfo:A,supportUrl:k}=n,V=tl(),ue=(0,m.s0)(),$e=Ja();return e.createElement(F.Z,{container:!0,spacing:0,className:V.container},e.createElement(F.Z,{item:!0,xs:12,sm:8,md:4},e.createElement(N.Z,{"data-testid":"error",variant:"body1",className:V.subtitle},"ERROR ",a,": ",C),e.createElement(N.Z,{variant:"body1",className:V.subtitle},A),e.createElement(N.Z,{variant:"h2",className:V.title},"Looks like someone dropped the mic!"),e.createElement(N.Z,{variant:"h6"},e.createElement(un,{to:"#","data-testid":"go-back-link",onClick:()=>ue(-1)},"Go back"),"... or please"," ",e.createElement(un,{to:k||$e.url},"contact support")," if you think this is a bug.")),e.createElement(el,null))}const rl=(0,K.Z)({root:{textDecoration:"underline",cursor:"pointer"}},{name:"BackstageBreadcrumbsClickableText"})(N.Z),Oa=(0,K.Z)({root:{textDecoration:"underline",color:"inherit"}},{name:"BackstageBreadcrumbsStyledBox"})(Jt.Z);function To(n){const{children:a,...C}=n,[A,k]=e.useState(null),V=e.Children.toArray(a),[ue,$e,...Ge]=V,Ke=Ge.length?Ge.pop():V[V.length-1],wt=V.length>3,gt=fn=>{k(fn.currentTarget)},Ot=()=>{k(null)},jt=Boolean(A);return e.createElement(e.Fragment,null,e.createElement(Vt.Z,{"aria-label":"breadcrumb",...C},V.length>1&&e.createElement(Oa,{clone:!0},ue),V.length>2&&e.createElement(Oa,{clone:!0},$e),wt&&e.createElement(rl,{onClick:gt},"..."),e.createElement(Jt.Z,{style:{fontStyle:"italic"}},Ke)),e.createElement(mn.ZP,{open:jt,anchorEl:A,onClose:Ot,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"}},e.createElement(Bt.Z,null,Ge.map((fn,gn)=>e.createElement(Lt.Z,{key:gn,button:!0},e.createElement(Oa,{clone:!0},fn))))))}const al=(0,h.Z)(n=>({header:{gridArea:"pageHeader",padding:n.spacing(3),width:"100%",boxShadow:n.shadows[4],position:"relative",zIndex:100,display:"flex",flexDirection:"row",alignItems:"center",backgroundImage:n.page.backgroundImage,backgroundPosition:"center",backgroundSize:"cover",[n.breakpoints.down("sm")]:{flexWrap:"wrap"}},leftItemsBox:{maxWidth:"100%",flexGrow:1},rightItemsBox:{width:"auto",alignItems:"center"},title:{color:n.page.fontColor,wordBreak:"break-word",fontSize:n.typography.h3.fontSize,marginBottom:0},subtitle:{color:n.page.fontColor,opacity:.8,display:"inline-block",marginTop:n.spacing(1),maxWidth:"75ch"},type:{textTransform:"uppercase",fontSize:11,opacity:.8,marginBottom:n.spacing(1),color:n.page.fontColor},breadcrumb:{color:n.page.fontColor},breadcrumbType:{fontSize:"inherit",opacity:.7,marginRight:-n.spacing(.3),marginBottom:n.spacing(.3)},breadcrumbTitle:{fontSize:"inherit",marginLeft:-n.spacing(.3),marginBottom:n.spacing(.3)}}),{name:"BackstageHeader"}),ol=({type:n,typeLink:a,classes:C,pageTitle:A})=>n?a?e.createElement(To,{className:C.breadcrumb},e.createElement(un,{to:a},n),e.createElement(N.Z,null,A)):e.createElement(N.Z,{className:C.type},n):null,sl=({pageTitle:n,classes:a,tooltip:C})=>{const A=e.createElement(N.Z,{className:a.title,variant:"h1"},n);return C?e.createElement(Ee.ZP,{title:C,placement:"top-start"},A):A},il=({classes:n,subtitle:a})=>a?typeof a!="string"?e.createElement(e.Fragment,null,a):e.createElement(N.Z,{className:n.subtitle,variant:"subtitle2",component:"span"},a):null;function fa(n){const{children:a,pageTitleOverride:C,style:A,subtitle:k,title:V,tooltip:ue,type:$e,typeLink:Ge}=n,Ke=al(),gt=(0,c.h_)(c.Ds).getOptionalString("app.title")||"Backstage",Ot=C||V,jt=V||C,fn=`${Ot} | %s | ${gt}`,gn=`${Ot} | ${gt}`;return e.createElement(e.Fragment,null,e.createElement(Sn.q,{titleTemplate:fn,defaultTitle:gn}),e.createElement("header",{style:A,className:Ke.header},e.createElement(Jt.Z,{className:Ke.leftItemsBox},e.createElement(ol,{classes:Ke,type:$e,typeLink:Ge,pageTitle:jt}),e.createElement(sl,{classes:Ke,pageTitle:jt,tooltip:ue}),e.createElement(il,{classes:Ke,subtitle:k})),e.createElement(F.Z,{container:!0,className:Ke.rightItemsBox,spacing:4},a)))}const ll=({label:n,secondaryLabel:a,icon:C,disabled:A=!1,onClick:k})=>React.createElement(React.Fragment,null,React.createElement(ListItem,{"data-testid":"header-action-item",disabled:A,button:!0,onClick:V=>{k&&k(V)}},C&&React.createElement(ListItemIcon,null,C),React.createElement(ListItemText,{primary:n,secondary:a})));function nc(n){const{actionItems:a}=n,[C,A]=React.useState(!1),k=React.useRef(null);return React.createElement(Fragment,null,React.createElement(IconButton,{onClick:()=>A(!0),"data-testid":"header-action-menu",ref:k,style:{color:"white",height:56,width:56,marginRight:-4,padding:0}},React.createElement(MoreVert,null)),React.createElement(Popover,{open:C,anchorEl:k.current,anchorOrigin:{horizontal:"right",vertical:"bottom"},transformOrigin:{horizontal:"right",vertical:"top"},onClose:()=>A(!1)},React.createElement(List,null,a.map((V,ue)=>React.createElement(ll,{key:`header-action-menu-${ue}`,...V})))))}const cl=(0,h.Z)(n=>({root:{textAlign:"left"},label:{color:n.palette.common.white,fontWeight:"bold",letterSpacing:0,fontSize:n.typography.fontSize,marginBottom:n.spacing(1)/2,lineHeight:1},value:{color:"rgba(255, 255, 255, 0.8)",fontSize:n.typography.fontSize,lineHeight:1}}),{name:"BackstageHeaderLabel"}),ul=({value:n,className:a})=>e.createElement(N.Z,{className:a},n);function Do(n){const{label:a,value:C,url:A}=n,k=cl(),V=e.createElement(ul,{className:k.value,value:C||"<Unknown>"});return e.createElement(F.Z,{item:!0},e.createElement("span",{className:k.root},e.createElement(N.Z,{className:k.label},a),A?e.createElement(un,{to:A},V):V))}const dl={hour:"2-digit",minute:"2-digit"};function Mo(n){const a=new Date,C=window.navigator.language,A=[];if(!n.has("homepage.clocks"))return A;const k=n.getConfigArray("homepage.clocks");for(const V of k)if(V.has("label")&&V.has("timezone")){let ue=V.getString("label");const $e={timeZone:V.getString("timezone"),...dl};try{new Date().toLocaleString(C,$e)}catch{console.warn(`The timezone ${$e.timeZone} is invalid. Defaulting to GMT`),$e.timeZone="GMT",ue="GMT"}const Ge=a.toLocaleTimeString(C,$e);A.push({time:Ge,label:ue})}return A}function rc(n){const a=useApi(configApiRef),C=[],[A,k]=React.useState(C);return React.useEffect(()=>{k(Mo(a));const V=setInterval(()=>{k(Mo(a))},1e3);return()=>{clearInterval(V)}},[a]),A.length!==0?React.createElement(React.Fragment,null,A.map(V=>React.createElement(Do,{label:V.label,value:V.time,key:V.label}))):null}const ml=n=>(0,R.Z)({root:{color:n.palette.common.white,padding:n.spacing(2,2,3),backgroundImage:n.getPageTheme({themeId:"card"}).backgroundImage,backgroundPosition:0,backgroundSize:"inherit"}}),fl=(0,h.Z)(ml,{name:"BackstageItemCardHeader"});function $o(n){const{title:a,subtitle:C,children:A}=n,k=fl(n);return e.createElement("div",{className:k.root},C&&e.createElement(N.Z,{variant:"subtitle2",component:"h3"},C),a&&e.createElement(N.Z,{variant:"h6",component:"h4"},a),A)}function ac(n){const{description:a,tags:C,title:A,type:k,subtitle:V,label:ue,onClick:$e,href:Ge}=n;return React.createElement(Card,null,React.createElement(CardMedia,null,React.createElement($o,{title:A,subtitle:V||k})),React.createElement(CardContent,null,C!=null&&C.length?React.createElement(Box,null,C.map((Ke,wt)=>React.createElement(Chip,{size:"small",label:Ke,key:wt}))):null,a),React.createElement(CardActions,null,!Ge&&React.createElement(An,{to:"#",onClick:$e,color:"primary"},ue),Ge&&React.createElement(An,{to:Ge,color:"primary"},ue)))}const pl=n=>(0,R.Z)({root:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(22em, 1fr))",gridAutoRows:"1fr",gridGap:n.spacing(2)}}),hl=(0,h.Z)(pl,{name:"BackstageItemCardGrid"});function gl(n){const{children:a,...C}=n,A=hl(C);return e.createElement("div",{className:A.root,...C},a)}const El=(0,h.Z)(()=>({root:({isMobile:n})=>({display:"grid",gridTemplateAreas:"'pageHeader pageHeader pageHeader' 'pageSubheader pageSubheader pageSubheader' 'pageNav pageContent pageSidebar'",gridTemplateRows:"max-content auto 1fr",gridTemplateColumns:"auto 1fr auto",height:n?"100%":"100vh",overflowY:"auto"})}),{name:"BackstagePage"});function pa(n){const{themeId:a,children:C}=n,{isMobile:A}=na(),k=El({isMobile:A});return e.createElement(ie.Z,{theme:V=>({...V,page:V.getPageTheme({themeId:a})})},e.createElement("main",{className:k.root},C))}function vl(n){const{themeId:a,children:C,...A}=n;return e.createElement(pa,{themeId:a},e.createElement(fa,{...A}),C)}const yl=qt.z.object({providerInfo:qt.z.object({}).catchall(qt.z.unknown()).optional(),profile:qt.z.object({email:qt.z.string().optional(),displayName:qt.z.string().optional(),picture:qt.z.string().optional()}),backstageIdentity:qt.z.object({token:qt.z.string(),identity:qt.z.object({type:qt.z.literal("user"),userEntityRef:qt.z.string(),ownershipEntityRefs:qt.z.array(qt.z.string())})})}),Lo={defaultTokenExpiryMillis:5*60*1e3,tokenExpiryMarginMillis:5*60*1e3};function _l(n){const a=new Date(Date.now()+Lo.defaultTokenExpiryMillis);if(!n)return a;const[C,A,k]=n.split("."),V=JSON.parse(atob(A));return typeof V.exp!="number"?a:new Date(V.exp*1e3-Lo.tokenExpiryMarginMillis)}class bl{constructor(a){this.options=a,this.abortController=new AbortController,this.state={type:"empty"}}async start(){await this.getSessionAsync()}getUserId(){const{backstageIdentity:a}=this.getSessionSync(),C=a.identity.userEntityRef,A=/^([^:/]+:)?([^:/]+\/)?([^:/]+)$/.exec(C);if(!A)throw new TypeError(`Invalid user entity reference "${C}"`);return A[3]}async getIdToken(){return(await this.getSessionAsync()).backstageIdentity.token}getProfile(){return this.getSessionSync().profile}async getProfileInfo(){return(await this.getSessionAsync()).profile}async getBackstageIdentity(){return(await this.getSessionAsync()).backstageIdentity.identity}async getCredentials(){return{token:(await this.getSessionAsync()).backstageIdentity.token}}async signOut(){this.abortController.abort()}getSessionSync(){if(this.state.type==="active")return this.state.session;if(this.state.type==="fetching"&&this.state.previous)return this.state.previous;throw new Error("No session available. Try reloading your browser page.")}async getSessionAsync(){if(this.state.type==="fetching")return this.state.promise;if(this.state.type==="active"&&new Date<this.state.expiresAt)return this.state.session;const a=this.state.type==="active"?this.state.session:void 0,C=this.fetchSession().then(A=>(this.state={type:"active",session:A,expiresAt:_l(A.backstageIdentity.token)},A),A=>{throw this.state={type:"failed",error:A},A});return this.state={type:"fetching",promise:C,previous:a},C}async fetchSession(){const a=await this.options.discoveryApi.getBaseUrl("auth"),C=await fetch(`${a}/${this.options.provider}/refresh`,{signal:this.abortController.signal,headers:{"x-requested-with":"XMLHttpRequest"},credentials:"include"});if(!C.ok)throw await ResponseError.fromResponse(C);return yl.parse(await C.json())}}const oc=n=>{const a=useApi(discoveryApiRef),[{status:C,error:A},{execute:k}]=useAsync(async()=>{const V=new bl({provider:n.provider,discoveryApi:a});await V.start(),n.onSignInSuccess(V)});return useMountEffect(k),C==="loading"?React.createElement(ia,null):A?React.createElement(yt,{title:"You do not appear to be signed in. Please try reloading the browser page.",error:A}):null};class wa{getUserId(){return"guest"}async getIdToken(){}getProfile(){return{email:"guest@example.com",displayName:"Guest"}}async getProfileInfo(){return{email:"guest@example.com",displayName:"Guest"}}async getBackstageIdentity(){const a="user:default/guest";return{type:"user",userEntityRef:a,ownershipEntityRefs:[a]}}async getCredentials(){return{}}async signOut(){}}function Cl(n){const[a,C,A]=n.split(".");return JSON.parse(atob(C))}class Aa{constructor(a){this.result=a}getUserId(){return this.result.userId}static fromResult(a){return new Aa(a)}async getIdToken(){var a,C;return(C=(a=this.result).getIdToken)==null?void 0:C.call(a)}getProfile(){return this.result.profile}async getProfileInfo(){return this.result.profile}async getBackstageIdentity(){const a=await this.getIdToken();if(!a){const k=`user:default/${this.getUserId()}`;return{type:"user",userEntityRef:k,ownershipEntityRefs:[k]}}const{sub:C,ent:A}=Cl(a);return{type:"user",userEntityRef:C,ownershipEntityRefs:A!=null?A:[]}}async getCredentials(){var a,C;return{token:await((C=(a=this.result).getIdToken)==null?void 0:C.call(a))}}async signOut(){var a,C;return(C=(a=this.result).signOut)==null?void 0:C.call(a)}}class ta{constructor(a,C,A){this.identity=a,this.authApi=C,this.profile=A}static createGuest(){return new wa}static fromLegacy(a){return Aa.fromResult(a)}static create(a){return new ta(a.identity,a.authApi,a.profile)}getUserId(){const a=this.identity.userEntityRef,C=/^([^:/]+:)?([^:/]+\/)?([^:/]+)$/.exec(a);if(!C)throw new TypeError(`Invalid user entity reference "${a}"`);return C[3]}async getIdToken(){return(await this.authApi.getBackstageIdentity()).token}getProfile(){if(!this.profile)throw new Error("The identity API does not implement synchronous profile fetching, use getProfileInfo() instead");return this.profile}async getProfileInfo(){if(this.profilePromise)return await this.profilePromise;try{return this.profilePromise=this.authApi.getProfile(),await this.profilePromise}catch(a){throw this.profilePromise=void 0,a}}async getBackstageIdentity(){return this.identity}async getCredentials(){return{token:(await this.authApi.getBackstageIdentity()).token}}async signOut(){return this.authApi.signOut()}}const Ia=(0,h.Z)({container:{padding:0,listStyle:"none"},item:{display:"flex",flexDirection:"column",width:"100%",maxWidth:"400px",margin:0,padding:0}},{name:"BackstageSignInPage"}),ha=({children:n})=>{const a=Ia();return e.createElement(F.Z,{component:"li",item:!0,classes:a},n)},Pl={Component:({config:n,onSignInSuccess:a})=>{const{apiRef:C,title:A,message:k}=n,V=(0,c.h_)(C),ue=(0,c.h_)(c.VE),$e=async()=>{try{const Ge=await V.getBackstageIdentity({instantPopup:!0});if(!Ge)throw new Error(`The ${A} provider is not configured to support sign-in`);const Ke=await V.getProfile();a(ta.create({identity:Ge.identity,profile:Ke,authApi:V}))}catch(Ge){ue.post(new He.SP("Login failed",Ge))}};return e.createElement(ha,null,e.createElement(qr,{variant:"fullHeight",title:A,actions:e.createElement(D.Z,{color:"primary",variant:"outlined",onClick:$e},"Sign In")},e.createElement(N.Z,{variant:"body1"},k)))},loader:async(n,a)=>{const C=n.get(a),A=await C.getBackstageIdentity({optional:!0});if(!A)return;const k=await C.getProfile();return ta.create({identity:A.identity,profile:k,authApi:C})}},Sl={Component:({onSignInSuccess:n})=>e.createElement(ha,null,e.createElement(qr,{title:"Guest",variant:"fullHeight",actions:e.createElement(D.Z,{color:"primary",variant:"outlined",onClick:()=>n(new wa)},"Enter")},e.createElement(N.Z,{variant:"body1"},"Enter as a Guest User.",e.createElement("br",null),"You will not have a verified identity,",e.createElement("br",null),"meaning some features might be unavailable."))),loader:async()=>new wa},Rl=/^[a-z0-9_\-]+\.[a-z0-9_\-]+\.[a-z0-9_\-]+$/i,Ol=(0,h.Z)(n=>({form:{display:"flex",flexFlow:"column nowrap"},button:{alignSelf:"center",marginTop:n.spacing(2)}}),{name:"BackstageCustomProvider"}),xo=n=>{const{ref:a,...C}=n;return{inputRef:a,...C}},wl={Component:({onSignInSuccess:n})=>{const a=Ol(),{register:C,handleSubmit:A,formState:k}=(0,xn.cI)({mode:"onChange"}),{errors:V}=k,ue=({userId:$e})=>{n(ta.fromLegacy({userId:$e,profile:{email:`${$e}@example.com`}}))};return e.createElement(ha,null,e.createElement(qr,{title:"Custom User",variant:"fullHeight"},e.createElement(N.Z,{variant:"body1"},"Enter your own User ID and credentials.",e.createElement("br",null),"This selection will not be stored."),e.createElement("form",{className:a.form,onSubmit:A(ue)},e.createElement(et.Z,null,e.createElement(Vn.Z,{...xo(C("userId",{required:!0})),label:"User ID",margin:"normal",error:Boolean(V.userId)}),V.userId&&e.createElement(_n.Z,{error:!0},V.userId.message)),e.createElement(et.Z,null,e.createElement(Vn.Z,{...xo(C("idToken",{required:!1,validate:$e=>!$e||Rl.test($e)||"Token is not a valid OpenID Connect JWT Token"})),label:"ID Token (optional)",margin:"normal",autoComplete:"off",error:Boolean(V.idToken)}),V.idToken&&e.createElement(_n.Z,{error:!0},V.idToken.message)),e.createElement(D.Z,{type:"submit",color:"primary",variant:"outlined",className:a.button,disabled:!(k!=null&&k.isDirty)||!vn()(V)},"Continue"))))},loader:async()=>{}};class Ta{constructor(a){this.config=a}static from(a){return new Ta(a)}getUserId(){if(!this.config.identityApi.getUserId)throw new Error("SignOutProxy IdentityApi.getUserId is not implemented");return this.config.identityApi.getUserId()}getIdToken(){if(!this.config.identityApi.getIdToken)throw new Error("SignOutProxy IdentityApi.getIdToken is not implemented");return this.config.identityApi.getIdToken()}getProfile(){if(!this.config.identityApi.getProfile)throw new Error("SignOutProxy IdentityApi.getProfile is not implemented");return this.config.identityApi.getProfile()}getProfileInfo(){return this.config.identityApi.getProfileInfo()}getBackstageIdentity(){return this.config.identityApi.getBackstageIdentity()}getCredentials(){return this.config.identityApi.getCredentials()}signOut(){return this.config.signOut()}}const ga="@backstage/core:SignInPage:provider",Bo={guest:Sl,custom:wl,common:Pl};function Uo(n,a){if(n in a)throw new Error(`"${n}" ID is duplicated. IDs of identity providers have to be unique.`)}function Al(n){return n.reduce((C,A)=>{if(typeof A=="string")return Uo(A,C),C[A]={components:Bo[A],id:A},C;const{id:k}=A;return Uo(k,C),C[k]={components:Bo.common,id:k,config:A},C},{})}const Il=(n,a)=>{const C=useApi(errorApiRef),A=useApiHolder(),[k,V]=useState(!0),ue=useCallback(Ge=>{a(Ta.from({identityApi:Ge,signOut:async()=>{var Ke;localStorage.removeItem(ga),await((Ke=Ge.signOut)==null?void 0:Ke.call(Ge))}}))},[a]);useLayoutEffect(()=>{var Ge;if(!k)return;const Ke=localStorage.getItem(ga);if(Ke===null){V(!1);return}const wt=n[Ke];if(!wt){V(!1);return}let gt=!1;return wt.components.loader(A,(Ge=wt.config)==null?void 0:Ge.apiRef).then(Ot=>{gt||(Ot?ue(Ot):V(!1))}).catch(Ot=>{gt||(localStorage.removeItem(ga),C.post(Ot),V(!1))}),()=>{gt=!0}},[k,C,a,A,n,ue]);const $e=useMemo(()=>Object.keys(n).map(Ge=>{const Ke=n[Ge],{Component:wt}=Ke.components,gt=Ot=>{localStorage.setItem(ga,Ke.id),ue(Ot)};return React.createElement(wt,{key:Ke.id,config:Ke.config,onSignInSuccess:gt})}),[n,ue]);return[k,$e]},Tl=({onSignInSuccess:n,providers:a=[],title:C,align:A="left"})=>{const k=useApi(configApiRef),V=Ia(),ue=Al(a),[$e,Ge]=Il(ue,n);return $e?React.createElement(ia,null):React.createElement(pa,{themeId:"home"},React.createElement(fa,{title:k.getString("app.title")}),React.createElement(ma,null,C&&React.createElement(Io,{title:C,textAlign:A}),React.createElement(Grid,{container:!0,justifyContent:A==="center"?A:"flex-start",spacing:2,component:"ul",classes:V},Ge)))},Dl=({provider:n,auto:a,onSignInSuccess:C})=>{const A=Ia(),k=useApi(n.apiRef),V=useApi(configApiRef),[ue,$e]=useState(),[Ge,Ke]=useState(!1),wt=async({checkExisting:gt,showPopup:Ot})=>{try{let jt;if(gt&&(jt=await k.getBackstageIdentity({optional:!0})),!jt&&(Ot||a)&&(Ke(!0),jt=await k.getBackstageIdentity({instantPopup:!0}),!jt))throw new Error(`The ${n.title} provider is not configured to support sign-in`);if(!jt){Ke(!0);return}const fn=await k.getProfile();C(ta.create({identity:jt.identity,authApi:k,profile:fn}))}catch(jt){$e(jt),Ke(!0)}};return useMountEffect(()=>wt({checkExisting:!0})),Ge?React.createElement(pa,{themeId:"home"},React.createElement(fa,{title:V.getString("app.title")}),React.createElement(ma,null,React.createElement(Grid,{container:!0,justifyContent:"center",spacing:2,component:"ul",classes:A},React.createElement(ha,null,React.createElement(qr,{variant:"fullHeight",title:n.title,actions:React.createElement(Button$1,{color:"primary",variant:"outlined",onClick:()=>{wt({showPopup:!0})}},"Sign In")},React.createElement(Typography,{variant:"body1"},n.message),ue&&ue.name!=="PopupRejectedError"&&React.createElement(Typography,{variant:"body1",color:"error"},ue.message)))))):React.createElement(ia,null)};function mc(n){return"provider"in n?React.createElement(Dl,{...n}):React.createElement(Tl,{...n})}const Ml=(0,h.Z)(n=>({root:{padding:n.spacing(0,2,0,2.5),minHeight:n.spacing(3)},indicator:{backgroundColor:n.palette.info.main,height:n.spacing(.3)}}),{name:"BackstageTabbedCard"}),$l=(0,K.Z)(n=>({root:{padding:n.spacing(2,2,2,2.5),display:"inline-block"},title:{fontWeight:700},subheader:{paddingTop:n.spacing(1)}}),{name:"BackstageTabbedCardBoldHeader"})(Gt.Z);function Ll(n){const{slackChannel:a,errorBoundaryProps:C,children:A,title:k,deepLink:V,value:ue,onChange:$e}=n,Ge=Ml(),[Ke,wt]=(0,e.useState)(0),gt=$e||((fn,gn)=>wt(gn));let Ot;ue?e.Children.map(A,fn=>{e.isValidElement(fn)&&(fn==null?void 0:fn.props.value)===ue&&(Ot=fn==null?void 0:fn.props.children)}):e.Children.map(A,(fn,gn)=>{e.isValidElement(fn)&&gn===Ke&&(Ot=fn==null?void 0:fn.props.children)});const jt=C||(a?{slackChannel:a}:{});return e.createElement(mt.Z,null,e.createElement(xa,{...jt},k&&e.createElement($l,{title:k}),e.createElement(Z.Z,{selectionFollowsFocus:!0,classes:Ge,value:ue||Ke,onChange:gt},A),e.createElement(ce.Z,null),e.createElement(Zt.Z,null,Ot),V&&e.createElement(La,{...V})))}const xl=(0,h.Z)(n=>({root:{minWidth:n.spacing(6),minHeight:n.spacing(3),margin:n.spacing(0,2,0,0),padding:n.spacing(.5,0,.5,0),textTransform:"none","&:hover":{opacity:1,backgroundColor:"transparent",color:n.palette.text.primary}},selected:{fontWeight:"bold"}}),{name:"BackstageCardTab"});function Bl(n){const{children:a,...C}=n,A=xl();return e.createElement(ur.Z,{disableRipple:!0,classes:A,...C})}},30705:function(Mt,g,t){t.d(g,{$4:function(){return Pt},$v:function(){return m},CL:function(){return qe},CO:function(){return me},D:function(){return w},Ds:function(){return Ee},E6:function(){return q},F4:function(){return ie},IY:function(){return be},I_:function(){return S},Kp:function(){return j},NT:function(){return N},NW:function(){return Be},Oi:function(){return Ct},P4:function(){return st},R5:function(){return nt},Rz:function(){return St},T0:function(){return M},VE:function(){return Ve},W0:function(){return Et},YO:function(){return ce},ZM:function(){return At},bq:function(){return U},fC:function(){return c},gP:function(){return at},gW:function(){return $},h_:function(){return O},hg:function(){return W},ni:function(){return z},p_:function(){return P},qD:function(){return p},rx:function(){return Ne},sM:function(){return K},tg:function(){return _t},uB:function(){return I},ux:function(){return D},vJ:function(){return Te},v_:function(){return x},x8:function(){return Re},yx:function(){return de},z$:function(){return xe}});var e=t(18473),d=t(2784),E=t(73557);const f=(0,e.CT)("analytics-context"),r=()=>{const Q=(0,d.useContext)(f);if(Q===void 0)return{routeRef:"unknown",pluginId:"root",extension:"App"};const T=Q.atVersion(1);if(T===void 0)throw new Error("No context found for version 1.");return T},c=Q=>{const{attributes:T,children:X}=Q,fe={...r(),...T},te=(0,e.EI)({1:fe});return d.createElement(f.Provider,{value:te},X)};function S(){const Q=(0,e.Vt)("api-context");if(!Q)throw new Error("API context is not available");const T=Q.atVersion(1);if(!T)throw new Error("ApiContext v1 not available");return T}function O(Q){const X=S().get(Q);if(!X)throw new Error(`No implementation available for ${Q}`);return X}function h(Q){return function(X){const ne=te=>{const ge=S(),He={};for(const it in Q)if(Q.hasOwnProperty(it)){const ht=Q[it],ve=ge.get(ht);if(!ve)throw new Error(`No implementation available for ${ht}`);He[it]=ve}return React.createElement(X,{...te,...He})},fe=X.displayName||X.name||"Component";return ne.displayName=`withApis(${fe})`,ne}}class R{constructor(T){if(this.config=T,!T.id.split(".").flatMap(ne=>ne.split("-")).every(ne=>ne.match(/^[a-z][a-z0-9]*$/)))throw new Error(`API id must only contain period separated lowercase alphanum tokens with dashes, got '${T.id}'`)}get id(){return this.config.id}get T(){throw new Error(`tried to read ApiRef.T of ${this}`)}toString(){return`apiRef{${this.config.id}}`}}function M(Q){return new R(Q)}function z(Q,T){return"id"in Q?{api:Q,deps:{},factory:()=>T}:Q}var K=(Q=>(Q.SignedIn="SignedIn",Q.SignedOut="SignedOut",Q))(K||{});const j=M({id:"core.auth.google"}),ie=M({id:"core.auth.github"}),w=M({id:"core.auth.okta"}),D=M({id:"core.auth.gitlab"}),P=M({id:"core.auth.microsoft"}),$=M({id:"core.auth.onelogin"}),U=M({id:"core.auth.bitbucket"}),I=M({id:"core.auth.atlassian"}),m=M({id:"core.alert"}),x=M({id:"core.analytics"}),W=M({id:"core.apptheme"}),Ee=M({id:"core.config"}),Be=M({id:"core.discovery"}),Ve=M({id:"core.error"});var qe=(Q=>(Q[Q.None=0]="None",Q[Q.Active=1]="Active",Q))(qe||{});const Et=M({id:"core.featureflags"}),at=M({id:"core.fetch"}),Pt=M({id:"core.identity"}),At=M({id:"core.oauthrequest"}),q=M({id:"core.storage"});class rn{constructor(T,X={routeRef:"unknown",pluginId:"root",extension:"App"}){this.analyticsApi=T,this.context=X}setContext(T){this.context=T}captureEvent(T,X,{value:ne,attributes:fe}={}){try{this.analyticsApi.captureEvent({action:T,subject:X,value:ne,attributes:fe,context:this.context})}catch(te){console.warn("Error during analytics event capture. %o",te)}}}function ct(){try{return O(x)}catch{return{captureEvent:()=>{}}}}function xe(){const Q=(0,d.useRef)(null),T=r(),X=ct();function ne(){return Q.current===null&&(Q.current=new rn(X)),Q.current}const fe=ne();return fe.setContext(T),fe}const oe="plugin-context",Ue=Q=>{const{children:T,plugin:X}=Q,{Provider:ne}=(0,e.CT)(oe);return d.createElement(ne,{value:(0,e.EI)({1:{plugin:X}})},T)};function de(){const Q=(0,e.Vt)(oe);if(!Q)throw new Error("Plugin Options context is not available");const T=Q.atVersion(1);if(!T)throw new Error("Plugin Options v1 is not available");return T.plugin.getPluginOptions()}const p=()=>{const Q=(0,e.Vt)("app-context");if(!Q)throw new Error("App context is not available");const T=Q.atVersion(1);if(!T)throw new Error("AppContext v1 not available");return T},G=(0,e.uW)("component-data-store",()=>new WeakMap),ye="__backstage_data";function nt(Q,T,X){var ne;const fe=Q;let te=(ne=fe[ye])!=null?ne:G.get(Q);if(te||(te={map:new Map},Object.defineProperty(fe,ye,{enumerable:!1,configurable:!0,writable:!1,value:te}),G.set(Q,te)),te.map.has(T)){const ge=Q.displayName||Q.name;throw new Error(`Attempted to attach duplicate data "${T}" to component "${ge}"`)}te.map.set(T,X)}function be(Q,T){var X;if(!Q)return;const ne=Q.type;if(!ne)return;const fe=(X=ne[ye])!=null?X:G.get(ne);if(!!fe)return fe.map.get(T)}const je=(0,e.uW)("route-ref-type",()=>Symbol("route-ref-type"));var ft;class F{constructor(T,X){this.id=T,this.params=X,this[ft]="absolute"}get title(){return this.id}toString(){return`routeRef{type=absolute,id=${this.id}}`}}ft=je;function N(Q){var T;return new F(Q.id,(T=Q.params)!=null?T:[])}var _e;const ze=/^\w+$/;class dt{constructor(T,X,ne,fe){this.id=T,this.path=X,this.parent=ne,this.params=fe,this[_e]="sub"}toString(){return`routeRef{type=sub,id=${this.id}}`}}_e=je;function St(Q){const{id:T,path:X,parent:ne}=Q,fe=X.split("/").filter(He=>He.startsWith(":")).map(He=>He.substring(1)),te=[...ne.params,...fe];if(ne.params.some(He=>fe.includes(He)))throw new Error("SubRouteRef may not have params that overlap with its parent");if(!X.startsWith("/"))throw new Error(`SubRouteRef path must start with '/', got '${X}'`);if(X.endsWith("/"))throw new Error(`SubRouteRef path must not end with '/', got '${X}'`);for(const He of fe)if(!ze.test(He))throw new Error(`SubRouteRef path has invalid param, got '${He}'`);return new dt(T,X,ne,te)}var Bt;class Lt{constructor(T,X,ne){this.id=T,this.params=X,this.optional=ne,this[Bt]="external"}toString(){return`routeRef{type=external,id=${this.id}}`}}Bt=je;function Re(Q){var T;return new Lt(Q.id,(T=Q.params)!=null?T:[],Boolean(Q.optional))}function _t(Q){const T=(0,E.TH)(),X=(0,e.Vt)("routing-context");if(!X)throw new Error("Routing context is not available");const ne=X.atVersion(1),fe=(0,d.useMemo)(()=>ne&&ne.resolve(Q,T),[ne,Q,T]);if(!X)throw new Error("useRouteRef used outside of routing context");if(!ne)throw new Error("RoutingContext v1 not available");const te="optional"in Q&&Q.optional;if(!fe&&!te)throw new Error(`No path for ${Q}`);return fe}function Ct(Q){return(0,E.UO)()}class Qt extends d.Component{constructor(){super(...arguments),this.state={error:void 0},this.handleErrorReset=()=>{this.setState({error:void 0})}}static getDerivedStateFromError(T){return{error:T}}render(){const{error:T}=this.state,{app:X,plugin:ne}=this.props,{ErrorBoundaryFallback:fe}=X.getComponents();return T?d.createElement(fe,{error:T,resetError:this.handleErrorReset,plugin:ne}):this.props.children}}function st(Q){const{component:T,mountPoint:X,name:ne}=Q;return ce({component:{lazy:()=>T().then(fe=>{const te=He=>{try{_t(X)}catch(it){if(typeof it=="object"&&it!==null){const{message:ht}=it;if(typeof ht=="string"&&ht.startsWith("No path for "))throw new Error(`Routable extension component with mount point ${X} was not discovered in the app element tree. Routable extension components may not be rendered by other components and must be directly available as an element within the App provider component.`)}throw it}return d.createElement(fe,{...He})},ge=ne||fe.displayName||fe.name||"LazyComponent";return te.displayName=`RoutableExtension(${ge})`,te},fe=>ge=>{const He=p(),{BootErrorPage:it}=He.getComponents();return d.createElement(it,{step:"load-chunk",error:fe})})},data:{"core.mountPoint":X},name:ne})}function me(Q){const{component:T,name:X}=Q;return ce({component:T,name:X})}function ce(Q){const{data:T={},name:X}=Q;X||console.warn("Declaring extensions without name is DEPRECATED. Make sure that all usages of createReactExtension, createComponentExtension and createRoutableExtension provide a name.");let ne;if("lazy"in Q.component){const te=Q.component.lazy;ne=(0,d.lazy)(()=>te().then(ge=>({default:ge})))}else ne=Q.component.sync;const fe=X||ne.displayName||ne.name||"Component";return{expose(te){const ge=He=>{const it=p(),{Progress:ht}=it.getComponents(),ve=T==null?void 0:T["core.mountPoint"];return d.createElement(d.Suspense,{fallback:d.createElement(ht,null)},d.createElement(Qt,{app:it,plugin:te},d.createElement(c,{attributes:{pluginId:te.getId(),...X&&{extension:X},...ve&&{routeRef:ve.id}}},d.createElement(Ue,{plugin:te},d.createElement(ne,{...He})))))};nt(ge,"core.plugin",te);for(const[He,it]of Object.entries(T))nt(ge,He,it);return ge.displayName=`Extension(${fe})`,ge}}}function we(Q,T,X,ne){return d.Children.toArray(Q).flatMap(fe=>{if(!(0,d.isValidElement)(fe))return[];if(fe.type===d.Fragment)return we(fe.props.children,T,X,ne);if(be(fe,"core.featureFlagged")){const te=fe.props;return("with"in te?T.isActive(te.with):!T.isActive(te.without))?we(fe.props.children,T,X,ne):[]}if(X===void 0||X(fe))return[fe];if(ne)throw new Error(ne);return we(fe.props.children,T,X,ne)})}class se{constructor(T,X){this.node=T,this.featureFlagsApi=X}selectByComponentData(T){const X=we(this.node,this.featureFlagsApi,ne=>be(ne,T.key)!==void 0,T.withStrictError);return new se(X,this.featureFlagsApi)}findComponentData(T){return we(this.node,this.featureFlagsApi,ne=>be(ne,T.key)!==void 0).map(ne=>be(ne,T.key)).filter(ne=>ne!==void 0)}getElements(){return we(this.node,this.featureFlagsApi)}}function Te(Q,T,X=[]){const ne=O(Et),fe=new se(Q,ne);return(0,d.useMemo)(()=>T(fe),[Q,...X])}class Ae{constructor(T){this.config=T,this.options=void 0}getId(){return this.config.id}getApis(){var T;return(T=this.config.apis)!=null?T:[]}getFeatureFlags(){var T,X;return(X=(T=this.config.featureFlags)==null?void 0:T.slice())!=null?X:[]}get routes(){var T;return(T=this.config.routes)!=null?T:{}}get externalRoutes(){var T;return(T=this.config.externalRoutes)!=null?T:{}}provide(T){return T.expose(this)}__experimentalReconfigure(T){this.config.__experimentalConfigure&&(this.options=this.config.__experimentalConfigure(T))}getPluginOptions(){var T;return this.config.__experimentalConfigure&&!this.options&&(this.options=this.config.__experimentalConfigure()),(T=this.options)!=null?T:{}}toString(){return`plugin{${this.config.id}}`}}function Ne(Q){return new Ae(Q)}},32272:function(Mt,g,t){t.d(g,{BD:function(){return f},SP:function(){return w},VL:function(){return D},VZ:function(){return E},dR:function(){return K}});var e=t(24852),d=t.n(e);function E(P){if(typeof P!="object"||P===null||Array.isArray(P))return!1;const $=P;return!(typeof $.name!="string"||$.name===""||typeof $.message!="string")}function f(P){if(typeof P!="object"||P===null||Array.isArray(P))throw new Error(`Encountered invalid error, not an object, got '${P}'`);const $=P;if(typeof $.name!="string"||$.name==="")throw new Error(`Encountered error object without a name, got '${P}'`);if(typeof $.message!="string")throw new Error(`Encountered error object without a message, got '${P}'`)}function r(P,$){const I={name:"Unknown",message:"<no reason given>",...serializeError$1(P)};return $!=null&&$.includeStack||delete I.stack,I}function c(P){const $=(0,e.deserializeError)(P);return P.stack||($.stack=void 0),$}function S(P){if(E(P)){const $=String(P);return $!=="[object Object]"?$:`${P.name}: ${P.message}`}return`unknown error '${P}'`}async function O(P){var $;try{const U=await P.text();if(U){if(($=P.headers.get("content-type"))!=null&&$.startsWith("application/json"))try{const I=JSON.parse(U);if(I.error&&I.response)return I}catch{}return{error:{name:"Error",message:`Request failed with status ${P.status} ${P.statusText}, ${U}`},response:{statusCode:P.status}}}}catch{}return{error:{name:"Error",message:`Request failed with status ${P.status} ${P.statusText}`},response:{statusCode:P.status}}}class h extends Error{constructor($,U){var I;let m=$;if(U!==void 0){const x=S(U);m?m+=`; caused by ${x}`:m=`caused by ${x}`}super(m),(I=Error.captureStackTrace)==null||I.call(Error,this,this.constructor),this.name=this.constructor.name,this.cause=E(U)?U:void 0}}class R extends null{}class M extends null{}class z extends null{}class K extends h{}class j extends null{}class ie extends null{}class w extends h{constructor($,U){super($,U),this.name=E(U)?U.name:"Error"}}class D extends Error{constructor($){super($.message),this.name="ResponseError",this.response=$.response,this.body=$.data,this.cause=$.cause}static async fromResponse($){const U=await O($),I=U.response.statusCode||$.status,m=U.error.name||$.statusText,x=`Request failed with ${I} ${m}`,W=c(U.error);return new D({message:x,response:$,data:U,cause:W})}}},49462:function(Mt,g,t){t.d(g,{Om:function(){return r},ae:function(){return P},nW:function(){return U},q3:function(){return $},zN:function(){return D}});var e=t(30705),d=t(1854),E=t(73250),f=t(2784);const r=(0,e.T0)({id:"core.scmauth"});var c=(I,m,x)=>{if(!m.has(I))throw TypeError("Cannot "+x)},S=(I,m,x)=>(c(I,m,"read from private field"),x?x.call(I):m.get(I)),O=(I,m,x)=>{if(m.has(I))throw TypeError("Cannot add the same private member more than once");m instanceof WeakSet?m.add(I):m.set(I,x)},h=(I,m,x,W)=>(c(I,m,"write to private field"),W?W.call(I,x):m.set(I,x),x),R,M,z,K,j;class ie{constructor(m){O(this,R,void 0),h(this,R,m)}async getCredentials(m){const x=new URL(m.url),W=S(this,R).find(Ee=>Ee.isUrlSupported(x));if(!W)throw new Error(`No auth provider available for '${m.url}', see https://backstage.io/link?scm-auth`);return W.getCredentials(m)}}R=new WeakMap;const w=class{constructor(I,m,x,W){O(this,M,void 0),O(this,z,void 0),O(this,K,void 0),O(this,j,void 0),h(this,M,m),h(this,z,x),h(this,K,W),h(this,j,I)}static createDefaultApiFactory(){return(0,e.ni)({api:r,deps:{github:e.F4,gitlab:e.ux,azure:e.p_,bitbucket:e.bq},factory:({github:I,gitlab:m,azure:x,bitbucket:W})=>w.merge(w.forGithub(I),w.forGitlab(m),w.forAzure(x),w.forBitbucket(W))})}static forAuthApi(I,m){return new w("generic",I,m.host,m.scopeMapping)}static forGithub(I,m){var x;const W=(x=m==null?void 0:m.host)!=null?x:"github.com";return new w("github",I,W,{default:["repo","read:org","read:user"],repoWrite:["gist"]})}static forGitlab(I,m){var x;const W=(x=m==null?void 0:m.host)!=null?x:"gitlab.com";return new w("gitlab",I,W,{default:["read_user","read_api","read_repository"],repoWrite:["write_repository","api"]})}static forAzure(I,m){var x;const W=(x=m==null?void 0:m.host)!=null?x:"dev.azure.com";return new w("azure",I,W,{default:["vso.build","vso.code","vso.graph","vso.project","vso.profile"],repoWrite:["vso.code_manage"]})}static forBitbucket(I,m){var x;const W=(x=m==null?void 0:m.host)!=null?x:"bitbucket.org";return new w("bitbucket",I,W,{default:["account","team","pullrequest","snippet","issue"],repoWrite:["pullrequest:write","snippet:write","issue:write"]})}static merge(...I){return new ie(I)}isUrlSupported(I){return I.host===S(this,z)}getAdditionalScopesForProvider(I){var m,x;return!(I!=null&&I.customScopes)||S(this,j)==="generic"?[]:(x=(m=I.customScopes)==null?void 0:m[S(this,j)])!=null?x:[]}async getCredentials(I){const{url:m,additionalScope:x,...W}=I,Ee=S(this,K).default.slice();x!=null&&x.repoWrite&&Ee.push(...S(this,K).repoWrite);const Be=this.getAdditionalScopesForProvider(x);Be.length&&Ee.push(...Be);const Ve=[...new Set(Ee)],qe=await S(this,M).getAccessToken(Ve,W);return{token:qe,headers:{Authorization:`Bearer ${qe}`}}}};let D=w;M=new WeakMap,z=new WeakMap,K=new WeakMap,j=new WeakMap;class P{static fromConfig(m){return d.Lx.fromConfig(m)}}const $=(0,e.T0)({id:"integration.scmintegrations"}),U=I=>{var m;const{type:x}=I,W=(0,e.qD)(),Ee=E.Z,Be=x&&(m=W.getSystemIcon(x))!=null?m:Ee;return f.createElement(Be,null)}},1854:function(Mt,g,t){t.d(g,{E8:function(){return ae},Lx:function(){return ur},Pb:function(){return cn},ah:function(){return Vn}});var e=t(82717),d=t.n(e),E=t(76635),f=t.n(E),r=t(96279),c=t.n(r),S=t(54733),O=t(89393),h=t(26228),R=t(48834).lW;function M(Z){const v=new URL("http://example.com");return v.host=Z,v.host===Z}function z(Z){try{return new URL(Z),!0}catch{return!1}}function K(Z,v){return{list(){return Z},byUrl(i){try{const u=typeof i=="string"?new URL(i):i;return Z.find(o=>v(o)===u.host)}catch{return}},byHost(i){return Z.find(u=>v(u)===i)}}}function j(Z){const{url:v,base:i,lineNumber:u}=Z;try{return new URL(v),v}catch{}let o;if(v.startsWith("/")){const{filepath:l}=d()(i);o=new URL(i);const _=(0,E.trimEnd)(o.pathname.substring(0,o.pathname.length-l.length),"/");o.pathname=`${_}${v}`}else o=new URL(v,i);return o.search=new URL(i).search,u&&(o.hash=`L${u}`),o.toString()}const ie="amazonaws.com";function w(Z){var v;const i=Z.getOptionalString("endpoint"),u=(v=Z.getOptionalBoolean("s3ForcePathStyle"))!=null?v:!1;let o,l;if(i){try{const Oe=new URL(i);o=Oe.host,l=Oe.pathname}catch{throw new Error(`invalid awsS3 integration config, endpoint '${i}' is not a valid URL`)}if(l!=="/")throw new Error(`invalid awsS3 integration config, endpoints cannot contain path, got '${i}'`)}else o=ie;const _=Z.getOptionalString("accessKeyId"),b=Z.getOptionalString("secretAccessKey"),L=Z.getOptionalString("roleArn"),re=Z.getOptionalString("externalId");return{host:o,endpoint:i,s3ForcePathStyle:u,accessKeyId:_,secretAccessKey:b,roleArn:L,externalId:re}}function D(Z){const v=Z.map(w);return v.some(i=>i.host===ie)||v.push({host:ie}),v}const P=class{constructor(Z){this.integrationConfig=Z}get type(){return"awsS3"}get title(){return this.integrationConfig.host}get config(){return this.integrationConfig}resolveUrl(Z){return j(Z)}resolveEditUrl(Z){return Z}};let $=P;$.factory=({config:Z})=>{var v;const i=D((v=Z.getOptionalConfigArray("integrations.awsS3"))!=null?v:[]);return K(i.map(u=>new P(u)),u=>u.config.host)};var U=(Z,v,i)=>{if(!v.has(Z))throw TypeError("Cannot "+i)},I=(Z,v,i)=>(U(Z,v,"read from private field"),i?i.call(Z):v.get(Z)),m=(Z,v,i)=>{if(v.has(Z))throw TypeError("Cannot add the same private member more than once");v instanceof WeakSet?v.add(Z):v.set(Z,i)},x=(Z,v,i,u)=>(U(Z,v,"write to private field"),u?u.call(Z,i):v.set(Z,i),i),W,Ee,Be,Ve,qe,Et,at;const Pt="GB",At=class{constructor(Z,v,i,u,o,l){m(this,W,void 0),m(this,Ee,void 0),m(this,Be,void 0),m(this,Ve,void 0),m(this,qe,void 0),m(this,Et,void 0),m(this,at,(..._)=>{const b=new URL(I(this,W));return b.pathname=_.map(L=>encodeURIComponent(L)).join("/"),b}),x(this,W,Z),x(this,Ee,v),x(this,Be,i),x(this,Ve,u),x(this,qe,o),x(this,Et,l)}static fromRepoUrl(Z){var v;const i=new URL(Z);let u,o,l;const _=i.pathname.split("/").map(Oe=>decodeURIComponent(Oe));if(_[2]==="_git"?(u=_[1],o=l=_[3]):_[3]==="_git"?(u=_[1],o=_[2],l=_[4]):_[4]==="_git"&&(u=`${_[1]}/${_[2]}`,o=_[3],l=_[5]),!u||!o||!l)throw new Error("Azure URL must point to a git repository");const b=(v=i.searchParams.get("path"))!=null?v:void 0;let L;const re=i.searchParams.get("version");if(re){if(re.slice(0,2)!=="GB")throw new Error("Azure URL version must point to a git branch");L=re.slice(2)}return new At(i.origin,u,o,l,b,L)}toRepoUrl(){let Z;return I(this,Be)===I(this,Ve)?Z=I(this,at).call(this,I(this,Ee),"_git",I(this,Ve)):Z=I(this,at).call(this,I(this,Ee),I(this,Be),"_git",I(this,Ve)),I(this,qe)&&Z.searchParams.set("path",I(this,qe)),I(this,Et)&&Z.searchParams.set("version",Pt+I(this,Et)),Z.toString()}toFileUrl(){if(!I(this,qe))throw new Error("Azure URL must point to a specific path to be able to download a file");const Z=I(this,at).call(this,I(this,Ee),I(this,Be),"_apis","git","repositories",I(this,Ve),"items");return Z.searchParams.set("api-version","6.0"),Z.searchParams.set("path",I(this,qe)),I(this,Et)&&Z.searchParams.set("version",I(this,Et)),Z.toString()}toArchiveUrl(){const Z=I(this,at).call(this,I(this,Ee),I(this,Be),"_apis","git","repositories",I(this,Ve),"items");return Z.searchParams.set("recursionLevel","full"),Z.searchParams.set("download","true"),Z.searchParams.set("api-version","6.0"),I(this,qe)&&Z.searchParams.set("scopePath",I(this,qe)),I(this,Et)&&Z.searchParams.set("version",I(this,Et)),Z.toString()}toCommitsUrl(){const Z=I(this,at).call(this,I(this,Ee),I(this,Be),"_apis","git","repositories",I(this,Ve),"commits");return Z.searchParams.set("api-version","6.0"),I(this,Et)&&Z.searchParams.set("searchCriteria.itemVersion.version",I(this,Et)),Z.toString()}getOwner(){return I(this,Ee)}getProject(){return I(this,Be)}getRepo(){return I(this,Ve)}getPath(){return I(this,qe)}getRef(){return I(this,Et)}};let q=At;W=new WeakMap,Ee=new WeakMap,Be=new WeakMap,Ve=new WeakMap,qe=new WeakMap,Et=new WeakMap,at=new WeakMap;const rn="dev.azure.com";function ct(Z){var v;const i=(v=Z.getOptionalString("host"))!=null?v:rn,u=Z.getOptionalString("token");if(!M(i))throw new Error(`Invalid Azure integration config, '${i}' is not a valid host`);return{host:i,token:u}}function xe(Z){const v=Z.map(ct);return v.some(i=>i.host===rn)||v.push({host:rn}),v}const oe=class{constructor(Z){this.integrationConfig=Z}get type(){return"azure"}get title(){return this.integrationConfig.host}get config(){return this.integrationConfig}resolveUrl(Z){var v;const{url:i,base:u}=Z;if(z(i))return i;try{const o=q.fromRepoUrl(u),l=new URL(u),_=new URL(`https://a.com${(v=o.getPath())!=null?v:""}`),b=new URL(i,_).pathname;return l.searchParams.set("path",b),Z.lineNumber&&(l.searchParams.set("line",String(Z.lineNumber)),l.searchParams.set("lineEnd",String(Z.lineNumber+1)),l.searchParams.set("lineStartColumn","1"),l.searchParams.set("lineEndColumn","1")),l.toString()}catch{return new URL(i,u).toString()}}resolveEditUrl(Z){return Z}};let Ue=oe;Ue.factory=({config:Z})=>{var v;const i=xe((v=Z.getOptionalConfigArray("integrations.azure"))!=null?v:[]);return K(i.map(u=>new oe(u)),u=>u.config.host)};function de(Z){return q.fromRepoUrl(Z).toFileUrl()}function p(Z){return q.fromRepoUrl(Z).toArchiveUrl()}function G(Z){return q.fromRepoUrl(Z).toCommitsUrl()}function ye(Z,v){const i=v?{...v}:{};if(Z.token){const u=R.from(`:${Z.token}`,"utf8");i.Authorization=`Basic ${u.toString("base64")}`}return{headers:i}}const nt="bitbucket.org",be="https://api.bitbucket.org/2.0";function je(Z){var v;const i=(v=Z.getOptionalString("host"))!=null?v:nt;let u=Z.getOptionalString("apiBaseUrl");const o=Z.getOptionalString("token"),l=Z.getOptionalString("username"),_=Z.getOptionalString("appPassword");if(!M(i))throw new Error(`Invalid Bitbucket integration config, '${i}' is not a valid host`);return u?u=(0,E.trimEnd)(u,"/"):i===nt?u=be:u=`https://${i}/rest/api/1.0`,{host:i,apiBaseUrl:u,token:o,username:l,appPassword:_}}function ft(Z){const v=Z.map(je);return v.some(i=>i.host===nt)||v.push({host:nt,apiBaseUrl:be}),v}const F=class{constructor(Z){this.integrationConfig=Z}get type(){return"bitbucket"}get title(){return this.integrationConfig.host}get config(){return this.integrationConfig}resolveUrl(Z){const v=j(Z);if(!Z.lineNumber)return v;const i=new URL(v);return this.integrationConfig.host==="bitbucket.org"?i.hash=`lines-${Z.lineNumber}`:i.hash=`${Z.lineNumber}`,i.toString()}resolveEditUrl(Z){const v=d()(Z),i=new URL(Z);return i.searchParams.set("mode","edit"),i.searchParams.set("spa","0"),i.searchParams.set("at",v.ref),i.toString()}};let N=F;N.factory=({config:Z})=>{var v,i,u;const o=ft((u=Z.getOptionalConfigArray("integrations.bitbucket"))!=null?u:[...(v=Z.getOptionalConfigArray("integrations.bitbucketCloud"))!=null?v:[],...(i=Z.getOptionalConfigArray("integrations.bitbucketServer"))!=null?i:[]]);return K(o.map(l=>new F(l)),l=>l.config.host)};async function _e(Z,v){const{name:i,owner:u,resource:o}=parseGitUrl(Z),l=o==="bitbucket.org";let _=l?`${v.apiBaseUrl}/repositories/${u}/${i}`:`${v.apiBaseUrl}/projects/${u}/repos/${i}/default-branch`,b=await fetch(_,St(v));if(b.status===404&&!l&&(_=`${v.apiBaseUrl}/projects/${u}/repos/${i}/branches/default`,b=await fetch(_,St(v))),!b.ok){const re=`Failed to retrieve default branch from ${_}, ${b.status} ${b.statusText}`;throw new Error(re)}let L;if(l)L=(await b.json()).mainbranch.name;else{const{displayId:re}=await b.json();L=re}if(!L)throw new Error(`Failed to read default branch from ${_}. Response ${b.status} ${b.json()}`);return L}async function ze(Z,v){const{name:i,owner:u,ref:o,protocol:l,resource:_,filepath:b}=parseGitUrl(Z),L=_==="bitbucket.org";let re=o;re||(re=await _e(Z,v));const Oe=b?`&path=${encodeURIComponent(decodeURIComponent(b))}`:"";return L?`${l}://${_}/${u}/${i}/get/${re}.tar.gz`:`${v.apiBaseUrl}/projects/${u}/repos/${i}/archive?format=tgz&at=${re}&prefix=${u}-${i}${Oe}`}function dt(Z,v){try{const{owner:i,name:u,ref:o,filepathtype:l,filepath:_}=parseGitUrl(Z);if(!i||!u||l!=="browse"&&l!=="raw"&&l!=="src")throw new Error("Invalid Bitbucket URL or file path");const b=_.replace(/^\//,"");if(v.host==="bitbucket.org"){if(!o)throw new Error("Invalid Bitbucket URL or file path");return`${v.apiBaseUrl}/repositories/${i}/${u}/src/${o}/${b}`}return`${v.apiBaseUrl}/projects/${i}/repos/${u}/raw/${b}?at=${o}`}catch(i){throw new Error(`Incorrect URL: ${Z}, ${i}`)}}function St(Z){const v={};if(Z.token)v.Authorization=`Bearer ${Z.token}`;else if(Z.username&&Z.appPassword){const i=R.from(`${Z.username}:${Z.appPassword}`,"utf8");v.Authorization=`Basic ${i.toString("base64")}`}return{headers:v}}const Bt="bitbucket.org",Lt="https://api.bitbucket.org/2.0";function Re(Z){const v=Bt,i=Lt,u=Z.getString("username"),o=Z.getString("appPassword");return{host:v,apiBaseUrl:i,username:u,appPassword:o}}function _t(Z){const v=Z.map(Re);return v.length===0&&v.push({host:Bt,apiBaseUrl:Lt}),v}const Ct=class{constructor(Z){this.integrationConfig=Z}get type(){return"bitbucketCloud"}get title(){return this.integrationConfig.host}get config(){return this.integrationConfig}resolveUrl(Z){const v=j(Z);if(Z.lineNumber){const i=new URL(v);return i.hash=`lines-${Z.lineNumber}`,i.toString()}return v}resolveEditUrl(Z){const v=d()(Z),i=new URL(Z);return i.searchParams.set("mode","edit"),i.searchParams.set("at",v.ref),i.toString()}};let Qt=Ct;Qt.factory=({config:Z})=>{var v;const i=_t((v=Z.getOptionalConfigArray("integrations.bitbucketCloud"))!=null?v:[]);return K(i.map(u=>new Ct(u)),u=>u.config.host)};async function st(Z,v){const{name:i,owner:u}=parseGitUrl(Z),o=`${v.apiBaseUrl}/repositories/${u}/${i}`,l=await fetch(o,we(v));if(!l.ok){const L=`Failed to retrieve default branch from ${o}, ${l.status} ${l.statusText}`;throw new Error(L)}const b=(await l.json()).mainbranch.name;if(!b)throw new Error(`Failed to read default branch from ${o}. Response ${l.status} ${l.json()}`);return b}async function me(Z,v){const{name:i,owner:u,ref:o,protocol:l,resource:_}=parseGitUrl(Z);let b=o;return b||(b=await st(Z,v)),`${l}://${_}/${u}/${i}/get/${b}.tar.gz`}function ce(Z,v){try{const{owner:i,name:u,ref:o,filepathtype:l,filepath:_}=parseGitUrl(Z);if(!i||!u||l!=="src"&&l!=="raw")throw new Error("Invalid Bitbucket Cloud URL or file path");const b=_.replace(/^\//,"");if(!o)throw new Error("Invalid Bitbucket Cloud URL or file path");return`${v.apiBaseUrl}/repositories/${i}/${u}/src/${o}/${b}`}catch(i){throw new Error(`Incorrect URL: ${Z}, ${i}`)}}function we(Z){const v={};if(Z.username&&Z.appPassword){const i=R.from(`${Z.username}:${Z.appPassword}`,"utf8");v.Authorization=`Basic ${i.toString("base64")}`}return{headers:v}}function se(Z){const v=Z.getString("host");let i=Z.getOptionalString("apiBaseUrl");const u=Z.getOptionalString("token"),o=Z.getOptionalString("username"),l=Z.getOptionalString("password");if(!M(v))throw new Error(`Invalid Bitbucket Server integration config, '${v}' is not a valid host`);return i?i=(0,E.trimEnd)(i,"/"):i=`https://${v}/rest/api/1.0`,{host:v,apiBaseUrl:i,token:u,username:o,password:l}}function Te(Z){return Z.map(se)}const Ae=class{constructor(Z){this.integrationConfig=Z}get type(){return"bitbucketServer"}get title(){return this.integrationConfig.host}get config(){return this.integrationConfig}resolveUrl(Z){const v=j(Z);if(Z.lineNumber){const i=new URL(v);return i.hash=Z.lineNumber.toString(),i.toString()}return v}resolveEditUrl(Z){return Z.includes("?")?Z.substring(0,Z.indexOf("?")):Z}};let Ne=Ae;Ne.factory=({config:Z})=>{var v;const i=Te((v=Z.getOptionalConfigArray("integrations.bitbucketServer"))!=null?v:[]);return K(i.map(u=>new Ae(u)),u=>u.config.host)};async function Q(Z,v){const{name:i,owner:u}=parseGitUrl(Z);let o=`${v.apiBaseUrl}/projects/${u}/repos/${i}/default-branch`,l=await fetch(o,ne(v));if(l.status===404&&(o=`${v.apiBaseUrl}/projects/${u}/repos/${i}/branches/default`,l=await fetch(o,ne(v))),!l.ok){const L=`Failed to retrieve default branch from ${o}, ${l.status} ${l.statusText}`;throw new Error(L)}const{displayId:_}=await l.json(),b=_;if(!b)throw new Error(`Failed to read default branch from ${o}. Response ${l.status} ${l.json()}`);return b}async function T(Z,v){const{name:i,owner:u,ref:o,filepath:l}=parseGitUrl(Z);let _=o;_||(_=await Q(Z,v));const b=l?`&path=${encodeURIComponent(decodeURIComponent(l))}`:"";return`${v.apiBaseUrl}/projects/${u}/repos/${i}/archive?format=tgz&at=${_}&prefix=${u}-${i}${b}`}function X(Z,v){try{const{owner:i,name:u,ref:o,filepathtype:l,filepath:_}=parseGitUrl(Z);if(!i||!u||l!=="browse"&&l!=="raw"&&l!=="src")throw new Error("Invalid Bitbucket Server URL or file path");const b=_.replace(/^\//,"");return`${v.apiBaseUrl}/projects/${i}/repos/${u}/raw/${b}?at=${o}`}catch(i){throw new Error(`Incorrect URL: ${Z}, ${i}`)}}function ne(Z){const v={};if(Z.token)v.Authorization=`Bearer ${Z.token}`;else if(Z.username&&Z.password){const i=R.from(`${Z.username}:${Z.password}`,"utf8");v.Authorization=`Basic ${i.toString("base64")}`}return{headers:v}}function fe(Z){const v=Z.getString("host");let i=Z.getOptionalString("baseUrl"),u=Z.getOptionalString("cloneUrl"),o=Z.getOptionalString("gitilesBaseUrl");const l=Z.getOptionalString("username"),_=Z.getOptionalString("password");if(M(v)){if(i&&!z(i))throw new Error(`Invalid Gerrit integration config, '${i}' is not a valid baseUrl`);if(u&&!z(u))throw new Error(`Invalid Gerrit integration config, '${u}' is not a valid cloneUrl`);if(o&&!z(o))throw new Error(`Invalid Gerrit integration config, '${o}' is not a valid gitilesBaseUrl`)}else throw new Error(`Invalid Gerrit integration config, '${v}' is not a valid host`);return i?i=(0,E.trimEnd)(i,"/"):i=`https://${v}`,o?o=(0,E.trimEnd)(o,"/"):o=`https://${v}`,u?u=(0,E.trimEnd)(u,"/"):u=i,{host:v,baseUrl:i,cloneUrl:u,gitilesBaseUrl:o,username:l,password:_}}function te(Z){return Z.map(fe)}const ge=")]}'";function He(Z,v){const u=v.replace(Z.gitilesBaseUrl,"").split("/").filter(re=>!!re),o=u.indexOf("+");if(o<=0)throw new Error(`Unable to parse project from url: ${v}`);const l=(0,E.trimStart)(u.slice(0,o).join("/"),"/"),_=u.indexOf("heads");if(_<=0)throw new Error(`Unable to parse branch from url: ${v}`);const b=u[_+1],L=u.slice(_+2).join("/");return{branch:b,filePath:L===""?"/":L,project:l}}function it(Z,v,i,u){return`${Z.gitilesBaseUrl}/${v}/+/refs/heads/${i}/${(0,E.trimStart)(u,"/")}`}function ht(Z){return Z.password?"/a/":"/"}function ve(Z,v){const{branch:i,project:u}=He(Z,v);return`${Z.baseUrl}${ht(Z)}projects/${encodeURIComponent(u)}/branches/${i}`}function Fe(Z,v){const{project:i}=He(Z,v);return`${Z.cloneUrl}${ht(Z)}${i}`}function mt(Z,v){const{branch:i,filePath:u,project:o}=He(Z,v);return`${Z.baseUrl}${ht(Z)}projects/${encodeURIComponent(o)}/branches/${i}/files/${encodeURIComponent(u)}/content`}function $t(Z){return`${Z.baseUrl}${ht(Z)}projects/`}function Zt(Z){const v={};if(!Z.password)return v;const i=R.from(`${Z.username}:${Z.password}`,"utf8");return v.Authorization=`Basic ${i.toString("base64")}`,{headers:v}}async function Gt(Z){const v=await Z.text();if(v.startsWith(ge))try{return JSON.parse(v.slice(ge.length))}catch(i){throw new Error(`Invalid response from Gerrit: ${v.slice(0,10)} - ${i}`)}throw new Error(`Gerrit JSON body prefix missing. Found: ${v.slice(0,10)}`)}const Jt=class{constructor(Z){this.integrationConfig=Z}get type(){return"gerrit"}get title(){return this.integrationConfig.host}get config(){return this.integrationConfig}resolveUrl(Z){const{url:v,base:i,lineNumber:u}=Z;let o;if(v.startsWith("/")){const{branch:l,project:_}=He(this.config,i);return it(this.config,_,l,v)}return v?o=new URL(v,i):o=new URL(i),u&&(o.hash=u.toString()),o.toString()}resolveEditUrl(Z){return Z}};let xt=Jt;xt.factory=({config:Z})=>{var v;const i=te((v=Z.getOptionalConfigArray("integrations.gerrit"))!=null?v:[]);return K(i.map(u=>new Jt(u)),u=>u.config.host)};const sn="github.com",De="https://api.github.com",Je="https://raw.githubusercontent.com";function et(Z){var v,i;const u=(v=Z.getOptionalString("host"))!=null?v:sn;let o=Z.getOptionalString("apiBaseUrl"),l=Z.getOptionalString("rawBaseUrl");const _=Z.getOptionalString("token"),b=(i=Z.getOptionalConfigArray("apps"))==null?void 0:i.map(L=>({appId:L.getNumber("appId"),clientId:L.getString("clientId"),clientSecret:L.getString("clientSecret"),webhookSecret:L.getString("webhookSecret"),privateKey:L.getString("privateKey"),allowedInstallationOwners:L.getOptionalStringArray("allowedInstallationOwners")}));if(!M(u))throw new Error(`Invalid GitHub integration config, '${u}' is not a valid host`);return o?o=(0,E.trimEnd)(o,"/"):u===sn&&(o=De),l?l=(0,E.trimEnd)(l,"/"):u===sn&&(l=Je),{host:u,apiBaseUrl:o,rawBaseUrl:l,token:_,apps:b}}function ae(Z){const v=Z.map(et);return v.some(i=>i.host===sn)||v.push({host:sn,apiBaseUrl:De,rawBaseUrl:Je}),v}function pe(Z,v,i){try{const{owner:u,name:o,ref:l,filepathtype:_,filepath:b}=parseGitUrl(Z);if(!u||!o||!l||_!=="blob"&&_!=="raw"&&_!=="tree")throw new Error("Invalid GitHub URL or file path");const L=b.replace(/^\//,"");return Ze(v,i)==="api"?`${v.apiBaseUrl}/repos/${u}/${o}/contents/${L}?ref=${l}`:`${v.rawBaseUrl}/${u}/${o}/${l}/${L}`}catch(u){throw new Error(`Incorrect URL: ${Z}, ${u}`)}}function ke(Z,v){const i={};return Ze(Z,v)==="api"&&(i.Accept="application/vnd.github.v3.raw"),v.token&&(i.Authorization=`token ${v.token}`),{headers:i}}function Ze(Z,v){return Z.apiBaseUrl&&(v.token||!Z.rawBaseUrl)?"api":"raw"}class Se{constructor(){this.tokenCache=new Map,this.isExpired=v=>h.ou.local()>v}async getOrCreateToken(v,i,u){let o=this.tokenCache.get(v);if((!o||this.isExpired(o.expiresAt))&&(o=await u(),o.expiresAt=o.expiresAt.minus({minutes:10}),this.tokenCache.set(v,o)),!this.appliesToRepo(o,i))throw new Error(`The Backstage GitHub application used in the ${v} organization does not have access to a repository with the name ${i}`);return{accessToken:o.token}}appliesToRepo(v,i){return i===void 0?!0:v.repositories!==void 0?v.repositories.includes(i):!0}}const pt={Accept:"application/vnd.github.machine-man-preview+json"};class vt{constructor(v,i){this.cache=new Se,this.allowedInstallationOwners=v.allowedInstallationOwners,this.baseUrl=i,this.baseAuthConfig={appId:v.appId,privateKey:v.privateKey.replace(/\\n/gm,`
`)},this.appClient=new O.v({baseUrl:i,headers:pt,authStrategy:S.i,auth:this.baseAuthConfig})}async getInstallationCredentials(v,i){var u;return this.allowedInstallationOwners&&!((u=this.allowedInstallationOwners)!=null&&u.includes(v))?{accessToken:void 0}:this.cache.getOrCreateToken(v,i,async()=>{var o;const{installationId:l,suspended:_}=await this.getInstallationData(v);if(_)throw new Error(`The GitHub application for ${v} is suspended`);const b=await this.appClient.apps.createInstallationAccessToken({installation_id:l,headers:pt});let L;if(b.data.repository_selection==="selected"){const re=new O.v({baseUrl:this.baseUrl,auth:b.data.token}),Oe=await re.paginate(re.apps.listReposAccessibleToInstallation);L=((o=Oe.repositories)!=null?o:Oe).map(tt=>tt.name)}return{token:b.data.token,expiresAt:h.ou.fromISO(b.data.expires_at),repositories:L}})}getInstallations(){return this.appClient.paginate(this.appClient.apps.listInstallations)}async getInstallationData(v){const u=(await this.getInstallations()).find(l=>{var _,b;return((b=(_=l.account)==null?void 0:_.login)==null?void 0:b.toLocaleLowerCase("en-US"))===v.toLocaleLowerCase("en-US")});if(u)return{installationId:u.id,suspended:Boolean(u.suspended_by)};const o=new Error(`No app installation found for ${v} in ${this.baseAuthConfig.appId}`);throw o.name="NotFoundError",o}}class zt{constructor(v){var i,u;this.apps=(u=(i=v.apps)==null?void 0:i.map(o=>new vt(o,v.apiBaseUrl)))!=null?u:[]}async getAllInstallations(){return this.apps.length?(await Promise.all(this.apps.map(i=>i.getInstallations()))).flat():[]}async getAppToken(v,i){if(this.apps.length===0)return;const u=await Promise.all(this.apps.map(b=>b.getInstallationCredentials(v,i).then(L=>({credentials:L,error:void 0}),L=>({credentials:void 0,error:L})))),o=u.find(b=>b.credentials);if(o)return o.credentials.accessToken;const _=u.map(b=>b.error).find(b=>b.name!=="NotFoundError");if(_)throw _}}const Tt=class{constructor(Z,v){this.githubAppCredentialsMux=Z,this.token=v}async getCredentials(Z){const v=d()(Z.url),i=v.owner||v.name,u=v.owner?v.name:void 0;let o="app",l=await this.githubAppCredentialsMux.getAppToken(i,u);return l||(o="token",l=this.token),{headers:l?{Authorization:`Bearer ${l}`}:void 0,token:l,type:o}}};let It=Tt;It.create=Z=>new Tt(new zt(Z),Z.token);class Ut{constructor(v){this.providers=v}static fromIntegrations(v){const i=new Map;return v.github.list().forEach(u=>{const o=It.create(u.config);i.set(u.config.host,o)}),new Ut(i)}async getCredentials(v){const i=new URL(v.url),u=this.providers.get(i.host);if(!u)throw new Error(`There is no GitHub integration that matches ${v.url}. Please add a configuration for an integration.`);return u.getCredentials(v)}}const ln=class{constructor(Z){this.integrationConfig=Z}get type(){return"github"}get title(){return this.integrationConfig.host}get config(){return this.integrationConfig}resolveUrl(Z){return cn(j(Z),"tree")}resolveEditUrl(Z){return cn(Z,"edit")}};let mn=ln;mn.factory=({config:Z})=>{var v;const i=ae((v=Z.getOptionalConfigArray("integrations.github"))!=null?v:[]);return K(i.map(u=>new ln(u)),u=>u.config.host)};function cn(Z,v){return Z.replace(/\/\/([^/]+)\/([^/]+)\/([^/]+)\/(blob|tree|edit)\//,(i,u,o,l)=>`//${u}/${o}/${l}/${v}/`)}const En="gitlab.com",en="https://gitlab.com/api/v4";function Sn(Z){const v=Z.getString("host");let i=Z.getOptionalString("apiBaseUrl");const u=Z.getOptionalString("token");let o=Z.getOptionalString("baseUrl");if(i?i=(0,E.trimEnd)(i,"/"):v===En&&(i=en),o?o=(0,E.trimEnd)(o,"/"):o=`https://${v}`,M(v)){if(!i||!z(i))throw new Error(`Invalid GitLab integration config, '${i}' is not a valid apiBaseUrl`);if(!z(o))throw new Error(`Invalid GitLab integration config, '${o}' is not a valid baseUrl`)}else throw new Error(`Invalid GitLab integration config, '${v}' is not a valid host`);return{host:v,token:u,apiBaseUrl:i,baseUrl:o}}function On(Z){const v=Z.map(Sn);return v.some(i=>i.host===En)||v.push({host:En,apiBaseUrl:en,baseUrl:`https://${En}`}),v}function In(Z){let v="";return Z.host!==En&&(v=new URL(Z.baseUrl).pathname),trimEnd(v,"/")}async function Ln(Z,v){const i=await Zn(Z,v);return Mn(Z,i,v).toString()}function Dn(Z){const{token:v=""}=Z;return{headers:{"PRIVATE-TOKEN":v}}}function Mn(Z,v,i){try{const u=new URL(Z),o=u.pathname.split("/blob/").slice(1).join("/blob/"),[l,..._]=o.split("/"),b=In(i);return u.pathname=[...b?[b]:[],"api/v4/projects",v,"repository/files",encodeURIComponent(decodeURIComponent(_.join("/"))),"raw"].join("/"),u.search=`?ref=${l}`,u}catch(u){throw new Error(`Incorrect url: ${Z}, ${u}`)}}async function Zn(Z,v){const i=new URL(Z);if(!i.pathname.includes("/blob/"))throw new Error("Please provide full path to yaml file from GitLab");try{let u=i.pathname.split("/-/blob/")[0].split("/blob/")[0];const o=In(v);o&&(u=u.replace(o,""));const l=new URL(`${i.origin}${o}/api/v4/projects/${encodeURIComponent(u.replace(/^\//,""))}`),_=await fetch(l.toString(),Dn(v)),b=await _.json();if(!_.ok)throw new Error(`GitLab Error '${b.error}', ${b.error_description}`);return Number(b.id)}catch(u){throw new Error(`Could not get GitLab project ID for: ${Z}, ${u}`)}}const Rn=class{constructor(Z){this.integrationConfig=Z}get type(){return"gitlab"}get title(){return this.integrationConfig.host}get config(){return this.integrationConfig}resolveUrl(Z){return j(Z)}resolveEditUrl(Z){return Vn(Z,"edit")}};let $n=Rn;$n.factory=({config:Z})=>{var v;const i=On((v=Z.getOptionalConfigArray("integrations.gitlab"))!=null?v:[]);return K(i.map(u=>new Rn(u)),u=>u.config.host)};function Vn(Z,v){return Z.replace(/\/\-\/(blob|tree|edit)\//,`/-/${v}/`)}function cr(Z){if(!Z)return{};if(!Z.has("clientEmail")&&!Z.has("privateKey"))return{};const v=Z.getString("privateKey").split("\\n").join(`
`);return{clientEmail:Z.getString("clientEmail"),privateKey:v}}class ur{static fromConfig(v){return new ur({awsS3:$.factory({config:v}),azure:Ue.factory({config:v}),bitbucket:N.factory({config:v}),bitbucketCloud:Qt.factory({config:v}),bitbucketServer:Ne.factory({config:v}),gerrit:xt.factory({config:v}),github:mn.factory({config:v}),gitlab:$n.factory({config:v})})}constructor(v){this.byType=v}get awsS3(){return this.byType.awsS3}get azure(){return this.byType.azure}get bitbucket(){return this.byType.bitbucket}get bitbucketCloud(){return this.byType.bitbucketCloud}get bitbucketServer(){return this.byType.bitbucketServer}get gerrit(){return this.byType.gerrit}get github(){return this.byType.github}get gitlab(){return this.byType.gitlab}list(){return Object.values(this.byType).flatMap(v=>v.list())}byUrl(v){let i=Object.values(this.byType).map(u=>u.byUrl(v)).filter(Boolean);if(i.length>1){const u=i.filter(o=>!(o instanceof N));u.length!==0&&(i=u)}return i[0]}byHost(v){return Object.values(this.byType).map(i=>i.byHost(v)).find(Boolean)}resolveUrl(v){const i=this.byUrl(v.base);return i?i.resolveUrl(v):j(v)}resolveEditUrl(v){const i=this.byUrl(v);return i?i.resolveEditUrl(v):v}}},63115:function(Mt,g,t){t.d(g,{Cy:function(){return P},DC:function(){return Ue},OO:function(){return G},RE:function(){return ie},XQ:function(){return p},Yq:function(){return Be},ap:function(){return nt},bM:function(){return at},cm:function(){return At},d1:function(){return xe},fP:function(){return j},fe:function(){return q},gC:function(){return ye},hK:function(){return oe},hs:function(){return rn},nE:function(){return Ve},x1:function(){return de},zJ:function(){return ct}});var e=t(2784),d=t(73557),E=t(49558),f=t(30705),r=t(16673),c=t(73495),S=t(99688),O=t(60364),h=t(34520),R=t(90436);const M=(0,f.NT)({id:"api-docs"}),z=(0,f.x8)({id:"register-component",optional:!0}),K=[r.Es.columns.createTitleColumn({hidden:!0}),r.Es.columns.createNameColumn({defaultKind:"API"}),r.Es.columns.createSystemColumn(),r.Es.columns.createOwnerColumn(),r.Es.columns.createSpecTypeColumn(),r.Es.columns.createSpecLifecycleColumn(),r.Es.columns.createMetadataDescriptionColumn(),r.Es.columns.createTagsColumn()],j=be=>{var je;const{initiallySelectedFilter:ft="all",columns:F,actions:N}=be,ze=`${(je=(0,f.h_)(f.Ds).getOptionalString("organization.name"))!=null?je:"Backstage"} API Explorer`,dt=(0,f.tg)(z);return e.createElement(E.g9,{themeId:"apis",title:"APIs",subtitle:ze,pageTitleOverride:"APIs"},e.createElement(E.VY,null,e.createElement(E.yW,{title:""},e.createElement(E.XF,{title:"Register Existing API",to:dt==null?void 0:dt()}),e.createElement(E.qt,null,"All your APIs")),e.createElement(c.UO,null,e.createElement(c._i,null,e.createElement(c._i.Filters,null,e.createElement(c.tW,{initialFilter:"api",hidden:!0}),e.createElement(c.sL,null),e.createElement(c.EW,{initialFilter:ft}),e.createElement(c.dq,null),e.createElement(c.df,null),e.createElement(c.xE,null)),e.createElement(c._i.Content,null,e.createElement(r.Es,{columns:F||K,actions:N}))))))},ie=be=>(0,d.pC)()||e.createElement(j,{...be}),w=(0,f.T0)({id:"plugin.api-docs.config"}),D=be=>e.createElement(E.Oi,{text:be.definition,language:be.language,showCopyCodeButton:!0}),P=()=>{var be;const{entity:je}=(0,c.X2)(),ft=(0,f.h_)(w),{getApiDefinitionWidget:F}=ft;if(!je)return e.createElement(S.Z,{severity:"error"},"Could not fetch the API");const N=F(je),_e=(be=je.metadata.title)!=null?be:je.metadata.name;return N?e.createElement(E.oZ,{title:_e},e.createElement(E.hB,{label:N.title,key:"widget"},N.component(je.spec.definition)),e.createElement(E.hB,{label:"Raw",key:"raw"},e.createElement(D,{definition:je.spec.definition,language:N.rawLanguage||je.spec.type}))):e.createElement(E.oZ,{title:_e,children:[e.createElement(E.hB,{label:je.spec.type,key:"raw"},e.createElement(D,{definition:je.spec.definition,language:je.spec.type}))]})},$=e.lazy(()=>Promise.all([t.e(3160),t.e(1978),t.e(7700),t.e(9086),t.e(9123)]).then(t.bind(t,19123)).then(be=>({default:be.AsyncApiDefinition}))),U=be=>e.createElement(e.Suspense,{fallback:e.createElement(E.Ex,null)},e.createElement($,{...be})),I=e.lazy(()=>t.e(1282).then(t.bind(t,71282)).then(be=>({default:be.GraphQlDefinition}))),m=be=>e.createElement(e.Suspense,{fallback:e.createElement(E.Ex,null)},e.createElement(I,{...be})),x=e.lazy(()=>Promise.all([t.e(1978),t.e(6637),t.e(7700),t.e(382)]).then(t.bind(t,90382)).then(be=>({default:be.OpenApiDefinition}))),W=be=>e.createElement(e.Suspense,{fallback:e.createElement(E.Ex,null)},e.createElement(x,{...be})),Ee=be=>{const je=(0,O.Z)();return e.createElement(E.Oi,{customStyle:{backgroundColor:je.palette.background.default},text:be.definition,language:"protobuf",showCopyCodeButton:!0})};function Be(){return[{type:"openapi",title:"OpenAPI",rawLanguage:"yaml",component:be=>e.createElement(W,{definition:be})},{type:"asyncapi",title:"AsyncAPI",rawLanguage:"yaml",component:be=>e.createElement(U,{definition:be})},{type:"graphql",title:"GraphQL",rawLanguage:"graphql",component:be=>e.createElement(m,{definition:be})},{type:"grpc",title:"gRPC",component:be=>e.createElement(Ee,{definition:be})}]}const Ve=be=>{const{apiEntity:je}=be,F=(0,f.h_)(w).getApiDefinitionWidget(je),N=F?F.title:je.spec.type;return e.createElement("span",null,N)};function qe(){return{title:"Type",field:"spec.type",render:be=>e.createElement(Ve,{apiEntity:be})}}const Et=[c.u3.columns.createEntityRefColumn({defaultKind:"API"}),c.u3.columns.createSystemColumn(),c.u3.columns.createOwnerColumn(),qe(),c.u3.columns.createSpecLifecycleColumn(),c.u3.columns.createMetadataDescriptionColumn()],at=be=>{const{variant:je="gridItem"}=be,{entity:ft}=(0,c.X2)(),{entities:F,loading:N,error:_e}=(0,c.eK)(ft,{type:h.Dg});return N?e.createElement(E.rJ,{variant:je,title:"Consumed APIs"},e.createElement(E.Ex,null)):_e||!F?e.createElement(E.rJ,{variant:je,title:"Consumed APIs"},e.createElement(E.GB,{severity:"error",title:"Could not load APIs",message:e.createElement(E.Oi,{text:`${_e}`,language:"text"})})):e.createElement(c.u3,{title:"Consumed APIs",variant:je,emptyContent:e.createElement("div",{style:{textAlign:"center"}},e.createElement(R.Z,{variant:"body1"},"This ",ft.kind.toLocaleLowerCase("en-US")," does not consume any APIs."),e.createElement(R.Z,{variant:"body2"},e.createElement(E.rU,{to:"https://backstage.io/docs/features/software-catalog/descriptor-format#specconsumesapis-optional"},"Learn how to change this."))),columns:Et,entities:F})},Pt=[c.u3.columns.createEntityRefColumn({defaultKind:"API"}),c.u3.columns.createOwnerColumn(),qe(),c.u3.columns.createSpecLifecycleColumn(),c.u3.columns.createMetadataDescriptionColumn()],At=be=>{const{variant:je="gridItem"}=be,{entity:ft}=(0,c.X2)(),{entities:F,loading:N,error:_e}=(0,c.eK)(ft,{type:h.aS,kind:"API"});return N?e.createElement(E.rJ,{variant:je,title:"APIs"},e.createElement(E.Ex,null)):_e||!F?e.createElement(E.rJ,{variant:je,title:"APIs"},e.createElement(E.GB,{severity:"error",title:"Could not load APIs",message:e.createElement(E.Oi,{text:`${_e}`,language:"text"})})):e.createElement(c.u3,{title:"APIs",variant:je,emptyContent:e.createElement("div",{style:{textAlign:"center"}},e.createElement(R.Z,{variant:"body1"},"This ",ft.kind.toLocaleLowerCase("en-US")," does not contain any APIs."),e.createElement(R.Z,{variant:"body2"},e.createElement(E.rU,{to:"https://backstage.io/docs/features/software-catalog/descriptor-format#kind-api"},"Learn how to change this."))),columns:Pt,entities:F})},q=be=>{const{variant:je="gridItem"}=be,{entity:ft}=(0,c.X2)(),{entities:F,loading:N,error:_e}=(0,c.eK)(ft,{type:h.M_});return N?e.createElement(E.rJ,{variant:je,title:"Provided APIs"},e.createElement(E.Ex,null)):_e||!F?e.createElement(E.rJ,{variant:je,title:"Provided APIs"},e.createElement(E.GB,{severity:"error",title:"Could not load APIs",message:e.createElement(E.Oi,{text:`${_e}`,language:"text"})})):e.createElement(c.u3,{title:"Provided APIs",variant:je,emptyContent:e.createElement("div",{style:{textAlign:"center"}},e.createElement(R.Z,{variant:"body1"},"This ",ft.kind.toLocaleLowerCase("en-US")," does not provide any APIs."),e.createElement(R.Z,{variant:"body2"},e.createElement(E.rU,{to:"https://backstage.io/docs/features/software-catalog/descriptor-format#specprovidesapis-optional"},"Learn how to change this."))),columns:Et,entities:F})},rn=be=>{const{variant:je="gridItem"}=be,{entity:ft}=(0,c.X2)(),{entities:F,loading:N,error:_e}=(0,c.eK)(ft,{type:h.X9});return N?e.createElement(E.rJ,{variant:je,title:"Consumers"},e.createElement(E.Ex,null)):_e||!F?e.createElement(E.rJ,{variant:je,title:"Consumers"},e.createElement(E.GB,{severity:"error",title:"Could not load components",message:e.createElement(E.Oi,{text:`${_e}`,language:"text"})})):e.createElement(c.u3,{title:"Consumers",variant:je,emptyContent:e.createElement("div",{style:{textAlign:"center"}},e.createElement(R.Z,{variant:"body1"},"No component consumes this API."),e.createElement(R.Z,{variant:"body2"},e.createElement(E.rU,{to:"https://backstage.io/docs/features/software-catalog/descriptor-format#specconsumesapis-optional"},"Learn how to change this."))),columns:c.u3.componentEntityColumns,entities:F})},ct=be=>{const{variant:je="gridItem"}=be,{entity:ft}=(0,c.X2)(),{entities:F,loading:N,error:_e}=(0,c.eK)(ft,{type:h.Zj});return N?e.createElement(E.rJ,{variant:je,title:"Providers"},e.createElement(E.Ex,null)):_e||!F?e.createElement(E.rJ,{variant:je,title:"Providers"},e.createElement(E.GB,{severity:"error",title:"Could not load components",message:e.createElement(E.Oi,{text:`${_e}`,language:"text"})})):e.createElement(c.u3,{title:"Providers",variant:je,emptyContent:e.createElement("div",{style:{textAlign:"center"}},e.createElement(R.Z,{variant:"body1"},"No component provides this API."),e.createElement(R.Z,{variant:"body2"},e.createElement(E.rU,{to:"https://backstage.io/docs/features/software-catalog/descriptor-format#specprovidesapis-optional"},"Learn how to change this."))),columns:c.u3.componentEntityColumns,entities:F})},xe=(0,f.rx)({id:"api-docs",routes:{root:M},apis:[(0,f.ni)({api:w,deps:{},factory:()=>{const be=Be();return{getApiDefinitionWidget:je=>be.find(ft=>ft.type===je.spec.type)}}})],externalRoutes:{registerApi:z}}),oe=xe.provide((0,f.P4)({name:"ApiExplorerPage",component:()=>t.e(9024).then(t.bind(t,19024)).then(be=>be.ApiExplorerIndexPage),mountPoint:M})),Ue=xe.provide((0,f.CO)({name:"EntityApiDefinitionCard",component:{lazy:()=>t.e(7185).then(t.bind(t,47185)).then(be=>be.ApiDefinitionCard)}})),de=xe.provide((0,f.CO)({name:"EntityConsumedApisCard",component:{lazy:()=>t.e(440).then(t.bind(t,80440)).then(be=>be.ConsumedApisCard)}})),p=xe.provide((0,f.CO)({name:"EntityConsumingComponentsCard",component:{lazy:()=>t.e(1473).then(t.bind(t,71473)).then(be=>be.ConsumingComponentsCard)}})),G=xe.provide((0,f.CO)({name:"EntityProvidedApisCard",component:{lazy:()=>t.e(440).then(t.bind(t,80440)).then(be=>be.ProvidedApisCard)}})),ye=xe.provide((0,f.CO)({name:"EntityProvidingComponentsCard",component:{lazy:()=>t.e(1473).then(t.bind(t,71473)).then(be=>be.ProvidingComponentsCard)}})),nt=xe.provide((0,f.CO)({name:"EntityHasApisCard",component:{lazy:()=>t.e(440).then(t.bind(t,80440)).then(be=>be.HasApisCard)}}))},26655:function(Mt,g,t){t.d(g,{j8:function(){return r},x7:function(){return f}});var e=t(5083);const d="catalog-entity",E=(0,e.J$)({name:"catalog.entity.read",attributes:{action:"read"},resourceType:d}),f=(0,e.J$)({name:"catalog.entity.create",attributes:{action:"create"}}),r=(0,e.J$)({name:"catalog.entity.delete",attributes:{action:"delete"},resourceType:d}),c=(0,e.J$)({name:"catalog.entity.refresh",attributes:{action:"update"},resourceType:d}),S=(0,e.J$)({name:"catalog.location.read",attributes:{action:"read"}}),O=(0,e.J$)({name:"catalog.location.create",attributes:{action:"create"}}),h=(0,e.J$)({name:"catalog.location.delete",attributes:{action:"delete"}}),R=[E,f,r,c,S,O,h]},98487:function(Mt,g,t){t.d(g,{Az:function(){return q},Ho:function(){return at},Nm:function(){return x},_U:function(){return Et},t0:function(){return rn},vw:function(){return m}});var e=t(34520),d=t(49558),E=t(30705),f=t(79692),r=t(60364),c=t(4614),S=t(72779),O=t.n(S),h=t(2784),R=t(10368),M=t(73495),z=t(39412),K=t(48760),j=t(14162),ie=t.n(j),w=t(69294);const D=(0,R.Z)(ct=>({text:{fill:ct.palette.textContrast},secondary:{fill:ct.palette.textSubtle}}));function P({edge:{relations:ct}}){const xe=D();return h.createElement("text",{className:xe.text,textAnchor:"middle"},ct.map((oe,Ue)=>h.createElement("tspan",{key:oe,className:O()(Ue>0&&xe.secondary)},Ue>0&&h.createElement("tspan",null," / "),oe)))}function $({kind:ct,...xe}){var oe;const de=(oe=(0,E.qD)().getSystemIcon(`kind:${ct.toLocaleLowerCase("en-US")}`))!=null?oe:z.Z;return h.createElement(de,{...xe})}const U=(0,f.Z)(ct=>({node:{fill:ct.palette.grey[300],stroke:ct.palette.grey[300],"&.primary":{fill:ct.palette.primary.light,stroke:ct.palette.primary.light},"&.secondary":{fill:ct.palette.secondary.light,stroke:ct.palette.secondary.light}},text:{fill:ct.palette.getContrastText(ct.palette.grey[300]),"&.primary":{fill:ct.palette.primary.contrastText},"&.secondary":{fill:ct.palette.secondary.contrastText},"&.focused":{fontWeight:"bold"}},clickable:{cursor:"pointer"}}));function I({node:{id:ct,kind:xe,namespace:oe,name:Ue,color:de="default",focused:p,title:G,onClick:ye}}){const nt=U(),[be,je]=(0,h.useState)(0),[ft,F]=(0,h.useState)(0),N=(0,h.useRef)(null);(0,h.useLayoutEffect)(()=>{if(N.current){let{height:Re,width:_t}=N.current.getBBox();Re=Math.round(Re),_t=Math.round(_t),(Re!==ft||_t!==be)&&(je(_t),F(Re))}},[be,ft]);const _e=10,ze=ft,dt=xe?ze+_e:0,St=dt+be+_e*2,Bt=ft+_e*2,Lt=G!=null?G:xe&&Ue&&oe?(0,M.$3)({kind:xe,name:Ue,namespace:oe}):ct;return h.createElement("g",{onClick:ye,className:O()(ye&&nt.clickable)},h.createElement("rect",{className:O()(nt.node,de==="primary"&&"primary",de==="secondary"&&"secondary"),width:St,height:Bt,rx:10}),xe&&h.createElement($,{kind:xe,y:_e,x:_e,width:ze,height:ze,className:O()(nt.text,p&&"focused",de==="primary"&&"primary",de==="secondary"&&"secondary")}),h.createElement("text",{ref:N,className:O()(nt.text,p&&"focused",de==="primary"&&"primary",de==="secondary"&&"secondary"),y:Bt/2,x:dt+(be+_e*2)/2,textAnchor:"middle",alignmentBaseline:"middle"},Lt))}const m=[[e.$1,e.S4],[e.Dg,e.X9],[e.Zj,e.M_],[e.aS,e.cz],[e._b,e.wP],[e.KS,e.hr],[e.nP,e.w$]];var x=(ct=>(ct.TOP_BOTTOM="TB",ct.BOTTOM_TOP="BT",ct.LEFT_RIGHT="LR",ct.RIGHT_LEFT="RL",ct))(x||{});const W=ie()(10);function Ee(){const ct=(0,E.h_)(M.Ah),xe=(0,h.useRef)({requestedEntities:new Set,outstandingEntities:new Map,cachedEntities:new Map}),[oe,Ue]=(0,h.useState)({}),de=(0,h.useCallback)(()=>{const{cachedEntities:je,requestedEntities:ft}=xe.current,F={};ft.forEach(N=>{const _e=je.get(N);_e&&(F[N]=_e)}),Ue(F)},[xe,Ue]),[p,G]=(0,w.default)(async()=>{const{requestedEntities:je,outstandingEntities:ft,cachedEntities:F}=xe.current;await Promise.all(Array.from(je).map(N=>W(async()=>{if(F.has(N))return;if(ft.has(N)){await ft.get(N);return}const _e=ct.getEntityByRef(N);ft.set(N,_e);try{const ze=await _e;ze&&(F.set(N,ze),de())}finally{ft.delete(N)}})))},[xe,de]),{loading:ye,error:nt}=p,be=(0,h.useCallback)(je=>{const ft=new Set(je),{requestedEntities:F}=xe.current;(ft.size!==F.size||Array.from(ft).some(N=>!F.has(N)))&&(xe.current.requestedEntities=ft,G(),de())},[xe,G,de]);return{entities:oe,loading:ye,error:nt,requestEntities:be}}function Be({rootEntityRefs:ct,filter:{maxDepth:xe=Number.POSITIVE_INFINITY,relations:oe,kinds:Ue}={}}){const{entities:de,loading:p,error:G,requestEntities:ye}=Ee();return(0,h.useEffect)(()=>{const nt=new Set([...ct]),be=new Set;let je=[...ct],ft=0;for(;je.length>0&&(!isFinite(xe)||ft<xe);){const F=je;for(je=[];F.length>0;){const N=F.shift(),_e=de[N];if(be.add(N),_e&&_e.relations)for(const ze of _e.relations)(!oe||oe.includes(ze.type))&&(!Ue||Ue.some(dt=>ze.targetRef.startsWith(`${dt.toLocaleLowerCase("en-US")}:`)))&&(be.has(ze.targetRef)||(je.push(ze.targetRef),nt.add(ze.targetRef)))}++ft}ye([...nt])},[de,ct,xe,oe,Ue,ye]),{entities:de,loading:p,error:G}}function Ve({rootEntityRefs:ct,maxDepth:xe=Number.POSITIVE_INFINITY,unidirectional:oe=!0,mergeRelations:Ue=!0,kinds:de,relations:p,onNodeClick:G,relationPairs:ye=m}){const[nt,be]=(0,h.useState)({}),{entities:je,loading:ft,error:F}=Be({rootEntityRefs:ct,filter:{maxDepth:xe,kinds:de,relations:p}});return(0,K.Z)(()=>{var N;if(!je||Object.keys(je).length===0){be({});return}const _e=Object.entries(je).map(([Bt,Lt])=>{var Re,_t,Ct;const Qt=ct.includes(Bt),st={id:Bt,title:(_t=(Re=Lt.metadata)==null?void 0:Re.title)!=null?_t:void 0,kind:Lt.kind,name:Lt.metadata.name,namespace:(Ct=Lt.metadata.namespace)!=null?Ct:e.zG,focused:Qt,color:Qt?"secondary":"primary"};return G&&(st.onClick=me=>G(st,me)),st}),ze=[],dt=new Set,St=[...ct];for(;St.length>0;){const Bt=St.pop(),Lt=je[Bt];dt.add(Bt),Lt&&((N=Lt==null?void 0:Lt.relations)==null||N.forEach(Re=>{var _t;if(!!je[Re.targetRef]&&!(p&&!p.includes(Re.type))&&!(de&&!de.some(Ct=>Re.targetRef.startsWith(`${Ct.toLocaleLowerCase("en-US")}:`)))){if(!oe||!dt.has(Re.targetRef))if(Ue){const Ct=(_t=ye.find(([st,me])=>st===Re.type||me===Re.type))!=null?_t:[Re.type],[Qt]=Ct;ze.push({from:Qt===Re.type?Bt:Re.targetRef,to:Qt===Re.type?Re.targetRef:Bt,relations:Ct,label:"visible"})}else ze.push({from:Bt,to:Re.targetRef,relations:[Re.type],label:"visible"});dt.has(Re.targetRef)||(St.push(Re.targetRef),dt.add(Re.targetRef))}}))}be({nodes:_e,edges:ze})},100,[je,ct,de,p,oe,Ue,G,ye]),{loading:ft,error:F,...nt}}const qe=(0,f.Z)(ct=>({progress:{position:"absolute",left:"50%",top:"50%",marginLeft:"-20px",marginTop:"-20px"},container:{position:"relative",width:"100%",display:"flex",flexDirection:"column"},graph:{width:"100%",flex:1,"& path[marker-end]":{transition:"filter 0.1s ease-in-out"},"& path[marker-end]:hover":{filter:`drop-shadow(2px 2px 4px ${ct.palette.primary.dark});`},"& g[data-testid=label]":{transition:"transform 0s"}}})),Et=ct=>{const{rootEntityNames:xe,maxDepth:oe=Number.POSITIVE_INFINITY,unidirectional:Ue=!0,mergeRelations:de=!0,kinds:p,relations:G,direction:ye=x.LEFT_RIGHT,onNodeClick:nt,relationPairs:be=m,className:je,zoom:ft="enabled",renderNode:F,renderLabel:N,curve:_e}=ct,ze=(0,r.Z)(),dt=qe(),St=(0,h.useMemo)(()=>(Array.isArray(xe)?xe:[xe]).map(Qt=>(0,e.eE)(Qt)),[xe]),Bt=(0,E.h_)(E.VE),{loading:Lt,error:Re,nodes:_t,edges:Ct}=Ve({rootEntityRefs:St,maxDepth:oe,unidirectional:Ue,mergeRelations:de,kinds:p,relations:G,onNodeClick:nt,relationPairs:be});return(0,h.useEffect)(()=>{Re&&Bt.post(Re)},[Bt,Re]),h.createElement("div",{className:O()(dt.container,je)},Lt&&h.createElement(c.Z,{className:dt.progress}),_t&&Ct&&h.createElement(d.mn,{nodes:_t,edges:Ct,renderNode:F||I,renderLabel:N||P,direction:ye,className:dt.graph,paddingX:ze.spacing(4),paddingY:ze.spacing(4),labelPosition:d.NX.LabelPosition.RIGHT,labelOffset:ze.spacing(1),zoom:ft,curve:_e}))},at=(0,E.NT)({id:"catalog-graph"}),Pt=(0,E.x8)({id:"catalog-entity",params:["namespace","kind","name"],optional:!0}),At=(0,E.rx)({id:"catalog-graph",routes:{catalogGraph:at},externalRoutes:{catalogEntity:Pt}}),q=At.provide((0,E.CO)({name:"EntityCatalogGraphCard",component:{lazy:()=>t.e(4084).then(t.bind(t,4084)).then(ct=>ct.CatalogGraphCard)}})),rn=At.provide((0,E.P4)({name:"CatalogGraphPage",component:()=>t.e(9345).then(t.bind(t,59345)).then(ct=>ct.CatalogGraphPage),mountPoint:at}))},93316:function(Mt,g,t){t.d(g,{gA:function(){return sn},vr:function(){return Qt},wS:function(){return Ct}});var e=t(30705),d=t(49462),E=t(73495),f=t(89393),r=t(49431),c=t(82717),S=t.n(c),O=t(49558),h=t(90436),R=t(7089),M=t(77277),z=t(4614),K=t(11776),j=t(38402),ie=t(86136),w=t(49378),D=t(9520),P=t(61837),$=t(82113),U=t(60905),I=t(86619),m=t(74828),x=t(94339),W=t(32552),Ee=t(24579),Be=t(95544),Ve=t(21324),qe=t(34546),Et=t(5806),at=t(31377),Pt=t(67471),At=t(31625),q=t(2784),rn=t(79692),ct=t(4989),xe=t(84905),oe=t(38016),Ue=t(39412),de=t(96795),p=t.n(de),G=t(63955),ye=t(88013),nt=t(72847),be=t(76635),je=t.n(be),ft=t(32272),F=t(64279),N=t(34520);const _e=(0,e.T0)({id:"plugin.catalog-import.service"}),ze=(De,Je)=>{const et=De.github.byUrl(Je);if(!et)return;const{name:ae,owner:pe}=S()(Je);return{repo:ae,owner:pe,githubIntegrationConfig:et.config}};function dt(De){const{ref:Je,...et}=De;return{inputRef:Je,...et}}function St(De){var Je;return(Je=De.getOptionalString("catalog.import.entityFilename"))!=null?Je:"catalog-info.yaml"}function Bt(De){var Je;return(Je=De.getOptionalString("catalog.import.pullRequestBranchName"))!=null?Je:"backstage-integration"}class Lt{constructor(Je){this.discoveryApi=Je.discoveryApi,this.scmAuthApi=Je.scmAuthApi,this.identityApi=Je.identityApi,this.scmIntegrationsApi=Je.scmIntegrationsApi,this.catalogApi=Je.catalogApi,this.configApi=Je.configApi}async analyzeUrl(Je){var et;if(new URL(Je).pathname.match(/\.ya?ml$/)||((et=new URL(Je).searchParams.get("path"))==null?void 0:et.match(/.ya?ml$/))){const ke=await this.catalogApi.addLocation({type:"url",target:Je,dryRun:!0});return{type:"locations",locations:[{exists:ke.exists,target:ke.location.target,entities:ke.entities.map(Ze=>{var Se;return{kind:Ze.kind,namespace:(Se=Ze.metadata.namespace)!=null?Se:"default",name:Ze.metadata.name}})}]}}if(!ze(this.scmIntegrationsApi,Je)){const ke=this.scmIntegrationsApi.byUrl(Je),Ze=St(this.configApi);throw ke?new Error(`The ${ke.title} integration only supports full URLs to ${Ze} files. Did you try to pass in the URL of a directory instead?`):new Error(`This URL was not recognized as a valid GitHub URL because there was no configured integration that matched the given host name. You could try to paste the full URL to a ${Ze} file instead.`)}const pe=await this.analyzeLocation({repo:Je});if(pe.existingEntityFiles.length>0){const ke=pe.existingEntityFiles.reduce((Ze,Se)=>{var pt;return Ze[Se.location.target]={target:Se.location.target,exists:Se.isRegistered,entities:[...Se.location.target in Ze?Ze[Se.location.target].entities:[],{name:Se.entity.metadata.name,namespace:(pt=Se.entity.metadata.namespace)!=null?pt:"default",kind:Se.entity.kind}]},Ze},{});return{type:"locations",locations:Object.values(ke)}}return{type:"repository",integrationType:"github",url:Je,generatedEntities:pe.generateEntities.map(ke=>ke.entity)}}async preparePullRequest(){var Je;const et=(Je=this.configApi.getOptionalString("app.title"))!=null?Je:"Backstage",ae=this.configApi.getString("app.baseUrl");return{title:`Add ${St(this.configApi)} config file`,body:`This pull request adds a **Backstage entity metadata file** to this repository so that the component can be added to the [${et} software catalog](${ae}).

After this pull request is merged, the component will become available.

For more information, read an [overview of the Backstage software catalog](https://backstage.io/docs/features/software-catalog/software-catalog-overview).`}}async submitPullRequest(Je){const{repositoryUrl:et,fileContent:ae,title:pe,body:ke}=Je,Ze=ze(this.scmIntegrationsApi,et);if(Ze)return await this.submitGitHubPrToRepo({...Ze,repositoryUrl:et,fileContent:ae,title:pe,body:ke});throw new Error("unimplemented!")}async analyzeLocation(Je){const{token:et}=await this.identityApi.getCredentials(),ae=await fetch(`${await this.discoveryApi.getBaseUrl("catalog")}/analyze-location`,{headers:{"Content-Type":"application/json",...et&&{Authorization:`Bearer ${et}`}},method:"POST",body:JSON.stringify({location:{type:"url",target:Je.repo},...this.configApi.getOptionalString("catalog.import.entityFilename")&&{catalogFilename:this.configApi.getOptionalString("catalog.import.entityFilename")}})}).catch(ke=>{throw new Error(`Failed to generate entity definitions, ${ke.message}`)});if(!ae.ok)throw new Error(`Failed to generate entity definitions. Received http response ${ae.status}: ${ae.statusText}`);return await ae.json()}async submitGitHubPrToRepo(Je){const{owner:et,repo:ae,title:pe,body:ke,fileContent:Ze,repositoryUrl:Se,githubIntegrationConfig:pt}=Je,{token:vt}=await this.scmAuthApi.getCredentials({url:Se,additionalScope:{repoWrite:!0}}),zt=new f.v({auth:vt,baseUrl:pt.apiBaseUrl}),Tt=Bt(this.configApi),It=St(this.configApi),Ut=await zt.repos.get({owner:et,repo:ae}).catch(cn=>{throw new Error(Re("Couldn't fetch repo data",cn))}),ln=await zt.git.getRef({owner:et,repo:ae,ref:`heads/${Ut.data.default_branch}`}).catch(cn=>{throw new Error(Re("Couldn't fetch default branch data",cn))});return await zt.git.createRef({owner:et,repo:ae,ref:`refs/heads/${Tt}`,sha:ln.data.object.sha}).catch(cn=>{throw new Error(Re(`Couldn't create a new branch with name '${Tt}'`,cn))}),await zt.repos.createOrUpdateFileContents({owner:et,repo:ae,path:It,message:pe,content:r.DS.encode(Ze),branch:Tt}).catch(cn=>{throw new Error(Re(`Couldn't create a commit with ${It} file added`,cn))}),{link:(await zt.pulls.create({owner:et,repo:ae,title:pe,head:Tt,body:ke,base:Ut.data.default_branch}).catch(cn=>{throw new Error(Re(`Couldn't create a pull request for ${Tt} branch`,cn))})).data.html_url,location:`https://${pt.host}/${et}/${ae}/blob/${Ut.data.default_branch}/${It}`}}}function Re(De,Je){return`${De}, received http response status code ${Je.status}: ${Je.message}`}const _t=(0,e.NT)({id:"catalog-import"}),Ct=(0,e.rx)({id:"catalog-import",apis:[(0,e.ni)({api:_e,deps:{discoveryApi:e.NW,scmAuthApi:d.Om,identityApi:e.$4,scmIntegrationsApi:d.q3,catalogApi:E.Ah,configApi:e.Ds},factory:({discoveryApi:De,scmAuthApi:Je,identityApi:et,scmIntegrationsApi:ae,catalogApi:pe,configApi:ke})=>new Lt({discoveryApi:De,scmAuthApi:Je,scmIntegrationsApi:ae,identityApi:et,catalogApi:pe,configApi:ke})})],routes:{importPage:_t}}),Qt=Ct.provide((0,e.P4)({name:"CatalogImportPage",component:()=>t.e(3626).then(t.bind(t,13626)).then(De=>De.ImportPage),mountPoint:_t}));function st(){const De=(0,e.h_)(e.Ds);return St(De)}const me=De=>{const{exampleLocationUrl:Je="https://github.com/backstage/backstage/blob/master/catalog-info.yaml",exampleRepositoryUrl:et="https://github.com/backstage/backstage"}=De,ae=(0,e.h_)(e.Ds),pe=ae.getOptional("app.title")||"Backstage",ke=(0,e.h_)(_e),Ze=ae.has("integrations.github"),Se=st();return q.createElement(O.rJ,{title:"Register an existing component",titleTypographyProps:{component:"h3"},deepLink:{title:"Learn more about the Software Catalog",link:"https://backstage.io/docs/features/software-catalog/software-catalog-overview"}},q.createElement(h.Z,{variant:"body2",paragraph:!0},"Enter the URL to your source code repository to add it to ",pe,"."),q.createElement(h.Z,{component:"h4",variant:"h6"},"Link to an existing entity file"),q.createElement(h.Z,{variant:"subtitle2",color:"textSecondary",paragraph:!0},"Example: ",q.createElement("code",null,Je)),q.createElement(h.Z,{variant:"body2",paragraph:!0},"The wizard analyzes the file, previews the entities, and adds them to the ",pe," catalog."),Ze&&q.createElement(q.Fragment,null,q.createElement(h.Z,{component:"h4",variant:"h6"},"Link to a repository"," ",q.createElement(R.Z,{label:"GitHub only",variant:"outlined",size:"small"})),q.createElement(h.Z,{variant:"subtitle2",color:"textSecondary",paragraph:!0},"Example: ",q.createElement("code",null,et)),q.createElement(h.Z,{variant:"body2",paragraph:!0},"The wizard discovers all ",q.createElement("code",null,Se)," files in the repository, previews the entities, and adds them to the ",pe," ","catalog."),ke.preparePullRequest&&q.createElement(h.Z,{variant:"body2",paragraph:!0},"If no entities are found, the wizard will prepare a Pull Request that adds an example ",q.createElement("code",null,Se)," and prepares the ",pe," catalog to load all entities as soon as the Pull Request is merged.")))};function ce(De){return{activeFlow:"unknown",activeState:"analyze",analysisUrl:De,previousStates:[]}}function we(De,Je){switch(Je.type){case"onAnalysis":{if(De.activeState!=="analyze")return De;const{activeState:et,previousStates:ae}=De,[pe,ke,Ze,Se]=Je.args;return{...De,analysisUrl:ke,activeFlow:pe,analyzeResult:Ze,prepareResult:Se==null?void 0:Se.prepareResult,activeState:(Se==null?void 0:Se.prepareResult)===void 0?"prepare":"review",previousStates:ae.concat(et)}}case"onPrepare":{if(De.activeState!=="prepare")return De;const{activeState:et,previousStates:ae}=De,[pe,ke]=Je.args;return{...De,prepareResult:pe,activeState:"review",previousStates:ke!=null&&ke.notRepeatable?[]:ae.concat(et)}}case"onReview":{if(De.activeState!=="review")return De;const{activeState:et,previousStates:ae}=De,[pe]=Je.args;return{...De,reviewResult:pe,activeState:"finish",previousStates:ae.concat(et)}}case"onGoBack":{const{activeState:et,previousStates:ae}=De;return{...De,activeState:ae.length>0?ae[ae.length-1]:et,previousStates:ae.slice(0,ae.length-1)}}case"onReset":return{...ce(Je.initialUrl),prepareResult:De.prepareResult};default:throw new Error}}const se=De=>{const[Je,et]=(0,q.useReducer)(we,De==null?void 0:De.initialUrl,ce),{activeFlow:ae,activeState:pe,analysisUrl:ke,previousStates:Ze}=Je;return{activeFlow:ae,activeState:pe,activeStepNumber:["analyze","prepare","review","finish"].indexOf(pe),analysisUrl:ke,analyzeResult:Je.analyzeResult,prepareResult:Je.prepareResult,reviewResult:Je.reviewResult,onAnalysis:(Se,pt,vt,zt)=>et({type:"onAnalysis",args:[Se,pt,vt,zt]}),onPrepare:(Se,pt)=>et({type:"onPrepare",args:[Se,pt]}),onReview:Se=>et({type:"onReview",args:[Se]}),onGoBack:Ze.length>0?()=>et({type:"onGoBack"}):void 0,onReset:()=>et({type:"onReset",initialUrl:De==null?void 0:De.initialUrl})}},Te=(0,rn.Z)(De=>({wrapper:{marginTop:De.spacing(1),marginRight:De.spacing(1),position:"relative"},buttonProgress:{position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12},button:{marginTop:De.spacing(1),marginRight:De.spacing(1)}})),Ae=De=>{const{loading:Je,...et}=De,ae=Te();return q.createElement("div",{className:ae.wrapper},q.createElement(M.Z,{color:"primary",variant:"contained",...et,disabled:De.disabled||De.loading}),De.loading&&q.createElement(z.Z,{size:"1.5rem",className:ae.buttonProgress}),De.loading)},Ne=De=>{const Je=Te();return q.createElement(M.Z,{variant:"outlined",className:Je.button,...De},De.children||"Back")},Q=(0,rn.Z)(De=>({nested:{paddingLeft:De.spacing(4)}}));function T(De){return De.sort((Je,et)=>(0,E.$3)(Je).localeCompare((0,E.$3)(et)))}const X=De=>{const{locations:Je,collapsed:et=!1,locationListItemIcon:ae,onItemClick:pe,firstListItem:ke,withLinks:Ze=!1}=De,Se=(0,e.qD)(),pt=Q(),[vt,zt]=(0,q.useState)([]),Tt=It=>{zt(Ut=>Ut.includes(It)?Ut.filter(ln=>ln!==It):Ut.concat(It))};return q.createElement(K.Z,null,ke,Je.map(It=>q.createElement(q.Fragment,{key:It.target},q.createElement(j.Z,{dense:!0,button:Boolean(pe),onClick:()=>pe==null?void 0:pe.call(void 0,It.target)},q.createElement(ie.Z,null,ae(It.target)),q.createElement(w.Z,{primary:It.target,secondary:`Entities: ${It.entities.length}`}),et&&q.createElement(D.Z,null,q.createElement(P.Z,{edge:"end",onClick:()=>Tt(It.target)},vt.includes(It.target)?q.createElement(xe.Z,null):q.createElement(oe.Z,null)))),q.createElement($.Z,{in:!et||vt.includes(It.target),timeout:"auto",unmountOnExit:!0},q.createElement(K.Z,{component:"div",disablePadding:!0,dense:!0},T(It.entities).map(Ut=>{var ln;const mn=(ln=Se.getSystemIcon(`kind:${Ut.kind.toLocaleLowerCase("en-US")}`))!=null?ln:Ue.Z;return q.createElement(j.Z,{key:(0,E.$3)(Ut),className:pt.nested,...Ze?{component:E.dx,entityRef:Ut,button:Ze}:{}},q.createElement(ie.Z,null,q.createElement(mn,null)),q.createElement(w.Z,{primary:(0,E.$3)(Ut)}))}))))))},ne=({prepareResult:De,onReset:Je})=>{const et=q.createElement(U.Z,{container:!0,spacing:0},q.createElement(Ne,{onClick:Je},"Register another"));if(De.type==="repository")return q.createElement(q.Fragment,null,q.createElement(h.Z,{paragraph:!0},"The following Pull Request has been opened:"," ",q.createElement(O.rU,{to:De.pullRequest.url,target:"_blank",rel:"noreferrer"},De.pullRequest.url)),q.createElement(h.Z,{paragraph:!0},"Your entities will be imported as soon as the Pull Request is merged."),et);const[ae,pe]=p()(De.locations,ke=>ke.exists);return q.createElement(q.Fragment,null,pe.length>0&&q.createElement(q.Fragment,null,q.createElement(h.Z,null,"The following entities have been added to the catalog:"),q.createElement(X,{locations:pe,locationListItemIcon:()=>q.createElement(ct.Z,null),withLinks:!0})),ae.length>0&&q.createElement(q.Fragment,null,q.createElement(h.Z,null,"A refresh was triggered for the following locations:"),q.createElement(X,{locations:ae,locationListItemIcon:()=>q.createElement(ct.Z,null),withLinks:!0})),et)},fe=De=>{const{onAnalysis:Je,analysisUrl:et="",disablePullRequest:ae=!1,exampleLocationUrl:pe="https://github.com/backstage/backstage/blob/master/catalog-info.yaml"}=De,ke=(0,e.h_)(e.VE),Ze=(0,e.h_)(_e),{register:Se,handleSubmit:pt,formState:{errors:vt},watch:zt}=(0,G.cI)({mode:"onTouched",defaultValues:{url:et}}),[Tt,It]=(0,q.useState)(!1),[Ut,ln]=(0,q.useState)(void 0),mn=(0,q.useCallback)(async({url:cn})=>{var En,en,Sn;It(!0);try{const On=await Ze.analyzeUrl(cn);switch(On.type){case"repository":!ae&&On.generatedEntities.length>0?Je("no-location",cn,On):(ln("Couldn't generate entities for your repository"),It(!1));break;case"locations":{On.locations.length===1?Je("single-location",cn,On,{prepareResult:On}):On.locations.length>1?Je("multiple-locations",cn,On):(ln("There are no entities at this location"),It(!1));break}default:{const In=`Received unknown analysis result of type ${On.type}. Please contact the support team.`;ln(In),It(!1),ke.post(new Error(In));break}}}catch(On){ln((Sn=(en=(En=On==null?void 0:On.data)==null?void 0:En.error)==null?void 0:en.message)!=null?Sn:On.message),It(!1)}},[Ze,ae,ke,Je]);return q.createElement("form",{onSubmit:pt(mn)},q.createElement(I.Z,{...dt(Se("url",{required:!0,validate:{httpsValidator:cn=>typeof cn=="string"&&cn.match(/^http[s]?:\/\//)!==null||"Must start with http:// or https://."}})),fullWidth:!0,id:"url",label:"Repository URL",placeholder:pe,helperText:"Enter the full path to your entity file to start tracking your component",margin:"normal",variant:"outlined",error:Boolean(vt.url),required:!0}),vt.url&&q.createElement(m.Z,{error:!0},vt.url.message),Ut&&q.createElement(m.Z,{error:!0},Ut),q.createElement(U.Z,{container:!0,spacing:0},q.createElement(Ae,{disabled:Boolean(vt.url)||!zt("url"),loading:Tt,type:"submit"},"Analyze")))},te=De=>{const{name:Je,options:et,required:ae,errors:pe,rules:ke,loading:Ze=!1,loadingText:Se,helperText:pt,errorHelperText:vt,textFieldProps:zt={}}=De;return q.createElement(G.Qr,{name:Je,rules:ke,render:({field:{onChange:Tt}})=>q.createElement(ye.ZP,{loading:Ze,loadingText:Se,options:et||[],autoSelect:!0,freeSolo:!0,onChange:(It,Ut)=>Tt(Ut),renderInput:It=>q.createElement(I.Z,{...It,helperText:(pe==null?void 0:pe[Je])&&vt||pt,error:Boolean(pe==null?void 0:pe[Je]),margin:"normal",variant:"outlined",required:ae,InputProps:{...It.InputProps,endAdornment:q.createElement(q.Fragment,null,Ze?q.createElement(z.Z,{color:"inherit",size:"1em"}):null,It.InputProps.endAdornment)},...zt})})})},ge=De=>{const{defaultValues:Je,onSubmit:et,render:ae}=De,pe=(0,G.cI)({mode:"onTouched",defaultValues:Je}),{handleSubmit:ke,watch:Ze,control:Se,register:pt,formState:vt,setValue:zt}=pe;return q.createElement(G.RV,{...pe},q.createElement("form",{onSubmit:ke(et)},ae({values:Ze(),formState:vt,register:pt,control:Se,setValue:zt})))},He=De=>{const{repositoryUrl:Je,entities:et,classes:ae}=De,pe=st();return q.createElement(x.Z,{variant:"outlined",className:ae==null?void 0:ae.card},q.createElement(W.Z,{title:q.createElement("code",null,`${(0,be.trimEnd)(Je,"/")}/${pe}`)}),q.createElement(Ee.Z,{className:ae==null?void 0:ae.cardContent},q.createElement(O.Oi,{text:et.map(ke=>nt.ZP.stringify(ke)).join(`---
`).trim(),language:"yaml"})))},it=De=>{const{title:Je,description:et,classes:ae}=De;return q.createElement(x.Z,{variant:"outlined",className:ae==null?void 0:ae.card},q.createElement(W.Z,{title:Je,subheader:"Create a new Pull Request"}),q.createElement(Ee.Z,{className:ae==null?void 0:ae.cardContent},q.createElement(O.SA,{content:et})))},ht=(0,rn.Z)(De=>({previewCard:{marginTop:De.spacing(1)},previewCardContent:{paddingTop:0}}));function ve(De,Je,et){return De.map(ae=>({...ae,apiVersion:ae.apiVersion,kind:ae.kind,metadata:{...ae.metadata,name:Je},spec:{...ae.spec,...et?{owner:et}:{}}}))}const Fe=De=>{var Je,et,ae,pe,ke,Ze;const{analyzeResult:Se,onPrepare:pt,onGoBack:vt,renderFormFields:zt}=De,Tt=ht(),It=(0,e.h_)(E.Ah),Ut=(0,e.h_)(_e),ln=(0,e.h_)(e.VE),[mn,cn]=(0,q.useState)(!1),[En,en]=(0,q.useState)(),Sn=st(),{loading:On,value:In,error:Ln}=(0,F.default)(()=>Ut.preparePullRequest(),[Ut.preparePullRequest]);(0,q.useEffect)(()=>{Ln&&ln.post(Ln)},[Ln,ln]);const{loading:Dn,value:Mn}=(0,F.default)(async()=>(await It.getEntities({filter:{kind:"group"}})).items.map($n=>(0,E.$3)($n,{defaultKind:"group"})).sort()),Zn=(0,q.useCallback)(async Rn=>{cn(!0);try{const $n=await Ut.submitPullRequest({repositoryUrl:Se.url,title:Rn.title,body:Rn.body,fileContent:ve(Se.generatedEntities,Rn.componentName,Rn.owner).map(Vn=>nt.ZP.stringify(Vn)).join(`---
`)});pt({type:"repository",url:Se.url,integrationType:Se.integrationType,pullRequest:{url:$n.link},locations:[{target:$n.location,entities:ve(Se.generatedEntities,Rn.componentName,Rn.owner).map(Vn=>({kind:Vn.kind,namespace:Vn.metadata.namespace,name:Vn.metadata.name}))}]},{notRepeatable:!0})}catch($n){(0,ft.BD)($n),en($n.message),cn(!1)}},[Se.generatedEntities,Se.integrationType,Se.url,Ut,pt]);return q.createElement(q.Fragment,null,q.createElement(h.Z,null,"You entered a link to a ",Se.integrationType," repository but a"," ",q.createElement("code",null,Sn)," could not be found. Use this form to open a Pull Request that creates one."),!On&&q.createElement(ge,{onSubmit:Zn,defaultValues:{title:(Je=In==null?void 0:In.title)!=null?Je:"",body:(et=In==null?void 0:In.body)!=null?et:"",owner:((pe=(ae=Se.generatedEntities[0])==null?void 0:ae.spec)==null?void 0:pe.owner)||"",componentName:((Ze=(ke=Se.generatedEntities[0])==null?void 0:ke.metadata)==null?void 0:Ze.name)||"",useCodeowners:!1},render:({values:Rn,formState:$n,register:Vn,setValue:cr})=>q.createElement(q.Fragment,null,zt({values:Rn,formState:$n,register:Vn,setValue:cr,groups:Mn!=null?Mn:[],groupsLoading:Dn}),q.createElement(Be.Z,{marginTop:2},q.createElement(h.Z,{variant:"h6"},"Preview Pull Request")),q.createElement(it,{title:Rn.title,description:Rn.body,classes:{card:Tt.previewCard,cardContent:Tt.previewCardContent}}),q.createElement(Be.Z,{marginTop:2,marginBottom:1},q.createElement(h.Z,{variant:"h6"},"Preview Entities")),q.createElement(He,{entities:ve(Se.generatedEntities,Rn.componentName,Rn.owner),repositoryUrl:Se.url,classes:{card:Tt.previewCard,cardContent:Tt.previewCardContent}}),En&&q.createElement(m.Z,{error:!0},En),q.createElement(U.Z,{container:!0,spacing:0},vt&&q.createElement(Ne,{onClick:vt,disabled:mn}),q.createElement(Ae,{type:"submit",disabled:Boolean($n.errors.title||$n.errors.body||$n.errors.owner),loading:mn},"Create PR")))}))},mt=({analyzeResult:De,prepareResult:Je,onPrepare:et,onGoBack:ae})=>{const[pe,ke]=(0,q.useState)((Je==null?void 0:Je.locations.map(Tt=>Tt.target))||[]),[Ze,Se]=p()(De==null?void 0:De.locations,Tt=>Tt.exists),pt=(0,q.useCallback)(async()=>{et({type:"locations",locations:Se.filter(Tt=>pe.includes(Tt.target))})},[Se,et,pe]),vt=Tt=>{ke(It=>It.includes(Tt)?It.filter(Ut=>Ut!==Tt):It.concat(Tt))},zt=()=>{ke(Tt=>Tt.length<Se.length?Se.map(It=>It.target):[])};return q.createElement(q.Fragment,null,Se.length>0&&q.createElement(q.Fragment,null,q.createElement(h.Z,null,"Select one or more locations that are present in your git repository:"),q.createElement(X,{firstListItem:q.createElement(j.Z,{dense:!0,button:!0,onClick:zt},q.createElement(ie.Z,null,q.createElement(Ve.Z,{edge:"start",checked:pe.length===Se.length,indeterminate:pe.length>0&&pe.length<Se.length,tabIndex:-1,disableRipple:!0})),q.createElement(w.Z,{primary:"Select All"})),onItemClick:vt,locations:Se,locationListItemIcon:Tt=>q.createElement(Ve.Z,{edge:"start",checked:pe.includes(Tt),tabIndex:-1,disableRipple:!0}),collapsed:!0})),Ze.length>0&&q.createElement(q.Fragment,null,q.createElement(h.Z,null,"These locations already exist in the catalog:"),q.createElement(X,{locations:Ze,locationListItemIcon:()=>q.createElement(ct.Z,null),withLinks:!0,collapsed:!0})),q.createElement(U.Z,{container:!0,spacing:0},ae&&q.createElement(Ne,{onClick:ae}),q.createElement(Ae,{disabled:pe.length===0,onClick:pt},"Review")))},$t=({prepareResult:De,onReview:Je,onGoBack:et})=>{const ae=(0,e.h_)(E.Ah),ke=(0,e.h_)(e.Ds).getOptional("app.title")||"Backstage",[Ze,Se]=(0,q.useState)(!1),[pt,vt]=(0,q.useState)(),zt=!!(De.type==="locations"&&De.locations.some(It=>It.exists)),Tt=(0,q.useCallback)(async()=>{Se(!0);try{let It=new Array;De.type==="locations"&&(It=await Promise.all(De.locations.filter(ln=>ln.exists).map(async ln=>{var mn;const cn=(0,N.eE)((mn=ln.entities[0])!=null?mn:ln);return await ae.refreshEntity(cn),{target:ln.target}})));const Ut=await Promise.all(De.locations.filter(ln=>!ln.exists).map(async ln=>{const mn=await ae.addLocation({type:"url",target:ln.target});return{target:mn.location.target,entities:mn.entities}}));Je({...De,refreshed:It,locations:Ut})}catch(It){(0,ft.BD)(It),De.type==="repository"&&It.message.startsWith("Location was added but has no entities specified yet")?Je({...De,locations:De.locations.map(Ut=>({target:Ut.target,entities:[]}))}):(vt(It.message),Se(!1))}},[De,Je,ae]);return q.createElement(q.Fragment,null,De.type==="repository"&&q.createElement(q.Fragment,null,q.createElement(h.Z,{paragraph:!0},"The following Pull Request has been opened:"," ",q.createElement(O.rU,{to:De.pullRequest.url,target:"_blank",rel:"noopener noreferrer"},De.pullRequest.url)),q.createElement(h.Z,{paragraph:!0},"You can already import the location and ",ke," will fetch the entities as soon as the Pull Request is merged.")),q.createElement(h.Z,null,zt?"The following locations already exist in the catalog:":"The following entities will be added to the catalog:"),q.createElement(X,{locations:De.locations,locationListItemIcon:()=>q.createElement(ct.Z,null)}),pt&&q.createElement(m.Z,{error:!0},pt),q.createElement(U.Z,{container:!0,spacing:0},et&&q.createElement(Ne,{onClick:et,disabled:Ze}),q.createElement(Ae,{disabled:Ze,loading:Ze,onClick:()=>Tt()},zt?"Refresh":"Import")))};function Zt(De,Je){switch(De){case"single-location":return{...Je,prepare:()=>({stepLabel:q.createElement(qe.Z,{optional:q.createElement(h.Z,{variant:"caption"},"Discovered Locations: 1")},"Select Locations"),content:q.createElement(q.Fragment,null)})};case"multiple-locations":return{...Je,prepare:(et,ae)=>et.analyzeResult.type!=="locations"?Je.prepare(et,ae):{stepLabel:q.createElement(qe.Z,{optional:q.createElement(h.Z,{variant:"caption"},"Discovered Locations: ",et.analyzeResult.locations.length)},"Select Locations"),content:q.createElement(mt,{analyzeResult:et.analyzeResult,prepareResult:et.prepareResult,onPrepare:et.onPrepare,onGoBack:et.onGoBack})}};case"no-location":return{...Je,prepare:(et,ae)=>et.analyzeResult.type!=="repository"?Je.prepare(et,ae):{stepLabel:q.createElement(qe.Z,null,"Create Pull Request"),content:q.createElement(Fe,{analyzeResult:et.analyzeResult,onPrepare:et.onPrepare,onGoBack:et.onGoBack,renderFormFields:({values:pe,setValue:ke,formState:Ze,groupsLoading:Se,groups:pt,register:vt})=>q.createElement(q.Fragment,null,q.createElement(Be.Z,{marginTop:2},q.createElement(h.Z,{variant:"h6"},"Pull Request Details")),q.createElement(I.Z,{...dt(vt("title",{required:!0})),label:"Pull Request Title",placeholder:"Add Backstage catalog entity descriptor files",margin:"normal",variant:"outlined",fullWidth:!0,error:Boolean(Ze.errors.title),required:!0}),q.createElement(I.Z,{...dt(vt("body",{required:!0})),label:"Pull Request Body",placeholder:"A describing text with Markdown support",margin:"normal",variant:"outlined",fullWidth:!0,error:Boolean(Ze.errors.body),multiline:!0,required:!0}),q.createElement(Be.Z,{marginTop:2},q.createElement(h.Z,{variant:"h6"},"Entity Configuration")),q.createElement(I.Z,{...dt(vt("componentName",{required:!0})),label:"Name of the created component",placeholder:"my-component",margin:"normal",variant:"outlined",fullWidth:!0,error:Boolean(Ze.errors.componentName),required:!0}),!pe.useCodeowners&&q.createElement(te,{name:"owner",errors:Ze.errors,options:pt||[],loading:Se,loadingText:"Loading groups\u2026",helperText:"Select an owner from the list or enter a reference to a Group or a User",errorHelperText:"required value",textFieldProps:{label:"Entity Owner",placeholder:"my-group"},rules:{required:!0},required:!0}),q.createElement(Et.Z,{control:q.createElement(Ve.Z,{...dt(vt("useCodeowners")),onChange:(zt,Tt)=>{Tt&&ke("owner","")}}),label:q.createElement(q.Fragment,null,"Use ",q.createElement("em",null,"CODEOWNERS")," file as Entity Owner")}),q.createElement(m.Z,null,"WARNING: This may fail if no CODEOWNERS file is found at the target location."))})}};default:return Je}}const Gt={analyze:(De,{apis:Je})=>({stepLabel:q.createElement(qe.Z,null,"Select URL"),content:q.createElement(fe,{key:"analyze",analysisUrl:De.analysisUrl,onAnalysis:De.onAnalysis,disablePullRequest:!Je.catalogImportApi.preparePullRequest})}),prepare:De=>({stepLabel:q.createElement(qe.Z,{optional:q.createElement(h.Z,{variant:"caption"},"Optional")},"Import Actions"),content:q.createElement(Ne,{onClick:De.onGoBack})}),review:De=>({stepLabel:q.createElement(qe.Z,null,"Review"),content:q.createElement($t,{prepareResult:De.prepareResult,onReview:De.onReview,onGoBack:De.onGoBack})}),finish:De=>({stepLabel:q.createElement(qe.Z,null,"Finish"),content:q.createElement(ne,{prepareResult:De.prepareResult,onReset:De.onReset})})},Jt=(0,rn.Z)(()=>({stepperRoot:{padding:0}})),xt=De=>{const{initialUrl:Je,generateStepper:et=Zt,variant:ae}=De,pe=(0,e.h_)(_e),ke=Jt(),Ze=se({initialUrl:Je}),Se=(0,q.useMemo)(()=>et(Ze.activeFlow,Gt),[et,Ze.activeFlow]),pt=vt=>q.createElement(at.Z,null,vt.stepLabel,q.createElement(Pt.Z,null,vt.content));return q.createElement(O.rJ,{variant:ae},q.createElement(At.Z,{classes:{root:ke.stepperRoot},activeStep:Ze.activeStepNumber,orientation:"vertical"},pt(Se.analyze(Ze,{apis:{catalogImportApi:pe}})),pt(Se.prepare(Ze,{apis:{catalogImportApi:pe}})),pt(Se.review(Ze,{apis:{catalogImportApi:pe}})),pt(Se.finish(Ze,{apis:{catalogImportApi:pe}}))))},sn=()=>{const Je=(0,e.h_)(e.Ds).getOptional("app.title")||"Backstage";return q.createElement(O.T3,{themeId:"home"},q.createElement(O.h4,{title:"Register an existing component"}),q.createElement(O.VY,null,q.createElement(O.yW,{title:`Start tracking your component in ${Je}`},q.createElement(O.qt,null,"Start tracking your component in ",Je," by adding it to the software catalog.")),q.createElement(U.Z,{container:!0,spacing:2,direction:"row-reverse"},q.createElement(U.Z,{item:!0,xs:12,md:4,lg:6,xl:8},q.createElement(me,null)),q.createElement(U.Z,{item:!0,xs:12,md:8,lg:6,xl:4},q.createElement(xt,null)))))}},73495:function(Mt,g,t){t.d(g,{$3:function(){return et},Ah:function(){return $t},CR:function(){return v},CV:function(){return vt},EW:function(){return lr},LH:function(){return ot},N$:function(){return l},UO:function(){return Rn},U_:function(){return an},Uh:function(){return Vn},X2:function(){return Dn},ZW:function(){return o},_i:function(){return sn},ce:function(){return Mn},df:function(){return tt},dq:function(){return Vt},dx:function(){return ae},eK:function(){return ur},h$:function(){return In},hF:function(){return pt},hd:function(){return Je},n3:function(){return e.n3},nN:function(){return xn},nl:function(){return Jn},p3:function(){return Zt},pp:function(){return Cn},rI:function(){return ke},sL:function(){return Pe},tW:function(){return L},u3:function(){return H},wi:function(){return De},wp:function(){return $n},xE:function(){return Y},zo:function(){return Tt}});var e=t(88285),d=t(30705),E=t(82394),f=t.n(E),r=t(2784),c=t(41156),S=t(60364),O=t(77277),h=t(4190),R=t(95544),M=t(90436),z=t(60905),K=t(80030),j=t(79692),ie=t(5806),w=t(21324),D=t(86619),P=t(15223),$=t(42494),U=t(29611),I=t(50581),m=t(61837),x=t(15459),W=t(55999),Ee=t(49378),Be=t(54506),Ve=t(94339),qe=t(24579),Et=t(38402),at=t(86136),Pt=t(11776),At=t(8629),q=t(79249),rn=t(38724),ct=t(99152),xe=t(6487),oe=t(49429),Ue=t(85256),de=t(12231),p=t(9520),G=t(36444),ye=t(49558),nt=t(82108),be=t.n(nt),je=t(829),ft=t.n(je),F=t(64279),N=t(34520),_e=t(18473),ze=t(76635),dt=t.n(ze),St=t(19126),Bt=t.n(St),Lt=t(73557),Re=t(69294),_t=t(48760),Ct=t(90736),Qt=t(18149),st=t.n(Qt),me=t(72164),ce=t(56563),we=t(19996),se=t(25505),Te=t(38016),Ae=t(88013),Ne=t(99688),Q=t(33375),T=t(21853),X=t(11640),ne=t(28347),fe=t(72779),te=t.n(fe),ge=t(39412),He=t(27685),it=t(3440),ht=t.n(it),ve=t(72847),Fe=t(32272),mt=t(47603);const $t=(0,d.T0)({id:"plugin.catalog.service"}),Zt=(0,d.T0)({id:"catalog-react.starred-entities"});class Gt{constructor(){this.starredEntities=new Set,this.subscribers=new Set,this.observable=new ObservableImpl(le=>(le.next(new Set(this.starredEntities)),this.subscribers.add(le),()=>{this.subscribers.delete(le)}))}async toggleStarred(le){this.starredEntities.delete(le)||this.starredEntities.add(le);for(const Me of this.subscribers)Me.next(new Set(this.starredEntities))}starredEntitie$(){return this.observable}}const Jt=ee=>{const le=(0,c.Z)(ut=>ut.breakpoints.down("md")),Me=(0,S.Z)(),[Ce,Ye]=(0,r.useState)(!1);return le?r.createElement(r.Fragment,null,r.createElement(O.Z,{style:{marginTop:Me.spacing(1),marginLeft:Me.spacing(1)},onClick:()=>Ye(!0),startIcon:r.createElement(G.Z,null)},"Filters"),r.createElement(h.ZP,{open:Ce,onClose:()=>Ye(!1),anchor:"left",disableAutoFocus:!0,keepMounted:!0,variant:"temporary"},r.createElement(R.Z,{m:2},r.createElement(M.Z,{variant:"h6",component:"h2",style:{marginBottom:Me.spacing(1)}},"Filters"),ee.children))):r.createElement(z.Z,{item:!0,lg:2},ee.children)},xt=ee=>r.createElement(z.Z,{item:!0,xs:12,lg:10},ee.children),sn=ee=>r.createElement(z.Z,{container:!0,style:{position:"relative"}},ee.children);sn.Filters=Jt,sn.Content=xt;const De=(0,_e.uW)("catalog:entity-route-ref",()=>(0,d.NT)({id:"catalog:entity",params:["namespace","kind","name"]}));function Je(ee){var le,Me;return{kind:ee.kind.toLocaleLowerCase("en-US"),namespace:(Me=(le=ee.metadata.namespace)==null?void 0:le.toLocaleLowerCase("en-US"))!=null?Me:N.zG,name:ee.metadata.name}}function et(ee,le){const Me=le==null?void 0:le.defaultKind;let Ce,Ye,ut;return"metadata"in ee?(Ce=ee.kind,Ye=ee.metadata.namespace,ut=ee.metadata.name):(Ce=ee.kind,Ye=ee.namespace,ut=ee.name),(Ye===void 0||Ye==="")&&(Ye=N.zG),(le==null?void 0:le.defaultNamespace)!==void 0?(le==null?void 0:le.defaultNamespace)===Ye&&(Ye=void 0):Ye===N.zG&&(Ye=void 0),Ce=Ce.toLocaleLowerCase("en-US"),Ce=Me&&Me.toLocaleLowerCase("en-US")===Ce?void 0:Ce,`${Ce?`${Ce}:`:""}${Ye?`${Ye}/`:""}${ut}`}const ae=(0,r.forwardRef)((ee,le)=>{var Me;const{entityRef:Ce,defaultKind:Ye,title:ut,children:lt,...yt}=ee,Nt=(0,d.tg)(De);let Ft,Xt,Yt;if(typeof Ce=="string"){const yn=(0,N.of)(Ce);Ft=yn.kind,Xt=yn.namespace,Yt=yn.name}else"metadata"in Ce?(Ft=Ce.kind,Xt=Ce.metadata.namespace,Yt=Ce.metadata.name):(Ft=Ce.kind,Xt=Ce.namespace,Yt=Ce.name);Ft=Ft.toLocaleLowerCase("en-US"),Xt=(Me=Xt==null?void 0:Xt.toLocaleLowerCase("en-US"))!=null?Me:N.zG;const hn={kind:Ft,namespace:Xt,name:Yt},Kn=et({kind:Ft,namespace:Xt,name:Yt},{defaultKind:Ye}),kn=r.createElement(ye.rU,{...yt,ref:le,to:Nt(hn)},lt,!lt&&(ut!=null?ut:Kn));return ut?r.createElement(K.ZP,{title:Kn},kn):kn});function pe(ee){const{entityRefs:le,defaultKind:Me,getTitle:Ce,...Ye}=ee,ut=(0,d.h_)($t),{value:lt=new Array,loading:yt,error:Nt}=(0,F.default)(async()=>{const Ft=le.reduce((Yt,hn)=>"metadata"in hn?Yt:[...Yt,(0,N.of)(hn)],new Array),Xt=le.filter(Yt=>"metadata"in Yt);return Ft.length>0?[...(await ut.getEntities({filter:Ft.map(Yt=>({kind:Yt.kind,"metadata.namespace":Yt.namespace,"metadata.name":Yt.name}))})).items,...Xt]:Xt},[le]);return yt?r.createElement(ye.Ex,null):Nt?r.createElement(ye.yu,{error:Nt}):r.createElement(r.Fragment,null,lt.map((Ft,Xt)=>r.createElement(r.Fragment,{key:Xt},Xt>0&&", ",r.createElement(ae,{...Ye,defaultKind:Me,entityRef:Ft,title:Ce(Ft)}))))}function ke(ee){const{entityRefs:le,defaultKind:Me,fetchEntities:Ce,getTitle:Ye,...ut}=ee;return Ce?r.createElement(pe,{...ut,defaultKind:Me,entityRefs:le,getTitle:Ye}):r.createElement(r.Fragment,null,le.map((lt,yt)=>r.createElement(r.Fragment,{key:yt},yt>0&&", ",r.createElement(ae,{...ut,defaultKind:Me,entityRef:lt,title:Ye?Ye(lt):void 0}))))}function Ze(ee){return ee.reduce((le,Me)=>({...le,...Me.getCatalogFilters?Me.getCatalogFilters():{}}),{})}function Se(ee){return le=>ee.every(Me=>!Me.filterEntity||Me.filterEntity(le))}function pt(ee,le,Me){var Ce;let Ye=((Ce=ee==null?void 0:ee.relations)==null?void 0:Ce.filter(ut=>ut.type===le).map(ut=>(0,N.of)(ut.targetRef)))||[];return Me!=null&&Me.kind&&(Ye=Ye.filter(ut=>ut.kind.toLocaleLowerCase("en-US")===Me.kind.toLocaleLowerCase("en-US"))),Ye}function vt(ee,le){var Me;const Ce=(Me=ee.metadata.annotations)==null?void 0:Me[N.M6];if(!!Ce)try{const Ye=(0,N.Ou)(Ce),ut=le.byUrl(Ye.target);return{locationTargetUrl:Ye.target,integrationType:ut==null?void 0:ut.type}}catch{return}}function zt(ee,le){const Me=new Set([...pt(ee,RELATION_MEMBER_OF,{kind:"group"}),...ee?[getCompoundEntityRef(ee)]:[]].map(stringifyEntityRef)),Ce=pt(le,RELATION_OWNED_BY).map(stringifyEntityRef);for(const Ye of Ce)if(Me.has(Ye))return!0;return!1}class Tt{constructor(le){this.value=le}getCatalogFilters(){return{kind:this.value}}toQueryValue(){return this.value}}class It{constructor(le){this.value=le}getTypes(){return Array.isArray(this.value)?this.value:[this.value]}getCatalogFilters(){return{"spec.type":this.getTypes()}}toQueryValue(){return this.getTypes()}}class Ut{constructor(le){this.values=le}filterEntity(le){return this.values.every(Me=>{var Ce;return((Ce=le.metadata.tags)!=null?Ce:[]).includes(Me)})}toQueryValue(){return this.values}}class ln{constructor(le){this.value=le}filterEntity(le){const Me=this.toUpperArray(this.value.split(/\s/)),Ce=this.toUpperArray([le.metadata.tags]),Ye=this.toUpperArray([le.metadata.name,le.metadata.title]);for(const ut of Me)if(Ce.every(lt=>lt!==ut)&&Ye.every(lt=>!lt.includes(ut)))return!1;return!0}toUpperArray(le){return le.flat().filter(Me=>Boolean(Me)).map(Me=>Me.toLocaleUpperCase("en-US"))}}class mn{constructor(le){this.values=le}filterEntity(le){return this.values.some(Me=>pt(le,N.S4).some(Ce=>et(Ce,{defaultKind:"group"})===Me))}toQueryValue(){return this.values}}class cn{constructor(le){this.values=le}filterEntity(le){return this.values.some(Me=>{var Ce;return((Ce=le.spec)==null?void 0:Ce.lifecycle)===Me})}toQueryValue(){return this.values}}class En{constructor(le,Me,Ce){this.value=le,this.isOwnedEntity=Me,this.isStarredEntity=Ce}filterEntity(le){switch(this.value){case"owned":return this.isOwnedEntity(le);case"starred":return this.isStarredEntity(le);default:return!0}}toQueryValue(){return this.value}}class en{constructor(le){this.value=le}filterEntity(le){var Me;const Ce=(Me=le.metadata.annotations)==null?void 0:Me["backstage.io/orphan"];return Ce!==void 0&&this.value.toString()===Ce}}class Sn{constructor(le){this.value=le}filterEntity(le){var Me,Ce;const Ye=((Ce=(Me=le==null?void 0:le.status)==null?void 0:Me.items)==null?void 0:Ce.length)>0;return Ye!==void 0&&this.value===Ye}}const On=(0,_e.CT)("entity-context"),In=({children:ee,entity:le,loading:Me,error:Ce,refresh:Ye})=>{const ut={entity:le,loading:Me,error:Ce,refresh:Ye};return r.createElement(On.Provider,{value:(0,_e.EI)({1:ut})},ee)},Ln=ee=>React.createElement(In,{entity:ee.entity,loading:!Boolean(ee.entity),error:void 0,refresh:void 0,children:ee.children});function Dn(){const ee=(0,_e.Vt)("entity-context");if(!ee)throw new Error("Entity context is not available");const le=ee.atVersion(1);if(!le)throw new Error("EntityContext v1 not available");if(!le.entity)throw new Error("useEntity hook is being called outside of an EntityLayout where the entity has not been loaded. If this is intentional, please use useAsyncEntity instead.");return{entity:le.entity}}function Mn(){const ee=(0,_e.Vt)("entity-context");if(!ee)throw new Error("Entity context is not available");const le=ee.atVersion(1);if(!le)throw new Error("EntityContext v1 not available");const{entity:Me,loading:Ce,error:Ye,refresh:ut}=le;return{entity:Me,loading:Ce,error:Ye,refresh:ut}}const Zn=(0,r.createContext)(void 0),Rn=({children:ee})=>{const le=(0,Ct.default)(),Me=(0,d.h_)($t),[Ce,Ye]=(0,r.useState)({}),ut=(0,Lt.TH)(),lt=(0,r.useMemo)(()=>{var kn;return(kn=Bt().parse(ut.search,{ignoreQueryPrefix:!0}).filters)!=null?kn:{}},[ut]),[yt,Nt]=(0,r.useState)(()=>({appliedFilters:{},entities:[],backendEntities:[]})),[{loading:Ft,error:Xt},Yt]=(0,Re.default)(async()=>{var kn;const yn=(0,ze.compact)(Object.values(Ce)),Hn=Se(yn),fr=Ze(yn),Nr=Ze((0,ze.compact)(Object.values(yt.appliedFilters))),wr=Object.keys(Ce).reduce((Ar,Ir)=>{const br=Ce[Ir];return br!=null&&br.toQueryValue&&(Ar[Ir]=br.toQueryValue()),Ar},{});if((0,ze.isEqual)(Nr,fr))Nt({appliedFilters:Ce,backendEntities:yt.backendEntities,entities:yt.backendEntities.filter(Hn)});else{const Ar=await Me.getEntities({filter:fr});Nt({appliedFilters:Ce,backendEntities:Ar.items,entities:Ar.items.filter(Hn)})}if(le()){const Ar=Bt().parse(ut.search,{ignoreQueryPrefix:!0}),Ir=Bt().stringify({...Ar,filters:wr},{addQueryPrefix:!0,arrayFormat:"repeat"}),br=`${window.location.pathname}${Ir}`;(kn=window.history)==null||kn.replaceState(null,document.title,br)}},[Me,lt,Ce,yt],{loading:!0});(0,_t.Z)(Yt,10,[Ce]);const hn=(0,r.useCallback)(kn=>{Ye(yn=>{const Hn=typeof kn=="function"?kn(yn):kn;return{...yn,...Hn}})},[]),Kn=(0,r.useMemo)(()=>({filters:yt.appliedFilters,entities:yt.entities,backendEntities:yt.backendEntities,updateFilters:hn,queryParameters:lt,loading:Ft,error:Xt}),[yt,hn,lt,Ft,Xt]);return r.createElement(Zn.Provider,{value:Kn},ee)};function $n(){const ee=(0,r.useContext)(Zn);if(!ee)throw new Error("useEntityList must be used within EntityListProvider");return ee}function Vn(){var ee;const le=(0,d.h_)($t),{filters:{kind:Me,type:Ce},queryParameters:{type:Ye},updateFilters:ut}=$n(),lt=(0,r.useMemo)(()=>[Ye].flat().filter(Boolean),[Ye]),[yt,Nt]=(0,r.useState)(lt.length?lt:(ee=Ce==null?void 0:Ce.getTypes())!=null?ee:[]);(0,r.useEffect)(()=>{lt.length&&Nt(lt)},[lt]);const[Ft,Xt]=(0,r.useState)([]),Yt=(0,r.useMemo)(()=>Me==null?void 0:Me.value,[Me]),{error:hn,loading:Kn,value:kn}=(0,F.default)(async()=>Yt?await le.getEntityFacets({filter:{kind:Yt},facets:["spec.type"]}).then(fr=>fr.facets["spec.type"]||[]):[],[Yt,le]),yn=(0,r.useRef)(kn);return(0,r.useEffect)(()=>{const Hn=yn.current;if(yn.current=kn,Kn||!Yt||Hn===kn||!kn)return;const fr=[...new Set(ft()(kn,wr=>-wr.count).map(wr=>wr.value.toLocaleLowerCase("en-US")))];Xt(fr);const Nr=yt.filter(wr=>fr.includes(wr));st()(yt,Nr)||Nt(Nr)},[Kn,Yt,yt,Nt,kn]),(0,r.useEffect)(()=>{ut({type:yt.length?new It(yt):void 0})},[yt,ut]),{loading:Kn,error:hn,availableTypes:Ft,selectedTypes:yt,setSelectedTypes:Nt}}const cr=20;function ur(ee,le){var Me,Ce;const Ye=(Me=le==null?void 0:le.type)==null?void 0:Me.toLocaleLowerCase("en-US"),ut=(Ce=le==null?void 0:le.kind)==null?void 0:Ce.toLocaleLowerCase("en-US"),lt=(0,d.h_)($t),{loading:yt,value:Nt,error:Ft}=(0,F.default)(async()=>{var Xt;const Yt=(Xt=ee.relations)==null?void 0:Xt.map(yn=>({type:yn.type,target:(0,N.of)(yn.targetRef)})).filter(yn=>(!Ye||yn.type.toLocaleLowerCase("en-US")===Ye)&&(!ut||yn.target.kind===ut));if(!Yt)return[];const hn=Object.values((0,ze.groupBy)(Yt,({target:yn})=>`${yn.kind}:${yn.namespace}`.toLocaleLowerCase("en-US"))),Kn=[];for(const yn of hn)Kn.push({kind:yn[0].target.kind,namespace:yn[0].target.namespace,nameBatches:(0,ze.chunk)(yn.map(Hn=>Hn.target.name),cr)});return(await Promise.all(Kn.flatMap(yn=>yn.nameBatches.map(Hn=>lt.getEntities({filter:{kind:yn.kind,"metadata.namespace":yn.namespace,"metadata.name":Hn}}))))).flatMap(yn=>yn.items)},[ee,Ye,ut]);return{entities:Nt,loading:yt,error:Ft}}function Z(ee){return typeof ee=="string"?ee:(0,N.eE)(ee)}function v(){const ee=(0,d.h_)(Zt),le=(0,me.Z)(ee.starredEntitie$(),new Set),Me=(0,r.useCallback)(Ye=>le.has(Z(Ye)),[le]),Ce=(0,r.useCallback)(Ye=>ee.toggleStarred(Z(Ye)).then(),[ee]);return{starredEntities:le,toggleStarredEntity:Ce,isStarredEntity:Me}}function i(ee){return typeof ee=="string"?ee:(0,N.eE)(ee)}function u(ee){const le=(0,d.h_)(Zt),[Me,Ce]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{const ut=le.starredEntitie$().subscribe({next(lt){Ce(lt.has(i(ee)))}});return()=>{ut.unsubscribe()}},[ee,le]),{toggleStarredEntity:(0,r.useCallback)(()=>le.toggleStarred(i(ee)).then(),[ee,le]),isStarredEntity:Me}}function o(){const ee=(0,d.h_)(d.$4),{loading:le,value:Me}=(0,F.default)(async()=>{const{ownershipEntityRefs:Ye}=await ee.getBackstageIdentity();return Ye},[]),Ce=(0,r.useMemo)(()=>{const Ye=new Set(Me!=null?Me:[]);return ut=>{const lt=pt(ut,N.S4).map(N.eE);for(const yt of lt)if(Ye.has(yt))return!0;return!1}},[Me]);return(0,r.useMemo)(()=>({loading:le,isOwnedEntity:Ce}),[le,Ce])}function l(ee){const{entity:le,loading:Me,error:Ce}=Mn(),{allowed:Ye,loading:ut,error:lt}=(0,ce.gI)({permission:ee,resourceRef:le?(0,N.eE)(le):void 0});return Me||ut?{loading:!0,allowed:!1}:Ce?{loading:!1,allowed:!1,error:Ce}:{loading:!1,allowed:Ye,error:lt}}function _(){const ee=(0,d.h_)($t),[le,Me]=(0,r.useState)([]),{error:Ce,loading:Ye,value:ut}=(0,F.default)(async()=>{const yt="kind";return await ee.getEntityFacets({facets:[yt]}).then(Ft=>Ft.facets[yt]||[])},[ee]),lt=(0,r.useRef)(ut);return(0,r.useEffect)(()=>{const yt=lt.current;if(lt.current=ut,Ye||yt===ut||!ut)return;const Nt=[...new Set(ft()(ut,Ft=>Ft.value).map(Ft=>Ft.value.toLocaleLowerCase("en-US")))];Me(Nt)},[Ye,ut,Me]),{loading:Ye,error:Ce,availableKinds:le}}function b(ee){var le,Me;const{filters:Ce,queryParameters:{kind:Ye},updateFilters:ut}=$n(),lt=(0,r.useMemo)(()=>[Ye].flat()[0],[Ye]),[yt,Nt]=(0,r.useState)((Me=lt!=null?lt:(le=Ce.kind)==null?void 0:le.value)!=null?Me:ee.initialFilter);(0,r.useEffect)(()=>{lt&&Nt(lt)},[lt]),(0,r.useEffect)(()=>{var hn,Kn;(hn=Ce.kind)!=null&&hn.value&&Nt((Kn=Ce.kind)==null?void 0:Kn.value)},[Ce.kind]);const{availableKinds:Ft,loading:Xt,error:Yt}=_();return(0,r.useEffect)(()=>{ut({kind:yt?new Tt(yt):void 0})},[yt,ut]),{loading:Xt,error:Yt,availableKinds:Ft,selectedKind:yt,setSelectedKind:Nt}}const L=ee=>{const{hidden:le,initialFilter:Me="component"}=ee,Ce=(0,d.h_)(d.$v),{error:Ye,availableKinds:ut,selectedKind:lt,setSelectedKind:yt}=b({initialFilter:Me});if((0,r.useEffect)(()=>{Ye&&Ce.post({message:"Failed to load entity kinds",severity:"error"})},[Ye,Ce]),(ut==null?void 0:ut.length)===0||Ye)return null;const Nt=[...ut.map(Ft=>({value:Ft,label:be()(Ft)}))];return le?null:r.createElement(R.Z,{pb:1,pt:1},r.createElement(ye.Ph,{label:"Kind",items:Nt,selected:lt,onChange:Ft=>yt(String(Ft))}))},re=(0,j.Z)({input:{}},{name:"CatalogReactEntityLifecyclePicker"}),Oe=r.createElement(se.Z,{fontSize:"small"}),Le=r.createElement(we.Z,{fontSize:"small"}),tt=()=>{var ee,le;const Me=re(),{updateFilters:Ce,backendEntities:Ye,filters:ut,queryParameters:{lifecycles:lt}}=$n(),yt=(0,r.useMemo)(()=>[lt].flat().filter(Boolean),[lt]),[Nt,Ft]=(0,r.useState)(yt.length?yt:(le=(ee=ut.lifecycles)==null?void 0:ee.values)!=null?le:[]);(0,r.useEffect)(()=>{yt.length&&Ft(yt)},[yt]),(0,r.useEffect)(()=>{Ce({lifecycles:Nt.length?new cn(Nt):void 0})},[Nt,Ce]);const Xt=(0,r.useMemo)(()=>[...new Set(Ye.map(Yt=>{var hn;return(hn=Yt.spec)==null?void 0:hn.lifecycle}).filter(Boolean))].sort(),[Ye]);return Xt.length?r.createElement(R.Z,{pb:1,pt:1},r.createElement(M.Z,{variant:"button",component:"label"},"Lifecycle",r.createElement(Ae.ZP,{multiple:!0,options:Xt,value:Nt,onChange:(Yt,hn)=>Ft(hn),renderOption:(Yt,{selected:hn})=>r.createElement(ie.Z,{control:r.createElement(w.Z,{icon:Oe,checkedIcon:Le,checked:hn}),label:Yt}),size:"small",popupIcon:r.createElement(Te.Z,{"data-testid":"lifecycle-picker-expand"}),renderInput:Yt=>r.createElement(D.Z,{...Yt,className:Me.input,variant:"outlined"})}))):null},Ht=(0,j.Z)({input:{}},{name:"CatalogReactEntityOwnerPicker"}),Dt=r.createElement(se.Z,{fontSize:"small"}),tn=r.createElement(we.Z,{fontSize:"small"}),Vt=()=>{var ee,le;const Me=Ht(),{updateFilters:Ce,backendEntities:Ye,filters:ut,queryParameters:{owners:lt}}=$n(),yt=(0,r.useMemo)(()=>[lt].flat().filter(Boolean),[lt]),[Nt,Ft]=(0,r.useState)(yt.length?yt:(le=(ee=ut.owners)==null?void 0:ee.values)!=null?le:[]);(0,r.useEffect)(()=>{yt.length&&Ft(yt)},[yt]),(0,r.useEffect)(()=>{Ce({owners:Nt.length?new mn(Nt):void 0})},[Nt,Ce]);const Xt=(0,r.useMemo)(()=>[...new Set(Ye.flatMap(Yt=>pt(Yt,N.S4).map(hn=>et(hn,{defaultKind:"group"}))).filter(Boolean))].sort(),[Ye]);return Xt.length?r.createElement(R.Z,{pb:1,pt:1},r.createElement(M.Z,{variant:"button",component:"label"},"Owner",r.createElement(Ae.ZP,{multiple:!0,options:Xt,value:Nt,onChange:(Yt,hn)=>Ft(hn),renderOption:(Yt,{selected:hn})=>r.createElement(ie.Z,{control:r.createElement(w.Z,{icon:Dt,checkedIcon:tn,checked:hn}),label:Yt}),size:"small",popupIcon:r.createElement(Te.Z,{"data-testid":"owner-picker-expand"}),renderInput:Yt=>r.createElement(D.Z,{...Yt,className:Me.input,variant:"outlined"})}))):null},qt=(0,j.Z)(ee=>({searchToolbar:{paddingLeft:0,paddingRight:0},input:{}}),{name:"CatalogReactEntitySearchBar"}),xn=()=>{var ee,le;const Me=qt(),{filters:Ce,updateFilters:Ye}=$n(),[ut,lt]=(0,r.useState)((le=(ee=Ce.text)==null?void 0:ee.value)!=null?le:"");return(0,_t.Z)(()=>{Ye({text:ut.length?new ln(ut):void 0})},250,[ut,Ye]),r.createElement(P.Z,{className:Me.searchToolbar},r.createElement($.Z,null,r.createElement(U.Z,{"aria-label":"search",id:"input-with-icon-adornment",className:Me.input,placeholder:"Search",autoComplete:"off",onChange:yt=>lt(yt.target.value),value:ut,startAdornment:r.createElement(I.Z,{position:"start"},r.createElement(T.Z,null)),endAdornment:r.createElement(I.Z,{position:"end"},r.createElement(m.Z,{"aria-label":"clear search",onClick:()=>lt(""),edge:"end",disabled:ut.length===0},r.createElement(Q.Z,null)))})))},_n=Object.freeze({createEntityRefColumn(ee){const{defaultKind:le}=ee;function Me(Ce){var Ye;return((Ye=Ce.metadata)==null?void 0:Ye.title)||et(Ce,{defaultKind:le})}return{title:"Name",highlight:!0,customFilterAndSearch(Ce,Ye){return Me(Ye).includes(Ce)},customSort(Ce,Ye){return Me(Ce).localeCompare(Me(Ye))},render:Ce=>{var Ye;return r.createElement(ae,{entityRef:Ce,defaultKind:le,title:(Ye=Ce.metadata)==null?void 0:Ye.title})}}},createEntityRelationColumn(ee){const{title:le,relation:Me,defaultKind:Ce,filter:Ye}=ee;function ut(yt){return pt(yt,Me,Ye)}function lt(yt){return ut(yt).map(Nt=>et(Nt,{defaultKind:Ce})).join(", ")}return{title:le,customFilterAndSearch(yt,Nt){return lt(Nt).includes(yt)},customSort(yt,Nt){return lt(yt).localeCompare(lt(Nt))},render:yt=>r.createElement(ke,{entityRefs:ut(yt),defaultKind:Ce})}},createOwnerColumn(){return this.createEntityRelationColumn({title:"Owner",relation:N.S4,defaultKind:"group"})},createDomainColumn(){return this.createEntityRelationColumn({title:"Domain",relation:N.cz,defaultKind:"domain",filter:{kind:"domain"}})},createSystemColumn(){return this.createEntityRelationColumn({title:"System",relation:N.cz,defaultKind:"system",filter:{kind:"system"}})},createMetadataDescriptionColumn(){return{title:"Description",field:"metadata.description",render:ee=>r.createElement(ye.Or,{text:ee.metadata.description,placement:"bottom-start",line:2})}},createSpecLifecycleColumn(){return{title:"Lifecycle",field:"spec.lifecycle"}},createSpecTypeColumn(){return{title:"Type",field:"spec.type"}}}),nn=[_n.createEntityRefColumn({defaultKind:"system"}),_n.createDomainColumn(),_n.createOwnerColumn(),_n.createMetadataDescriptionColumn()],vn=[_n.createEntityRefColumn({defaultKind:"component"}),_n.createSystemColumn(),_n.createOwnerColumn(),_n.createSpecTypeColumn(),_n.createSpecLifecycleColumn(),_n.createMetadataDescriptionColumn()],Tn=(0,j.Z)(ee=>({empty:{padding:ee.spacing(2),display:"flex",justifyContent:"center"}})),H=ee=>{const{entities:le,title:Me,emptyContent:Ce,variant:Ye="gridItem",columns:ut}=ee,lt=Tn(),yt={minWidth:"0",width:"100%"};return Ye==="gridItem"&&(yt.height="calc(100% - 10px)"),r.createElement(ye.iA,{columns:ut,title:Me,style:yt,emptyContent:Ce&&r.createElement("div",{className:lt.empty},Ce),options:{search:!1,paging:!1,actionsColumnIndex:-1,padding:"dense",draggable:!1},data:le})};H.columns=_n,H.systemEntityColumns=nn,H.componentEntityColumns=vn;const s=(0,j.Z)({input:{}},{name:"CatalogReactEntityTagPicker"}),y=r.createElement(se.Z,{fontSize:"small"}),B=r.createElement(we.Z,{fontSize:"small"}),Y=ee=>{var le,Me;const Ce=s(),{updateFilters:Ye,filters:ut,queryParameters:{tags:lt}}=$n(),yt=(0,d.h_)($t),{value:Nt}=(0,F.default)(async()=>{var hn;const Kn="metadata.tags",{facets:kn}=await yt.getEntityFacets({facets:[Kn],filter:(hn=ut.kind)==null?void 0:hn.getCatalogFilters()});return Object.fromEntries(kn[Kn].map(({value:yn,count:Hn})=>[yn,Hn]))},[ut.kind]),Ft=(0,r.useMemo)(()=>[lt].flat().filter(Boolean),[lt]),[Xt,Yt]=(0,r.useState)(Ft.length?Ft:(Me=(le=ut.tags)==null?void 0:le.values)!=null?Me:[]);return(0,r.useEffect)(()=>{Ft.length&&Yt(Ft)},[Ft]),(0,r.useEffect)(()=>{Ye({tags:Xt.length?new Ut(Xt):void 0})},[Xt,Ye]),Object.keys(Nt!=null?Nt:{}).length?r.createElement(R.Z,{pb:1,pt:1},r.createElement(M.Z,{variant:"button",component:"label"},"Tags",r.createElement(Ae.ZP,{multiple:!0,options:Object.keys(Nt!=null?Nt:{}),value:Xt,onChange:(hn,Kn)=>Yt(Kn),renderOption:(hn,{selected:Kn})=>r.createElement(ie.Z,{control:r.createElement(w.Z,{icon:y,checkedIcon:B,checked:Kn}),label:ee.showCounts?`${hn} (${Nt==null?void 0:Nt[hn]})`:hn}),size:"small",popupIcon:r.createElement(Te.Z,{"data-testid":"tag-picker-expand"}),renderInput:hn=>r.createElement(D.Z,{...hn,className:Ce.input,variant:"outlined"})}))):null},Pe=ee=>{var le;const{hidden:Me,initialFilter:Ce}=ee,Ye=(0,d.h_)(d.$v),{error:ut,availableTypes:lt,selectedTypes:yt,setSelectedTypes:Nt}=Vn();if((0,r.useEffect)(()=>{ut&&Ye.post({message:"Failed to load entity types",severity:"error"}),Ce&&Nt([Ce])},[ut,Ye,Ce,Nt]),lt.length===0||ut)return null;const Ft=[{value:"all",label:"All"},...lt.map(Xt=>({value:Xt,label:be()(Xt)}))];return Me?null:r.createElement(R.Z,{pb:1,pt:1},r.createElement(ye.Ph,{label:"Type",items:Ft,selected:(le=Ft.length>1?yt[0]:void 0)!=null?le:"all",onChange:Xt=>Nt(Xt==="all"?[]:[String(Xt)])}))},Xe=(0,x.Z)({root:{color:"#f3ba37"}})(X.Z),ot=ee=>{const{toggleStarredEntity:le,isStarredEntity:Me}=u(ee.entity);return r.createElement(m.Z,{"aria-label":"favorite",color:"inherit",...ee,onClick:()=>le()},r.createElement(K.ZP,{title:Me?"Remove from favorites":"Add to favorites"},Me?r.createElement(Xe,null):r.createElement(ne.Z,null)))},kt=ge.Z;function on(ee,le){if(ee)return ee.toLocaleLowerCase("en-US");if(le)try{return(0,N.of)(le).kind.toLocaleLowerCase("en-US")}catch{return}}function un(ee,le){const Me=(0,d.qD)(),Ce=on(ee,le);return Ce&&Me.getSystemIcon(`kind:${Ce}`)||kt}function Bn(ee){const{kind:le,entityRef:Me,...Ce}=ee,Ye=un(le,Me);return r.createElement(Ye,{...Ce})}const An=(0,j.Z)(ee=>({node:{fill:ee.palette.grey[300],stroke:ee.palette.grey[300],"&.primary":{fill:ee.palette.primary.light,stroke:ee.palette.primary.light},"&.secondary":{fill:ee.palette.secondary.light,stroke:ee.palette.secondary.light}},text:{fill:ee.palette.getContrastText(ee.palette.grey[300]),"&.primary":{fill:ee.palette.primary.contrastText},"&.secondary":{fill:ee.palette.secondary.contrastText},"&.focused":{fontWeight:"bold"}},clickable:{cursor:"pointer"}}));function Nn(ee){const le=(0,d.h_)($t),Me=(0,N.eE)(ee),{loading:Ce,error:Ye,value:ut}=(0,F.default)(async()=>{const lt=await le.getEntityAncestors({entityRef:Me}),yt=new Array,Nt=new Array;for(const Ft of lt.items){const Xt=(0,N.eE)(Ft.entity),Yt=Xt===lt.rootEntityRef;yt.push({id:Xt,root:Yt,...Ft.entity});for(const hn of Ft.parentEntityRefs)Nt.push({from:Xt,to:hn})}return{nodes:yt,edges:Nt}},[Me]);return{loading:Ce,error:Ye,nodes:(ut==null?void 0:ut.nodes)||[],edges:(ut==null?void 0:ut.edges)||[]}}function Gn({node:ee}){const le=An(),Me=(0,Lt.s0)(),Ce=(0,d.tg)(De),[Ye,ut]=(0,r.useState)(0),[lt,yt]=(0,r.useState)(0),Nt=(0,r.useRef)(null);(0,r.useLayoutEffect)(()=>{if(Nt.current){let{height:Hn,width:fr}=Nt.current.getBBox();Hn=Math.round(Hn),fr=Math.round(fr),(Hn!==lt||fr!==Ye)&&(ut(fr),yt(Hn))}},[Ye,lt]);const Ft=10,Xt=lt,Yt=Xt+Ft,hn=Yt+Ye+Ft*2,Kn=lt+Ft*2,kn=ee.metadata.title||(ee.kind&&ee.metadata.name&&ee.metadata.namespace?et({kind:ee.kind,name:ee.metadata.name,namespace:ee.metadata.namespace||""}):ee.id),yn=()=>{Me(Ce({kind:ee.kind,namespace:ee.metadata.namespace||N.zG,name:ee.metadata.name}))};return r.createElement("g",{onClick:yn,className:le.clickable},r.createElement("rect",{className:te()(le.node,ee.root?"secondary":"primary"),width:hn,height:Kn,rx:10}),r.createElement(Bn,{kind:ee.kind,y:Ft,x:Ft,width:Xt,height:Xt,className:te()(le.text,ee.root?"secondary":"primary")}),r.createElement("text",{ref:Nt,className:te()(le.text,ee.root?"secondary":"primary"),y:Kn/2,x:Yt+(Ye+Ft*2)/2,textAnchor:"middle",alignmentBaseline:"middle"},kn))}function rt(ee){const{loading:le,error:Me,nodes:Ce,edges:Ye}=Nn(ee.entity);return le?r.createElement(ye.Ex,null):Me?r.createElement(ye.Gk,{error:Me}):r.createElement(r.Fragment,null,r.createElement(W.Z,{variant:"h2"},"Ancestry"),r.createElement(W.Z,{gutterBottom:!0},"This is the ancestry of entities above the current one - as in, the chain(s) of entities down to the current one, where"," ",r.createElement(ye.rU,{to:"https://backstage.io/docs/features/software-catalog/life-of-an-entity"},"processors emitted")," ","child entities that ultimately led to the current one existing. Note that this is a completely different mechanism from relations."),r.createElement(R.Z,{mt:4},r.createElement(ye.mn,{nodes:Ce,edges:Ye,renderNode:Gn,direction:ye.NX.Direction.BOTTOM_TOP,zoom:"enable-on-click"})))}const We=(0,j.Z)(ee=>({root:{display:"flex",flexDirection:"column"},marginTop:{marginTop:ee.spacing(2)},helpIcon:{marginLeft:ee.spacing(1),color:ee.palette.text.disabled},monospace:{fontFamily:"monospace"}}));function bt(ee){const le=We();return r.createElement(Ee.Z,{...ee,primaryTypographyProps:{className:le.monospace},secondaryTypographyProps:{className:le.monospace}})}function dn(ee){const le=We();return r.createElement(Be.Z,{className:le.monospace},ee.children)}function Pn(ee){return r.createElement(R.Z,{mt:2},r.createElement(Ve.Z,{variant:"outlined"},r.createElement(qe.Z,null,r.createElement(M.Z,{variant:"h6",gutterBottom:!0},ee.title,ee.helpLink&&r.createElement(hr,{to:ee.helpLink})),ee.children)))}function Wn(ee){if(ee.match(/^url:https?:\/\//))return ee.slice(4);if(ee.match(/^https?:\/\//))return ee}function Yn(ee){const[le,Me]=ee.entry,Ce=Wn(Me);return r.createElement(Et.Z,null,ee.indent&&r.createElement(at.Z,null),r.createElement(bt,{primary:le,secondary:Ce?r.createElement(ye.rU,{to:Ce},Me):Me}))}function hr(ee){const le=We();return r.createElement(ye.rU,{to:ee.to,className:le.helpIcon},r.createElement(He.Z,{fontSize:"inherit"}))}const Er=(0,j.Z)({root:{display:"flex",flexDirection:"column"}});function ir(ee){var le,Me;const Ce=(0,d.h_)($t),Ye=(0,N.eE)(ee),ut=(le=ee.metadata.annotations)==null?void 0:le[N.P1],lt=(Me=ee.metadata.annotations)==null?void 0:Me[N.q1],{loading:yt,error:Nt,value:Ft}=(0,F.default)(async()=>!ut&&!lt?[]:(await Ce.getEntities({filter:[...ut?[{[`metadata.annotations.${N.P1}`]:ut}]:[],...lt?[{[`metadata.annotations.${N.q1}`]:lt}]:[]]})).items,[ut,lt]);return{loading:yt,error:Nt,location:ut,originLocation:lt,colocatedEntities:Ft==null?void 0:Ft.filter(Xt=>(0,N.eE)(Xt)!==Ye)}}function _r(ee){return r.createElement(Pt.Z,{dense:!0},ee.header&&r.createElement(Yn,{key:"header",entry:ee.header}),ee.entities.map(le=>r.createElement(Et.Z,{key:(0,N.eE)(le)},r.createElement(at.Z,null,r.createElement(Bn,{kind:le.kind})),r.createElement(bt,{primary:r.createElement(ae,{entityRef:le})}))))}function gr(ee){const{entity:le}=ee,{loading:Me,error:Ce,location:Ye,originLocation:ut,colocatedEntities:lt}=ir(le);if(Me)return r.createElement(ye.Ex,null);if(Ce)return r.createElement(ye.Gk,{error:Ce});if(!Ye&&!ut)return r.createElement(Ne.Z,{severity:"warning"},"Entity had no location information.");if(!(lt!=null&&lt.length))return r.createElement(Ne.Z,{severity:"info"},"There were no other entities on this location.");if(Ye===ut)return r.createElement(_r,{entities:lt});const yt=lt.filter(Ft=>{var Xt;return((Xt=Ft.metadata.annotations)==null?void 0:Xt[N.P1])===Ye}),Nt=lt.filter(Ft=>{var Xt;return((Xt=Ft.metadata.annotations)==null?void 0:Xt[N.q1])===ut});return r.createElement(r.Fragment,null,yt.length>0&&r.createElement(_r,{entities:yt,header:["At the same location",Ye]}),Nt.length>0&&r.createElement(_r,{entities:Nt,header:["At the same origin",ut]}))}function Br(ee){const le=Er();return r.createElement(r.Fragment,null,r.createElement(W.Z,{variant:"h2"},"Colocated"),r.createElement(W.Z,null,"These are the entities that are colocated with this entity - as in, they originated from the same data source (e.g. came from the same YAML file), or from the same origin (e.g. the originally registered URL)."),r.createElement("div",{className:le.root},r.createElement(gr,{entity:ee.entity})))}function jn(ee){return Object.fromEntries([...Object.entries(ee)].sort((le,Me)=>le[0]<Me[0]?-1:1))}function J(ee){return r.createElement(r.Fragment,null,r.createElement(W.Z,{variant:"h2"},"Entity as JSON"),r.createElement(W.Z,null,"This is the raw entity data as received from the catalog, on JSON form."),r.createElement(W.Z,null,r.createElement("div",{style:{fontSize:"75%"},"data-testid":"code-snippet"},r.createElement(ye.Oi,{text:JSON.stringify(jn(ee.entity),void 0,2),language:"json",showCopyCodeButton:!0}))))}const he=(0,j.Z)({root:{display:"flex",flexDirection:"column"}});function Ie(ee){var le,Me;const Ce=he(),{apiVersion:Ye,kind:ut,metadata:lt,spec:yt,relations:Nt=[],status:Ft={}}=ee.entity,Xt=ht()(ft()(Nt,Yt=>Yt.targetRef),"type");return r.createElement(r.Fragment,null,r.createElement(W.Z,{variant:"h2"},"Overview"),r.createElement("div",{className:Ce.root},r.createElement(Pn,{title:"Identity"},r.createElement(Pt.Z,{dense:!0},r.createElement(Et.Z,null,r.createElement(bt,{primary:"apiVersion",secondary:Ye})),r.createElement(Et.Z,null,r.createElement(bt,{primary:"kind",secondary:ut})),(yt==null?void 0:yt.type)&&r.createElement(Et.Z,null,r.createElement(bt,{primary:"spec.type",secondary:yt.type})),lt.uid&&r.createElement(Et.Z,null,r.createElement(bt,{primary:"uid",secondary:lt.uid})),lt.etag&&r.createElement(Et.Z,null,r.createElement(bt,{primary:"etag",secondary:lt.etag})))),r.createElement(Pn,{title:"Metadata"},!!Object.keys(lt.annotations||{}).length&&r.createElement(Pt.Z,{dense:!0,subheader:r.createElement(dn,null,"Annotations",r.createElement(hr,{to:"https://backstage.io/docs/features/software-catalog/well-known-annotations"}))},Object.entries(lt.annotations).map(Yt=>r.createElement(Yn,{key:Yt[0],indent:!0,entry:Yt}))),!!Object.keys(lt.labels||{}).length&&r.createElement(Pt.Z,{dense:!0,subheader:r.createElement(dn,null,"Labels")},Object.entries(lt.labels).map(Yt=>r.createElement(Yn,{key:Yt[0],indent:!0,entry:Yt}))),!!((le=lt.tags)!=null&&le.length)&&r.createElement(Pt.Z,{dense:!0,subheader:r.createElement(dn,null,"Tags")},lt.tags.map((Yt,hn)=>r.createElement(Et.Z,{key:`${Yt}-${hn}`},r.createElement(at.Z,null),r.createElement(bt,{primary:Yt}))))),!!Nt.length&&r.createElement(Pn,{title:"Relations",helpLink:"https://backstage.io/docs/features/software-catalog/well-known-relations"},Object.entries(Xt).map(([Yt,hn],Kn)=>r.createElement("div",{key:Kn},r.createElement(Pt.Z,{dense:!0,subheader:r.createElement(dn,null,Yt)},hn.map(kn=>r.createElement(Et.Z,{key:kn.targetRef},r.createElement(at.Z,null,r.createElement(Bn,{entityRef:kn.targetRef})),r.createElement(bt,{primary:r.createElement(ae,{entityRef:kn.targetRef})}))))))),!!((Me=Ft.items)!=null&&Me.length)&&r.createElement(Pn,{title:"Status",helpLink:"https://backstage.io/docs/features/software-catalog/well-known-statuses"},Ft.items.map((Yt,hn)=>r.createElement("div",{key:hn},r.createElement(M.Z,null,Yt.level,": ",Yt.type),r.createElement(R.Z,{ml:2},Yt.message))))))}function Qe(ee){return r.createElement(r.Fragment,null,r.createElement(W.Z,{variant:"h2"},"Entity as YAML"),r.createElement(W.Z,null,"This is the raw entity data as received from the catalog, on YAML form."),r.createElement(W.Z,null,r.createElement("div",{style:{fontSize:"75%"},"data-testid":"code-snippet"},r.createElement(ye.Oi,{text:ve.ZP.stringify(jn(ee.entity)),language:"yaml",showCopyCodeButton:!0}))))}const Rt=(0,j.Z)(ee=>({fullHeightDialog:{height:"calc(100% - 64px)"},root:{display:"flex",flexGrow:1,width:"100%",backgroundColor:ee.palette.background.paper},tabs:{borderRight:`1px solid ${ee.palette.divider}`,flexShrink:0},tabContents:{flexGrow:1,overflowX:"auto"}}));function Wt(ee){const{children:le,value:Me,index:Ce,...Ye}=ee,ut=Rt();return r.createElement("div",{role:"tabpanel",hidden:Me!==Ce,id:`vertical-tabpanel-${Ce}`,"aria-labelledby":`vertical-tab-${Ce}`,className:ut.tabContents,...Ye},Me===Ce&&r.createElement(R.Z,{pl:3,pr:3},le))}function Kt(ee){return{id:`vertical-tab-${ee}`,"aria-controls":`vertical-tabpanel-${ee}`}}function an(ee){const le=Rt(),[Me,Ce]=r.useState(0);return(0,r.useEffect)(()=>{Ce(0)},[ee.open]),ee.entity?r.createElement(At.Z,{fullWidth:!0,maxWidth:"xl",open:ee.open,onClose:ee.onClose,"aria-labelledby":"entity-inspector-dialog-title",PaperProps:{className:le.fullHeightDialog}},r.createElement(q.Z,{id:"entity-inspector-dialog-title"},"Entity Inspector"),r.createElement(rn.Z,{dividers:!0},r.createElement("div",{className:le.root},r.createElement(ct.Z,{orientation:"vertical",variant:"scrollable",value:Me,onChange:(Ye,ut)=>Ce(ut),"aria-label":"Inspector options",className:le.tabs},r.createElement(xe.Z,{label:"Overview",...Kt(0)}),r.createElement(xe.Z,{label:"Ancestry",...Kt(1)}),r.createElement(xe.Z,{label:"Colocated",...Kt(2)}),r.createElement(xe.Z,{label:"Raw JSON",...Kt(3)}),r.createElement(xe.Z,{label:"Raw YAML",...Kt(4)})),r.createElement(Wt,{value:Me,index:0},r.createElement(Ie,{entity:ee.entity})),r.createElement(Wt,{value:Me,index:1},r.createElement(rt,{entity:ee.entity})),r.createElement(Wt,{value:Me,index:2},r.createElement(Br,{entity:ee.entity})),r.createElement(Wt,{value:Me,index:3},r.createElement(J,{entity:ee.entity})),r.createElement(Wt,{value:Me,index:4},r.createElement(Qe,{entity:ee.entity})))),r.createElement(oe.Z,null,r.createElement(O.Z,{onClick:ee.onClose,color:"primary"},"Close"))):null}function bn(ee){var le;const Me=(0,d.h_)($t),Ce=(le=ee.metadata.annotations)==null?void 0:le[N.q1],Ye=ee.metadata.uid,ut=Ce==="bootstrap:bootstrap",lt=(0,F.default)(async()=>{const kn=Me.getLocationByRef(Ce);let yn;if(!Ce)yn=Promise.resolve([]);else{const Hn=`metadata.annotations.${N.q1}`;yn=Me.getEntities({filter:{[Hn]:Ce},fields:["kind","metadata.uid","metadata.name","metadata.namespace"]}).then(fr=>fr.items)}return Promise.all([kn,yn]).then(([Hn,fr])=>({location:Hn,colocatedEntities:fr}))},[Me,ee]),yt=(0,r.useCallback)(async function(){const{location:yn}=lt.value;await Me.removeLocationById(yn.id)},[Me,lt]),Nt=(0,r.useCallback)(async function(){await Me.removeEntityByUid(Ye)},[Me,Ye]);if(ut)return{type:"bootstrap",location:Ce,deleteEntity:Nt};const{loading:Ft,error:Xt,value:Yt}=lt;if(Ft)return{type:"loading"};if(Xt)return{type:"error",error:Xt};const{location:hn,colocatedEntities:Kn}=Yt;return hn?{type:"unregister",location:Ce,colocatedEntities:Kn.map(N.iB),unregisterLocation:yt,deleteEntity:Nt}:{type:"only-delete",deleteEntity:Nt}}const pn=(0,j.Z)({advancedButton:{fontSize:"0.7em"}}),Un=({entity:ee,onConfirm:le})=>{var Me;const Ce=(0,d.h_)(d.$v),Ye=(0,d.h_)(d.Ds),ut=pn(),lt=bn(ee),[yt,Nt]=(0,r.useState)(!1),[Ft,Xt]=(0,r.useState)(!1),Yt=(Me=Ye.getOptionalString("app.title"))!=null?Me:"Backstage",hn=(0,r.useCallback)(async function(){if("unregisterLocation"in lt){Xt(!0);try{await lt.unregisterLocation(),le()}catch(yn){(0,Fe.BD)(yn),Ce.post({message:yn.message})}finally{Xt(!1)}}},[Ce,le,lt]),Kn=(0,r.useCallback)(async function(){if("deleteEntity"in lt){Xt(!0);try{await lt.deleteEntity(),le()}catch(yn){(0,Fe.BD)(yn),Ce.post({message:yn.message})}finally{Xt(!1)}}},[Ce,le,lt]);return lt.type==="loading"?r.createElement(ye.Ex,null):lt.type==="error"?r.createElement(ye.Gk,{error:lt.error}):lt.type==="bootstrap"?r.createElement(r.Fragment,null,r.createElement(Ne.Z,{severity:"info"},'You cannot unregister this entity, since it originates from a protected Backstage configuration (location "',lt.location,'"). If you believe this is in error, please contact the ',Yt," ","integrator."),r.createElement(R.Z,{marginTop:2},!yt&&r.createElement(O.Z,{variant:"text",size:"small",color:"primary",className:ut.advancedButton,onClick:()=>Nt(!0)},"Advanced Options"),yt&&r.createElement(r.Fragment,null,r.createElement(W.Z,null,"You have the option to delete the entity itself from the catalog. Note that this should only be done if you know that the catalog file has been deleted at, or moved from, its origin location. If that is not the case, the entity will reappear shortly as the next refresh round is performed by the catalog."),r.createElement(O.Z,{variant:"contained",color:"secondary",disabled:Ft,onClick:Kn},"Delete Entity")))):lt.type==="only-delete"?r.createElement(r.Fragment,null,r.createElement(W.Z,null,"This entity does not seem to originate from a registered location. You therefore only have the option to delete it outright from the catalog."),r.createElement(O.Z,{variant:"contained",color:"secondary",disabled:Ft,onClick:Kn},"Delete Entity")):lt.type==="unregister"?r.createElement(r.Fragment,null,r.createElement(W.Z,null,"This action will unregister the following entities:"),r.createElement(W.Z,{component:"ul"},lt.colocatedEntities.map(kn=>r.createElement("li",{key:`${kn.kind}:${kn.namespace}/${kn.name}`},r.createElement(ae,{entityRef:kn})))),r.createElement(W.Z,null,"Located at the following location:"),r.createElement(W.Z,{component:"ul"},r.createElement("li",null,lt.location)),r.createElement(W.Z,null,"To undo, just re-register the entity in ",Yt,"."),r.createElement(R.Z,{marginTop:2},r.createElement(O.Z,{variant:"contained",color:"secondary",disabled:Ft,onClick:hn},"Unregister Location"),!yt&&r.createElement(R.Z,{component:"span",marginLeft:2},r.createElement(O.Z,{variant:"text",size:"small",color:"primary",className:ut.advancedButton,onClick:()=>Nt(!0)},"Advanced Options"))),yt&&r.createElement(r.Fragment,null,r.createElement(R.Z,{paddingTop:4,paddingBottom:4},r.createElement(Ue.Z,null)),r.createElement(W.Z,null,"You also have the option to delete the entity itself from the catalog. Note that this should only be done if you know that the catalog file has been deleted at, or moved from, its origin location. If that is not the case, the entity will reappear shortly as the next refresh round is performed by the catalog."),r.createElement(O.Z,{variant:"contained",color:"secondary",disabled:Ft,onClick:Kn},"Delete Entity"))):r.createElement(Ne.Z,{severity:"error"},"Internal error: Unknown state")},Cn=ee=>{const{open:le,onConfirm:Me,onClose:Ce,entity:Ye}=ee;return r.createElement(At.Z,{open:le,onClose:Ce},r.createElement(q.Z,{id:"responsive-dialog-title"},"Are you sure you want to unregister this entity?"),r.createElement(rn.Z,null,r.createElement(Un,{entity:Ye,onConfirm:Me})),r.createElement(oe.Z,null,r.createElement(O.Z,{onClick:Ce,color:"primary"},"Cancel")))},wn=(0,j.Z)(ee=>({root:{backgroundColor:"rgba(0, 0, 0, .11)",boxShadow:"none",margin:ee.spacing(1,0,1,0)},title:{margin:ee.spacing(1,0,0,1),textTransform:"uppercase",fontSize:12,fontWeight:"bold"},listIcon:{minWidth:30,color:ee.palette.text.primary},menuItem:{minHeight:ee.spacing(6)},groupWrapper:{margin:ee.spacing(1,1,2,1)}}),{name:"CatalogReactUserListPicker"});function er(ee){return[{name:"Personal",items:[{id:"owned",label:"Owned",icon:mt.Z},{id:"starred",label:"Starred",icon:X.Z}]},{name:ee!=null?ee:"Company",items:[{id:"all",label:"All"}]}]}const lr=ee=>{var le;const{initialFilter:Me,availableFilters:Ce}=ee,Ye=wn(),lt=(le=(0,d.h_)(d.Ds).getOptionalString("organization.name"))!=null?le:"Company",{filters:yt,updateFilters:Nt,backendEntities:Ft,queryParameters:{kind:Xt,user:Yt},loading:hn}=$n(),Kn=["starred","all"],kn=er(lt).map(Cr=>({...Cr,items:Cr.items.filter(({id:Sr})=>["group","user"].some(Xr=>Xr===Xt)?Kn.includes(Sr):!Ce||Ce.includes(Sr))})).filter(({items:Cr})=>!!Cr.length),{isStarredEntity:yn}=v(),{isOwnedEntity:Hn,loading:fr}=o(),Nr=hn||fr,wr=(0,r.useMemo)(()=>new En("owned",Hn,yn),[Hn,yn]),Ar=(0,r.useMemo)(()=>new En("starred",Hn,yn),[Hn,yn]),Ir=(0,r.useMemo)(()=>[Yt].flat()[0],[Yt]),[br,zr]=(0,r.useState)(Ir!=null?Ir:Me),Yr=(0,r.useMemo)(()=>Ft.filter(Se((0,ze.compact)(Object.values({...yt,user:void 0})))),[yt,Ft]),Wr=(0,r.useMemo)(()=>({all:Yr.length,starred:Yr.filter(Cr=>Ar.filterEntity(Cr)).length,owned:Yr.filter(Cr=>wr.filterEntity(Cr)).length}),[Yr,Ar,wr]);return(0,r.useEffect)(()=>{Ir&&zr(Ir)},[Ir]),(0,r.useEffect)(()=>{!Nr&&!!br&&br!=="all"&&Wr[br]===0&&zr("all")},[Nr,Wr,br,zr]),(0,r.useEffect)(()=>{Nt({user:br?new En(br,Hn,yn):void 0})},[br,Hn,yn,Nt]),r.createElement(Ve.Z,{className:Ye.root},kn.map(Cr=>r.createElement(r.Fragment,{key:Cr.name},r.createElement(M.Z,{variant:"subtitle2",component:"span",className:Ye.title},Cr.name),r.createElement(Ve.Z,{className:Ye.groupWrapper},r.createElement(Pt.Z,{disablePadding:!0,dense:!0,role:"menu","aria-label":Cr.name},Cr.items.map(Sr=>{var Xr,ya;return r.createElement(de.Z,{role:"none presentation",key:Sr.id,button:!0,divider:!0,onClick:()=>zr(Sr.id),selected:Sr.id===((Xr=yt.user)==null?void 0:Xr.value),className:Ye.menuItem,disabled:Wr[Sr.id]===0,"data-testid":`user-picker-${Sr.id}`,tabIndex:0,ContainerProps:{role:"menuitem"}},Sr.icon&&r.createElement(at.Z,{className:Ye.listIcon},r.createElement(Sr.icon,{fontSize:"small"})),r.createElement(Ee.Z,null,r.createElement(M.Z,{variant:"body1"},Sr.label," ")),r.createElement(p.Z,null,(ya=Wr[Sr.id])!=null?ya:"-"))}))))))},Xn=(0,j.Z)({input:{}},{name:"CatalogReactEntityProcessingStatusPickerPicker"}),Pr=r.createElement(se.Z,{fontSize:"small"}),tr=r.createElement(we.Z,{fontSize:"small"}),Jn=()=>{const ee=Xn(),{updateFilters:le}=$n(),[Me,Ce]=(0,r.useState)([]);function Ye(yt){le({orphan:yt?new en(yt):void 0})}function ut(yt){le({error:yt?new Sn(yt):void 0})}const lt=["Is Orphan","Has Error"];return r.createElement(R.Z,{pb:1,pt:1},r.createElement(M.Z,{variant:"button",component:"label"},"Processing Status",r.createElement(Ae.ZP,{multiple:!0,options:lt,value:Me,onChange:(yt,Nt)=>{Ce(Nt),Ye(Nt.includes("Is Orphan")),ut(Nt.includes("Has Error"))},renderOption:(yt,{selected:Nt})=>r.createElement(ie.Z,{control:r.createElement(w.Z,{icon:Pr,checkedIcon:tr,checked:Nt}),label:yt}),size:"small",popupIcon:r.createElement(Te.Z,{"data-testid":"processing-status-picker-expand"}),renderInput:yt=>r.createElement(D.Z,{...yt,className:ee.input,variant:"outlined"})})))},rr=({children:ee,value:le})=>{var Me;const[Ce,Ye]=useState((Me=le==null?void 0:le.filters)!=null?Me:{}),ut=useCallback(Nt=>{Ye(Ft=>{const Xt=typeof Nt=="function"?Nt(Ft):Nt;return{...Ft,...Xt}})},[]),lt=useMemo(()=>({entities:[],backendEntities:[],queryParameters:{}}),[]),yt=useMemo(()=>{var Nt,Ft,Xt,Yt,hn;return{entities:(Nt=le==null?void 0:le.entities)!=null?Nt:lt.entities,backendEntities:(Ft=le==null?void 0:le.backendEntities)!=null?Ft:lt.backendEntities,updateFilters:(Xt=le==null?void 0:le.updateFilters)!=null?Xt:ut,filters:Ce,loading:(Yt=le==null?void 0:le.loading)!=null?Yt:!1,queryParameters:(hn=le==null?void 0:le.queryParameters)!=null?hn:lt.queryParameters,error:le==null?void 0:le.error}},[le,lt,Ce,ut]);return React.createElement(Zn.Provider,{value:yt},ee)}},47469:function(Mt,g,t){t.d(g,{A:function(){return ge},C:function(){return it},E:function(){return Rn},L:function(){return T},a:function(){return $t},b:function(){return fe},c:function(){return st},d:function(){return se},e:function(){return Zn},f:function(){return Mn},g:function(){return Dn},i:function(){return v},j:function(){return u},k:function(){return cr},l:function(){return Z},m:function(){return ur},n:function(){return Vn},o:function(){return $n},p:function(){return ve},q:function(){return ae},r:function(){return Ze},s:function(){return ke},t:function(){return zt},u:function(){return vt},v:function(){return Ut},w:function(){return En},y:function(){return en}});var e=t(82394),d=t.n(e),E=t(34520),f=t(76635),r=t.n(f),c=t(49558),S=t(30705),O=t(49462),h=t(73495),R=t(79692),M=t(90436),z=t(60905),K=t(95544),j=t(41156),ie=t(90348),w=t(11861),D=t(7089),P=t(94339),$=t(32552),U=t(61837),I=t(85256),m=t(24579),x=t(12420),W=t(97580),Ee=t(73698),Be=t(74603),Ve=t(12231),qe=t(38402),Et=t(86136),at=t(49378),Pt=t(79784),At=t(50758),q=t(8629),rn=t(79249),ct=t(49429),xe=t(77277),oe=t(52866),Ue=t(30254),de=t(27604),p=t(2784),G=t(52160),ye=t(64279),nt=t(92573),be=t(15459),je=t(2997),ft=t(11640),F=t(28347),N=t(99688),_e=t(73557),ze=t(31654),dt=t(43054),St=t(65759),Bt=t(26655),Lt=t(49166),Re=t(32272),_t=t(88285);async function Ct({storageApi:l}){var _;const b=l.forBucket("settings"),L=l.forBucket("starredEntities"),re=b.snapshot("starredEntities").value;if(!(0,f.isArray)(re))return;const Oe=new Set((_=L.snapshot("entityRefs").value)!=null?_:[]);re.filter(f.isString).map(Le=>Le.split(":")).filter(Le=>Le.length===4&&Le[0]==="entity").map(([Le,tt,Ht,Dt])=>(0,E.eE)({kind:tt,namespace:Ht,name:Dt})).forEach(Le=>Oe.add(Le)),await L.set("entityRefs",Array.from(Oe)),await b.remove("starredEntities")}class Qt{constructor(_){this.subscribers=new Set,this.observable=new(d())(L=>(L.next(new Set(this.starredEntities)),this.subscribers.add(L),()=>{this.subscribers.delete(L)}));var b;Ct(_).then(),this.settingsStore=_.storageApi.forBucket("starredEntities"),this.starredEntities=new Set((b=this.settingsStore.snapshot("entityRefs").value)!=null?b:[]),this.settingsStore.observe$("entityRefs").subscribe({next:L=>{var re;this.starredEntities=new Set((re=L.value)!=null?re:[]),this.notifyChanges()}})}async toggleStarred(_){this.starredEntities.has(_)?this.starredEntities.delete(_):this.starredEntities.add(_),await this.settingsStore.set("entityRefs",Array.from(this.starredEntities))}starredEntitie$(){return this.observable}notifyChanges(){for(const _ of this.subscribers)_.next(new Set(this.starredEntities))}}const st=(0,S.x8)({id:"create-component",optional:!0}),me=(0,S.x8)({id:"view-techdoc",optional:!0,params:["namespace","kind","name"]}),ce=(0,S.NT)({id:"catalog"}),we=(0,R.Z)(l=>({value:{fontWeight:"bold",overflow:"hidden",lineHeight:"24px",wordBreak:"break-word"},label:{color:l.palette.text.secondary,textTransform:"uppercase",fontSize:"10px",fontWeight:"bold",letterSpacing:.5,overflow:"hidden",whiteSpace:"nowrap"}}));function se(l){const{label:_,value:b,gridSizes:L,children:re}=l,Oe=we(),Le=(0,S.vJ)(re,Ht=>Ht.getElements()),tt=Le.length>0?Le:p.createElement(M.Z,{variant:"body2",className:Oe.value},b||"unknown");return p.createElement(z.Z,{item:!0,...L},p.createElement(M.Z,{variant:"h2",className:Oe.label},_),tt)}const Te=(0,R.Z)({svgIcon:{display:"inline-block","& svg":{display:"inline-block",fontSize:"inherit",verticalAlign:"baseline"}}});function Ae(l){const{href:_,text:b,Icon:L}=l,re=Te();return p.createElement(K.Z,{display:"flex"},p.createElement(K.Z,{mr:1,className:re.svgIcon},p.createElement(M.Z,{component:"div"},L?p.createElement(L,null):p.createElement(G.Z,null))),p.createElement(K.Z,{flexGrow:"1"},p.createElement(c.rU,{to:_,target:"_blank",rel:"noopener"},b||_)))}const Ne={xs:1,sm:1,md:1,lg:2,xl:3};function Q(l){var _,b;const L=[(0,j.Z)(Oe=>Oe.breakpoints.up("xl"))?"xl":null,(0,j.Z)(Oe=>Oe.breakpoints.up("lg"))?"lg":null,(0,j.Z)(Oe=>Oe.breakpoints.up("md"))?"md":null,(0,j.Z)(Oe=>Oe.breakpoints.up("sm"))?"sm":null,(0,j.Z)(Oe=>Oe.breakpoints.up("xs"))?"xs":null];let re=1;if(typeof l=="number")re=l;else{const Oe=(_=L.find(Le=>Le!==null))!=null?_:"xs";re=(b=l==null?void 0:l[Oe])!=null?b:Ne[Oe]}return re}function T(l){const{items:_,cols:b=void 0}=l,L=Q(b);return p.createElement(ie.Z,{rowHeight:"auto",cols:L},_.map(({text:re,href:Oe,Icon:Le},tt)=>p.createElement(w.Z,{key:tt},p.createElement(Ae,{href:Oe,text:re!=null?re:Oe,Icon:Le}))))}const X=(0,R.Z)({description:{wordBreak:"break-word"}});function ne(l,_,b){if(_==="url"||l.includes("://"))return l;const L=b.type==="file"?`file://${b.target}`:b.target;return _==="file"||b.type==="file"?new URL(l,L).href:L}function fe(l){var _,b,L,re,Oe,Le,tt,Ht;const{entity:Dt}=l,tn=X(),Vt=Dt.kind.toLocaleLowerCase("en-US")==="system",qt=Dt.kind.toLocaleLowerCase("en-US")==="resource",xn=Dt.kind.toLocaleLowerCase("en-US")==="component",_n=Dt.kind.toLocaleLowerCase("en-US")==="api",nn=Dt.kind.toLocaleLowerCase("en-US")==="template",vn=Dt.kind.toLocaleLowerCase("en-US")==="location",Tn=Dt.kind.toLocaleLowerCase("en-US")==="group",H=(0,h.hF)(Dt,E.cz,{kind:"system"}),s=(0,h.hF)(Dt,E.cz,{kind:"component"}),y=(0,h.hF)(Dt,E.cz,{kind:"domain"}),B=(0,h.hF)(Dt,E.S4);let Y;try{Y=(0,E.CV)(Dt)}catch{Y=void 0}return p.createElement(z.Z,{container:!0},p.createElement(se,{label:"Description",gridSizes:{xs:12}},p.createElement(M.Z,{variant:"body2",paragraph:!0,className:tn.description},((_=Dt==null?void 0:Dt.metadata)==null?void 0:_.description)||"No description")),p.createElement(se,{label:"Owner",value:"No Owner",gridSizes:{xs:12,sm:6,lg:4}},B.length>0&&p.createElement(h.rI,{entityRefs:B,defaultKind:"group"})),(Vt||y.length>0)&&p.createElement(se,{label:"Domain",value:"No Domain",gridSizes:{xs:12,sm:6,lg:4}},y.length>0&&p.createElement(h.rI,{entityRefs:y,defaultKind:"domain"})),(_n||xn||qt||H.length>0)&&p.createElement(se,{label:"System",value:"No System",gridSizes:{xs:12,sm:6,lg:4}},H.length>0&&p.createElement(h.rI,{entityRefs:H,defaultKind:"system"})),xn&&s.length>0&&p.createElement(se,{label:"Parent Component",value:"No Parent Component",gridSizes:{xs:12,sm:6,lg:4}},p.createElement(h.rI,{entityRefs:s,defaultKind:"component"})),(_n||xn||qt||nn||Tn||vn||typeof((b=Dt==null?void 0:Dt.spec)==null?void 0:b.type)=="string")&&p.createElement(se,{label:"Type",value:(L=Dt==null?void 0:Dt.spec)==null?void 0:L.type,gridSizes:{xs:12,sm:6,lg:4}}),(_n||xn||typeof((re=Dt==null?void 0:Dt.spec)==null?void 0:re.lifecycle)=="string")&&p.createElement(se,{label:"Lifecycle",value:(Oe=Dt==null?void 0:Dt.spec)==null?void 0:Oe.lifecycle,gridSizes:{xs:12,sm:6,lg:4}}),p.createElement(se,{label:"Tags",value:"No Tags",gridSizes:{xs:12,sm:6,lg:4}},(((Le=Dt==null?void 0:Dt.metadata)==null?void 0:Le.tags)||[]).map(Pe=>p.createElement(D.Z,{key:Pe,size:"small",label:Pe}))),vn&&(((tt=Dt==null?void 0:Dt.spec)==null?void 0:tt.targets)||((Ht=Dt==null?void 0:Dt.spec)==null?void 0:Ht.target))&&p.createElement(se,{label:"Targets",gridSizes:{xs:12}},p.createElement(T,{cols:1,items:(Dt.spec.targets||[Dt.spec.target]).map(Pe=>Pe).map(Pe=>{var Xe;return{text:Pe,href:ne(Pe,((Xe=Dt==null?void 0:Dt.spec)==null?void 0:Xe.type)||"unknown",Y)}})})))}const te=(0,R.Z)({gridItemCard:{display:"flex",flexDirection:"column",height:"calc(100% - 10px)",marginBottom:"10px"},fullHeightCard:{display:"flex",flexDirection:"column",height:"100%"},gridItemCardContent:{flex:1},fullHeightCardContent:{flex:1}});function ge(l){var _,b,L;const{variant:re}=l,Oe=te(),{entity:Le}=(0,h.X2)(),tt=(0,S.h_)(O.q3),Ht=(0,S.h_)(h.Ah),Dt=(0,S.h_)(S.$v),tn=(0,S.tg)(me),Vt=(0,h.CV)(Le,tt),qt=(_=Le.metadata.annotations)==null?void 0:_[E.Tf],xn={label:"View Source",disabled:!Vt,icon:p.createElement(O.nW,{type:Vt==null?void 0:Vt.integrationType}),href:Vt==null?void 0:Vt.locationTargetUrl},_n={label:"View TechDocs",disabled:!((b=Le.metadata.annotations)!=null&&b["backstage.io/techdocs-ref"])||!tn,icon:p.createElement(Ue.Z,null),href:tn&&tn({namespace:Le.metadata.namespace||E.zG,kind:Le.kind,name:Le.metadata.name})};let nn="";re==="gridItem"?nn=Oe.gridItemCard:re==="fullHeight"&&(nn=Oe.fullHeightCard);let vn="";re==="gridItem"?vn=Oe.gridItemCardContent:re==="fullHeight"&&(vn=Oe.fullHeightCardContent);const Tn=(L=Le.metadata.annotations)==null?void 0:L[E.P1],H=(Tn==null?void 0:Tn.startsWith("url:"))||(Tn==null?void 0:Tn.startsWith("file:")),s=(0,p.useCallback)(async()=>{await Ht.refreshEntity((0,E.eE)(Le)),Dt.post({message:"Refresh scheduled",severity:"info"})},[Ht,Dt,Le]);return p.createElement(P.Z,{className:nn},p.createElement($.Z,{title:"About",action:p.createElement(p.Fragment,null,H&&p.createElement(U.Z,{"aria-label":"Refresh",title:"Schedule entity refresh",onClick:s},p.createElement(oe.Z,null)),p.createElement(U.Z,{component:c.rU,"aria-label":"Edit",disabled:!qt,title:"Edit Metadata",to:qt!=null?qt:"#"},p.createElement(de.Z,null))),subheader:p.createElement(c.M6,{links:[xn,_n]})}),p.createElement(I.Z,null),p.createElement(m.Z,{className:vn},p.createElement(fe,{entity:Le})))}const He=(0,R.Z)(l=>(0,x.Z)({root:{...l.typography.h4}}));function it(l){var _;const{initialFilter:b="component",allowedKinds:L}=l,re=He(),Oe=(0,S.h_)(h.Ah),{value:Le}=(0,ye.default)(async()=>await Oe.getEntityFacets({facets:["kind"]}).then(nn=>{var vn;return((vn=nn.facets.kind)==null?void 0:vn.map(Tn=>Tn.value).sort())||[]})),{filters:tt,updateFilters:Ht,queryParameters:{kind:Dt}}=(0,h.wp)(),tn=(0,p.useMemo)(()=>{var nn;return(nn=[Dt].flat()[0])==null?void 0:nn.toLocaleLowerCase("en-US")},[Dt]),[Vt,qt]=(0,p.useState)(tn!=null?tn:b);(0,p.useEffect)(()=>{var nn,vn;(nn=tt.kind)!=null&&nn.value&&qt((vn=tt.kind)==null?void 0:vn.value)},[tt.kind]),(0,p.useEffect)(()=>{Ht({kind:Vt?new h.zo(Vt):void 0})},[Vt,Ht]),(0,p.useEffect)(()=>{tn&&qt(tn)},[tn]);const _n=[(0,W.Z)(Vt)].concat((_=Le==null?void 0:Le.filter(nn=>L?L.some(vn=>vn.toLocaleLowerCase("en-US")===nn.toLocaleLowerCase("en-US")):!0))!=null?_:[]).sort().reduce((nn,vn)=>(nn[vn.toLocaleLowerCase("en-US")]=vn,nn),{});return p.createElement(Ee.Z,{input:p.createElement(Be.Z,{value:Vt}),value:Vt,onChange:nn=>qt(nn.target.value),classes:re},Object.keys(_n).map(nn=>p.createElement(Ve.Z,{value:nn,key:nn},`${_n[nn]}s`)))}const ht=(0,R.Z)({flexContainer:{flexWrap:"wrap"},itemText:{width:"100%",wordBreak:"break-all",marginBottom:"1rem"}});function ve(l){var _,b;const L=l.result,re=ht(),Oe=(0,S.z$)(),Le=()=>{Oe.captureEvent("discover",L.title,{attributes:{to:L.location},value:l.rank})};return p.createElement(c.rU,{noTrack:!0,to:L.location,onClick:Le},p.createElement(qe.Z,{alignItems:"flex-start"},l.icon&&p.createElement(Et.Z,null,l.icon),p.createElement("div",{className:re.flexContainer},p.createElement(at.Z,{className:re.itemText,primaryTypographyProps:{variant:"h6"},primary:(_=l.highlight)!=null&&_.fields.title?p.createElement(nt.FA,{text:l.highlight.fields.title,preTag:l.highlight.preTag,postTag:l.highlight.postTag}):L.title,secondary:(b=l.highlight)!=null&&b.fields.text?p.createElement(nt.FA,{text:l.highlight.fields.text,preTag:l.highlight.preTag,postTag:l.highlight.postTag}):L.text}),p.createElement(K.Z,null,L.kind&&p.createElement(D.Z,{label:`Kind: ${L.kind}`,size:"small"}),L.lifecycle&&p.createElement(D.Z,{label:`Lifecycle: ${L.lifecycle}`,size:"small"})))),p.createElement(I.Z,{component:"li"}))}const Fe=Object.freeze({createNameColumn(l){function _(b){var L;return((L=b.metadata)==null?void 0:L.title)||(0,h.$3)(b,{defaultKind:l==null?void 0:l.defaultKind})}return{title:"Name",field:"resolved.name",highlight:!0,customSort({entity:b},{entity:L}){return _(b).localeCompare(_(L))},render:({entity:b})=>{var L;return p.createElement(h.dx,{entityRef:b,defaultKind:(l==null?void 0:l.defaultKind)||"Component",title:(L=b.metadata)==null?void 0:L.title})}}},createSystemColumn(){return{title:"System",field:"resolved.partOfSystemRelationTitle",render:({resolved:l})=>p.createElement(h.rI,{entityRefs:l.partOfSystemRelations,defaultKind:"system"})}},createOwnerColumn(){return{title:"Owner",field:"resolved.ownedByRelationsTitle",render:({resolved:l})=>p.createElement(h.rI,{entityRefs:l.ownedByRelations,defaultKind:"group"})}},createSpecTargetsColumn(){return{title:"Targets",field:"entity.spec.targets",render:({entity:l})=>{var _,b;return p.createElement(p.Fragment,null,(((_=l==null?void 0:l.spec)==null?void 0:_.targets)||((b=l==null?void 0:l.spec)==null?void 0:b.target))&&p.createElement(c.Or,{text:(l.spec.targets||[l.spec.target]).join(", "),placement:"bottom-start"}))}}},createSpecTypeColumn(){return{title:"Type",field:"entity.spec.type",hidden:!0,width:"auto"}},createSpecLifecycleColumn(){return{title:"Lifecycle",field:"entity.spec.lifecycle"}},createMetadataDescriptionColumn(){return{title:"Description",field:"entity.metadata.description",render:({entity:l})=>p.createElement(c.Or,{text:l.metadata.description,placement:"bottom-start"}),width:"auto"}},createTagsColumn(){return{title:"Tags",field:"entity.metadata.tags",cellStyle:{padding:"0px 16px 0px 20px"},render:({entity:l})=>p.createElement(p.Fragment,null,l.metadata.tags&&l.metadata.tags.map(_=>p.createElement(D.Z,{key:_,label:_,size:"small",variant:"outlined",style:{marginBottom:"0px"}}))),width:"auto"}},createTitleColumn(l){return{title:"Title",field:"entity.metadata.title",hidden:l==null?void 0:l.hidden,searchable:!0}},createLabelColumn(l,_){return{title:(_==null?void 0:_.title)||"Label",field:"entity.metadata.labels",cellStyle:{padding:"0px 16px 0px 20px"},render:({entity:b})=>{var L;const re=(L=b.metadata)==null?void 0:L.labels,Oe=re&&re[l]||(_==null?void 0:_.defaultValue);return p.createElement(p.Fragment,null,Oe&&p.createElement(D.Z,{key:Oe,label:Oe,size:"small",variant:"outlined"}))},width:"auto"}}}),mt=(0,be.Z)({root:{color:"#f3ba37"}})(ft.Z),$t=l=>{var _,b,L;const{columns:re,actions:Oe,tableOptions:Le,subtitle:tt,emptyContent:Ht}=l,{isStarredEntity:Dt,toggleStarredEntity:tn}=(0,h.CR)(),{loading:Vt,error:qt,entities:xn,filters:_n}=(0,h.wp)(),nn=(0,p.useMemo)(()=>{var Y;return[Fe.createTitleColumn({hidden:!0}),Fe.createNameColumn({defaultKind:(Y=_n.kind)==null?void 0:Y.value}),...Pe(),Fe.createMetadataDescriptionColumn(),Fe.createTagsColumn()];function Pe(){var Xe;switch((Xe=_n.kind)==null?void 0:Xe.value){case"user":return[];case"domain":case"system":return[Fe.createOwnerColumn()];case"group":case"template":return[Fe.createSpecTypeColumn()];case"location":return[Fe.createSpecTypeColumn(),Fe.createSpecTargetsColumn()];default:return[Fe.createSystemColumn(),Fe.createOwnerColumn(),Fe.createSpecTypeColumn(),Fe.createSpecLifecycleColumn()]}}},[(_=_n.kind)==null?void 0:_.value]),vn=_n.type===void 0,Tn=(0,f.capitalize)((L=(b=_n.user)==null?void 0:b.value)!=null?L:"all");if(qt)return p.createElement("div",null,p.createElement(c.GB,{severity:"error",title:"Could not fetch catalog entities."},p.createElement(c.Oi,{language:"text",text:qt.toString()})));const H=[({entity:Y})=>{var Pe;const Xe=(Pe=Y.metadata.annotations)==null?void 0:Pe[E.l2],ot="View";return{icon:()=>p.createElement(p.Fragment,null,p.createElement(M.Z,{variant:"srOnly"},ot),p.createElement(je.Z,{fontSize:"small"})),tooltip:ot,disabled:!Xe,onClick:()=>{!Xe||window.open(Xe,"_blank")}}},({entity:Y})=>{var Pe;const Xe=(Pe=Y.metadata.annotations)==null?void 0:Pe[E.Tf],ot="Edit";return{icon:()=>p.createElement(p.Fragment,null,p.createElement(M.Z,{variant:"srOnly"},ot),p.createElement(de.Z,{fontSize:"small"})),tooltip:ot,disabled:!Xe,onClick:()=>{!Xe||window.open(Xe,"_blank")}}},({entity:Y})=>{const Pe=Dt(Y),Xe=Pe?"Remove from favorites":"Add to favorites";return{cellStyle:{paddingLeft:"1em"},icon:()=>p.createElement(p.Fragment,null,p.createElement(M.Z,{variant:"srOnly"},Xe),Pe?p.createElement(mt,null):p.createElement(F.Z,null)),tooltip:Xe,onClick:()=>tn(Y)}}],s=xn.map(Y=>{const Pe=(0,h.hF)(Y,E.cz,{kind:"system"}),Xe=(0,h.hF)(Y,E.S4);return{entity:Y,resolved:{name:(0,h.$3)(Y,{defaultKind:"Component"}),ownedByRelationsTitle:Xe.map(ot=>(0,h.$3)(ot,{defaultKind:"group"})).join(", "),ownedByRelations:Xe,partOfSystemRelationTitle:Pe.map(ot=>(0,h.$3)(ot,{defaultKind:"system"})).join(", "),partOfSystemRelations:Pe}}}),y=(re||nn).find(Y=>Y.title==="Type");y&&(y.hidden=!vn);const B=s.length>20;return p.createElement(c.iA,{isLoading:Vt,columns:re||nn,options:{paging:B,pageSize:20,actionsColumnIndex:-1,loadingType:"linear",showEmptyDataSourceMessage:!Vt,padding:"dense",pageSizeOptions:[20,50,100],...Le},title:`${Tn} (${xn.length})`,data:s,actions:Oe||H,subtitle:tt,emptyContent:Ht})};$t.columns=Fe;function Zt(l){var _;const{unregisterEntityOptions:b,isUnregisterAllowed:L,onUnregisterEntity:re,onClose:Oe}=l,Le=typeof(b==null?void 0:b.disableUnregister)=="boolean",tt=(_=!L||(Le?!!(b!=null&&b.disableUnregister):(b==null?void 0:b.disableUnregister)==="disable"))!=null?_:!1;let Ht=p.createElement(p.Fragment,null);return(b==null?void 0:b.disableUnregister)!=="hidden"&&(Ht=p.createElement(Ve.Z,{onClick:()=>{Oe(),re()},disabled:tt},p.createElement(Et.Z,null,p.createElement(Lt.Z,{fontSize:"small"})),p.createElement(at.Z,{primary:"Unregister entity"}))),p.createElement(p.Fragment,null,Ht)}const Gt=(0,R.Z)(l=>({button:{color:l.page.fontColor}}),{name:"PluginCatalogEntityContextMenu"});function Jt(l){const{UNSTABLE_extraContextMenuItems:_,UNSTABLE_contextMenuOptions:b,onUnregisterEntity:L,onInspectEntity:re}=l,[Oe,Le]=(0,p.useState)(),tt=Gt(),Dt=(0,h.N$)(Bt.j8).allowed,tn=nn=>{Le(nn.currentTarget)},Vt=()=>{Le(void 0)},qt=(0,S.h_)(S.$v),xn=(0,p.useCallback)(()=>{navigator.clipboard.writeText(window.location.toString()).then(()=>qt.post({message:"Copied!",severity:"info"}))},[qt]),_n=_&&[..._.map(nn=>p.createElement(Ve.Z,{key:nn.title,onClick:()=>{Vt(),nn.onClick()}},p.createElement(Et.Z,null,p.createElement(nn.Icon,{fontSize:"small"})),p.createElement(at.Z,{primary:nn.title}))),p.createElement(I.Z,{key:"the divider is here!"})];return p.createElement(p.Fragment,null,p.createElement(U.Z,{"aria-label":"more","aria-controls":"long-menu","aria-haspopup":"true","aria-expanded":!!Oe,role:"button",onClick:tn,"data-testid":"menu-button",className:tt.button,id:"long-menu"},p.createElement(dt.Z,null)),p.createElement(Pt.ZP,{open:Boolean(Oe),onClose:Vt,anchorEl:Oe,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},"aria-labelledby":"long-menu"},p.createElement(At.Z,null,_n,p.createElement(Zt,{unregisterEntityOptions:b,isUnregisterAllowed:Dt,onUnregisterEntity:L,onClose:Vt}),p.createElement(Ve.Z,{onClick:()=>{Vt(),re()}},p.createElement(Et.Z,null,p.createElement(ze.Z,{fontSize:"small"})),p.createElement(at.Z,{primary:"Inspect entity"})),p.createElement(Ve.Z,{onClick:()=>{Vt(),xn()}},p.createElement(Et.Z,null,p.createElement(St.Z,{fontSize:"small"})),p.createElement(at.Z,{primary:"Copy entity URL"})))))}const xt="plugin.catalog.entityLayoutRoute",sn=()=>null;(0,S.R5)(sn,xt,!0),(0,S.R5)(sn,"core.gatherMountPoints",!0);function De(l){const{entity:_,title:b}=l;return p.createElement(K.Z,{display:"inline-flex",alignItems:"center",height:"1em",maxWidth:"100%"},p.createElement(K.Z,{component:"span",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"},b),_&&p.createElement(h.LH,{entity:_}))}function Je(l,_,b,L){var re,Oe,Le,tt,Ht;const Dt=(re=l!=null?l:L==null?void 0:L.kind)!=null?re:"",tn=(Oe=_!=null?_:L==null?void 0:L.metadata.namespace)!=null?Oe:"";return{headerTitle:`${(Ht=(tt=(Le=L==null?void 0:L.metadata.title)!=null?Le:b)!=null?tt:L==null?void 0:L.metadata.name)!=null?Ht:""}${tn&&tn!==E.zG?` in ${tn}`:""}`,headerType:(()=>{let qt=Dt.toLocaleLowerCase("en-US");return L&&L.spec&&"type"in L.spec&&(qt+=" \u2014 ",qt+=L.spec.type.toLocaleLowerCase("en-US")),qt})()}}function et(l){var _;const{entity:b}=l,L=(0,h.hF)(b,E.S4);return p.createElement(p.Fragment,null,L.length>0&&p.createElement(c.i9,{label:"Owner",value:p.createElement(h.rI,{entityRefs:L,defaultKind:"Group",color:"inherit"})}),((_=b.spec)==null?void 0:_.lifecycle)&&p.createElement(c.i9,{label:"Lifecycle",value:b.spec.lifecycle}))}const ae=l=>{var _,b,L;const{UNSTABLE_extraContextMenuItems:re,UNSTABLE_contextMenuOptions:Oe,children:Le,NotFoundComponent:tt}=l,{kind:Ht,namespace:Dt,name:tn}=(0,S.Oi)(h.wi),{entity:Vt,loading:qt,error:xn}=(0,h.ce)(),_n=(0,_e.TH)(),nn=(0,S.vJ)(Le,Xe=>Xe.selectByComponentData({key:xt,withStrictError:"Child of EntityLayout must be an EntityLayout.Route"}).getElements().flatMap(({props:ot})=>{if(Vt){if(ot.if&&!ot.if(Vt))return[]}else return[];return[{path:ot.path,title:ot.title,children:ot.children,tabProps:ot.tabProps}]}),[Vt]),{headerTitle:vn,headerType:Tn}=Je(Ht,Dt,tn,Vt),[H,s]=(0,p.useState)(!1),[y,B]=(0,p.useState)(!1),Y=(0,_e.s0)(),Pe=async()=>{s(!1),B(!1),Y("/")};return(0,p.useEffect)(()=>{s(!1),B(!1)},[_n.pathname]),p.createElement(c.T3,{themeId:(L=(b=(_=Vt==null?void 0:Vt.spec)==null?void 0:_.type)==null?void 0:b.toString())!=null?L:"home"},p.createElement(c.h4,{title:p.createElement(De,{title:vn,entity:Vt}),pageTitleOverride:vn,type:Tn},Vt&&p.createElement(p.Fragment,null,p.createElement(et,{entity:Vt}),p.createElement(Jt,{UNSTABLE_extraContextMenuItems:re,UNSTABLE_contextMenuOptions:Oe,onUnregisterEntity:()=>s(!0),onInspectEntity:()=>B(!0)}))),qt&&p.createElement(c.Ex,null),Vt&&p.createElement(c.tn,{routes:nn}),xn&&p.createElement(c.VY,null,p.createElement(N.Z,{severity:"error"},xn.toString())),!qt&&!xn&&!Vt&&p.createElement(c.VY,null,tt||p.createElement(c.GB,{title:"Entity not found"},"There is no ",Ht," with the requested"," ",p.createElement(c.rU,{to:"https://backstage.io/docs/features/software-catalog/references"},"kind, namespace, and name"),".")),p.createElement(h.pp,{open:H,entity:Vt,onConfirm:Pe,onClose:()=>s(!1)}),p.createElement(h.U_,{open:y,entity:Vt,onClose:()=>B(!1)}))};ae.Route=sn;function pe(l){const{open:_,onClose:b,onConfirm:L,entity:re}=l,[Oe,Le]=(0,p.useState)(!1),tt=(0,S.h_)(h.Ah),Ht=(0,S.h_)(S.$v),Dt=async()=>{Le(!0);try{const tn=re.metadata.uid;await tt.removeEntityByUid(tn),L()}catch(tn){(0,Re.BD)(tn),Ht.post({message:tn.message})}finally{Le(!1)}};return p.createElement(q.Z,{open:_,onClose:b},p.createElement(rn.Z,{id:"responsive-dialog-title"},"Are you sure you want to delete this entity?"),p.createElement(ct.Z,null,p.createElement(xe.Z,{variant:"contained",color:"secondary",disabled:Oe,onClick:Dt},"Delete"),p.createElement(xe.Z,{onClick:b,color:"primary"},"Cancel")))}function ke(l){var _,b;return((b=(_=l==null?void 0:l.metadata)==null?void 0:_.annotations)==null?void 0:b["backstage.io/orphan"])==="true"}function Ze(){const l=(0,_e.s0)(),_=(0,S.tg)(ce),[b,L]=(0,p.useState)(!1),{entity:re}=(0,h.X2)(),Oe=async()=>{L(!1),l(_())};return p.createElement(p.Fragment,null,p.createElement(N.Z,{severity:"warning",onClick:()=>L(!0)},"This entity is not referenced by any location and is therefore not receiving updates. Click here to delete."),p.createElement(pe,{open:b,entity:re,onConfirm:Oe,onClose:()=>L(!1)}))}const Se=l=>l.error&&l.level==="error"&&l.type===_t.mk;async function pt(l,_){return{items:(await _.getEntityAncestors({entityRef:l})).items.map(re=>{var Oe,Le;return{errors:((Le=(Oe=re.entity.status)==null?void 0:Oe.items)!=null?Le:[]).filter(Se).map(Dt=>Dt.error).filter(Dt=>Boolean(Dt)),entity:re.entity}}).filter(re=>re.errors.length>0)}}async function vt(l,_){const b=_.apis.get(h.Ah);if(!b)throw new Error(`No implementation available for ${h.Ah}`);return(await pt((0,E.eE)(l),b)).items.length>0}function zt(){const{entity:l}=(0,h.X2)(),_=(0,E.eE)(l),b=(0,S.h_)(h.Ah),{loading:L,error:re,value:Oe}=(0,ye.default)(async()=>pt(_,b),[_,b]);return re?p.createElement(K.Z,{mb:1},p.createElement(c.Gk,{error:re})):L||!Oe?null:p.createElement(p.Fragment,null,Oe.items.map((Le,tt)=>p.createElement(K.Z,{key:tt,mb:1},(0,E.eE)(l)!==(0,E.eE)(Le.entity)&&p.createElement(K.Z,{p:1},"The error below originates from"," ",p.createElement(h.dx,{entityRef:Le.entity})),Le.errors.map((Ht,Dt)=>p.createElement(c.Gk,{key:Dt,error:Ht})))))}const Tt="core.backstage.entitySwitch",It=l=>null;(0,S.R5)(It,Tt,!0);const Ut=l=>{var _,b;const{entity:L,loading:re}=(0,h.ce)(),Oe=(0,S.I_)(),Le=(0,S.vJ)(l.children,Ht=>Ht.selectByComponentData({key:Tt,withStrictError:"Child of EntitySwitch is not an EntitySwitch.Case"}).getElements().flatMap(Dt=>{var tn;if(re)return[];const{if:Vt,children:qt}=Dt.props;return L?[{if:(tn=Vt==null?void 0:Vt(L,{apis:Oe}))!=null?tn:!0,children:qt}]:[{if:Vt===void 0,children:qt}]}),[Oe,L,re]);return Le.some(Ht=>typeof Ht.if=="object"&&"then"in Ht.if)?p.createElement(ln,{results:Le}):(b=(_=Le.find(Ht=>Ht.if))==null?void 0:_.children)!=null?b:null};function ln({results:l}){const{loading:_,value:b}=(0,ye.default)(async()=>{var L;const re=l.map(async({if:Oe,children:Le})=>{try{if(await Oe)return Le}catch{}return null});return(L=(await Promise.all(re)).find(Boolean))!=null?L:null},[l]);return _||!b?null:b}Ut.Case=It;function mn(l,_){return Boolean(l&&(l==null?void 0:l.toLocaleLowerCase("en-US"))===(_==null?void 0:_.toLocaleLowerCase("en-US")))}function cn(l,_){return typeof _=="string"?mn(l,_):_.some(b=>mn(l,b))}function En(l){return _=>cn(_.kind,l)}function en(l){return _=>mn(_.kind,"component")?cn(_.spec.type,l):!1}function Sn(l){return _=>{var b;return cn((b=_.metadata)==null?void 0:b.namespace,l)}}const On=null,In=h._i.Filters,Ln=h._i.Content,Dn=(0,S.rx)({id:"catalog",apis:[(0,S.ni)({api:h.Ah,deps:{discoveryApi:S.NW,fetchApi:S.gP},factory:({discoveryApi:l,fetchApi:_})=>new _t.MS({discoveryApi:l,fetchApi:_})}),(0,S.ni)({api:h.p3,deps:{storageApi:S.E6},factory:({storageApi:l})=>new Qt({storageApi:l})})],routes:{catalogIndex:ce,catalogEntity:h.wi},externalRoutes:{createComponent:st,viewTechDoc:me},__experimentalConfigure(l){return{...{createButtonTitle:"Create"},...l}}}),Mn=Dn.provide((0,S.P4)({name:"CatalogIndexPage",component:()=>t.e(6329).then(t.bind(t,76329)).then(l=>l.CatalogPage),mountPoint:ce})),Zn=Dn.provide((0,S.P4)({name:"CatalogEntityPage",component:()=>t.e(1391).then(t.bind(t,1391)).then(l=>l.CatalogEntityPage),mountPoint:h.wi})),Rn=Dn.provide((0,S.CO)({name:"EntityAboutCard",component:{lazy:()=>t.e(18).then(t.bind(t,70018)).then(l=>l.AboutCard)}})),$n=Dn.provide((0,S.CO)({name:"EntityLinksCard",component:{lazy:()=>t.e(7251).then(t.bind(t,67251)).then(l=>l.EntityLinksCard)}})),Vn=Dn.provide((0,S.CO)({name:"EntityHasSystemsCard",component:{lazy:()=>t.e(8669).then(t.bind(t,38669)).then(l=>l.HasSystemsCard)}})),cr=Dn.provide((0,S.CO)({name:"EntityHasComponentsCard",component:{lazy:()=>t.e(9018).then(t.bind(t,29018)).then(l=>l.HasComponentsCard)}})),ur=Dn.provide((0,S.CO)({name:"EntityHasSubcomponentsCard",component:{lazy:()=>t.e(657).then(t.bind(t,90657)).then(l=>l.HasSubcomponentsCard)}})),Z=Dn.provide((0,S.CO)({name:"EntityHasResourcesCard",component:{lazy:()=>t.e(5153).then(t.bind(t,65153)).then(l=>l.HasResourcesCard)}})),v=Dn.provide((0,S.CO)({name:"EntityDependsOnComponentsCard",component:{lazy:()=>t.e(7110).then(t.bind(t,7110)).then(l=>l.DependsOnComponentsCard)}})),i=Dn.provide((0,S.CO)({name:"EntityDependencyOfComponentsCard",component:{lazy:()=>t.e(2879).then(t.bind(t,72879)).then(l=>l.DependencyOfComponentsCard)}})),u=Dn.provide((0,S.CO)({name:"EntityDependsOnResourcesCard",component:{lazy:()=>t.e(6973).then(t.bind(t,36973)).then(l=>l.DependsOnResourcesCard)}})),o=Dn.provide((0,S.CO)({name:"RelatedEntitiesCard",component:{lazy:()=>t.e(6497).then(t.bind(t,56497)).then(l=>l.RelatedEntitiesCard)}}))},16673:function(Mt,g,t){t.d(g,{BL:function(){return e.n},Cy:function(){return e.l},Eq:function(){return e.r},Es:function(){return e.a},FZ:function(){return e.p},Hz:function(){return e.q},Kf:function(){return e.y},PA:function(){return e.s},Tu:function(){return e.f},_l:function(){return e.w},bM:function(){return e.E},dN:function(){return e.e},f2:function(){return e.o},im:function(){return e.u},jF:function(){return e.i},mr:function(){return e.t},o6:function(){return e.j},oU:function(){return e.m},p$:function(){return e.v},rR:function(){return e.g},yf:function(){return e.k}});var e=t(47469),d=t(82394),E=t.n(d),f=t(34520),r=t(76635),c=t.n(r),S=t(49558),O=t(30705),h=t(49462),R=t(73495),M=t(2784),z=t(92573),K=t(26655),j=t(32272),ie=t(88285)},86317:function(Mt,g,t){t.d(g,{UK:function(){return Ae},fn:function(){return rn}});var e=t(76666),d=t.n(e),E=t(30705),f=t(2784),r=t(73557),c=t(39857),S=t(27616),O=t(8284),h=t(90436),R=t(70660),M=t(61837),z=t(95544),K=t(60905),j=t(79692),ie=t(43434),w=t(49558),D=t(38016),P=t(26228),$=t(75951),U=t.n($),I=t(69001),m=t(77446),x=t(73495),W=t(90193),Ee=t.n(W),Be=t(43266),Ve=t(58838);const qe=(0,E.T0)({id:"plugin.circleci.service"}),Et="/circleci/api";class at{constructor(X){var ne;this.discoveryApi=X.discoveryApi,this.proxyPath=(ne=X.proxyPath)!=null?ne:Et}async retry(X,ne){return(0,e.postBuildActions)("",X,e.BuildAction.RETRY,{circleHost:await this.getApiUrl(),...ne.vcs})}async getBuilds(X,ne){const{limit:fe=10,offset:te=0}=X;return(0,e.getBuildSummaries)("",{options:{limit:fe,offset:te},vcs:{},circleHost:await this.getApiUrl(),...ne})}async getUser(X){return(0,e.getMe)("",{circleHost:await this.getApiUrl(),...X})}async getBuild(X,ne){return(0,e.getFullBuild)("",X,{circleHost:await this.getApiUrl(),...ne.vcs})}async getApiUrl(){return await this.discoveryApi.getBaseUrl("proxy")+this.proxyPath}}const Pt=(0,E.NT)({id:"circle-ci"}),At=(0,E.Rz)({id:"circle-ci/build",parent:Pt,path:"/:buildId"}),rn=(0,E.rx)({id:"circleci",apis:[(0,E.ni)({api:qe,deps:{discoveryApi:E.NW},factory:({discoveryApi:T})=>new at({discoveryApi:T})})]}).provide((0,E.P4)({name:"EntityCircleCIContent",component:()=>Promise.resolve().then(function(){return Q}).then(T=>T.Router),mountPoint:Pt}));function ct(T){return T?P.ou.fromISO(T).toRelative():""}function xe(T,X){if(!T||!X)return"";const ne=P.ou.fromISO(T),fe=P.ou.fromISO(X),te=P.Xp.fromDateTimes(ne,fe).toDuration();return U()(te.as("milliseconds"),{largest:1})}const oe=(0,j.Z)({accordionDetails:{padding:0},button:{order:-1,marginRight:0,marginLeft:"-20px"}}),Ue=({url:T,name:X,className:ne,action:fe})=>{const te=oe(),[ge,He]=(0,f.useState)([]);(0,f.useEffect)(()=>{fetch(T).then(ht=>ht.json()).then(ht=>{typeof ht!="undefined"&&He(ht.map(({message:ve})=>ve))})},[T]);const it=xe(fe.start_time,fe.end_time);return f.createElement(S.Z,{TransitionProps:{unmountOnExit:!0},className:ne},f.createElement(O.Z,{expandIcon:f.createElement(D.Z,null),"aria-controls":`panel-${X}-content`,id:`panel-${X}-header`,IconButtonProps:{className:te.button}},f.createElement(h.Z,{variant:"button"},X," (",it,")")),f.createElement(R.Z,{className:te.accordionDetails},ge.length===0?"Nothing here...":f.createElement("div",{style:{height:"20vh",width:"100%"}},f.createElement(w.nU,{text:ge.join(`
`)}))))},de=(T,X)=>{const ne=(0,f.useRef)(!1);return{startPolling:async()=>{if(ne.current!==!0)for(ne.current=!0;ne.current===!0;)await T(),await new Promise(ge=>setTimeout(ge,X))},stopPolling:()=>{ne.current=!1}}},p="circleci.com/project-slug",G=T=>T?{retried:"Retried",canceled:"Canceled",infrastructure_fail:"Infra fail",timedout:"Timedout",not_run:"Not run",running:"Running",failed:"Failed",queued:"Queued",scheduled:"Scheduled",not_running:"Not running",no_tests:"No tests",fixed:"Fixed",success:"Success"}[T]:"",ye=T=>{const{workflows:X}=T!=null?T:{};return{id:X==null?void 0:X.workflow_id,url:`${T.build_url}/workflows/${X==null?void 0:X.workflow_id}`,jobName:X==null?void 0:X.job_name,name:X==null?void 0:X.workflow_name}},nt=T=>{const X=(0,W.getOr)({},"all_commit_details[0]",T);return{branchName:String(T.branch),commit:{hash:String(T.vcs_revision),shortHash:String(T.vcs_revision).substr(0,7),committerName:T.committer_name,url:X.commit_url}}},be=T=>{var X,ne,fe,te;return{isUser:((X=T==null?void 0:T.user)==null?void 0:X.is_user)||!1,login:((ne=T==null?void 0:T.user)==null?void 0:ne.login)||"none",name:(fe=T==null?void 0:T.user)==null?void 0:fe.name,avatarUrl:(te=T==null?void 0:T.user)==null?void 0:te.avatar_url}},je=(T,X)=>T.map(ne=>({id:String(ne.build_num),buildName:ne.subject?ne.subject+(ne.retry_of?` (retry of #${ne.retry_of})`:""):"",startTime:ne.start_time,stopTime:ne.stop_time,onRestartClick:()=>typeof ne.build_num!="undefined"&&X(ne.build_num),source:nt(ne),workflow:ye(ne),user:be(ne),status:G(ne.status),buildUrl:ne.build_url})),ft=()=>{var T,X;const{entity:ne}=(0,x.X2)(),[fe,te,ge]=((X=(T=ne.metadata.annotations)==null?void 0:T[p])!=null?X:"").split("/");return{vcs:fe,owner:te,repo:ge}};function F(T){switch(T){case"gh":case"github":return e.GitType.GITHUB;default:return e.GitType.BITBUCKET}}function N(){const{repo:T,owner:X,vcs:ne}=ft(),fe=(0,E.h_)(qe),te=(0,E.h_)(E.VE),[ge,He]=(0,f.useState)(0),[it,ht]=(0,f.useState)(0),[ve,Fe]=(0,f.useState)(10),mt=(0,f.useCallback)(async({limit:sn,offset:De})=>{if(X===""||T===""||ne==="")return Promise.reject("No credentials provided");try{return await fe.getBuilds({limit:sn,offset:De},{vcs:{owner:X,repo:T,type:F(ne)}})}catch(Je){return te.post(Je),Promise.reject(Je)}},[T,X,ne,fe,te]),$t=async sn=>{try{await fe.retry(sn,{vcs:{owner:X,repo:T,type:F(ne)}})}catch(De){te.post(De)}};(0,f.useEffect)(()=>{mt({limit:1,offset:0}).then(sn=>He(sn==null?void 0:sn[0].build_num))},[T,mt]);const{loading:Zt,value:Gt,retry:Jt}=(0,m.Z)(()=>mt({offset:it*ve,limit:ve}).then(sn=>je(sn!=null?sn:[],$t)),[it,ve,mt]),xt=`${X}/${T}`;return[{page:it,pageSize:ve,loading:Zt,value:Gt,projectName:xt,total:ge},{getBuilds:mt,setPage:ht,setPageSize:Fe,restartBuild:$t,retry:Jt}]}const _e=1500;function ze(T){const{vcs:X,repo:ne,owner:fe}=ft(),te=(0,E.h_)(qe),ge=(0,E.h_)(E.VE),He=(0,f.useMemo)(()=>({owner:fe,repo:ne,type:F(X)}),[fe,ne,X]),it=(0,f.useCallback)(async()=>{if(fe===""||ne===""||X==="")return Promise.reject("No credentials provided");try{const Gt={vcs:He},Jt=await te.getBuild(T,Gt);return Promise.resolve(Jt)}catch(Gt){return ge.post(Gt),Promise.reject(Gt)}},[He,T,te,ge]),ht=async()=>{try{await te.retry(T,{vcs:He})}catch(Gt){ge.post(Gt)}},{loading:ve,value:Fe,retry:mt}=(0,m.Z)(()=>it(),[it]),{startPolling:$t,stopPolling:Zt}=de(it,_e);return[{loading:ve,value:Fe,retry:mt},{restartBuild:ht,getBuildWithSteps:it,startPolling:$t,stopPolling:Zt}]}const dt=M.Z,St=({build:T})=>f.createElement(z.Z,{display:"flex",alignItems:"center"},"#",T==null?void 0:T.build_num," - ",T==null?void 0:T.subject,f.createElement(dt,{href:T==null?void 0:T.build_url,target:"_blank"},f.createElement(I.Z,null))),Bt=(0,j.Z)(T=>({neutral:{},failed:{position:"relative","&:after":{pointerEvents:"none",content:'""',position:"absolute",top:0,right:0,left:0,bottom:0,boxShadow:`inset 4px 0px 0px ${T.palette.error.main}`}},running:{position:"relative","&:after":{pointerEvents:"none",content:'""',position:"absolute",top:0,right:0,left:0,bottom:0,boxShadow:`inset 4px 0px 0px ${T.palette.info.main}`}},cardContent:{backgroundColor:T.palette.background.default},success:{position:"relative","&:after":{pointerEvents:"none",content:'""',position:"absolute",top:0,right:0,left:0,bottom:0,boxShadow:`inset 4px 0px 0px ${T.palette.success.main}`}}})),Lt=(T,X={})=>X.failed?T.failed:["running","queued"].includes(X.status)?T.running:X.status==="success"?T.success:T.neutral,Re=({actions:T})=>{const X=Bt();return f.createElement(f.Fragment,null,T.map(ne=>f.createElement(Ue,{className:ne.failed?X.failed:X.success,action:ne,name:ne.name,url:ne.output_url||""})))},_t=({build:T})=>f.createElement(z.Z,null,T&&T.steps&&T.steps.map(({name:X,actions:ne})=>f.createElement(Re,{key:X,name:X,actions:ne}))),Ct=()=>{const{buildId:T=""}=(0,r.UO)(),X=Bt(),[{loading:ne,value:fe},{startPolling:te,stopPolling:ge}]=ze(parseInt(T,10));return(0,f.useEffect)(()=>(te(),()=>ge()),[T,te,ge]),f.createElement(f.Fragment,null,f.createElement(z.Z,{mb:3},f.createElement(w.Oo,{"aria-label":"breadcrumb"},f.createElement(w.rU,{to:".."},"All builds"),f.createElement(h.Z,null,"Build details"))),f.createElement(K.Z,{container:!0,spacing:3,direction:"column"},f.createElement(K.Z,{item:!0},f.createElement(w.rJ,{className:Lt(X,fe),title:f.createElement(St,{build:fe}),cardClassName:X.cardContent},ne?f.createElement(w.Ex,null):f.createElement(_t,{build:fe})))))},Qt=(T="")=>{switch(T.toLocaleLowerCase("en-US")){case"queued":case"scheduled":return f.createElement(w.wA,null);case"running":return f.createElement(w.VC,null);case"failed":return f.createElement(w.vK,null);case"success":return f.createElement(w.Kq,null);case"canceled":default:return f.createElement(w.Pd,null)}},st=(0,j.Z)(T=>({root:{display:"flex","& > *":{margin:T.spacing(1),verticalAlign:"center"}},small:{width:T.spacing(3),height:T.spacing(3)}})),me=({build:T})=>{var X,ne;const fe=st(),{user:te,source:ge}=T;return f.createElement(z.Z,{display:"flex",alignItems:"center",className:fe.root},f.createElement(ie.Z,{alt:te.name,src:te.avatarUrl,className:fe.small}),f.createElement(z.Z,null,f.createElement(h.Z,{variant:"button"},ge==null?void 0:ge.branchName),f.createElement(h.Z,{variant:"body1"},((X=ge==null?void 0:ge.commit)==null?void 0:X.url)!==void 0?f.createElement(w.rU,{to:(ne=ge==null?void 0:ge.commit)==null?void 0:ne.url},ge==null?void 0:ge.commit.shortHash):ge==null?void 0:ge.commit.shortHash)))},ce=[{title:"ID",field:"id",type:"numeric",width:"80px"},{title:"Build",field:"buildName",highlight:!0,width:"20%",render:T=>{const X=()=>{var ne;const fe=(0,E.tg)(At);return f.createElement(w.rU,{component:c.rU,to:`${fe({buildId:T.id})}`},T.buildName?T.buildName:(ne=T==null?void 0:T.workflow)==null?void 0:ne.name)};return f.createElement(X,null)}},{title:"Job",field:"buildName",highlight:!0,render:T=>{var X,ne;return f.createElement(w.rU,{to:(X=T==null?void 0:T.buildUrl)!=null?X:""},f.createElement(z.Z,{display:"flex",alignItems:"center"},f.createElement(I.Z,{fontSize:"small",color:"disabled"}),f.createElement(z.Z,{mr:1}),(ne=T==null?void 0:T.workflow)==null?void 0:ne.jobName))}},{title:"Source",field:"source.commit.hash",highlight:!0,render:T=>f.createElement(me,{build:T})},{title:"Status",field:"status",render:T=>f.createElement(z.Z,{display:"flex",alignItems:"center"},Qt(T.status),f.createElement(z.Z,{mr:1}),f.createElement(h.Z,{variant:"button"},T.status))},{title:"Time",field:"startTime",render:T=>f.createElement(f.Fragment,null,f.createElement(h.Z,{variant:"body2"},"run ",ct(T==null?void 0:T.startTime)),f.createElement(h.Z,{variant:"body2"},"took ",xe(T==null?void 0:T.startTime,T==null?void 0:T.stopTime)))},{title:"Workflow",field:"workflow.name"},{title:"Actions",width:"10%",render:T=>f.createElement(M.Z,{onClick:T.onRestartClick},f.createElement(Be.Z,null))}],we=({projectName:T,loading:X,pageSize:ne,page:fe,retry:te,builds:ge,onChangePage:He,onChangePageSize:it,total:ht})=>f.createElement(w.iA,{isLoading:X,options:{paging:!0,pageSize:ne,padding:"dense",pageSizeOptions:[10,20,50]},totalCount:ht,page:fe,actions:[{icon:()=>f.createElement(Be.Z,null),tooltip:"Refresh Data",isFreeAction:!0,onClick:()=>te()}],data:ge,onPageChange:He,onRowsPerPageChange:it,title:f.createElement(z.Z,{display:"flex",alignItems:"center"},f.createElement(Ve.Z,null),f.createElement(z.Z,{mr:1}),f.createElement(h.Z,{variant:"h6"},T)),columns:ce}),se=()=>{const[{total:T,loading:X,value:ne,projectName:fe,page:te,pageSize:ge},{setPage:He,retry:it,setPageSize:ht}]=N();return f.createElement(we,{total:T,loading:X,retry:it,builds:ne!=null?ne:[],projectName:fe,page:te,onChangePage:He,pageSize:ge,onChangePageSize:ht})},Te=()=>f.createElement(K.Z,{container:!0,spacing:3,direction:"column"},f.createElement(K.Z,{item:!0},f.createElement(se,null))),Ae=T=>{var X;return Boolean((X=T.metadata.annotations)==null?void 0:X[p])};var Q=Object.freeze({__proto__:null,isCircleCIAvailable:Ae,Router:()=>{const{entity:T}=(0,x.X2)();return Ae(T)?f.createElement(r.Z5,null,f.createElement(r.AW,{path:"/",element:f.createElement(Te,null)}),f.createElement(r.AW,{path:`${At.path}`,element:f.createElement(Ct,null)})):f.createElement(w.sk,{annotation:p})}})},42214:function(Mt,g,t){t.d(g,{IJ:function(){return He},Oz:function(){return ht},Q3:function(){return T},fX:function(){return ft},i4:function(){return ge}});var e=t(30705),d=t(1854),E=t(89393),f=t(2784),r=t(73495),c=t(73557),S=t(79692),O=t(27616),h=t(8284),R=t(90436),M=t(4614),z=t(80030),K=t(69087),j=t(35111),ie=t(14498),w=t(89571),D=t(15584),P=t(49378),$=t(70660),U=t(91256),I=t(37390),m=t(95544),x=t(67358),W=t(27556),Ee=t(97485),Be=t(86689),Ve=t(61837),qe=t(77277),Et=t(38016),at=t(69001),Pt=t(26228),At=t(49558),q=t(64279),rn=t(30254),ct=t(43266),xe=t(58838),oe=t(39857),Ue=t(77446),de=t(26883);const p=(0,e.T0)({id:"plugin.githubactions.service"});class G{constructor(Fe){this.configApi=Fe.configApi,this.githubAuthApi=Fe.githubAuthApi}async getOctokit(Fe){var mt;const $t=await this.githubAuthApi.getAccessToken(["repo"]),Gt=(0,d.E8)((mt=this.configApi.getOptionalConfigArray("integrations.github"))!=null?mt:[]).find(xt=>xt.host===Fe),Jt=Gt==null?void 0:Gt.apiBaseUrl;return new E.v({auth:$t,baseUrl:Jt})}async reRunWorkflow(Fe){const{hostname:mt,owner:$t,repo:Zt,runId:Gt}=Fe;return(await this.getOctokit(mt)).actions.reRunWorkflow({owner:$t,repo:Zt,run_id:Gt})}async listWorkflowRuns(Fe){const{hostname:mt,owner:$t,repo:Zt,pageSize:Gt=100,page:Jt=0,branch:xt}=Fe;return(await(await this.getOctokit(mt)).actions.listWorkflowRunsForRepo({owner:$t,repo:Zt,per_page:Gt,page:Jt,...xt?{branch:xt}:{}})).data}async getWorkflow(Fe){const{hostname:mt,owner:$t,repo:Zt,id:Gt}=Fe;return(await(await this.getOctokit(mt)).actions.getWorkflow({owner:$t,repo:Zt,workflow_id:Gt})).data}async getWorkflowRun(Fe){const{hostname:mt,owner:$t,repo:Zt,id:Gt}=Fe;return(await(await this.getOctokit(mt)).actions.getWorkflowRun({owner:$t,repo:Zt,run_id:Gt})).data}async listJobsForWorkflowRun(Fe){const{hostname:mt,owner:$t,repo:Zt,id:Gt,pageSize:Jt=100,page:xt=0}=Fe;return(await(await this.getOctokit(mt)).actions.listJobsForWorkflowRun({owner:$t,repo:Zt,run_id:Gt,per_page:Jt,page:xt})).data}async downloadJobLogsForWorkflowRun(Fe){const{hostname:mt,owner:$t,repo:Zt,runId:Gt}=Fe;return(await(await this.getOctokit(mt)).actions.downloadJobLogsForWorkflowRun({owner:$t,repo:Zt,job_id:Gt})).data}}var ye=(ve=>(ve[ve.success=0]="success",ve[ve.failure=1]="failure",ve[ve.pending=2]="pending",ve[ve.running=3]="running",ve))(ye||{});const nt=(0,e.NT)({id:"github-actions"}),be=(0,e.Rz)({id:"github-actions/build",path:"/:id",parent:nt}),je=(0,e.rx)({id:"github-actions",apis:[(0,e.ni)({api:p,deps:{configApi:e.Ds,githubAuthApi:e.F4},factory:({configApi:ve,githubAuthApi:Fe})=>new G({configApi:ve,githubAuthApi:Fe})})],routes:{entityContent:nt}}),ft=je.provide((0,e.P4)({name:"EntityGithubActionsContent",component:()=>Promise.resolve().then(function(){return ne}).then(ve=>ve.Router),mountPoint:nt})),F=je.provide((0,e.CO)({name:"EntityLatestGithubActionRunCard",component:{lazy:()=>t.e(2148).then(t.bind(t,32148)).then(ve=>ve.LatestWorkflowRunCard)}})),N=je.provide((0,e.CO)({name:"EntityLatestGithubActionsForBranchCard",component:{lazy:()=>t.e(2148).then(t.bind(t,32148)).then(ve=>ve.LatestWorkflowsForBranchCard)}})),_e=je.provide((0,e.CO)({name:"EntityRecentGithubActionsRunsCard",component:{lazy:()=>t.e(2148).then(t.bind(t,32148)).then(ve=>ve.RecentWorkflowRunsCard)}})),ze="github.com/project-slug",dt=ve=>{var Fe,mt;return(mt=(Fe=ve==null?void 0:ve.metadata.annotations)==null?void 0:Fe[ze])!=null?mt:""},St=({status:ve,conclusion:Fe})=>{if(ve===void 0)return null;switch(ve.toLocaleLowerCase("en-US")){case"queued":return f.createElement(f.Fragment,null,f.createElement(At.wA,null)," Queued");case"in_progress":return f.createElement(f.Fragment,null,f.createElement(At.VC,null)," In progress");case"completed":switch(Fe==null?void 0:Fe.toLocaleLowerCase("en-US")){case"skipped":return f.createElement(f.Fragment,null,f.createElement(At.dh,null)," Aborted");case"timed_out":return f.createElement(f.Fragment,null,f.createElement(At.Pd,null)," Timed out");case"failure":return f.createElement(f.Fragment,null,f.createElement(At.vK,null)," Error");default:return f.createElement(f.Fragment,null,f.createElement(At.Kq,null)," Completed")}default:return f.createElement(f.Fragment,null,f.createElement(At.wA,null)," Pending")}},Bt=({hostname:ve,owner:Fe,repo:mt})=>{const $t=(0,e.h_)(p),{id:Zt}=(0,e.Oi)(be);return(0,q.default)(async()=>{if(!mt||!Fe)throw new Error("No repo/owner provided");const Gt=await $t.listJobsForWorkflowRun({hostname:ve,owner:Fe,repo:mt,id:parseInt(Zt,10)});return{total_count:Gt.total_count,jobs:Gt.jobs.map(Jt=>{var xt,sn,De,Je;return{html_url:(xt=Jt.html_url)!=null?xt:void 0,status:Jt.status,conclusion:(sn=Jt.conclusion)!=null?sn:void 0,started_at:Jt.started_at,completed_at:(De=Jt.completed_at)!=null?De:void 0,id:Jt.id,name:Jt.name,steps:(Je=Jt.steps)==null?void 0:Je.map(et=>{var ae,pe,ke;return{name:et.name,status:et.status,conclusion:(ae=et.conclusion)!=null?ae:void 0,number:et.number,started_at:(pe=et.started_at)!=null?pe:void 0,completed_at:(ke=et.completed_at)!=null?ke:void 0}})}})}},[mt,Fe,Zt])},Lt=({hostname:ve,owner:Fe,repo:mt})=>{const $t=(0,e.h_)(p),{id:Zt}=(0,e.Oi)(be);return(0,q.default)(async()=>mt&&Fe?$t.getWorkflowRun({hostname:ve,owner:Fe,repo:mt,id:parseInt(Zt,10)}):Promise.reject(new Error("No repo/owner provided")),[mt,Fe,Zt])},Re=({hostname:ve,owner:Fe,repo:mt,id:$t})=>{const Zt=(0,e.h_)(p);return(0,q.default)(async()=>mt&&Fe?Zt.downloadJobLogsForWorkflowRun({hostname:ve,owner:Fe,repo:mt,runId:$t}):Promise.reject("No repo/owner provided"),[mt,Fe,$t])},_t=(0,S.Z)(ve=>({button:{order:-1,marginRight:0,marginLeft:"-20px"},modal:{display:"flex",alignItems:"center",width:"85%",height:"85%",justifyContent:"center",margin:"auto"},normalLogContainer:{height:"75vh",width:"100%"},modalLogContainer:{height:"100%",width:"100%"},log:{background:ve.palette.background.default}})),Ct=({entity:ve,runId:Fe,inProgress:mt})=>{var $t;const Zt=(0,e.h_)(e.Ds),Gt=_t(),Jt=dt(ve),xt=(0,d.E8)(($t=Zt.getOptionalConfigArray("integrations.github"))!=null?$t:[])[0].host,[sn,De]=Jt&&Jt.split("/")||[],Je=Re({hostname:xt,owner:sn,repo:De,id:Fe}),et=Je.value?String(Je.value):void 0,[ae,pe]=f.useState(!1),ke=()=>{pe(!0)},Ze=()=>{pe(!1)};return f.createElement(O.Z,{TransitionProps:{unmountOnExit:!0},disabled:mt},f.createElement(h.Z,{expandIcon:f.createElement(Et.Z,null),"aria-controls":`panel-${name}-content`,id:`panel-${name}-header`,IconButtonProps:{className:Gt.button}},f.createElement(R.Z,{variant:"button"},Je.loading?f.createElement(M.Z,null):"Job Log"),f.createElement(z.ZP,{title:"Open Log",TransitionComponent:K.Z,arrow:!0},f.createElement(rn.Z,{onClick:Se=>{Se.stopPropagation(),ke()},style:{marginLeft:"auto"}})),f.createElement(j.Z,{className:Gt.modal,onClick:Se=>Se.stopPropagation(),open:ae,onClose:Ze},f.createElement(ie.Z,{in:ae},f.createElement("div",{className:Gt.modalLogContainer},f.createElement(At.nU,{text:et!=null?et:"No Values Found",classes:{root:Gt.log}}))))),et&&f.createElement("div",{className:Gt.normalLogContainer},f.createElement(At.nU,{text:et,classes:{root:Gt.log}})))},Qt=(0,S.Z)(ve=>({root:{maxWidth:720,margin:ve.spacing(2)},title:{padding:ve.spacing(1,0,2,0)},table:{padding:ve.spacing(1)},accordionDetails:{padding:0},button:{order:-1,marginRight:0,marginLeft:"-20px"},externalLinkIcon:{fontSize:"inherit",verticalAlign:"bottom"}})),st=(ve,Fe)=>{if(!ve||!Fe)return"";const mt=Pt.ou.fromISO(ve);return(Fe?Pt.ou.fromISO(Fe):Pt.ou.now()).diff(mt).toFormat("m 'minutes' s 'seconds'")},me=({step:ve})=>{var Fe;return f.createElement(w.Z,null,f.createElement(D.Z,null,f.createElement(P.Z,{primary:ve.name,secondary:st(ve.started_at,ve.completed_at)})),f.createElement(D.Z,null,f.createElement(St,{status:ve.status.toLocaleUpperCase("en-US"),conclusion:(Fe=ve.conclusion)==null?void 0:Fe.toLocaleUpperCase("en-US")})))},ce=({job:ve,className:Fe,entity:mt})=>{var $t;const Zt=Qt();return f.createElement(O.Z,{TransitionProps:{unmountOnExit:!0},className:Fe},f.createElement(h.Z,{expandIcon:f.createElement(Et.Z,null),"aria-controls":`panel-${name}-content`,id:`panel-${name}-header`,IconButtonProps:{className:Zt.button}},f.createElement(R.Z,{variant:"button"},ve.name," (",st(ve.started_at,ve.completed_at),")")),f.createElement($.Z,{className:Zt.accordionDetails},f.createElement(U.Z,null,f.createElement(I.Z,null,($t=ve.steps)==null?void 0:$t.map(Gt=>f.createElement(me,{key:Gt.number,step:Gt}))))),ve.status==="queued"||ve.status==="in_progress"?f.createElement(Ct,{runId:ve.id,inProgress:!0,entity:mt}):f.createElement(Ct,{runId:ve.id,inProgress:!1,entity:mt}))},we=({jobs:ve,entity:Fe})=>{const mt=Qt();return f.createElement(m.Z,null,ve&&ve.total_count>0&&ve.jobs.map($t=>f.createElement(ce,{key:$t.id,job:$t,className:$t.status!=="success"?mt.failed:mt.success,entity:Fe})))},se=({entity:ve})=>{var Fe,mt,$t,Zt,Gt,Jt,xt,sn,De,Je,et,ae,pe,ke,Ze,Se;const pt=(0,e.h_)(e.Ds),vt=dt(ve),zt=(0,d.E8)((Fe=pt.getOptionalConfigArray("integrations.github"))!=null?Fe:[])[0].host,[Tt,It]=vt&&vt.split("/")||[],Ut=Lt({hostname:zt,owner:Tt,repo:It}),ln=Bt({hostname:zt,owner:Tt,repo:It}),mn=Qt();return Ut.error&&Ut.error.message?f.createElement(R.Z,{variant:"h6",color:"error"},"Failed to load build, ",Ut.error.message):Ut.loading?f.createElement(x.Z,null):f.createElement("div",{className:mn.root},f.createElement(m.Z,{mb:3},f.createElement(At.Oo,{"aria-label":"breadcrumb"},f.createElement(At.rU,{to:".."},"Workflow runs"),f.createElement(R.Z,null,"Workflow run details"))),f.createElement(U.Z,{component:W.Z,className:mn.table},f.createElement(I.Z,null,f.createElement(Ee.Z,null,f.createElement(w.Z,null,f.createElement(D.Z,null,f.createElement(R.Z,{noWrap:!0},"Branch")),f.createElement(D.Z,null,(mt=Ut.value)==null?void 0:mt.head_branch)),f.createElement(w.Z,null,f.createElement(D.Z,null,f.createElement(R.Z,{noWrap:!0},"Message")),f.createElement(D.Z,null,(Zt=($t=Ut.value)==null?void 0:$t.head_commit)==null?void 0:Zt.message)),f.createElement(w.Z,null,f.createElement(D.Z,null,f.createElement(R.Z,{noWrap:!0},"Commit ID")),f.createElement(D.Z,null,(Jt=(Gt=Ut.value)==null?void 0:Gt.head_commit)==null?void 0:Jt.id)),f.createElement(w.Z,null,f.createElement(D.Z,null,f.createElement(R.Z,{noWrap:!0},"Workflow")),f.createElement(D.Z,null,(xt=Ut.value)==null?void 0:xt.name)),f.createElement(w.Z,null,f.createElement(D.Z,null,f.createElement(R.Z,{noWrap:!0},"Status")),f.createElement(D.Z,null,f.createElement(St,{status:((sn=Ut.value)==null?void 0:sn.status)||void 0,conclusion:((De=Ut.value)==null?void 0:De.conclusion)||void 0}))),f.createElement(w.Z,null,f.createElement(D.Z,null,f.createElement(R.Z,{noWrap:!0},"Author")),f.createElement(D.Z,null,`${(ae=(et=(Je=Ut.value)==null?void 0:Je.head_commit)==null?void 0:et.author)==null?void 0:ae.name} (${(Ze=(ke=(pe=Ut.value)==null?void 0:pe.head_commit)==null?void 0:ke.author)==null?void 0:Ze.email})`)),f.createElement(w.Z,null,f.createElement(D.Z,null,f.createElement(R.Z,{noWrap:!0},"Links")),f.createElement(D.Z,null,((Se=Ut.value)==null?void 0:Se.html_url)&&f.createElement(Be.Z,{target:"_blank",href:Ut.value.html_url},"Workflow runs on GitHub"," ",f.createElement(at.Z,{className:mn.externalLinkIcon})))),f.createElement(w.Z,null,f.createElement(D.Z,{colSpan:2},f.createElement(R.Z,{noWrap:!0},"Jobs"),ln.loading?f.createElement(M.Z,null):f.createElement(we,{jobs:ln.value,entity:ve})))))))};function Te({hostname:ve,owner:Fe,repo:mt,branch:$t,initialPageSize:Zt=5}){const Gt=(0,e.h_)(p),Jt=(0,e.h_)(e.VE),[xt,sn]=(0,f.useState)(0),[De,Je]=(0,f.useState)(0),[et,ae]=(0,f.useState)(Zt),{loading:pe,value:ke,retry:Ze,error:Se}=(0,Ue.Z)(async()=>{const pt=await Gt.listWorkflowRuns({hostname:ve,owner:Fe,repo:mt,pageSize:et,page:De+1,branch:$t});return sn(pt.total_count),pt.workflow_runs.map(vt=>{var zt,Tt,It,Ut,ln,mn,cn,En,en;return{workflowName:(zt=vt.name)!=null?zt:void 0,message:(Tt=vt.head_commit)==null?void 0:Tt.message,id:`${vt.id}`,onReRunClick:async()=>{try{await Gt.reRunWorkflow({hostname:ve,owner:Fe,repo:mt,runId:vt.id})}catch(Sn){Jt.post(Sn)}},source:{branchName:(It=vt.head_branch)!=null?It:void 0,commit:{hash:(Ut=vt.head_commit)==null?void 0:Ut.id,url:(cn=(ln=vt.head_repository)==null?void 0:ln.branches_url)==null?void 0:cn.replace("{/branch}",(mn=vt.head_branch)!=null?mn:"")}},status:(En=vt.status)!=null?En:void 0,conclusion:(en=vt.conclusion)!=null?en:void 0,url:vt.url,githubUrl:vt.html_url}})},[De,et,mt,Fe]);return[{page:De,pageSize:et,loading:pe,runs:ke,projectName:`${Fe}/${mt}`,total:xt,error:Se},{runs:ke,setPage:Je,setPageSize:ae,retry:Ze}]}const Ae=[{title:"ID",field:"id",type:"numeric",width:"150px"},{title:"Message",field:"message",highlight:!0,render:ve=>{const Fe=()=>{const mt=(0,e.tg)(be);return f.createElement(Be.Z,{component:oe.rU,to:mt({id:ve.id})},ve.message)};return f.createElement(Fe,null)}},{title:"Source",render:ve=>{var Fe,mt;return f.createElement(R.Z,{variant:"body2",noWrap:!0},f.createElement("p",null,(Fe=ve.source)==null?void 0:Fe.branchName),f.createElement("p",null,(mt=ve.source)==null?void 0:mt.commit.hash))}},{title:"Workflow",field:"workflowName"},{title:"Status",width:"150px",render:ve=>f.createElement(m.Z,{display:"flex",alignItems:"center"},f.createElement(St,{status:ve.status,conclusion:ve.conclusion}))},{title:"Actions",render:ve=>f.createElement(z.ZP,{title:"Rerun workflow"},f.createElement(Ve.Z,{onClick:ve.onReRunClick},f.createElement(ct.Z,null))),width:"10%"}],Ne=({projectName:ve,loading:Fe,pageSize:mt,page:$t,retry:Zt,runs:Gt,onChangePage:Jt,onChangePageSize:xt,total:sn})=>f.createElement(At.iA,{isLoading:Fe,options:{paging:!0,pageSize:mt,padding:"dense"},totalCount:sn,page:$t,actions:[{icon:()=>f.createElement(de.Z,null),tooltip:"Reload workflow runs",isFreeAction:!0,onClick:()=>Zt()}],data:Gt!=null?Gt:[],onPageChange:Jt,onRowsPerPageChange:xt,style:{width:"100%"},title:f.createElement(m.Z,{display:"flex",alignItems:"center"},f.createElement(xe.Z,null),f.createElement(m.Z,{mr:1}),f.createElement(R.Z,{variant:"h6"},ve)),columns:Ae}),Q=({entity:ve,branch:Fe})=>{var mt;const $t=(0,e.h_)(e.Ds),Zt=dt(ve),Gt=(0,d.E8)((mt=$t.getOptionalConfigArray("integrations.github"))!=null?mt:[])[0].host,[Jt,xt]=(Zt!=null?Zt:"/").split("/"),[{runs:sn,...De},{retry:Je,setPage:et,setPageSize:ae}]=Te({hostname:Gt,owner:Jt,repo:xt,branch:Fe}),pe=Gt||"github.com";return!De.loading&&!sn?f.createElement(At.ub,{missing:"data",title:"No Workflow Data",description:"This component has GitHub Actions enabled, but no data was found. Have you created any Workflows? Click the button below to create a new Workflow.",action:f.createElement(qe.Z,{variant:"contained",color:"primary",href:`https://${pe}/${Zt}/actions/new`},"Create new Workflow")}):f.createElement(Ne,{...De,runs:sn,loading:De.loading,retry:Je,onChangePageSize:ae,onChangePage:et})},T=ve=>{var Fe;return Boolean((Fe=ve.metadata.annotations)==null?void 0:Fe[ze])};var ne=Object.freeze({__proto__:null,isGithubActionsAvailable:T,Router:()=>{const{entity:ve}=(0,r.X2)();return T(ve)?f.createElement(c.Z5,null,f.createElement(c.AW,{path:"/",element:f.createElement(Q,{entity:ve})}),f.createElement(c.AW,{path:`${be.path}`,element:f.createElement(se,{entity:ve})}),")"):f.createElement(At.sk,{annotation:ze})}});const fe=(0,S.Z)({externalLinkIcon:{fontSize:"inherit",verticalAlign:"bottom"}}),te=ve=>{var Fe;const{error:mt,loading:$t,lastRun:Zt,branch:Gt}=ve,Jt=fe();return mt?f.createElement(R.Z,null,"Couldn't fetch latest ",Gt," run"):$t?f.createElement(x.Z,null):f.createElement(At.xT,{metadata:{status:f.createElement(f.Fragment,null,f.createElement(St,{status:Zt.status,conclusion:Zt.conclusion})),message:Zt.message,url:f.createElement(At.rU,{to:(Fe=Zt.githubUrl)!=null?Fe:""},"See more on GitHub"," ",f.createElement(at.Z,{className:Jt.externalLinkIcon}))}})},ge=ve=>{var Fe,mt,$t,Zt;const{branch:Gt="master",variant:Jt}=ve,{entity:xt}=(0,r.X2)(),sn=(0,e.h_)(e.Ds),De=(0,e.h_)(e.VE),Je=(0,d.E8)((Fe=sn.getOptionalConfigArray("integrations.github"))!=null?Fe:[])[0].host,[et,ae]=(($t=(mt=xt==null?void 0:xt.metadata.annotations)==null?void 0:mt[ze])!=null?$t:"/").split("/"),[{runs:pe,loading:ke,error:Ze}]=Te({hostname:Je,owner:et,repo:ae,branch:Gt}),Se=(Zt=pe==null?void 0:pe[0])!=null?Zt:{};return(0,f.useEffect)(()=>{Ze&&De.post(Ze)},[Ze,De]),f.createElement(At.rJ,{title:`Last ${Gt} build`,variant:Jt},f.createElement(te,{error:Ze,loading:ke,branch:Gt,lastRun:Se}))},He=ve=>{const{branch:Fe="master",variant:mt}=ve,{entity:$t}=(0,r.X2)();return f.createElement(At.rJ,{title:`Last ${Fe} build`,variant:mt},f.createElement(Q,{branch:Fe,entity:$t}))},it=ve=>ve.split(`
`)[0],ht=ve=>{var Fe,mt,$t;const{branch:Zt,dense:Gt=!1,limit:Jt=5,variant:xt}=ve,{entity:sn}=(0,r.X2)(),De=(0,e.h_)(e.Ds),Je=(0,e.h_)(e.VE),et=(0,d.E8)((Fe=De.getOptionalConfigArray("integrations.github"))!=null?Fe:[])[0].host,[ae,pe]=(($t=(mt=sn==null?void 0:sn.metadata.annotations)==null?void 0:mt[ze])!=null?$t:"/").split("/"),[{runs:ke=[],loading:Ze,error:Se}]=Te({hostname:et,owner:ae,repo:pe,branch:Zt,initialPageSize:Jt});(0,f.useEffect)(()=>{Se&&Je.post(Se)},[Se,Je]);const pt=et||"github.com",vt=(0,e.tg)(be);return f.createElement(At.rJ,{title:"Recent Workflow Runs",subheader:Zt?`Branch: ${Zt}`:"All Branches",noPadding:!0,variant:xt},ke.length?f.createElement(At.iA,{isLoading:Ze,options:{search:!1,paging:!1,padding:Gt?"dense":"default",toolbar:!1},columns:[{title:"Commit Message",field:"message",render:zt=>{var Tt;return f.createElement(At.rU,{component:oe.rU,to:vt({id:zt.id})},it((Tt=zt.message)!=null?Tt:""))}},{title:"Branch",field:"source.branchName"},{title:"Status",field:"status",render:St}],data:ke}):f.createElement("div",{style:{textAlign:"center"}},f.createElement(R.Z,{variant:"body1"},"This component has GitHub Actions enabled, but no workflows were found."),f.createElement(R.Z,{variant:"body2"},f.createElement(At.rU,{to:`https://${pt}/${ae}/${pe}/actions/new`},"Create a new workflow"))))}},59235:function(Mt,g,t){t.d(g,{$M:function(){return oe},Eg:function(){return de},Jh:function(){return F},Yq:function(){return Ct},jJ:function(){return Qt},jQ:function(){return p},oy:function(){return je},qJ:function(){return nt},rw:function(){return Ue},w1:function(){return xe}});var e=t(30705),d=t(34520),E=t(73495),f=t(79692),r=t(12420),c=t(60905),S=t(95544),O=t(90436),h=t(61837),R=t(11776),M=t(38402),z=t(86136),K=t(80030),j=t(49378),ie=t(9520),w=t(82938),D=t(76637),P=t(2784),$=t(16060),U=t(64279),I=t(49558),m=t(73655),x=t(13384),W=t(62367),Ee=t(27604),Be=t(52866),Ve=t(99688),qe=t(98685),Et=t(19928),at=t.n(Et),Pt=t(14162),At=t.n(Pt),q=t(19126),rn=t.n(q);const ct=(0,e.x8)({id:"catalog-index"}),xe=(0,e.rx)({id:"org",externalRoutes:{catalogIndex:ct}}),oe=xe.provide((0,e.CO)({name:"EntityGroupProfileCard",component:{lazy:()=>t.e(6379).then(t.bind(t,46379)).then(st=>st.GroupProfileCard)}})),Ue=xe.provide((0,e.CO)({name:"EntityMembersListCard",component:{lazy:()=>t.e(6379).then(t.bind(t,46379)).then(st=>st.MembersListCard)}})),de=xe.provide((0,e.CO)({name:"EntityOwnershipCard",component:{lazy:()=>t.e(6379).then(t.bind(t,46379)).then(st=>st.OwnershipCard)}})),p=xe.provide((0,e.CO)({name:"EntityUserProfileCard",component:{lazy:()=>t.e(6379).then(t.bind(t,46379)).then(st=>st.UserProfileCard)}})),G=(0,f.Z)(st=>(0,r.Z)({card:{border:`1px solid ${st.palette.divider}`,boxShadow:st.shadows[2],borderRadius:"4px",overflow:"visible",position:"relative",margin:st.spacing(4,1,1),flex:"1",minWidth:"0px"},email:{overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",display:"inline-block",maxWidth:"100%","&:hover":{overflow:"visible",whiteSpace:"normal"}}})),ye=st=>{var me;const ce=G(),{metadata:{name:we,description:se},spec:{profile:Te}}=st.member,Ae=(me=Te==null?void 0:Te.displayName)!=null?me:we;return P.createElement(c.Z,{item:!0,container:!0,xs:12,sm:6,md:4,xl:2},P.createElement(S.Z,{className:ce.card},P.createElement(S.Z,{display:"flex",flexDirection:"column",m:3,alignItems:"center",justifyContent:"center"},P.createElement(I.qE,{displayName:Ae,picture:Te==null?void 0:Te.picture,customStyles:{position:"absolute",top:"-2rem"}}),P.createElement(S.Z,{pt:2,sx:{maxWidth:"100%"},textAlign:"center"},P.createElement(O.Z,{variant:"h5"},P.createElement(I.rU,{to:(0,$.Gn)(`/catalog/:namespace/user/${we}`,(0,E.hd)(st.member))},Ae)),(Te==null?void 0:Te.email)&&P.createElement(I.rU,{className:ce.email,to:`mailto:${Te.email}`},Te.email),se&&P.createElement(O.Z,{variant:"subtitle2"},se)))))},nt=st=>{var me;const{memberDisplayTitle:ce="Members",pageSize:we=50}=st,{entity:se}=(0,E.X2)(),{metadata:{name:Te,namespace:Ae},spec:{profile:Ne}}=se,Q=(0,e.h_)(E.Ah),T=(me=Ne==null?void 0:Ne.displayName)!=null?me:Te,X=Ae||d.zG,[ne,fe]=P.useState(1),te=(mt,$t)=>{fe($t)},{loading:ge,error:He,value:it}=(0,U.default)(async()=>(await Q.getEntities({filter:{kind:"User","relations.memberof":[(0,d.eE)({kind:"group",namespace:X.toLocaleLowerCase("en-US"),name:Te.toLocaleLowerCase("en-US")})]}})).items,[Q,se]);if(ge)return P.createElement(I.Ex,null);if(He)return P.createElement(I.Gk,{error:He});const ht=Math.ceil(((it==null?void 0:it.length)||0)/we),ve=ht<2?"":`, page ${ne} of ${ht}`,Fe=P.createElement(D.Z,{count:ht,page:ne,onChange:te,showFirstButton:!0,showLastButton:!0});return P.createElement(c.Z,{item:!0},P.createElement(I.rJ,{title:`${ce} (${(it==null?void 0:it.length)||0}${ve})`,subheader:`of ${T}`,...ht<=1?{}:{actions:Fe}},P.createElement(c.Z,{container:!0,spacing:3},it&&it.length>0?it.slice(we*(ne-1),we*ne).map(mt=>P.createElement(ye,{member:mt,key:mt.metadata.uid})):P.createElement(S.Z,{p:2},P.createElement(O.Z,null,"This group has no ",ce.toLocaleLowerCase(),".")))))},be=st=>P.createElement(S.Z,{display:"flex",alignItems:"center"},P.createElement(W.Z,{fontSize:"inherit"}),P.createElement(S.Z,{ml:1},st.title)),je=st=>{var me,ce;const we=(0,e.h_)(E.Ah),se=(0,e.h_)(e.$v),{entity:Te}=(0,E.X2)(),Ae=(0,P.useCallback)(async()=>{await we.refreshEntity((0,d.eE)(Te)),se.post({message:"Refresh scheduled",severity:"info"})},[we,se,Te]);if(!Te)return P.createElement(Ve.Z,{severity:"error"},"Group not found");const{metadata:{name:Ne,description:Q,annotations:T},spec:{profile:X}}=Te,ne=(0,E.hF)(Te,d._b,{kind:"Group"}),fe=(0,E.hF)(Te,d.wP,{kind:"group"}),te=T==null?void 0:T[d.P1],ge=(te==null?void 0:te.startsWith("url:"))||(te==null?void 0:te.startsWith("file:")),He=(me=Te.metadata.annotations)==null?void 0:me[d.Tf],it=(ce=X==null?void 0:X.displayName)!=null?ce:Ne,ht=X!=null&&X.email?`mailto:${X.email}`:"#",ve=He?P.createElement(h.Z,{"aria-label":"Edit",title:"Edit Metadata",component:I.rU,to:He},P.createElement(Ee.Z,null)):P.createElement(h.Z,{"aria-label":"Edit",disabled:!0,title:"Edit Metadata"},P.createElement(Ee.Z,null));return P.createElement(I.rJ,{title:P.createElement(be,{title:it}),subheader:Q,variant:st.variant,action:P.createElement(P.Fragment,null,ge&&P.createElement(h.Z,{"aria-label":"Refresh",title:"Schedule entity refresh",onClick:Ae},P.createElement(Be.Z,null)),ve)},P.createElement(c.Z,{container:!0,spacing:3},P.createElement(c.Z,{item:!0,xs:12,sm:2,xl:1},P.createElement(I.qE,{displayName:it,picture:X==null?void 0:X.picture})),P.createElement(c.Z,{item:!0,md:10,xl:11},P.createElement(R.Z,null,(X==null?void 0:X.email)&&P.createElement(M.Z,null,P.createElement(z.Z,null,P.createElement(K.ZP,{title:"Email"},P.createElement(x.Z,null))),P.createElement(j.Z,{primary:P.createElement(I.rU,{to:ht},X.email),secondary:"Email"})),P.createElement(M.Z,null,P.createElement(z.Z,null,P.createElement(K.ZP,{title:"Parent Group"},P.createElement(m.Z,null))),P.createElement(j.Z,{primary:fe.length?P.createElement(E.rI,{entityRefs:fe,defaultKind:"Group"}):"N/A",secondary:"Parent Group"})),P.createElement(M.Z,null,P.createElement(z.Z,null,P.createElement(K.ZP,{title:"Child Groups"},P.createElement(W.Z,null))),P.createElement(j.Z,{primary:ne.length?P.createElement(E.rI,{entityRefs:ne,defaultKind:"Group"}):"N/A",secondary:"Child Groups"}))))))},ft=st=>st.title?P.createElement(S.Z,{display:"flex",alignItems:"center"},P.createElement(qe.Z,{fontSize:"inherit"}),P.createElement(S.Z,{ml:1},st.title)):null,F=st=>{var me,ce;const{entity:we}=(0,E.X2)();if(!we)return P.createElement(Ve.Z,{severity:"error"},"User not found");const se=(me=we.metadata.annotations)==null?void 0:me[d.Tf],{metadata:{name:Te,description:Ae},spec:{profile:Ne}}=we,Q=(ce=Ne==null?void 0:Ne.displayName)!=null?ce:Te,T=Ne!=null&&Ne.email?`mailto:${Ne.email}`:void 0,X=(0,E.hF)(we,d.hr,{kind:"Group"});return P.createElement(I.rJ,{title:P.createElement(ft,{title:Q}),subheader:Ae,variant:st.variant,action:P.createElement(P.Fragment,null,se&&P.createElement(h.Z,{"aria-label":"Edit",title:"Edit Metadata",component:I.rU,to:se},P.createElement(Ee.Z,null)))},P.createElement(c.Z,{container:!0,spacing:3,alignItems:"flex-start"},P.createElement(c.Z,{item:!0,xs:12,sm:2,xl:1},P.createElement(I.qE,{displayName:Q,picture:Ne==null?void 0:Ne.picture})),P.createElement(c.Z,{item:!0,md:10,xl:11},P.createElement(R.Z,null,(Ne==null?void 0:Ne.email)&&P.createElement(M.Z,null,P.createElement(z.Z,null,P.createElement(K.ZP,{title:"Email"},P.createElement(x.Z,null))),P.createElement(j.Z,null,P.createElement(I.rU,{to:T!=null?T:""},Ne.email))),P.createElement(M.Z,null,P.createElement(z.Z,null,P.createElement(K.ZP,{title:"Member of"},P.createElement(W.Z,null))),P.createElement(j.Z,null,P.createElement(E.rI,{entityRefs:X,defaultKind:"Group"})))))))},N=At()(10),_e=(st,me)=>{const{kind:ce,type:we}=me,se=st.map(Ae=>(0,E.$3)((0,d.of)(Ae),{defaultKind:"group"})),Te={kind:ce,type:we,owners:se,user:"all"};return rn().stringify({filters:Te},{arrayFormat:"repeat"})},ze=st=>{let me=[(0,d.eE)(st)];if(st.kind==="User"){const we=(0,E.hF)(st,d.hr,{kind:"Group"}).map(se=>(0,d.eE)({kind:se.kind,namespace:se.namespace,name:se.name}));me=[...me,...we]}return me},dt=async(st,me)=>{const ce=[],we=new Map,se=new Set;ce.push(st);let Te=st;for(;ce.length>0;){const Ae=(0,E.hF)(Te,d._b,{kind:"Group"});await Promise.all(Ae.map(Ne=>N(async()=>{const Q=me.getEntityByRef(Ne);we.set(Ne.name,Q);try{const T=await Q;T&&ce.push(T)}finally{we.delete(Ne.name)}}))),ce.shift(),se.add((0,d.eE)({kind:Te.kind,namespace:Te.metadata.namespace,name:Te.metadata.name})),Te=ce[0]}return Array.from(se)};function St(st,me,ce,we){const se=(0,e.h_)(E.Ah),Te=we!=null?we:["Component","API","System"],{loading:Ae,error:Ne,value:Q}=(0,U.default)(async()=>{const T=me==="aggregated"&&ce?await dt(st,se):ze(st);return(await se.getEntities({filter:[{kind:Te,"relations.ownedBy":T}],fields:["kind","metadata.name","metadata.namespace","spec.type","relations"]})).items.reduce((te,ge)=>{var He,it,ht;const ve=te.find(Fe=>{var mt,$t;return Fe.kind===ge.kind&&Fe.type===(($t=(mt=ge.spec)==null?void 0:mt.type)!=null?$t:ge.kind)});return ve?ve.count+=1:te.push({kind:ge.kind,type:(ht=(it=(He=ge.spec)==null?void 0:He.type)==null?void 0:it.toString())!=null?ht:ge.kind,count:1}),te},[]).sort((te,ge)=>ge.count-te.count).slice(0,6).map(te=>({counter:te.count,type:te.type,name:te.type.toLocaleUpperCase("en-US"),queryParams:_e(T,te)}))},[se,st,me]);return{componentsWithCounters:Q,loading:Ae,error:Ne}}const Bt=(0,f.Z)(st=>(0,r.Z)({card:{border:`1px solid ${st.palette.divider}`,boxShadow:st.shadows[2],borderRadius:"4px",padding:st.spacing(2),color:"#fff",transition:`${st.transitions.duration.standard}ms`,"&:hover":{boxShadow:st.shadows[4]}},bold:{fontWeight:st.typography.fontWeightBold},entityTypeBox:{background:me=>st.getPageTheme({themeId:me.type}).backgroundImage}})),Lt=({counter:st,type:me,name:ce,url:we})=>{const se=Bt({type:me});return P.createElement(I.rU,{to:we,variant:"body2"},P.createElement(S.Z,{className:`${se.card} ${se.entityTypeBox}`,display:"flex",flexDirection:"column",alignItems:"center"},P.createElement(O.Z,{className:se.bold,variant:"h6"},st),P.createElement(O.Z,{className:se.bold,variant:"h6"},at()(ce,st))))},Re=({entity:st,relationsType:me,isGroup:ce,entityFilterKind:we})=>{const se=(0,e.tg)(ct),{componentsWithCounters:Te,loading:Ae,error:Ne}=St(st,me,ce,we);return Ae?P.createElement(I.Ex,null):Ne?P.createElement(I.Gk,{error:Ne}):P.createElement(c.Z,{container:!0},Te==null?void 0:Te.map(Q=>P.createElement(c.Z,{item:!0,xs:6,md:6,lg:4,key:Q.name},P.createElement(Lt,{counter:Q.counter,type:Q.type,name:Q.name,url:`${se()}/?${Q.queryParams}`}))))},_t=(0,f.Z)(st=>({list:{[st.breakpoints.down("xs")]:{padding:"0 0 12px"}},listItemText:{[st.breakpoints.down("xs")]:{paddingRight:0,paddingLeft:0}},listItemSecondaryAction:{[st.breakpoints.down("xs")]:{width:"100%",top:"auto",right:"auto",position:"relative",transform:"unset"}}})),Ct=st=>{const{variant:me,entityFilterKind:ce,hideRelationsToggle:we,relationsType:se}=st,Te=we===void 0?!1:we,Ae=_t(),{entity:Ne}=(0,E.X2)(),Q=Ne.kind==="Group",[T,X]=(0,P.useState)(se||"direct");return P.createElement(I.rJ,{title:"Ownership",variant:me},!Te&&P.createElement(R.Z,{dense:!0},P.createElement(M.Z,{className:Ae.list},P.createElement(j.Z,{className:Ae.listItemText}),P.createElement(ie.Z,{className:Ae.listItemSecondaryAction},"Direct Relations",P.createElement(K.ZP,{placement:"top",arrow:!0,title:`${T==="direct"?"Direct":"Aggregated"} Relations`},P.createElement(w.Z,{color:"primary",checked:T!=="direct",onChange:()=>X(T==="direct"?"aggregated":"direct"),name:"pin",inputProps:{"aria-label":"Ownership Type Switch"},disabled:!Q})),"Aggregated Relations"))),P.createElement(Re,{entity:Ne,relationsType:T,isGroup:Q,entityFilterKind:ce}))},Qt=st=>{const{singularTitle:me,pluralTitle:ce,icon:we,filter:se}=st,Te=(0,e.h_)(e.$4),Ae=(0,e.h_)(E.Ah),Ne=(0,e.tg)(E.wi),{value:Q}=(0,U.default)(async()=>{const T=await Te.getBackstageIdentity();return(await Ae.getEntities({filter:[{kind:"group","relations.hasMember":T.userEntityRef,...se!=null?se:{}}],fields:["metadata","kind"]})).items},[]);if(!(Q!=null&&Q.length))return null;if(Q.length===1){const T=Q[0];return P.createElement(I.R6,{text:me,to:Ne((0,d.iB)(T)),icon:we})}return P.createElement(I.R6,{icon:we,text:ce},P.createElement(I.k2,{title:ce},Q==null?void 0:Q.map(function(X){return P.createElement(I.BT,{title:X.metadata.title||X.metadata.name,subtitle:X.metadata.namespace!==d.zG?X.metadata.namespace:void 0,to:Ne((0,d.iB)(X)),icon:we,key:(0,d.eE)(X)})})))}},5083:function(Mt,g,t){t.d(g,{J$:function(){return j},Y2:function(){return $},g2:function(){return O},rG:function(){return c}});var e=t(32272),d=t(96279),E=t.n(d),f=t(9571),r=t(30195),c=(U=>(U.DENY="DENY",U.ALLOW="ALLOW",U.CONDITIONAL="CONDITIONAL",U))(c||{});function S(U,I){return U.name===I.name}function O(U,I){return"resourceType"in U?!I||U.resourceType===I:!1}function h(U){return U.attributes.action==="create"}function R(U){return U.attributes.action==="read"}function M(U){return U.attributes.action==="update"}function z(U){return U.attributes.action==="delete"}function K(U){return{authorize:async(I,m)=>await U.authorize(I,m),authorizeConditional(I,m){const x=I;return U.authorize(x,m)}}}function j({name:U,attributes:I,resourceType:m}){return m?{type:"resource",name:U,attributes:I,resourceType:m}:{type:"basic",name:U,attributes:I}}const ie=r.z.lazy(()=>r.z.object({rule:r.z.string(),resourceType:r.z.string(),params:r.z.record(r.z.any())}).or(r.z.object({anyOf:r.z.array(ie).nonempty()})).or(r.z.object({allOf:r.z.array(ie).nonempty()})).or(r.z.object({not:ie}))),w=r.z.object({result:r.z.literal(c.ALLOW).or(r.z.literal(c.DENY))}),D=r.z.union([r.z.object({result:r.z.literal(c.ALLOW).or(r.z.literal(c.DENY))}),r.z.object({result:r.z.literal(c.CONDITIONAL),pluginId:r.z.string(),resourceType:r.z.string(),conditions:ie})]),P=(U,I)=>r.z.object({items:r.z.array(r.z.intersection(r.z.object({id:r.z.string()}),U)).refine(m=>m.length===I.size&&m.every(({id:x})=>I.has(x)),{message:"Items in response do not match request"})});class ${constructor(I){var m;this.discovery=I.discovery,this.enabled=(m=I.config.getOptionalBoolean("permission.enabled"))!=null?m:!1}async authorize(I,m){return this.makeRequest(I,w,m)}async authorizeConditional(I,m){return this.makeRequest(I,D,m)}async makeRequest(I,m,x){if(!this.enabled)return I.map(at=>({result:c.ALLOW}));const W={items:I.map(at=>({id:f.Z(),...at}))},Ee=await this.discovery.getBaseUrl("permission"),Be=await E()(`${Ee}/authorize`,{method:"POST",body:JSON.stringify(W),headers:{...this.getAuthorizationHeader(x==null?void 0:x.token),"content-type":"application/json"}});if(!Be.ok)throw await e.VL.fromResponse(Be);const Ve=await Be.json(),Et=P(m,new Set(W.items.map(({id:at})=>at))).parse(Ve).items.reduce((at,Pt)=>(at[Pt.id]=Pt,at),{});return W.items.map(at=>Et[at.id])}getAuthorizationHeader(I){return I?{Authorization:`Bearer ${I}`}:{}}}},56563:function(Mt,g,t){t.d(g,{RV:function(){return r},gI:function(){return S},iM:function(){return c},un:function(){return h}});var e=t(2784),d=t(30705),E=t(5083),f=t(49857);const r=(0,d.T0)({id:"plugin.permission.api"});class c{constructor(M,z){this.permissionClient=M,this.identityApi=z}static create(M){const{config:z,discovery:K,identity:j}=M,ie=new E.Y2({discovery:K,config:z});return new c(ie,j)}async authorize(M){return(await this.permissionClient.authorize([M],await this.identityApi.getCredentials()))[0]}}function S(R){const M=(0,d.h_)(r),{data:z,error:K}=(0,f.ZP)(R,async j=>{if((0,E.g2)(j.permission)&&!j.resourceRef)return E.rG.DENY;const{result:ie}=await M.authorize(j);return ie});return K?{error:K,loading:!1,allowed:!1}:z===void 0?{loading:!0,allowed:!1}:{loading:!1,allowed:z===E.rG.ALLOW}}const O=R=>{const{permission:M,resourceRef:z,errorComponent:K,...j}=R,ie=S(isResourcePermission(M)?{permission:M,resourceRef:z}:{permission:M}),w=useApp(),{NotFoundErrorPage:D}=w.getComponents();let P=K===void 0?React.createElement(D,null):K;return ie.loading?P=null:ie.allowed&&(P=R.element),React.createElement(Route,{...j,element:P})};function h(R){const{permission:M,resourceRef:z}=R,K=S((0,E.g2)(M)?{permission:M,resourceRef:z}:{permission:M}),j=(0,d.qD)();if(K.loading)return null;if(K.allowed)return e.createElement(e.Fragment,null,R.children);if(R.errorPage)return e.createElement(e.Fragment,null,R.errorPage);const{NotFoundErrorPage:ie}=j.getComponents();return e.createElement(ie,null)}},52689:function(Mt,g,t){t.d(g,{E:function(){return St},F:function(){return ge},K:function(){return It},L:function(){return mt},M:function(){return Se},O:function(){return _t},R:function(){return X},S:function(){return Ne},T:function(){return en},a:function(){return ke},b:function(){return pe},c:function(){return ze},d:function(){return ae},e:function(){return Ze},f:function(){return xt},g:function(){return ur},h:function(){return Mn},i:function(){return He},j:function(){return Fe},k:function(){return Q},l:function(){return sn},m:function(){return v},n:function(){return Bt},o:function(){return Lt},p:function(){return Re},q:function(){return ne},r:function(){return Gt},s:function(){return Je},t:function(){return fe},u:function(){return et},v:function(){return Jt},w:function(){return De}});var e=t(34520),d=t(30705),E=t(32272),f=t(19126),r=t.n(f),c=t(82394),S=t.n(c),O=t(73495),h=t(86619),R=t(42494),M=t(95544),z=t(90436),K=t(5806),j=t(21324),ie=t(79692),w=t(60905),D=t(4614),P=t(97136),$=t(27556),U=t(77277),I=t(88013),m=t(2784),x=t(64279),W=t(62155),Ee=t(49462),Be=t(74828),Ve=t(29611),qe=t(56939),Et=t(49558),at=t(48760),Pt=t(82108),At=t.n(Pt),q=t(19996),rn=t(25505),ct=t(38016),xe=t(31377),oe=t(34546),Ue=t(31625),de=t(12420),p=t(49166),G=t(98281),ye=t(16874),nt=t(72779),be=t.n(nt),je=t(26228),ft=t(73557),F=t(70218),N=t(92233),_e=t(52160);const ze=(0,d.T0)({id:"plugin.scaffolder.service"});class dt{constructor(u){var o,l;this.discoveryApi=u.discoveryApi,this.fetchApi=(o=u.fetchApi)!=null?o:{fetch},this.scmIntegrationsApi=u.scmIntegrationsApi,this.useLongPollingLogs=(l=u.useLongPollingLogs)!=null?l:!1,this.identityApi=u.identityApi}async listTasks(u){if(!this.identityApi)throw new Error("IdentityApi is not available in the ScaffolderClient, please pass through the IdentityApi to the ScaffolderClient constructor in order to use the listTasks method");const o=await this.discoveryApi.getBaseUrl("scaffolder"),{userEntityRef:l}=await this.identityApi.getBackstageIdentity(),_=r().stringify(u.filterByOwnership==="owned"?{createdBy:l}:{}),b=await this.fetchApi.fetch(`${o}/v2/tasks?${_}`);if(!b.ok)throw await E.VL.fromResponse(b);return await b.json()}async getIntegrationsList(u){return{integrations:[...this.scmIntegrationsApi.azure.list(),...this.scmIntegrationsApi.bitbucket.list().filter(l=>!this.scmIntegrationsApi.bitbucketCloud.byHost(l.config.host)&&!this.scmIntegrationsApi.bitbucketServer.byHost(l.config.host)),...this.scmIntegrationsApi.bitbucketCloud.list(),...this.scmIntegrationsApi.bitbucketServer.list(),...this.scmIntegrationsApi.gerrit.list(),...this.scmIntegrationsApi.github.list(),...this.scmIntegrationsApi.gitlab.list()].map(l=>({type:l.type,title:l.title,host:l.config.host})).filter(l=>u.allowedHosts.includes(l.host))}}async getTemplateParameterSchema(u){const{namespace:o,kind:l,name:_}=(0,e.of)(u,{defaultKind:"template"}),b=await this.discoveryApi.getBaseUrl("scaffolder"),L=[o,l,_].map(tt=>encodeURIComponent(tt)).join("/"),re=`${b}/v2/templates/${L}/parameter-schema`,Oe=await this.fetchApi.fetch(re);if(!Oe.ok)throw await E.VL.fromResponse(Oe);return await Oe.json()}async scaffold(u){const{templateRef:o,values:l,secrets:_={}}=u,b=`${await this.discoveryApi.getBaseUrl("scaffolder")}/v2/tasks`,L=await this.fetchApi.fetch(b,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({templateRef:o,values:{...l},secrets:_})});if(L.status!==201){const Oe=`${L.status} ${L.statusText}`,Le=await L.text();throw new Error(`Backend request failed, ${Oe} ${Le.trim()}`)}const{id:re}=await L.json();return{taskId:re}}async getTask(u){const l=`${await this.discoveryApi.getBaseUrl("scaffolder")}/v2/tasks/${encodeURIComponent(u)}`,_=await this.fetchApi.fetch(l);if(!_.ok)throw await E.VL.fromResponse(_);return await _.json()}streamLogs(u){return this.useLongPollingLogs?this.streamLogsPolling(u):this.streamLogsEventStream(u)}async dryRun(u){const o=await this.discoveryApi.getBaseUrl("scaffolder"),l=await this.fetchApi.fetch(`${o}/v2/dry-run`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({template:u.template,values:u.values,secrets:u.secrets,directoryContents:u.directoryContents})});if(!l.ok)throw await E.VL.fromResponse(l);return l.json()}streamLogsEventStream({taskId:u,after:o}){return new(S())(l=>{const _=new URLSearchParams;o!==void 0&&_.set("after",String(Number(o))),this.discoveryApi.getBaseUrl("scaffolder").then(b=>{const L=`${b}/v2/tasks/${encodeURIComponent(u)}/eventstream`,re=new EventSource(L,{withCredentials:!0});re.addEventListener("log",Oe=>{if(Oe.data)try{l.next(JSON.parse(Oe.data))}catch(Le){l.error(Le)}}),re.addEventListener("completion",Oe=>{if(Oe.data)try{l.next(JSON.parse(Oe.data))}catch(Le){l.error(Le)}re.close(),l.complete()}),re.addEventListener("error",Oe=>{l.error(Oe)})},b=>{l.error(b)})})}streamLogsPolling({taskId:u,after:o}){let l=o;return new(S())(_=>{this.discoveryApi.getBaseUrl("scaffolder").then(async b=>{for(;!_.closed;){const L=`${b}/v2/tasks/${encodeURIComponent(u)}/events?${r().stringify({after:l})}`,re=await this.fetchApi.fetch(L);if(!re.ok){await new Promise(Le=>setTimeout(Le,1e3));continue}const Oe=await re.json();for(const Le of Oe)if(l=Number(Le.id),_.next(Le),Le.type==="completion"){_.complete();return}}})})}async listActions(){const u=await this.discoveryApi.getBaseUrl("scaffolder"),o=await this.fetchApi.fetch(`${u}/v2/actions`);if(!o.ok)throw await E.VL.fromResponse(o);return await o.json()}}const St=i=>{var u,o,l,_,b;const{onChange:L,schema:{title:re="Entity",description:Oe="An entity from the catalog"},required:Le,uiSchema:tt,rawErrors:Ht,formData:Dt,idSchema:tn}=i,Vt=(u=tt["ui:options"])==null?void 0:u.allowedKinds,qt=(o=tt["ui:options"])==null?void 0:o.defaultKind,xn=(l=tt["ui:options"])==null?void 0:l.defaultNamespace,_n=(0,d.h_)(O.Ah),{value:nn,loading:vn}=(0,x.default)(()=>_n.getEntities(Vt?{filter:{kind:Vt}}:void 0)),Tn=nn==null?void 0:nn.items.map(s=>(0,O.$3)(s,{defaultKind:qt,defaultNamespace:xn})),H=(0,m.useCallback)((s,y)=>{L(y!=null?y:void 0)},[L]);return(0,m.useEffect)(()=>{(Tn==null?void 0:Tn.length)===1&&L(Tn[0])},[Tn,L]),m.createElement(R.Z,{margin:"normal",required:Le,error:(Ht==null?void 0:Ht.length)>0&&!Dt},m.createElement(I.ZP,{disabled:(Tn==null?void 0:Tn.length)===1,id:tn==null?void 0:tn.$id,value:Dt||"",loading:vn,onChange:H,options:Tn||[],autoSelect:!0,freeSolo:(b=(_=tt["ui:options"])==null?void 0:_.allowArbitraryValues)!=null?b:!0,renderInput:s=>m.createElement(h.Z,{...s,label:re,margin:"dense",helperText:Oe,FormHelperTextProps:{margin:"dense",style:{marginLeft:0}},variant:"outlined",required:Le,InputProps:s.InputProps})}))},Bt=i=>{const{onChange:u,required:o,schema:{title:l="Name",description:_="Unique name of the component"},rawErrors:b,formData:L,uiSchema:{"ui:autofocus":re},idSchema:Oe,placeholder:Le}=i;return m.createElement(h.Z,{id:Oe==null?void 0:Oe.$id,label:l,placeholder:Le,helperText:_,required:o,value:L!=null?L:"",onChange:({target:{value:tt}})=>u(tt),margin:"normal",error:(b==null?void 0:b.length)>0&&!L,inputProps:{autoFocus:re}})},Lt=(i,u)=>{e.y$.isValidObjectName(i)||u.addError("must start and end with an alphanumeric character, and contain only alphanumeric characters, hyphens, underscores, and periods. Maximum length is 63 characters.")},Re=i=>{var u,o,l;const{formData:_,onChange:b,uiSchema:L}=i,re=(0,d.h_)(O.Ah),[Oe,Le]=(0,m.useState)([]),[tt,Ht]=(0,m.useState)(""),[Dt,tn]=(0,m.useState)(!1),Vt=(0,e.In)().isValidTag,qt=(u=L["ui:options"])==null?void 0:u.kinds,xn=(o=L["ui:options"])==null?void 0:o.showCounts,_n=(l=L["ui:options"])==null?void 0:l.helperText,{loading:nn,value:vn}=(0,x.default)(async()=>{const H="metadata.tags",s={facets:[H]};qt&&(s.filter={kind:qt});const{facets:y}=await re.getEntityFacets(s),B=Object.fromEntries(y[H].map(({value:Y,count:Pe})=>[Y,Pe]));return Le(Object.keys(B).sort((Y,Pe)=>xn?B[Pe]-B[Y]:Y.localeCompare(Pe))),B}),Tn=(H,s)=>{let y=!1,B=!1;const Y=_||[];if((s==null?void 0:s.length)&&Y.length<s.length){const Pe=s[s.length-1]=s[s.length-1].toLocaleLowerCase("en-US").trim();y=!Vt(Pe),B=Y.indexOf(Pe)!==-1}tn(y),Ht(y?tt:""),!y&&!B&&b(s||[])};return(0,W.Z)(()=>b(_||[])),m.createElement(R.Z,{margin:"normal"},m.createElement(I.ZP,{multiple:!0,freeSolo:!0,filterSelectedOptions:!0,onChange:Tn,value:_||[],inputValue:tt,loading:nn,options:Oe,ChipProps:{size:"small"},renderOption:H=>xn?`${H} (${vn==null?void 0:vn[H]})`:H,renderInput:H=>m.createElement(h.Z,{...H,label:"Tags",onChange:s=>Ht(s.target.value),error:Dt,helperText:_n!=null?_n:"Add any relevant tags, hit 'Enter' to add new tags. Valid format: [a-z0-9+#] separated by [-], at most 63 characters"})}))},_t=i=>{var u,o,l,_;const{schema:{title:b="Owner",description:L="The owner of the component"},uiSchema:re,...Oe}=i,Le=(u=re["ui:options"])==null?void 0:u.defaultNamespace,tt={...re,"ui:options":{allowedKinds:((o=re["ui:options"])==null?void 0:o.allowedKinds)||["Group","User"],defaultKind:"Group",allowArbitraryValues:(_=(l=re["ui:options"])==null?void 0:l.allowArbitraryValues)!=null?_:!0,...Le!==void 0?{defaultNamespace:Le}:{}}};return m.createElement(St,{...Oe,schema:{title:b,description:L},uiSchema:tt})},Ct=i=>{const{allowedOwners:u=[],rawErrors:o,state:l,onChange:_}=i,b=u?u.map(re=>({label:re,value:re})):[{label:"Loading...",value:"loading"}],{owner:L}=l;return m.createElement(m.Fragment,null,m.createElement(R.Z,{margin:"normal",required:!0,error:(o==null?void 0:o.length)>0&&!L},u!=null&&u.length?m.createElement(Et.Ph,{native:!0,label:"Owner Available",onChange:re=>_({owner:String(Array.isArray(re)?re[0]:re)}),disabled:u.length===1,selected:L,items:b}):m.createElement(m.Fragment,null,m.createElement(qe.Z,{htmlFor:"ownerInput"},"Owner"),m.createElement(Ve.Z,{id:"ownerInput",onChange:re=>_({owner:re.target.value}),value:L})),m.createElement(Be.Z,null,"The organization, user or project that this repo will belong to")))},Qt=i=>{const{allowedOwners:u=[],state:o,onChange:l,rawErrors:_}=i,b=u?u.map(re=>({label:re,value:re})):[{label:"Loading...",value:"loading"}],{owner:L}=o;return m.createElement(m.Fragment,null,m.createElement(R.Z,{margin:"normal",required:!0,error:(_==null?void 0:_.length)>0&&!L},u!=null&&u.length?m.createElement(Et.Ph,{native:!0,label:"Owner Available",onChange:re=>l({owner:String(Array.isArray(re)?re[0]:re)}),disabled:u.length===1,selected:L,items:b}):m.createElement(m.Fragment,null,m.createElement(qe.Z,{htmlFor:"ownerInput"},"Owner"),m.createElement(Ve.Z,{id:"ownerInput",onChange:re=>l({owner:re.target.value}),value:L})),m.createElement(Be.Z,null,"GitLab namespace where this repository will belong to. It can be the name of organization, group, subgroup, user, or the project.")))},st=i=>{const{allowedOrganizations:u=[],allowedOwners:o=[],rawErrors:l,state:_,onChange:b}=i,L=u?u.map(tt=>({label:tt,value:tt})):[{label:"Loading...",value:"loading"}],re=o?o.map(tt=>({label:tt,value:tt})):[{label:"Loading...",value:"loading"}],{organization:Oe,owner:Le}=_;return m.createElement(m.Fragment,null,m.createElement(R.Z,{margin:"normal",required:!0,error:(l==null?void 0:l.length)>0&&!Oe},u!=null&&u.length?m.createElement(Et.Ph,{native:!0,label:"Organization",onChange:tt=>b({organization:String(Array.isArray(tt)?tt[0]:tt)}),disabled:u.length===1,selected:Oe,items:L}):m.createElement(m.Fragment,null,m.createElement(qe.Z,{htmlFor:"orgInput"},"Organization"),m.createElement(Ve.Z,{id:"orgInput",onChange:tt=>b({organization:tt.target.value}),value:Oe})),m.createElement(Be.Z,null,"The Organization that this repo will belong to")),m.createElement(R.Z,{margin:"normal",required:!0,error:(l==null?void 0:l.length)>0&&!Le},o!=null&&o.length?m.createElement(Et.Ph,{native:!0,label:"Owner",onChange:tt=>b({owner:String(Array.isArray(tt)?tt[0]:tt)}),disabled:o.length===1,selected:Le,items:re}):m.createElement(m.Fragment,null,m.createElement(qe.Z,{htmlFor:"ownerInput"},"Project"),m.createElement(Ve.Z,{id:"ownerInput",onChange:tt=>b({owner:tt.target.value}),value:Le})),m.createElement(Be.Z,null,"The Project that this repo will belong to")))},me=i=>{const{allowedOwners:u=[],onChange:o,rawErrors:l,state:_}=i,{host:b,workspace:L,project:re}=_,Oe=u?u==null?void 0:u.map(Le=>({label:Le,value:Le})):[];return(0,m.useEffect)(()=>{b==="bitbucket.org"&&u.length&&o({workspace:u[0]})},[u,b,o]),m.createElement(m.Fragment,null,b==="bitbucket.org"&&m.createElement(R.Z,{margin:"normal",required:!0,error:(l==null?void 0:l.length)>0&&!L},u!=null&&u.length?m.createElement(Et.Ph,{native:!0,label:"Allowed Workspaces",onChange:Le=>o({workspace:String(Array.isArray(Le)?Le[0]:Le)}),disabled:u.length===1,selected:L,items:Oe}):m.createElement(m.Fragment,null,m.createElement(qe.Z,{htmlFor:"workspaceInput"},"Workspace"),m.createElement(Ve.Z,{id:"workspaceInput",onChange:Le=>o({workspace:Le.target.value}),value:L})),m.createElement(Be.Z,null,"The Organization that this repo will belong to")),m.createElement(R.Z,{margin:"normal",required:!0,error:(l==null?void 0:l.length)>0&&!re},m.createElement(qe.Z,{htmlFor:"projectInput"},"Project"),m.createElement(Ve.Z,{id:"projectInput",onChange:Le=>o({project:Le.target.value}),value:re}),m.createElement(Be.Z,null,"The Project that this repo will belong to")))},ce=i=>{const{onChange:u,rawErrors:o,state:l}=i,{workspace:_,owner:b}=l;return m.createElement(m.Fragment,null,m.createElement(R.Z,{margin:"normal",error:(o==null?void 0:o.length)>0&&!_},m.createElement(qe.Z,{htmlFor:"ownerInput"},"Owner"),m.createElement(Ve.Z,{id:"ownerInput",onChange:L=>u({owner:L.target.value}),value:b}),m.createElement(Be.Z,null,"The owner of the project (optional)")),m.createElement(R.Z,{margin:"normal",required:!0,error:(o==null?void 0:o.length)>0&&!_},m.createElement(qe.Z,{htmlFor:"parentInput"},"Parent"),m.createElement(Ve.Z,{id:"parentInput",onChange:L=>u({workspace:L.target.value}),value:_}),m.createElement(Be.Z,null,"The project parent that the repo will belong to")))},we=i=>{const{host:u,hosts:o,onChange:l,rawErrors:_}=i,b=(0,d.h_)(ze),{value:{integrations:L}={integrations:[]},loading:re}=(0,x.default)(async()=>await b.getIntegrationsList({allowedHosts:o!=null?o:[]}));(0,m.useEffect)(()=>{u||(o!=null&&o.length?l(o[0]):L!=null&&L.length&&l(L[0].host))},[o,u,l,L]);const Oe=L?L.filter(Le=>o!=null&&o.length?o==null?void 0:o.includes(Le.host):!0).map(Le=>({label:Le.title,value:Le.host})):[{label:"Loading...",value:"loading"}];return re?m.createElement(Et.Ex,null):m.createElement(m.Fragment,null,m.createElement(R.Z,{margin:"normal",required:!0,error:(_==null?void 0:_.length)>0&&!u},m.createElement(Et.Ph,{native:!0,disabled:(o==null?void 0:o.length)===1,label:"Host",onChange:Le=>l(String(Array.isArray(Le)?Le[0]:Le)),selected:u,items:Oe,"data-testid":"host-select"}),m.createElement(Be.Z,null,"The host where the repository will be created")))},se=i=>{const{repoName:u,allowedRepos:o,onChange:l,rawErrors:_}=i;(0,m.useEffect)(()=>{u||o!=null&&o.length&&l(o[0])},[o,u,l]);const b=o?o.map(L=>({label:L,value:L})):[{label:"Loading...",value:"loading"}];return m.createElement(m.Fragment,null,m.createElement(R.Z,{margin:"normal",required:!0,error:(_==null?void 0:_.length)>0&&!u},o!=null&&o.length?m.createElement(Et.Ph,{native:!0,label:"Repositories Available",onChange:L=>String(Array.isArray(L)?L[0]:L),disabled:o.length===1,selected:u,items:b}):m.createElement(m.Fragment,null,m.createElement(qe.Z,{htmlFor:"repoNameInput"},"Repository"),m.createElement(Ve.Z,{id:"repoNameInput",onChange:L=>l(String(L.target.value)),value:u})),m.createElement(Be.Z,null,"The name of the repository")))};function Te(i){if(!i.host)return;const u=new URLSearchParams;return i.owner&&u.set("owner",i.owner),i.repoName&&u.set("repo",i.repoName),i.organization&&u.set("organization",i.organization),i.workspace&&u.set("workspace",i.workspace),i.project&&u.set("project",i.project),`${i.host}?${u.toString()}`}function Ae(i){let u="",o="",l="",_="",b="",L="";try{if(i){const re=new URL(`https://${i}`);u=re.host,o=re.searchParams.get("owner")||"",l=re.searchParams.get("repo")||"",_=re.searchParams.get("organization")||"",b=re.searchParams.get("workspace")||"",L=re.searchParams.get("project")||""}}catch{}return{host:u,owner:o,repoName:l,organization:_,workspace:b,project:L}}const Ne=(0,m.createContext)(void 0),Q=({children:i})=>{const[u,o]=(0,m.useState)({});return m.createElement(Ne.Provider,{value:{secrets:u,setSecrets:o}},i)},T=()=>{const i=(0,m.useContext)(Ne);if(!i)throw new Error("useTemplateSecrets must be used within a SecretsContextProvider");const{setSecrets:u}=i;return{setSecrets:(0,m.useCallback)(l=>{u(_=>({..._,...l}))},[u])}},X=i=>{var u,o;const{uiSchema:l,onChange:_,rawErrors:b,formData:L}=i,[re,Oe]=(0,m.useState)(Ae(L)),Le=(0,d.h_)(Ee.q3),tt=(0,d.h_)(Ee.Om),{setSecrets:Ht}=T(),Dt=(0,m.useMemo)(()=>{var H,s;return(s=(H=l==null?void 0:l["ui:options"])==null?void 0:H.allowedHosts)!=null?s:[]},[l]),tn=(0,m.useMemo)(()=>{var H,s;return(s=(H=l==null?void 0:l["ui:options"])==null?void 0:H.allowedOrganizations)!=null?s:[]},[l]),Vt=(0,m.useMemo)(()=>{var H,s;return(s=(H=l==null?void 0:l["ui:options"])==null?void 0:H.allowedOwners)!=null?s:[]},[l]),qt=(0,m.useMemo)(()=>{var H,s;return(s=(H=l==null?void 0:l["ui:options"])==null?void 0:H.allowedRepos)!=null?s:[]},[l]),{owner:xn,organization:_n,repoName:nn}=re;(0,m.useEffect)(()=>{_(Te(re))},[re,_]),(0,m.useEffect)(()=>{tn.length>0&&!_n&&Oe(H=>({...H,organization:tn[0]}))},[Oe,tn,_n]),(0,m.useEffect)(()=>{Vt.length>0&&!xn&&Oe(H=>({...H,owner:Vt[0]}))},[Oe,Vt,xn]),(0,m.useEffect)(()=>{qt.length>0&&!nn&&Oe(H=>({...H,repoName:qt[0]}))},[Oe,qt,nn]);const vn=(0,m.useCallback)(H=>{Oe(s=>({...s,...H}))},[Oe]);(0,at.Z)(async()=>{var H;const{requestUserCredentials:s}=(H=l==null?void 0:l["ui:options"])!=null?H:{};if(!s||!(re.host&&re.owner&&re.repoName))return;const[y,B,Y]=[re.host,re.owner,re.repoName].map(encodeURIComponent),{token:Pe}=await tt.getCredentials({url:`https://${y}/${B}/${Y}`,additionalScope:{repoWrite:!0,customScopes:s.additionalScopes}});Ht({[s.secretsKey]:Pe})},500,[re,l]);const Tn=(o=re.host&&((u=Le.byHost(re.host))==null?void 0:u.type))!=null?o:null;return m.createElement(m.Fragment,null,m.createElement(we,{host:re.host,hosts:Dt,onChange:H=>Oe(s=>({...s,host:H})),rawErrors:b}),Tn==="github"&&m.createElement(Ct,{allowedOwners:Vt,onChange:vn,rawErrors:b,state:re}),Tn==="gitlab"&&m.createElement(Qt,{allowedOwners:Vt,rawErrors:b,state:re,onChange:vn}),Tn==="bitbucket"&&m.createElement(me,{allowedOwners:Vt,rawErrors:b,state:re,onChange:vn}),Tn==="azure"&&m.createElement(st,{allowedOrganizations:tn,allowedOwners:Vt,rawErrors:b,state:re,onChange:vn}),Tn==="gerrit"&&m.createElement(ce,{rawErrors:b,state:re,onChange:vn}),m.createElement(se,{repoName:re.repoName,allowedRepos:qt,onChange:H=>Oe(s=>({...s,repoName:H})),rawErrors:b}))},ne=(i,u,o)=>{var l,_;try{const{host:b,searchParams:L}=new URL(`https://${i}`),re=o.apiHolder.get(Ee.q3);b?(((l=re==null?void 0:re.byHost(b))==null?void 0:l.type)==="bitbucket"?(b==="bitbucket.org"&&!L.get("workspace")&&u.addError("Incomplete repository location provided, workspace not provided"),L.get("project")||u.addError("Incomplete repository location provided, project not provided")):((_=re==null?void 0:re.byHost(b))==null?void 0:_.type)!=="gerrit"&&(L.get("owner")||u.addError("Incomplete repository location provided, owner not provided")),L.get("repo")||u.addError("Incomplete repository location provided, repo not provided")):u.addError("Incomplete repository location provided, host not provided")}catch{u.addError("Unable to parse the Repository URL")}},fe=i=>{var u,o,l,_,b;const{onChange:L,schema:{title:re="Entity",description:Oe="An entity from the catalog"},required:Le,uiSchema:tt,rawErrors:Ht,formData:Dt,idSchema:tn}=i,Vt=(u=tt["ui:options"])==null?void 0:u.allowedKinds,qt=(o=tt["ui:options"])==null?void 0:o.defaultKind,xn=(l=tt["ui:options"])==null?void 0:l.defaultNamespace,_n=(b=(_=tt["ui:options"])==null?void 0:_.allowArbitraryValues)!=null?b:!0,{ownedEntities:nn,loading:vn}=te(Vt),Tn=nn==null?void 0:nn.items.map(s=>(0,O.$3)(s,{defaultKind:qt,defaultNamespace:xn})).filter(s=>s),H=(s,y)=>{L(y||"")};return m.createElement(R.Z,{margin:"normal",required:Le,error:(Ht==null?void 0:Ht.length)>0&&!Dt},m.createElement(I.ZP,{id:tn==null?void 0:tn.$id,value:Dt||"",loading:vn,onChange:H,options:Tn||[],autoSelect:!0,freeSolo:_n,renderInput:s=>m.createElement(h.Z,{...s,label:re,margin:"normal",helperText:Oe,variant:"outlined",required:Le,InputProps:s.InputProps})}))};function te(i){const u=(0,d.h_)(d.$4),o=(0,d.h_)(O.Ah),{loading:l,value:_}=(0,x.default)(async()=>{const re=(await u.getBackstageIdentity()).ownershipEntityRefs;return await o.getEntities(i?{filter:{kind:i,[`relations.${e.S4}`]:re||[]}}:{filter:{[`relations.${e.S4}`]:re||[]}})},[]),b=(0,m.useMemo)(()=>_,[_]);return(0,m.useMemo)(()=>({loading:l,ownedEntities:b}),[l,b])}const ge="scaffolder.extensions.wrapper.v1",He="scaffolder.extensions.field.v1";function it(i){return{expose(){const u=()=>null;return(0,d.R5)(u,He,i),u}}}function ht(i){return{expose(){const u=()=>null;return attachComponentData(u,He,i),u}}}const ve=()=>null;(0,d.R5)(ve,ge,!0);const Fe="scaffolder.layout.v1",mt="scaffolder.layouts.wrapper.v1";function $t(i){return{expose(){const u=()=>null;return attachComponentData(u,Fe,i),u}}}const Zt=()=>null;(0,d.R5)(Zt,mt,!0);const Gt=(0,d.x8)({id:"register-component",optional:!0}),Jt=(0,d.x8)({id:"view-techdoc",optional:!0,params:["namespace","kind","name"]}),xt=(0,d.NT)({id:"scaffolder"}),sn=(0,d.Rz)({id:"scaffolder/legacy/selected-template",parent:xt,path:"/templates/:templateName"}),De=(0,d.NT)({id:"scaffolder/next"}),Je=(0,d.Rz)({id:"scaffolder/selected-template",parent:xt,path:"/templates/:namespace/:templateName"}),et=(0,d.Rz)({id:"scaffolder/next/selected-template",parent:De,path:"/templates/:namespace/:templateName"}),ae=(0,d.Rz)({id:"scaffolder/task",parent:xt,path:"/tasks/:taskId"});(0,d.Rz)({id:"scaffolder/next/task",parent:De,path:"/tasks/:taskId"});const pe=(0,d.Rz)({id:"scaffolder/list-tasks",parent:xt,path:"/tasks"}),ke=(0,d.Rz)({id:"scaffolder/actions",parent:xt,path:"/actions"}),Ze=(0,d.Rz)({id:"scaffolder/edit",parent:xt,path:"/edit"}),Se=(0,d.rx)({id:"scaffolder",apis:[(0,d.ni)({api:ze,deps:{discoveryApi:d.NW,scmIntegrationsApi:Ee.q3,fetchApi:d.gP,identityApi:d.$4},factory:({discoveryApi:i,scmIntegrationsApi:u,fetchApi:o,identityApi:l})=>new dt({discoveryApi:i,scmIntegrationsApi:u,fetchApi:o,identityApi:l})})],routes:{root:xt},externalRoutes:{registerComponent:Gt,viewTechDoc:Jt}}),pt=Se.provide(it({component:St,name:"EntityPicker"})),vt=Se.provide(it({component:Bt,name:"EntityNamePicker",validation:Lt})),zt=Se.provide(it({component:X,name:"RepoUrlPicker",validation:ne})),Tt=Se.provide(it({component:_t,name:"OwnerPicker"})),It=Se.provide((0,d.P4)({name:"ScaffolderPage",component:()=>Promise.all([t.e(3160),t.e(6637),t.e(570),t.e(58)]).then(t.bind(t,70058)).then(i=>i.Router),mountPoint:xt})),Ut=Se.provide(it({component:fe,name:"OwnedEntityPicker"})),ln=Se.provide(it({component:Re,name:"EntityTagsPicker"})),mn=Se.provide((0,d.P4)({name:"NextScaffolderPage",component:()=>Promise.all([t.e(3160),t.e(6637),t.e(570),t.e(4778)]).then(t.bind(t,74778)).then(i=>i.Router),mountPoint:De})),cn=m.createElement(rn.Z,{fontSize:"small"}),En=m.createElement(q.Z,{fontSize:"small"}),en=()=>{const i=(0,d.h_)(d.$v),{error:u,loading:o,availableTypes:l,selectedTypes:_,setSelectedTypes:b}=(0,O.Uh)();return o?m.createElement(Et.Ex,null):l?u?(i.post({message:"Failed to load entity types",severity:"error"}),null):m.createElement(M.Z,{pb:1,pt:1},m.createElement(z.Z,{variant:"button"},"Categories"),m.createElement(I.ZP,{multiple:!0,"aria-label":"Categories",options:l,value:_,onChange:(L,re)=>b(re),renderOption:(L,{selected:re})=>m.createElement(K.Z,{control:m.createElement(j.Z,{icon:cn,checkedIcon:En,checked:re}),label:At()(L)}),size:"small",popupIcon:m.createElement(ct.Z,{"data-testid":"categories-picker-expand"}),renderInput:L=>m.createElement(h.Z,{...L,variant:"outlined"})})):null};function Sn(i,u){var o,l,_;switch(u.type){case"INIT":{i.steps=u.data.spec.steps.reduce((b,L)=>(b[L.id]={status:"open",id:L.id},b),{}),i.stepLogs=u.data.spec.steps.reduce((b,L)=>(b[L.id]=[],b),{}),i.loading=!1,i.error=void 0,i.completed=!1,i.task=u.data;return}case"LOGS":{const b=u.data;for(const L of b){const re=`${L.createdAt} ${L.body.message}`;if(!L.body.stepId||!((o=i.steps)!=null&&o[L.body.stepId]))continue;const Oe=(l=i.stepLogs)==null?void 0:l[L.body.stepId],Le=(_=i.steps)==null?void 0:_[L.body.stepId];L.body.status&&L.body.status!==Le.status&&(Le.status=L.body.status,Le.status==="processing"&&(Le.startedAt=L.createdAt),["cancelled","failed","completed"].includes(Le.status)&&(Le.endedAt=L.createdAt)),Oe==null||Oe.push(re)}return}case"COMPLETED":{i.completed=!0,i.output=u.data.body.output,i.error=u.data.body.error;return}case"ERROR":{i.error=u.data,i.loading=!1,i.completed=!0;return}default:return}}const On=i=>{const u=(0,d.h_)(ze),[o,l]=(0,N.C)(Sn,{loading:!0,completed:!1,stepLogs:{},steps:{}});return(0,m.useEffect)(()=>{let _=!1,b,L;return u.getTask(i).then(re=>{if(_)return;l({type:"INIT",data:re});const Oe=u.streamLogs({taskId:i}),Le=new Array;function tt(){if(Le.length){const Ht=Le.splice(0,Le.length);l({type:"LOGS",data:Ht})}}L=setInterval(tt,500),b=Oe.subscribe({next:Ht=>{switch(Ht.type){case"log":return Le.push(Ht);case"completion":tt(),l({type:"COMPLETED",data:Ht});return;default:throw new Error(`Unhandled event type ${Ht.type} in observer`)}},error:Ht=>{tt(),l({type:"ERROR",data:Ht})}})},re=>{_||l({type:"ERROR",data:re})}),()=>{_=!0,b&&b.unsubscribe(),L&&clearInterval(L)}},[u,l,i]),o},In=({error:i})=>{const u=(0,m.useRef)("");return(0,m.useEffect)(()=>{u.current=String(Math.random())},[i]),i?m.createElement(M.Z,null,m.createElement(Et.SX,{id:u.current,variant:"warning",message:i.message})):null},Ln=(0,ie.Z)({svgIcon:{display:"inline-block","& svg":{display:"inline-block",fontSize:"inherit",verticalAlign:"baseline"}}}),Dn=i=>{const{href:u,text:o,Icon:l,..._}=i,b=Ln();return m.createElement(w.Z,{container:!0,direction:"row",spacing:1},m.createElement(w.Z,{item:!0},m.createElement(z.Z,{component:"div",className:b.svgIcon},l?m.createElement(l,null):m.createElement(_e.Z,null))),m.createElement(w.Z,{item:!0},m.createElement(Et.rU,{to:u,..._},o||u)))},Mn=({output:i})=>{const{links:u=[]}=i,o=(0,d.qD)(),l=(0,d.tg)(O.wi),_=b=>{var L;return b&&(L=o.getSystemIcon(b))!=null?L:_e.Z};return m.createElement(M.Z,{px:3,pb:3},u.filter(({url:b,entityRef:L})=>b||L).map(({url:b,entityRef:L,title:re,icon:Oe})=>{if(L){const Le=(0,e.of)(L,{defaultKind:"<unknown>",defaultNamespace:"<unknown>"}),tt=l(Le);return{title:re,icon:Oe,url:tt}}return{title:re,icon:Oe,url:b}}).map(({url:b,title:L,icon:re},Oe)=>m.createElement(Dn,{key:`output-link-${Oe}`,href:b,text:L!=null?L:b,Icon:_(re),target:"_blank"})))},Zn=t(75951),Rn=(0,ie.Z)(i=>(0,de.Z)({root:{width:"100%"},button:{marginBottom:i.spacing(2),marginLeft:i.spacing(2)},actionsContainer:{marginBottom:i.spacing(2)},resetContainer:{padding:i.spacing(3)},labelWrapper:{display:"flex",flex:1,flexDirection:"row",justifyContent:"space-between"},stepWrapper:{width:"100%"}})),$n=({step:i})=>{const[u,o]=(0,m.useState)("");return(0,F.Z)(()=>{if(!i.startedAt){o("");return}const l=i.endedAt?je.ou.fromISO(i.endedAt):je.ou.local(),_=je.ou.fromISO(i.startedAt),b=je.Xp.fromDateTimes(_,l).toDuration().valueOf();o(Zn(b,{round:!0}))},1e3),m.createElement(z.Z,{variant:"caption"},u)},Vn=(0,ie.Z)(i=>(0,de.Z)({root:{color:i.palette.text.disabled,display:"flex",height:22,alignItems:"center"},completed:{color:i.palette.status.ok},error:{color:i.palette.status.error}}));function cr(i){const u=Vn(),{active:o,completed:l,error:_}=i,b=()=>o?m.createElement(D.Z,{size:"24px"}):l?m.createElement(G.Z,null):_?m.createElement(p.Z,null):m.createElement(ye.Z,null);return m.createElement("div",{className:be()(u.root,{[u.completed]:l,[u.error]:_})},b())}const ur=(0,m.memo)(i=>{const{steps:u,currentStepId:o,onUserStepChange:l}=i,_=Rn(i);return m.createElement("div",{className:_.root},m.createElement(Ue.Z,{activeStep:u.findIndex(b=>b.id===o),orientation:"vertical",nonLinear:!0},u.map((b,L)=>{const re=b.status==="completed",Oe=b.status==="failed",Le=b.status==="processing",tt=b.status==="skipped";return m.createElement(xe.Z,{key:String(L),expanded:!0},m.createElement(P.Z,{onClick:()=>l(b.id)},m.createElement(oe.Z,{StepIconProps:{completed:re,error:Oe,active:Le},StepIconComponent:cr,className:_.stepWrapper},m.createElement("div",{className:_.labelWrapper},m.createElement(z.Z,{variant:"subtitle2"},b.name),tt?m.createElement(z.Z,{variant:"caption"},"Skipped"):m.createElement($n,{step:b})))))})))}),Z=({links:i=[]})=>i.length>0,v=({loadingText:i})=>{const u=Rn(),o=(0,ft.s0)(),l=(0,d.tg)(xt),_=(0,d.tg)(Je),[b,L]=(0,m.useState)(void 0),[re,Oe]=(0,m.useState)(void 0),{taskId:Le}=(0,d.Oi)(ae),tt=On(Le),Ht=tt.completed,Dt=(0,m.useMemo)(()=>{var nn,vn;return(vn=(nn=tt.task)==null?void 0:nn.spec.steps.map(Tn=>{var H;return{...Tn,...(H=tt==null?void 0:tt.steps)==null?void 0:H[Tn.id]}}))!=null?vn:[]},[tt]);(0,m.useEffect)(()=>{var nn;const vn=Dt.find(Tn=>["failed","processing"].includes(Tn.status));if(Ht&&!vn){Oe((nn=Dt[Dt.length-1])==null?void 0:nn.id);return}Oe(vn==null?void 0:vn.id)},[Dt,Ht]);const tn=b!=null?b:re,Vt=(0,m.useMemo)(()=>{if(!tn)return i||"Loading...";const nn=tt.stepLogs[tn];return nn!=null&&nn.length?nn.join(`
`):"Waiting for logs..."},[tt.stepLogs,tn,i]),qt=tt.completed===!0&&tt.loading===!1&&!tt.task,{output:xn}=tt,_n=()=>{var nn,vn,Tn;if(!tt.task||!((vn=(nn=tt.task)==null?void 0:nn.spec.templateInfo)!=null&&vn.entityRef)){o(l());return}const H=tt.task.spec.parameters,{name:s,namespace:y}=(0,e.of)((Tn=tt.task.spec.templateInfo)==null?void 0:Tn.entityRef);o(`${_({templateName:s,namespace:y})}?${r().stringify({formData:JSON.stringify(H)})}`)};return m.createElement(Et.T3,{themeId:"home"},m.createElement(Et.h4,{pageTitleOverride:`Task ${Le}`,title:"Task Activity",subtitle:`Activity for task: ${Le}`}),m.createElement(Et.VY,null,qt?m.createElement(Et.mf,{status:"404",statusMessage:"Task not found",additionalInfo:"No task found with this ID"}):m.createElement("div",null,m.createElement(w.Z,{container:!0},m.createElement(w.Z,{item:!0,xs:3},m.createElement($.Z,null,m.createElement(ur,{steps:Dt,currentStepId:tn,onUserStepChange:L}),xn&&Z(xn)&&m.createElement(Mn,{output:xn}),m.createElement(U.Z,{className:u.button,onClick:_n,disabled:!Ht,variant:"contained",color:"primary"},"Start Over"))),m.createElement(w.Z,{item:!0,xs:9},!tn&&m.createElement(Et.Ex,null),m.createElement("div",{style:{height:"80vh"}},m.createElement(In,{error:tt.error}),m.createElement(Et.nU,{text:Vt})))))))}},78990:function(Mt,g,t){t.d(g,{Ho:function(){return e.M},sG:function(){return e.K}});var e=t(52689),d=t(34520),E=t(30705),f=t(32272),r=t(19126),c=t.n(r),S=t(82394),O=t.n(S),h=t(73495),R=t(2784),M=t(49462),z=t(49558),K=t(82108),j=t.n(K),ie=t(72779),w=t.n(ie),D=t(26228)},92573:function(Mt,g,t){t.d(g,{E1:function(){return Lt},FA:function(){return nt},GQ:function(){return fe},Nd:function(){return ze},Rx:function(){return je},US:function(){return Bt},ay:function(){return Te},gK:function(){return p},lt:function(){return X},qO:function(){return _t},wy:function(){return it},yu:function(){return ve}});var e=t(30705),d=t(2784),E=t(79692),f=t(50581),r=t(61837),c=t(74603),S=t(4614),O=t(86619),h=t(7089),R=t(42494),M=t(84899),z=t(5806),K=t(21324),j=t(56939),ie=t(73698),w=t(12231),D=t(77277),P=t(28899),$=t(38402),U=t(86136),I=t(49378),m=t(95544),x=t(85256),W=t(48760),Ee=t(21853),Be=t(33375),Ve=t(76635),qe=t.n(Ve),Et=t(64279),at=t(25557),Pt=t(18473),At=t(88013),q=t(69294),rn=t(49558),ct=t(35352),xe=t(27742),oe=t(19126),Ue=t.n(oe),de=t(48834).lW;const p=(0,e.T0)({id:"plugin.search.queryservice"});class G{constructor(pe){this.mockedResults=pe}query(){return Promise.resolve(this.mockedResults||{results:[]})}}const ye=(0,E.Z)(()=>({highlight:{}}),{name:"BackstageHighlightedSearchResultText"}),nt=({text:ae,preTag:pe,postTag:ke})=>{const Ze=ye(),Se=(0,d.useMemo)(()=>ae.split(new RegExp(`(${pe}.+?${ke})`)),[ke,pe,ae]);return d.createElement(d.Fragment,null,Se.map((pt,vt)=>pt.includes(pe)?d.createElement("mark",{className:Ze.highlight,key:vt},pt.replace(new RegExp(`${pe}|${ke}`,"g"),"")):pt))},be=(0,Pt.CT)("search-context"),je=()=>{const ae=(0,d.useContext)(be);if(!ae)throw new Error("useSearch must be used within a SearchContextProvider");const pe=ae.atVersion(1);if(!pe)throw new Error("No SearchContext v1 found");return pe},ft=()=>(0,d.useContext)(be)!==void 0,F={term:"",types:[],filters:{},pageLimit:void 0,pageCursor:void 0},N=(ae=F)=>{var pe,ke,Ze,Se;const pt=(0,e.h_)(p),[vt,zt]=(0,d.useState)(ae.term),[Tt,It]=(0,d.useState)(ae.types),[Ut,ln]=(0,d.useState)(ae.filters),[mn,cn]=(0,d.useState)(ae.pageLimit),[En,en]=(0,d.useState)(ae.pageCursor),Sn=(0,at.Z)(vt),On=(0,at.Z)(Ut),In=(0,Et.default)(()=>pt.query({term:vt,types:Tt,filters:Ut,pageLimit:mn,pageCursor:En}),[vt,Tt,Ut,mn,En]),Ln=!In.loading&&!In.error&&((pe=In.value)==null?void 0:pe.nextPageCursor),Dn=!In.loading&&!In.error&&((ke=In.value)==null?void 0:ke.previousPageCursor),Mn=(0,d.useCallback)(()=>{var $n;en(($n=In.value)==null?void 0:$n.nextPageCursor)},[(Ze=In.value)==null?void 0:Ze.nextPageCursor]),Zn=(0,d.useCallback)(()=>{var $n;en(($n=In.value)==null?void 0:$n.previousPageCursor)},[(Se=In.value)==null?void 0:Se.previousPageCursor]);return(0,d.useEffect)(()=>{Sn!==void 0&&vt!==Sn&&en(void 0)},[vt,Sn,en]),(0,d.useEffect)(()=>{On!==void 0&&!(0,Ve.isEqual)(Ut,On)&&en(void 0)},[Ut,On,en]),{result:In,term:vt,setTerm:zt,types:Tt,setTypes:It,filters:Ut,setFilters:ln,pageLimit:mn,setPageLimit:cn,pageCursor:En,setPageCursor:en,fetchNextPage:Ln?Mn:void 0,fetchPreviousPage:Dn?Zn:void 0}},_e=ae=>{const{initialState:pe,children:ke}=ae,Ze=N(pe);return d.createElement(e.fC,{attributes:{searchTypes:Ze.types.sort().join(",")}},d.createElement(be.Provider,{value:(0,Pt.EI)({1:Ze})},ke))},ze=ae=>{const{initialState:pe,inheritParentContextIfAvailable:ke,children:Ze}=ae;return ft()&&ke?d.createElement(d.Fragment,null,Ze):d.createElement(_e,{initialState:pe},Ze)},dt=({children:ae})=>{const pe=(0,e.z$)(),{term:ke}=je();return(0,d.useEffect)(()=>{ke&&pe.captureEvent("search",ke)},[pe,ke]),d.createElement(d.Fragment,null,ae)};function St(ae){return(0,d.forwardRef)((pe,ke)=>d.createElement(ze,{inheritParentContextIfAvailable:!0},d.createElement(ae,{...pe,ref:ke})))}const Bt=St((0,d.forwardRef)((ae,pe)=>{const{onChange:ke,onKeyDown:Ze=()=>{},onClear:Se=()=>{},onSubmit:pt=()=>{},debounceTime:vt=200,clearButton:zt=!0,fullWidth:Tt=!0,value:It,placeholder:Ut,inputProps:ln={},endAdornment:mn,...cn}=ae,En=(0,e.h_)(e.Ds),[en,Sn]=(0,d.useState)("");(0,d.useEffect)(()=>{Sn(Rn=>Rn!==It?String(It):Rn)},[It]),(0,W.Z)(()=>ke(en),vt,[en]);const On=(0,d.useCallback)(Rn=>{Sn(Rn.target.value)},[Sn]),In=(0,d.useCallback)(Rn=>{Ze&&Ze(Rn),pt&&Rn.key==="Enter"&&pt()},[Ze,pt]),Ln=(0,d.useCallback)(()=>{ke(""),Se&&Se()},[ke,Se]),Dn=Ut!=null?Ut:`Search in ${En.getOptionalString("app.title")||"Backstage"}`,Mn=d.createElement(f.Z,{position:"start"},d.createElement(r.Z,{"aria-label":"Query",size:"small",disabled:!0},d.createElement(Ee.Z,null))),Zn=d.createElement(f.Z,{position:"end"},d.createElement(r.Z,{"aria-label":"Clear",size:"small",onClick:Ln},d.createElement(Be.Z,null)));return d.createElement(dt,null,d.createElement(c.Z,{"data-testid":"search-bar-next",ref:pe,value:en,placeholder:Dn,startAdornment:Mn,endAdornment:zt?Zn:mn,inputProps:{"aria-label":"Search",...ln},fullWidth:Tt,onChange:On,onKeyDown:In,...cn}))})),Lt=St((0,d.forwardRef)((ae,pe)=>{const{value:ke="",onChange:Ze,...Se}=ae,{term:pt,setTerm:vt}=je();(0,d.useEffect)(()=>{ke&&vt(String(ke))},[ke,vt]);const zt=(0,d.useCallback)(Tt=>{Ze?Ze(Tt):vt(Tt)},[Ze,vt]);return d.createElement(e.fC,{attributes:{pluginId:"search",extension:"SearchBar"}},d.createElement(Bt,{...Se,ref:pe,value:pt,onChange:zt}))})),_t=(ae=>pe=>d.createElement(ze,{inheritParentContextIfAvailable:!0},d.createElement(ae,{...pe})))(function(pe){const{loading:ke,value:Ze,onChange:Se=()=>{},options:pt=[],getOptionLabel:vt=Ln=>String(Ln),inputPlaceholder:zt,inputDebounceTime:Tt,freeSolo:It=!0,fullWidth:Ut=!0,clearOnBlur:ln=!1,"data-testid":mn="search-autocomplete",...cn}=pe,{setTerm:En}=je(),en=(0,d.useCallback)(Ln=>Ln?typeof Ln=="string"?Ln:vt(Ln):"",[vt]),Sn=(0,d.useMemo)(()=>en(Ze),[Ze,en]),On=(0,d.useCallback)((Ln,Dn,Mn,Zn)=>{En(en(Dn)),Se(Ln,Dn,Mn,Zn)},[en,En,Se]),In=(0,d.useCallback)(({InputProps:{ref:Ln,endAdornment:Dn},InputLabelProps:Mn,...Zn})=>d.createElement(Lt,{...Zn,ref:Ln,clearButton:!1,value:Sn,placeholder:zt,debounceTime:Tt,endAdornment:ke?d.createElement(S.Z,{"data-testid":"search-autocomplete-progressbar",color:"inherit",size:20}):Dn}),[ke,Sn,zt,Tt]);return d.createElement(At.ZP,{...cn,"data-testid":mn,value:Ze,onChange:On,options:pt,getOptionLabel:vt,renderInput:In,freeSolo:It,fullWidth:Ut,clearOnBlur:ln})}),Ct=({icon:ae,primaryText:pe,primaryTextTypographyProps:ke,secondaryText:Ze,secondaryTextTypographyProps:Se,disableTextTypography:pt})=>React.createElement(React.Fragment,null,ae?React.createElement(ListItemIcon,null,ae):null,React.createElement(ListItemText,{primary:pe,primaryTypographyProps:ke,secondary:Ze,secondaryTypographyProps:Se,disableTypography:pt})),Qt=(ae,pe,ke=[],Ze=250)=>{const Se=(0,d.useRef)({}),pt=ae||(()=>Promise.resolve([])),[vt,zt]=(0,q.default)(pt,[pe],{loading:!0});if((0,W.Z)(()=>{Se.current[pe]===void 0&&(Se.current[pe]=zt(pe).then(It=>(Se.current[pe]=It,It)))},Ze,[zt,pe]),ke.length)return{loading:!1,value:ke};const Tt=Se.current[pe];return Array.isArray(Tt)?{loading:!1,value:Tt}:vt},st=(ae,pe)=>{const{setFilters:ke}=je();(0,d.useEffect)(()=>{pe&&[pe].flat().length>0&&ke(Ze=>({...Ze,[ae]:pe}))},[])},me=ae=>{const{className:pe,defaultValue:ke,name:Ze,values:Se,valuesDebounceMs:pt,label:vt,filterSelectedOptions:zt,limitTags:Tt,multiple:It}=ae,[Ut,ln]=(0,d.useState)("");st(Ze,ke);const mn=typeof Se=="function"?Se:void 0,cn=typeof Se=="function"?void 0:Se,{value:En,loading:en}=Qt(mn,Ut,cn,pt),{filters:Sn,setFilters:On}=je(),In=Sn[Ze]||(It?[]:null),Ln=(Zn,Rn)=>{On($n=>{const{[Ze]:Vn,...cr}=$n;return Rn?{...cr,[Ze]:Rn}:{...cr}})},Dn=Zn=>d.createElement(O.Z,{...Zn,name:"search",variant:"outlined",label:vt,fullWidth:!0}),Mn=(Zn,Rn)=>Zn.map(($n,Vn)=>d.createElement(h.Z,{label:$n,color:"primary",...Rn({index:Vn})}));return d.createElement(At.ZP,{filterSelectedOptions:zt,limitTags:Tt,multiple:It,className:pe,id:`${It?"multi-":""}select-filter-${Ze}--select`,options:En||[],loading:en,value:In,onChange:Ln,onInputChange:(Zn,Rn)=>ln(Rn),renderInput:Dn,renderTags:Mn})},ce=(0,E.Z)({label:{textTransform:"capitalize"}}),we=ae=>{const{className:pe,defaultValue:ke,label:Ze,name:Se,values:pt=[],valuesDebounceMs:vt}=ae,zt=ce(),{filters:Tt,setFilters:It}=je();st(Se,ke);const Ut=typeof pt=="function"?pt:void 0,ln=typeof pt=="function"?void 0:pt,{value:mn=[],loading:cn}=Qt(Ut,"",ln,vt),En=en=>{const{target:{value:Sn,checked:On}}=en;It(In=>{const{[Se]:Ln,...Dn}=In,Mn=(Ln||[]).filter(Rn=>Rn!==Sn),Zn=On?[...Mn,Sn]:Mn;return Zn.length?{...Dn,[Se]:Zn}:Dn})};return d.createElement(R.Z,{className:pe,disabled:cn,fullWidth:!0,"data-testid":"search-checkboxfilter-next"},Ze?d.createElement(M.Z,{className:zt.label},Ze):null,mn.map(en=>{var Sn;return d.createElement(z.Z,{key:en,control:d.createElement(K.Z,{color:"primary",tabIndex:-1,inputProps:{"aria-labelledby":en},value:en,name:en,onChange:En,checked:((Sn=Tt[Se])!=null?Sn:[]).includes(en)}),label:en})}))},se=ae=>{const{className:pe,defaultValue:ke,label:Ze,name:Se,values:pt,valuesDebounceMs:vt}=ae,zt=ce();st(Se,ke);const Tt=typeof pt=="function"?pt:void 0,It=typeof pt=="function"?void 0:pt,{value:Ut=[],loading:ln}=Qt(Tt,"",It,vt),{filters:mn,setFilters:cn}=je(),En=en=>{const{target:{value:Sn}}=en;cn(On=>{const{[Se]:In,...Ln}=On;return Sn?{...Ln,[Se]:Sn}:Ln})};return d.createElement(R.Z,{disabled:ln,className:pe,variant:"filled",fullWidth:!0,"data-testid":"search-selectfilter-next"},Ze?d.createElement(j.Z,{className:zt.label,margin:"dense"},Ze):null,d.createElement(ie.Z,{variant:"outlined",value:mn[Se]||"",onChange:En},d.createElement(w.Z,{value:""},d.createElement("em",null,"All")),Ut.map(en=>d.createElement(w.Z,{key:en,value:en},en))))},Te=({component:ae,...pe})=>d.createElement(ae,{...pe});Te.Checkbox=ae=>d.createElement(Te,{...ae,component:we}),Te.Select=ae=>d.createElement(Te,{...ae,component:se}),Te.Autocomplete=ae=>d.createElement(Te,{...ae,component:me});const Ae=ae=>{const{children:pe}=ae,Ze=je().result;return pe(Ze)},Ne=ae=>{const{query:pe,children:ke}=ae,Ze=(0,e.h_)(p),Se=(0,Et.default)(()=>{const{term:pt="",types:vt=[],filters:zt={},...Tt}=pe;return Ze.query({...Tt,term:pt,types:vt,filters:zt})},[pe]);return ke(Se)},Q=ae=>{const{query:pe,children:ke}=ae;return pe?d.createElement(Ne,{query:pe},ke):d.createElement(Ae,null,ke)},T=ae=>{const{query:pe,children:ke}=ae;return d.createElement(Q,{query:pe},({loading:Ze,error:Se,value:pt})=>Ze?d.createElement(rn.Ex,null):Se?d.createElement(rn.Gk,{title:"Error encountered while fetching search results",error:Se}):pt!=null&&pt.results.length?ke(pt):d.createElement(rn.ub,{missing:"data",title:"Sorry, no results were found"}))},X=ae=>d.createElement(e.fC,{attributes:{pluginId:"search",extension:"SearchResult"}},d.createElement(T,{...ae})),ne=(0,E.Z)(ae=>({root:{display:"flex",justifyContent:"space-between",gap:ae.spacing(2),margin:ae.spacing(2,0)}})),fe=()=>{const{fetchNextPage:ae,fetchPreviousPage:pe}=je(),ke=ne();return!ae&&!pe?d.createElement(d.Fragment,null):d.createElement("nav",{"aria-label":"pagination navigation",className:ke.root},d.createElement(D.Z,{"aria-label":"previous page",disabled:!pe,onClick:pe,startIcon:d.createElement(ct.Z,null)},"Previous"),d.createElement(D.Z,{"aria-label":"next page",disabled:!ae,onClick:ae,endIcon:d.createElement(xe.Z,null)},"Next"))},te=ae=>de.from(ae.toString(),"utf-8").toString("base64"),ge=ae=>ae?Number(de.from(ae,"base64").toString("utf-8")):0,He=ae=>{const{total:pe=-1,cursor:ke,onCursorChange:Ze,limit:Se=25,limitLabel:pt="Results per page:",limitText:vt=({from:cn,to:En})=>pe>0?`of ${pe}`:`${cn}-${En}`,limitOptions:zt,onLimitChange:Tt,...It}=ae,Ut=(0,d.useMemo)(()=>ge(ke),[ke]),ln=(0,d.useCallback)((cn,En)=>{Ze==null||Ze(te(En))},[Ze]),mn=(0,d.useCallback)(cn=>{const En=cn.target.value;Tt==null||Tt(parseInt(En,10))},[Tt]);return d.createElement(P.Z,{...It,component:"div",count:pe,page:Ut,onPageChange:ln,rowsPerPage:Se,labelRowsPerPage:pt,labelDisplayedRows:vt,rowsPerPageOptions:zt,onRowsPerPageChange:mn})},it=ae=>{const{pageLimit:pe,setPageLimit:ke,pageCursor:Ze,setPageCursor:Se}=je();return d.createElement(He,{...ae,limit:pe,onLimitChange:ke,cursor:Ze,onCursorChange:Se})},ht=({result:ae,highlight:pe,rank:ke,icon:Ze,secondaryAction:Se,lineClamp:pt=5})=>{const vt=(0,e.z$)(),zt=()=>{vt.captureEvent("discover",ae.title,{attributes:{to:ae.location},value:ke})};return d.createElement(rn.rU,{noTrack:!0,to:ae.location,onClick:zt},d.createElement($.Z,{alignItems:"center"},Ze&&d.createElement(U.Z,null,Ze),d.createElement(I.Z,{primaryTypographyProps:{variant:"h6"},primary:pe!=null&&pe.fields.title?d.createElement(nt,{text:pe.fields.title,preTag:pe.preTag,postTag:pe.postTag}):ae.title,secondary:d.createElement("span",{style:{display:"-webkit-box",WebkitBoxOrient:"vertical",WebkitLineClamp:pt,overflow:"hidden"}},pe!=null&&pe.fields.text?d.createElement(nt,{text:pe.fields.text,preTag:pe.preTag,postTag:pe.postTag}):ae.text)}),Se&&d.createElement(m.Z,{alignItems:"flex-end"},Se)),d.createElement(x.Z,null))},ve=ae=>d.createElement(e.fC,{attributes:{pluginId:"search",extension:"DefaultResultListItem"}},d.createElement(ht,{...ae})),Fe=ae=>{const{loading:pe,error:ke,resultItems:Ze,renderResultItem:Se=zt=>React.createElement(ve,{key:zt.document.location,result:zt.document}),noResultsComponent:pt=React.createElement(EmptyState,{missing:"data",title:"Sorry, no results were found"}),...vt}=ae;return React.createElement(List,{...vt},pe?React.createElement(Progress,null):null,!pe&&ke?React.createElement(ResponseErrorPanel,{title:"Error encountered while fetching search results",error:ke}):null,!pe&&!ke&&(Ze==null?void 0:Ze.length)?Ze.map(Se):null,!pe&&!ke&&!(Ze!=null&&Ze.length)?React.createElement(ListItem,null,pt):null)},mt=ae=>{const{query:pe,disableRenderingWithNoResults:ke,...Ze}=ae;return React.createElement(AnalyticsContext,{attributes:{pluginId:"search",extension:"SearchResultList"}},React.createElement(Q,{query:pe},({loading:Se,error:pt,value:vt})=>{var zt;return!((zt=vt==null?void 0:vt.results)!=null&&zt.length)&&ke?null:React.createElement(Fe,{...Ze,loading:Se,error:pt,resultItems:vt==null?void 0:vt.results})}))},$t=(0,E.Z)(ae=>({listSubheader:{display:"flex",alignItems:"center"},listSubheaderName:{marginLeft:ae.spacing(1),textTransform:"uppercase"},listSubheaderChip:{color:ae.palette.text.secondary,margin:ae.spacing(0,0,0,1.5)},listSubheaderFilter:{display:"flex",color:ae.palette.text.secondary,margin:ae.spacing(0,0,0,1.5)},listSubheaderLink:{marginLeft:"auto",display:"flex",alignItems:"center"},listSubheaderLinkIcon:{fontSize:"inherit",marginLeft:ae.spacing(.5)}})),Zt=ae=>{const pe=$t(),{label:ke,children:Ze,...Se}=ae;return React.createElement(Chip,{...Se,className:pe.listSubheaderFilter,variant:"outlined",label:React.createElement(React.Fragment,null,ke,": ",Ze)})},Gt=()=>null,Jt=(0,E.Z)(ae=>({root:{fontSize:"inherit","&:focus":{outline:"none",background:ae.palette.common.white},"&:not(:focus)":{cursor:"pointer",color:ae.palette.primary.main,"&:hover":{textDecoration:"underline"}}}})),xt=ae=>{const pe=Jt(),{label:ke,value:Ze="None",onChange:Se,onDelete:pt}=ae,vt=useCallback(zt=>{Se(zt.target.value)},[Se]);return React.createElement(Zt,{label:ke,onDelete:pt},React.createElement(Typography,{role:"textbox",component:"span",className:pe.root,onChange:vt,contentEditable:!0,suppressContentEditableWarning:!0},Ze))},sn=(0,E.Z)(ae=>({root:{fontSize:"inherit","&:not(:focus)":{cursor:"pointer",color:ae.palette.primary.main,"&:hover":{textDecoration:"underline"}},"&:focus":{outline:"none"},"&>div:first-child":{padding:0}}})),De=ae=>{const pe=sn(),{label:ke,value:Ze="none",onChange:Se,onDelete:pt,children:vt}=ae,zt=useCallback(Tt=>{Se(Tt.target.value)},[Se]);return React.createElement(Zt,{label:ke,onDelete:pt},React.createElement(Select,{className:pe.root,value:Ze,onChange:zt,input:React.createElement(InputBase,null),IconComponent:Gt},React.createElement(MenuItem,{value:"none"},"None"),vt))};function Je(ae){const pe=$t(),[ke,Ze]=useState(null),{loading:Se,error:pt,icon:vt,title:zt,titleProps:Tt={},link:It=React.createElement(React.Fragment,null,"See all",React.createElement(ArrowForwardIosIcon,{className:pe.listSubheaderLinkIcon})),linkProps:Ut={},filterOptions:ln,renderFilterOption:mn=Mn=>React.createElement(MenuItem,{key:String(Mn),value:String(Mn)},Mn),filterFields:cn,renderFilterField:En,resultItems:en,renderResultItem:Sn=Mn=>React.createElement(ve,{key:Mn.document.location,result:Mn.document}),noResultsComponent:On=React.createElement(EmptyState,{missing:"data",title:"Sorry, no results were found"}),...In}=ae,Ln=useCallback(Mn=>{Ze(Mn.currentTarget)},[]),Dn=useCallback(()=>{Ze(null)},[]);return React.createElement(List,{...In},React.createElement(ListSubheader,{className:pe.listSubheader},vt,React.createElement(Typography,{className:pe.listSubheaderName,component:"strong",...Tt},zt),ln?React.createElement(Chip,{className:pe.listSubheaderChip,component:"button",icon:React.createElement(AddIcon,null),variant:"outlined",label:"Add filter","aria-controls":"filters-menu","aria-haspopup":"true",onClick:Ln}):null,ln?React.createElement(Menu,{id:"filters-menu",anchorEl:ke,open:Boolean(ke),onClose:Dn,onClick:Dn,keepMounted:!0},ln.map(mn)):null,cn==null?void 0:cn.map(Mn=>{var Zn;return(Zn=En==null?void 0:En(Mn))!=null?Zn:null}),React.createElement(Link,{className:pe.listSubheaderLink,to:"/search",...Ut},It)),Se?React.createElement(Progress,null):null,!Se&&pt?React.createElement(ResponseErrorPanel,{title:"Error encountered while fetching search results",error:pt}):null,!Se&&!pt&&(en==null?void 0:en.length)?en.map(Sn):null,!Se&&!pt&&!(en!=null&&en.length)?React.createElement(ListItem,null,On):null)}function et(ae){const{query:pe,linkProps:ke={},disableRenderingWithNoResults:Ze,...Se}=ae,pt=`/search?${qs.stringify({query:pe.term,types:pe.types,filters:pe.filters,pageCursor:pe.pageCursor},{arrayFormat:"brackets"})}`;return React.createElement(AnalyticsContext,{attributes:{pluginId:"search",extension:"SearchResultGroup"}},React.createElement(Q,{query:pe},({loading:vt,error:zt,value:Tt})=>{var It,Ut;return!((It=Tt==null?void 0:Tt.results)!=null&&It.length)&&Ze?null:React.createElement(Je,{...Se,loading:vt,error:zt,linkProps:{to:pt,...ke},resultItems:Tt==null?void 0:Tt.results,filterFields:Object.keys((Ut=pe.filters)!=null?Ut:{})})}))}},11266:function(Mt,g,t){t.d(g,{S:function(){return Re},a:function(){return St},b:function(){return ze},c:function(){return ce},e:function(){return je},f:function(){return ft},r:function(){return nt},u:function(){return Bt}});var e=t(2784),d=t(60364),E=t(79249),f=t(27556),r=t(38724),c=t(60905),S=t(85256),O=t(11776),h=t(49429),R=t(8629),M=t(79692),z=t(94339),K=t(32552),j=t(24579),ie=t(27616),w=t(8284),D=t(70660),P=t(38402),$=t(86136),U=t(49378),I=t(99152),m=t(6487),x=t(42494),W=t(56939),Ee=t(73698),Be=t(7089),Ve=t(12231),qe=t(21324),Et=t(69001),at=t(92573),Pt=t(30705),At=t(49558),q=t(32272),rn=t(19126),ct=t.n(rn),xe=t(18473),oe=t(25557),Ue=t(73557),de=t(62155),p=t(38016),G=t(56881);class ye{constructor(Te){this.discoveryApi=Te.discoveryApi,this.identityApi=Te.identityApi}async query(Te){const{token:Ae}=await this.identityApi.getCredentials(),Ne=ct().stringify(Te),Q=`${await this.discoveryApi.getBaseUrl("search/query")}?${Ne}`,T=await fetch(Q,{headers:Ae?{Authorization:`Bearer ${Ae}`}:{}});if(!T.ok)throw await q.VL.fromResponse(T);return T.json()}}const nt=(0,Pt.NT)({id:"search"}),be=(0,Pt.rx)({id:"search",apis:[(0,Pt.ni)({api:at.gK,deps:{discoveryApi:Pt.NW,identityApi:Pt.$4},factory:({discoveryApi:se,identityApi:Te})=>new ye({discoveryApi:se,identityApi:Te})})],routes:{root:nt}}),je=be.provide((0,Pt.P4)({name:"SearchPage",component:()=>t.e(7116).then(t.bind(t,67116)).then(se=>se.SearchPage),mountPoint:nt})),ft=be.provide((0,Pt.CO)({name:"SidebarSearchModal",component:{lazy:()=>t.e(1272).then(t.bind(t,11272)).then(se=>se.SidebarSearchModal)}})),F=be.provide((0,Pt.CO)({name:"HomePageSearchBar",component:{lazy:()=>t.e(5798).then(t.bind(t,45798)).then(se=>se.HomePageSearchBar)}})),N=(0,M.Z)(se=>({container:{borderRadius:30,display:"flex",height:"2.4em"},input:{flex:1},paperFullWidth:{height:"calc(100% - 128px)"},dialogActionsContainer:{padding:se.spacing(1,3)},viewResultsLink:{verticalAlign:"0.5em"}})),_e=({toggleModal:se})=>{const Te=(0,Pt.tg)(nt),Ae=N(),{term:Ne}=(0,at.Rx)(),{focusContent:Q}=(0,At.r0)(),{transitions:T}=(0,d.Z)(),X=()=>{se(),setTimeout(Q,T.duration.leavingScreen)},ne=()=>{X()};return e.createElement(e.Fragment,null,e.createElement(E.Z,null,e.createElement(f.Z,{className:Ae.container},e.createElement(at.E1,{className:Ae.input}))),e.createElement(r.Z,null,e.createElement(c.Z,{container:!0,direction:"row-reverse",justifyContent:"flex-start",alignItems:"center"},e.createElement(c.Z,{item:!0},e.createElement(At.rU,{onClick:()=>{se(),setTimeout(Q,T.duration.leavingScreen)},to:`${Te()}?query=${Ne}`},e.createElement("span",{className:Ae.viewResultsLink},"View Full Results"),e.createElement(Et.Z,{color:"primary"})))),e.createElement(S.Z,null),e.createElement(at.lt,null,({results:fe})=>e.createElement(O.Z,null,fe.map(({document:te,highlight:ge})=>e.createElement("div",{role:"button",tabIndex:0,key:`${te.location}-btn`,onClick:X,onKeyPress:ne},e.createElement(at.yu,{key:te.location,result:te,highlight:ge})))))),e.createElement(h.Z,{className:Ae.dialogActionsContainer},e.createElement(c.Z,{container:!0,direction:"row"},e.createElement(c.Z,{item:!0,xs:12},e.createElement(at.GQ,null)))))},ze=({open:se=!0,hidden:Te,toggleModal:Ae,children:Ne})=>{var Q;const T=N();return e.createElement(R.Z,{classes:{paperFullWidth:T.paperFullWidth},onClose:Ae,"aria-labelledby":"search-modal-title",fullWidth:!0,maxWidth:"lg",open:se,hidden:Te},se&&e.createElement(at.Nd,{inheritParentContextIfAvailable:!0},(Q=Ne&&Ne({toggleModal:Ae}))!=null?Q:e.createElement(_e,{toggleModal:Ae})))},dt=(0,xe.CT)("search-modal-context"),St=({children:se,showInitially:Te})=>{const Ae=Bt(Te),Ne=(0,xe.EI)({1:Ae});return e.createElement(dt.Provider,{value:Ne},se)};function Bt(se=!1){const Te=(0,e.useContext)(dt),Ae=Te==null?void 0:Te.atVersion(1),[Ne,Q]=(0,e.useState)({hidden:!se,open:se}),T=(0,e.useCallback)(()=>Q(ne=>({open:!0,hidden:!ne.hidden})),[]),X=(0,e.useCallback)(ne=>Q(fe=>({open:fe.open||ne,hidden:!ne})),[]);return Ae!=null&&Ae.state?Ae:{state:Ne,toggleModal:T,setOpen:X}}const Lt=()=>{const se=(0,Ue.TH)(),{term:Te,setTerm:Ae,types:Ne,setTypes:Q,pageCursor:T,setPageCursor:X,filters:ne,setFilters:fe}=(0,at.Rx)(),te=(0,oe.Z)(se.search);return(0,e.useEffect)(()=>{if(se.search===te)return;const ge=ct().parse(se.search.substring(1),{arrayLimit:0})||{};ge.filters&&fe(ge.filters),ge.query&&Ae(ge.query),ge.pageCursor&&X(ge.pageCursor),ge.types&&Q(ge.types)},[te,se,Ae,Q,X,fe]),(0,e.useEffect)(()=>{const ge=ct().stringify({query:Te,types:Ne,pageCursor:T,filters:ne},{arrayFormat:"brackets"}),He=`${window.location.pathname}?${ge}`;window.history.replaceState(null,document.title,He)},[Te,Ne,T,ne]),null},Re=()=>{const se=(0,Ue.pC)();return e.createElement(at.Nd,null,e.createElement(Lt,null),se)},_t=(0,M.Z)(se=>({card:{backgroundColor:"rgba(0, 0, 0, .11)"},cardContent:{paddingTop:se.spacing(1)},icon:{color:se.palette.common.black},list:{width:"100%"},listItemIcon:{width:"24px",height:"24px"},accordion:{backgroundColor:se.palette.background.paper},accordionSummary:{minHeight:"auto","&.Mui-expanded":{minHeight:"auto"}},accordionSummaryContent:{margin:se.spacing(2,0),"&.Mui-expanded":{margin:se.spacing(2,0)}},accordionDetails:{padding:se.spacing(0,0,1)}})),Ct=se=>{const Te=_t(),{setPageCursor:Ae,setTypes:Ne,types:Q}=(0,at.Rx)(),[T,X]=(0,e.useState)(!0),{defaultValue:ne,name:fe,types:te}=se,ge=()=>X(ve=>!ve),He=ve=>()=>{Ne(ve!==""?[ve]:[]),Ae(void 0),X(!1)};(0,e.useEffect)(()=>{ne&&Ne([ne])},[]);const it=[{value:"",name:"All",icon:e.createElement(G.Z,null)},...te],ht=Q[0]||"";return e.createElement(z.Z,{className:Te.card},e.createElement(K.Z,{title:fe,titleTypographyProps:{variant:"overline"}}),e.createElement(j.Z,{className:Te.cardContent},e.createElement(ie.Z,{className:Te.accordion,expanded:T,onChange:ge},e.createElement(w.Z,{classes:{root:Te.accordionSummary,content:Te.accordionSummaryContent},expandIcon:e.createElement(p.Z,{className:Te.icon}),IconButtonProps:{size:"small"}},T?"Collapse":it.filter(ve=>ve.value===ht)[0].name),e.createElement(D.Z,{classes:{root:Te.accordionDetails}},e.createElement(O.Z,{className:Te.list,component:"nav","aria-label":"filter by type",disablePadding:!0,dense:!0},it.map(ve=>e.createElement(e.Fragment,{key:ve.value},e.createElement(S.Z,null),e.createElement(P.Z,{selected:Q[0]===ve.value||Q.length===0&&ve.value==="",onClick:He(ve.value),button:!0},e.createElement($.Z,null,(0,e.cloneElement)(ve.icon,{className:Te.listItemIcon})),e.createElement(U.Z,{primary:ve.name})))))))))},Qt=(0,M.Z)(se=>({tabs:{borderBottom:`1px solid ${se.palette.textVerySubtle}`,padding:se.spacing(0,4)},tab:{height:"50px",fontWeight:se.typography.fontWeightBold,fontSize:se.typography.pxToRem(13),color:se.palette.textSubtle,minWidth:"130px"}})),st=se=>{const Te=Qt(),{setPageCursor:Ae,setTypes:Ne,types:Q}=(0,at.Rx)(),{defaultValue:T,types:X}=se,ne=(te,ge)=>{Ne(ge!==""?[ge]:[]),Ae(void 0)};(0,e.useEffect)(()=>{T&&Ne([T])},[]);const fe=[{value:"",name:"All"},...X];return e.createElement(I.Z,{className:Te.tabs,indicatorColor:"primary",value:Q.length===0?"":Q[0],onChange:ne},fe.map((te,ge)=>e.createElement(m.Z,{key:ge,className:Te.tab,disableRipple:!0,label:te.name,value:te.value})))},me=(0,M.Z)(se=>({label:{textTransform:"capitalize"},chips:{display:"flex",flexWrap:"wrap",marginTop:se.spacing(1)},chip:{margin:2}})),ce=se=>{const{className:Te,defaultValue:Ae,name:Ne,values:Q=[]}=se,T=me(),{types:X,setTypes:ne}=(0,at.Rx)();(0,de.Z)(()=>{X.length||(Ae&&Array.isArray(Ae)?ne(Ae):Ae&&ne([Ae]))});const fe=te=>{const ge=te.target.value;ne(ge)};return e.createElement(x.Z,{className:Te,variant:"filled",fullWidth:!0,"data-testid":"search-typefilter-next"},e.createElement(W.Z,{className:T.label,margin:"dense"},Ne),e.createElement(Ee.Z,{multiple:!0,variant:"outlined",value:X,onChange:fe,placeholder:"All Results",renderValue:te=>e.createElement("div",{className:T.chips},te.map(ge=>e.createElement(Be.Z,{key:ge,label:ge,className:T.chip,size:"small"})))},Q.map(te=>e.createElement(Ve.Z,{key:te,value:te},e.createElement(qe.Z,{checked:X.indexOf(te)>-1}),e.createElement(U.Z,{primary:te})))))};ce.Accordion=se=>e.createElement(Ct,{...se}),ce.Tabs=se=>e.createElement(st,{...se});const we=se=>{const Te=useRouteRef(nt),{focusContent:Ae}=useContent(),Ne=useNavigate(),Q=useCallback(T=>{const X=qs.stringify({query:T},{addQueryPrefix:!0});Ae(),Ne(`${Te()}${X}`)},[Ae,Ne,Te]);return React.createElement(SidebarSearchField,{icon:se.icon,onSearch:Q,to:"/search"})}},23778:function(Mt,g,t){t.d(g,{Sc:function(){return e.c},YC:function(){return e.f},Z9:function(){return e.e}});var e=t(11266),d=t(2784),E=t(92573),f=t(30705),r=t(49558),c=t(32272),S=t(19126),O=t.n(S),h=t(18473)},44741:function(Mt,g,t){t.d(g,{Wf:function(){return Qt}});var e=t(49558),d=t(30705),E=t(2784),f=t(64279),r=t(79692),c=t(38724),S=t(49429),O=t(77277),h=t(29611),R=t(60905),M=t(8629),z=t(79249),K=t(35292),j=t(71346),ie=t.n(j),w=t(62432),D=t(26506);const P=(0,d.T0)({id:"plugin.techradar.service"});var $=(me=>(me[me.Down=-1]="Down",me[me.NoChange=0]="NoChange",me[me.Up=1]="Up",me))($||{});const U=(0,r.Z)(me=>({ring:{fill:"none",stroke:"#bbb",strokeWidth:"1px"},axis:{fill:"none",stroke:"#bbb",strokeWidth:"1px"},text:{pointerEvents:"none",userSelect:"none",fill:me.palette.text.primary,fontSize:"25px",fontWeight:800}})),I=me=>{const{radius:ce,rings:we}=me,se=U(me),Te=(Q,T)=>[E.createElement("circle",{key:`c${Q}`,cx:0,cy:0,r:T,className:se.ring}),E.createElement("text",{key:`t${Q}`,y:T!==void 0?-T+42:void 0,textAnchor:"middle",className:se.text},we[Q].name)],Ae=[E.createElement("line",{key:"x",x1:0,y1:-ce,x2:0,y2:ce,className:se.axis,"data-testid":"radar-grid-x-line"}),E.createElement("line",{key:"y",x1:-ce,y1:0,x2:ce,y2:0,className:se.axis,"data-testid":"radar-grid-y-line"})],Ne=we.map(Q=>Q.outerRadius).map((Q,T)=>Te(T,Q));return E.createElement(E.Fragment,null,Ae.concat(...Ne))};function m(me){return Boolean(me&&me!=="#"&&me.length>0)}const x=({url:me,className:ce,children:we})=>m(me)?E.createElement(e.rU,{className:ce,to:me},we):E.createElement(E.Fragment,null,we),W=me=>{const{open:ce,onClose:we,title:se,description:Te,url:Ae}=me;return E.createElement(M.Z,{"data-testid":"radar-description",open:ce,onClose:we},E.createElement(z.Z,{"data-testid":"radar-description-dialog-title"},se),E.createElement(c.Z,{dividers:!0},E.createElement(e.SA,{content:Te})),m(Ae)&&E.createElement(S.Z,null,E.createElement(O.Z,{component:e.rU,to:Ae,onClick:we,color:"primary",startIcon:E.createElement(K.Z,null)},"LEARN MORE")))},Ee=(0,r.Z)(()=>({text:{pointerEvents:"none",userSelect:"none",fontSize:"9px",fill:"#fff",textAnchor:"middle"},link:{cursor:"pointer"}})),Be=(me,ce)=>{const we={fill:me};let se=E.createElement("circle",{r:9,style:we});return ce&&ce>0?se=E.createElement("path",{d:"M -11,5 11,5 0,-13 z",style:we}):ce&&ce<0&&(se=E.createElement("path",{d:"M -11,-5 11,-5 0,13 z",style:we})),se},Ve=me=>{const ce=Ee(me),[we,se]=E.useState(!1),{moved:Te,description:Ae,title:Ne,color:Q,url:T,value:X,x:ne,y:fe,onMouseEnter:te,onMouseLeave:ge,onClick:He}=me,it=Be(Q,Te),ht=()=>{se(!0)},ve=()=>{se(!1)},Fe=()=>{se(!we)};return E.createElement("g",{transform:`translate(${ne}, ${fe})`,onMouseEnter:te,onMouseLeave:ge,onClick:He,"data-testid":"radar-entry"}," ",we&&E.createElement(W,{open:we,onClose:ve,title:Ne||"no title",description:Ae||"no description",url:T}),Ae?E.createElement("a",{className:ce.link,onClick:ht,role:"button",href:"#",tabIndex:0,onKeyPress:Fe},it):E.createElement(x,{url:T,className:ce.link},it),E.createElement("text",{y:3,className:ce.text},X))},qe=(0,r.Z)(()=>({bubble:{pointerEvents:"none",userSelect:"none",opacity:0},visibleBubble:{pointerEvents:"none",userSelect:"none",opacity:.8},background:{fill:"#333"},text:{pointerEvents:"none",userSelect:"none",fontSize:"10px",fill:"#fff"}})),Et=me=>{const ce=qe(me),{visible:we,text:se}=me,Te=(0,E.useRef)(null),Ae=(0,E.useRef)(null),Ne=(0,E.useRef)(null),Q=(0,E.useRef)(null),T=()=>{if(Te.current){const{x:X,y:ne}=me,fe=Te.current.getBBox(),te=5,ge=4;Ae.current&&Ae.current.setAttribute("transform",`translate(${X-fe.width/2}, ${ne-fe.height-ge})`),Ne.current&&(Ne.current.setAttribute("x",String(-te)),Ne.current.setAttribute("y",String(-fe.height)),Ne.current.setAttribute("width",String(fe.width+2*te)),Ne.current.setAttribute("height",String(fe.height+ge))),Q.current&&Q.current.setAttribute("transform",`translate(${fe.width/2-te}, ${ge-1})`)}};return(0,E.useLayoutEffect)(()=>{T()}),E.createElement("g",{ref:Ae,x:0,y:0,className:we?ce.visibleBubble:ce.bubble,"data-testid":"radar-bubble"},E.createElement("rect",{ref:Ne,rx:4,ry:4,className:ce.background}),E.createElement("text",{ref:Te,className:ce.text},se),E.createElement("path",{ref:Q,d:"M 0,0 10,0 5,8 z",className:ce.background}))},at=(0,r.Z)(me=>({text:{pointerEvents:"none",userSelect:"none",fontSize:"10px",fill:me.palette.text.secondary}})),Pt=me=>{const{x:ce,y:we}=me,se=at(me);return E.createElement("text",{"data-testid":"radar-footer",transform:`translate(${ce}, ${we})`,className:se.text},"\u25B2 moved up\xA0\xA0\xA0\xA0\xA0\u25BC moved down")},At=(0,r.Z)(me=>({quadrant:{height:"100%",width:"100%",overflowY:"auto",scrollbarWidth:"thin"},quadrantHeading:{pointerEvents:"none",userSelect:"none",marginTop:0,marginBottom:me.spacing(2),fontSize:"18px"},rings:{columns:3},ring:{breakInside:"avoid-column",pageBreakInside:"avoid","-webkit-column-break-inside":"avoid",fontSize:"12px",marginBottom:me.spacing(2)},ringEmpty:{color:me.palette.text.secondary},ringHeading:{pointerEvents:"none",userSelect:"none",marginTop:0,marginBottom:me.spacing(1),fontSize:"12px",fontWeight:800},ringList:{listStylePosition:"inside",marginTop:0,paddingLeft:0,fontVariantNumeric:"proportional-nums","-moz-font-feature-settings":"pnum","-webkit-font-feature-settings":"pnum","font-feature-settings":"pnum"},entry:{pointerEvents:"visiblePainted",userSelect:"none",fontSize:"11px"},entryLink:{pointerEvents:"visiblePainted"}})),q=me=>{const ce=At(me),we=(ge,He,it,ht=0)=>{const ve=He.index,Fe=it.index,mt=ve===void 0?{}:ge[ve]||{};return Fe===void 0?[]:mt[Fe+ht]||[]},se=({url:ge,description:He,title:it})=>{const[ht,ve]=E.useState(!1),Fe=()=>{ve(!0)},mt=()=>{ve(!1)},$t=()=>{ve(!ht)};return He?E.createElement(E.Fragment,null,E.createElement("span",{className:ce.entryLink,onClick:Fe,role:"button",tabIndex:0,onKeyPress:$t},E.createElement("span",{className:ce.entry},it)),ht&&E.createElement(W,{open:ht,onClose:mt,title:it||"no title",url:ge,description:He})):E.createElement(x,{url:ge,className:ce.entryLink},E.createElement("span",{className:ce.entry},it))},Te=({ring:ge,entries:He,onEntryMouseEnter:it,onEntryMouseLeave:ht})=>E.createElement("div",{"data-testid":"radar-ring",key:ge.id,className:ce.ring},E.createElement("h3",{className:ce.ringHeading},ge.name),He.length===0?E.createElement("p",{className:ce.ringEmpty},"(empty)"):E.createElement("ol",{className:ce.ringList},He.map(ve=>E.createElement("li",{key:ve.id,value:(ve.index||0)+1,onMouseEnter:it&&(()=>it(ve)),onMouseLeave:ht&&(()=>ht(ve))},E.createElement(se,{url:ve.url,title:ve.title,description:ve.description}))))),Ae=({segments:ge,quadrant:He,rings:it,onEntryMouseEnter:ht,onEntryMouseLeave:ve})=>E.createElement("foreignObject",{key:He.id,x:He.legendX,y:He.legendY,width:He.legendWidth,height:He.legendHeight,"data-testid":"radar-quadrant"},E.createElement("div",{className:ce.quadrant},E.createElement("h2",{className:ce.quadrantHeading},He.name),E.createElement("div",{className:ce.rings},it.map(Fe=>E.createElement(Te,{key:Fe.id,ring:Fe,entries:we(ge,He,Fe),onEntryMouseEnter:ht,onEntryMouseLeave:ve}))))),Ne=ge=>{const He={};for(const it of ge){const ht=it.quadrant.index,ve=it.ring.index;let Fe={};ht!==void 0&&(He[ht]===void 0&&(He[ht]={}),Fe=He[ht]);let mt=[];ve!==void 0&&(Fe[ve]===void 0&&(Fe[ve]=[]),mt=Fe[ve]),mt.push(it)}return He},{quadrants:Q,rings:T,entries:X,onEntryMouseEnter:ne,onEntryMouseLeave:fe}=me,te=Ne(X);return E.createElement("g",{"data-testid":"radar-legend"},Q.map(ge=>E.createElement(Ae,{key:ge.id,segments:te,quadrant:ge,rings:T,onEntryMouseEnter:ne,onEntryMouseLeave:fe})))},rn=me=>{const{width:ce,height:we,radius:se,quadrants:Te,rings:Ae,entries:Ne,activeEntry:Q,onEntryMouseEnter:T,onEntryMouseLeave:X}=me;return E.createElement("g",{"data-testid":"radar-plot"},E.createElement(q,{quadrants:Te,rings:Ae,entries:Ne,onEntryMouseEnter:T&&(ne=>T(ne)),onEntryMouseLeave:X&&(ne=>X(ne))}),E.createElement("g",{transform:`translate(${ce/2}, ${we/2})`},E.createElement(I,{radius:se,rings:Ae}),E.createElement(Pt,{x:-.5*ce,y:.5*we}),Ne.map(ne=>E.createElement(Ve,{key:ne.id,x:ne.x||0,y:ne.y||0,color:ne.color||"",value:((ne==null?void 0:ne.index)||0)+1,url:ne.url,description:ne.description,moved:ne.moved,title:ne.title,onMouseEnter:T&&(()=>T(ne)),onMouseLeave:X&&(()=>X(ne))})),E.createElement(Et,{visible:!!Q,text:(Q==null?void 0:Q.title)||"",x:(Q==null?void 0:Q.x)||0,y:(Q==null?void 0:Q.y)||0})))};class ct{constructor(ce,we,se,Te){this.nextSeed=Te,this.polarMin={t:ce.radialMin,r:we.innerRadius},this.polarMax={t:ce.radialMax,r:we.outerRadius},this.cartesianMin={x:15*ce.offsetX,y:15*ce.offsetY},this.cartesianMax={x:se*ce.offsetX,y:se*ce.offsetY}}clipx(ce){const we=p(ce,this.cartesianMin,this.cartesianMax),se=de(xe(we),this.polarMin.r+15,this.polarMax.r-15);return ce.x=oe(se).x,ce.x}clipy(ce){const we=p(ce,this.cartesianMin,this.cartesianMax),se=de(xe(we),this.polarMin.r+15,this.polarMax.r-15);return ce.y=oe(se).y,ce.y}random(){return oe({t:this._randomBetween(this.polarMin.t,this.polarMax.t),r:this._normalBetween(this.polarMin.r,this.polarMax.r)})}_random(){const ce=Math.sin(this.nextSeed())*1e4;return ce-Math.floor(ce)}_randomBetween(ce,we){return ce+this._random()*(we-ce)}_normalBetween(ce,we){return ce+(this._random()+this._random())*.5*(we-ce)}}function xe({x:me,y:ce}){return{t:Math.atan2(ce,me),r:Math.sqrt(me*me+ce*ce)}}function oe({r:me,t:ce}){return{x:me*Math.cos(ce),y:me*Math.sin(ce)}}function Ue(me,ce,we){const se=Math.min(ce,we),Te=Math.max(ce,we);return Math.min(Math.max(me,se),Te)}function de(me,ce,we){return{t:me.t,r:Ue(me.r,ce,we)}}function p(me,ce,we){return{x:Ue(me.x,ce.x,we.x),y:Ue(me.y,ce.y,we.y)}}const G=(me,ce,we,se)=>{const Ae=[16,we/2-ce-16,we/2+ce+16,we-16],Ne=[16,se/2-16,se/2,se-16],Q=[{x:Ae[2],y:Ne[2],width:Ae[3]-Ae[2],height:Ne[3]-Ne[2]},{x:Ae[0],y:Ne[2],width:Ae[1]-Ae[0],height:Ne[3]-Ne[2]},{x:Ae[0],y:Ne[0],width:Ae[1]-Ae[0],height:Ne[1]-Ne[0]},{x:Ae[2],y:Ne[0],width:Ae[3]-Ae[2],height:Ne[1]-Ne[0]}];me.forEach((T,X)=>{const ne=Q[X%4];T.index=X,T.radialMin=X*Math.PI/2,T.radialMax=(X+1)*Math.PI/2,T.offsetX=X%4===0||X%4===3?1:-1,T.offsetY=X%4===0||X%4===1?1:-1,T.legendX=ne.x,T.legendY=ne.y,T.legendWidth=ne.width,T.legendHeight=ne.height})},ye=(me,ce,we,se,Te)=>{let Ae=42;me.forEach((Q,T)=>{const X=ce.find(te=>{const ge=typeof Q.quadrant=="object"?Q.quadrant.id:Q.quadrant;return te.id===ge}),ne=we.find(te=>{const ge=typeof Q.ring=="object"?Q.ring.id:Q.ring;return te.id===ge});if(!X)throw new Error(`Unknown quadrant ${Q.quadrant} for entry ${Q.id}!`);if(!ne)throw new Error(`Unknown ring ${Q.ring} for entry ${Q.id}!`);Q.index=T,Q.quadrant=X,Q.ring=ne,Q.segment=new ct(X,ne,se,()=>Ae++);const fe=Q.segment.random();Q.x=fe.x,Q.y=fe.y,Q.active=Te?Q.id===Te.id:!1,Q.color=Q.active?Q.ring.color:ie()(Q.ring.color).desaturate(.5).lighten(.1).string()});const Ne=(0,w.Z)().nodes(me).velocityDecay(.19).force("collision",(0,D.Z)().radius(12).strength(.85)).stop();for(let Q=0,T=Math.ceil(Math.log(Ne.alphaMin())/Math.log(1-Ne.alphaDecay()));Q<T;++Q){Ne.tick();for(const X of me)X.segment&&(X.x=X.segment.clipx(X),X.y=X.segment.clipy(X))}},nt=(me,ce)=>{me.forEach((we,se)=>{we.index=se,we.outerRadius=(se+2)/(me.length+1)*ce,we.innerRadius=(se===0?0:se+1)/(me.length+1)*ce})},be=me=>{const{width:ce,height:we,quadrants:se,rings:Te,entries:Ae}=me,Ne=Math.min(ce,we)/2,[Q,T]=(0,E.useState)(),X=(0,E.useRef)(null);return G(se,Ne,ce,we),nt(Te,Ne),ye(Ae,se,Te,Ne,Q),E.createElement("svg",{ref:X,width:ce,height:we,...me.svgProps},E.createElement(rn,{width:ce,height:we,radius:Ne,entries:Ae,quadrants:se,rings:Te,activeEntry:Q,onEntryMouseEnter:ne=>T(ne),onEntryMouseLeave:()=>T(void 0)}))},je=me=>{const ce=(0,d.h_)(d.VE),we=(0,d.h_)(P),{error:se,value:Te,loading:Ae}=(0,f.default)(async()=>we.load(me),[we,me]);return(0,E.useEffect)(()=>{se&&ce.post(se)},[se,ce]),{loading:Ae,value:Te,error:se}};function ft(me){const ce=me==null?void 0:me.toLocaleLowerCase("en-US").split(/\s/).map(we=>we.trim()).filter(Boolean);return ce!=null&&ce.length?we=>{var se;const Te=`${we.title} ${((se=we.timeline[0])==null?void 0:se.description)||""}`.toLocaleLowerCase("en-US");return ce.every(Ae=>Te.includes(Ae))}:()=>!0}function F(me){const{loading:ce,error:we,value:se}=je(me.id),Te=Ae=>Ae.entries.filter(ft(me.searchText)).map(Ne=>({id:Ne.key,quadrant:Ae.quadrants.find(Q=>Q.id===Ne.quadrant),title:Ne.title,ring:Ae.rings.find(Q=>Q.id===Ne.timeline[0].ringId),timeline:Ne.timeline.map(Q=>({date:Q.date,ring:Ae.rings.find(T=>T.id===Q.ringId),description:Q.description,moved:Q.moved})),moved:Ne.timeline[0].moved,description:Ne.description||Ne.timeline[0].description,url:Ne.url}));return E.createElement(E.Fragment,null,ce&&E.createElement(e.Ex,null),!ce&&!we&&se&&E.createElement(be,{...me,rings:se.rings,quadrants:se.quadrants,entries:Te(se)}))}const N=(0,r.Z)(()=>({overflowXScroll:{overflowX:"scroll"}}));function _e(me){const{title:ce="Tech Radar",subtitle:we="Pick the recommended technologies for your projects",pageTitle:se="Company Radar",...Te}=me,Ae=N(),[Ne,Q]=E.useState("");return E.createElement(e.T3,{themeId:"tool"},E.createElement(e.h4,{title:ce,subtitle:we}),E.createElement(e.VY,{className:Ae.overflowXScroll},E.createElement(e.yW,{title:se},E.createElement(h.Z,{id:"tech-radar-filter",type:"search",placeholder:"Filter",onChange:T=>Q(T.target.value)}),E.createElement(e.qt,null,E.createElement("p",null,"This is used for visualizing the official guidelines of different areas of software development such as languages, frameworks, infrastructure and processes. You can find an explanation for the radar at"," ",E.createElement(e.rU,{to:"https://opensource.zalando.com/tech-radar/"},"Zalando Tech Radar"),"."))),E.createElement(R.Z,{container:!0,spacing:3,direction:"row"},E.createElement(R.Z,{item:!0,xs:12,sm:6,md:4},E.createElement(F,{searchText:Ne,...Te})))))}var ze=Object.freeze({__proto__:null,RadarPage:_e});const dt=new Array;dt.push({id:"adopt",name:"ADOPT",color:"#93c47d"}),dt.push({id:"trial",name:"TRIAL",color:"#93d2c2"}),dt.push({id:"assess",name:"ASSESS",color:"#fbdb84"}),dt.push({id:"hold",name:"HOLD",color:"#efafa9"});const St=new Array;St.push({id:"infrastructure",name:"Infrastructure"}),St.push({id:"frameworks",name:"Frameworks"}),St.push({id:"languages",name:"Languages"}),St.push({id:"process",name:"Process"});const Bt=new Array;Bt.push({timeline:[{moved:0,ringId:"adopt",date:new Date("2020-08-06"),description:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua"}],url:"#",key:"javascript",id:"javascript",title:"JavaScript",quadrant:"languages",description:'Excepteur **sint** occaecat *cupidatat* non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.\n\n```ts\nconst x = "3";\n```\n'}),Bt.push({timeline:[{moved:-1,ringId:"adopt",date:new Date("2020-08-06"),description:"Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat"}],url:"#",key:"typescript",id:"typescript",title:"TypeScript",quadrant:"languages",description:"Itaque earum rerum hic tenetur a sapiente delectus, ut aut reiciendis voluptatibus maiores alias consequatur aut perferendis doloribus asperiores repellat"}),Bt.push({timeline:[{moved:1,ringId:"adopt",date:new Date("2020-08-06"),description:"Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur"}],url:"https://webpack.js.org/",key:"webpack",id:"webpack",title:"Webpack",quadrant:"frameworks"}),Bt.push({timeline:[{moved:0,ringId:"adopt",date:new Date("2020-08-06")}],url:"https://reactjs.org/",key:"react",id:"react",title:"React",quadrant:"frameworks"}),Bt.push({timeline:[{moved:0,ringId:"adopt",date:new Date("2020-08-06")}],url:"#",key:"code-reviews",id:"code-reviews",title:"Code Reviews",quadrant:"process"}),Bt.push({timeline:[{moved:0,ringId:"assess",date:new Date("2020-08-06")}],url:"#",key:"mob-programming",id:"mob-programming",title:"Mob Programming",quadrant:"process"}),Bt.push({timeline:[{moved:0,ringId:"adopt",date:new Date("2020-08-06")}],url:"#",key:"docs-like-code",id:"docs-like-code",title:"Docs-like-code",quadrant:"process"}),Bt.push({timeline:[{ringId:"hold",date:new Date("2020-08-06")}],url:"#",key:"force-push",id:"force-push",title:"Force push to master",quadrant:"process"}),Bt.push({timeline:[{ringId:"adopt",date:new Date("2020-08-06"),description:"long description"}],url:"https://github.com",key:"github-actions",id:"github-actions",title:"GitHub Actions",quadrant:"infrastructure"});const Lt={entries:Bt,quadrants:St,rings:dt};class Re{async load(){return Lt}}const _t=(0,d.NT)({id:"tech-radar"}),Qt=(0,d.rx)({id:"tech-radar",routes:{root:_t},apis:[(0,d.ni)(P,new Re)]}).provide((0,d.P4)({name:"TechRadarPage",component:()=>Promise.resolve().then(function(){return ze}).then(me=>me.RadarPage),mountPoint:_t})),st=null},65609:function(Mt,g,t){t.d(g,{EU:function(){return Qt}});var e=t(30705),d=t(74163),E=t(2784),f=t(47456),r=t(15459),c=t(77277),S=t(79692),O=t(8560),h=t(27556),R=t(11433),M=t(60364),z=t(12231),K=t(49378),j=t(90436),ie=t(95544),w=t(61837),D=t(51209),P=t(38016),$=t(82717),U=t.n($),I=t(1854),m=t(49462),x=t(31654),W=t(49558),Ee=t(65549),Be=t(17373);const Ve=".md-nav__item--nested .md-toggle",qe="@backstage/techdocs-addons/nav-expanded",Et=(0,r.Z)({root:{position:"absolute",left:"220px",top:"19px",padding:0,minWidth:0}})(c.Z),at=(0,r.Z)({root:{height:"20px",width:"20px"}})(D.Z),Pt=(0,r.Z)({root:{height:"20px",width:"20px"}})(P.Z),At=()=>{const me={expandAllNestedNavs:!1},[ce,we]=(0,f.Z)(qe,me),[se,Te]=(0,E.useState)(!1),[...Ae]=(0,d.pV)([Ve]),Ne=(0,E.useCallback)(T=>{const X=T.checked,ne=ce==null?void 0:ce.expandAllNestedNavs;return!!(ne&&!X||!ne&&X)},[ce]);(0,E.useEffect)(()=>{!(Ae!=null&&Ae.length)||(Te(!0),Ae.forEach(T=>{Ne(T)&&T.click()}))},[ce,Ne,Ae]);const Q=()=>{we(T=>({expandAllNestedNavs:!(T!=null&&T.expandAllNestedNavs)}))};return E.createElement(E.Fragment,null,se?E.createElement(Et,{size:"small",onClick:Q,"aria-label":ce!=null&&ce.expandAllNestedNavs?"collapse-nav":"expand-nav"},ce!=null&&ce.expandAllNestedNavs?E.createElement(Pt,null):E.createElement(at,null)):null)},q="techdocs-report-issue",rn=`#${q}`,ct='[title^="Edit this page"]',xe='[title^="Leave feedback for"]',oe='[data-md-component="main"] .md-content',Ue=(me,ce)=>ce==="github"?(0,I.Pb)(me,"blob"):ce==="gitlab"?(0,I.ah)(me,"blob"):(console.error(`Invalid SCM type ${ce} found in ReportIssue addon for URL ${me}!`),me),de=me=>{const ce=me.toString().substring(0,70),we=ce.length===70?"...":"";return`Documentation feedback: ${ce}${we}`},p=(me,ce)=>{const we="## Documentation Feedback \u{1F4DD}",se="#### The highlighted text:",Te="#### The comment on the text:",Ae="_>replace this line with your comment<_",Ne=me.toString().trim().split(`
`).map(T=>`> ${T.trim()}`).join(`
`),Q=[`Backstage URL: <${window.location.href}> 
Markdown URL: <${ce}>`];return`${we}

 ${se} 

 ${Ne}

 ${Te} 
 ${Ae}

 ___
${Q}`},G=me=>{var ce,we;const se={title:"",body:""},Te=(0,d.oi)(me),[Ae]=(0,d.pV)([ct]),Ne=(ce=Ae==null?void 0:Ae.href)!=null?ce:"",Q=(0,e.h_)(m.q3);if(!Te||!Ne)return se;const T=(we=Q.byUrl(Ne))==null?void 0:we.type;return T?{title:de(Te),body:p(Te,Ue(Ne,T))}:se},ye=()=>{var me,ce;const we=(0,e.h_)(m.q3),[se]=(0,d.pV)([ct]),Te=(me=se==null?void 0:se.href)!=null?me:"";if(!Te)return null;const Ae=(ce=we.byUrl(Te))==null?void 0:ce.type;return Ae?{...U()(Ue(Te,Ae)),type:Ae}:null},nt=(0,S.Z)(me=>({root:{display:"grid",gridGap:me.spacing(1),gridAutoFlow:"column",justifyContent:"center",alignItems:"center",color:me.palette.common.black,fontSize:me.typography.button.fontSize}})),be=({type:me})=>me==="github"?W.fy:x.Z,je=({type:me})=>me==="github"?"Github":"Gitlab",ft=(me,ce)=>{const{title:we,body:se}=ce,Te=encodeURIComponent(we),Ae=encodeURIComponent(se),{protocol:Ne,resource:Q,owner:T,name:X,type:ne}=me,fe=encodeURIComponent(T),te=encodeURIComponent(X),ge=`${Ne}://${Q}/${fe}/${te}`;return ne==="github"?`${ge}/issues/new?title=${Te}&body=${Ae}`:`${ge}/issues/new?issue[title]=${Te}&issue[description]=${Ae}`},F=({template:me,repository:ce})=>{const we=nt(),se=be(ce),Te=ft(ce,me);return E.createElement(W.rU,{className:we.root,to:Te,target:"_blank"},E.createElement(se,null)," Open new ",je(ce)," issue")},N=(0,S.Z)(me=>({root:{transform:"translate(-100%, -100%)",position:"absolute",padding:me.spacing(1),zIndex:me.zIndex.tooltip,background:me.palette.common.white}})),_e=({debounceTime:me=500,templateBuilder:ce})=>{const we=N(),[se,Te]=(0,E.useState)(),Ae=ye(),Ne=G(me),Q=(0,d.oi)(me),[T,X]=(0,d.pV)([oe,xe]);let[ne]=(0,d.pV)([rn]);return X&&(X.style.display="none"),(0,E.useEffect)(()=>{if(!Ae||!Q||!Q.containsNode(T,!0)||(Q==null?void 0:Q.containsNode(ne,!0)))return;const fe=T.getBoundingClientRect(),te=Q.getRangeAt(0).getBoundingClientRect();Te({top:`${te.top-fe.top-16}px`,left:`${te.left+te.width/2}px`})},[Q,T,ne]),!Q||!Ae||!["github","gitlab"].includes(Ae.type)?null:(ne||(ne=document.createElement("div"),ne.setAttribute("id",q),T.prepend(ne)),E.createElement(O.Z,{container:ne},E.createElement(h.Z,{"data-testid":"report-issue-addon",className:we.root,style:se},E.createElement(F,{repository:Ae,template:ce?ce({selection:Q}):Ne}))))},ze="0 3px 1px rgba(0,0,0,0.1),0 4px 8px rgba(0,0,0,0.13),0 0 0 1px rgba(0,0,0,0.02)",dt=(0,r.Z)(me=>({root:{height:2,padding:"15px 0"},thumb:{height:18,width:18,backgroundColor:me.palette.common.white,boxShadow:ze,marginTop:-9,marginLeft:-9,"&:focus, &:hover, &$active":{boxShadow:"0 3px 1px rgba(0,0,0,0.1),0 4px 8px rgba(0,0,0,0.3),0 0 0 1px rgba(0,0,0,0.02)","@media (hover: none)":{boxShadow:ze}}},active:{},valueLabel:{top:"100%",left:"50%",transform:"scale(1) translate(-50%, -5px) !important","& *":{color:me.palette.common.black,fontSize:me.typography.caption.fontSize,background:"transparent"}},track:{height:2},rail:{height:2,opacity:.5},mark:{height:10,width:1,marginTop:-4},markActive:{opacity:1,backgroundColor:"currentColor"}}))(R.Z),St={key:"techdocs.addons.settings.textsize",defaultValue:100},Bt=[{value:90},{value:100},{value:115},{value:130},{value:150}],Lt=(0,S.Z)(me=>({container:{color:me.palette.textSubtle,display:"flex",alignItems:"center",margin:0,minWidth:200},menuItem:{"&:hover":{background:"transparent"}},decreaseButton:{marginRight:me.spacing(1)},increaseButton:{marginLeft:me.spacing(1)}})),Re=()=>{const me=Lt(),ce=(0,M.Z)(),[we]=(0,d.pV)(["body"]),[se,Te]=(0,E.useState)(()=>{const ge=localStorage==null?void 0:localStorage.getItem(St.key);return ge?parseInt(ge,10):St.defaultValue}),Ae=(0,E.useMemo)(()=>Bt.map(ge=>ge.value),[]),Ne=(0,E.useMemo)(()=>Ae.indexOf(se),[Ae,se]),Q=(0,E.useMemo)(()=>Ae[0],[Ae]),T=(0,E.useMemo)(()=>Ae[Ae.length-1],[Ae]),X=(0,E.useCallback)(()=>`${se}%`,[se]),ne=(0,E.useCallback)((ge,He)=>{Array.isArray(He)||(Te(He),localStorage==null||localStorage.setItem(St.key,String(He)))},[Te]),fe=(0,E.useCallback)(ge=>{ne(ge,Ae[Ne-1])},[Ne,Ae,ne]),te=(0,E.useCallback)(ge=>{ne(ge,Ae[Ne+1])},[Ne,Ae,ne]);return(0,E.useEffect)(()=>{var ge,He;if(!we)return;const it=(He=(ge=ce.typography)==null?void 0:ge.htmlFontSize)!=null?He:16;we.style.setProperty("--md-typeset-font-size",`${it*(se/100)}px`)},[we,se,ce]),E.createElement(z.Z,{className:me.menuItem,button:!0,disableRipple:!0},E.createElement(K.Z,{primary:E.createElement(j.Z,{variant:"subtitle2",color:"textPrimary"},"Text size"),secondary:E.createElement(ie.Z,{className:me.container},E.createElement(w.Z,{className:me.decreaseButton,size:"small",edge:"start",disabled:se===Q,onClick:fe,"aria-label":"Decrease text size"},E.createElement(Be.Z,null)),E.createElement(dt,{value:se,"aria-labelledby":"text-size-slider",getAriaValueText:X,valueLabelDisplay:"on",valueLabelFormat:X,marks:Bt,step:null,min:Q,max:T,onChangeCommitted:ne}),E.createElement(w.Z,{className:me.increaseButton,size:"small",edge:"end",disabled:se===T,onClick:te,"aria-label":"Increase text size"},E.createElement(Ee.Z,null))),disableTypography:!0}))},_t=(0,e.rx)({id:"techdocsModuleAddonsContrib"}),Ct=_t.provide((0,d.KY)({name:"ExpandableNavigation",location:d.oZ.PrimarySidebar,component:At})),Qt=_t.provide((0,d.KY)({name:"ReportIssue",location:d.oZ.Content,component:_e})),st=_t.provide((0,d.KY)({name:"TextSize",location:d.oZ.Settings,component:Re}))},74163:function(Mt,g,t){t.d(g,{Ox:function(){return Mn},Zz:function(){return Se},oZ:function(){return Dn},DR:function(){return pt},ZS:function(){return In},VA:function(){return $n},KY:function(){return zt},gT:function(){return mn},Dl:function(){return cn},ux:function(){return Rn},pV:function(){return cr},oi:function(){return Z},$L:function(){return ln},x1:function(){return Ln}});var e=t(2784),d=t(73557),E=t(30705),f=t(64279),r=t(34520),c=t(18473),S=t(7896),O=t(20653),h=t(87371),R=t(81665),M=t(80753),z=t(31461),K={}.constructor;function j(v){if(v==null||typeof v!="object")return v;if(Array.isArray(v))return v.map(j);if(v.constructor!==K)return v;var i={};for(var u in v)i[u]=j(v[u]);return i}function ie(v,i,u){v===void 0&&(v="unnamed");var o=u.jss,l=j(i),_=o.plugins.onCreateRule(v,l,u);return _||(v[0],null)}var w=function(i,u){for(var o="",l=0;l<i.length&&i[l]!=="!important";l++)o&&(o+=u),o+=i[l];return o},D=function(i,u){if(u===void 0&&(u=!1),!Array.isArray(i))return i;var o="";if(Array.isArray(i[0]))for(var l=0;l<i.length&&i[l]!=="!important";l++)o&&(o+=", "),o+=w(i[l]," ");else o=w(i,", ");return!u&&i[i.length-1]==="!important"&&(o+=" !important"),o};function P(v){return v&&v.format===!1?{linebreak:"",space:""}:{linebreak:`
`,space:" "}}function $(v,i){for(var u="",o=0;o<i;o++)u+="  ";return u+v}function U(v,i,u){u===void 0&&(u={});var o="";if(!i)return o;var l=u,_=l.indent,b=_===void 0?0:_,L=i.fallbacks;u.format===!1&&(b=-1/0);var re=P(u),Oe=re.linebreak,Le=re.space;if(v&&b++,L)if(Array.isArray(L))for(var tt=0;tt<L.length;tt++){var Ht=L[tt];for(var Dt in Ht){var tn=Ht[Dt];tn!=null&&(o&&(o+=Oe),o+=$(Dt+":"+Le+D(tn)+";",b))}}else for(var Vt in L){var qt=L[Vt];qt!=null&&(o&&(o+=Oe),o+=$(Vt+":"+Le+D(qt)+";",b))}for(var xn in i){var _n=i[xn];_n!=null&&xn!=="fallbacks"&&(o&&(o+=Oe),o+=$(xn+":"+Le+D(_n)+";",b))}return!o&&!u.allowEmpty||!v?o:(b--,o&&(o=""+Oe+o+Oe),$(""+v+Le+"{"+o,b)+$("}",b))}var I=/([[\].#*$><+~=|^:(),"'`\s])/g,m=typeof CSS!="undefined"&&CSS.escape,x=function(v){return m?m(v):v.replace(I,"\\$1")},W=function(){function v(u,o,l){this.type="style",this.isProcessed=!1;var _=l.sheet,b=l.Renderer;this.key=u,this.options=l,this.style=o,_?this.renderer=_.renderer:b&&(this.renderer=new b)}var i=v.prototype;return i.prop=function(o,l,_){if(l===void 0)return this.style[o];var b=_?_.force:!1;if(!b&&this.style[o]===l)return this;var L=l;(!_||_.process!==!1)&&(L=this.options.jss.plugins.onChangeValue(l,o,this));var re=L==null||L===!1,Oe=o in this.style;if(re&&!Oe&&!b)return this;var Le=re&&Oe;if(Le?delete this.style[o]:this.style[o]=L,this.renderable&&this.renderer)return Le?this.renderer.removeProperty(this.renderable,o):this.renderer.setProperty(this.renderable,o,L),this;var tt=this.options.sheet;return tt&&tt.attached,this},v}(),Ee=function(v){(0,R.Z)(i,v);function i(o,l,_){var b;b=v.call(this,o,l,_)||this;var L=_.selector,re=_.scoped,Oe=_.sheet,Le=_.generateId;return L?b.selectorText=L:re!==!1&&(b.id=Le((0,M.Z)((0,M.Z)(b)),Oe),b.selectorText="."+x(b.id)),b}var u=i.prototype;return u.applyTo=function(l){var _=this.renderer;if(_){var b=this.toJSON();for(var L in b)_.setProperty(l,L,b[L])}return this},u.toJSON=function(){var l={};for(var _ in this.style){var b=this.style[_];typeof b!="object"?l[_]=b:Array.isArray(b)&&(l[_]=D(b))}return l},u.toString=function(l){var _=this.options.sheet,b=_?_.options.link:!1,L=b?(0,S.Z)({},l,{allowEmpty:!0}):l;return U(this.selectorText,this.style,L)},(0,h.Z)(i,[{key:"selector",set:function(l){if(l!==this.selectorText){this.selectorText=l;var _=this.renderer,b=this.renderable;if(!(!b||!_)){var L=_.setSelector(b,l);L||_.replaceRule(b,this)}}},get:function(){return this.selectorText}}]),i}(W),Be={onCreateRule:function(i,u,o){return i[0]==="@"||o.parent&&o.parent.type==="keyframes"?null:new Ee(i,u,o)}},Ve={indent:1,children:!0},qe=/@([\w-]+)/,Et=function(){function v(u,o,l){this.type="conditional",this.isProcessed=!1,this.key=u;var _=u.match(qe);this.at=_?_[1]:"unknown",this.query=l.name||"@"+this.at,this.options=l,this.rules=new Bt((0,S.Z)({},l,{parent:this}));for(var b in o)this.rules.add(b,o[b]);this.rules.process()}var i=v.prototype;return i.getRule=function(o){return this.rules.get(o)},i.indexOf=function(o){return this.rules.indexOf(o)},i.addRule=function(o,l,_){var b=this.rules.add(o,l,_);return b?(this.options.jss.plugins.onProcessRule(b),b):null},i.toString=function(o){o===void 0&&(o=Ve);var l=P(o),_=l.linebreak;if(o.indent==null&&(o.indent=Ve.indent),o.children==null&&(o.children=Ve.children),o.children===!1)return this.query+" {}";var b=this.rules.toString(o);return b?this.query+" {"+_+b+_+"}":""},v}(),at=/@media|@supports\s+/,Pt={onCreateRule:function(i,u,o){return at.test(i)?new Et(i,u,o):null}},At={indent:1,children:!0},q=/@keyframes\s+([\w-]+)/,rn=function(){function v(u,o,l){this.type="keyframes",this.at="@keyframes",this.isProcessed=!1;var _=u.match(q);_&&_[1]?this.name=_[1]:this.name="noname",this.key=this.type+"-"+this.name,this.options=l;var b=l.scoped,L=l.sheet,re=l.generateId;this.id=b===!1?this.name:x(re(this,L)),this.rules=new Bt((0,S.Z)({},l,{parent:this}));for(var Oe in o)this.rules.add(Oe,o[Oe],(0,S.Z)({},l,{parent:this}));this.rules.process()}var i=v.prototype;return i.toString=function(o){o===void 0&&(o=At);var l=P(o),_=l.linebreak;if(o.indent==null&&(o.indent=At.indent),o.children==null&&(o.children=At.children),o.children===!1)return this.at+" "+this.id+" {}";var b=this.rules.toString(o);return b&&(b=""+_+b+_),this.at+" "+this.id+" {"+b+"}"},v}(),ct=/@keyframes\s+/,xe=/\$([\w-]+)/g,oe=function(i,u){return typeof i=="string"?i.replace(xe,function(o,l){return l in u?u[l]:o}):i},Ue=function(i,u,o){var l=i[u],_=oe(l,o);_!==l&&(i[u]=_)},de={onCreateRule:function(i,u,o){return typeof i=="string"&&ct.test(i)?new rn(i,u,o):null},onProcessStyle:function(i,u,o){return u.type!=="style"||!o||("animation-name"in i&&Ue(i,"animation-name",o.keyframes),"animation"in i&&Ue(i,"animation",o.keyframes)),i},onChangeValue:function(i,u,o){var l=o.options.sheet;if(!l)return i;switch(u){case"animation":return oe(i,l.keyframes);case"animation-name":return oe(i,l.keyframes);default:return i}}},p=function(v){(0,R.Z)(i,v);function i(){return v.apply(this,arguments)||this}var u=i.prototype;return u.toString=function(l){var _=this.options.sheet,b=_?_.options.link:!1,L=b?(0,S.Z)({},l,{allowEmpty:!0}):l;return U(this.key,this.style,L)},i}(W),G={onCreateRule:function(i,u,o){return o.parent&&o.parent.type==="keyframes"?new p(i,u,o):null}},ye=function(){function v(u,o,l){this.type="font-face",this.at="@font-face",this.isProcessed=!1,this.key=u,this.style=o,this.options=l}var i=v.prototype;return i.toString=function(o){var l=P(o),_=l.linebreak;if(Array.isArray(this.style)){for(var b="",L=0;L<this.style.length;L++)b+=U(this.at,this.style[L]),this.style[L+1]&&(b+=_);return b}return U(this.at,this.style,o)},v}(),nt=/@font-face/,be={onCreateRule:function(i,u,o){return nt.test(i)?new ye(i,u,o):null}},je=function(){function v(u,o,l){this.type="viewport",this.at="@viewport",this.isProcessed=!1,this.key=u,this.style=o,this.options=l}var i=v.prototype;return i.toString=function(o){return U(this.key,this.style,o)},v}(),ft={onCreateRule:function(i,u,o){return i==="@viewport"||i==="@-ms-viewport"?new je(i,u,o):null}},F=function(){function v(u,o,l){this.type="simple",this.isProcessed=!1,this.key=u,this.value=o,this.options=l}var i=v.prototype;return i.toString=function(o){if(Array.isArray(this.value)){for(var l="",_=0;_<this.value.length;_++)l+=this.key+" "+this.value[_]+";",this.value[_+1]&&(l+=`
`);return l}return this.key+" "+this.value+";"},v}(),N={"@charset":!0,"@import":!0,"@namespace":!0},_e={onCreateRule:function(i,u,o){return i in N?new F(i,u,o):null}},ze=[Be,Pt,de,G,be,ft,_e],dt={process:!0},St={force:!0,process:!0},Bt=function(){function v(u){this.map={},this.raw={},this.index=[],this.counter=0,this.options=u,this.classes=u.classes,this.keyframes=u.keyframes}var i=v.prototype;return i.add=function(o,l,_){var b=this.options,L=b.parent,re=b.sheet,Oe=b.jss,Le=b.Renderer,tt=b.generateId,Ht=b.scoped,Dt=(0,S.Z)({classes:this.classes,parent:L,sheet:re,jss:Oe,Renderer:Le,generateId:tt,scoped:Ht,name:o,keyframes:this.keyframes,selector:void 0},_),tn=o;o in this.raw&&(tn=o+"-d"+this.counter++),this.raw[tn]=l,tn in this.classes&&(Dt.selector="."+x(this.classes[tn]));var Vt=ie(tn,l,Dt);if(!Vt)return null;this.register(Vt);var qt=Dt.index===void 0?this.index.length:Dt.index;return this.index.splice(qt,0,Vt),Vt},i.get=function(o){return this.map[o]},i.remove=function(o){this.unregister(o),delete this.raw[o.key],this.index.splice(this.index.indexOf(o),1)},i.indexOf=function(o){return this.index.indexOf(o)},i.process=function(){var o=this.options.jss.plugins;this.index.slice(0).forEach(o.onProcessRule,o)},i.register=function(o){this.map[o.key]=o,o instanceof Ee?(this.map[o.selector]=o,o.id&&(this.classes[o.key]=o.id)):o instanceof rn&&this.keyframes&&(this.keyframes[o.name]=o.id)},i.unregister=function(o){delete this.map[o.key],o instanceof Ee?(delete this.map[o.selector],delete this.classes[o.key]):o instanceof rn&&delete this.keyframes[o.name]},i.update=function(){var o,l,_;if(typeof(arguments.length<=0?void 0:arguments[0])=="string"?(o=arguments.length<=0?void 0:arguments[0],l=arguments.length<=1?void 0:arguments[1],_=arguments.length<=2?void 0:arguments[2]):(l=arguments.length<=0?void 0:arguments[0],_=arguments.length<=1?void 0:arguments[1],o=null),o)this.updateOne(this.map[o],l,_);else for(var b=0;b<this.index.length;b++)this.updateOne(this.index[b],l,_)},i.updateOne=function(o,l,_){_===void 0&&(_=dt);var b=this.options,L=b.jss.plugins,re=b.sheet;if(o.rules instanceof v){o.rules.update(l,_);return}var Oe=o.style;if(L.onUpdate(l,o,re,_),_.process&&Oe&&Oe!==o.style){L.onProcessStyle(o.style,o,re);for(var Le in o.style){var tt=o.style[Le],Ht=Oe[Le];tt!==Ht&&o.prop(Le,tt,St)}for(var Dt in Oe){var tn=o.style[Dt],Vt=Oe[Dt];tn==null&&tn!==Vt&&o.prop(Dt,null,St)}}},i.toString=function(o){for(var l="",_=this.options.sheet,b=_?_.options.link:!1,L=P(o),re=L.linebreak,Oe=0;Oe<this.index.length;Oe++){var Le=this.index[Oe],tt=Le.toString(o);!tt&&!b||(l&&(l+=re),l+=tt)}return l},v}(),Lt=function(){function v(u,o){this.attached=!1,this.deployed=!1,this.classes={},this.keyframes={},this.options=(0,S.Z)({},o,{sheet:this,parent:this,classes:this.classes,keyframes:this.keyframes}),o.Renderer&&(this.renderer=new o.Renderer(this)),this.rules=new Bt(this.options);for(var l in u)this.rules.add(l,u[l]);this.rules.process()}var i=v.prototype;return i.attach=function(){return this.attached?this:(this.renderer&&this.renderer.attach(),this.attached=!0,this.deployed||this.deploy(),this)},i.detach=function(){return this.attached?(this.renderer&&this.renderer.detach(),this.attached=!1,this):this},i.addRule=function(o,l,_){var b=this.queue;this.attached&&!b&&(this.queue=[]);var L=this.rules.add(o,l,_);return L?(this.options.jss.plugins.onProcessRule(L),this.attached?(this.deployed&&(b?b.push(L):(this.insertRule(L),this.queue&&(this.queue.forEach(this.insertRule,this),this.queue=void 0))),L):(this.deployed=!1,L)):null},i.insertRule=function(o){this.renderer&&this.renderer.insertRule(o)},i.addRules=function(o,l){var _=[];for(var b in o){var L=this.addRule(b,o[b],l);L&&_.push(L)}return _},i.getRule=function(o){return this.rules.get(o)},i.deleteRule=function(o){var l=typeof o=="object"?o:this.rules.get(o);return!l||this.attached&&!l.renderable?!1:(this.rules.remove(l),this.attached&&l.renderable&&this.renderer?this.renderer.deleteRule(l.renderable):!0)},i.indexOf=function(o){return this.rules.indexOf(o)},i.deploy=function(){return this.renderer&&this.renderer.deploy(),this.deployed=!0,this},i.update=function(){var o;return(o=this.rules).update.apply(o,arguments),this},i.updateOne=function(o,l,_){return this.rules.updateOne(o,l,_),this},i.toString=function(o){return this.rules.toString(o)},v}(),Re=function(){function v(){this.plugins={internal:[],external:[]},this.registry={}}var i=v.prototype;return i.onCreateRule=function(o,l,_){for(var b=0;b<this.registry.onCreateRule.length;b++){var L=this.registry.onCreateRule[b](o,l,_);if(L)return L}return null},i.onProcessRule=function(o){if(!o.isProcessed){for(var l=o.options.sheet,_=0;_<this.registry.onProcessRule.length;_++)this.registry.onProcessRule[_](o,l);o.style&&this.onProcessStyle(o.style,o,l),o.isProcessed=!0}},i.onProcessStyle=function(o,l,_){for(var b=0;b<this.registry.onProcessStyle.length;b++)l.style=this.registry.onProcessStyle[b](l.style,l,_)},i.onProcessSheet=function(o){for(var l=0;l<this.registry.onProcessSheet.length;l++)this.registry.onProcessSheet[l](o)},i.onUpdate=function(o,l,_,b){for(var L=0;L<this.registry.onUpdate.length;L++)this.registry.onUpdate[L](o,l,_,b)},i.onChangeValue=function(o,l,_){for(var b=o,L=0;L<this.registry.onChangeValue.length;L++)b=this.registry.onChangeValue[L](b,l,_);return b},i.use=function(o,l){l===void 0&&(l={queue:"external"});var _=this.plugins[l.queue];_.indexOf(o)===-1&&(_.push(o),this.registry=[].concat(this.plugins.external,this.plugins.internal).reduce(function(b,L){for(var re in L)re in b&&b[re].push(L[re]);return b},{onCreateRule:[],onProcessRule:[],onProcessStyle:[],onProcessSheet:[],onChangeValue:[],onUpdate:[]}))},v}(),_t=function(){function v(){this.registry=[]}var i=v.prototype;return i.add=function(o){var l=this.registry,_=o.options.index;if(l.indexOf(o)===-1){if(l.length===0||_>=this.index){l.push(o);return}for(var b=0;b<l.length;b++)if(l[b].options.index>_){l.splice(b,0,o);return}}},i.reset=function(){this.registry=[]},i.remove=function(o){var l=this.registry.indexOf(o);this.registry.splice(l,1)},i.toString=function(o){for(var l=o===void 0?{}:o,_=l.attached,b=(0,z.Z)(l,["attached"]),L=P(b),re=L.linebreak,Oe="",Le=0;Le<this.registry.length;Le++){var tt=this.registry[Le];_!=null&&tt.attached!==_||(Oe&&(Oe+=re),Oe+=tt.toString(b))}return Oe},(0,h.Z)(v,[{key:"index",get:function(){return this.registry.length===0?0:this.registry[this.registry.length-1].options.index}}]),v}(),Ct=new _t,Qt=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"&&window.Math===Math?window:typeof self!="undefined"&&self.Math===Math?self:Function("return this")(),st="2f1acc6c3a606b082e5eef5e54414ffb";Qt[st]==null&&(Qt[st]=0);var me=Qt[st]++,ce=1e10,we=function(i){i===void 0&&(i={});var u=0,o=function(_,b){u+=1,u>ce;var L="",re="";return b&&(b.options.classNamePrefix&&(re=b.options.classNamePrefix),b.options.jss.id!=null&&(L=String(b.options.jss.id))),i.minify?""+(re||"c")+me+L+u:re+_.key+"-"+me+(L?"-"+L:"")+"-"+u};return o},se=function(i){var u;return function(){return u||(u=i()),u}},Te=function(i,u){try{return i.attributeStyleMap?i.attributeStyleMap.get(u):i.style.getPropertyValue(u)}catch{return""}},Ae=function(i,u,o){try{var l=o;if(Array.isArray(o)&&(l=D(o,!0),o[o.length-1]==="!important"))return i.style.setProperty(u,l,"important"),!0;i.attributeStyleMap?i.attributeStyleMap.set(u,l):i.style.setProperty(u,l)}catch{return!1}return!0},Ne=function(i,u){try{i.attributeStyleMap?i.attributeStyleMap.delete(u):i.style.removeProperty(u)}catch{}},Q=function(i,u){return i.selectorText=u,i.selectorText===u},T=se(function(){return document.querySelector("head")});function X(v,i){for(var u=0;u<v.length;u++){var o=v[u];if(o.attached&&o.options.index>i.index&&o.options.insertionPoint===i.insertionPoint)return o}return null}function ne(v,i){for(var u=v.length-1;u>=0;u--){var o=v[u];if(o.attached&&o.options.insertionPoint===i.insertionPoint)return o}return null}function fe(v){for(var i=T(),u=0;u<i.childNodes.length;u++){var o=i.childNodes[u];if(o.nodeType===8&&o.nodeValue.trim()===v)return o}return null}function te(v){var i=Ct.registry;if(i.length>0){var u=X(i,v);if(u&&u.renderer)return{parent:u.renderer.element.parentNode,node:u.renderer.element};if(u=ne(i,v),u&&u.renderer)return{parent:u.renderer.element.parentNode,node:u.renderer.element.nextSibling}}var o=v.insertionPoint;if(o&&typeof o=="string"){var l=fe(o);if(l)return{parent:l.parentNode,node:l.nextSibling}}return!1}function ge(v,i){var u=i.insertionPoint,o=te(i);if(o!==!1&&o.parent){o.parent.insertBefore(v,o.node);return}if(u&&typeof u.nodeType=="number"){var l=u,_=l.parentNode;_&&_.insertBefore(v,l.nextSibling);return}T().appendChild(v)}var He=se(function(){var v=document.querySelector('meta[property="csp-nonce"]');return v?v.getAttribute("content"):null}),it=function(i,u,o){try{"insertRule"in i?i.insertRule(u,o):"appendRule"in i&&i.appendRule(u)}catch{return!1}return i.cssRules[o]},ht=function(i,u){var o=i.cssRules.length;return u===void 0||u>o?o:u},ve=function(){var i=document.createElement("style");return i.textContent=`
`,i},Fe=function(){function v(u){this.getPropertyValue=Te,this.setProperty=Ae,this.removeProperty=Ne,this.setSelector=Q,this.hasInsertedRules=!1,this.cssRules=[],u&&Ct.add(u),this.sheet=u;var o=this.sheet?this.sheet.options:{},l=o.media,_=o.meta,b=o.element;this.element=b||ve(),this.element.setAttribute("data-jss",""),l&&this.element.setAttribute("media",l),_&&this.element.setAttribute("data-meta",_);var L=He();L&&this.element.setAttribute("nonce",L)}var i=v.prototype;return i.attach=function(){if(!(this.element.parentNode||!this.sheet)){ge(this.element,this.sheet.options);var o=Boolean(this.sheet&&this.sheet.deployed);this.hasInsertedRules&&o&&(this.hasInsertedRules=!1,this.deploy())}},i.detach=function(){if(!!this.sheet){var o=this.element.parentNode;o&&o.removeChild(this.element),this.sheet.options.link&&(this.cssRules=[],this.element.textContent=`
`)}},i.deploy=function(){var o=this.sheet;if(!!o){if(o.options.link){this.insertRules(o.rules);return}this.element.textContent=`
`+o.toString()+`
`}},i.insertRules=function(o,l){for(var _=0;_<o.index.length;_++)this.insertRule(o.index[_],_,l)},i.insertRule=function(o,l,_){if(_===void 0&&(_=this.element.sheet),o.rules){var b=o,L=_;if(o.type==="conditional"||o.type==="keyframes"){var re=ht(_,l);if(L=it(_,b.toString({children:!1}),re),L===!1)return!1;this.refCssRule(o,re,L)}return this.insertRules(b.rules,L),L}var Oe=o.toString();if(!Oe)return!1;var Le=ht(_,l),tt=it(_,Oe,Le);return tt===!1?!1:(this.hasInsertedRules=!0,this.refCssRule(o,Le,tt),tt)},i.refCssRule=function(o,l,_){o.renderable=_,o.options.parent instanceof Lt&&(this.cssRules[l]=_)},i.deleteRule=function(o){var l=this.element.sheet,_=this.indexOf(o);return _===-1?!1:(l.deleteRule(_),this.cssRules.splice(_,1),!0)},i.indexOf=function(o){return this.cssRules.indexOf(o)},i.replaceRule=function(o,l){var _=this.indexOf(o);return _===-1?!1:(this.element.sheet.deleteRule(_),this.cssRules.splice(_,1),this.insertRule(l,_))},i.getRules=function(){return this.element.sheet.cssRules},v}(),mt=0,$t=function(){function v(u){this.id=mt++,this.version="10.8.2",this.plugins=new Re,this.options={id:{minify:!1},createGenerateId:we,Renderer:O.Z?Fe:null,plugins:[]},this.generateId=we({minify:!1});for(var o=0;o<ze.length;o++)this.plugins.use(ze[o],{queue:"internal"});this.setup(u)}var i=v.prototype;return i.setup=function(o){return o===void 0&&(o={}),o.createGenerateId&&(this.options.createGenerateId=o.createGenerateId),o.id&&(this.options.id=(0,S.Z)({},this.options.id,o.id)),(o.createGenerateId||o.id)&&(this.generateId=this.options.createGenerateId(this.options.id)),o.insertionPoint!=null&&(this.options.insertionPoint=o.insertionPoint),"Renderer"in o&&(this.options.Renderer=o.Renderer),o.plugins&&this.use.apply(this,o.plugins),this},i.createStyleSheet=function(o,l){l===void 0&&(l={});var _=l,b=_.index;typeof b!="number"&&(b=Ct.index===0?0:Ct.index+1);var L=new Lt(o,(0,S.Z)({},l,{jss:this,generateId:l.generateId||this.generateId,insertionPoint:this.options.insertionPoint,Renderer:this.options.Renderer,index:b}));return this.plugins.onProcessSheet(L),L},i.removeStyleSheet=function(o){return o.detach(),Ct.remove(o),this},i.createRule=function(o,l,_){if(l===void 0&&(l={}),_===void 0&&(_={}),typeof o=="object")return this.createRule(void 0,o,l);var b=(0,S.Z)({},_,{name:o,jss:this,Renderer:this.options.Renderer});b.generateId||(b.generateId=this.generateId),b.classes||(b.classes={}),b.keyframes||(b.keyframes={});var L=ie(o,l,b);return L&&this.plugins.onProcessRule(L),L},i.use=function(){for(var o=this,l=arguments.length,_=new Array(l),b=0;b<l;b++)_[b]=arguments[b];return _.forEach(function(L){o.plugins.use(L)}),this},v}(),Zt=function(i){return new $t(i)},Gt=null,Jt=typeof CSS=="object"&&CSS!=null&&"number"in CSS;function xt(v){var i=null;for(var u in v){var o=v[u],l=typeof o;if(l==="function")i||(i={}),i[u]=o;else if(l==="object"&&o!==null&&!Array.isArray(o)){var _=xt(o);_&&(i||(i={}),i[u]=_)}}return i}/**
 * A better abstraction over CSS.
 *
 * @copyright Oleg Isonen (Slobodskoi) / Isonen 2014-present
 * @website https://github.com/cssinjs/jss
 * @license MIT
 */var sn=Zt(),De=null,Je=t(50236),et=t(19219),ae=t(49558),pe=t(54073),ke=t.n(pe);const Ze="techdocs.addons.addon.v1",Se="techdocs.addons.wrapper.v1",pt=()=>null;(0,E.R5)(pt,Se,!0);const vt=v=>`${Ze}.${v.toLocaleLowerCase("en-US")}`;function zt(v){const{name:i,component:u}=v;return(0,E.YO)({name:i,component:{sync:o=>e.createElement(u,{...o})},data:{[Ze]:v,[vt(i)]:!0}})}const Tt=(v,i)=>v.selectByComponentData({key:i}).getElements()[0],It=v=>v.selectByComponentData({key:Se}).selectByComponentData({key:Ze}),Ut=v=>v.selectByComponentData({key:Se}).findComponentData({key:Ze}),ln=()=>{const v=(0,d.pC)(),i=(0,E.vJ)(v,It),u=(0,E.vJ)(v,Ut),o=(0,e.useCallback)(b=>{var L;if(!i||!b)return null;const re=vt(b.name);return(L=Tt(i,re))!=null?L:null},[i]),l=(0,e.useCallback)(b=>{const L=u.find(re=>re.name===b);return L?o(L):null},[u,o]),_=(0,e.useCallback)(b=>{const L=u.filter(re=>re.location===b);return L.length?L.map(o):null},[u,o]);return{renderComponentByName:l,renderComponentsByLocation:_}},mn=(0,E.T0)({id:"plugin.techdocs.service"}),cn=(0,E.T0)({id:"plugin.techdocs.storageservice"});function En(v,i){return i.getOptionalBoolean("techdocs.legacyUseCaseSensitiveTripletPaths")||(v.kind=v.kind.toLocaleLowerCase(),v.name=v.name.toLocaleLowerCase(),v.namespace=v.namespace.toLocaleLowerCase()),v}const en=(v,i)=>(0,r.eE)(v)===(0,r.eE)(i),Sn={title:"",subtitle:"",setTitle:()=>{},setSubtitle:()=>{},setShadowRoot:()=>{},metadata:{loading:!0},entityMetadata:{loading:!0},entityRef:{kind:"",name:"",namespace:""}},On=(0,c.CT)("techdocs-reader-page-context"),In=(0,e.memo)(({entityRef:v,children:i})=>{const u=(0,E.h_)(mn),o=(0,E.h_)(E.Ds),l=(0,f.default)(async()=>u.getTechDocsMetadata(v),[v]),_=(0,f.default)(async()=>u.getEntityMetadata(v),[v]),[b,L]=(0,e.useState)(Sn.title),[re,Oe]=(0,e.useState)(Sn.subtitle),[Le,tt]=(0,e.useState)(Sn.shadowRoot),Ht={metadata:l,entityRef:En(v,o),entityMetadata:_,shadowRoot:Le,setShadowRoot:tt,title:b,setTitle:L,subtitle:re,setSubtitle:Oe},Dt=(0,c.EI)({1:Ht});return e.createElement(On.Provider,{value:Dt},i instanceof Function?i(Ht):i)},(v,i)=>en(v.entityRef,i.entityRef)),Ln=()=>{const v=(0,e.useContext)(On);if(v===void 0)return Sn;const i=v.atVersion(1);if(i===void 0)throw new Error("No context found for version 1.");return i},Dn=Object.freeze({Header:"Header",Subheader:"Subheader",Settings:"Settings",PrimarySidebar:"PrimarySidebar",SecondarySidebar:"SecondarySidebar",Content:"Content"}),Mn="TECH_DOCS_SHADOW_DOM_STYLE_LOAD",Zn=v=>{(0,e.useEffect)(()=>{var i;if(!v)return()=>{};const u=v.querySelectorAll('head > link[rel="stylesheet"]');let o=(i=u==null?void 0:u.length)!=null?i:0;const l=new CustomEvent(Mn);if(!o)return v.dispatchEvent(l),()=>{};const _=()=>{--o===0&&v.dispatchEvent(l)};return u==null||u.forEach(b=>{b.addEventListener("load",_)}),()=>{u==null||u.forEach(b=>{b.removeEventListener("load",_)})}},[v])},Rn=v=>{const[i,u]=(0,e.useState)(!1);return(0,e.useEffect)(()=>{if(!v)return()=>{};u(!0);const o=v.style;o.setProperty("opacity","0");const l=()=>{u(!1),o.setProperty("opacity","1")};return v.addEventListener(Mn,l),()=>{v.removeEventListener(Mn,l)}},[v]),i},$n=({element:v,onAppend:i,children:u})=>{const[o,l]=(0,e.useState)(Zt({...(0,Je.Z)(),insertionPoint:void 0}));Zn(v);const _=Rn(v),b=(0,e.useCallback)(L=>{if(!v||!L)return;l(Zt({...(0,Je.Z)(),insertionPoint:v.querySelector("head")||void 0}));let re=L.shadowRoot;re||(re=L.attachShadow({mode:"open"})),re.replaceChildren(v),typeof i=="function"&&i(re)},[v,i]);return e.createElement(e.Fragment,null,_&&e.createElement(ae.Ex,null),e.createElement(et.ZP,{jss:o,sheetsManager:new Map},e.createElement("div",{ref:b,"data-testid":"techdocs-native-shadowroot"}),u))},Vn=()=>{const{shadowRoot:v}=Ln();return v},cr=v=>{const i=Vn();return i?v.map(u=>i==null?void 0:i.querySelectorAll(u)).filter(u=>u.length).map(u=>Array.from(u)).flat():[]},ur=v=>v.toString()&&v.rangeCount&&v.getRangeAt(0).getBoundingClientRect().top,Z=(v=0)=>{const i=Vn(),[u,o]=(0,e.useState)(null),l=(0,e.useMemo)(()=>ke()(()=>{const _=i,b=_.getSelection?_.getSelection():document.getSelection();b&&ur(b)?o(b):o(null)},v),[i,o,v]);return(0,e.useEffect)(()=>(window.document.addEventListener("selectionchange",l),()=>window.document.removeEventListener("selectionchange",l)),[l]),u}},86164:function(Mt,g,t){t.d(g,{D:function(){return on},E:function(){return bt},T:function(){return Bn},a:function(){return B},b:function(){return s},c:function(){return H},e:function(){return Pn},g:function(){return Wn},p:function(){return ht},t:function(){return rt}});var e=t(30705),d=t(32272),E=t(76372),f=t.n(E),r=t(2784),c=t(73557),S=t(74163),O=t(64279),h=t(77446),R=t(49558),M=t(79692),z=t(49378),K=t(38402),j=t(86136),ie=t(85256),w=t(27556),D=t(12420),P=t(60905),$=t(90436),U=t(61837),I=t(77277),m=t(4190),x=t(4614),W=t(41128),Ee=t(60364),Be=t(15459),Ve=t(80030),qe=t(72379),Et=t(41547),at=t(41156),Pt=t(8560),At=t(15223),q=t(95544),rn=t(48348),ct=t(94339),xe=t(16111),oe=t(24579),Ue=t(14503),de=t(92573),p=t(99688),G=t(98069),ye=t(87685),nt=t(49462),be=t(35368),je=t.n(be),ft=t(1854),F=t(67097),N=t(28316),_e=t(82717),ze=t.n(_e),dt=t(44882),St=t(18671),Bt=t(73250),Lt=t(73495),Re=t(34520),_t=t(47603),Ct=t(95074),Qt=t(76635),st=t.n(Qt),me=t(39981),ce=t(2337),we=t(11640),se=t(28347);const Te=(0,e.T0)({id:"plugin.techdocs.storageservice"}),Ae=(0,e.T0)({id:"plugin.techdocs.service"});class Ne{constructor(he){this.configApi=he.configApi,this.discoveryApi=he.discoveryApi,this.fetchApi=he.fetchApi}async getApiOrigin(){return await this.discoveryApi.getBaseUrl("techdocs")}async getTechDocsMetadata(he){const{kind:Ie,namespace:Qe,name:Rt}=he,Kt=`${await this.getApiOrigin()}/metadata/techdocs/${Qe}/${Ie}/${Rt}`,an=await this.fetchApi.fetch(`${Kt}`);if(!an.ok)throw await d.VL.fromResponse(an);return await an.json()}async getEntityMetadata(he){const{kind:Ie,namespace:Qe,name:Rt}=he,Kt=`${await this.getApiOrigin()}/metadata/entity/${Qe}/${Ie}/${Rt}`,an=await this.fetchApi.fetch(`${Kt}`);if(!an.ok)throw await d.VL.fromResponse(an);return await an.json()}}class Q{constructor(he){this.configApi=he.configApi,this.discoveryApi=he.discoveryApi,this.identityApi=he.identityApi,this.fetchApi=he.fetchApi}async getApiOrigin(){return await this.discoveryApi.getBaseUrl("techdocs")}async getStorageUrl(){var he;return(he=this.configApi.getOptionalString("techdocs.storageUrl"))!=null?he:`${await this.discoveryApi.getBaseUrl("techdocs")}/static/docs`}async getBuilder(){return this.configApi.getString("techdocs.builder")}async getEntityDocs(he,Ie){const{kind:Qe,namespace:Rt,name:Wt}=he,an=`${await this.getStorageUrl()}/${Rt}/${Qe}/${Wt}/${Ie}`,bn=await this.fetchApi.fetch(`${an.endsWith("/")?an:`${an}/`}index.html`);let pn="";switch(bn.status){case 404:throw pn="Page not found. ",Ie||(pn+="This could be because there is no index.md file in the root of the docs directory of this repository."),new d.dR(pn);case 500:throw pn="Could not generate documentation or an error in the TechDocs backend. ",new Error(pn)}return bn.text()}async syncEntityDocs(he,Ie=()=>{}){const{kind:Qe,namespace:Rt,name:Wt}=he,an=`${await this.getApiOrigin()}/sync/${Rt}/${Qe}/${Wt}`,{token:bn}=await this.identityApi.getCredentials();return new Promise((pn,Un)=>{const Cn=new E.EventSourcePolyfill(an,{withCredentials:!0,headers:bn?{Authorization:`Bearer ${bn}`}:{}});Cn.addEventListener("log",wn=>{wn.data&&Ie(JSON.parse(wn.data))}),Cn.addEventListener("finish",wn=>{let er=!1;wn.data&&({updated:er}=JSON.parse(wn.data)),pn(er?"updated":"cached")}),Cn.onerror=wn=>{switch(Cn.close(),wn.status){case 404:Un(new d.dR(wn.message));return;default:Un(new Error(wn.data));return}}})}async getBaseUrl(he,Ie,Qe){const{kind:Rt,namespace:Wt,name:Kt}=Ie,bn=`${await this.getApiOrigin()}/static/docs/${Wt}/${Rt}/${Kt}/${Qe}`;return new URL(he,bn.endsWith("/")?bn:`${bn}/`).toString()}}function T({contentLoading:J,content:he,activeSyncState:Ie}){return J||Ie==="BUILD_READY_RELOAD"||!he&&Ie==="CHECKING"?"CHECKING":!he&&Ie==="BUILDING"?"INITIAL_BUILD":he?Ie==="BUILDING"?"CONTENT_STALE_REFRESHING":Ie==="BUILD_READY"?"CONTENT_STALE_READY":Ie==="ERROR"?"CONTENT_STALE_ERROR":"CONTENT_FRESH":"CONTENT_NOT_FOUND"}function X(J,he){const Ie={...J};switch(he.type){case"sync":he.state==="CHECKING"&&(Ie.buildLog=[]),Ie.activeSyncState=he.state,Ie.syncError=he.syncError;break;case"contentLoading":Ie.contentLoading=!0,Ie.contentError=void 0;break;case"content":typeof he.path=="string"&&(Ie.path=he.path),Ie.contentLoading=!1,Ie.content=he.content,Ie.contentError=he.contentError;break;case"buildLog":Ie.buildLog=Ie.buildLog.concat(he.log);break;default:throw new Error}return["BUILD_READY","BUILD_READY_RELOAD"].includes(Ie.activeSyncState)&&["contentLoading","content"].includes(he.type)&&(Ie.activeSyncState="UP_TO_DATE",Ie.buildLog=[]),Ie}function ne(J,he,Ie,Qe){var Rt,Wt;const[Kt,an]=(0,r.useReducer)(X,{activeSyncState:"CHECKING",path:Qe,contentLoading:!0,buildLog:[]}),bn=(0,e.h_)(S.Dl),{retry:pn}=(0,h.Z)(async()=>{an({type:"contentLoading"});try{const wn=await bn.getEntityDocs({kind:J,namespace:he,name:Ie},Qe);return an({type:"content",content:wn,path:Qe}),wn}catch(wn){an({type:"content",contentError:wn,path:Qe})}},[bn,J,he,Ie,Qe]),Un=(0,r.useRef)({content:void 0,reload:()=>{}});return Un.current={content:Kt.content,reload:pn},(0,O.default)(async()=>{an({type:"sync",state:"CHECKING"});const wn=setTimeout(()=>{an({type:"sync",state:"BUILDING"})},1e3);try{switch(await bn.syncEntityDocs({kind:J,namespace:he,name:Ie},lr=>{an({type:"buildLog",log:lr})})){case"updated":Un.current.content?an({type:"sync",state:"BUILD_READY"}):(Un.current.reload(),an({type:"sync",state:"BUILD_READY_RELOAD"}));break;case"cached":an({type:"sync",state:"UP_TO_DATE"});break;default:an({type:"sync",state:"ERROR",syncError:new Error("Unexpected return state")});break}}catch(er){an({type:"sync",state:"ERROR",syncError:er})}finally{clearTimeout(wn)}},[J,Ie,he,bn,an,Un]),{state:(0,r.useMemo)(()=>T({activeSyncState:Kt.activeSyncState,contentLoading:Kt.contentLoading,content:Kt.content}),[Kt.activeSyncState,Kt.content,Kt.contentLoading]),contentReload:pn,path:Kt.path,content:Kt.content,contentErrorMessage:(Rt=Kt.contentError)==null?void 0:Rt.toString(),syncErrorMessage:(Wt=Kt.syncError)==null?void 0:Wt.toString(),buildLog:Kt.buildLog}}const fe=(0,r.createContext)({}),te=()=>(0,r.useContext)(fe),ge=({children:J})=>{const{"*":he=""}=(0,c.UO)(),{entityRef:Ie}=(0,S.x1)(),{kind:Qe,namespace:Rt,name:Wt}=Ie,Kt=ne(Qe,Rt,Wt,he);return r.createElement(fe.Provider,{value:Kt},J instanceof Function?J(Kt):J)},He=J=>he=>r.createElement(ge,null,r.createElement(J,{...he})),it=(0,M.Z)({flexContainer:{flexWrap:"wrap"},itemText:{width:"100%",marginBottom:"1rem"}}),ht=J=>{const{result:he,highlight:Ie,rank:Qe,lineClamp:Rt=5,asListItem:Wt=!0,asLink:Kt=!0,title:an,icon:bn}=J,pn=it(),Un=(0,e.z$)(),Cn=()=>{Un.captureEvent("discover",he.title,{attributes:{to:he.location},value:Qe})},wn=()=>{const Xn=Ie!=null&&Ie.fields.title?r.createElement(de.FA,{text:Ie.fields.title,preTag:Ie.preTag,postTag:Ie.postTag}):he.title,Pr=Ie!=null&&Ie.fields.entityTitle?r.createElement(de.FA,{text:Ie.fields.entityTitle,preTag:Ie.preTag,postTag:Ie.postTag}):he.entityTitle,tr=Ie!=null&&Ie.fields.name?r.createElement(de.FA,{text:Ie.fields.name,preTag:Ie.preTag,postTag:Ie.postTag}):he.name;return r.createElement(z.Z,{className:pn.itemText,primaryTypographyProps:{variant:"h6"},primary:an||r.createElement(r.Fragment,null,Xn," | ",Pr!=null?Pr:tr," docs"),secondary:r.createElement("span",{style:{display:"-webkit-box",WebkitBoxOrient:"vertical",WebkitLineClamp:Rt,overflow:"hidden"}},Ie!=null&&Ie.fields.text?r.createElement(de.FA,{text:Ie.fields.text,preTag:Ie.preTag,postTag:Ie.postTag}):he.text)})},er=({children:Xn})=>Kt?r.createElement(R.rU,{noTrack:!0,to:he.location,onClick:Cn},Xn):r.createElement(r.Fragment,null,Xn),lr=({children:Xn})=>Wt?r.createElement(r.Fragment,null,r.createElement(K.Z,{alignItems:"flex-start"},bn&&r.createElement(j.Z,null,bn),r.createElement("div",{className:pn.flexContainer},Xn)),r.createElement(ie.Z,{component:"li"})):r.createElement(r.Fragment,null,Xn);return r.createElement(er,null,r.createElement(lr,null,r.createElement(wn,null)))},ve=(0,M.Z)(J=>({root:{width:"100%"},bar:{padding:J.spacing(1)}})),Fe=J=>J==null?void 0:J.document,mt=J=>{const{entityId:he,entityTitle:Ie,debounceTime:Qe=150}=J,[Rt,Wt]=(0,r.useState)(!1),Kt=(0,c.s0)(),{setFilters:an,result:{loading:bn,value:pn}}=(0,de.Rx)(),Un=ve(),[Cn,wn]=(0,r.useState)([]);(0,r.useEffect)(()=>{let tr=!0;if(tr&&pn){const Jn=pn.results.slice(0,10);wn(Jn)}return()=>{tr=!1}},[bn,pn]);const{kind:er,name:lr,namespace:Xn}=he;(0,r.useEffect)(()=>{an(tr=>({...tr,kind:er,namespace:Xn,name:lr}))},[er,Xn,lr,an]);const Pr=(tr,Jn)=>{if(Fe(Jn)){const{location:rr}=Jn.document;Kt(rr)}};return r.createElement(w.Z,{className:Un.bar,variant:"outlined"},r.createElement(de.qO,{classes:{root:Un.root},"data-testid":"techdocs-search-bar",size:"small",open:Rt,getOptionLabel:()=>"",filterOptions:tr=>tr,onClose:()=>{Wt(!1)},onFocus:()=>{Wt(!0)},onChange:Pr,blurOnSelect:!0,noOptionsText:"No results found",value:null,options:Cn,renderOption:({document:tr,highlight:Jn})=>r.createElement(ht,{result:tr,lineClamp:3,asListItem:!1,asLink:!1,title:tr.title,highlight:Jn}),loading:bn,inputDebounceTime:Qe,inputPlaceholder:`Search ${Ie||he.name} docs`,freeSolo:!1}))},$t=J=>{const he={term:"",types:["techdocs"],pageCursor:"",filters:J.entityId};return r.createElement(de.Nd,{initialState:he},r.createElement(mt,{...J}))},Zt=(0,M.Z)(J=>(0,D.Z)({paper:{width:"100%",[J.breakpoints.up("sm")]:{width:"75%"},[J.breakpoints.up("md")]:{width:"50%"},padding:J.spacing(2.5)},root:{height:"100%",overflow:"hidden"},logs:{background:J.palette.background.default}})),Gt=({buildLog:J,onClose:he})=>{const Ie=Zt(),Qe=J.length===0?"Waiting for logs...":J.join(`
`);return r.createElement(P.Z,{container:!0,direction:"column",className:Ie.root,spacing:0,wrap:"nowrap"},r.createElement(P.Z,{item:!0,container:!0,justifyContent:"space-between",alignItems:"center",spacing:0,wrap:"nowrap"},r.createElement($.Z,{variant:"h5"},"Build Details"),r.createElement(U.Z,{key:"dismiss",title:"Close the drawer",onClick:he,color:"inherit"},r.createElement(ye.Z,null))),r.createElement(R.nU,{text:Qe,classes:{root:Ie.logs}}))},Jt=({buildLog:J})=>{const he=Zt(),[Ie,Qe]=(0,r.useState)(!1);return r.createElement(r.Fragment,null,r.createElement(I.Z,{color:"inherit",onClick:()=>Qe(!0)},"Show Build Logs"),r.createElement(m.ZP,{classes:{paper:he.paper},anchor:"right",open:Ie,onClose:()=>Qe(!1)},r.createElement(Gt,{buildLog:J,onClose:()=>Qe(!1)})))},xt=({errorMessage:J})=>{const he=(0,e.h_)(e.Ds).getOptionalString("techdocs.builder");let Ie="";return he!=="local"&&(Ie="Note that techdocs.builder is not set to 'local' in your config, which means this Backstage app will not generate docs if they are not found. Make sure the project's docs are generated and published by some external process (e.g. CI/CD pipeline). Or change techdocs.builder to 'local' to generate docs from this Backstage instance."),r.createElement(R.mf,{status:"404",statusMessage:J||"Documentation not found",additionalInfo:Ie})},sn=(0,M.Z)(J=>({root:{marginBottom:J.spacing(2)},message:{wordBreak:"break-word",overflowWrap:"anywhere"}})),De=()=>{let J=null;const he=sn(),{state:Ie,contentReload:Qe,contentErrorMessage:Rt,syncErrorMessage:Wt,buildLog:Kt}=te();return Ie==="INITIAL_BUILD"&&(J=r.createElement(p.Z,{classes:{root:he.root},variant:"outlined",severity:"info",icon:r.createElement(x.Z,{size:"24px"}),action:r.createElement(Jt,{buildLog:Kt})},"Documentation is accessed for the first time and is being prepared. The subsequent loads are much faster.")),Ie==="CONTENT_STALE_REFRESHING"&&(J=r.createElement(p.Z,{variant:"outlined",severity:"info",icon:r.createElement(x.Z,{size:"24px"}),action:r.createElement(Jt,{buildLog:Kt}),classes:{root:he.root}},"A newer version of this documentation is being prepared and will be available shortly.")),Ie==="CONTENT_STALE_READY"&&(J=r.createElement(p.Z,{variant:"outlined",severity:"success",action:r.createElement(I.Z,{color:"inherit",onClick:()=>Qe()},"Refresh"),classes:{root:he.root}},"A newer version of this documentation is now available, please refresh to view.")),Ie==="CONTENT_STALE_ERROR"&&(J=r.createElement(p.Z,{variant:"outlined",severity:"error",action:r.createElement(Jt,{buildLog:Kt}),classes:{root:he.root,message:he.message}},"Building a newer version of this documentation failed."," ",Wt)),Ie==="CONTENT_NOT_FOUND"&&(J=r.createElement(r.Fragment,null,Wt&&r.createElement(p.Z,{variant:"outlined",severity:"error",action:r.createElement(Jt,{buildLog:Kt}),classes:{root:he.root,message:he.message}},"Building a newer version of this documentation failed."," ",Wt),r.createElement(xt,{errorMessage:Rt}))),J},Je=/main\.[A-Fa-f0-9]{8}\.min\.css$/,et=/^https:\/\/fonts\.googleapis\.com/,ae=/^https:\/\/fonts\.gstatic\.com/,pe=J=>J.nodeName==="LINK",ke=J=>{const he=(J==null?void 0:J.getAttribute("href"))||"",Ie=he.match(Je),Qe=he.match(et),Rt=he.match(ae);return Ie||Qe||Rt},Ze=J=>(pe(J)&&!ke(J)&&J.remove(),J),Se=J=>J.nodeName==="IFRAME",pt=(J,he)=>{const Ie=J.getAttribute("src")||"";try{const{host:Qe}=new URL(Ie);return he.includes(Qe)}catch{return!1}},vt=J=>he=>(Se(he)&&!pt(he,J)&&he.remove(),he),zt=()=>{const J=(0,e.h_)(e.Ds);return(0,r.useMemo)(()=>J.getOptionalConfig("techdocs.sanitizer"),[J])},Tt=()=>{const J=zt();return(0,r.useCallback)(async he=>{const Ie=J==null?void 0:J.getOptionalStringArray("allowedIframeHosts");je().addHook("beforeSanitizeElements",Ze);const Qe=["link"];return Ie&&(Qe.push("iframe"),je().addHook("beforeSanitizeElements",vt(Ie))),je().sanitize(he.innerHTML,{ADD_TAGS:Qe,FORBID_TAGS:["style"],WHOLE_DOCUMENT:!0,RETURN_DOM:!0})},[J])};var It=({theme:J})=>`
/*==================  Variables  ==================*/
/*
  As the MkDocs output is rendered in shadow DOM, the CSS variable definitions on the root selector are not applied. Instead, they have to be applied on :host.
  As there is no way to transform the served main*.css yet (for example in the backend), we have to copy from main*.css and modify them.
*/

:host {
  /* FONT */
  --md-default-fg-color: ${J.palette.text.primary};
  --md-default-fg-color--light: ${J.palette.text.secondary};
  --md-default-fg-color--lighter: ${(0,W.$n)(J.palette.text.secondary,.7)};
  --md-default-fg-color--lightest: ${(0,W.$n)(J.palette.text.secondary,.3)};

  /* BACKGROUND */
  --md-default-bg-color:${J.palette.background.default};
  --md-default-bg-color--light: ${J.palette.background.paper};
  --md-default-bg-color--lighter: ${(0,W.$n)(J.palette.background.paper,.7)};
  --md-default-bg-color--lightest: ${(0,W.$n)(J.palette.background.paper,.3)};

  /* PRIMARY */
  --md-primary-fg-color: ${J.palette.primary.main};
  --md-primary-fg-color--light: ${J.palette.primary.light};
  --md-primary-fg-color--dark: ${J.palette.primary.dark};
  --md-primary-bg-color: ${J.palette.primary.contrastText};
  --md-primary-bg-color--light: ${(0,W.$n)(J.palette.primary.contrastText,.7)};

  /* ACCENT */
  --md-accent-fg-color: var(--md-primary-fg-color);

  /* SHADOW */
  --md-shadow-z1: ${J.shadows[1]};
  --md-shadow-z2: ${J.shadows[2]};
  --md-shadow-z3: ${J.shadows[3]};

  /* EXTENSIONS */
  --md-admonition-fg-color: var(--md-default-fg-color);
  --md-admonition-bg-color: var(--md-default-bg-color);
  /* Admonitions and others are using SVG masks to define icons. These masks are defined as CSS variables. */
  --md-admonition-icon--note: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>');
  --md-admonition-icon--abstract: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 5h16v2H4V5m0 4h16v2H4V9m0 4h16v2H4v-2m0 4h10v2H4v-2z"/></svg>');
  --md-admonition-icon--info: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 9h-2V7h2m0 10h-2v-6h2m-1-9A10 10 0 002 12a10 10 0 0010 10 10 10 0 0010-10A10 10 0 0012 2z"/></svg>');
  --md-admonition-icon--tip: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17.55 11.2c-.23-.3-.5-.56-.76-.82-.65-.6-1.4-1.03-2.03-1.66C13.3 7.26 13 4.85 13.91 3c-.91.23-1.75.75-2.45 1.32-2.54 2.08-3.54 5.75-2.34 8.9.04.1.08.2.08.33 0 .22-.15.42-.35.5-.22.1-.46.04-.64-.12a.83.83 0 01-.15-.17c-1.1-1.43-1.28-3.48-.53-5.12C5.89 10 5 12.3 5.14 14.47c.04.5.1 1 .27 1.5.14.6.4 1.2.72 1.73 1.04 1.73 2.87 2.97 4.84 3.22 2.1.27 4.35-.12 5.96-1.6 1.8-1.66 2.45-4.32 1.5-6.6l-.13-.26c-.2-.46-.47-.87-.8-1.25l.05-.01m-3.1 6.3c-.28.24-.73.5-1.08.6-1.1.4-2.2-.16-2.87-.82 1.19-.28 1.89-1.16 2.09-2.05.17-.8-.14-1.46-.27-2.23-.12-.74-.1-1.37.18-2.06.17.38.37.76.6 1.06.76 1 1.95 1.44 2.2 2.8.04.14.06.28.06.43.03.82-.32 1.72-.92 2.27h.01z"/></svg>');
  --md-admonition-icon--success: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10 10-4.5 10-10S17.5 2 12 2m-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/></svg>');
  --md-admonition-icon--question: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M15.07 11.25l-.9.92C13.45 12.89 13 13.5 13 15h-2v-.5c0-1.11.45-2.11 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41a2 2 0 00-2-2 2 2 0 00-2 2H8a4 4 0 014-4 4 4 0 014 4 3.2 3.2 0 01-.93 2.25M13 19h-2v-2h2M12 2A10 10 0 002 12a10 10 0 0010 10 10 10 0 0010-10c0-5.53-4.5-10-10-10z"/></svg>');
  --md-admonition-icon--warning: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 14h-2v-4h2m0 8h-2v-2h2M1 21h22L12 2 1 21z"/></svg>');
  --md-admonition-icon--failure: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2c5.53 0 10 4.47 10 10s-4.47 10-10 10S2 17.53 2 12 6.47 2 12 2m3.59 5L12 10.59 8.41 7 7 8.41 10.59 12 7 15.59 8.41 17 12 13.41 15.59 17 17 15.59 13.41 12 17 8.41 15.59 7z"/></svg>');
  --md-admonition-icon--danger: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M11.5 20l4.86-9.73H13V4l-5 9.73h3.5V20M12 2c2.75 0 5.1 1 7.05 2.95C21 6.9 22 9.25 22 12s-1 5.1-2.95 7.05C17.1 21 14.75 22 12 22s-5.1-1-7.05-2.95C3 17.1 2 14.75 2 12s1-5.1 2.95-7.05C6.9 3 9.25 2 12 2z"/></svg>');
  --md-admonition-icon--bug: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14 12h-4v-2h4m0 6h-4v-2h4m6-6h-2.81a5.985 5.985 0 00-1.82-1.96L17 4.41 15.59 3l-2.17 2.17a6.002 6.002 0 00-2.83 0L8.41 3 7 4.41l1.62 1.63C7.88 6.55 7.26 7.22 6.81 8H4v2h2.09c-.05.33-.09.66-.09 1v1H4v2h2v1c0 .34.04.67.09 1H4v2h2.81c1.04 1.79 2.97 3 5.19 3s4.15-1.21 5.19-3H20v-2h-2.09c.05-.33.09-.66.09-1v-1h2v-2h-2v-1c0-.34-.04-.67-.09-1H20V8z"/></svg>');
  --md-admonition-icon--example: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M7 13v-2h14v2H7m0 6v-2h14v2H7M7 7V5h14v2H7M3 8V5H2V4h2v4H3m-1 9v-1h3v4H2v-1h2v-.5H3v-1h1V17H2m2.25-7a.75.75 0 01.75.75c0 .2-.08.39-.21.52L3.12 13H5v1H2v-.92L4 11H2v-1h2.25z"/></svg>');
  --md-admonition-icon--quote: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14 17h3l2-4V7h-6v6h3M6 17h3l2-4V7H5v6h3l-2 4z"/></svg>');
  --md-footnotes-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 7v4H5.83l3.58-3.59L8 6l-6 6 6 6 1.41-1.42L5.83 13H21V7h-2z"/></svg>');
  --md-details-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58 13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>');
  --md-tasklist-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"/><path d="M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"/></svg>');
  --md-tasklist-icon--checked: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"/><path d="M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/></svg>');
  --md-nav-icon--prev: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>');
  --md-nav-icon--next: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58 13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>');
  --md-toc-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 9h14V7H3v2m0 4h14v-2H3v2m0 4h14v-2H3v2m16 0h2v-2h-2v2m0-10v2h2V7h-2m0 6h2v-2h-2v2z"/></svg>');
  --md-clipboard-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 21H8V7h11m0-2H8a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h11a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2m-3-4H4a2 2 0 0 0-2 2v14h2V3h12V1z"/></svg>');
  --md-search-result-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h7c-.41-.25-.8-.56-1.14-.9-.33-.33-.61-.7-.86-1.1H6V4h7v5h5v1.18c.71.16 1.39.43 2 .82V8l-6-6m6.31 16.9c1.33-2.11.69-4.9-1.4-6.22-2.11-1.33-4.91-.68-6.22 1.4-1.34 2.11-.69 4.89 1.4 6.22 1.46.93 3.32.93 4.79.02L22 23.39 23.39 22l-3.08-3.1m-3.81.1a2.5 2.5 0 0 1-2.5-2.5 2.5 2.5 0 0 1 2.5-2.5 2.5 2.5 0 0 1 2.5 2.5 2.5 2.5 0 0 1-2.5 2.5z"/></svg>');
  --md-source-forks-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M5 3.25a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0zm0 2.122a2.25 2.25 0 1 0-1.5 0v.878A2.25 2.25 0 0 0 5.75 8.5h1.5v2.128a2.251 2.251 0 1 0 1.5 0V8.5h1.5a2.25 2.25 0 0 0 2.25-2.25v-.878a2.25 2.25 0 1 0-1.5 0v.878a.75.75 0 0 1-.75.75h-4.5A.75.75 0 0 1 5 6.25v-.878zm3.75 7.378a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0zm3-8.75a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5z"/></svg>');
  --md-source-repositories-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M2 2.5A2.5 2.5 0 0 1 4.5 0h8.75a.75.75 0 0 1 .75.75v12.5a.75.75 0 0 1-.75.75h-2.5a.75.75 0 1 1 0-1.5h1.75v-2h-8a1 1 0 0 0-.714 1.7.75.75 0 0 1-1.072 1.05A2.495 2.495 0 0 1 2 11.5v-9zm10.5-1V9h-8c-.356 0-.694.074-1 .208V2.5a1 1 0 0 1 1-1h8zM5 12.25v3.25a.25.25 0 0 0 .4.2l1.45-1.087a.25.25 0 0 1 .3 0L8.6 15.7a.25.25 0 0 0 .4-.2v-3.25a.25.25 0 0 0-.25-.25h-3.5a.25.25 0 0 0-.25.25z"/></svg>');
  --md-source-stars-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8 .25a.75.75 0 0 1 .673.418l1.882 3.815 4.21.612a.75.75 0 0 1 .416 1.279l-3.046 2.97.719 4.192a.75.75 0 0 1-1.088.791L8 12.347l-3.766 1.98a.75.75 0 0 1-1.088-.79l.72-4.194L.818 6.374a.75.75 0 0 1 .416-1.28l4.21-.611L7.327.668A.75.75 0 0 1 8 .25zm0 2.445L6.615 5.5a.75.75 0 0 1-.564.41l-3.097.45 2.24 2.184a.75.75 0 0 1 .216.664l-.528 3.084 2.769-1.456a.75.75 0 0 1 .698 0l2.77 1.456-.53-3.084a.75.75 0 0 1 .216-.664l2.24-2.183-3.096-.45a.75.75 0 0 1-.564-.41L8 2.694v.001z"/></svg>');
  --md-source-version-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M2.5 7.775V2.75a.25.25 0 0 1 .25-.25h5.025a.25.25 0 0 1 .177.073l6.25 6.25a.25.25 0 0 1 0 .354l-5.025 5.025a.25.25 0 0 1-.354 0l-6.25-6.25a.25.25 0 0 1-.073-.177zm-1.5 0V2.75C1 1.784 1.784 1 2.75 1h5.025c.464 0 .91.184 1.238.513l6.25 6.25a1.75 1.75 0 0 1 0 2.474l-5.026 5.026a1.75 1.75 0 0 1-2.474 0l-6.25-6.25A1.75 1.75 0 0 1 1 7.775zM6 5a1 1 0 1 0 0 2 1 1 0 0 0 0-2z"/></svg>');
  --md-version-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!--! Font Awesome Free 6.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="m310.6 246.6-127.1 128c-7.1 6.3-15.3 9.4-23.5 9.4s-16.38-3.125-22.63-9.375l-127.1-128C.224 237.5-2.516 223.7 2.438 211.8S19.07 192 32 192h255.1c12.94 0 24.62 7.781 29.58 19.75s3.12 25.75-6.08 34.85z"/></svg>');
}

:host > * {
  /* CODE */
  --md-code-fg-color: ${J.palette.text.primary};
  --md-code-bg-color: ${J.palette.background.paper};
  --md-code-hl-color: ${(0,W.Fq)(J.palette.warning.main,.5)};
  --md-code-hl-keyword-color: ${J.palette.type==="dark"?J.palette.primary.light:J.palette.primary.dark};
  --md-code-hl-function-color: ${J.palette.type==="dark"?J.palette.secondary.light:J.palette.secondary.dark};
  --md-code-hl-string-color: ${J.palette.type==="dark"?J.palette.success.light:J.palette.success.dark};
  --md-code-hl-number-color: ${J.palette.type==="dark"?J.palette.error.light:J.palette.error.dark};
  --md-code-hl-constant-color: var(--md-code-hl-function-color);
  --md-code-hl-special-color: var(--md-code-hl-function-color);
  --md-code-hl-name-color: var(--md-code-fg-color);
  --md-code-hl-comment-color: var(--md-default-fg-color--light);
  --md-code-hl-generic-color: var(--md-default-fg-color--light);
  --md-code-hl-variable-color: var(--md-default-fg-color--light);
  --md-code-hl-operator-color: var(--md-default-fg-color--light);
  --md-code-hl-punctuation-color: var(--md-default-fg-color--light);

  /* TYPESET */
  --md-typeset-font-size: 1rem;
  --md-typeset-color: var(--md-default-fg-color);
  --md-typeset-a-color: var(--md-accent-fg-color);
  --md-typeset-table-color: ${J.palette.text.primary};
  --md-typeset-del-color: ${J.palette.type==="dark"?(0,W.Fq)(J.palette.error.dark,.5):(0,W.Fq)(J.palette.error.light,.5)};
  --md-typeset-ins-color: ${J.palette.type==="dark"?(0,W.Fq)(J.palette.success.dark,.5):(0,W.Fq)(J.palette.success.light,.5)};
  --md-typeset-mark-color: ${J.palette.type==="dark"?(0,W.Fq)(J.palette.warning.dark,.5):(0,W.Fq)(J.palette.warning.light,.5)};
}

@media screen and (max-width: 76.1875em) {
  :host > * {
    /* TYPESET */
    --md-typeset-font-size: .9rem;
  }
}

@media screen and (max-width: 600px) {
  :host > * {
    /* TYPESET */
    --md-typeset-font-size: .7rem;
  }
}
`,Ut=({theme:J})=>`
/*==================  Reset  ==================*/

body {
  --md-text-color: var(--md-default-fg-color);
  --md-text-link-color: var(--md-accent-fg-color);
  --md-text-font-family: ${J.typography.fontFamily};
  font-family: var(--md-text-font-family);
  background-color: unset;
}
`;const ln="224px";var mn=({theme:J,sidebar:he})=>`
/*==================  Layout  ==================*/

.md-grid {
  max-width: 100%;
  margin: 0;
}

.md-nav {
  font-size: calc(var(--md-typeset-font-size) * 0.9);
}
.md-nav__link {
  display: flex;
  align-items: center;
  justify-content: space-between;
}
.md-nav__icon {
  height: 20px !important;
  width: 20px !important;
  margin-left:${J.spacing(1)}px;
}
.md-nav__icon svg {
  margin: 0;
  width: 20px !important;
  height: 20px !important;
}
.md-nav__icon:after {
  width: 20px !important;
  height: 20px !important;
}

.md-nav__item--active > .md-nav__link, a.md-nav__link--active {
  text-decoration: underline;
  color: var(--md-typeset-a-color);
}

.md-main__inner {
  margin-top: 0;
}

.md-sidebar {
  bottom: 75px;
  position: fixed;
  width: 16rem;
  overflow-y: auto;
  overflow-x: hidden;
  scrollbar-color: rgb(193, 193, 193) #eee;
  scrollbar-width: thin;
}
.md-sidebar .md-sidebar__scrollwrap {
  width: calc(12.1rem);
}
.md-sidebar--secondary {
  right: ${J.spacing(3)}px;
}
.md-sidebar::-webkit-scrollbar {
  width: 5px;
}
.md-sidebar::-webkit-scrollbar-button {
  width: 5px;
  height: 5px;
}
.md-sidebar::-webkit-scrollbar-track {
  background: #eee;
  border: 1 px solid rgb(250, 250, 250);
  box-shadow: 0px 0px 3px #dfdfdf inset;
  border-radius: 3px;
}
.md-sidebar::-webkit-scrollbar-thumb {
  width: 5px;
  background: rgb(193, 193, 193);
  border: transparent;
  border-radius: 3px;
}
.md-sidebar::-webkit-scrollbar-thumb:hover {
  background: rgb(125, 125, 125);
}

.md-content {
  max-width: calc(100% - 16rem * 2);
  margin-left: 16rem;
  margin-bottom: 50px;
}

.md-footer {
  position: fixed;
  bottom: 0px;
}
.md-footer__title {
  background-color: unset;
}
.md-footer-nav__link {
  width: 16rem;
}

.md-dialog {
  background-color: unset;
}

@media screen and (min-width: 76.25em) {
  .md-sidebar {
    height: auto;
  }
}

@media screen and (max-width: 76.1875em) {
  .md-nav {
    transition: none !important;
    background-color: var(--md-default-bg-color)
  }
  .md-nav--primary .md-nav__title {
    cursor: auto;
    color: var(--md-default-fg-color);
    font-weight: 700;
    white-space: normal;
    line-height: 1rem;
    height: auto;
    display: flex;
    flex-flow: column;
    row-gap: 1.6rem;
    padding: 1.2rem .8rem .8rem;
    background-color: var(--md-default-bg-color);
  }
  .md-nav--primary .md-nav__title~.md-nav__list {
    box-shadow: none;
  }
  .md-nav--primary .md-nav__title ~ .md-nav__list > :first-child {
    border-top: none;
  }
  .md-nav--primary .md-nav__title .md-nav__button {
    display: none;
  }
  .md-nav--primary .md-nav__title .md-nav__icon {
    color: var(--md-default-fg-color);
    position: static;
    height: auto;
    margin: 0 0 0 -0.2rem;
  }
  .md-nav--primary > .md-nav__title [for="none"] {
    padding-top: 0;
  }
  .md-nav--primary .md-nav__item {
    border-top: none;
  }
  .md-nav--primary :is(.md-nav__title,.md-nav__item) {
    font-size : var(--md-typeset-font-size);
  }
  .md-nav .md-source {
    display: none;
  }

  .md-sidebar {
    height: 100%;
  }
  .md-sidebar--primary {
    width: 12.1rem !important;
    z-index: 200;
    left: ${he.isPinned?`calc(-12.1rem + ${ln})`:"calc(-12.1rem + 72px)"} !important;
  }
  .md-sidebar--secondary:not([hidden]) {
    display: none;
  }

  .md-content {
    max-width: 100%;
    margin-left: 0;
  }

  .md-header__button {
    margin: 0.4rem 0;
    margin-left: 0.4rem;
    padding: 0;
  }

  .md-overlay {
    left: 0;
  }

  .md-footer {
    position: static;
    padding-left: 0;
  }
  .md-footer-nav__link {
    /* footer links begin to overlap at small sizes without setting width */
    width: 50%;
  }
}

@media screen and (max-width: 600px) {
  .md-sidebar--primary {
    left: -12.1rem !important;
    width: 12.1rem;
  }
}
`;const cn=["h1","h2","h3","h4","h5","h6"];var En=({theme:J})=>`
/*==================  Typeset  ==================*/

.md-typeset {
  font-size: var(--md-typeset-font-size);
}

${cn.reduce((he,Ie)=>{var Qe;const Rt=(Qe=J.typography.htmlFontSize)!=null?Qe:16,Wt=J.typography[Ie],{lineHeight:Kt,fontFamily:an,fontWeight:bn,fontSize:pn}=Wt,Un=Cn=>{let wn=1;return typeof Cn=="number"&&(wn=Cn/Rt*.6),typeof Cn=="string"&&(wn=Cn.replace("rem","")),`calc(${wn} * var(--md-typeset-font-size))`};return he.concat(`
    .md-typeset ${Ie} {
      color: var(--md-default-fg-color);
      line-height: ${Kt};
      font-family: ${an};
      font-weight: ${bn};
      font-size: ${Un(pn)};
    }
  `)},"")}

.md-typeset .md-content__button {
  color: var(--md-default-fg-color);
}

.md-typeset hr {
  border-bottom: 0.05rem dotted ${J.palette.divider};
}

.md-typeset details {
  font-size: var(--md-typeset-font-size) !important;
}
.md-typeset details summary {
  padding-left: 2.5rem !important;
}
.md-typeset details summary:before,
.md-typeset details summary:after {
  top: 50% !important;
  width: 20px !important;
  height: 20px !important;
  transform: rotate(0deg) translateY(-50%) !important;
}
.md-typeset details[open] > summary:after {
  transform: rotate(90deg) translateX(-50%) !important;
}

.md-typeset blockquote {
  color: var(--md-default-fg-color--light);
  border-left: 0.2rem solid var(--md-default-fg-color--light);
}

.md-typeset table:not([class]) {
  font-size: var(--md-typeset-font-size);
  border: 1px solid var(--md-default-fg-color);
  border-bottom: none;
  border-collapse: collapse;
}
.md-typeset table:not([class]) th {
  font-weight: bold;
}
.md-typeset table:not([class]) td, .md-typeset table:not([class]) th {
  border-bottom: 1px solid var(--md-default-fg-color);
}

.md-typeset pre > code::-webkit-scrollbar-thumb {
  background-color: hsla(0, 0%, 0%, 0.32);
}
.md-typeset pre > code::-webkit-scrollbar-thumb:hover {
  background-color: hsla(0, 0%, 0%, 0.87);
}
`,en=()=>`
/*==================  Animations  ==================*/
/*
  Disable CSS animations on link colors as they lead to issues in dark mode.
  The dark mode color theme is applied later and theirfore there is always an animation from light to dark mode when navigation between pages.
*/
.md-dialog, .md-nav__link, .md-footer__link, .md-typeset a, .md-typeset a::before, .md-typeset .headerlink {
  transition: none;
}
`,Sn=({theme:J})=>`
/*==================  Extensions  ==================*/

/* HIGHLIGHT */
.highlight .md-clipboard:after {
  content: unset;
}

.highlight .nx {
  color: ${J.palette.type==="dark"?"#ff53a3":"#ec407a"};
}

/* CODE HILITE */
.codehilite .gd {
  background-color: ${J.palette.type==="dark"?"rgba(248,81,73,0.65)":"#fdd"};
}

.codehilite .gi {
  background-color: ${J.palette.type==="dark"?"rgba(46,160,67,0.65)":"#dfd"};
}

/* TABBED */
.tabbed-set>input:nth-child(1):checked~.tabbed-labels>:nth-child(1),
.tabbed-set>input:nth-child(2):checked~.tabbed-labels>:nth-child(2),
.tabbed-set>input:nth-child(3):checked~.tabbed-labels>:nth-child(3),
.tabbed-set>input:nth-child(4):checked~.tabbed-labels>:nth-child(4),
.tabbed-set>input:nth-child(5):checked~.tabbed-labels>:nth-child(5),
.tabbed-set>input:nth-child(6):checked~.tabbed-labels>:nth-child(6),
.tabbed-set>input:nth-child(7):checked~.tabbed-labels>:nth-child(7),
.tabbed-set>input:nth-child(8):checked~.tabbed-labels>:nth-child(8),
.tabbed-set>input:nth-child(9):checked~.tabbed-labels>:nth-child(9),
.tabbed-set>input:nth-child(10):checked~.tabbed-labels>:nth-child(10),
.tabbed-set>input:nth-child(11):checked~.tabbed-labels>:nth-child(11),
.tabbed-set>input:nth-child(12):checked~.tabbed-labels>:nth-child(12),
.tabbed-set>input:nth-child(13):checked~.tabbed-labels>:nth-child(13),
.tabbed-set>input:nth-child(14):checked~.tabbed-labels>:nth-child(14),
.tabbed-set>input:nth-child(15):checked~.tabbed-labels>:nth-child(15),
.tabbed-set>input:nth-child(16):checked~.tabbed-labels>:nth-child(16),
.tabbed-set>input:nth-child(17):checked~.tabbed-labels>:nth-child(17),
.tabbed-set>input:nth-child(18):checked~.tabbed-labels>:nth-child(18),
.tabbed-set>input:nth-child(19):checked~.tabbed-labels>:nth-child(19),
.tabbed-set>input:nth-child(20):checked~.tabbed-labels>:nth-child(20) {
  color: var(--md-accent-fg-color);
  border-color: var(--md-accent-fg-color);
}

/* TASK-LIST */
.task-list-control .task-list-indicator::before {
  background-color: ${J.palette.action.disabledBackground};
}
.task-list-control [type="checkbox"]:checked + .task-list-indicator:before {
 background-color: ${J.palette.success.main};
}

/* ADMONITION */
.admonition {
  font-size: var(--md-typeset-font-size) !important;
}
.admonition .admonition-title {
  padding-left: 2.5rem !important;
}

.admonition .admonition-title:before {
  top: 50% !important;
  width: 20px !important;
  height: 20px !important;
  transform: translateY(-50%) !important;
}
`;const On=[It,Ut,mn,En,en,Sn],In=()=>(0,R.Pf)(),Ln=()=>{const J=In(),he=(0,Ee.Z)();return(0,r.useMemo)(()=>{const Ie={theme:he,sidebar:J};return On.reduce((Qe,Rt)=>Qe+Rt(Ie),"")},[he,J])},Dn=()=>{const J=Ln();return(0,r.useCallback)(he=>(he.getElementsByTagName("head")[0].insertAdjacentHTML("beforeend",`<style>${J}</style>`),he),[J])},Mn=(J,he,Ie)=>{const Qe=J==="src"&&he.endsWith(".svg"),Rt=!he.match(/^([a-z]*:)?\/\//i),Wt=he.startsWith(Ie);return Qe&&(Rt||Wt)},Zn=({techdocsStorageApi:J,entityId:he,path:Ie})=>async Qe=>{const Rt=await J.getApiOrigin(),Wt=async(Kt,an)=>{for(const bn of Kt)if(bn.hasAttribute(an)){const pn=bn.getAttribute(an);if(!pn)return;const Un=await J.getBaseUrl(pn,he,Ie);if(Mn(an,pn,Rt))try{const wn=await(await fetch(Un,{credentials:"include"})).text();bn.setAttribute(an,`data:image/svg+xml;base64,${btoa(unescape(encodeURIComponent(wn)))}`)}catch{bn.setAttribute("alt",`Error: ${pn}`)}else bn.setAttribute(an,Un)}};return await Promise.all([Wt(Qe.querySelectorAll("img"),"src"),Wt(Qe.querySelectorAll("script"),"src"),Wt(Qe.querySelectorAll("source"),"src"),Wt(Qe.querySelectorAll("link"),"href"),Wt(Qe.querySelectorAll("a[download]"),"href")]),Qe},Rn=J=>he=>{var Ie;const Qe=he.querySelector('[title="Edit this page"]');if(!Qe||!Qe.href)return he;const Rt=new URL(Qe.href),Wt=J.byUrl(Rt);if((Wt==null?void 0:Wt.type)!=="github"&&(Wt==null?void 0:Wt.type)!=="gitlab")return he;const Kt=((Ie=he.querySelector("article>h1"))==null?void 0:Ie.childNodes[0].textContent)||"",an=encodeURIComponent(`Documentation Feedback: ${Kt}`),bn=encodeURIComponent(`Page source:
${Qe.href}

Feedback:`),pn=(Wt==null?void 0:Wt.type)==="github"?(0,ft.Pb)(Rt.href,"blob"):Rt.href,Un=ze()(pn),Cn=`/${Un.organization}/${Un.name}`,wn=Qe.cloneNode();switch(Wt==null?void 0:Wt.type){case"gitlab":wn.href=`${Rt.origin}${Cn}/issues/new?issue[title]=${an}&issue[description]=${bn}`;break;case"github":wn.href=`${Rt.origin}${Cn}/issues/new?title=${an}&body=${bn}`;break;default:return he}return N.render(r.createElement(F.Z),wn),wn.style.paddingLeft="5px",wn.title="Leave feedback for this page",wn.id="git-feedback-link",Qe==null||Qe.insertAdjacentElement("beforebegin",wn),he},$n=()=>J=>{const he=J.querySelector('.md-header label[for="__drawer"]'),Ie=J.querySelector("article");if(!he||!Ie)return J;const Qe=he.cloneNode();return N.render(r.createElement(dt.Z),Qe),Qe.id="toggle-sidebar",Qe.title="Toggle Sidebar",Qe.classList.add("md-content__button"),Qe.style.setProperty("padding","0 0 0 5px"),Qe.style.setProperty("margin","0.4rem 0 0.4rem 0.4rem"),Ie==null||Ie.prepend(Qe),J},Vn=()=>J=>(((Ie,Qe)=>{Array.from(Ie).filter(Rt=>Rt.hasAttribute(Qe)).forEach(Rt=>{const Wt=Rt.getAttribute(Qe);if(Wt){Wt.match(/^https?:\/\//i)&&Rt.setAttribute("target","_blank");try{const Kt=cr(window.location.href);Rt.setAttribute(Qe,new URL(Wt,Kt).toString())}catch{Rt.replaceWith(Rt.textContent||Wt)}}})})(Array.from(J.getElementsByTagName("a")),"href"),J);function cr(J){const he=new URL(J);return!he.pathname.endsWith("/")&&!he.pathname.endsWith(".html")&&(he.pathname+="/"),he.toString()}const ur=({baseUrl:J,onClick:he})=>Ie=>(Array.from(Ie.getElementsByTagName("a")).forEach(Qe=>{Qe.addEventListener("click",Rt=>{const Kt=Qe.getAttribute("href");!Kt||Kt.startsWith(J)&&!Qe.hasAttribute("download")&&(Rt.preventDefault(),he(Rt,Kt))})}),Ie),Z=(0,Be.Z)(J=>({tooltip:{fontSize:"inherit",color:J.palette.text.primary,margin:0,padding:J.spacing(.5),backgroundColor:"transparent",boxShadow:"none"}}))(Ve.ZP),v=()=>r.createElement(qe.Z,null,r.createElement("path",{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"})),i=({text:J})=>{const[he,Ie]=(0,r.useState)(!1),Qe=(0,r.useCallback)(()=>{navigator.clipboard.writeText(J),Ie(!0)},[J]),Rt=(0,r.useCallback)(()=>{Ie(!1)},[Ie]);return r.createElement(Z,{title:"Copied to clipboard",placement:"left",open:he,onClose:Rt,leaveDelay:1e3},r.createElement("button",{className:"md-clipboard md-icon",onClick:Qe},r.createElement(v,null)))},u=J=>he=>{var Ie;const Qe=he.querySelectorAll("pre > code");for(const Rt of Qe){const Wt=Rt.textContent||"",Kt=document.createElement("div");(Ie=Rt==null?void 0:Rt.parentElement)==null||Ie.prepend(Kt),N.render(r.createElement(Et.Z,{theme:J},r.createElement(i,{text:Wt})),Kt)}return he},o=()=>J=>{var he;return(he=J.querySelector(".md-header"))==null||he.remove(),J},l=()=>J=>{var he,Ie;return(he=J.querySelector(".md-footer .md-copyright"))==null||he.remove(),(Ie=J.querySelector(".md-footer-copyright"))==null||Ie.remove(),J},_=({onLoading:J,onLoaded:he})=>Ie=>(J(),Ie.addEventListener(S.Ox,function Qe(){he(),Ie.removeEventListener(S.Ox,Qe)}),Ie),b=()=>J=>(setTimeout(()=>{var he;if(window.location.hash){const Ie=window.location.hash.slice(1);(he=J==null?void 0:J.querySelector(`[id="${Ie}"]`))==null||he.scrollIntoView()}},200),J),L=()=>J=>(setTimeout(()=>{const he=J==null?void 0:J.querySelectorAll("li.md-nav__item--active");he.length!==0&&(he.forEach(Qe=>{const Rt=Qe==null?void 0:Qe.querySelector("input");Rt!=null&&Rt.checked||Rt==null||Rt.click()}),he[he.length-1].scrollIntoView())},200),J),re=async(J,he)=>{let Ie;if(typeof J=="string")Ie=new DOMParser().parseFromString(J,"text/html").documentElement;else if(J instanceof Element)Ie=J;else throw new Error("dom is not a recognized type");for(const Qe of he)Ie=await Qe(Ie);return Ie},Oe="screen and (max-width: 76.1875em)",Le=J=>{const he=(0,c.s0)(),Ie=(0,Ee.Z)(),Qe=(0,at.Z)(Oe),Rt=Tt(),Wt=Dn(),Kt=(0,e.h_)(S.Dl),an=(0,e.h_)(nt.q3),{state:bn,path:pn,content:Un}=te(),[Cn,wn]=(0,r.useState)(null),er=(0,S.ux)(Cn),lr=(0,r.useCallback)(()=>{if(!Cn)return;Cn.querySelectorAll(".md-sidebar").forEach(rr=>{var ee,le,Me;if(Qe)rr.style.top="0px";else{const Ce=document==null?void 0:document.querySelector(".techdocs-reader-page"),Ye=(ee=Ce==null?void 0:Ce.getBoundingClientRect().top)!=null?ee:0;let ut=(le=Cn.getBoundingClientRect().top)!=null?le:0;const lt=Cn.querySelector(".md-container > .md-tabs"),yt=(Me=lt==null?void 0:lt.getBoundingClientRect().height)!=null?Me:0;ut<Ye&&(ut=Ye),rr.style.top=`${Math.max(ut,0)+yt}px`}rr.style.setProperty("opacity","1")})},[Cn,Qe]);(0,r.useEffect)(()=>(window.addEventListener("resize",lr),window.addEventListener("scroll",lr,!0),()=>{window.removeEventListener("resize",lr),window.removeEventListener("scroll",lr,!0)}),[Cn,lr]);const Xn=(0,r.useCallback)(()=>{if(!Cn)return;const Jn=Cn.querySelector(".md-footer");Jn&&(Jn.style.width=`${Cn.getBoundingClientRect().width}px`)},[Cn]);(0,r.useEffect)(()=>(window.addEventListener("resize",Xn),()=>{window.removeEventListener("resize",Xn)}),[Cn,Xn]),(0,r.useEffect)(()=>{er||(Xn(),lr())},[bn,er,Xn,lr]);const Pr=(0,r.useCallback)((Jn,rr)=>re(Jn,[Rt,Zn({techdocsStorageApi:Kt,entityId:J,path:rr}),Vn(),$n(),o(),l(),Rn(an),Wt]),[J,an,Kt,Rt,Wt]),tr=(0,r.useCallback)(async Jn=>re(Jn,[b(),L(),u(Ie),ur({baseUrl:window.location.origin,onClick:(rr,ee)=>{var le;const Me=rr.ctrlKey||rr.metaKey,Ce=new URL(ee);Ce.hash?Me?window.open(`${Ce.pathname}${Ce.hash}`,"_blank"):(he(`${Ce.pathname}${Ce.hash}`),(le=Jn==null?void 0:Jn.querySelector(`[id="${Ce.hash.slice(1)}"]`))==null||le.scrollIntoView()):Me?window.open(Ce.pathname,"_blank"):he(Ce.pathname)}}),_({onLoading:()=>{},onLoaded:()=>{var rr;(rr=Jn.querySelector(".md-nav__title"))==null||rr.removeAttribute("for")}}),_({onLoading:()=>{Array.from(Jn.querySelectorAll(".md-sidebar")).forEach(ee=>{ee.style.setProperty("opacity","0")})},onLoaded:()=>{}})]),[Ie,he]);return(0,r.useEffect)(()=>{if(!Un)return()=>{};let Jn=!0;return Pr(Un,pn).then(async rr=>{if(!(rr!=null&&rr.innerHTML)||!Jn)return;window.scroll({top:0});const ee=await tr(rr);wn(ee)}),()=>{Jn=!1}},[Un,pn,Pr,tr]),Cn},tt=()=>{const J=(0,S.$L)(),{shadowRoot:he}=(0,S.x1)(),Ie=he==null?void 0:he.querySelector('[data-md-component="content"]'),Qe=he==null?void 0:he.querySelector('div[data-md-component="sidebar"][data-md-type="navigation"], div[data-md-component="navigation"]');let Rt=Qe==null?void 0:Qe.querySelector('[data-techdocs-addons-location="primary sidebar"]');Rt||(Rt=document.createElement("div"),Rt.setAttribute("data-techdocs-addons-location","primary sidebar"),Qe==null||Qe.prepend(Rt));const Wt=he==null?void 0:he.querySelector('div[data-md-component="sidebar"][data-md-type="toc"], div[data-md-component="toc"]');let Kt=Wt==null?void 0:Wt.querySelector('[data-techdocs-addons-location="secondary sidebar"]');return Kt||(Kt=document.createElement("div"),Kt.setAttribute("data-techdocs-addons-location","secondary sidebar"),Wt==null||Wt.prepend(Kt)),r.createElement(r.Fragment,null,r.createElement(Pt.Z,{container:Rt},J.renderComponentsByLocation(S.oZ.PrimarySidebar)),r.createElement(Pt.Z,{container:Ie},J.renderComponentsByLocation(S.oZ.Content)),r.createElement(Pt.Z,{container:Kt},J.renderComponentsByLocation(S.oZ.SecondarySidebar)))},Ht=(0,M.Z)({search:{width:"100%","@media (min-width: 76.1875em)":{width:"calc(100% - 34.4rem)",margin:"0 auto"}}}),Dt=He(J=>{var he;const{withSearch:Ie=!0,onReady:Qe}=J,Rt=Ht(),{entityMetadata:{value:Wt,loading:Kt},entityRef:an,setShadowRoot:bn}=(0,S.x1)(),pn=Le(an),Un=(0,r.useCallback)(Cn=>{bn(Cn),Qe instanceof Function&&Qe()},[bn,Qe]);return Kt===!1&&!Wt?r.createElement(R.mf,{status:"404",statusMessage:"PAGE NOT FOUND"}):pn?r.createElement(R.VY,null,r.createElement(P.Z,{container:!0},r.createElement(P.Z,{xs:12,item:!0},r.createElement(De,null)),Ie&&r.createElement(P.Z,{className:Rt.search,xs:"auto",item:!0},r.createElement($t,{entityId:an,entityTitle:(he=Wt==null?void 0:Wt.metadata)==null?void 0:he.title})),r.createElement(P.Z,{xs:12,item:!0},r.createElement(S.VA,{element:pn,onAppend:Un},r.createElement(tt,null))))):r.createElement(R.VY,null,r.createElement(P.Z,{container:!0},r.createElement(P.Z,{xs:12,item:!0},r.createElement(De,null))))}),tn=null,Vt=(0,e.NT)({id:"techdocs:index-page"}),qt=(0,e.NT)({id:"techdocs:reader-page",params:["namespace","kind","name"]}),xn=(0,e.NT)({id:"techdocs:catalog-reader-view"}),_n=r.createElement(G.Z,{animation:"wave",variant:"text",height:40}),nn=J=>{const{children:he}=J,Ie=(0,S.$L)(),Qe=(0,e.h_)(e.Ds),{title:Rt,setTitle:Wt,subtitle:Kt,setSubtitle:an,entityRef:bn,metadata:{value:pn,loading:Un},entityMetadata:{value:Cn,loading:wn}}=(0,S.x1)();(0,r.useEffect)(()=>{!pn||(Wt(pn.site_name),an(()=>{let{site_description:Ce}=pn;return(!Ce||Ce==="None")&&(Ce="Home"),Ce}))},[pn,Wt,an]);const er=Qe.getOptional("app.title")||"Backstage",lr=[Rt,Kt,er].filter(Boolean).join(" | "),{locationMetadata:Xn,spec:Pr}=Cn||{},tr=Pr==null?void 0:Pr.lifecycle,Jn=Cn?(0,Lt.hF)(Cn,Re.S4):[],rr=(0,e.tg)(Vt)(),ee=r.createElement(r.Fragment,null,r.createElement(R.i9,{label:"Component",value:r.createElement(Lt.dx,{color:"inherit",entityRef:bn,title:Cn==null?void 0:Cn.metadata.title,defaultKind:"Component"})}),Jn.length>0&&r.createElement(R.i9,{label:"Owner",value:r.createElement(Lt.rI,{color:"inherit",entityRefs:Jn,defaultKind:"group"})}),tr?r.createElement(R.i9,{label:"Lifecycle",value:tr}):null,Xn&&Xn.type!=="dir"&&Xn.type!=="file"?r.createElement(R.i9,{label:"",value:r.createElement("a",{href:Xn.target,target:"_blank",rel:"noopener noreferrer"},r.createElement(Bt.Z,{style:{marginTop:"-25px",fill:"#fff"}}))}):null);return!wn&&Cn===void 0||!Un&&pn===void 0?null:r.createElement(R.h4,{type:"Documentation",typeLink:rr,title:Rt||_n,subtitle:Kt||_n},r.createElement(St.Z,{titleTemplate:"%s"},r.createElement("title",null,lr)),ee,he,Ie.renderComponentsByLocation(S.oZ.Header))},vn=(0,M.Z)(J=>({root:{gridArea:"pageSubheader",flexDirection:"column",minHeight:"auto",padding:J.spacing(3,3,0)}})),Tn=J=>{const he=vn(),[Ie,Qe]=(0,r.useState)(null),Rt=(0,r.useCallback)(Cn=>{Qe(Cn.currentTarget)},[]),Wt=(0,r.useCallback)(()=>{Qe(null)},[]),{entityMetadata:{value:Kt,loading:an}}=(0,S.x1)(),bn=(0,S.$L)(),pn=bn.renderComponentsByLocation(S.oZ.Subheader),Un=bn.renderComponentsByLocation(S.oZ.Settings);return!pn&&!Un||an===!1&&!Kt?null:r.createElement(At.Z,{classes:he,...J.toolbarProps},r.createElement(q.Z,{display:"flex",justifyContent:"flex-end",width:"100%",flexWrap:"wrap"},pn,Un?r.createElement(r.Fragment,null,r.createElement(Ve.ZP,{title:"Settings"},r.createElement(U.Z,{"aria-controls":"tech-docs-reader-page-settings","aria-haspopup":"true",onClick:Rt},r.createElement(_t.Z,null))),r.createElement(rn.Z,{id:"tech-docs-reader-page-settings",getContentAnchorEl:null,anchorEl:Ie,anchorOrigin:{vertical:"bottom",horizontal:"right"},open:Boolean(Ie),onClose:Wt,keepMounted:!0},Un)):null))},H=({withSearch:J,withHeader:he=!0})=>r.createElement(R.T3,{themeId:"documentation"},he&&r.createElement(nn,null),r.createElement(Tn,null),r.createElement(Dt,{withSearch:J})),s=J=>{const{kind:he,name:Ie,namespace:Qe}=(0,e.Oi)(qt),{children:Rt,entityRef:Wt={kind:he,name:Ie,namespace:Qe}}=J,Kt=(0,c.pC)();if(!Rt){const bn=(Kt?r.Children.toArray(Kt.props.children):[]).find(pn=>{var Un;if((0,e.IY)(pn,S.Zz))return!1;const Cn=(Un=pn==null?void 0:pn.props)==null?void 0:Un.children;return Cn?!r.Children.toArray(Cn).some(wn=>(0,e.IY)(wn,S.Zz)):!0});return r.createElement(S.ZS,{entityRef:Wt},bn||r.createElement(H,null))}return r.createElement(S.ZS,{entityRef:Wt},({metadata:an,entityMetadata:bn,onReady:pn})=>r.createElement("div",{className:"techdocs-reader-page"},r.createElement(R.T3,{themeId:"documentation"},Rt instanceof Function?Rt({entityRef:Wt,techdocsMetadataValue:an.value,entityMetadataValue:bn.value,onReady:pn}):Rt)))};function y(J,he){return he.getOptionalBoolean("techdocs.legacyUseCaseSensitiveTripletPaths")?J:J.toLocaleLowerCase("en-US")}const B=J=>{const{entities:he}=J,Ie=(0,e.tg)(qt),Qe=(0,e.h_)(e.Ds);return he?r.createElement(R.Oh,{"data-testid":"docs-explore"},he!=null&&he.length?he.map((Rt,Wt)=>{var Kt,an;return r.createElement(ct.Z,{key:Wt},r.createElement(xe.Z,null,r.createElement(R.hu,{title:(Kt=Rt.metadata.title)!=null?Kt:Rt.metadata.name})),r.createElement(oe.Z,null,Rt.metadata.description),r.createElement(Ue.Z,null,r.createElement(R.zx,{to:Ie({namespace:y((an=Rt.metadata.namespace)!=null?an:"default",Qe),kind:y(Rt.kind,Qe),name:y(Rt.metadata.name,Qe)}),color:"primary","data-testid":"read_docs"},"Read Docs")))}):null):null},Y=()=>{const{loading:J,error:he,entities:Ie}=useEntityList();return he?React.createElement(WarningPanel,{severity:"error",title:"Could not load available documentation."},React.createElement(CodeSnippet,{language:"text",text:he.toString()})):J||!Ie?React.createElement(Progress,null):(Ie.sort((Qe,Rt)=>{var Wt,Kt;return((Wt=Qe.metadata.title)!=null?Wt:Qe.metadata.name).localeCompare((Kt=Rt.metadata.title)!=null?Kt:Rt.metadata.name)}),React.createElement(B,{entities:Ie}))},Pe=(0,ce.Z)({root:{color:"#f3ba37"}})(we.Z),Xe={createCopyDocsUrlAction(J){return he=>({icon:()=>r.createElement(me.Z,{fontSize:"small"}),tooltip:"Click to copy documentation link to clipboard",onClick:()=>J(`${window.location.origin}${he.resolved.docsUrl}`)})},createStarEntityAction(J,he){return({entity:Ie})=>{const Qe=J(Ie);return{cellStyle:{paddingLeft:"1em"},icon:()=>Qe?r.createElement(Pe,null):r.createElement(se.Z,null),tooltip:Qe?"Remove from favorites":"Add to favorites",onClick:()=>he(Ie)}}}};function ot(J){return J.metadata.title||J.metadata.name}const kt={createNameColumn(){return{title:"Document",field:"entity.metadata.name",highlight:!0,render:J=>r.createElement(R.uw,{value:r.createElement(R.rU,{to:J.resolved.docsUrl},ot(J.entity)),subvalue:J.entity.metadata.description})}},createOwnerColumn(){return{title:"Owner",field:"resolved.ownedByRelationsTitle",render:({resolved:J})=>r.createElement(Lt.rI,{entityRefs:J.ownedByRelations,defaultKind:"group"})}},createTypeColumn(){return{title:"Type",field:"entity.spec.type"}}},on=J=>{const{entities:he,title:Ie,loading:Qe,columns:Rt,actions:Wt}=J,[,Kt]=(0,Ct.Z)(),an=(0,e.tg)(qt),bn=(0,e.h_)(e.Ds);if(!he)return null;const pn=he.map(wn=>{var er;const lr=(0,Lt.hF)(wn,Re.S4);return{entity:wn,resolved:{docsUrl:an({namespace:y((er=wn.metadata.namespace)!=null?er:"default",bn),kind:y(wn.kind,bn),name:y(wn.metadata.name,bn)}),ownedByRelations:lr,ownedByRelationsTitle:lr.map(Xn=>(0,Lt.$3)(Xn,{defaultKind:"group"})).join(", ")}}}),Un=[kt.createNameColumn(),kt.createOwnerColumn(),kt.createTypeColumn()],Cn=[Xe.createCopyDocsUrlAction(Kt)];return r.createElement(r.Fragment,null,Qe||pn&&pn.length>0?r.createElement(R.iA,{isLoading:Qe,options:{paging:!0,pageSize:20,search:!0,actionsColumnIndex:-1},data:pn,columns:Rt||Un,actions:Wt||Cn,title:Ie?`${Ie} (${pn.length})`:`All (${pn.length})`}):r.createElement(R.ub,{missing:"data",title:"No documents to show",description:"Create your own document. Check out our Getting Started Information",action:r.createElement(R.zx,{color:"primary",to:"https://backstage.io/docs/features/techdocs/getting-started",variant:"contained"},"DOCS")}))};on.columns=kt,on.actions=Xe;const un=J=>{var he,Ie;const{columns:Qe,actions:Rt}=J,{loading:Wt,error:Kt,entities:an,filters:bn}=(0,Lt.wp)(),{isStarredEntity:pn,toggleStarredEntity:Un}=(0,Lt.CR)(),[,Cn]=(0,Ct.Z)(),wn=(0,Qt.capitalize)((Ie=(he=bn.user)==null?void 0:he.value)!=null?Ie:"all"),er=[Xe.createCopyDocsUrlAction(Cn),Xe.createStarEntityAction(pn,Un)];return Kt?r.createElement(R.GB,{severity:"error",title:"Could not load available documentation."},r.createElement(R.Oi,{language:"text",text:Kt.toString()})):r.createElement(on,{title:wn,entities:an,loading:Wt,actions:Rt||er,columns:Qe})};un.columns=kt,un.actions=Xe;const Bn=J=>{var he;const{children:Ie}=J,Rt=`Documentation available in ${(he=(0,e.h_)(e.Ds).getOptionalString("organization.name"))!=null?he:"Backstage"}`;return r.createElement(R.g9,{title:"Documentation",subtitle:Rt,themeId:"documentation"},Ie)};class An{getCatalogFilters(){return{"metadata.annotations.backstage.io/techdocs-ref":Lt.n3}}}const Nn=()=>{const{updateFilters:J}=(0,Lt.wp)();return(0,r.useEffect)(()=>{J({techdocs:new An})},[J]),null},Gn=J=>{const{initialFilter:he="owned",columns:Ie,actions:Qe}=J;return r.createElement(Bn,null,r.createElement(R.VY,null,r.createElement(R.yW,{title:""},r.createElement(R.qt,null,"Discover documentation in your ecosystem.")),r.createElement(Lt.UO,null,r.createElement(Lt._i,null,r.createElement(Lt._i.Filters,null,r.createElement(Nn,null),r.createElement(Lt.EW,{initialFilter:he}),r.createElement(Lt.dq,null),r.createElement(Lt.xE,null)),r.createElement(Lt._i.Content,null,r.createElement(un,{actions:Qe,columns:Ie}))))))},rt=(0,e.rx)({id:"techdocs",apis:[(0,e.ni)({api:S.Dl,deps:{configApi:e.Ds,discoveryApi:e.NW,identityApi:e.$4,fetchApi:e.gP},factory:({configApi:J,discoveryApi:he,identityApi:Ie,fetchApi:Qe})=>new Q({configApi:J,discoveryApi:he,identityApi:Ie,fetchApi:Qe})}),(0,e.ni)({api:S.gT,deps:{configApi:e.Ds,discoveryApi:e.NW,fetchApi:e.gP},factory:({configApi:J,discoveryApi:he,fetchApi:Ie})=>new Ne({configApi:J,discoveryApi:he,fetchApi:Ie})})],routes:{root:Vt,docRoot:qt,entityContent:xn}}),We=rt.provide((0,e.P4)({name:"TechdocsPage",component:()=>Promise.resolve().then(function(){return jn}).then(J=>J.Router),mountPoint:Vt})),bt=rt.provide((0,e.P4)({name:"EntityTechdocsContent",component:()=>Promise.resolve().then(function(){return jn}).then(J=>J.EmbeddedDocsRouter),mountPoint:xn})),dn=rt.provide((0,e.P4)({name:"TechDocsCustomHome",component:()=>t.e(1118).then(t.bind(t,91118)).then(J=>J.TechDocsCustomHome),mountPoint:Vt})),Pn=rt.provide((0,e.P4)({name:"TechDocsIndexPage",component:()=>Promise.resolve().then(function(){return Er}).then(J=>J.TechDocsIndexPage),mountPoint:Vt})),Wn=rt.provide((0,e.P4)({name:"TechDocsReaderPage",component:()=>t.e(7707).then(t.bind(t,97707)).then(J=>J.TechDocsReaderPage),mountPoint:qt})),Yn=({entity:J})=>{const he=(0,Re.iB)(J);return r.createElement(Wn,{entityRef:he},r.createElement(Tn,null),r.createElement(Dt,{withSearch:!1}))},hr=J=>(0,c.pC)()||r.createElement(Gn,{...J});var Er=Object.freeze({__proto__:null,TechDocsIndexPage:hr});const ir="backstage.io/techdocs-ref";var jn=Object.freeze({__proto__:null,isTechDocsAvailable:J=>{var he,Ie;return Boolean((Ie=(he=J==null?void 0:J.metadata)==null?void 0:he.annotations)==null?void 0:Ie[ir])},Router:()=>r.createElement(c.Z5,null,r.createElement(c.AW,{path:"/",element:r.createElement(hr,null)}),r.createElement(c.AW,{path:"/:namespace/:kind/:name/*",element:r.createElement(s,null)})),EmbeddedDocsRouter:J=>{var he;const{children:Ie}=J,{entity:Qe}=(0,Lt.X2)(),Rt=(0,c.V$)([{path:"/*",element:r.createElement(Yn,{entity:Qe}),children:[{path:"*",element:Ie}]}]);return((he=Qe.metadata.annotations)==null?void 0:he[ir])?Rt:r.createElement(R.sk,{annotation:ir})}})},70557:function(Mt,g,t){t.d(g,{$d:function(){return e.E},I6:function(){return e.g},Jl:function(){return e.e},bf:function(){return e.p},s4:function(){return e.t}});var e=t(86164),d=t(30705),E=t(32272),f=t(76372),r=t.n(f),c=t(2784),S=t(74163),O=t(49558),h=t(92573),R=t(49462),M=t(35368),z=t.n(M),K=t(1854),j=t(28316),ie=t(82717),w=t.n(ie),D=t(18671),P=t(73495),$=t(34520),U=t(76635),I=t.n(U)},43229:function(Mt,g,t){t.d(g,{H2:function(){return G},Zr:function(){return ye},kG:function(){return _t}});var e=t(53907),d=t(32272),E=t(82394),f=t.n(E),r=t(30705),c=t(2784),S=t(47603),O=t(49558),h=t(73557),R=t(90436),M=t(77277),z=t(79692),K=t(43434),j=t(38402),ie=t(86136),w=t(49378),D=t(80030),P=t(60905),$=t(9520),U=t(11776),I=t(82938),m=t(86619),x=t(61837),W=t(48348),Ee=t(12231),Be=t(11640),Ve=t(33375),qe=t(64279),Et=t(71554),at=t(43054),Pt=t(72164),At=t(59324),q=t(13737),rn=t(31168),ct=t(7089);const xe={"Content-Type":"application/json; charset=utf-8",Accept:"application/json"},oe=new Map;class Ue{constructor(te,ge,He,it,ht,ve){this.namespace=te,this.fetchApi=ge,this.discoveryApi=He,this.errorApi=it,this.identityApi=ht,this.fallback=ve,this.subscribers=new Set,this.observables=new Map}static create(te){var ge;return new Ue((ge=te.namespace)!=null?ge:"default",te.fetchApi,te.discoveryApi,te.errorApi,te.identityApi,WebStorage.create({namespace:te.namespace,errorApi:te.errorApi}))}forBucket(te){const ge=`${this.namespace}.${te}`;return oe.has(ge)||oe.set(ge,new Ue(ge,this.fetchApi,this.discoveryApi,this.errorApi,this.identityApi,this.fallback)),oe.get(ge)}async remove(te){const ge=await this.getFetchUrl(te),He=await this.fetchApi.fetch(ge,{method:"DELETE"});if(!He.ok&&He.status!==404)throw await ResponseError.fromResponse(He);this.notifyChanges({key:te,presence:"absent"})}async set(te,ge){if(!await this.isSignedIn()){await this.fallback.set(te,ge),this.notifyChanges({key:te,presence:"present",value:ge});return}const He=await this.getFetchUrl(te),it=await this.fetchApi.fetch(He,{method:"PUT",headers:xe,body:JSON.stringify({value:ge})});if(!it.ok)throw await ResponseError.fromResponse(it);const{value:ht}=await it.json();this.notifyChanges({key:te,value:ht,presence:"present"})}observe$(te){return this.observables.has(te)||this.observables.set(te,new ObservableImpl(ge=>(this.subscribers.add(ge),Promise.resolve().then(()=>this.get(te)).then(He=>ge.next(He)).catch(He=>this.errorApi.post(He)),()=>{this.subscribers.delete(ge)})).filter(({key:ge})=>ge===te)),this.observables.get(te)}snapshot(te){return{key:te,presence:"unknown"}}async get(te){if(!await this.isSignedIn())return this.fallback.snapshot(te);const ge=await this.getFetchUrl(te),He=await this.fetchApi.fetch(ge);if(He.status===404)return{key:te,presence:"absent"};if(!He.ok)throw await ResponseError.fromResponse(He);try{const{value:it}=await He.json(),ht=JSON.parse(JSON.stringify(it),(ve,Fe)=>(typeof Fe=="object"&&Fe!==null&&Object.freeze(Fe),Fe));return{key:te,presence:"present",value:ht}}catch{return{key:te,presence:"absent"}}}async getFetchUrl(te){const ge=await this.discoveryApi.getBaseUrl("user-settings"),He=encodeURIComponent(this.namespace),it=encodeURIComponent(te);return`${ge}/buckets/${He}/keys/${it}`}async notifyChanges(te){for(const ge of this.subscribers)try{ge.next(te)}catch{}}async isSignedIn(){try{const te=await this.identityApi.getCredentials();return!!(te!=null&&te.token)}catch{return!1}}}const de=(0,r.NT)({id:"user-settings"}),G=(0,r.rx)({id:"user-settings",routes:{settingsPage:de}}).provide((0,r.P4)({name:"UserSettingsPage",component:()=>Promise.resolve().then(function(){return ne}).then(fe=>fe.SettingsPage),mountPoint:de})),ye=fe=>{const te=(0,r.tg)(de),ge=fe.icon?fe.icon:S.Z;return c.createElement(O.R6,{text:"Settings",to:te(),icon:ge})},nt=`auth:
  providers:
    google:
      development:
        clientId: \${AUTH_GOOGLE_CLIENT_ID}
        clientSecret: \${AUTH_GOOGLE_CLIENT_SECRET}
`,be=()=>c.createElement(O.ub,{missing:"content",title:"No Authentication Providers",description:"You can add Authentication Providers to Backstage which allows you to use these providers to authenticate yourself.",action:c.createElement(c.Fragment,null,c.createElement(R.Z,{variant:"body1"},"Open ",c.createElement("code",null,"app-config.yaml")," and make the changes as highlighted below:"),c.createElement(O.Oi,{text:nt,language:"yaml",showLineNumbers:!0,highlightedNumbers:[3,4,5,6,7,8],customStyle:{background:"inherit",fontSize:"115%"}}),c.createElement(M.Z,{variant:"contained",color:"primary",href:"https://backstage.io/docs/auth/add-auth-provider"},"Read More"))}),je=(0,z.Z)(fe=>({avatar:{width:({size:te})=>te,height:({size:te})=>te,fontSize:({size:te})=>te*.7,border:`1px solid ${fe.palette.textSubtle}`}})),ft=({size:fe,picture:te})=>{const{iconSize:ge}=O.po,He=je(fe?{size:fe}:{size:ge});return c.createElement(K.Z,{src:te,className:He.avatar})},F=fe=>{const{title:te,description:ge,icon:He,apiRef:it}=fe,ht=(0,r.h_)(it),ve=(0,r.h_)(r.VE),[Fe,mt]=(0,c.useState)(!1),$t={},[Zt,Gt]=(0,c.useState)($t);return(0,c.useEffect)(()=>{let Jt=!1;const xt=ht.sessionState$().subscribe(sn=>{Jt||ht.getProfile({optional:!0}).then(De=>{Jt||(sn===r.sM.SignedIn&&mt(!0),De&&Gt(De))})});return()=>{Jt=!0,xt.unsubscribe()}},[ht]),c.createElement(j.Z,null,c.createElement(ie.Z,null,c.createElement(He,null)),c.createElement(w.Z,{primary:te,secondary:c.createElement(D.ZP,{placement:"top",arrow:!0,title:ge},c.createElement("span",null,c.createElement(P.Z,{container:!0,spacing:6},c.createElement(P.Z,{item:!0},c.createElement(ft,{size:48,picture:Zt.picture})),c.createElement(P.Z,{item:!0,xs:12,sm:!0,container:!0},c.createElement(P.Z,{item:!0,xs:!0,container:!0,direction:"column",spacing:2},c.createElement(P.Z,{item:!0,xs:!0},c.createElement(R.Z,{variant:"subtitle1",color:"textPrimary",gutterBottom:!0},Zt.displayName),c.createElement(R.Z,{variant:"body2",color:"textSecondary"},Zt.email),c.createElement(R.Z,{variant:"body2",color:"textSecondary"},ge))))))),secondaryTypographyProps:{noWrap:!0,style:{width:"80%"}}}),c.createElement($.Z,null,c.createElement(D.ZP,{placement:"top",arrow:!0,title:Fe?`Sign out from ${te}`:`Sign in to ${te}`},c.createElement(M.Z,{variant:"outlined",color:"primary",onClick:()=>{(Fe?ht.signOut():ht.signIn()).catch(xt=>ve.post(xt))}},Fe?"Sign out":"Sign in"))))},N=fe=>{const{configuredProviders:te}=fe;return c.createElement(c.Fragment,null,te.includes("google")&&c.createElement(F,{title:"Google",description:"Provides authentication towards Google APIs and identities",apiRef:r.Kp,icon:Be.Z}),te.includes("microsoft")&&c.createElement(F,{title:"Microsoft",description:"Provides authentication towards Microsoft APIs and identities",apiRef:r.p_,icon:Be.Z}),te.includes("github")&&c.createElement(F,{title:"GitHub",description:"Provides authentication towards GitHub APIs",apiRef:r.F4,icon:Be.Z}),te.includes("gitlab")&&c.createElement(F,{title:"GitLab",description:"Provides authentication towards GitLab APIs",apiRef:r.ux,icon:Be.Z}),te.includes("okta")&&c.createElement(F,{title:"Okta",description:"Provides authentication towards Okta APIs",apiRef:r.D,icon:Be.Z}),te.includes("bitbucket")&&c.createElement(F,{title:"Bitbucket",description:"Provides authentication towards Bitbucket APIs",apiRef:r.bq,icon:Be.Z}),te.includes("onelogin")&&c.createElement(F,{title:"OneLogin",description:"Provides authentication towards OneLogin APIs",apiRef:r.gW,icon:Be.Z}),te.includes("atlassian")&&c.createElement(F,{title:"Atlassian",description:"Provides authentication towards Atlassian APIs",apiRef:r.uB,icon:Be.Z}))},_e=fe=>{const{providerSettings:te}=fe,He=(0,r.h_)(r.Ds).getOptionalConfig("auth.providers"),it=(He==null?void 0:He.keys())||[],ht=te!=null?te:c.createElement(N,{configuredProviders:it});return!te&&!(it!=null&&it.length)?c.createElement(be,null):c.createElement(O.rJ,{title:"Available Providers"},c.createElement(U.Z,{dense:!0},ht))},ze=`import { createPlugin } from '@backstage/core-plugin-api';

export default createPlugin({
  id: 'plugin-name',
  featureFlags: [{ name: 'enable-example-feature' }],
});
`,dt=()=>c.createElement(O.ub,{missing:"content",title:"No Feature Flags",description:"Feature Flags make it possible for plugins to register features in Backstage for users to opt into. You can use this to split out logic in your code for manual A/B testing, etc.",action:c.createElement(c.Fragment,null,c.createElement(R.Z,{variant:"body1"},"An example for how to add a feature flag is highlighted below:"),c.createElement(O.Oi,{text:ze,language:"typescript",showLineNumbers:!0,highlightedNumbers:[6],customStyle:{background:"inherit",fontSize:"115%"}}),c.createElement(M.Z,{variant:"contained",color:"primary",href:"https://backstage.io/docs/api/utility-apis"},"Read More"))}),St=({flag:fe,enabled:te,toggleHandler:ge})=>c.createElement(j.Z,{divider:!0,button:!0,onClick:()=>ge(fe.name)},c.createElement(ie.Z,null,c.createElement(D.ZP,{placement:"top",arrow:!0,title:te?"Disable":"Enable"},c.createElement(I.Z,{color:"primary",checked:te,name:fe.name}))),c.createElement(w.Z,{primary:fe.name,secondary:`Registered in ${fe.pluginId} plugin`})),Bt=()=>{const fe=(0,r.h_)(r.W0),te=fe.getRegisteredFlags(),ge=Object.fromEntries(te.map(({name:xt})=>[xt,fe.isActive(xt)])),[He,it]=(0,c.useState)(ge),[ht,ve]=(0,c.useState)(""),Fe=c.useRef(),mt=(0,c.useCallback)(xt=>{const sn=fe.isActive(xt)?r.CL.None:r.CL.Active;fe.save({states:{[xt]:sn},merge:!0}),it(De=>({...De,[xt]:sn===r.CL.Active}))},[fe]);if(!te.length)return c.createElement(dt,null);const $t=()=>{var xt;ve(""),(xt=Fe==null?void 0:Fe.current)==null||xt.focus()};let Zt=Array.from(te);ht.split(/\s/).map(xt=>xt.trim().toLocaleLowerCase("en-US")).forEach(xt=>Zt=Zt.filter(sn=>sn.name.toLocaleLowerCase("en-US").includes(xt)));const Jt=()=>c.createElement(P.Z,{container:!0,style:{justifyContent:"space-between"}},c.createElement(P.Z,{item:!0,xs:6,md:8},c.createElement(R.Z,{variant:"h5"},"Feature Flags")),te.length>=10&&c.createElement(P.Z,{item:!0,xs:6,md:4},c.createElement(m.Z,{label:"Filter",style:{display:"flex",justifyContent:"flex-end"},inputRef:xt=>xt&&xt.focus(),InputProps:{...ht.length&&{endAdornment:c.createElement(x.Z,{"aria-label":"Clear filter",onClick:$t,edge:"end"},c.createElement(Ve.Z,null))}},onChange:xt=>ve(xt.target.value),value:ht})));return c.createElement(O.rJ,{title:c.createElement(Jt,null)},c.createElement(U.Z,{dense:!0},Zt.map(xt=>{const sn=Boolean(He[xt.name]);return c.createElement(St,{key:xt.name,flag:xt,enabled:sn,toggleHandler:mt})})))},Lt=()=>{var fe;const te=(0,r.h_)(r.$4),ge=(0,r.h_)(r.$v),{value:He,loading:it,error:ht}=(0,qe.default)(async()=>({profile:await te.getProfileInfo(),identity:await te.getBackstageIdentity()}),[]);return(0,c.useEffect)(()=>{ht&&ge.post({message:`Failed to load user identity: ${ht}`,severity:"error"})},[ht,ge]),it||ht?{profile:{},displayName:"",loading:it}:{profile:He.profile,backstageIdentity:He.identity,displayName:(fe=He.profile.displayName)!=null?fe:He.identity.userEntityRef,loading:it}},Re=(0,z.Z)(fe=>({avatar:{width:({size:te})=>te,height:({size:te})=>te,fontSize:({size:te})=>te*.7,border:`1px solid ${fe.palette.textSubtle}`}})),_t=fe=>{const{size:te}=fe,{iconSize:ge}=O.po,He=Re(te?{size:te}:{size:ge}),{profile:it}=Lt();return c.createElement(K.Z,{src:it.picture,className:He.avatar,alt:"Profile picture"})},Ct=()=>{const fe=(0,r.h_)(r.VE),te=(0,r.h_)(r.$4),[ge,He]=c.useState(!1),[it,ht]=c.useState(void 0),ve=mt=>{ht(mt.currentTarget),He(!0)},Fe=()=>{ht(void 0),He(!1)};return c.createElement(c.Fragment,null,c.createElement(x.Z,{"data-testid":"user-settings-menu","aria-label":"more",onClick:ve},c.createElement(at.Z,null)),c.createElement(W.Z,{anchorEl:it,open:ge,onClose:Fe},c.createElement(Ee.Z,{"data-testid":"sign-out",onClick:()=>te.signOut().catch(mt=>fe.post(mt))},c.createElement(ie.Z,null,c.createElement(Et.Z,null)),"Sign Out")))},Qt=()=>{const{profile:fe,displayName:te}=Lt();return c.createElement(O.rJ,{title:"Profile",variant:"gridItem"},c.createElement(P.Z,{container:!0,spacing:6},c.createElement(P.Z,{item:!0},c.createElement(_t,{size:96})),c.createElement(P.Z,{item:!0,xs:12,sm:!0,container:!0},c.createElement(P.Z,{item:!0,xs:!0,container:!0,direction:"column",spacing:2},c.createElement(P.Z,{item:!0,xs:!0},c.createElement(R.Z,{variant:"subtitle1",gutterBottom:!0},te),c.createElement(R.Z,{variant:"body2",color:"textSecondary"},fe.email))),c.createElement(P.Z,{item:!0},c.createElement(Ct,null)))))},st=()=>{const{isPinned:fe,toggleSidebarPinState:te}=(0,O.Pf)();return c.createElement(j.Z,null,c.createElement(w.Z,{primary:"Pin Sidebar",secondary:"Prevent the sidebar from collapsing"}),c.createElement($.Z,null,c.createElement(D.ZP,{placement:"top",arrow:!0,title:`${fe?"Unpin":"Pin"} Sidebar`},c.createElement(I.Z,{color:"primary",checked:fe,onChange:()=>te(),name:"pin",inputProps:{"aria-label":"Pin Sidebar Switch"}}))))},me=({id:fe,activeId:te,icon:ge})=>ge?(0,c.cloneElement)(ge,{color:te===fe?"primary":void 0}):c.createElement(At.Z,{color:te===fe?"primary":void 0}),ce=(0,z.Z)(fe=>({container:{display:"flex",flexWrap:"wrap",width:"100%",justifyContent:"space-between",alignItems:"center",paddingBottom:8,paddingRight:16},list:{width:"initial",[fe.breakpoints.down("xs")]:{width:"100%",padding:"0 0 12px"}},listItemText:{paddingRight:0,paddingLeft:0},listItemSecondaryAction:{position:"relative",transform:"unset",top:"auto",right:"auto",paddingLeft:16,[fe.breakpoints.down("xs")]:{paddingLeft:0}}})),we=({children:fe,title:te,value:ge,...He})=>c.createElement(D.ZP,{placement:"top",arrow:!0,title:te},c.createElement(q.Z,{value:ge,...He},fe)),se=()=>{const fe=ce(),te=(0,r.h_)(r.hg),ge=(0,Pt.Z)(te.activeThemeId$(),te.getActiveThemeId()),He=te.getInstalledThemes(),it=(ht,ve)=>{He.some(Fe=>Fe.id===ve)?te.setActiveThemeId(ve):te.setActiveThemeId(void 0)};return c.createElement(j.Z,{className:fe.list,classes:{container:fe.container}},c.createElement(w.Z,{className:fe.listItemText,primary:"Theme",secondary:"Change the theme mode"}),c.createElement($.Z,{className:fe.listItemSecondaryAction},c.createElement(rn.Z,{exclusive:!0,size:"small",value:ge!=null?ge:"auto",onChange:it},He.map(ht=>{var ve;const Fe=(ve=He.find(mt=>mt.id===ht.id))==null?void 0:ve.icon;return c.createElement(we,{key:ht.id,title:`Select ${ht.title}`,value:ht.id},c.createElement(c.Fragment,null,ht.title,"\xA0",c.createElement(me,{id:ht.id,icon:Fe,activeId:ge})))}),c.createElement(D.ZP,{placement:"top",arrow:!0,title:"Select auto theme"},c.createElement(q.Z,{value:"auto",selected:ge===void 0},"Auto\xA0",c.createElement(At.Z,{color:ge===void 0?"primary":void 0}))))))},Te=()=>{const{isMobile:fe}=(0,O.Pf)();return c.createElement(O.rJ,{title:"Appearance",variant:"gridItem"},c.createElement(U.Z,{dense:!0},c.createElement(se,null),!fe&&c.createElement(st,null)))},Ae=()=>{const{backstageIdentity:fe}=Lt();return c.createElement(O.rJ,{title:"Backstage Identity"},c.createElement(P.Z,{container:!0,spacing:6},c.createElement(P.Z,{item:!0,xs:12,sm:!0,container:!0},c.createElement(P.Z,{item:!0,xs:!0,container:!0,direction:"column",spacing:2},c.createElement(P.Z,{item:!0,xs:!0},c.createElement(R.Z,{variant:"subtitle1",gutterBottom:!0},"User Entity:"," ",c.createElement(ct.Z,{label:fe==null?void 0:fe.userEntityRef,variant:"outlined",size:"small"})),c.createElement(R.Z,{variant:"subtitle1"},"Ownership Entities:"," ",fe==null?void 0:fe.ownershipEntityRefs.map(te=>c.createElement(ct.Z,{label:te,variant:"outlined",size:"small"}))))))))},Ne=()=>c.createElement(P.Z,{container:!0,direction:"row",spacing:3},c.createElement(P.Z,{item:!0,xs:12,md:6},c.createElement(Qt,null)),c.createElement(P.Z,{item:!0,xs:12,md:6},c.createElement(Te,null)),c.createElement(P.Z,{item:!0,xs:12,md:6},c.createElement(Ae,null))),Q="user-settings.tab",T=fe=>c.createElement(c.Fragment,null,fe.children);(0,r.R5)(T,Q,"UserSettingsTab");var ne=Object.freeze({__proto__:null,SettingsPage:fe=>{const{providerSettings:te}=fe,{isMobile:ge}=(0,O.Pf)(),He=(0,h.pC)(),it=(0,r.vJ)(He,ht=>ht.selectByComponentData({key:Q}).getElements());return c.createElement(O.T3,{themeId:"home"},!ge&&c.createElement(O.h4,{title:"Settings"}),c.createElement(O.WD,null,c.createElement(O.WD.Route,{path:"general",title:"General"},c.createElement(Ne,null)),c.createElement(O.WD.Route,{path:"auth-providers",title:"Authentication Providers"},c.createElement(_e,{providerSettings:te})),c.createElement(O.WD.Route,{path:"feature-flags",title:"Feature Flags"},c.createElement(Bt,null)),it.map((ht,ve)=>c.createElement(O.WD.Route,{key:ve,...ht.props},ht))))}})},18473:function(Mt,g,t){t.d(g,{CT:function(){return S},EI:function(){return c},Vt:function(){return O},uW:function(){return r}});var e=t(2784);function d(){return typeof window!="undefined"&&window.Math===Math?window:typeof self!="undefined"&&self.Math===Math?self:Function("return this")()}const E=d(),f=R=>`__@backstage/${R}__`;function r(R,M){const z=f(R);let K=E[z];return K||(K=M(),E[z]=K,K)}function c(R){return Object.freeze(R),{atVersion(M){return R[M]}}}function S(R){return r(R,()=>(0,e.createContext)(void 0))}function O(R){return(0,e.useContext)(S(R))}function h(R){return{set(M){globalThis[`__@backstage/${R}__`]=createContext(c(M))},reset(){delete globalThis[`__@backstage/${R}__`]}}}},85310:function(Mt){Mt.exports=JSON.parse('{"$id":"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#","description":"Meta-schema for $data reference (JSON AnySchema extension proposal)","type":"object","required":["$data"],"properties":{"$data":{"type":"string","anyOf":[{"format":"relative-json-pointer"},{"format":"json-pointer"}]}},"additionalProperties":false}')},51020:function(Mt){Mt.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-07/schema#","$id":"http://json-schema.org/draft-07/schema#","title":"Core schema meta-schema","definitions":{"schemaArray":{"type":"array","minItems":1,"items":{"$ref":"#"}},"nonNegativeInteger":{"type":"integer","minimum":0},"nonNegativeIntegerDefault0":{"allOf":[{"$ref":"#/definitions/nonNegativeInteger"},{"default":0}]},"simpleTypes":{"enum":["array","boolean","integer","null","number","object","string"]},"stringArray":{"type":"array","items":{"type":"string"},"uniqueItems":true,"default":[]}},"type":["object","boolean"],"properties":{"$id":{"type":"string","format":"uri-reference"},"$schema":{"type":"string","format":"uri"},"$ref":{"type":"string","format":"uri-reference"},"$comment":{"type":"string"},"title":{"type":"string"},"description":{"type":"string"},"default":true,"readOnly":{"type":"boolean","default":false},"examples":{"type":"array","items":true},"multipleOf":{"type":"number","exclusiveMinimum":0},"maximum":{"type":"number"},"exclusiveMaximum":{"type":"number"},"minimum":{"type":"number"},"exclusiveMinimum":{"type":"number"},"maxLength":{"$ref":"#/definitions/nonNegativeInteger"},"minLength":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"pattern":{"type":"string","format":"regex"},"additionalItems":{"$ref":"#"},"items":{"anyOf":[{"$ref":"#"},{"$ref":"#/definitions/schemaArray"}],"default":true},"maxItems":{"$ref":"#/definitions/nonNegativeInteger"},"minItems":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"uniqueItems":{"type":"boolean","default":false},"contains":{"$ref":"#"},"maxProperties":{"$ref":"#/definitions/nonNegativeInteger"},"minProperties":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"required":{"$ref":"#/definitions/stringArray"},"additionalProperties":{"$ref":"#"},"definitions":{"type":"object","additionalProperties":{"$ref":"#"},"default":{}},"properties":{"type":"object","additionalProperties":{"$ref":"#"},"default":{}},"patternProperties":{"type":"object","additionalProperties":{"$ref":"#"},"propertyNames":{"format":"regex"},"default":{}},"dependencies":{"type":"object","additionalProperties":{"anyOf":[{"$ref":"#"},{"$ref":"#/definitions/stringArray"}]}},"propertyNames":{"$ref":"#"},"const":true,"enum":{"type":"array","items":true,"minItems":1,"uniqueItems":true},"type":{"anyOf":[{"$ref":"#/definitions/simpleTypes"},{"type":"array","items":{"$ref":"#/definitions/simpleTypes"},"minItems":1,"uniqueItems":true}]},"format":{"type":"string"},"contentMediaType":{"type":"string"},"contentEncoding":{"type":"string"},"if":{"$ref":"#"},"then":{"$ref":"#"},"else":{"$ref":"#"},"allOf":{"$ref":"#/definitions/schemaArray"},"anyOf":{"$ref":"#/definitions/schemaArray"},"oneOf":{"$ref":"#/definitions/schemaArray"},"not":{"$ref":"#"}},"default":true}')}}]);})();

//# sourceMappingURL=module-backstage.500b96d4.js.map