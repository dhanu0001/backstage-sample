"use strict";(()=>{(self.webpackChunkapp=self.webpackChunkapp||[]).push([[9345],{59345:function(Ke,k,n){n.r(k),n.d(k,{CatalogGraphPage:function(){return Le}});var R=n(34520),p=n(49558),I=n(30705),T=n(73495),P=n(95544),A=n(79692),ae=n(42494),W=n(90436),ne=n(20633),le=n(50581),re=n(61837),b=n(5806),$=n(21324),z=n(86619),oe=n(82938),F=n(60905),se=n(27556),ie=n(36444),ce=n(60008),G=n(88013),me=n(13737),e=n(2784),Y=n(73557),v=n(98487),Ee=n(33375),V=n(19996),X=n(25505),j=n(38016),ue=n(64279),_e=n(19126),Q=n.n(_e),J=n(25557),de=n(72779),Be=n.n(de),he=n(14162),Ue=n.n(he);const ve={curveMonotoneX:"Monotone X",curveStepBefore:"Step Before"},ge=["curveMonotoneX","curveStepBefore"],pe=({value:a,onChange:r})=>{const t=(0,e.useCallback)(o=>r(o),[r]);return e.createElement(P.Z,{pb:1,pt:1},e.createElement(p.Ph,{label:"Curve",selected:a,items:ge.map(o=>({label:ve[o],value:o})),onChange:t}))},Me={[v.Nm.LEFT_RIGHT]:"Left to right",[v.Nm.RIGHT_LEFT]:"Right to left",[v.Nm.TOP_BOTTOM]:"Top to bottom",[v.Nm.BOTTOM_TOP]:"Bottom to top"},Oe=({value:a,onChange:r})=>{const t=(0,e.useCallback)(o=>r(o),[r]);return e.createElement(P.Z,{pb:1,pt:1},e.createElement(p.Ph,{label:"Direction",selected:a,items:Object.values(v.Nm).map(o=>({label:Me[o],value:o})),onChange:t}))},Pe=(0,A.Z)({formControl:{width:"100%",maxWidth:300}}),De=({value:a,onChange:r})=>{const t=Pe(),o=(0,e.useCallback)(E=>{const c=Number(E.target.value);r(c<=0?Number.POSITIVE_INFINITY:c)},[r]),s=(0,e.useCallback)(()=>{r(Number.POSITIVE_INFINITY)},[r]);return e.createElement(P.Z,{pb:1,pt:1},e.createElement(ae.Z,{variant:"outlined",className:t.formControl},e.createElement(W.Z,{variant:"button"},"Max Depth"),e.createElement(ne.Z,{type:"number",placeholder:"\u221E Infinite",value:isFinite(a)?a:"",onChange:o,endAdornment:e.createElement(le.Z,{position:"end"},e.createElement(re.Z,{"aria-label":"clear max depth",onClick:s,edge:"end"},e.createElement(Ee.Z,null))),inputProps:{"aria-label":"maxp"},labelWidth:0})))},fe=(0,A.Z)({formControl:{maxWidth:300}}),Ce=({value:a,onChange:r})=>{const t=fe(),o=(0,I.h_)(I.$v),s=(0,I.h_)(T.Ah),{error:E,value:c}=(0,ue.default)(async()=>await s.getEntityFacets({facets:["kind"]}).then(i=>{var u;return((u=i.facets.kind)==null?void 0:u.map(d=>d.value).sort())||[]}));(0,e.useEffect)(()=>{E&&o.post({message:"Failed to load entity kinds",severity:"error"})},[E,o]);const m=(0,e.useMemo)(()=>c&&c.map(i=>i.toLocaleLowerCase("en-US")),[c]),_=(0,e.useCallback)((i,u)=>{r(m&&m.every(d=>u.includes(d))?void 0:u)},[m,r]),h=(0,e.useCallback)(()=>{r(a!=null&&a.length?a:void 0)},[a,r]);return!(c!=null&&c.length)||!(m!=null&&m.length)||E?e.createElement(e.Fragment,null):e.createElement(P.Z,{pb:1,pt:1},e.createElement(W.Z,{variant:"button"},"Kinds"),e.createElement(G.ZP,{className:t.formControl,multiple:!0,limitTags:4,disableCloseOnSelect:!0,"aria-label":"Kinds",options:m,value:a!=null?a:m,getOptionLabel:i=>{var u;return(u=c[m.indexOf(i)])!=null?u:i},onChange:_,onBlur:h,renderOption:(i,{selected:u})=>{var d;return e.createElement(b.Z,{control:e.createElement($.Z,{icon:e.createElement(X.Z,{fontSize:"small"}),checkedIcon:e.createElement(V.Z,{fontSize:"small"}),checked:u}),label:(d=c[m.indexOf(i)])!=null?d:i})},size:"small",popupIcon:e.createElement(j.Z,{"data-testid":"selected-kinds-expand"}),renderInput:i=>e.createElement(z.Z,{...i,variant:"outlined"})}))},ye=(0,A.Z)({formControl:{maxWidth:300}}),Re=({relationPairs:a,value:r,onChange:t})=>{const o=ye(),s=(0,e.useMemo)(()=>a.flat(),[a]),E=(0,e.useCallback)((m,_)=>{t(s.every(h=>_.includes(h))?void 0:_)},[s,t]),c=(0,e.useCallback)(()=>{t(r!=null&&r.length?r:void 0)},[r,t]);return e.createElement(P.Z,{pb:1,pt:1},e.createElement(W.Z,{variant:"button"},"Relations"),e.createElement(G.ZP,{className:o.formControl,multiple:!0,limitTags:4,disableCloseOnSelect:!0,"aria-label":"Relations",options:s,value:r!=null?r:s,onChange:E,onBlur:c,renderOption:(m,{selected:_})=>e.createElement(b.Z,{control:e.createElement($.Z,{icon:e.createElement(X.Z,{fontSize:"small"}),checkedIcon:e.createElement(V.Z,{fontSize:"small"}),checked:_}),label:m}),size:"small",popupIcon:e.createElement(j.Z,{"data-testid":"selected-relations-expand"}),renderInput:m=>e.createElement(z.Z,{...m,variant:"outlined"})}))},Ie=(0,A.Z)({root:{width:"100%",maxWidth:300}}),w=({label:a,value:r,onChange:t})=>{const o=Ie(),s=(0,e.useCallback)(E=>{t(E.target.checked)},[t]);return e.createElement(P.Z,{pb:1,pt:1},e.createElement(b.Z,{control:e.createElement(oe.Z,{checked:r,onChange:s,name:a,color:"primary"}),label:a,className:o.root}))};function Te({initialState:a={}}){const r=(0,Y.TH)(),t=(0,e.useMemo)(()=>Q().parse(r.search,{arrayLimit:0,ignoreQueryPrefix:!0})||{},[r.search]),[o,s]=(0,e.useState)(()=>{var l;return(Array.isArray(t.rootEntityRefs)?t.rootEntityRefs:(l=a==null?void 0:a.rootEntityRefs)!=null?l:[]).map(O=>(0,R.of)(O))}),[E,c]=(0,e.useState)(()=>{var l;return typeof t.maxDepth=="string"?q(t.maxDepth):(l=a==null?void 0:a.maxDepth)!=null?l:Number.POSITIVE_INFINITY}),[m,_]=(0,e.useState)(()=>Array.isArray(t.selectedRelations)?t.selectedRelations:a==null?void 0:a.selectedRelations),[h,i]=(0,e.useState)(()=>{var l;return(l=Array.isArray(t.selectedKinds)?t.selectedKinds:a==null?void 0:a.selectedKinds)==null?void 0:l.map(O=>O.toLocaleLowerCase("en-US"))}),[u,d]=(0,e.useState)(()=>{var l;return typeof t.unidirectional=="string"?t.unidirectional==="true":(l=a==null?void 0:a.unidirectional)!=null?l:!0}),[L,D]=(0,e.useState)(()=>{var l;return typeof t.mergeRelations=="string"?t.mergeRelations==="true":(l=a==null?void 0:a.mergeRelations)!=null?l:!0}),[K,f]=(0,e.useState)(()=>{var l;return typeof t.direction=="string"?t.direction:(l=a==null?void 0:a.direction)!=null?l:v.Nm.LEFT_RIGHT}),[H,N]=(0,e.useState)(()=>{var l;return typeof t.curve=="string"?t.curve:(l=a==null?void 0:a.curve)!=null?l:"curveMonotoneX"}),[B,M]=(0,e.useState)(()=>{var l;return typeof t.showFilters=="string"?t.showFilters==="true":(l=a==null?void 0:a.showFilters)!=null?l:!0}),x=(0,e.useCallback)(()=>M(l=>!l),[M]),U=(0,J.Z)(r.search);(0,e.useEffect)(()=>{r.search!==U&&(Array.isArray(t.rootEntityRefs)&&s(t.rootEntityRefs.map(l=>(0,R.of)(l))),typeof t.maxDepth=="string"&&c(q(t.maxDepth)),Array.isArray(t.selectedKinds)&&i(t.selectedKinds),Array.isArray(t.selectedRelations)&&_(t.selectedRelations),typeof t.unidirectional=="string"&&d(t.unidirectional==="true"),typeof t.mergeRelations=="string"&&D(t.mergeRelations==="true"),typeof t.direction=="string"&&f(t.direction),typeof t.showFilters=="string"&&M(t.showFilters==="true"))},[U,r.search,t,s,c,i,_,d,D,f,M]);const C=(0,J.Z)(o.map(l=>(0,R.eE)(l)));return(0,e.useEffect)(()=>{const l=o.map(Z=>(0,R.eE)(Z)),O=Q().stringify({rootEntityRefs:l,maxDepth:isFinite(E)?E:"\u221E",selectedKinds:h,selectedRelations:m,unidirectional:u,mergeRelations:L,direction:K,showFilters:B},{arrayFormat:"brackets",addQueryPrefix:!0}),g=`${window.location.pathname}${O}`;!C||l.length===C.length&&l.every((Z,S)=>Z===C[S])?window.history.replaceState(null,document.title,g):window.history.pushState(null,document.title,g)},[o,E,h,m,u,L,K,B,C]),{rootEntityNames:o,setRootEntityNames:s,maxDepth:E,setMaxDepth:c,selectedRelations:m,setSelectedRelations:_,selectedKinds:h,setSelectedKinds:i,unidirectional:u,setUnidirectional:d,mergeRelations:L,setMergeRelations:D,direction:K,setDirection:f,curve:H,setCurve:N,showFilters:B,toggleShowFilters:x}}function q(a){return a==="\u221E"?Number.POSITIVE_INFINITY:Number(a)}const Ae=(0,A.Z)(a=>({content:{minHeight:0},container:{height:"100%",maxHeight:"100%",minHeight:0},fullHeight:{maxHeight:"100%",display:"flex",minHeight:0},graphWrapper:{position:"relative",flex:1,minHeight:0,display:"flex"},graph:{flex:1,minHeight:0},legend:{position:"absolute",bottom:0,right:0,padding:a.spacing(1),"& .icon":{verticalAlign:"bottom"}},filters:{display:"grid",gridGap:a.spacing(1),gridAutoRows:"auto",[a.breakpoints.up("lg")]:{display:"block"},[a.breakpoints.only("md")]:{gridTemplateColumns:"repeat(3, 1fr)"},[a.breakpoints.only("sm")]:{gridTemplateColumns:"repeat(2, 1fr)"},[a.breakpoints.down("xs")]:{gridTemplateColumns:"repeat(1, 1fr)"}}})),Le=a=>{const{relationPairs:r=v.vw,initialState:t}=a,o=(0,Y.s0)(),s=Ae(),E=(0,I.tg)(T.wi),{maxDepth:c,setMaxDepth:m,selectedKinds:_,setSelectedKinds:h,selectedRelations:i,setSelectedRelations:u,unidirectional:d,setUnidirectional:L,mergeRelations:D,setMergeRelations:K,direction:f,setDirection:H,curve:N,setCurve:B,rootEntityNames:M,setRootEntityNames:x,showFilters:U,toggleShowFilters:C}=Te({initialState:t}),l=(0,I.z$)(),O=(0,e.useCallback)((g,Z)=>{var S,ee;const y=(0,R.of)(g.id);if(Z.shiftKey){const te=E({kind:y.kind.toLocaleLowerCase("en-US"),namespace:y.namespace.toLocaleLowerCase("en-US"),name:y.name});l.captureEvent("click",(S=g.title)!=null?S:(0,T.$3)(y),{attributes:{to:te}}),o(te)}else l.captureEvent("click",(ee=g.title)!=null?ee:(0,T.$3)(y)),x([y])},[E,o,x,l]);return e.createElement(p.T3,{themeId:"home"},e.createElement(p.h4,{title:"Catalog Graph",subtitle:M.map(g=>(0,T.$3)(g)).join(", ")}),e.createElement(p.VY,{stretch:!0,className:s.content},e.createElement(p.yW,{titleComponent:e.createElement(me.Z,{value:"show filters",selected:U,onChange:()=>C()},e.createElement(ie.Z,null)," Filters")},e.createElement(p.qt,null,"Start tracking your component in by adding it to the software catalog.")),e.createElement(F.Z,{container:!0,alignItems:"stretch",className:s.container},U&&e.createElement(F.Z,{item:!0,xs:12,lg:2,className:s.filters},e.createElement(De,{value:c,onChange:m}),e.createElement(Ce,{value:_,onChange:h}),e.createElement(Re,{value:i,onChange:u,relationPairs:r}),e.createElement(Oe,{value:f,onChange:H}),e.createElement(pe,{value:N,onChange:B}),e.createElement(w,{value:d,onChange:L,label:"Simplified"}),e.createElement(w,{value:D,onChange:K,label:"Merge Relations"})),e.createElement(F.Z,{item:!0,xs:!0,className:s.fullHeight},e.createElement(se.Z,{className:s.graphWrapper},e.createElement(W.Z,{variant:"caption",color:"textSecondary",display:"block",className:s.legend},e.createElement(ce.Z,{className:"icon"})," Use pinch & zoom to move around the diagram. Click to change active node, shift click to navigate to entity."),e.createElement(v._U,{rootEntityNames:M,maxDepth:c,kinds:_&&_.length>0?_:void 0,relations:i&&i.length>0?i:void 0,mergeRelations:D,unidirectional:d,onNodeClick:O,direction:f,relationPairs:r,className:s.graph,zoom:"enabled",curve:N}))))))}}}]);})();

//# sourceMappingURL=9345.83e021d0.chunk.js.map